var codemirror$1 = { exports: {} };
var codemirror = codemirror$1.exports;
var hasRequiredCodemirror;
function requireCodemirror() {
  if (hasRequiredCodemirror) return codemirror$1.exports;
  hasRequiredCodemirror = 1;
  (function(module, exports) {
    (function(global, factory) {
      module.exports = factory();
    })(codemirror, (function() {
      var userAgent = navigator.userAgent;
      var platform = navigator.platform;
      var gecko = /gecko\/\d/i.test(userAgent);
      var ie_upto10 = /MSIE \d/.test(userAgent);
      var ie_11up = /Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(userAgent);
      var edge = /Edge\/(\d+)/.exec(userAgent);
      var ie = ie_upto10 || ie_11up || edge;
      var ie_version = ie && (ie_upto10 ? document.documentMode || 6 : +(edge || ie_11up)[1]);
      var webkit = !edge && /WebKit\//.test(userAgent);
      var qtwebkit = webkit && /Qt\/\d+\.\d+/.test(userAgent);
      var chrome = !edge && /Chrome\/(\d+)/.exec(userAgent);
      var chrome_version = chrome && +chrome[1];
      var presto = /Opera\//.test(userAgent);
      var safari = /Apple Computer/.test(navigator.vendor);
      var mac_geMountainLion = /Mac OS X 1\d\D([8-9]|\d\d)\D/.test(userAgent);
      var phantom = /PhantomJS/.test(userAgent);
      var ios = safari && (/Mobile\/\w+/.test(userAgent) || navigator.maxTouchPoints > 2);
      var android = /Android/.test(userAgent);
      var mobile = ios || android || /webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(userAgent);
      var mac = ios || /Mac/.test(platform);
      var chromeOS = /\bCrOS\b/.test(userAgent);
      var windows = /win/i.test(platform);
      var presto_version = presto && userAgent.match(/Version\/(\d*\.\d*)/);
      if (presto_version) {
        presto_version = Number(presto_version[1]);
      }
      if (presto_version && presto_version >= 15) {
        presto = false;
        webkit = true;
      }
      var flipCtrlCmd = mac && (qtwebkit || presto && (presto_version == null || presto_version < 12.11));
      var captureRightClick = gecko || ie && ie_version >= 9;
      function classTest(cls) {
        return new RegExp("(^|\\s)" + cls + "(?:$|\\s)\\s*");
      }
      var rmClass = function(node, cls) {
        var current = node.className;
        var match = classTest(cls).exec(current);
        if (match) {
          var after = current.slice(match.index + match[0].length);
          node.className = current.slice(0, match.index) + (after ? match[1] + after : "");
        }
      };
      function removeChildren(e) {
        for (var count = e.childNodes.length; count > 0; --count) {
          e.removeChild(e.firstChild);
        }
        return e;
      }
      function removeChildrenAndAdd(parent, e) {
        return removeChildren(parent).appendChild(e);
      }
      function elt(tag, content, className, style) {
        var e = document.createElement(tag);
        if (className) {
          e.className = className;
        }
        if (style) {
          e.style.cssText = style;
        }
        if (typeof content == "string") {
          e.appendChild(document.createTextNode(content));
        } else if (content) {
          for (var i2 = 0; i2 < content.length; ++i2) {
            e.appendChild(content[i2]);
          }
        }
        return e;
      }
      function eltP(tag, content, className, style) {
        var e = elt(tag, content, className, style);
        e.setAttribute("role", "presentation");
        return e;
      }
      var range;
      if (document.createRange) {
        range = function(node, start, end, endNode) {
          var r = document.createRange();
          r.setEnd(endNode || node, end);
          r.setStart(node, start);
          return r;
        };
      } else {
        range = function(node, start, end) {
          var r = document.body.createTextRange();
          try {
            r.moveToElementText(node.parentNode);
          } catch (e) {
            return r;
          }
          r.collapse(true);
          r.moveEnd("character", end);
          r.moveStart("character", start);
          return r;
        };
      }
      function contains(parent, child) {
        if (child.nodeType == 3) {
          child = child.parentNode;
        }
        if (parent.contains) {
          return parent.contains(child);
        }
        do {
          if (child.nodeType == 11) {
            child = child.host;
          }
          if (child == parent) {
            return true;
          }
        } while (child = child.parentNode);
      }
      function activeElt(rootNode2) {
        var doc2 = rootNode2.ownerDocument || rootNode2;
        var activeElement;
        try {
          activeElement = rootNode2.activeElement;
        } catch (e) {
          activeElement = doc2.body || null;
        }
        while (activeElement && activeElement.shadowRoot && activeElement.shadowRoot.activeElement) {
          activeElement = activeElement.shadowRoot.activeElement;
        }
        return activeElement;
      }
      function addClass(node, cls) {
        var current = node.className;
        if (!classTest(cls).test(current)) {
          node.className += (current ? " " : "") + cls;
        }
      }
      function joinClasses(a, b) {
        var as = a.split(" ");
        for (var i2 = 0; i2 < as.length; i2++) {
          if (as[i2] && !classTest(as[i2]).test(b)) {
            b += " " + as[i2];
          }
        }
        return b;
      }
      var selectInput = function(node) {
        node.select();
      };
      if (ios) {
        selectInput = function(node) {
          node.selectionStart = 0;
          node.selectionEnd = node.value.length;
        };
      } else if (ie) {
        selectInput = function(node) {
          try {
            node.select();
          } catch (_e) {
          }
        };
      }
      function doc(cm) {
        return cm.display.wrapper.ownerDocument;
      }
      function root(cm) {
        return rootNode(cm.display.wrapper);
      }
      function rootNode(element) {
        return element.getRootNode ? element.getRootNode() : element.ownerDocument;
      }
      function win(cm) {
        return doc(cm).defaultView;
      }
      function bind(f) {
        var args = Array.prototype.slice.call(arguments, 1);
        return function() {
          return f.apply(null, args);
        };
      }
      function copyObj(obj, target, overwrite) {
        if (!target) {
          target = {};
        }
        for (var prop2 in obj) {
          if (obj.hasOwnProperty(prop2) && (overwrite !== false || !target.hasOwnProperty(prop2))) {
            target[prop2] = obj[prop2];
          }
        }
        return target;
      }
      function countColumn(string, end, tabSize, startIndex, startValue) {
        if (end == null) {
          end = string.search(/[^\s\u00a0]/);
          if (end == -1) {
            end = string.length;
          }
        }
        for (var i2 = startIndex || 0, n = startValue || 0; ; ) {
          var nextTab = string.indexOf("	", i2);
          if (nextTab < 0 || nextTab >= end) {
            return n + (end - i2);
          }
          n += nextTab - i2;
          n += tabSize - n % tabSize;
          i2 = nextTab + 1;
        }
      }
      var Delayed = function() {
        this.id = null;
        this.f = null;
        this.time = 0;
        this.handler = bind(this.onTimeout, this);
      };
      Delayed.prototype.onTimeout = function(self) {
        self.id = 0;
        if (self.time <= +/* @__PURE__ */ new Date()) {
          self.f();
        } else {
          setTimeout(self.handler, self.time - +/* @__PURE__ */ new Date());
        }
      };
      Delayed.prototype.set = function(ms, f) {
        this.f = f;
        var time = +/* @__PURE__ */ new Date() + ms;
        if (!this.id || time < this.time) {
          clearTimeout(this.id);
          this.id = setTimeout(this.handler, ms);
          this.time = time;
        }
      };
      function indexOf(array, elt2) {
        for (var i2 = 0; i2 < array.length; ++i2) {
          if (array[i2] == elt2) {
            return i2;
          }
        }
        return -1;
      }
      var scrollerGap = 50;
      var Pass = { toString: function() {
        return "CodeMirror.Pass";
      } };
      var sel_dontScroll = { scroll: false }, sel_mouse = { origin: "*mouse" }, sel_move = { origin: "+move" };
      function findColumn(string, goal, tabSize) {
        for (var pos = 0, col = 0; ; ) {
          var nextTab = string.indexOf("	", pos);
          if (nextTab == -1) {
            nextTab = string.length;
          }
          var skipped = nextTab - pos;
          if (nextTab == string.length || col + skipped >= goal) {
            return pos + Math.min(skipped, goal - col);
          }
          col += nextTab - pos;
          col += tabSize - col % tabSize;
          pos = nextTab + 1;
          if (col >= goal) {
            return pos;
          }
        }
      }
      var spaceStrs = [""];
      function spaceStr(n) {
        while (spaceStrs.length <= n) {
          spaceStrs.push(lst(spaceStrs) + " ");
        }
        return spaceStrs[n];
      }
      function lst(arr) {
        return arr[arr.length - 1];
      }
      function map(array, f) {
        var out = [];
        for (var i2 = 0; i2 < array.length; i2++) {
          out[i2] = f(array[i2], i2);
        }
        return out;
      }
      function insertSorted(array, value, score) {
        var pos = 0, priority = score(value);
        while (pos < array.length && score(array[pos]) <= priority) {
          pos++;
        }
        array.splice(pos, 0, value);
      }
      function nothing() {
      }
      function createObj(base, props) {
        var inst;
        if (Object.create) {
          inst = Object.create(base);
        } else {
          nothing.prototype = base;
          inst = new nothing();
        }
        if (props) {
          copyObj(props, inst);
        }
        return inst;
      }
      var nonASCIISingleCaseWordChar = /[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;
      function isWordCharBasic(ch) {
        return /\w/.test(ch) || ch > "" && (ch.toUpperCase() != ch.toLowerCase() || nonASCIISingleCaseWordChar.test(ch));
      }
      function isWordChar(ch, helper) {
        if (!helper) {
          return isWordCharBasic(ch);
        }
        if (helper.source.indexOf("\\w") > -1 && isWordCharBasic(ch)) {
          return true;
        }
        return helper.test(ch);
      }
      function isEmpty(obj) {
        for (var n in obj) {
          if (obj.hasOwnProperty(n) && obj[n]) {
            return false;
          }
        }
        return true;
      }
      var extendingChars = /[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;
      function isExtendingChar(ch) {
        return ch.charCodeAt(0) >= 768 && extendingChars.test(ch);
      }
      function skipExtendingChars(str, pos, dir) {
        while ((dir < 0 ? pos > 0 : pos < str.length) && isExtendingChar(str.charAt(pos))) {
          pos += dir;
        }
        return pos;
      }
      function findFirst(pred, from, to) {
        var dir = from > to ? -1 : 1;
        for (; ; ) {
          if (from == to) {
            return from;
          }
          var midF = (from + to) / 2, mid = dir < 0 ? Math.ceil(midF) : Math.floor(midF);
          if (mid == from) {
            return pred(mid) ? from : to;
          }
          if (pred(mid)) {
            to = mid;
          } else {
            from = mid + dir;
          }
        }
      }
      function iterateBidiSections(order, from, to, f) {
        if (!order) {
          return f(from, to, "ltr", 0);
        }
        var found = false;
        for (var i2 = 0; i2 < order.length; ++i2) {
          var part = order[i2];
          if (part.from < to && part.to > from || from == to && part.to == from) {
            f(Math.max(part.from, from), Math.min(part.to, to), part.level == 1 ? "rtl" : "ltr", i2);
            found = true;
          }
        }
        if (!found) {
          f(from, to, "ltr");
        }
      }
      var bidiOther = null;
      function getBidiPartAt(order, ch, sticky) {
        var found;
        bidiOther = null;
        for (var i2 = 0; i2 < order.length; ++i2) {
          var cur = order[i2];
          if (cur.from < ch && cur.to > ch) {
            return i2;
          }
          if (cur.to == ch) {
            if (cur.from != cur.to && sticky == "before") {
              found = i2;
            } else {
              bidiOther = i2;
            }
          }
          if (cur.from == ch) {
            if (cur.from != cur.to && sticky != "before") {
              found = i2;
            } else {
              bidiOther = i2;
            }
          }
        }
        return found != null ? found : bidiOther;
      }
      var bidiOrdering = /* @__PURE__ */ (function() {
        var lowTypes = "bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN";
        var arabicTypes = "nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";
        function charType(code) {
          if (code <= 247) {
            return lowTypes.charAt(code);
          } else if (1424 <= code && code <= 1524) {
            return "R";
          } else if (1536 <= code && code <= 1785) {
            return arabicTypes.charAt(code - 1536);
          } else if (1774 <= code && code <= 2220) {
            return "r";
          } else if (8192 <= code && code <= 8203) {
            return "w";
          } else if (code == 8204) {
            return "b";
          } else {
            return "L";
          }
        }
        var bidiRE = /[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;
        var isNeutral = /[stwN]/, isStrong = /[LRr]/, countsAsLeft = /[Lb1n]/, countsAsNum = /[1n]/;
        function BidiSpan(level, from, to) {
          this.level = level;
          this.from = from;
          this.to = to;
        }
        return function(str, direction) {
          var outerType = direction == "ltr" ? "L" : "R";
          if (str.length == 0 || direction == "ltr" && !bidiRE.test(str)) {
            return false;
          }
          var len = str.length, types = [];
          for (var i2 = 0; i2 < len; ++i2) {
            types.push(charType(str.charCodeAt(i2)));
          }
          for (var i$12 = 0, prev = outerType; i$12 < len; ++i$12) {
            var type = types[i$12];
            if (type == "m") {
              types[i$12] = prev;
            } else {
              prev = type;
            }
          }
          for (var i$22 = 0, cur = outerType; i$22 < len; ++i$22) {
            var type$1 = types[i$22];
            if (type$1 == "1" && cur == "r") {
              types[i$22] = "n";
            } else if (isStrong.test(type$1)) {
              cur = type$1;
              if (type$1 == "r") {
                types[i$22] = "R";
              }
            }
          }
          for (var i$3 = 1, prev$1 = types[0]; i$3 < len - 1; ++i$3) {
            var type$2 = types[i$3];
            if (type$2 == "+" && prev$1 == "1" && types[i$3 + 1] == "1") {
              types[i$3] = "1";
            } else if (type$2 == "," && prev$1 == types[i$3 + 1] && (prev$1 == "1" || prev$1 == "n")) {
              types[i$3] = prev$1;
            }
            prev$1 = type$2;
          }
          for (var i$4 = 0; i$4 < len; ++i$4) {
            var type$3 = types[i$4];
            if (type$3 == ",") {
              types[i$4] = "N";
            } else if (type$3 == "%") {
              var end = void 0;
              for (end = i$4 + 1; end < len && types[end] == "%"; ++end) {
              }
              var replace = i$4 && types[i$4 - 1] == "!" || end < len && types[end] == "1" ? "1" : "N";
              for (var j = i$4; j < end; ++j) {
                types[j] = replace;
              }
              i$4 = end - 1;
            }
          }
          for (var i$5 = 0, cur$1 = outerType; i$5 < len; ++i$5) {
            var type$4 = types[i$5];
            if (cur$1 == "L" && type$4 == "1") {
              types[i$5] = "L";
            } else if (isStrong.test(type$4)) {
              cur$1 = type$4;
            }
          }
          for (var i$6 = 0; i$6 < len; ++i$6) {
            if (isNeutral.test(types[i$6])) {
              var end$1 = void 0;
              for (end$1 = i$6 + 1; end$1 < len && isNeutral.test(types[end$1]); ++end$1) {
              }
              var before = (i$6 ? types[i$6 - 1] : outerType) == "L";
              var after = (end$1 < len ? types[end$1] : outerType) == "L";
              var replace$1 = before == after ? before ? "L" : "R" : outerType;
              for (var j$1 = i$6; j$1 < end$1; ++j$1) {
                types[j$1] = replace$1;
              }
              i$6 = end$1 - 1;
            }
          }
          var order = [], m;
          for (var i$7 = 0; i$7 < len; ) {
            if (countsAsLeft.test(types[i$7])) {
              var start = i$7;
              for (++i$7; i$7 < len && countsAsLeft.test(types[i$7]); ++i$7) {
              }
              order.push(new BidiSpan(0, start, i$7));
            } else {
              var pos = i$7, at = order.length, isRTL = direction == "rtl" ? 1 : 0;
              for (++i$7; i$7 < len && types[i$7] != "L"; ++i$7) {
              }
              for (var j$2 = pos; j$2 < i$7; ) {
                if (countsAsNum.test(types[j$2])) {
                  if (pos < j$2) {
                    order.splice(at, 0, new BidiSpan(1, pos, j$2));
                    at += isRTL;
                  }
                  var nstart = j$2;
                  for (++j$2; j$2 < i$7 && countsAsNum.test(types[j$2]); ++j$2) {
                  }
                  order.splice(at, 0, new BidiSpan(2, nstart, j$2));
                  at += isRTL;
                  pos = j$2;
                } else {
                  ++j$2;
                }
              }
              if (pos < i$7) {
                order.splice(at, 0, new BidiSpan(1, pos, i$7));
              }
            }
          }
          if (direction == "ltr") {
            if (order[0].level == 1 && (m = str.match(/^\s+/))) {
              order[0].from = m[0].length;
              order.unshift(new BidiSpan(0, 0, m[0].length));
            }
            if (lst(order).level == 1 && (m = str.match(/\s+$/))) {
              lst(order).to -= m[0].length;
              order.push(new BidiSpan(0, len - m[0].length, len));
            }
          }
          return direction == "rtl" ? order.reverse() : order;
        };
      })();
      function getOrder(line, direction) {
        var order = line.order;
        if (order == null) {
          order = line.order = bidiOrdering(line.text, direction);
        }
        return order;
      }
      var noHandlers = [];
      var on = function(emitter, type, f) {
        if (emitter.addEventListener) {
          emitter.addEventListener(type, f, false);
        } else if (emitter.attachEvent) {
          emitter.attachEvent("on" + type, f);
        } else {
          var map2 = emitter._handlers || (emitter._handlers = {});
          map2[type] = (map2[type] || noHandlers).concat(f);
        }
      };
      function getHandlers(emitter, type) {
        return emitter._handlers && emitter._handlers[type] || noHandlers;
      }
      function off(emitter, type, f) {
        if (emitter.removeEventListener) {
          emitter.removeEventListener(type, f, false);
        } else if (emitter.detachEvent) {
          emitter.detachEvent("on" + type, f);
        } else {
          var map2 = emitter._handlers, arr = map2 && map2[type];
          if (arr) {
            var index = indexOf(arr, f);
            if (index > -1) {
              map2[type] = arr.slice(0, index).concat(arr.slice(index + 1));
            }
          }
        }
      }
      function signal(emitter, type) {
        var handlers = getHandlers(emitter, type);
        if (!handlers.length) {
          return;
        }
        var args = Array.prototype.slice.call(arguments, 2);
        for (var i2 = 0; i2 < handlers.length; ++i2) {
          handlers[i2].apply(null, args);
        }
      }
      function signalDOMEvent(cm, e, override) {
        if (typeof e == "string") {
          e = { type: e, preventDefault: function() {
            this.defaultPrevented = true;
          } };
        }
        signal(cm, override || e.type, cm, e);
        return e_defaultPrevented(e) || e.codemirrorIgnore;
      }
      function signalCursorActivity(cm) {
        var arr = cm._handlers && cm._handlers.cursorActivity;
        if (!arr) {
          return;
        }
        var set = cm.curOp.cursorActivityHandlers || (cm.curOp.cursorActivityHandlers = []);
        for (var i2 = 0; i2 < arr.length; ++i2) {
          if (indexOf(set, arr[i2]) == -1) {
            set.push(arr[i2]);
          }
        }
      }
      function hasHandler(emitter, type) {
        return getHandlers(emitter, type).length > 0;
      }
      function eventMixin(ctor) {
        ctor.prototype.on = function(type, f) {
          on(this, type, f);
        };
        ctor.prototype.off = function(type, f) {
          off(this, type, f);
        };
      }
      function e_preventDefault(e) {
        if (e.preventDefault) {
          e.preventDefault();
        } else {
          e.returnValue = false;
        }
      }
      function e_stopPropagation(e) {
        if (e.stopPropagation) {
          e.stopPropagation();
        } else {
          e.cancelBubble = true;
        }
      }
      function e_defaultPrevented(e) {
        return e.defaultPrevented != null ? e.defaultPrevented : e.returnValue == false;
      }
      function e_stop(e) {
        e_preventDefault(e);
        e_stopPropagation(e);
      }
      function e_target(e) {
        return e.target || e.srcElement;
      }
      function e_button(e) {
        var b = e.which;
        if (b == null) {
          if (e.button & 1) {
            b = 1;
          } else if (e.button & 2) {
            b = 3;
          } else if (e.button & 4) {
            b = 2;
          }
        }
        if (mac && e.ctrlKey && b == 1) {
          b = 3;
        }
        return b;
      }
      var dragAndDrop = (function() {
        if (ie && ie_version < 9) {
          return false;
        }
        var div = elt("div");
        return "draggable" in div || "dragDrop" in div;
      })();
      var zwspSupported;
      function zeroWidthElement(measure) {
        if (zwspSupported == null) {
          var test = elt("span", "​");
          removeChildrenAndAdd(measure, elt("span", [test, document.createTextNode("x")]));
          if (measure.firstChild.offsetHeight != 0) {
            zwspSupported = test.offsetWidth <= 1 && test.offsetHeight > 2 && !(ie && ie_version < 8);
          }
        }
        var node = zwspSupported ? elt("span", "​") : elt("span", " ", null, "display: inline-block; width: 1px; margin-right: -1px");
        node.setAttribute("cm-text", "");
        return node;
      }
      var badBidiRects;
      function hasBadBidiRects(measure) {
        if (badBidiRects != null) {
          return badBidiRects;
        }
        var txt = removeChildrenAndAdd(measure, document.createTextNode("AخA"));
        var r0 = range(txt, 0, 1).getBoundingClientRect();
        var r1 = range(txt, 1, 2).getBoundingClientRect();
        removeChildren(measure);
        if (!r0 || r0.left == r0.right) {
          return false;
        }
        return badBidiRects = r1.right - r0.right < 3;
      }
      var splitLinesAuto = "\n\nb".split(/\n/).length != 3 ? function(string) {
        var pos = 0, result = [], l = string.length;
        while (pos <= l) {
          var nl = string.indexOf("\n", pos);
          if (nl == -1) {
            nl = string.length;
          }
          var line = string.slice(pos, string.charAt(nl - 1) == "\r" ? nl - 1 : nl);
          var rt = line.indexOf("\r");
          if (rt != -1) {
            result.push(line.slice(0, rt));
            pos += rt + 1;
          } else {
            result.push(line);
            pos = nl + 1;
          }
        }
        return result;
      } : function(string) {
        return string.split(/\r\n?|\n/);
      };
      var hasSelection = window.getSelection ? function(te) {
        try {
          return te.selectionStart != te.selectionEnd;
        } catch (e) {
          return false;
        }
      } : function(te) {
        var range2;
        try {
          range2 = te.ownerDocument.selection.createRange();
        } catch (e) {
        }
        if (!range2 || range2.parentElement() != te) {
          return false;
        }
        return range2.compareEndPoints("StartToEnd", range2) != 0;
      };
      var hasCopyEvent = (function() {
        var e = elt("div");
        if ("oncopy" in e) {
          return true;
        }
        e.setAttribute("oncopy", "return;");
        return typeof e.oncopy == "function";
      })();
      var badZoomedRects = null;
      function hasBadZoomedRects(measure) {
        if (badZoomedRects != null) {
          return badZoomedRects;
        }
        var node = removeChildrenAndAdd(measure, elt("span", "x"));
        var normal = node.getBoundingClientRect();
        var fromRange = range(node, 0, 1).getBoundingClientRect();
        return badZoomedRects = Math.abs(normal.left - fromRange.left) > 1;
      }
      var modes = {}, mimeModes = {};
      function defineMode(name, mode) {
        if (arguments.length > 2) {
          mode.dependencies = Array.prototype.slice.call(arguments, 2);
        }
        modes[name] = mode;
      }
      function defineMIME(mime, spec) {
        mimeModes[mime] = spec;
      }
      function resolveMode(spec) {
        if (typeof spec == "string" && mimeModes.hasOwnProperty(spec)) {
          spec = mimeModes[spec];
        } else if (spec && typeof spec.name == "string" && mimeModes.hasOwnProperty(spec.name)) {
          var found = mimeModes[spec.name];
          if (typeof found == "string") {
            found = { name: found };
          }
          spec = createObj(found, spec);
          spec.name = found.name;
        } else if (typeof spec == "string" && /^[\w\-]+\/[\w\-]+\+xml$/.test(spec)) {
          return resolveMode("application/xml");
        } else if (typeof spec == "string" && /^[\w\-]+\/[\w\-]+\+json$/.test(spec)) {
          return resolveMode("application/json");
        }
        if (typeof spec == "string") {
          return { name: spec };
        } else {
          return spec || { name: "null" };
        }
      }
      function getMode(options, spec) {
        spec = resolveMode(spec);
        var mfactory = modes[spec.name];
        if (!mfactory) {
          return getMode(options, "text/plain");
        }
        var modeObj = mfactory(options, spec);
        if (modeExtensions.hasOwnProperty(spec.name)) {
          var exts = modeExtensions[spec.name];
          for (var prop2 in exts) {
            if (!exts.hasOwnProperty(prop2)) {
              continue;
            }
            if (modeObj.hasOwnProperty(prop2)) {
              modeObj["_" + prop2] = modeObj[prop2];
            }
            modeObj[prop2] = exts[prop2];
          }
        }
        modeObj.name = spec.name;
        if (spec.helperType) {
          modeObj.helperType = spec.helperType;
        }
        if (spec.modeProps) {
          for (var prop$1 in spec.modeProps) {
            modeObj[prop$1] = spec.modeProps[prop$1];
          }
        }
        return modeObj;
      }
      var modeExtensions = {};
      function extendMode(mode, properties) {
        var exts = modeExtensions.hasOwnProperty(mode) ? modeExtensions[mode] : modeExtensions[mode] = {};
        copyObj(properties, exts);
      }
      function copyState(mode, state) {
        if (state === true) {
          return state;
        }
        if (mode.copyState) {
          return mode.copyState(state);
        }
        var nstate = {};
        for (var n in state) {
          var val = state[n];
          if (val instanceof Array) {
            val = val.concat([]);
          }
          nstate[n] = val;
        }
        return nstate;
      }
      function innerMode(mode, state) {
        var info;
        while (mode.innerMode) {
          info = mode.innerMode(state);
          if (!info || info.mode == mode) {
            break;
          }
          state = info.state;
          mode = info.mode;
        }
        return info || { mode, state };
      }
      function startState(mode, a1, a2) {
        return mode.startState ? mode.startState(a1, a2) : true;
      }
      var StringStream = function(string, tabSize, lineOracle) {
        this.pos = this.start = 0;
        this.string = string;
        this.tabSize = tabSize || 8;
        this.lastColumnPos = this.lastColumnValue = 0;
        this.lineStart = 0;
        this.lineOracle = lineOracle;
      };
      StringStream.prototype.eol = function() {
        return this.pos >= this.string.length;
      };
      StringStream.prototype.sol = function() {
        return this.pos == this.lineStart;
      };
      StringStream.prototype.peek = function() {
        return this.string.charAt(this.pos) || void 0;
      };
      StringStream.prototype.next = function() {
        if (this.pos < this.string.length) {
          return this.string.charAt(this.pos++);
        }
      };
      StringStream.prototype.eat = function(match) {
        var ch = this.string.charAt(this.pos);
        var ok;
        if (typeof match == "string") {
          ok = ch == match;
        } else {
          ok = ch && (match.test ? match.test(ch) : match(ch));
        }
        if (ok) {
          ++this.pos;
          return ch;
        }
      };
      StringStream.prototype.eatWhile = function(match) {
        var start = this.pos;
        while (this.eat(match)) {
        }
        return this.pos > start;
      };
      StringStream.prototype.eatSpace = function() {
        var start = this.pos;
        while (/[\s\u00a0]/.test(this.string.charAt(this.pos))) {
          ++this.pos;
        }
        return this.pos > start;
      };
      StringStream.prototype.skipToEnd = function() {
        this.pos = this.string.length;
      };
      StringStream.prototype.skipTo = function(ch) {
        var found = this.string.indexOf(ch, this.pos);
        if (found > -1) {
          this.pos = found;
          return true;
        }
      };
      StringStream.prototype.backUp = function(n) {
        this.pos -= n;
      };
      StringStream.prototype.column = function() {
        if (this.lastColumnPos < this.start) {
          this.lastColumnValue = countColumn(this.string, this.start, this.tabSize, this.lastColumnPos, this.lastColumnValue);
          this.lastColumnPos = this.start;
        }
        return this.lastColumnValue - (this.lineStart ? countColumn(this.string, this.lineStart, this.tabSize) : 0);
      };
      StringStream.prototype.indentation = function() {
        return countColumn(this.string, null, this.tabSize) - (this.lineStart ? countColumn(this.string, this.lineStart, this.tabSize) : 0);
      };
      StringStream.prototype.match = function(pattern, consume, caseInsensitive) {
        if (typeof pattern == "string") {
          var cased = function(str) {
            return caseInsensitive ? str.toLowerCase() : str;
          };
          var substr = this.string.substr(this.pos, pattern.length);
          if (cased(substr) == cased(pattern)) {
            if (consume !== false) {
              this.pos += pattern.length;
            }
            return true;
          }
        } else {
          var match = this.string.slice(this.pos).match(pattern);
          if (match && match.index > 0) {
            return null;
          }
          if (match && consume !== false) {
            this.pos += match[0].length;
          }
          return match;
        }
      };
      StringStream.prototype.current = function() {
        return this.string.slice(this.start, this.pos);
      };
      StringStream.prototype.hideFirstChars = function(n, inner) {
        this.lineStart += n;
        try {
          return inner();
        } finally {
          this.lineStart -= n;
        }
      };
      StringStream.prototype.lookAhead = function(n) {
        var oracle = this.lineOracle;
        return oracle && oracle.lookAhead(n);
      };
      StringStream.prototype.baseToken = function() {
        var oracle = this.lineOracle;
        return oracle && oracle.baseToken(this.pos);
      };
      function getLine(doc2, n) {
        n -= doc2.first;
        if (n < 0 || n >= doc2.size) {
          throw new Error("There is no line " + (n + doc2.first) + " in the document.");
        }
        var chunk = doc2;
        while (!chunk.lines) {
          for (var i2 = 0; ; ++i2) {
            var child = chunk.children[i2], sz = child.chunkSize();
            if (n < sz) {
              chunk = child;
              break;
            }
            n -= sz;
          }
        }
        return chunk.lines[n];
      }
      function getBetween(doc2, start, end) {
        var out = [], n = start.line;
        doc2.iter(start.line, end.line + 1, function(line) {
          var text = line.text;
          if (n == end.line) {
            text = text.slice(0, end.ch);
          }
          if (n == start.line) {
            text = text.slice(start.ch);
          }
          out.push(text);
          ++n;
        });
        return out;
      }
      function getLines(doc2, from, to) {
        var out = [];
        doc2.iter(from, to, function(line) {
          out.push(line.text);
        });
        return out;
      }
      function updateLineHeight(line, height) {
        var diff = height - line.height;
        if (diff) {
          for (var n = line; n; n = n.parent) {
            n.height += diff;
          }
        }
      }
      function lineNo(line) {
        if (line.parent == null) {
          return null;
        }
        var cur = line.parent, no = indexOf(cur.lines, line);
        for (var chunk = cur.parent; chunk; cur = chunk, chunk = chunk.parent) {
          for (var i2 = 0; ; ++i2) {
            if (chunk.children[i2] == cur) {
              break;
            }
            no += chunk.children[i2].chunkSize();
          }
        }
        return no + cur.first;
      }
      function lineAtHeight(chunk, h) {
        var n = chunk.first;
        outer: do {
          for (var i$12 = 0; i$12 < chunk.children.length; ++i$12) {
            var child = chunk.children[i$12], ch = child.height;
            if (h < ch) {
              chunk = child;
              continue outer;
            }
            h -= ch;
            n += child.chunkSize();
          }
          return n;
        } while (!chunk.lines);
        var i2 = 0;
        for (; i2 < chunk.lines.length; ++i2) {
          var line = chunk.lines[i2], lh = line.height;
          if (h < lh) {
            break;
          }
          h -= lh;
        }
        return n + i2;
      }
      function isLine(doc2, l) {
        return l >= doc2.first && l < doc2.first + doc2.size;
      }
      function lineNumberFor(options, i2) {
        return String(options.lineNumberFormatter(i2 + options.firstLineNumber));
      }
      function Pos(line, ch, sticky) {
        if (sticky === void 0) sticky = null;
        if (!(this instanceof Pos)) {
          return new Pos(line, ch, sticky);
        }
        this.line = line;
        this.ch = ch;
        this.sticky = sticky;
      }
      function cmp(a, b) {
        return a.line - b.line || a.ch - b.ch;
      }
      function equalCursorPos(a, b) {
        return a.sticky == b.sticky && cmp(a, b) == 0;
      }
      function copyPos(x) {
        return Pos(x.line, x.ch);
      }
      function maxPos(a, b) {
        return cmp(a, b) < 0 ? b : a;
      }
      function minPos(a, b) {
        return cmp(a, b) < 0 ? a : b;
      }
      function clipLine(doc2, n) {
        return Math.max(doc2.first, Math.min(n, doc2.first + doc2.size - 1));
      }
      function clipPos(doc2, pos) {
        if (pos.line < doc2.first) {
          return Pos(doc2.first, 0);
        }
        var last = doc2.first + doc2.size - 1;
        if (pos.line > last) {
          return Pos(last, getLine(doc2, last).text.length);
        }
        return clipToLen(pos, getLine(doc2, pos.line).text.length);
      }
      function clipToLen(pos, linelen) {
        var ch = pos.ch;
        if (ch == null || ch > linelen) {
          return Pos(pos.line, linelen);
        } else if (ch < 0) {
          return Pos(pos.line, 0);
        } else {
          return pos;
        }
      }
      function clipPosArray(doc2, array) {
        var out = [];
        for (var i2 = 0; i2 < array.length; i2++) {
          out[i2] = clipPos(doc2, array[i2]);
        }
        return out;
      }
      var SavedContext = function(state, lookAhead) {
        this.state = state;
        this.lookAhead = lookAhead;
      };
      var Context = function(doc2, state, line, lookAhead) {
        this.state = state;
        this.doc = doc2;
        this.line = line;
        this.maxLookAhead = lookAhead || 0;
        this.baseTokens = null;
        this.baseTokenPos = 1;
      };
      Context.prototype.lookAhead = function(n) {
        var line = this.doc.getLine(this.line + n);
        if (line != null && n > this.maxLookAhead) {
          this.maxLookAhead = n;
        }
        return line;
      };
      Context.prototype.baseToken = function(n) {
        if (!this.baseTokens) {
          return null;
        }
        while (this.baseTokens[this.baseTokenPos] <= n) {
          this.baseTokenPos += 2;
        }
        var type = this.baseTokens[this.baseTokenPos + 1];
        return {
          type: type && type.replace(/( |^)overlay .*/, ""),
          size: this.baseTokens[this.baseTokenPos] - n
        };
      };
      Context.prototype.nextLine = function() {
        this.line++;
        if (this.maxLookAhead > 0) {
          this.maxLookAhead--;
        }
      };
      Context.fromSaved = function(doc2, saved, line) {
        if (saved instanceof SavedContext) {
          return new Context(doc2, copyState(doc2.mode, saved.state), line, saved.lookAhead);
        } else {
          return new Context(doc2, copyState(doc2.mode, saved), line);
        }
      };
      Context.prototype.save = function(copy) {
        var state = copy !== false ? copyState(this.doc.mode, this.state) : this.state;
        return this.maxLookAhead > 0 ? new SavedContext(state, this.maxLookAhead) : state;
      };
      function highlightLine(cm, line, context, forceToEnd) {
        var st = [cm.state.modeGen], lineClasses = {};
        runMode(
          cm,
          line.text,
          cm.doc.mode,
          context,
          function(end, style) {
            return st.push(end, style);
          },
          lineClasses,
          forceToEnd
        );
        var state = context.state;
        var loop = function(o2) {
          context.baseTokens = st;
          var overlay = cm.state.overlays[o2], i2 = 1, at = 0;
          context.state = true;
          runMode(cm, line.text, overlay.mode, context, function(end, style) {
            var start = i2;
            while (at < end) {
              var i_end = st[i2];
              if (i_end > end) {
                st.splice(i2, 1, end, st[i2 + 1], i_end);
              }
              i2 += 2;
              at = Math.min(end, i_end);
            }
            if (!style) {
              return;
            }
            if (overlay.opaque) {
              st.splice(start, i2 - start, end, "overlay " + style);
              i2 = start + 2;
            } else {
              for (; start < i2; start += 2) {
                var cur = st[start + 1];
                st[start + 1] = (cur ? cur + " " : "") + "overlay " + style;
              }
            }
          }, lineClasses);
          context.state = state;
          context.baseTokens = null;
          context.baseTokenPos = 1;
        };
        for (var o = 0; o < cm.state.overlays.length; ++o) loop(o);
        return { styles: st, classes: lineClasses.bgClass || lineClasses.textClass ? lineClasses : null };
      }
      function getLineStyles(cm, line, updateFrontier) {
        if (!line.styles || line.styles[0] != cm.state.modeGen) {
          var context = getContextBefore(cm, lineNo(line));
          var resetState = line.text.length > cm.options.maxHighlightLength && copyState(cm.doc.mode, context.state);
          var result = highlightLine(cm, line, context);
          if (resetState) {
            context.state = resetState;
          }
          line.stateAfter = context.save(!resetState);
          line.styles = result.styles;
          if (result.classes) {
            line.styleClasses = result.classes;
          } else if (line.styleClasses) {
            line.styleClasses = null;
          }
          if (updateFrontier === cm.doc.highlightFrontier) {
            cm.doc.modeFrontier = Math.max(cm.doc.modeFrontier, ++cm.doc.highlightFrontier);
          }
        }
        return line.styles;
      }
      function getContextBefore(cm, n, precise) {
        var doc2 = cm.doc, display = cm.display;
        if (!doc2.mode.startState) {
          return new Context(doc2, true, n);
        }
        var start = findStartLine(cm, n, precise);
        var saved = start > doc2.first && getLine(doc2, start - 1).stateAfter;
        var context = saved ? Context.fromSaved(doc2, saved, start) : new Context(doc2, startState(doc2.mode), start);
        doc2.iter(start, n, function(line) {
          processLine(cm, line.text, context);
          var pos = context.line;
          line.stateAfter = pos == n - 1 || pos % 5 == 0 || pos >= display.viewFrom && pos < display.viewTo ? context.save() : null;
          context.nextLine();
        });
        if (precise) {
          doc2.modeFrontier = context.line;
        }
        return context;
      }
      function processLine(cm, text, context, startAt) {
        var mode = cm.doc.mode;
        var stream = new StringStream(text, cm.options.tabSize, context);
        stream.start = stream.pos = startAt || 0;
        if (text == "") {
          callBlankLine(mode, context.state);
        }
        while (!stream.eol()) {
          readToken(mode, stream, context.state);
          stream.start = stream.pos;
        }
      }
      function callBlankLine(mode, state) {
        if (mode.blankLine) {
          return mode.blankLine(state);
        }
        if (!mode.innerMode) {
          return;
        }
        var inner = innerMode(mode, state);
        if (inner.mode.blankLine) {
          return inner.mode.blankLine(inner.state);
        }
      }
      function readToken(mode, stream, state, inner) {
        for (var i2 = 0; i2 < 10; i2++) {
          if (inner) {
            inner[0] = innerMode(mode, state).mode;
          }
          var style = mode.token(stream, state);
          if (stream.pos > stream.start) {
            return style;
          }
        }
        throw new Error("Mode " + mode.name + " failed to advance stream.");
      }
      var Token = function(stream, type, state) {
        this.start = stream.start;
        this.end = stream.pos;
        this.string = stream.current();
        this.type = type || null;
        this.state = state;
      };
      function takeToken(cm, pos, precise, asArray) {
        var doc2 = cm.doc, mode = doc2.mode, style;
        pos = clipPos(doc2, pos);
        var line = getLine(doc2, pos.line), context = getContextBefore(cm, pos.line, precise);
        var stream = new StringStream(line.text, cm.options.tabSize, context), tokens;
        if (asArray) {
          tokens = [];
        }
        while ((asArray || stream.pos < pos.ch) && !stream.eol()) {
          stream.start = stream.pos;
          style = readToken(mode, stream, context.state);
          if (asArray) {
            tokens.push(new Token(stream, style, copyState(doc2.mode, context.state)));
          }
        }
        return asArray ? tokens : new Token(stream, style, context.state);
      }
      function extractLineClasses(type, output) {
        if (type) {
          for (; ; ) {
            var lineClass = type.match(/(?:^|\s+)line-(background-)?(\S+)/);
            if (!lineClass) {
              break;
            }
            type = type.slice(0, lineClass.index) + type.slice(lineClass.index + lineClass[0].length);
            var prop2 = lineClass[1] ? "bgClass" : "textClass";
            if (output[prop2] == null) {
              output[prop2] = lineClass[2];
            } else if (!new RegExp("(?:^|\\s)" + lineClass[2] + "(?:$|\\s)").test(output[prop2])) {
              output[prop2] += " " + lineClass[2];
            }
          }
        }
        return type;
      }
      function runMode(cm, text, mode, context, f, lineClasses, forceToEnd) {
        var flattenSpans = mode.flattenSpans;
        if (flattenSpans == null) {
          flattenSpans = cm.options.flattenSpans;
        }
        var curStart = 0, curStyle = null;
        var stream = new StringStream(text, cm.options.tabSize, context), style;
        var inner = cm.options.addModeClass && [null];
        if (text == "") {
          extractLineClasses(callBlankLine(mode, context.state), lineClasses);
        }
        while (!stream.eol()) {
          if (stream.pos > cm.options.maxHighlightLength) {
            flattenSpans = false;
            if (forceToEnd) {
              processLine(cm, text, context, stream.pos);
            }
            stream.pos = text.length;
            style = null;
          } else {
            style = extractLineClasses(readToken(mode, stream, context.state, inner), lineClasses);
          }
          if (inner) {
            var mName = inner[0].name;
            if (mName) {
              style = "m-" + (style ? mName + " " + style : mName);
            }
          }
          if (!flattenSpans || curStyle != style) {
            while (curStart < stream.start) {
              curStart = Math.min(stream.start, curStart + 5e3);
              f(curStart, curStyle);
            }
            curStyle = style;
          }
          stream.start = stream.pos;
        }
        while (curStart < stream.pos) {
          var pos = Math.min(stream.pos, curStart + 5e3);
          f(pos, curStyle);
          curStart = pos;
        }
      }
      function findStartLine(cm, n, precise) {
        var minindent, minline, doc2 = cm.doc;
        var lim = precise ? -1 : n - (cm.doc.mode.innerMode ? 1e3 : 100);
        for (var search = n; search > lim; --search) {
          if (search <= doc2.first) {
            return doc2.first;
          }
          var line = getLine(doc2, search - 1), after = line.stateAfter;
          if (after && (!precise || search + (after instanceof SavedContext ? after.lookAhead : 0) <= doc2.modeFrontier)) {
            return search;
          }
          var indented = countColumn(line.text, null, cm.options.tabSize);
          if (minline == null || minindent > indented) {
            minline = search - 1;
            minindent = indented;
          }
        }
        return minline;
      }
      function retreatFrontier(doc2, n) {
        doc2.modeFrontier = Math.min(doc2.modeFrontier, n);
        if (doc2.highlightFrontier < n - 10) {
          return;
        }
        var start = doc2.first;
        for (var line = n - 1; line > start; line--) {
          var saved = getLine(doc2, line).stateAfter;
          if (saved && (!(saved instanceof SavedContext) || line + saved.lookAhead < n)) {
            start = line + 1;
            break;
          }
        }
        doc2.highlightFrontier = Math.min(doc2.highlightFrontier, start);
      }
      var sawReadOnlySpans = false, sawCollapsedSpans = false;
      function seeReadOnlySpans() {
        sawReadOnlySpans = true;
      }
      function seeCollapsedSpans() {
        sawCollapsedSpans = true;
      }
      function MarkedSpan(marker, from, to) {
        this.marker = marker;
        this.from = from;
        this.to = to;
      }
      function getMarkedSpanFor(spans, marker) {
        if (spans) {
          for (var i2 = 0; i2 < spans.length; ++i2) {
            var span = spans[i2];
            if (span.marker == marker) {
              return span;
            }
          }
        }
      }
      function removeMarkedSpan(spans, span) {
        var r;
        for (var i2 = 0; i2 < spans.length; ++i2) {
          if (spans[i2] != span) {
            (r || (r = [])).push(spans[i2]);
          }
        }
        return r;
      }
      function addMarkedSpan(line, span, op) {
        var inThisOp = op && window.WeakSet && (op.markedSpans || (op.markedSpans = /* @__PURE__ */ new WeakSet()));
        if (inThisOp && line.markedSpans && inThisOp.has(line.markedSpans)) {
          line.markedSpans.push(span);
        } else {
          line.markedSpans = line.markedSpans ? line.markedSpans.concat([span]) : [span];
          if (inThisOp) {
            inThisOp.add(line.markedSpans);
          }
        }
        span.marker.attachLine(line);
      }
      function markedSpansBefore(old, startCh, isInsert) {
        var nw;
        if (old) {
          for (var i2 = 0; i2 < old.length; ++i2) {
            var span = old[i2], marker = span.marker;
            var startsBefore = span.from == null || (marker.inclusiveLeft ? span.from <= startCh : span.from < startCh);
            if (startsBefore || span.from == startCh && marker.type == "bookmark" && (!isInsert || !span.marker.insertLeft)) {
              var endsAfter = span.to == null || (marker.inclusiveRight ? span.to >= startCh : span.to > startCh);
              (nw || (nw = [])).push(new MarkedSpan(marker, span.from, endsAfter ? null : span.to));
            }
          }
        }
        return nw;
      }
      function markedSpansAfter(old, endCh, isInsert) {
        var nw;
        if (old) {
          for (var i2 = 0; i2 < old.length; ++i2) {
            var span = old[i2], marker = span.marker;
            var endsAfter = span.to == null || (marker.inclusiveRight ? span.to >= endCh : span.to > endCh);
            if (endsAfter || span.from == endCh && marker.type == "bookmark" && (!isInsert || span.marker.insertLeft)) {
              var startsBefore = span.from == null || (marker.inclusiveLeft ? span.from <= endCh : span.from < endCh);
              (nw || (nw = [])).push(new MarkedSpan(
                marker,
                startsBefore ? null : span.from - endCh,
                span.to == null ? null : span.to - endCh
              ));
            }
          }
        }
        return nw;
      }
      function stretchSpansOverChange(doc2, change) {
        if (change.full) {
          return null;
        }
        var oldFirst = isLine(doc2, change.from.line) && getLine(doc2, change.from.line).markedSpans;
        var oldLast = isLine(doc2, change.to.line) && getLine(doc2, change.to.line).markedSpans;
        if (!oldFirst && !oldLast) {
          return null;
        }
        var startCh = change.from.ch, endCh = change.to.ch, isInsert = cmp(change.from, change.to) == 0;
        var first = markedSpansBefore(oldFirst, startCh, isInsert);
        var last = markedSpansAfter(oldLast, endCh, isInsert);
        var sameLine = change.text.length == 1, offset = lst(change.text).length + (sameLine ? startCh : 0);
        if (first) {
          for (var i2 = 0; i2 < first.length; ++i2) {
            var span = first[i2];
            if (span.to == null) {
              var found = getMarkedSpanFor(last, span.marker);
              if (!found) {
                span.to = startCh;
              } else if (sameLine) {
                span.to = found.to == null ? null : found.to + offset;
              }
            }
          }
        }
        if (last) {
          for (var i$12 = 0; i$12 < last.length; ++i$12) {
            var span$1 = last[i$12];
            if (span$1.to != null) {
              span$1.to += offset;
            }
            if (span$1.from == null) {
              var found$1 = getMarkedSpanFor(first, span$1.marker);
              if (!found$1) {
                span$1.from = offset;
                if (sameLine) {
                  (first || (first = [])).push(span$1);
                }
              }
            } else {
              span$1.from += offset;
              if (sameLine) {
                (first || (first = [])).push(span$1);
              }
            }
          }
        }
        if (first) {
          first = clearEmptySpans(first);
        }
        if (last && last != first) {
          last = clearEmptySpans(last);
        }
        var newMarkers = [first];
        if (!sameLine) {
          var gap = change.text.length - 2, gapMarkers;
          if (gap > 0 && first) {
            for (var i$22 = 0; i$22 < first.length; ++i$22) {
              if (first[i$22].to == null) {
                (gapMarkers || (gapMarkers = [])).push(new MarkedSpan(first[i$22].marker, null, null));
              }
            }
          }
          for (var i$3 = 0; i$3 < gap; ++i$3) {
            newMarkers.push(gapMarkers);
          }
          newMarkers.push(last);
        }
        return newMarkers;
      }
      function clearEmptySpans(spans) {
        for (var i2 = 0; i2 < spans.length; ++i2) {
          var span = spans[i2];
          if (span.from != null && span.from == span.to && span.marker.clearWhenEmpty !== false) {
            spans.splice(i2--, 1);
          }
        }
        if (!spans.length) {
          return null;
        }
        return spans;
      }
      function removeReadOnlyRanges(doc2, from, to) {
        var markers = null;
        doc2.iter(from.line, to.line + 1, function(line) {
          if (line.markedSpans) {
            for (var i3 = 0; i3 < line.markedSpans.length; ++i3) {
              var mark = line.markedSpans[i3].marker;
              if (mark.readOnly && (!markers || indexOf(markers, mark) == -1)) {
                (markers || (markers = [])).push(mark);
              }
            }
          }
        });
        if (!markers) {
          return null;
        }
        var parts = [{ from, to }];
        for (var i2 = 0; i2 < markers.length; ++i2) {
          var mk = markers[i2], m = mk.find(0);
          for (var j = 0; j < parts.length; ++j) {
            var p = parts[j];
            if (cmp(p.to, m.from) < 0 || cmp(p.from, m.to) > 0) {
              continue;
            }
            var newParts = [j, 1], dfrom = cmp(p.from, m.from), dto = cmp(p.to, m.to);
            if (dfrom < 0 || !mk.inclusiveLeft && !dfrom) {
              newParts.push({ from: p.from, to: m.from });
            }
            if (dto > 0 || !mk.inclusiveRight && !dto) {
              newParts.push({ from: m.to, to: p.to });
            }
            parts.splice.apply(parts, newParts);
            j += newParts.length - 3;
          }
        }
        return parts;
      }
      function detachMarkedSpans(line) {
        var spans = line.markedSpans;
        if (!spans) {
          return;
        }
        for (var i2 = 0; i2 < spans.length; ++i2) {
          spans[i2].marker.detachLine(line);
        }
        line.markedSpans = null;
      }
      function attachMarkedSpans(line, spans) {
        if (!spans) {
          return;
        }
        for (var i2 = 0; i2 < spans.length; ++i2) {
          spans[i2].marker.attachLine(line);
        }
        line.markedSpans = spans;
      }
      function extraLeft(marker) {
        return marker.inclusiveLeft ? -1 : 0;
      }
      function extraRight(marker) {
        return marker.inclusiveRight ? 1 : 0;
      }
      function compareCollapsedMarkers(a, b) {
        var lenDiff = a.lines.length - b.lines.length;
        if (lenDiff != 0) {
          return lenDiff;
        }
        var aPos = a.find(), bPos = b.find();
        var fromCmp = cmp(aPos.from, bPos.from) || extraLeft(a) - extraLeft(b);
        if (fromCmp) {
          return -fromCmp;
        }
        var toCmp = cmp(aPos.to, bPos.to) || extraRight(a) - extraRight(b);
        if (toCmp) {
          return toCmp;
        }
        return b.id - a.id;
      }
      function collapsedSpanAtSide(line, start) {
        var sps = sawCollapsedSpans && line.markedSpans, found;
        if (sps) {
          for (var sp = void 0, i2 = 0; i2 < sps.length; ++i2) {
            sp = sps[i2];
            if (sp.marker.collapsed && (start ? sp.from : sp.to) == null && (!found || compareCollapsedMarkers(found, sp.marker) < 0)) {
              found = sp.marker;
            }
          }
        }
        return found;
      }
      function collapsedSpanAtStart(line) {
        return collapsedSpanAtSide(line, true);
      }
      function collapsedSpanAtEnd(line) {
        return collapsedSpanAtSide(line, false);
      }
      function collapsedSpanAround(line, ch) {
        var sps = sawCollapsedSpans && line.markedSpans, found;
        if (sps) {
          for (var i2 = 0; i2 < sps.length; ++i2) {
            var sp = sps[i2];
            if (sp.marker.collapsed && (sp.from == null || sp.from < ch) && (sp.to == null || sp.to > ch) && (!found || compareCollapsedMarkers(found, sp.marker) < 0)) {
              found = sp.marker;
            }
          }
        }
        return found;
      }
      function conflictingCollapsedRange(doc2, lineNo2, from, to, marker) {
        var line = getLine(doc2, lineNo2);
        var sps = sawCollapsedSpans && line.markedSpans;
        if (sps) {
          for (var i2 = 0; i2 < sps.length; ++i2) {
            var sp = sps[i2];
            if (!sp.marker.collapsed) {
              continue;
            }
            var found = sp.marker.find(0);
            var fromCmp = cmp(found.from, from) || extraLeft(sp.marker) - extraLeft(marker);
            var toCmp = cmp(found.to, to) || extraRight(sp.marker) - extraRight(marker);
            if (fromCmp >= 0 && toCmp <= 0 || fromCmp <= 0 && toCmp >= 0) {
              continue;
            }
            if (fromCmp <= 0 && (sp.marker.inclusiveRight && marker.inclusiveLeft ? cmp(found.to, from) >= 0 : cmp(found.to, from) > 0) || fromCmp >= 0 && (sp.marker.inclusiveRight && marker.inclusiveLeft ? cmp(found.from, to) <= 0 : cmp(found.from, to) < 0)) {
              return true;
            }
          }
        }
      }
      function visualLine(line) {
        var merged;
        while (merged = collapsedSpanAtStart(line)) {
          line = merged.find(-1, true).line;
        }
        return line;
      }
      function visualLineEnd(line) {
        var merged;
        while (merged = collapsedSpanAtEnd(line)) {
          line = merged.find(1, true).line;
        }
        return line;
      }
      function visualLineContinued(line) {
        var merged, lines;
        while (merged = collapsedSpanAtEnd(line)) {
          line = merged.find(1, true).line;
          (lines || (lines = [])).push(line);
        }
        return lines;
      }
      function visualLineNo(doc2, lineN) {
        var line = getLine(doc2, lineN), vis = visualLine(line);
        if (line == vis) {
          return lineN;
        }
        return lineNo(vis);
      }
      function visualLineEndNo(doc2, lineN) {
        if (lineN > doc2.lastLine()) {
          return lineN;
        }
        var line = getLine(doc2, lineN), merged;
        if (!lineIsHidden(doc2, line)) {
          return lineN;
        }
        while (merged = collapsedSpanAtEnd(line)) {
          line = merged.find(1, true).line;
        }
        return lineNo(line) + 1;
      }
      function lineIsHidden(doc2, line) {
        var sps = sawCollapsedSpans && line.markedSpans;
        if (sps) {
          for (var sp = void 0, i2 = 0; i2 < sps.length; ++i2) {
            sp = sps[i2];
            if (!sp.marker.collapsed) {
              continue;
            }
            if (sp.from == null) {
              return true;
            }
            if (sp.marker.widgetNode) {
              continue;
            }
            if (sp.from == 0 && sp.marker.inclusiveLeft && lineIsHiddenInner(doc2, line, sp)) {
              return true;
            }
          }
        }
      }
      function lineIsHiddenInner(doc2, line, span) {
        if (span.to == null) {
          var end = span.marker.find(1, true);
          return lineIsHiddenInner(doc2, end.line, getMarkedSpanFor(end.line.markedSpans, span.marker));
        }
        if (span.marker.inclusiveRight && span.to == line.text.length) {
          return true;
        }
        for (var sp = void 0, i2 = 0; i2 < line.markedSpans.length; ++i2) {
          sp = line.markedSpans[i2];
          if (sp.marker.collapsed && !sp.marker.widgetNode && sp.from == span.to && (sp.to == null || sp.to != span.from) && (sp.marker.inclusiveLeft || span.marker.inclusiveRight) && lineIsHiddenInner(doc2, line, sp)) {
            return true;
          }
        }
      }
      function heightAtLine(lineObj) {
        lineObj = visualLine(lineObj);
        var h = 0, chunk = lineObj.parent;
        for (var i2 = 0; i2 < chunk.lines.length; ++i2) {
          var line = chunk.lines[i2];
          if (line == lineObj) {
            break;
          } else {
            h += line.height;
          }
        }
        for (var p = chunk.parent; p; chunk = p, p = chunk.parent) {
          for (var i$12 = 0; i$12 < p.children.length; ++i$12) {
            var cur = p.children[i$12];
            if (cur == chunk) {
              break;
            } else {
              h += cur.height;
            }
          }
        }
        return h;
      }
      function lineLength(line) {
        if (line.height == 0) {
          return 0;
        }
        var len = line.text.length, merged, cur = line;
        while (merged = collapsedSpanAtStart(cur)) {
          var found = merged.find(0, true);
          cur = found.from.line;
          len += found.from.ch - found.to.ch;
        }
        cur = line;
        while (merged = collapsedSpanAtEnd(cur)) {
          var found$1 = merged.find(0, true);
          len -= cur.text.length - found$1.from.ch;
          cur = found$1.to.line;
          len += cur.text.length - found$1.to.ch;
        }
        return len;
      }
      function findMaxLine(cm) {
        var d = cm.display, doc2 = cm.doc;
        d.maxLine = getLine(doc2, doc2.first);
        d.maxLineLength = lineLength(d.maxLine);
        d.maxLineChanged = true;
        doc2.iter(function(line) {
          var len = lineLength(line);
          if (len > d.maxLineLength) {
            d.maxLineLength = len;
            d.maxLine = line;
          }
        });
      }
      var Line = function(text, markedSpans, estimateHeight2) {
        this.text = text;
        attachMarkedSpans(this, markedSpans);
        this.height = estimateHeight2 ? estimateHeight2(this) : 1;
      };
      Line.prototype.lineNo = function() {
        return lineNo(this);
      };
      eventMixin(Line);
      function updateLine(line, text, markedSpans, estimateHeight2) {
        line.text = text;
        if (line.stateAfter) {
          line.stateAfter = null;
        }
        if (line.styles) {
          line.styles = null;
        }
        if (line.order != null) {
          line.order = null;
        }
        detachMarkedSpans(line);
        attachMarkedSpans(line, markedSpans);
        var estHeight = estimateHeight2 ? estimateHeight2(line) : 1;
        if (estHeight != line.height) {
          updateLineHeight(line, estHeight);
        }
      }
      function cleanUpLine(line) {
        line.parent = null;
        detachMarkedSpans(line);
      }
      var styleToClassCache = {}, styleToClassCacheWithMode = {};
      function interpretTokenStyle(style, options) {
        if (!style || /^\s*$/.test(style)) {
          return null;
        }
        var cache = options.addModeClass ? styleToClassCacheWithMode : styleToClassCache;
        return cache[style] || (cache[style] = style.replace(/\S+/g, "cm-$&"));
      }
      function buildLineContent(cm, lineView) {
        var content = eltP("span", null, null, webkit ? "padding-right: .1px" : null);
        var builder = {
          pre: eltP("pre", [content], "CodeMirror-line"),
          content,
          col: 0,
          pos: 0,
          cm,
          trailingSpace: false,
          splitSpaces: cm.getOption("lineWrapping")
        };
        lineView.measure = {};
        for (var i2 = 0; i2 <= (lineView.rest ? lineView.rest.length : 0); i2++) {
          var line = i2 ? lineView.rest[i2 - 1] : lineView.line, order = void 0;
          builder.pos = 0;
          builder.addToken = buildToken;
          if (hasBadBidiRects(cm.display.measure) && (order = getOrder(line, cm.doc.direction))) {
            builder.addToken = buildTokenBadBidi(builder.addToken, order);
          }
          builder.map = [];
          var allowFrontierUpdate = lineView != cm.display.externalMeasured && lineNo(line);
          insertLineContent(line, builder, getLineStyles(cm, line, allowFrontierUpdate));
          if (line.styleClasses) {
            if (line.styleClasses.bgClass) {
              builder.bgClass = joinClasses(line.styleClasses.bgClass, builder.bgClass || "");
            }
            if (line.styleClasses.textClass) {
              builder.textClass = joinClasses(line.styleClasses.textClass, builder.textClass || "");
            }
          }
          if (builder.map.length == 0) {
            builder.map.push(0, 0, builder.content.appendChild(zeroWidthElement(cm.display.measure)));
          }
          if (i2 == 0) {
            lineView.measure.map = builder.map;
            lineView.measure.cache = {};
          } else {
            (lineView.measure.maps || (lineView.measure.maps = [])).push(builder.map);
            (lineView.measure.caches || (lineView.measure.caches = [])).push({});
          }
        }
        if (webkit) {
          var last = builder.content.lastChild;
          if (/\bcm-tab\b/.test(last.className) || last.querySelector && last.querySelector(".cm-tab")) {
            builder.content.className = "cm-tab-wrap-hack";
          }
        }
        signal(cm, "renderLine", cm, lineView.line, builder.pre);
        if (builder.pre.className) {
          builder.textClass = joinClasses(builder.pre.className, builder.textClass || "");
        }
        return builder;
      }
      function defaultSpecialCharPlaceholder(ch) {
        var token = elt("span", "•", "cm-invalidchar");
        token.title = "\\u" + ch.charCodeAt(0).toString(16);
        token.setAttribute("aria-label", token.title);
        return token;
      }
      function buildToken(builder, text, style, startStyle, endStyle, css, attributes) {
        if (!text) {
          return;
        }
        var displayText = builder.splitSpaces ? splitSpaces(text, builder.trailingSpace) : text;
        var special = builder.cm.state.specialChars, mustWrap = false;
        var content;
        if (!special.test(text)) {
          builder.col += text.length;
          content = document.createTextNode(displayText);
          builder.map.push(builder.pos, builder.pos + text.length, content);
          if (ie && ie_version < 9) {
            mustWrap = true;
          }
          builder.pos += text.length;
        } else {
          content = document.createDocumentFragment();
          var pos = 0;
          while (true) {
            special.lastIndex = pos;
            var m = special.exec(text);
            var skipped = m ? m.index - pos : text.length - pos;
            if (skipped) {
              var txt = document.createTextNode(displayText.slice(pos, pos + skipped));
              if (ie && ie_version < 9) {
                content.appendChild(elt("span", [txt]));
              } else {
                content.appendChild(txt);
              }
              builder.map.push(builder.pos, builder.pos + skipped, txt);
              builder.col += skipped;
              builder.pos += skipped;
            }
            if (!m) {
              break;
            }
            pos += skipped + 1;
            var txt$1 = void 0;
            if (m[0] == "	") {
              var tabSize = builder.cm.options.tabSize, tabWidth = tabSize - builder.col % tabSize;
              txt$1 = content.appendChild(elt("span", spaceStr(tabWidth), "cm-tab"));
              txt$1.setAttribute("role", "presentation");
              txt$1.setAttribute("cm-text", "	");
              builder.col += tabWidth;
            } else if (m[0] == "\r" || m[0] == "\n") {
              txt$1 = content.appendChild(elt("span", m[0] == "\r" ? "␍" : "␤", "cm-invalidchar"));
              txt$1.setAttribute("cm-text", m[0]);
              builder.col += 1;
            } else {
              txt$1 = builder.cm.options.specialCharPlaceholder(m[0]);
              txt$1.setAttribute("cm-text", m[0]);
              if (ie && ie_version < 9) {
                content.appendChild(elt("span", [txt$1]));
              } else {
                content.appendChild(txt$1);
              }
              builder.col += 1;
            }
            builder.map.push(builder.pos, builder.pos + 1, txt$1);
            builder.pos++;
          }
        }
        builder.trailingSpace = displayText.charCodeAt(text.length - 1) == 32;
        if (style || startStyle || endStyle || mustWrap || css || attributes) {
          var fullStyle = style || "";
          if (startStyle) {
            fullStyle += startStyle;
          }
          if (endStyle) {
            fullStyle += endStyle;
          }
          var token = elt("span", [content], fullStyle, css);
          if (attributes) {
            for (var attr in attributes) {
              if (attributes.hasOwnProperty(attr) && attr != "style" && attr != "class") {
                token.setAttribute(attr, attributes[attr]);
              }
            }
          }
          return builder.content.appendChild(token);
        }
        builder.content.appendChild(content);
      }
      function splitSpaces(text, trailingBefore) {
        if (text.length > 1 && !/  /.test(text)) {
          return text;
        }
        var spaceBefore = trailingBefore, result = "";
        for (var i2 = 0; i2 < text.length; i2++) {
          var ch = text.charAt(i2);
          if (ch == " " && spaceBefore && (i2 == text.length - 1 || text.charCodeAt(i2 + 1) == 32)) {
            ch = " ";
          }
          result += ch;
          spaceBefore = ch == " ";
        }
        return result;
      }
      function buildTokenBadBidi(inner, order) {
        return function(builder, text, style, startStyle, endStyle, css, attributes) {
          style = style ? style + " cm-force-border" : "cm-force-border";
          var start = builder.pos, end = start + text.length;
          for (; ; ) {
            var part = void 0;
            for (var i2 = 0; i2 < order.length; i2++) {
              part = order[i2];
              if (part.to > start && part.from <= start) {
                break;
              }
            }
            if (part.to >= end) {
              return inner(builder, text, style, startStyle, endStyle, css, attributes);
            }
            inner(builder, text.slice(0, part.to - start), style, startStyle, null, css, attributes);
            startStyle = null;
            text = text.slice(part.to - start);
            start = part.to;
          }
        };
      }
      function buildCollapsedSpan(builder, size, marker, ignoreWidget) {
        var widget = !ignoreWidget && marker.widgetNode;
        if (widget) {
          builder.map.push(builder.pos, builder.pos + size, widget);
        }
        if (!ignoreWidget && builder.cm.display.input.needsContentAttribute) {
          if (!widget) {
            widget = builder.content.appendChild(document.createElement("span"));
          }
          widget.setAttribute("cm-marker", marker.id);
        }
        if (widget) {
          builder.cm.display.input.setUneditable(widget);
          builder.content.appendChild(widget);
        }
        builder.pos += size;
        builder.trailingSpace = false;
      }
      function insertLineContent(line, builder, styles) {
        var spans = line.markedSpans, allText = line.text, at = 0;
        if (!spans) {
          for (var i$12 = 1; i$12 < styles.length; i$12 += 2) {
            builder.addToken(builder, allText.slice(at, at = styles[i$12]), interpretTokenStyle(styles[i$12 + 1], builder.cm.options));
          }
          return;
        }
        var len = allText.length, pos = 0, i2 = 1, text = "", style, css;
        var nextChange = 0, spanStyle, spanEndStyle, spanStartStyle, collapsed, attributes;
        for (; ; ) {
          if (nextChange == pos) {
            spanStyle = spanEndStyle = spanStartStyle = css = "";
            attributes = null;
            collapsed = null;
            nextChange = Infinity;
            var foundBookmarks = [], endStyles = void 0;
            for (var j = 0; j < spans.length; ++j) {
              var sp = spans[j], m = sp.marker;
              if (m.type == "bookmark" && sp.from == pos && m.widgetNode) {
                foundBookmarks.push(m);
              } else if (sp.from <= pos && (sp.to == null || sp.to > pos || m.collapsed && sp.to == pos && sp.from == pos)) {
                if (sp.to != null && sp.to != pos && nextChange > sp.to) {
                  nextChange = sp.to;
                  spanEndStyle = "";
                }
                if (m.className) {
                  spanStyle += " " + m.className;
                }
                if (m.css) {
                  css = (css ? css + ";" : "") + m.css;
                }
                if (m.startStyle && sp.from == pos) {
                  spanStartStyle += " " + m.startStyle;
                }
                if (m.endStyle && sp.to == nextChange) {
                  (endStyles || (endStyles = [])).push(m.endStyle, sp.to);
                }
                if (m.title) {
                  (attributes || (attributes = {})).title = m.title;
                }
                if (m.attributes) {
                  for (var attr in m.attributes) {
                    (attributes || (attributes = {}))[attr] = m.attributes[attr];
                  }
                }
                if (m.collapsed && (!collapsed || compareCollapsedMarkers(collapsed.marker, m) < 0)) {
                  collapsed = sp;
                }
              } else if (sp.from > pos && nextChange > sp.from) {
                nextChange = sp.from;
              }
            }
            if (endStyles) {
              for (var j$1 = 0; j$1 < endStyles.length; j$1 += 2) {
                if (endStyles[j$1 + 1] == nextChange) {
                  spanEndStyle += " " + endStyles[j$1];
                }
              }
            }
            if (!collapsed || collapsed.from == pos) {
              for (var j$2 = 0; j$2 < foundBookmarks.length; ++j$2) {
                buildCollapsedSpan(builder, 0, foundBookmarks[j$2]);
              }
            }
            if (collapsed && (collapsed.from || 0) == pos) {
              buildCollapsedSpan(
                builder,
                (collapsed.to == null ? len + 1 : collapsed.to) - pos,
                collapsed.marker,
                collapsed.from == null
              );
              if (collapsed.to == null) {
                return;
              }
              if (collapsed.to == pos) {
                collapsed = false;
              }
            }
          }
          if (pos >= len) {
            break;
          }
          var upto = Math.min(len, nextChange);
          while (true) {
            if (text) {
              var end = pos + text.length;
              if (!collapsed) {
                var tokenText = end > upto ? text.slice(0, upto - pos) : text;
                builder.addToken(
                  builder,
                  tokenText,
                  style ? style + spanStyle : spanStyle,
                  spanStartStyle,
                  pos + tokenText.length == nextChange ? spanEndStyle : "",
                  css,
                  attributes
                );
              }
              if (end >= upto) {
                text = text.slice(upto - pos);
                pos = upto;
                break;
              }
              pos = end;
              spanStartStyle = "";
            }
            text = allText.slice(at, at = styles[i2++]);
            style = interpretTokenStyle(styles[i2++], builder.cm.options);
          }
        }
      }
      function LineView(doc2, line, lineN) {
        this.line = line;
        this.rest = visualLineContinued(line);
        this.size = this.rest ? lineNo(lst(this.rest)) - lineN + 1 : 1;
        this.node = this.text = null;
        this.hidden = lineIsHidden(doc2, line);
      }
      function buildViewArray(cm, from, to) {
        var array = [], nextPos;
        for (var pos = from; pos < to; pos = nextPos) {
          var view = new LineView(cm.doc, getLine(cm.doc, pos), pos);
          nextPos = pos + view.size;
          array.push(view);
        }
        return array;
      }
      var operationGroup = null;
      function pushOperation(op) {
        if (operationGroup) {
          operationGroup.ops.push(op);
        } else {
          op.ownsGroup = operationGroup = {
            ops: [op],
            delayedCallbacks: []
          };
        }
      }
      function fireCallbacksForOps(group) {
        var callbacks = group.delayedCallbacks, i2 = 0;
        do {
          for (; i2 < callbacks.length; i2++) {
            callbacks[i2].call(null);
          }
          for (var j = 0; j < group.ops.length; j++) {
            var op = group.ops[j];
            if (op.cursorActivityHandlers) {
              while (op.cursorActivityCalled < op.cursorActivityHandlers.length) {
                op.cursorActivityHandlers[op.cursorActivityCalled++].call(null, op.cm);
              }
            }
          }
        } while (i2 < callbacks.length);
      }
      function finishOperation(op, endCb) {
        var group = op.ownsGroup;
        if (!group) {
          return;
        }
        try {
          fireCallbacksForOps(group);
        } finally {
          operationGroup = null;
          endCb(group);
        }
      }
      var orphanDelayedCallbacks = null;
      function signalLater(emitter, type) {
        var arr = getHandlers(emitter, type);
        if (!arr.length) {
          return;
        }
        var args = Array.prototype.slice.call(arguments, 2), list;
        if (operationGroup) {
          list = operationGroup.delayedCallbacks;
        } else if (orphanDelayedCallbacks) {
          list = orphanDelayedCallbacks;
        } else {
          list = orphanDelayedCallbacks = [];
          setTimeout(fireOrphanDelayed, 0);
        }
        var loop = function(i3) {
          list.push(function() {
            return arr[i3].apply(null, args);
          });
        };
        for (var i2 = 0; i2 < arr.length; ++i2)
          loop(i2);
      }
      function fireOrphanDelayed() {
        var delayed = orphanDelayedCallbacks;
        orphanDelayedCallbacks = null;
        for (var i2 = 0; i2 < delayed.length; ++i2) {
          delayed[i2]();
        }
      }
      function updateLineForChanges(cm, lineView, lineN, dims) {
        for (var j = 0; j < lineView.changes.length; j++) {
          var type = lineView.changes[j];
          if (type == "text") {
            updateLineText(cm, lineView);
          } else if (type == "gutter") {
            updateLineGutter(cm, lineView, lineN, dims);
          } else if (type == "class") {
            updateLineClasses(cm, lineView);
          } else if (type == "widget") {
            updateLineWidgets(cm, lineView, dims);
          }
        }
        lineView.changes = null;
      }
      function ensureLineWrapped(lineView) {
        if (lineView.node == lineView.text) {
          lineView.node = elt("div", null, null, "position: relative");
          if (lineView.text.parentNode) {
            lineView.text.parentNode.replaceChild(lineView.node, lineView.text);
          }
          lineView.node.appendChild(lineView.text);
          if (ie && ie_version < 8) {
            lineView.node.style.zIndex = 2;
          }
        }
        return lineView.node;
      }
      function updateLineBackground(cm, lineView) {
        var cls = lineView.bgClass ? lineView.bgClass + " " + (lineView.line.bgClass || "") : lineView.line.bgClass;
        if (cls) {
          cls += " CodeMirror-linebackground";
        }
        if (lineView.background) {
          if (cls) {
            lineView.background.className = cls;
          } else {
            lineView.background.parentNode.removeChild(lineView.background);
            lineView.background = null;
          }
        } else if (cls) {
          var wrap = ensureLineWrapped(lineView);
          lineView.background = wrap.insertBefore(elt("div", null, cls), wrap.firstChild);
          cm.display.input.setUneditable(lineView.background);
        }
      }
      function getLineContent(cm, lineView) {
        var ext = cm.display.externalMeasured;
        if (ext && ext.line == lineView.line) {
          cm.display.externalMeasured = null;
          lineView.measure = ext.measure;
          return ext.built;
        }
        return buildLineContent(cm, lineView);
      }
      function updateLineText(cm, lineView) {
        var cls = lineView.text.className;
        var built = getLineContent(cm, lineView);
        if (lineView.text == lineView.node) {
          lineView.node = built.pre;
        }
        lineView.text.parentNode.replaceChild(built.pre, lineView.text);
        lineView.text = built.pre;
        if (built.bgClass != lineView.bgClass || built.textClass != lineView.textClass) {
          lineView.bgClass = built.bgClass;
          lineView.textClass = built.textClass;
          updateLineClasses(cm, lineView);
        } else if (cls) {
          lineView.text.className = cls;
        }
      }
      function updateLineClasses(cm, lineView) {
        updateLineBackground(cm, lineView);
        if (lineView.line.wrapClass) {
          ensureLineWrapped(lineView).className = lineView.line.wrapClass;
        } else if (lineView.node != lineView.text) {
          lineView.node.className = "";
        }
        var textClass = lineView.textClass ? lineView.textClass + " " + (lineView.line.textClass || "") : lineView.line.textClass;
        lineView.text.className = textClass || "";
      }
      function updateLineGutter(cm, lineView, lineN, dims) {
        if (lineView.gutter) {
          lineView.node.removeChild(lineView.gutter);
          lineView.gutter = null;
        }
        if (lineView.gutterBackground) {
          lineView.node.removeChild(lineView.gutterBackground);
          lineView.gutterBackground = null;
        }
        if (lineView.line.gutterClass) {
          var wrap = ensureLineWrapped(lineView);
          lineView.gutterBackground = elt(
            "div",
            null,
            "CodeMirror-gutter-background " + lineView.line.gutterClass,
            "left: " + (cm.options.fixedGutter ? dims.fixedPos : -dims.gutterTotalWidth) + "px; width: " + dims.gutterTotalWidth + "px"
          );
          cm.display.input.setUneditable(lineView.gutterBackground);
          wrap.insertBefore(lineView.gutterBackground, lineView.text);
        }
        var markers = lineView.line.gutterMarkers;
        if (cm.options.lineNumbers || markers) {
          var wrap$1 = ensureLineWrapped(lineView);
          var gutterWrap = lineView.gutter = elt("div", null, "CodeMirror-gutter-wrapper", "left: " + (cm.options.fixedGutter ? dims.fixedPos : -dims.gutterTotalWidth) + "px");
          gutterWrap.setAttribute("aria-hidden", "true");
          cm.display.input.setUneditable(gutterWrap);
          wrap$1.insertBefore(gutterWrap, lineView.text);
          if (lineView.line.gutterClass) {
            gutterWrap.className += " " + lineView.line.gutterClass;
          }
          if (cm.options.lineNumbers && (!markers || !markers["CodeMirror-linenumbers"])) {
            lineView.lineNumber = gutterWrap.appendChild(
              elt(
                "div",
                lineNumberFor(cm.options, lineN),
                "CodeMirror-linenumber CodeMirror-gutter-elt",
                "left: " + dims.gutterLeft["CodeMirror-linenumbers"] + "px; width: " + cm.display.lineNumInnerWidth + "px"
              )
            );
          }
          if (markers) {
            for (var k = 0; k < cm.display.gutterSpecs.length; ++k) {
              var id = cm.display.gutterSpecs[k].className, found = markers.hasOwnProperty(id) && markers[id];
              if (found) {
                gutterWrap.appendChild(elt(
                  "div",
                  [found],
                  "CodeMirror-gutter-elt",
                  "left: " + dims.gutterLeft[id] + "px; width: " + dims.gutterWidth[id] + "px"
                ));
              }
            }
          }
        }
      }
      function updateLineWidgets(cm, lineView, dims) {
        if (lineView.alignable) {
          lineView.alignable = null;
        }
        var isWidget = classTest("CodeMirror-linewidget");
        for (var node = lineView.node.firstChild, next = void 0; node; node = next) {
          next = node.nextSibling;
          if (isWidget.test(node.className)) {
            lineView.node.removeChild(node);
          }
        }
        insertLineWidgets(cm, lineView, dims);
      }
      function buildLineElement(cm, lineView, lineN, dims) {
        var built = getLineContent(cm, lineView);
        lineView.text = lineView.node = built.pre;
        if (built.bgClass) {
          lineView.bgClass = built.bgClass;
        }
        if (built.textClass) {
          lineView.textClass = built.textClass;
        }
        updateLineClasses(cm, lineView);
        updateLineGutter(cm, lineView, lineN, dims);
        insertLineWidgets(cm, lineView, dims);
        return lineView.node;
      }
      function insertLineWidgets(cm, lineView, dims) {
        insertLineWidgetsFor(cm, lineView.line, lineView, dims, true);
        if (lineView.rest) {
          for (var i2 = 0; i2 < lineView.rest.length; i2++) {
            insertLineWidgetsFor(cm, lineView.rest[i2], lineView, dims, false);
          }
        }
      }
      function insertLineWidgetsFor(cm, line, lineView, dims, allowAbove) {
        if (!line.widgets) {
          return;
        }
        var wrap = ensureLineWrapped(lineView);
        for (var i2 = 0, ws = line.widgets; i2 < ws.length; ++i2) {
          var widget = ws[i2], node = elt("div", [widget.node], "CodeMirror-linewidget" + (widget.className ? " " + widget.className : ""));
          if (!widget.handleMouseEvents) {
            node.setAttribute("cm-ignore-events", "true");
          }
          positionLineWidget(widget, node, lineView, dims);
          cm.display.input.setUneditable(node);
          if (allowAbove && widget.above) {
            wrap.insertBefore(node, lineView.gutter || lineView.text);
          } else {
            wrap.appendChild(node);
          }
          signalLater(widget, "redraw");
        }
      }
      function positionLineWidget(widget, node, lineView, dims) {
        if (widget.noHScroll) {
          (lineView.alignable || (lineView.alignable = [])).push(node);
          var width = dims.wrapperWidth;
          node.style.left = dims.fixedPos + "px";
          if (!widget.coverGutter) {
            width -= dims.gutterTotalWidth;
            node.style.paddingLeft = dims.gutterTotalWidth + "px";
          }
          node.style.width = width + "px";
        }
        if (widget.coverGutter) {
          node.style.zIndex = 5;
          node.style.position = "relative";
          if (!widget.noHScroll) {
            node.style.marginLeft = -dims.gutterTotalWidth + "px";
          }
        }
      }
      function widgetHeight(widget) {
        if (widget.height != null) {
          return widget.height;
        }
        var cm = widget.doc.cm;
        if (!cm) {
          return 0;
        }
        if (!contains(document.body, widget.node)) {
          var parentStyle = "position: relative;";
          if (widget.coverGutter) {
            parentStyle += "margin-left: -" + cm.display.gutters.offsetWidth + "px;";
          }
          if (widget.noHScroll) {
            parentStyle += "width: " + cm.display.wrapper.clientWidth + "px;";
          }
          removeChildrenAndAdd(cm.display.measure, elt("div", [widget.node], null, parentStyle));
        }
        return widget.height = widget.node.parentNode.offsetHeight;
      }
      function eventInWidget(display, e) {
        for (var n = e_target(e); n != display.wrapper; n = n.parentNode) {
          if (!n || n.nodeType == 1 && n.getAttribute("cm-ignore-events") == "true" || n.parentNode == display.sizer && n != display.mover) {
            return true;
          }
        }
      }
      function paddingTop(display) {
        return display.lineSpace.offsetTop;
      }
      function paddingVert(display) {
        return display.mover.offsetHeight - display.lineSpace.offsetHeight;
      }
      function paddingH(display) {
        if (display.cachedPaddingH) {
          return display.cachedPaddingH;
        }
        var e = removeChildrenAndAdd(display.measure, elt("pre", "x", "CodeMirror-line-like"));
        var style = window.getComputedStyle ? window.getComputedStyle(e) : e.currentStyle;
        var data = { left: parseInt(style.paddingLeft), right: parseInt(style.paddingRight) };
        if (!isNaN(data.left) && !isNaN(data.right)) {
          display.cachedPaddingH = data;
        }
        return data;
      }
      function scrollGap(cm) {
        return scrollerGap - cm.display.nativeBarWidth;
      }
      function displayWidth(cm) {
        return cm.display.scroller.clientWidth - scrollGap(cm) - cm.display.barWidth;
      }
      function displayHeight(cm) {
        return cm.display.scroller.clientHeight - scrollGap(cm) - cm.display.barHeight;
      }
      function ensureLineHeights(cm, lineView, rect) {
        var wrapping = cm.options.lineWrapping;
        var curWidth = wrapping && displayWidth(cm);
        if (!lineView.measure.heights || wrapping && lineView.measure.width != curWidth) {
          var heights = lineView.measure.heights = [];
          if (wrapping) {
            lineView.measure.width = curWidth;
            var rects = lineView.text.firstChild.getClientRects();
            for (var i2 = 0; i2 < rects.length - 1; i2++) {
              var cur = rects[i2], next = rects[i2 + 1];
              if (Math.abs(cur.bottom - next.bottom) > 2) {
                heights.push((cur.bottom + next.top) / 2 - rect.top);
              }
            }
          }
          heights.push(rect.bottom - rect.top);
        }
      }
      function mapFromLineView(lineView, line, lineN) {
        if (lineView.line == line) {
          return { map: lineView.measure.map, cache: lineView.measure.cache };
        }
        if (lineView.rest) {
          for (var i2 = 0; i2 < lineView.rest.length; i2++) {
            if (lineView.rest[i2] == line) {
              return { map: lineView.measure.maps[i2], cache: lineView.measure.caches[i2] };
            }
          }
          for (var i$12 = 0; i$12 < lineView.rest.length; i$12++) {
            if (lineNo(lineView.rest[i$12]) > lineN) {
              return { map: lineView.measure.maps[i$12], cache: lineView.measure.caches[i$12], before: true };
            }
          }
        }
      }
      function updateExternalMeasurement(cm, line) {
        line = visualLine(line);
        var lineN = lineNo(line);
        var view = cm.display.externalMeasured = new LineView(cm.doc, line, lineN);
        view.lineN = lineN;
        var built = view.built = buildLineContent(cm, view);
        view.text = built.pre;
        removeChildrenAndAdd(cm.display.lineMeasure, built.pre);
        return view;
      }
      function measureChar(cm, line, ch, bias) {
        return measureCharPrepared(cm, prepareMeasureForLine(cm, line), ch, bias);
      }
      function findViewForLine(cm, lineN) {
        if (lineN >= cm.display.viewFrom && lineN < cm.display.viewTo) {
          return cm.display.view[findViewIndex(cm, lineN)];
        }
        var ext = cm.display.externalMeasured;
        if (ext && lineN >= ext.lineN && lineN < ext.lineN + ext.size) {
          return ext;
        }
      }
      function prepareMeasureForLine(cm, line) {
        var lineN = lineNo(line);
        var view = findViewForLine(cm, lineN);
        if (view && !view.text) {
          view = null;
        } else if (view && view.changes) {
          updateLineForChanges(cm, view, lineN, getDimensions(cm));
          cm.curOp.forceUpdate = true;
        }
        if (!view) {
          view = updateExternalMeasurement(cm, line);
        }
        var info = mapFromLineView(view, line, lineN);
        return {
          line,
          view,
          rect: null,
          map: info.map,
          cache: info.cache,
          before: info.before,
          hasHeights: false
        };
      }
      function measureCharPrepared(cm, prepared, ch, bias, varHeight) {
        if (prepared.before) {
          ch = -1;
        }
        var key = ch + (bias || ""), found;
        if (prepared.cache.hasOwnProperty(key)) {
          found = prepared.cache[key];
        } else {
          if (!prepared.rect) {
            prepared.rect = prepared.view.text.getBoundingClientRect();
          }
          if (!prepared.hasHeights) {
            ensureLineHeights(cm, prepared.view, prepared.rect);
            prepared.hasHeights = true;
          }
          found = measureCharInner(cm, prepared, ch, bias);
          if (!found.bogus) {
            prepared.cache[key] = found;
          }
        }
        return {
          left: found.left,
          right: found.right,
          top: varHeight ? found.rtop : found.top,
          bottom: varHeight ? found.rbottom : found.bottom
        };
      }
      var nullRect = { left: 0, right: 0, top: 0, bottom: 0 };
      function nodeAndOffsetInLineMap(map2, ch, bias) {
        var node, start, end, collapse, mStart, mEnd;
        for (var i2 = 0; i2 < map2.length; i2 += 3) {
          mStart = map2[i2];
          mEnd = map2[i2 + 1];
          if (ch < mStart) {
            start = 0;
            end = 1;
            collapse = "left";
          } else if (ch < mEnd) {
            start = ch - mStart;
            end = start + 1;
          } else if (i2 == map2.length - 3 || ch == mEnd && map2[i2 + 3] > ch) {
            end = mEnd - mStart;
            start = end - 1;
            if (ch >= mEnd) {
              collapse = "right";
            }
          }
          if (start != null) {
            node = map2[i2 + 2];
            if (mStart == mEnd && bias == (node.insertLeft ? "left" : "right")) {
              collapse = bias;
            }
            if (bias == "left" && start == 0) {
              while (i2 && map2[i2 - 2] == map2[i2 - 3] && map2[i2 - 1].insertLeft) {
                node = map2[(i2 -= 3) + 2];
                collapse = "left";
              }
            }
            if (bias == "right" && start == mEnd - mStart) {
              while (i2 < map2.length - 3 && map2[i2 + 3] == map2[i2 + 4] && !map2[i2 + 5].insertLeft) {
                node = map2[(i2 += 3) + 2];
                collapse = "right";
              }
            }
            break;
          }
        }
        return { node, start, end, collapse, coverStart: mStart, coverEnd: mEnd };
      }
      function getUsefulRect(rects, bias) {
        var rect = nullRect;
        if (bias == "left") {
          for (var i2 = 0; i2 < rects.length; i2++) {
            if ((rect = rects[i2]).left != rect.right) {
              break;
            }
          }
        } else {
          for (var i$12 = rects.length - 1; i$12 >= 0; i$12--) {
            if ((rect = rects[i$12]).left != rect.right) {
              break;
            }
          }
        }
        return rect;
      }
      function measureCharInner(cm, prepared, ch, bias) {
        var place = nodeAndOffsetInLineMap(prepared.map, ch, bias);
        var node = place.node, start = place.start, end = place.end, collapse = place.collapse;
        var rect;
        if (node.nodeType == 3) {
          for (var i$12 = 0; i$12 < 4; i$12++) {
            while (start && isExtendingChar(prepared.line.text.charAt(place.coverStart + start))) {
              --start;
            }
            while (place.coverStart + end < place.coverEnd && isExtendingChar(prepared.line.text.charAt(place.coverStart + end))) {
              ++end;
            }
            if (ie && ie_version < 9 && start == 0 && end == place.coverEnd - place.coverStart) {
              rect = node.parentNode.getBoundingClientRect();
            } else {
              rect = getUsefulRect(range(node, start, end).getClientRects(), bias);
            }
            if (rect.left || rect.right || start == 0) {
              break;
            }
            end = start;
            start = start - 1;
            collapse = "right";
          }
          if (ie && ie_version < 11) {
            rect = maybeUpdateRectForZooming(cm.display.measure, rect);
          }
        } else {
          if (start > 0) {
            collapse = bias = "right";
          }
          var rects;
          if (cm.options.lineWrapping && (rects = node.getClientRects()).length > 1) {
            rect = rects[bias == "right" ? rects.length - 1 : 0];
          } else {
            rect = node.getBoundingClientRect();
          }
        }
        if (ie && ie_version < 9 && !start && (!rect || !rect.left && !rect.right)) {
          var rSpan = node.parentNode.getClientRects()[0];
          if (rSpan) {
            rect = { left: rSpan.left, right: rSpan.left + charWidth(cm.display), top: rSpan.top, bottom: rSpan.bottom };
          } else {
            rect = nullRect;
          }
        }
        var rtop = rect.top - prepared.rect.top, rbot = rect.bottom - prepared.rect.top;
        var mid = (rtop + rbot) / 2;
        var heights = prepared.view.measure.heights;
        var i2 = 0;
        for (; i2 < heights.length - 1; i2++) {
          if (mid < heights[i2]) {
            break;
          }
        }
        var top = i2 ? heights[i2 - 1] : 0, bot = heights[i2];
        var result = {
          left: (collapse == "right" ? rect.right : rect.left) - prepared.rect.left,
          right: (collapse == "left" ? rect.left : rect.right) - prepared.rect.left,
          top,
          bottom: bot
        };
        if (!rect.left && !rect.right) {
          result.bogus = true;
        }
        if (!cm.options.singleCursorHeightPerLine) {
          result.rtop = rtop;
          result.rbottom = rbot;
        }
        return result;
      }
      function maybeUpdateRectForZooming(measure, rect) {
        if (!window.screen || screen.logicalXDPI == null || screen.logicalXDPI == screen.deviceXDPI || !hasBadZoomedRects(measure)) {
          return rect;
        }
        var scaleX = screen.logicalXDPI / screen.deviceXDPI;
        var scaleY = screen.logicalYDPI / screen.deviceYDPI;
        return {
          left: rect.left * scaleX,
          right: rect.right * scaleX,
          top: rect.top * scaleY,
          bottom: rect.bottom * scaleY
        };
      }
      function clearLineMeasurementCacheFor(lineView) {
        if (lineView.measure) {
          lineView.measure.cache = {};
          lineView.measure.heights = null;
          if (lineView.rest) {
            for (var i2 = 0; i2 < lineView.rest.length; i2++) {
              lineView.measure.caches[i2] = {};
            }
          }
        }
      }
      function clearLineMeasurementCache(cm) {
        cm.display.externalMeasure = null;
        removeChildren(cm.display.lineMeasure);
        for (var i2 = 0; i2 < cm.display.view.length; i2++) {
          clearLineMeasurementCacheFor(cm.display.view[i2]);
        }
      }
      function clearCaches(cm) {
        clearLineMeasurementCache(cm);
        cm.display.cachedCharWidth = cm.display.cachedTextHeight = cm.display.cachedPaddingH = null;
        if (!cm.options.lineWrapping) {
          cm.display.maxLineChanged = true;
        }
        cm.display.lineNumChars = null;
      }
      function pageScrollX(doc2) {
        if (chrome && android) {
          return -(doc2.body.getBoundingClientRect().left - parseInt(getComputedStyle(doc2.body).marginLeft));
        }
        return doc2.defaultView.pageXOffset || (doc2.documentElement || doc2.body).scrollLeft;
      }
      function pageScrollY(doc2) {
        if (chrome && android) {
          return -(doc2.body.getBoundingClientRect().top - parseInt(getComputedStyle(doc2.body).marginTop));
        }
        return doc2.defaultView.pageYOffset || (doc2.documentElement || doc2.body).scrollTop;
      }
      function widgetTopHeight(lineObj) {
        var ref = visualLine(lineObj);
        var widgets = ref.widgets;
        var height = 0;
        if (widgets) {
          for (var i2 = 0; i2 < widgets.length; ++i2) {
            if (widgets[i2].above) {
              height += widgetHeight(widgets[i2]);
            }
          }
        }
        return height;
      }
      function intoCoordSystem(cm, lineObj, rect, context, includeWidgets) {
        if (!includeWidgets) {
          var height = widgetTopHeight(lineObj);
          rect.top += height;
          rect.bottom += height;
        }
        if (context == "line") {
          return rect;
        }
        if (!context) {
          context = "local";
        }
        var yOff = heightAtLine(lineObj);
        if (context == "local") {
          yOff += paddingTop(cm.display);
        } else {
          yOff -= cm.display.viewOffset;
        }
        if (context == "page" || context == "window") {
          var lOff = cm.display.lineSpace.getBoundingClientRect();
          yOff += lOff.top + (context == "window" ? 0 : pageScrollY(doc(cm)));
          var xOff = lOff.left + (context == "window" ? 0 : pageScrollX(doc(cm)));
          rect.left += xOff;
          rect.right += xOff;
        }
        rect.top += yOff;
        rect.bottom += yOff;
        return rect;
      }
      function fromCoordSystem(cm, coords, context) {
        if (context == "div") {
          return coords;
        }
        var left = coords.left, top = coords.top;
        if (context == "page") {
          left -= pageScrollX(doc(cm));
          top -= pageScrollY(doc(cm));
        } else if (context == "local" || !context) {
          var localBox = cm.display.sizer.getBoundingClientRect();
          left += localBox.left;
          top += localBox.top;
        }
        var lineSpaceBox = cm.display.lineSpace.getBoundingClientRect();
        return { left: left - lineSpaceBox.left, top: top - lineSpaceBox.top };
      }
      function charCoords(cm, pos, context, lineObj, bias) {
        if (!lineObj) {
          lineObj = getLine(cm.doc, pos.line);
        }
        return intoCoordSystem(cm, lineObj, measureChar(cm, lineObj, pos.ch, bias), context);
      }
      function cursorCoords(cm, pos, context, lineObj, preparedMeasure, varHeight) {
        lineObj = lineObj || getLine(cm.doc, pos.line);
        if (!preparedMeasure) {
          preparedMeasure = prepareMeasureForLine(cm, lineObj);
        }
        function get(ch2, right) {
          var m = measureCharPrepared(cm, preparedMeasure, ch2, right ? "right" : "left", varHeight);
          if (right) {
            m.left = m.right;
          } else {
            m.right = m.left;
          }
          return intoCoordSystem(cm, lineObj, m, context);
        }
        var order = getOrder(lineObj, cm.doc.direction), ch = pos.ch, sticky = pos.sticky;
        if (ch >= lineObj.text.length) {
          ch = lineObj.text.length;
          sticky = "before";
        } else if (ch <= 0) {
          ch = 0;
          sticky = "after";
        }
        if (!order) {
          return get(sticky == "before" ? ch - 1 : ch, sticky == "before");
        }
        function getBidi(ch2, partPos2, invert) {
          var part = order[partPos2], right = part.level == 1;
          return get(invert ? ch2 - 1 : ch2, right != invert);
        }
        var partPos = getBidiPartAt(order, ch, sticky);
        var other = bidiOther;
        var val = getBidi(ch, partPos, sticky == "before");
        if (other != null) {
          val.other = getBidi(ch, other, sticky != "before");
        }
        return val;
      }
      function estimateCoords(cm, pos) {
        var left = 0;
        pos = clipPos(cm.doc, pos);
        if (!cm.options.lineWrapping) {
          left = charWidth(cm.display) * pos.ch;
        }
        var lineObj = getLine(cm.doc, pos.line);
        var top = heightAtLine(lineObj) + paddingTop(cm.display);
        return { left, right: left, top, bottom: top + lineObj.height };
      }
      function PosWithInfo(line, ch, sticky, outside, xRel) {
        var pos = Pos(line, ch, sticky);
        pos.xRel = xRel;
        if (outside) {
          pos.outside = outside;
        }
        return pos;
      }
      function coordsChar(cm, x, y) {
        var doc2 = cm.doc;
        y += cm.display.viewOffset;
        if (y < 0) {
          return PosWithInfo(doc2.first, 0, null, -1, -1);
        }
        var lineN = lineAtHeight(doc2, y), last = doc2.first + doc2.size - 1;
        if (lineN > last) {
          return PosWithInfo(doc2.first + doc2.size - 1, getLine(doc2, last).text.length, null, 1, 1);
        }
        if (x < 0) {
          x = 0;
        }
        var lineObj = getLine(doc2, lineN);
        for (; ; ) {
          var found = coordsCharInner(cm, lineObj, lineN, x, y);
          var collapsed = collapsedSpanAround(lineObj, found.ch + (found.xRel > 0 || found.outside > 0 ? 1 : 0));
          if (!collapsed) {
            return found;
          }
          var rangeEnd = collapsed.find(1);
          if (rangeEnd.line == lineN) {
            return rangeEnd;
          }
          lineObj = getLine(doc2, lineN = rangeEnd.line);
        }
      }
      function wrappedLineExtent(cm, lineObj, preparedMeasure, y) {
        y -= widgetTopHeight(lineObj);
        var end = lineObj.text.length;
        var begin = findFirst(function(ch) {
          return measureCharPrepared(cm, preparedMeasure, ch - 1).bottom <= y;
        }, end, 0);
        end = findFirst(function(ch) {
          return measureCharPrepared(cm, preparedMeasure, ch).top > y;
        }, begin, end);
        return { begin, end };
      }
      function wrappedLineExtentChar(cm, lineObj, preparedMeasure, target) {
        if (!preparedMeasure) {
          preparedMeasure = prepareMeasureForLine(cm, lineObj);
        }
        var targetTop = intoCoordSystem(cm, lineObj, measureCharPrepared(cm, preparedMeasure, target), "line").top;
        return wrappedLineExtent(cm, lineObj, preparedMeasure, targetTop);
      }
      function boxIsAfter(box, x, y, left) {
        return box.bottom <= y ? false : box.top > y ? true : (left ? box.left : box.right) > x;
      }
      function coordsCharInner(cm, lineObj, lineNo2, x, y) {
        y -= heightAtLine(lineObj);
        var preparedMeasure = prepareMeasureForLine(cm, lineObj);
        var widgetHeight2 = widgetTopHeight(lineObj);
        var begin = 0, end = lineObj.text.length, ltr = true;
        var order = getOrder(lineObj, cm.doc.direction);
        if (order) {
          var part = (cm.options.lineWrapping ? coordsBidiPartWrapped : coordsBidiPart)(cm, lineObj, lineNo2, preparedMeasure, order, x, y);
          ltr = part.level != 1;
          begin = ltr ? part.from : part.to - 1;
          end = ltr ? part.to : part.from - 1;
        }
        var chAround = null, boxAround = null;
        var ch = findFirst(function(ch2) {
          var box = measureCharPrepared(cm, preparedMeasure, ch2);
          box.top += widgetHeight2;
          box.bottom += widgetHeight2;
          if (!boxIsAfter(box, x, y, false)) {
            return false;
          }
          if (box.top <= y && box.left <= x) {
            chAround = ch2;
            boxAround = box;
          }
          return true;
        }, begin, end);
        var baseX, sticky, outside = false;
        if (boxAround) {
          var atLeft = x - boxAround.left < boxAround.right - x, atStart = atLeft == ltr;
          ch = chAround + (atStart ? 0 : 1);
          sticky = atStart ? "after" : "before";
          baseX = atLeft ? boxAround.left : boxAround.right;
        } else {
          if (!ltr && (ch == end || ch == begin)) {
            ch++;
          }
          sticky = ch == 0 ? "after" : ch == lineObj.text.length ? "before" : measureCharPrepared(cm, preparedMeasure, ch - (ltr ? 1 : 0)).bottom + widgetHeight2 <= y == ltr ? "after" : "before";
          var coords = cursorCoords(cm, Pos(lineNo2, ch, sticky), "line", lineObj, preparedMeasure);
          baseX = coords.left;
          outside = y < coords.top ? -1 : y >= coords.bottom ? 1 : 0;
        }
        ch = skipExtendingChars(lineObj.text, ch, 1);
        return PosWithInfo(lineNo2, ch, sticky, outside, x - baseX);
      }
      function coordsBidiPart(cm, lineObj, lineNo2, preparedMeasure, order, x, y) {
        var index = findFirst(function(i2) {
          var part2 = order[i2], ltr2 = part2.level != 1;
          return boxIsAfter(cursorCoords(
            cm,
            Pos(lineNo2, ltr2 ? part2.to : part2.from, ltr2 ? "before" : "after"),
            "line",
            lineObj,
            preparedMeasure
          ), x, y, true);
        }, 0, order.length - 1);
        var part = order[index];
        if (index > 0) {
          var ltr = part.level != 1;
          var start = cursorCoords(
            cm,
            Pos(lineNo2, ltr ? part.from : part.to, ltr ? "after" : "before"),
            "line",
            lineObj,
            preparedMeasure
          );
          if (boxIsAfter(start, x, y, true) && start.top > y) {
            part = order[index - 1];
          }
        }
        return part;
      }
      function coordsBidiPartWrapped(cm, lineObj, _lineNo, preparedMeasure, order, x, y) {
        var ref = wrappedLineExtent(cm, lineObj, preparedMeasure, y);
        var begin = ref.begin;
        var end = ref.end;
        if (/\s/.test(lineObj.text.charAt(end - 1))) {
          end--;
        }
        var part = null, closestDist = null;
        for (var i2 = 0; i2 < order.length; i2++) {
          var p = order[i2];
          if (p.from >= end || p.to <= begin) {
            continue;
          }
          var ltr = p.level != 1;
          var endX = measureCharPrepared(cm, preparedMeasure, ltr ? Math.min(end, p.to) - 1 : Math.max(begin, p.from)).right;
          var dist = endX < x ? x - endX + 1e9 : endX - x;
          if (!part || closestDist > dist) {
            part = p;
            closestDist = dist;
          }
        }
        if (!part) {
          part = order[order.length - 1];
        }
        if (part.from < begin) {
          part = { from: begin, to: part.to, level: part.level };
        }
        if (part.to > end) {
          part = { from: part.from, to: end, level: part.level };
        }
        return part;
      }
      var measureText;
      function textHeight(display) {
        if (display.cachedTextHeight != null) {
          return display.cachedTextHeight;
        }
        if (measureText == null) {
          measureText = elt("pre", null, "CodeMirror-line-like");
          for (var i2 = 0; i2 < 49; ++i2) {
            measureText.appendChild(document.createTextNode("x"));
            measureText.appendChild(elt("br"));
          }
          measureText.appendChild(document.createTextNode("x"));
        }
        removeChildrenAndAdd(display.measure, measureText);
        var height = measureText.offsetHeight / 50;
        if (height > 3) {
          display.cachedTextHeight = height;
        }
        removeChildren(display.measure);
        return height || 1;
      }
      function charWidth(display) {
        if (display.cachedCharWidth != null) {
          return display.cachedCharWidth;
        }
        var anchor = elt("span", "xxxxxxxxxx");
        var pre = elt("pre", [anchor], "CodeMirror-line-like");
        removeChildrenAndAdd(display.measure, pre);
        var rect = anchor.getBoundingClientRect(), width = (rect.right - rect.left) / 10;
        if (width > 2) {
          display.cachedCharWidth = width;
        }
        return width || 10;
      }
      function getDimensions(cm) {
        var d = cm.display, left = {}, width = {};
        var gutterLeft = d.gutters.clientLeft;
        for (var n = d.gutters.firstChild, i2 = 0; n; n = n.nextSibling, ++i2) {
          var id = cm.display.gutterSpecs[i2].className;
          left[id] = n.offsetLeft + n.clientLeft + gutterLeft;
          width[id] = n.clientWidth;
        }
        return {
          fixedPos: compensateForHScroll(d),
          gutterTotalWidth: d.gutters.offsetWidth,
          gutterLeft: left,
          gutterWidth: width,
          wrapperWidth: d.wrapper.clientWidth
        };
      }
      function compensateForHScroll(display) {
        return display.scroller.getBoundingClientRect().left - display.sizer.getBoundingClientRect().left;
      }
      function estimateHeight(cm) {
        var th = textHeight(cm.display), wrapping = cm.options.lineWrapping;
        var perLine = wrapping && Math.max(5, cm.display.scroller.clientWidth / charWidth(cm.display) - 3);
        return function(line) {
          if (lineIsHidden(cm.doc, line)) {
            return 0;
          }
          var widgetsHeight = 0;
          if (line.widgets) {
            for (var i2 = 0; i2 < line.widgets.length; i2++) {
              if (line.widgets[i2].height) {
                widgetsHeight += line.widgets[i2].height;
              }
            }
          }
          if (wrapping) {
            return widgetsHeight + (Math.ceil(line.text.length / perLine) || 1) * th;
          } else {
            return widgetsHeight + th;
          }
        };
      }
      function estimateLineHeights(cm) {
        var doc2 = cm.doc, est = estimateHeight(cm);
        doc2.iter(function(line) {
          var estHeight = est(line);
          if (estHeight != line.height) {
            updateLineHeight(line, estHeight);
          }
        });
      }
      function posFromMouse(cm, e, liberal, forRect) {
        var display = cm.display;
        if (!liberal && e_target(e).getAttribute("cm-not-content") == "true") {
          return null;
        }
        var x, y, space = display.lineSpace.getBoundingClientRect();
        try {
          x = e.clientX - space.left;
          y = e.clientY - space.top;
        } catch (e$1) {
          return null;
        }
        var coords = coordsChar(cm, x, y), line;
        if (forRect && coords.xRel > 0 && (line = getLine(cm.doc, coords.line).text).length == coords.ch) {
          var colDiff = countColumn(line, line.length, cm.options.tabSize) - line.length;
          coords = Pos(coords.line, Math.max(0, Math.round((x - paddingH(cm.display).left) / charWidth(cm.display)) - colDiff));
        }
        return coords;
      }
      function findViewIndex(cm, n) {
        if (n >= cm.display.viewTo) {
          return null;
        }
        n -= cm.display.viewFrom;
        if (n < 0) {
          return null;
        }
        var view = cm.display.view;
        for (var i2 = 0; i2 < view.length; i2++) {
          n -= view[i2].size;
          if (n < 0) {
            return i2;
          }
        }
      }
      function regChange(cm, from, to, lendiff) {
        if (from == null) {
          from = cm.doc.first;
        }
        if (to == null) {
          to = cm.doc.first + cm.doc.size;
        }
        if (!lendiff) {
          lendiff = 0;
        }
        var display = cm.display;
        if (lendiff && to < display.viewTo && (display.updateLineNumbers == null || display.updateLineNumbers > from)) {
          display.updateLineNumbers = from;
        }
        cm.curOp.viewChanged = true;
        if (from >= display.viewTo) {
          if (sawCollapsedSpans && visualLineNo(cm.doc, from) < display.viewTo) {
            resetView(cm);
          }
        } else if (to <= display.viewFrom) {
          if (sawCollapsedSpans && visualLineEndNo(cm.doc, to + lendiff) > display.viewFrom) {
            resetView(cm);
          } else {
            display.viewFrom += lendiff;
            display.viewTo += lendiff;
          }
        } else if (from <= display.viewFrom && to >= display.viewTo) {
          resetView(cm);
        } else if (from <= display.viewFrom) {
          var cut = viewCuttingPoint(cm, to, to + lendiff, 1);
          if (cut) {
            display.view = display.view.slice(cut.index);
            display.viewFrom = cut.lineN;
            display.viewTo += lendiff;
          } else {
            resetView(cm);
          }
        } else if (to >= display.viewTo) {
          var cut$1 = viewCuttingPoint(cm, from, from, -1);
          if (cut$1) {
            display.view = display.view.slice(0, cut$1.index);
            display.viewTo = cut$1.lineN;
          } else {
            resetView(cm);
          }
        } else {
          var cutTop = viewCuttingPoint(cm, from, from, -1);
          var cutBot = viewCuttingPoint(cm, to, to + lendiff, 1);
          if (cutTop && cutBot) {
            display.view = display.view.slice(0, cutTop.index).concat(buildViewArray(cm, cutTop.lineN, cutBot.lineN)).concat(display.view.slice(cutBot.index));
            display.viewTo += lendiff;
          } else {
            resetView(cm);
          }
        }
        var ext = display.externalMeasured;
        if (ext) {
          if (to < ext.lineN) {
            ext.lineN += lendiff;
          } else if (from < ext.lineN + ext.size) {
            display.externalMeasured = null;
          }
        }
      }
      function regLineChange(cm, line, type) {
        cm.curOp.viewChanged = true;
        var display = cm.display, ext = cm.display.externalMeasured;
        if (ext && line >= ext.lineN && line < ext.lineN + ext.size) {
          display.externalMeasured = null;
        }
        if (line < display.viewFrom || line >= display.viewTo) {
          return;
        }
        var lineView = display.view[findViewIndex(cm, line)];
        if (lineView.node == null) {
          return;
        }
        var arr = lineView.changes || (lineView.changes = []);
        if (indexOf(arr, type) == -1) {
          arr.push(type);
        }
      }
      function resetView(cm) {
        cm.display.viewFrom = cm.display.viewTo = cm.doc.first;
        cm.display.view = [];
        cm.display.viewOffset = 0;
      }
      function viewCuttingPoint(cm, oldN, newN, dir) {
        var index = findViewIndex(cm, oldN), diff, view = cm.display.view;
        if (!sawCollapsedSpans || newN == cm.doc.first + cm.doc.size) {
          return { index, lineN: newN };
        }
        var n = cm.display.viewFrom;
        for (var i2 = 0; i2 < index; i2++) {
          n += view[i2].size;
        }
        if (n != oldN) {
          if (dir > 0) {
            if (index == view.length - 1) {
              return null;
            }
            diff = n + view[index].size - oldN;
            index++;
          } else {
            diff = n - oldN;
          }
          oldN += diff;
          newN += diff;
        }
        while (visualLineNo(cm.doc, newN) != newN) {
          if (index == (dir < 0 ? 0 : view.length - 1)) {
            return null;
          }
          newN += dir * view[index - (dir < 0 ? 1 : 0)].size;
          index += dir;
        }
        return { index, lineN: newN };
      }
      function adjustView(cm, from, to) {
        var display = cm.display, view = display.view;
        if (view.length == 0 || from >= display.viewTo || to <= display.viewFrom) {
          display.view = buildViewArray(cm, from, to);
          display.viewFrom = from;
        } else {
          if (display.viewFrom > from) {
            display.view = buildViewArray(cm, from, display.viewFrom).concat(display.view);
          } else if (display.viewFrom < from) {
            display.view = display.view.slice(findViewIndex(cm, from));
          }
          display.viewFrom = from;
          if (display.viewTo < to) {
            display.view = display.view.concat(buildViewArray(cm, display.viewTo, to));
          } else if (display.viewTo > to) {
            display.view = display.view.slice(0, findViewIndex(cm, to));
          }
        }
        display.viewTo = to;
      }
      function countDirtyView(cm) {
        var view = cm.display.view, dirty = 0;
        for (var i2 = 0; i2 < view.length; i2++) {
          var lineView = view[i2];
          if (!lineView.hidden && (!lineView.node || lineView.changes)) {
            ++dirty;
          }
        }
        return dirty;
      }
      function updateSelection(cm) {
        cm.display.input.showSelection(cm.display.input.prepareSelection());
      }
      function prepareSelection(cm, primary) {
        if (primary === void 0) primary = true;
        var doc2 = cm.doc, result = {};
        var curFragment = result.cursors = document.createDocumentFragment();
        var selFragment = result.selection = document.createDocumentFragment();
        var customCursor = cm.options.$customCursor;
        if (customCursor) {
          primary = true;
        }
        for (var i2 = 0; i2 < doc2.sel.ranges.length; i2++) {
          if (!primary && i2 == doc2.sel.primIndex) {
            continue;
          }
          var range2 = doc2.sel.ranges[i2];
          if (range2.from().line >= cm.display.viewTo || range2.to().line < cm.display.viewFrom) {
            continue;
          }
          var collapsed = range2.empty();
          if (customCursor) {
            var head = customCursor(cm, range2);
            if (head) {
              drawSelectionCursor(cm, head, curFragment);
            }
          } else if (collapsed || cm.options.showCursorWhenSelecting) {
            drawSelectionCursor(cm, range2.head, curFragment);
          }
          if (!collapsed) {
            drawSelectionRange(cm, range2, selFragment);
          }
        }
        return result;
      }
      function drawSelectionCursor(cm, head, output) {
        var pos = cursorCoords(cm, head, "div", null, null, !cm.options.singleCursorHeightPerLine);
        var cursor = output.appendChild(elt("div", " ", "CodeMirror-cursor"));
        cursor.style.left = pos.left + "px";
        cursor.style.top = pos.top + "px";
        cursor.style.height = Math.max(0, pos.bottom - pos.top) * cm.options.cursorHeight + "px";
        if (/\bcm-fat-cursor\b/.test(cm.getWrapperElement().className)) {
          var charPos = charCoords(cm, head, "div", null, null);
          var width = charPos.right - charPos.left;
          cursor.style.width = (width > 0 ? width : cm.defaultCharWidth()) + "px";
        }
        if (pos.other) {
          var otherCursor = output.appendChild(elt("div", " ", "CodeMirror-cursor CodeMirror-secondarycursor"));
          otherCursor.style.display = "";
          otherCursor.style.left = pos.other.left + "px";
          otherCursor.style.top = pos.other.top + "px";
          otherCursor.style.height = (pos.other.bottom - pos.other.top) * 0.85 + "px";
        }
      }
      function cmpCoords(a, b) {
        return a.top - b.top || a.left - b.left;
      }
      function drawSelectionRange(cm, range2, output) {
        var display = cm.display, doc2 = cm.doc;
        var fragment = document.createDocumentFragment();
        var padding = paddingH(cm.display), leftSide = padding.left;
        var rightSide = Math.max(display.sizerWidth, displayWidth(cm) - display.sizer.offsetLeft) - padding.right;
        var docLTR = doc2.direction == "ltr";
        function add(left, top, width, bottom) {
          if (top < 0) {
            top = 0;
          }
          top = Math.round(top);
          bottom = Math.round(bottom);
          fragment.appendChild(elt("div", null, "CodeMirror-selected", "position: absolute; left: " + left + "px;\n                             top: " + top + "px; width: " + (width == null ? rightSide - left : width) + "px;\n                             height: " + (bottom - top) + "px"));
        }
        function drawForLine(line, fromArg, toArg) {
          var lineObj = getLine(doc2, line);
          var lineLen = lineObj.text.length;
          var start, end;
          function coords(ch, bias) {
            return charCoords(cm, Pos(line, ch), "div", lineObj, bias);
          }
          function wrapX(pos, dir, side) {
            var extent = wrappedLineExtentChar(cm, lineObj, null, pos);
            var prop2 = dir == "ltr" == (side == "after") ? "left" : "right";
            var ch = side == "after" ? extent.begin : extent.end - (/\s/.test(lineObj.text.charAt(extent.end - 1)) ? 2 : 1);
            return coords(ch, prop2)[prop2];
          }
          var order = getOrder(lineObj, doc2.direction);
          iterateBidiSections(order, fromArg || 0, toArg == null ? lineLen : toArg, function(from, to, dir, i2) {
            var ltr = dir == "ltr";
            var fromPos = coords(from, ltr ? "left" : "right");
            var toPos = coords(to - 1, ltr ? "right" : "left");
            var openStart = fromArg == null && from == 0, openEnd = toArg == null && to == lineLen;
            var first = i2 == 0, last = !order || i2 == order.length - 1;
            if (toPos.top - fromPos.top <= 3) {
              var openLeft = (docLTR ? openStart : openEnd) && first;
              var openRight = (docLTR ? openEnd : openStart) && last;
              var left = openLeft ? leftSide : (ltr ? fromPos : toPos).left;
              var right = openRight ? rightSide : (ltr ? toPos : fromPos).right;
              add(left, fromPos.top, right - left, fromPos.bottom);
            } else {
              var topLeft, topRight, botLeft, botRight;
              if (ltr) {
                topLeft = docLTR && openStart && first ? leftSide : fromPos.left;
                topRight = docLTR ? rightSide : wrapX(from, dir, "before");
                botLeft = docLTR ? leftSide : wrapX(to, dir, "after");
                botRight = docLTR && openEnd && last ? rightSide : toPos.right;
              } else {
                topLeft = !docLTR ? leftSide : wrapX(from, dir, "before");
                topRight = !docLTR && openStart && first ? rightSide : fromPos.right;
                botLeft = !docLTR && openEnd && last ? leftSide : toPos.left;
                botRight = !docLTR ? rightSide : wrapX(to, dir, "after");
              }
              add(topLeft, fromPos.top, topRight - topLeft, fromPos.bottom);
              if (fromPos.bottom < toPos.top) {
                add(leftSide, fromPos.bottom, null, toPos.top);
              }
              add(botLeft, toPos.top, botRight - botLeft, toPos.bottom);
            }
            if (!start || cmpCoords(fromPos, start) < 0) {
              start = fromPos;
            }
            if (cmpCoords(toPos, start) < 0) {
              start = toPos;
            }
            if (!end || cmpCoords(fromPos, end) < 0) {
              end = fromPos;
            }
            if (cmpCoords(toPos, end) < 0) {
              end = toPos;
            }
          });
          return { start, end };
        }
        var sFrom = range2.from(), sTo = range2.to();
        if (sFrom.line == sTo.line) {
          drawForLine(sFrom.line, sFrom.ch, sTo.ch);
        } else {
          var fromLine = getLine(doc2, sFrom.line), toLine = getLine(doc2, sTo.line);
          var singleVLine = visualLine(fromLine) == visualLine(toLine);
          var leftEnd = drawForLine(sFrom.line, sFrom.ch, singleVLine ? fromLine.text.length + 1 : null).end;
          var rightStart = drawForLine(sTo.line, singleVLine ? 0 : null, sTo.ch).start;
          if (singleVLine) {
            if (leftEnd.top < rightStart.top - 2) {
              add(leftEnd.right, leftEnd.top, null, leftEnd.bottom);
              add(leftSide, rightStart.top, rightStart.left, rightStart.bottom);
            } else {
              add(leftEnd.right, leftEnd.top, rightStart.left - leftEnd.right, leftEnd.bottom);
            }
          }
          if (leftEnd.bottom < rightStart.top) {
            add(leftSide, leftEnd.bottom, null, rightStart.top);
          }
        }
        output.appendChild(fragment);
      }
      function restartBlink(cm) {
        if (!cm.state.focused) {
          return;
        }
        var display = cm.display;
        clearInterval(display.blinker);
        var on2 = true;
        display.cursorDiv.style.visibility = "";
        if (cm.options.cursorBlinkRate > 0) {
          display.blinker = setInterval(function() {
            if (!cm.hasFocus()) {
              onBlur(cm);
            }
            display.cursorDiv.style.visibility = (on2 = !on2) ? "" : "hidden";
          }, cm.options.cursorBlinkRate);
        } else if (cm.options.cursorBlinkRate < 0) {
          display.cursorDiv.style.visibility = "hidden";
        }
      }
      function ensureFocus(cm) {
        if (!cm.hasFocus()) {
          cm.display.input.focus();
          if (!cm.state.focused) {
            onFocus(cm);
          }
        }
      }
      function delayBlurEvent(cm) {
        cm.state.delayingBlurEvent = true;
        setTimeout(function() {
          if (cm.state.delayingBlurEvent) {
            cm.state.delayingBlurEvent = false;
            if (cm.state.focused) {
              onBlur(cm);
            }
          }
        }, 100);
      }
      function onFocus(cm, e) {
        if (cm.state.delayingBlurEvent && !cm.state.draggingText) {
          cm.state.delayingBlurEvent = false;
        }
        if (cm.options.readOnly == "nocursor") {
          return;
        }
        if (!cm.state.focused) {
          signal(cm, "focus", cm, e);
          cm.state.focused = true;
          addClass(cm.display.wrapper, "CodeMirror-focused");
          if (!cm.curOp && cm.display.selForContextMenu != cm.doc.sel) {
            cm.display.input.reset();
            if (webkit) {
              setTimeout(function() {
                return cm.display.input.reset(true);
              }, 20);
            }
          }
          cm.display.input.receivedFocus();
        }
        restartBlink(cm);
      }
      function onBlur(cm, e) {
        if (cm.state.delayingBlurEvent) {
          return;
        }
        if (cm.state.focused) {
          signal(cm, "blur", cm, e);
          cm.state.focused = false;
          rmClass(cm.display.wrapper, "CodeMirror-focused");
        }
        clearInterval(cm.display.blinker);
        setTimeout(function() {
          if (!cm.state.focused) {
            cm.display.shift = false;
          }
        }, 150);
      }
      function updateHeightsInViewport(cm) {
        var display = cm.display;
        var prevBottom = display.lineDiv.offsetTop;
        var viewTop = Math.max(0, display.scroller.getBoundingClientRect().top);
        var oldHeight = display.lineDiv.getBoundingClientRect().top;
        var mustScroll = 0;
        for (var i2 = 0; i2 < display.view.length; i2++) {
          var cur = display.view[i2], wrapping = cm.options.lineWrapping;
          var height = void 0, width = 0;
          if (cur.hidden) {
            continue;
          }
          oldHeight += cur.line.height;
          if (ie && ie_version < 8) {
            var bot = cur.node.offsetTop + cur.node.offsetHeight;
            height = bot - prevBottom;
            prevBottom = bot;
          } else {
            var box = cur.node.getBoundingClientRect();
            height = box.bottom - box.top;
            if (!wrapping && cur.text.firstChild) {
              width = cur.text.firstChild.getBoundingClientRect().right - box.left - 1;
            }
          }
          var diff = cur.line.height - height;
          if (diff > 5e-3 || diff < -5e-3) {
            if (oldHeight < viewTop) {
              mustScroll -= diff;
            }
            updateLineHeight(cur.line, height);
            updateWidgetHeight(cur.line);
            if (cur.rest) {
              for (var j = 0; j < cur.rest.length; j++) {
                updateWidgetHeight(cur.rest[j]);
              }
            }
          }
          if (width > cm.display.sizerWidth) {
            var chWidth = Math.ceil(width / charWidth(cm.display));
            if (chWidth > cm.display.maxLineLength) {
              cm.display.maxLineLength = chWidth;
              cm.display.maxLine = cur.line;
              cm.display.maxLineChanged = true;
            }
          }
        }
        if (Math.abs(mustScroll) > 2) {
          display.scroller.scrollTop += mustScroll;
        }
      }
      function updateWidgetHeight(line) {
        if (line.widgets) {
          for (var i2 = 0; i2 < line.widgets.length; ++i2) {
            var w = line.widgets[i2], parent = w.node.parentNode;
            if (parent) {
              w.height = parent.offsetHeight;
            }
          }
        }
      }
      function visibleLines(display, doc2, viewport) {
        var top = viewport && viewport.top != null ? Math.max(0, viewport.top) : display.scroller.scrollTop;
        top = Math.floor(top - paddingTop(display));
        var bottom = viewport && viewport.bottom != null ? viewport.bottom : top + display.wrapper.clientHeight;
        var from = lineAtHeight(doc2, top), to = lineAtHeight(doc2, bottom);
        if (viewport && viewport.ensure) {
          var ensureFrom = viewport.ensure.from.line, ensureTo = viewport.ensure.to.line;
          if (ensureFrom < from) {
            from = ensureFrom;
            to = lineAtHeight(doc2, heightAtLine(getLine(doc2, ensureFrom)) + display.wrapper.clientHeight);
          } else if (Math.min(ensureTo, doc2.lastLine()) >= to) {
            from = lineAtHeight(doc2, heightAtLine(getLine(doc2, ensureTo)) - display.wrapper.clientHeight);
            to = ensureTo;
          }
        }
        return { from, to: Math.max(to, from + 1) };
      }
      function maybeScrollWindow(cm, rect) {
        if (signalDOMEvent(cm, "scrollCursorIntoView")) {
          return;
        }
        var display = cm.display, box = display.sizer.getBoundingClientRect(), doScroll = null;
        var doc2 = display.wrapper.ownerDocument;
        if (rect.top + box.top < 0) {
          doScroll = true;
        } else if (rect.bottom + box.top > (doc2.defaultView.innerHeight || doc2.documentElement.clientHeight)) {
          doScroll = false;
        }
        if (doScroll != null && !phantom) {
          var scrollNode = elt("div", "​", null, "position: absolute;\n                         top: " + (rect.top - display.viewOffset - paddingTop(cm.display)) + "px;\n                         height: " + (rect.bottom - rect.top + scrollGap(cm) + display.barHeight) + "px;\n                         left: " + rect.left + "px; width: " + Math.max(2, rect.right - rect.left) + "px;");
          cm.display.lineSpace.appendChild(scrollNode);
          scrollNode.scrollIntoView(doScroll);
          cm.display.lineSpace.removeChild(scrollNode);
        }
      }
      function scrollPosIntoView(cm, pos, end, margin) {
        if (margin == null) {
          margin = 0;
        }
        var rect;
        if (!cm.options.lineWrapping && pos == end) {
          end = pos.sticky == "before" ? Pos(pos.line, pos.ch + 1, "before") : pos;
          pos = pos.ch ? Pos(pos.line, pos.sticky == "before" ? pos.ch - 1 : pos.ch, "after") : pos;
        }
        for (var limit = 0; limit < 5; limit++) {
          var changed = false;
          var coords = cursorCoords(cm, pos);
          var endCoords = !end || end == pos ? coords : cursorCoords(cm, end);
          rect = {
            left: Math.min(coords.left, endCoords.left),
            top: Math.min(coords.top, endCoords.top) - margin,
            right: Math.max(coords.left, endCoords.left),
            bottom: Math.max(coords.bottom, endCoords.bottom) + margin
          };
          var scrollPos = calculateScrollPos(cm, rect);
          var startTop = cm.doc.scrollTop, startLeft = cm.doc.scrollLeft;
          if (scrollPos.scrollTop != null) {
            updateScrollTop(cm, scrollPos.scrollTop);
            if (Math.abs(cm.doc.scrollTop - startTop) > 1) {
              changed = true;
            }
          }
          if (scrollPos.scrollLeft != null) {
            setScrollLeft(cm, scrollPos.scrollLeft);
            if (Math.abs(cm.doc.scrollLeft - startLeft) > 1) {
              changed = true;
            }
          }
          if (!changed) {
            break;
          }
        }
        return rect;
      }
      function scrollIntoView(cm, rect) {
        var scrollPos = calculateScrollPos(cm, rect);
        if (scrollPos.scrollTop != null) {
          updateScrollTop(cm, scrollPos.scrollTop);
        }
        if (scrollPos.scrollLeft != null) {
          setScrollLeft(cm, scrollPos.scrollLeft);
        }
      }
      function calculateScrollPos(cm, rect) {
        var display = cm.display, snapMargin = textHeight(cm.display);
        if (rect.top < 0) {
          rect.top = 0;
        }
        var screentop = cm.curOp && cm.curOp.scrollTop != null ? cm.curOp.scrollTop : display.scroller.scrollTop;
        var screen2 = displayHeight(cm), result = {};
        if (rect.bottom - rect.top > screen2) {
          rect.bottom = rect.top + screen2;
        }
        var docBottom = cm.doc.height + paddingVert(display);
        var atTop = rect.top < snapMargin, atBottom = rect.bottom > docBottom - snapMargin;
        if (rect.top < screentop) {
          result.scrollTop = atTop ? 0 : rect.top;
        } else if (rect.bottom > screentop + screen2) {
          var newTop = Math.min(rect.top, (atBottom ? docBottom : rect.bottom) - screen2);
          if (newTop != screentop) {
            result.scrollTop = newTop;
          }
        }
        var gutterSpace = cm.options.fixedGutter ? 0 : display.gutters.offsetWidth;
        var screenleft = cm.curOp && cm.curOp.scrollLeft != null ? cm.curOp.scrollLeft : display.scroller.scrollLeft - gutterSpace;
        var screenw = displayWidth(cm) - display.gutters.offsetWidth;
        var tooWide = rect.right - rect.left > screenw;
        if (tooWide) {
          rect.right = rect.left + screenw;
        }
        if (rect.left < 10) {
          result.scrollLeft = 0;
        } else if (rect.left < screenleft) {
          result.scrollLeft = Math.max(0, rect.left + gutterSpace - (tooWide ? 0 : 10));
        } else if (rect.right > screenw + screenleft - 3) {
          result.scrollLeft = rect.right + (tooWide ? 0 : 10) - screenw;
        }
        return result;
      }
      function addToScrollTop(cm, top) {
        if (top == null) {
          return;
        }
        resolveScrollToPos(cm);
        cm.curOp.scrollTop = (cm.curOp.scrollTop == null ? cm.doc.scrollTop : cm.curOp.scrollTop) + top;
      }
      function ensureCursorVisible(cm) {
        resolveScrollToPos(cm);
        var cur = cm.getCursor();
        cm.curOp.scrollToPos = { from: cur, to: cur, margin: cm.options.cursorScrollMargin };
      }
      function scrollToCoords(cm, x, y) {
        if (x != null || y != null) {
          resolveScrollToPos(cm);
        }
        if (x != null) {
          cm.curOp.scrollLeft = x;
        }
        if (y != null) {
          cm.curOp.scrollTop = y;
        }
      }
      function scrollToRange(cm, range2) {
        resolveScrollToPos(cm);
        cm.curOp.scrollToPos = range2;
      }
      function resolveScrollToPos(cm) {
        var range2 = cm.curOp.scrollToPos;
        if (range2) {
          cm.curOp.scrollToPos = null;
          var from = estimateCoords(cm, range2.from), to = estimateCoords(cm, range2.to);
          scrollToCoordsRange(cm, from, to, range2.margin);
        }
      }
      function scrollToCoordsRange(cm, from, to, margin) {
        var sPos = calculateScrollPos(cm, {
          left: Math.min(from.left, to.left),
          top: Math.min(from.top, to.top) - margin,
          right: Math.max(from.right, to.right),
          bottom: Math.max(from.bottom, to.bottom) + margin
        });
        scrollToCoords(cm, sPos.scrollLeft, sPos.scrollTop);
      }
      function updateScrollTop(cm, val) {
        if (Math.abs(cm.doc.scrollTop - val) < 2) {
          return;
        }
        if (!gecko) {
          updateDisplaySimple(cm, { top: val });
        }
        setScrollTop(cm, val, true);
        if (gecko) {
          updateDisplaySimple(cm);
        }
        startWorker(cm, 100);
      }
      function setScrollTop(cm, val, forceScroll) {
        val = Math.max(0, Math.min(cm.display.scroller.scrollHeight - cm.display.scroller.clientHeight, val));
        if (cm.display.scroller.scrollTop == val && !forceScroll) {
          return;
        }
        cm.doc.scrollTop = val;
        cm.display.scrollbars.setScrollTop(val);
        if (cm.display.scroller.scrollTop != val) {
          cm.display.scroller.scrollTop = val;
        }
      }
      function setScrollLeft(cm, val, isScroller, forceScroll) {
        val = Math.max(0, Math.min(val, cm.display.scroller.scrollWidth - cm.display.scroller.clientWidth));
        if ((isScroller ? val == cm.doc.scrollLeft : Math.abs(cm.doc.scrollLeft - val) < 2) && !forceScroll) {
          return;
        }
        cm.doc.scrollLeft = val;
        alignHorizontally(cm);
        if (cm.display.scroller.scrollLeft != val) {
          cm.display.scroller.scrollLeft = val;
        }
        cm.display.scrollbars.setScrollLeft(val);
      }
      function measureForScrollbars(cm) {
        var d = cm.display, gutterW = d.gutters.offsetWidth;
        var docH = Math.round(cm.doc.height + paddingVert(cm.display));
        return {
          clientHeight: d.scroller.clientHeight,
          viewHeight: d.wrapper.clientHeight,
          scrollWidth: d.scroller.scrollWidth,
          clientWidth: d.scroller.clientWidth,
          viewWidth: d.wrapper.clientWidth,
          barLeft: cm.options.fixedGutter ? gutterW : 0,
          docHeight: docH,
          scrollHeight: docH + scrollGap(cm) + d.barHeight,
          nativeBarWidth: d.nativeBarWidth,
          gutterWidth: gutterW
        };
      }
      var NativeScrollbars = function(place, scroll, cm) {
        this.cm = cm;
        var vert = this.vert = elt("div", [elt("div", null, null, "min-width: 1px")], "CodeMirror-vscrollbar");
        var horiz = this.horiz = elt("div", [elt("div", null, null, "height: 100%; min-height: 1px")], "CodeMirror-hscrollbar");
        vert.tabIndex = horiz.tabIndex = -1;
        place(vert);
        place(horiz);
        on(vert, "scroll", function() {
          if (vert.clientHeight) {
            scroll(vert.scrollTop, "vertical");
          }
        });
        on(horiz, "scroll", function() {
          if (horiz.clientWidth) {
            scroll(horiz.scrollLeft, "horizontal");
          }
        });
        this.checkedZeroWidth = false;
        if (ie && ie_version < 8) {
          this.horiz.style.minHeight = this.vert.style.minWidth = "18px";
        }
      };
      NativeScrollbars.prototype.update = function(measure) {
        var needsH = measure.scrollWidth > measure.clientWidth + 1;
        var needsV = measure.scrollHeight > measure.clientHeight + 1;
        var sWidth = measure.nativeBarWidth;
        if (needsV) {
          this.vert.style.display = "block";
          this.vert.style.bottom = needsH ? sWidth + "px" : "0";
          var totalHeight = measure.viewHeight - (needsH ? sWidth : 0);
          this.vert.firstChild.style.height = Math.max(0, measure.scrollHeight - measure.clientHeight + totalHeight) + "px";
        } else {
          this.vert.scrollTop = 0;
          this.vert.style.display = "";
          this.vert.firstChild.style.height = "0";
        }
        if (needsH) {
          this.horiz.style.display = "block";
          this.horiz.style.right = needsV ? sWidth + "px" : "0";
          this.horiz.style.left = measure.barLeft + "px";
          var totalWidth = measure.viewWidth - measure.barLeft - (needsV ? sWidth : 0);
          this.horiz.firstChild.style.width = Math.max(0, measure.scrollWidth - measure.clientWidth + totalWidth) + "px";
        } else {
          this.horiz.style.display = "";
          this.horiz.firstChild.style.width = "0";
        }
        if (!this.checkedZeroWidth && measure.clientHeight > 0) {
          if (sWidth == 0) {
            this.zeroWidthHack();
          }
          this.checkedZeroWidth = true;
        }
        return { right: needsV ? sWidth : 0, bottom: needsH ? sWidth : 0 };
      };
      NativeScrollbars.prototype.setScrollLeft = function(pos) {
        if (this.horiz.scrollLeft != pos) {
          this.horiz.scrollLeft = pos;
        }
        if (this.disableHoriz) {
          this.enableZeroWidthBar(this.horiz, this.disableHoriz, "horiz");
        }
      };
      NativeScrollbars.prototype.setScrollTop = function(pos) {
        if (this.vert.scrollTop != pos) {
          this.vert.scrollTop = pos;
        }
        if (this.disableVert) {
          this.enableZeroWidthBar(this.vert, this.disableVert, "vert");
        }
      };
      NativeScrollbars.prototype.zeroWidthHack = function() {
        var w = mac && !mac_geMountainLion ? "12px" : "18px";
        this.horiz.style.height = this.vert.style.width = w;
        this.horiz.style.visibility = this.vert.style.visibility = "hidden";
        this.disableHoriz = new Delayed();
        this.disableVert = new Delayed();
      };
      NativeScrollbars.prototype.enableZeroWidthBar = function(bar, delay, type) {
        bar.style.visibility = "";
        function maybeDisable() {
          var box = bar.getBoundingClientRect();
          var elt2 = type == "vert" ? document.elementFromPoint(box.right - 1, (box.top + box.bottom) / 2) : document.elementFromPoint((box.right + box.left) / 2, box.bottom - 1);
          if (elt2 != bar) {
            bar.style.visibility = "hidden";
          } else {
            delay.set(1e3, maybeDisable);
          }
        }
        delay.set(1e3, maybeDisable);
      };
      NativeScrollbars.prototype.clear = function() {
        var parent = this.horiz.parentNode;
        parent.removeChild(this.horiz);
        parent.removeChild(this.vert);
      };
      var NullScrollbars = function() {
      };
      NullScrollbars.prototype.update = function() {
        return { bottom: 0, right: 0 };
      };
      NullScrollbars.prototype.setScrollLeft = function() {
      };
      NullScrollbars.prototype.setScrollTop = function() {
      };
      NullScrollbars.prototype.clear = function() {
      };
      function updateScrollbars(cm, measure) {
        if (!measure) {
          measure = measureForScrollbars(cm);
        }
        var startWidth = cm.display.barWidth, startHeight = cm.display.barHeight;
        updateScrollbarsInner(cm, measure);
        for (var i2 = 0; i2 < 4 && startWidth != cm.display.barWidth || startHeight != cm.display.barHeight; i2++) {
          if (startWidth != cm.display.barWidth && cm.options.lineWrapping) {
            updateHeightsInViewport(cm);
          }
          updateScrollbarsInner(cm, measureForScrollbars(cm));
          startWidth = cm.display.barWidth;
          startHeight = cm.display.barHeight;
        }
      }
      function updateScrollbarsInner(cm, measure) {
        var d = cm.display;
        var sizes = d.scrollbars.update(measure);
        d.sizer.style.paddingRight = (d.barWidth = sizes.right) + "px";
        d.sizer.style.paddingBottom = (d.barHeight = sizes.bottom) + "px";
        d.heightForcer.style.borderBottom = sizes.bottom + "px solid transparent";
        if (sizes.right && sizes.bottom) {
          d.scrollbarFiller.style.display = "block";
          d.scrollbarFiller.style.height = sizes.bottom + "px";
          d.scrollbarFiller.style.width = sizes.right + "px";
        } else {
          d.scrollbarFiller.style.display = "";
        }
        if (sizes.bottom && cm.options.coverGutterNextToScrollbar && cm.options.fixedGutter) {
          d.gutterFiller.style.display = "block";
          d.gutterFiller.style.height = sizes.bottom + "px";
          d.gutterFiller.style.width = measure.gutterWidth + "px";
        } else {
          d.gutterFiller.style.display = "";
        }
      }
      var scrollbarModel = { "native": NativeScrollbars, "null": NullScrollbars };
      function initScrollbars(cm) {
        if (cm.display.scrollbars) {
          cm.display.scrollbars.clear();
          if (cm.display.scrollbars.addClass) {
            rmClass(cm.display.wrapper, cm.display.scrollbars.addClass);
          }
        }
        cm.display.scrollbars = new scrollbarModel[cm.options.scrollbarStyle](function(node) {
          cm.display.wrapper.insertBefore(node, cm.display.scrollbarFiller);
          on(node, "mousedown", function() {
            if (cm.state.focused) {
              setTimeout(function() {
                return cm.display.input.focus();
              }, 0);
            }
          });
          node.setAttribute("cm-not-content", "true");
        }, function(pos, axis) {
          if (axis == "horizontal") {
            setScrollLeft(cm, pos);
          } else {
            updateScrollTop(cm, pos);
          }
        }, cm);
        if (cm.display.scrollbars.addClass) {
          addClass(cm.display.wrapper, cm.display.scrollbars.addClass);
        }
      }
      var nextOpId = 0;
      function startOperation(cm) {
        cm.curOp = {
          cm,
          viewChanged: false,
          // Flag that indicates that lines might need to be redrawn
          startHeight: cm.doc.height,
          // Used to detect need to update scrollbar
          forceUpdate: false,
          // Used to force a redraw
          updateInput: 0,
          // Whether to reset the input textarea
          typing: false,
          // Whether this reset should be careful to leave existing text (for compositing)
          changeObjs: null,
          // Accumulated changes, for firing change events
          cursorActivityHandlers: null,
          // Set of handlers to fire cursorActivity on
          cursorActivityCalled: 0,
          // Tracks which cursorActivity handlers have been called already
          selectionChanged: false,
          // Whether the selection needs to be redrawn
          updateMaxLine: false,
          // Set when the widest line needs to be determined anew
          scrollLeft: null,
          scrollTop: null,
          // Intermediate scroll position, not pushed to DOM yet
          scrollToPos: null,
          // Used to scroll to a specific position
          focus: false,
          id: ++nextOpId,
          // Unique ID
          markArrays: null
          // Used by addMarkedSpan
        };
        pushOperation(cm.curOp);
      }
      function endOperation(cm) {
        var op = cm.curOp;
        if (op) {
          finishOperation(op, function(group) {
            for (var i2 = 0; i2 < group.ops.length; i2++) {
              group.ops[i2].cm.curOp = null;
            }
            endOperations(group);
          });
        }
      }
      function endOperations(group) {
        var ops = group.ops;
        for (var i2 = 0; i2 < ops.length; i2++) {
          endOperation_R1(ops[i2]);
        }
        for (var i$12 = 0; i$12 < ops.length; i$12++) {
          endOperation_W1(ops[i$12]);
        }
        for (var i$22 = 0; i$22 < ops.length; i$22++) {
          endOperation_R2(ops[i$22]);
        }
        for (var i$3 = 0; i$3 < ops.length; i$3++) {
          endOperation_W2(ops[i$3]);
        }
        for (var i$4 = 0; i$4 < ops.length; i$4++) {
          endOperation_finish(ops[i$4]);
        }
      }
      function endOperation_R1(op) {
        var cm = op.cm, display = cm.display;
        maybeClipScrollbars(cm);
        if (op.updateMaxLine) {
          findMaxLine(cm);
        }
        op.mustUpdate = op.viewChanged || op.forceUpdate || op.scrollTop != null || op.scrollToPos && (op.scrollToPos.from.line < display.viewFrom || op.scrollToPos.to.line >= display.viewTo) || display.maxLineChanged && cm.options.lineWrapping;
        op.update = op.mustUpdate && new DisplayUpdate(cm, op.mustUpdate && { top: op.scrollTop, ensure: op.scrollToPos }, op.forceUpdate);
      }
      function endOperation_W1(op) {
        op.updatedDisplay = op.mustUpdate && updateDisplayIfNeeded(op.cm, op.update);
      }
      function endOperation_R2(op) {
        var cm = op.cm, display = cm.display;
        if (op.updatedDisplay) {
          updateHeightsInViewport(cm);
        }
        op.barMeasure = measureForScrollbars(cm);
        if (display.maxLineChanged && !cm.options.lineWrapping) {
          op.adjustWidthTo = measureChar(cm, display.maxLine, display.maxLine.text.length).left + 3;
          cm.display.sizerWidth = op.adjustWidthTo;
          op.barMeasure.scrollWidth = Math.max(display.scroller.clientWidth, display.sizer.offsetLeft + op.adjustWidthTo + scrollGap(cm) + cm.display.barWidth);
          op.maxScrollLeft = Math.max(0, display.sizer.offsetLeft + op.adjustWidthTo - displayWidth(cm));
        }
        if (op.updatedDisplay || op.selectionChanged) {
          op.preparedSelection = display.input.prepareSelection();
        }
      }
      function endOperation_W2(op) {
        var cm = op.cm;
        if (op.adjustWidthTo != null) {
          cm.display.sizer.style.minWidth = op.adjustWidthTo + "px";
          if (op.maxScrollLeft < cm.doc.scrollLeft) {
            setScrollLeft(cm, Math.min(cm.display.scroller.scrollLeft, op.maxScrollLeft), true);
          }
          cm.display.maxLineChanged = false;
        }
        var takeFocus = op.focus && op.focus == activeElt(root(cm));
        if (op.preparedSelection) {
          cm.display.input.showSelection(op.preparedSelection, takeFocus);
        }
        if (op.updatedDisplay || op.startHeight != cm.doc.height) {
          updateScrollbars(cm, op.barMeasure);
        }
        if (op.updatedDisplay) {
          setDocumentHeight(cm, op.barMeasure);
        }
        if (op.selectionChanged) {
          restartBlink(cm);
        }
        if (cm.state.focused && op.updateInput) {
          cm.display.input.reset(op.typing);
        }
        if (takeFocus) {
          ensureFocus(op.cm);
        }
      }
      function endOperation_finish(op) {
        var cm = op.cm, display = cm.display, doc2 = cm.doc;
        if (op.updatedDisplay) {
          postUpdateDisplay(cm, op.update);
        }
        if (display.wheelStartX != null && (op.scrollTop != null || op.scrollLeft != null || op.scrollToPos)) {
          display.wheelStartX = display.wheelStartY = null;
        }
        if (op.scrollTop != null) {
          setScrollTop(cm, op.scrollTop, op.forceScroll);
        }
        if (op.scrollLeft != null) {
          setScrollLeft(cm, op.scrollLeft, true, true);
        }
        if (op.scrollToPos) {
          var rect = scrollPosIntoView(
            cm,
            clipPos(doc2, op.scrollToPos.from),
            clipPos(doc2, op.scrollToPos.to),
            op.scrollToPos.margin
          );
          maybeScrollWindow(cm, rect);
        }
        var hidden = op.maybeHiddenMarkers, unhidden = op.maybeUnhiddenMarkers;
        if (hidden) {
          for (var i2 = 0; i2 < hidden.length; ++i2) {
            if (!hidden[i2].lines.length) {
              signal(hidden[i2], "hide");
            }
          }
        }
        if (unhidden) {
          for (var i$12 = 0; i$12 < unhidden.length; ++i$12) {
            if (unhidden[i$12].lines.length) {
              signal(unhidden[i$12], "unhide");
            }
          }
        }
        if (display.wrapper.offsetHeight) {
          doc2.scrollTop = cm.display.scroller.scrollTop;
        }
        if (op.changeObjs) {
          signal(cm, "changes", cm, op.changeObjs);
        }
        if (op.update) {
          op.update.finish();
        }
      }
      function runInOp(cm, f) {
        if (cm.curOp) {
          return f();
        }
        startOperation(cm);
        try {
          return f();
        } finally {
          endOperation(cm);
        }
      }
      function operation(cm, f) {
        return function() {
          if (cm.curOp) {
            return f.apply(cm, arguments);
          }
          startOperation(cm);
          try {
            return f.apply(cm, arguments);
          } finally {
            endOperation(cm);
          }
        };
      }
      function methodOp(f) {
        return function() {
          if (this.curOp) {
            return f.apply(this, arguments);
          }
          startOperation(this);
          try {
            return f.apply(this, arguments);
          } finally {
            endOperation(this);
          }
        };
      }
      function docMethodOp(f) {
        return function() {
          var cm = this.cm;
          if (!cm || cm.curOp) {
            return f.apply(this, arguments);
          }
          startOperation(cm);
          try {
            return f.apply(this, arguments);
          } finally {
            endOperation(cm);
          }
        };
      }
      function startWorker(cm, time) {
        if (cm.doc.highlightFrontier < cm.display.viewTo) {
          cm.state.highlight.set(time, bind(highlightWorker, cm));
        }
      }
      function highlightWorker(cm) {
        var doc2 = cm.doc;
        if (doc2.highlightFrontier >= cm.display.viewTo) {
          return;
        }
        var end = +/* @__PURE__ */ new Date() + cm.options.workTime;
        var context = getContextBefore(cm, doc2.highlightFrontier);
        var changedLines = [];
        doc2.iter(context.line, Math.min(doc2.first + doc2.size, cm.display.viewTo + 500), function(line) {
          if (context.line >= cm.display.viewFrom) {
            var oldStyles = line.styles;
            var resetState = line.text.length > cm.options.maxHighlightLength ? copyState(doc2.mode, context.state) : null;
            var highlighted = highlightLine(cm, line, context, true);
            if (resetState) {
              context.state = resetState;
            }
            line.styles = highlighted.styles;
            var oldCls = line.styleClasses, newCls = highlighted.classes;
            if (newCls) {
              line.styleClasses = newCls;
            } else if (oldCls) {
              line.styleClasses = null;
            }
            var ischange = !oldStyles || oldStyles.length != line.styles.length || oldCls != newCls && (!oldCls || !newCls || oldCls.bgClass != newCls.bgClass || oldCls.textClass != newCls.textClass);
            for (var i2 = 0; !ischange && i2 < oldStyles.length; ++i2) {
              ischange = oldStyles[i2] != line.styles[i2];
            }
            if (ischange) {
              changedLines.push(context.line);
            }
            line.stateAfter = context.save();
            context.nextLine();
          } else {
            if (line.text.length <= cm.options.maxHighlightLength) {
              processLine(cm, line.text, context);
            }
            line.stateAfter = context.line % 5 == 0 ? context.save() : null;
            context.nextLine();
          }
          if (+/* @__PURE__ */ new Date() > end) {
            startWorker(cm, cm.options.workDelay);
            return true;
          }
        });
        doc2.highlightFrontier = context.line;
        doc2.modeFrontier = Math.max(doc2.modeFrontier, context.line);
        if (changedLines.length) {
          runInOp(cm, function() {
            for (var i2 = 0; i2 < changedLines.length; i2++) {
              regLineChange(cm, changedLines[i2], "text");
            }
          });
        }
      }
      var DisplayUpdate = function(cm, viewport, force) {
        var display = cm.display;
        this.viewport = viewport;
        this.visible = visibleLines(display, cm.doc, viewport);
        this.editorIsHidden = !display.wrapper.offsetWidth;
        this.wrapperHeight = display.wrapper.clientHeight;
        this.wrapperWidth = display.wrapper.clientWidth;
        this.oldDisplayWidth = displayWidth(cm);
        this.force = force;
        this.dims = getDimensions(cm);
        this.events = [];
      };
      DisplayUpdate.prototype.signal = function(emitter, type) {
        if (hasHandler(emitter, type)) {
          this.events.push(arguments);
        }
      };
      DisplayUpdate.prototype.finish = function() {
        for (var i2 = 0; i2 < this.events.length; i2++) {
          signal.apply(null, this.events[i2]);
        }
      };
      function maybeClipScrollbars(cm) {
        var display = cm.display;
        if (!display.scrollbarsClipped && display.scroller.offsetWidth) {
          display.nativeBarWidth = display.scroller.offsetWidth - display.scroller.clientWidth;
          display.heightForcer.style.height = scrollGap(cm) + "px";
          display.sizer.style.marginBottom = -display.nativeBarWidth + "px";
          display.sizer.style.borderRightWidth = scrollGap(cm) + "px";
          display.scrollbarsClipped = true;
        }
      }
      function selectionSnapshot(cm) {
        if (cm.hasFocus()) {
          return null;
        }
        var active = activeElt(root(cm));
        if (!active || !contains(cm.display.lineDiv, active)) {
          return null;
        }
        var result = { activeElt: active };
        if (window.getSelection) {
          var sel = win(cm).getSelection();
          if (sel.anchorNode && sel.extend && contains(cm.display.lineDiv, sel.anchorNode)) {
            result.anchorNode = sel.anchorNode;
            result.anchorOffset = sel.anchorOffset;
            result.focusNode = sel.focusNode;
            result.focusOffset = sel.focusOffset;
          }
        }
        return result;
      }
      function restoreSelection(snapshot) {
        if (!snapshot || !snapshot.activeElt || snapshot.activeElt == activeElt(rootNode(snapshot.activeElt))) {
          return;
        }
        snapshot.activeElt.focus();
        if (!/^(INPUT|TEXTAREA)$/.test(snapshot.activeElt.nodeName) && snapshot.anchorNode && contains(document.body, snapshot.anchorNode) && contains(document.body, snapshot.focusNode)) {
          var doc2 = snapshot.activeElt.ownerDocument;
          var sel = doc2.defaultView.getSelection(), range2 = doc2.createRange();
          range2.setEnd(snapshot.anchorNode, snapshot.anchorOffset);
          range2.collapse(false);
          sel.removeAllRanges();
          sel.addRange(range2);
          sel.extend(snapshot.focusNode, snapshot.focusOffset);
        }
      }
      function updateDisplayIfNeeded(cm, update) {
        var display = cm.display, doc2 = cm.doc;
        if (update.editorIsHidden) {
          resetView(cm);
          return false;
        }
        if (!update.force && update.visible.from >= display.viewFrom && update.visible.to <= display.viewTo && (display.updateLineNumbers == null || display.updateLineNumbers >= display.viewTo) && display.renderedView == display.view && countDirtyView(cm) == 0) {
          return false;
        }
        if (maybeUpdateLineNumberWidth(cm)) {
          resetView(cm);
          update.dims = getDimensions(cm);
        }
        var end = doc2.first + doc2.size;
        var from = Math.max(update.visible.from - cm.options.viewportMargin, doc2.first);
        var to = Math.min(end, update.visible.to + cm.options.viewportMargin);
        if (display.viewFrom < from && from - display.viewFrom < 20) {
          from = Math.max(doc2.first, display.viewFrom);
        }
        if (display.viewTo > to && display.viewTo - to < 20) {
          to = Math.min(end, display.viewTo);
        }
        if (sawCollapsedSpans) {
          from = visualLineNo(cm.doc, from);
          to = visualLineEndNo(cm.doc, to);
        }
        var different = from != display.viewFrom || to != display.viewTo || display.lastWrapHeight != update.wrapperHeight || display.lastWrapWidth != update.wrapperWidth;
        adjustView(cm, from, to);
        display.viewOffset = heightAtLine(getLine(cm.doc, display.viewFrom));
        cm.display.mover.style.top = display.viewOffset + "px";
        var toUpdate = countDirtyView(cm);
        if (!different && toUpdate == 0 && !update.force && display.renderedView == display.view && (display.updateLineNumbers == null || display.updateLineNumbers >= display.viewTo)) {
          return false;
        }
        var selSnapshot = selectionSnapshot(cm);
        if (toUpdate > 4) {
          display.lineDiv.style.display = "none";
        }
        patchDisplay(cm, display.updateLineNumbers, update.dims);
        if (toUpdate > 4) {
          display.lineDiv.style.display = "";
        }
        display.renderedView = display.view;
        restoreSelection(selSnapshot);
        removeChildren(display.cursorDiv);
        removeChildren(display.selectionDiv);
        display.gutters.style.height = display.sizer.style.minHeight = 0;
        if (different) {
          display.lastWrapHeight = update.wrapperHeight;
          display.lastWrapWidth = update.wrapperWidth;
          startWorker(cm, 400);
        }
        display.updateLineNumbers = null;
        return true;
      }
      function postUpdateDisplay(cm, update) {
        var viewport = update.viewport;
        for (var first = true; ; first = false) {
          if (!first || !cm.options.lineWrapping || update.oldDisplayWidth == displayWidth(cm)) {
            if (viewport && viewport.top != null) {
              viewport = { top: Math.min(cm.doc.height + paddingVert(cm.display) - displayHeight(cm), viewport.top) };
            }
            update.visible = visibleLines(cm.display, cm.doc, viewport);
            if (update.visible.from >= cm.display.viewFrom && update.visible.to <= cm.display.viewTo) {
              break;
            }
          } else if (first) {
            update.visible = visibleLines(cm.display, cm.doc, viewport);
          }
          if (!updateDisplayIfNeeded(cm, update)) {
            break;
          }
          updateHeightsInViewport(cm);
          var barMeasure = measureForScrollbars(cm);
          updateSelection(cm);
          updateScrollbars(cm, barMeasure);
          setDocumentHeight(cm, barMeasure);
          update.force = false;
        }
        update.signal(cm, "update", cm);
        if (cm.display.viewFrom != cm.display.reportedViewFrom || cm.display.viewTo != cm.display.reportedViewTo) {
          update.signal(cm, "viewportChange", cm, cm.display.viewFrom, cm.display.viewTo);
          cm.display.reportedViewFrom = cm.display.viewFrom;
          cm.display.reportedViewTo = cm.display.viewTo;
        }
      }
      function updateDisplaySimple(cm, viewport) {
        var update = new DisplayUpdate(cm, viewport);
        if (updateDisplayIfNeeded(cm, update)) {
          updateHeightsInViewport(cm);
          postUpdateDisplay(cm, update);
          var barMeasure = measureForScrollbars(cm);
          updateSelection(cm);
          updateScrollbars(cm, barMeasure);
          setDocumentHeight(cm, barMeasure);
          update.finish();
        }
      }
      function patchDisplay(cm, updateNumbersFrom, dims) {
        var display = cm.display, lineNumbers = cm.options.lineNumbers;
        var container = display.lineDiv, cur = container.firstChild;
        function rm(node2) {
          var next = node2.nextSibling;
          if (webkit && mac && cm.display.currentWheelTarget == node2) {
            node2.style.display = "none";
          } else {
            node2.parentNode.removeChild(node2);
          }
          return next;
        }
        var view = display.view, lineN = display.viewFrom;
        for (var i2 = 0; i2 < view.length; i2++) {
          var lineView = view[i2];
          if (lineView.hidden) ;
          else if (!lineView.node || lineView.node.parentNode != container) {
            var node = buildLineElement(cm, lineView, lineN, dims);
            container.insertBefore(node, cur);
          } else {
            while (cur != lineView.node) {
              cur = rm(cur);
            }
            var updateNumber = lineNumbers && updateNumbersFrom != null && updateNumbersFrom <= lineN && lineView.lineNumber;
            if (lineView.changes) {
              if (indexOf(lineView.changes, "gutter") > -1) {
                updateNumber = false;
              }
              updateLineForChanges(cm, lineView, lineN, dims);
            }
            if (updateNumber) {
              removeChildren(lineView.lineNumber);
              lineView.lineNumber.appendChild(document.createTextNode(lineNumberFor(cm.options, lineN)));
            }
            cur = lineView.node.nextSibling;
          }
          lineN += lineView.size;
        }
        while (cur) {
          cur = rm(cur);
        }
      }
      function updateGutterSpace(display) {
        var width = display.gutters.offsetWidth;
        display.sizer.style.marginLeft = width + "px";
        signalLater(display, "gutterChanged", display);
      }
      function setDocumentHeight(cm, measure) {
        cm.display.sizer.style.minHeight = measure.docHeight + "px";
        cm.display.heightForcer.style.top = measure.docHeight + "px";
        cm.display.gutters.style.height = measure.docHeight + cm.display.barHeight + scrollGap(cm) + "px";
      }
      function alignHorizontally(cm) {
        var display = cm.display, view = display.view;
        if (!display.alignWidgets && (!display.gutters.firstChild || !cm.options.fixedGutter)) {
          return;
        }
        var comp = compensateForHScroll(display) - display.scroller.scrollLeft + cm.doc.scrollLeft;
        var gutterW = display.gutters.offsetWidth, left = comp + "px";
        for (var i2 = 0; i2 < view.length; i2++) {
          if (!view[i2].hidden) {
            if (cm.options.fixedGutter) {
              if (view[i2].gutter) {
                view[i2].gutter.style.left = left;
              }
              if (view[i2].gutterBackground) {
                view[i2].gutterBackground.style.left = left;
              }
            }
            var align = view[i2].alignable;
            if (align) {
              for (var j = 0; j < align.length; j++) {
                align[j].style.left = left;
              }
            }
          }
        }
        if (cm.options.fixedGutter) {
          display.gutters.style.left = comp + gutterW + "px";
        }
      }
      function maybeUpdateLineNumberWidth(cm) {
        if (!cm.options.lineNumbers) {
          return false;
        }
        var doc2 = cm.doc, last = lineNumberFor(cm.options, doc2.first + doc2.size - 1), display = cm.display;
        if (last.length != display.lineNumChars) {
          var test = display.measure.appendChild(elt(
            "div",
            [elt("div", last)],
            "CodeMirror-linenumber CodeMirror-gutter-elt"
          ));
          var innerW = test.firstChild.offsetWidth, padding = test.offsetWidth - innerW;
          display.lineGutter.style.width = "";
          display.lineNumInnerWidth = Math.max(innerW, display.lineGutter.offsetWidth - padding) + 1;
          display.lineNumWidth = display.lineNumInnerWidth + padding;
          display.lineNumChars = display.lineNumInnerWidth ? last.length : -1;
          display.lineGutter.style.width = display.lineNumWidth + "px";
          updateGutterSpace(cm.display);
          return true;
        }
        return false;
      }
      function getGutters(gutters, lineNumbers) {
        var result = [], sawLineNumbers = false;
        for (var i2 = 0; i2 < gutters.length; i2++) {
          var name = gutters[i2], style = null;
          if (typeof name != "string") {
            style = name.style;
            name = name.className;
          }
          if (name == "CodeMirror-linenumbers") {
            if (!lineNumbers) {
              continue;
            } else {
              sawLineNumbers = true;
            }
          }
          result.push({ className: name, style });
        }
        if (lineNumbers && !sawLineNumbers) {
          result.push({ className: "CodeMirror-linenumbers", style: null });
        }
        return result;
      }
      function renderGutters(display) {
        var gutters = display.gutters, specs = display.gutterSpecs;
        removeChildren(gutters);
        display.lineGutter = null;
        for (var i2 = 0; i2 < specs.length; ++i2) {
          var ref = specs[i2];
          var className = ref.className;
          var style = ref.style;
          var gElt = gutters.appendChild(elt("div", null, "CodeMirror-gutter " + className));
          if (style) {
            gElt.style.cssText = style;
          }
          if (className == "CodeMirror-linenumbers") {
            display.lineGutter = gElt;
            gElt.style.width = (display.lineNumWidth || 1) + "px";
          }
        }
        gutters.style.display = specs.length ? "" : "none";
        updateGutterSpace(display);
      }
      function updateGutters(cm) {
        renderGutters(cm.display);
        regChange(cm);
        alignHorizontally(cm);
      }
      function Display(place, doc2, input, options) {
        var d = this;
        this.input = input;
        d.scrollbarFiller = elt("div", null, "CodeMirror-scrollbar-filler");
        d.scrollbarFiller.setAttribute("cm-not-content", "true");
        d.gutterFiller = elt("div", null, "CodeMirror-gutter-filler");
        d.gutterFiller.setAttribute("cm-not-content", "true");
        d.lineDiv = eltP("div", null, "CodeMirror-code");
        d.selectionDiv = elt("div", null, null, "position: relative; z-index: 1");
        d.cursorDiv = elt("div", null, "CodeMirror-cursors");
        d.measure = elt("div", null, "CodeMirror-measure");
        d.lineMeasure = elt("div", null, "CodeMirror-measure");
        d.lineSpace = eltP(
          "div",
          [d.measure, d.lineMeasure, d.selectionDiv, d.cursorDiv, d.lineDiv],
          null,
          "position: relative; outline: none"
        );
        var lines = eltP("div", [d.lineSpace], "CodeMirror-lines");
        d.mover = elt("div", [lines], null, "position: relative");
        d.sizer = elt("div", [d.mover], "CodeMirror-sizer");
        d.sizerWidth = null;
        d.heightForcer = elt("div", null, null, "position: absolute; height: " + scrollerGap + "px; width: 1px;");
        d.gutters = elt("div", null, "CodeMirror-gutters");
        d.lineGutter = null;
        d.scroller = elt("div", [d.sizer, d.heightForcer, d.gutters], "CodeMirror-scroll");
        d.scroller.setAttribute("tabIndex", "-1");
        d.wrapper = elt("div", [d.scrollbarFiller, d.gutterFiller, d.scroller], "CodeMirror");
        if (chrome && chrome_version === 105) {
          d.wrapper.style.clipPath = "inset(0px)";
        }
        d.wrapper.setAttribute("translate", "no");
        if (ie && ie_version < 8) {
          d.gutters.style.zIndex = -1;
          d.scroller.style.paddingRight = 0;
        }
        if (!webkit && !(gecko && mobile)) {
          d.scroller.draggable = true;
        }
        if (place) {
          if (place.appendChild) {
            place.appendChild(d.wrapper);
          } else {
            place(d.wrapper);
          }
        }
        d.viewFrom = d.viewTo = doc2.first;
        d.reportedViewFrom = d.reportedViewTo = doc2.first;
        d.view = [];
        d.renderedView = null;
        d.externalMeasured = null;
        d.viewOffset = 0;
        d.lastWrapHeight = d.lastWrapWidth = 0;
        d.updateLineNumbers = null;
        d.nativeBarWidth = d.barHeight = d.barWidth = 0;
        d.scrollbarsClipped = false;
        d.lineNumWidth = d.lineNumInnerWidth = d.lineNumChars = null;
        d.alignWidgets = false;
        d.cachedCharWidth = d.cachedTextHeight = d.cachedPaddingH = null;
        d.maxLine = null;
        d.maxLineLength = 0;
        d.maxLineChanged = false;
        d.wheelDX = d.wheelDY = d.wheelStartX = d.wheelStartY = null;
        d.shift = false;
        d.selForContextMenu = null;
        d.activeTouch = null;
        d.gutterSpecs = getGutters(options.gutters, options.lineNumbers);
        renderGutters(d);
        input.init(d);
      }
      var wheelSamples = 0, wheelPixelsPerUnit = null;
      if (ie) {
        wheelPixelsPerUnit = -0.53;
      } else if (gecko) {
        wheelPixelsPerUnit = 15;
      } else if (chrome) {
        wheelPixelsPerUnit = -0.7;
      } else if (safari) {
        wheelPixelsPerUnit = -1 / 3;
      }
      function wheelEventDelta(e) {
        var dx = e.wheelDeltaX, dy = e.wheelDeltaY;
        if (dx == null && e.detail && e.axis == e.HORIZONTAL_AXIS) {
          dx = e.detail;
        }
        if (dy == null && e.detail && e.axis == e.VERTICAL_AXIS) {
          dy = e.detail;
        } else if (dy == null) {
          dy = e.wheelDelta;
        }
        return { x: dx, y: dy };
      }
      function wheelEventPixels(e) {
        var delta = wheelEventDelta(e);
        delta.x *= wheelPixelsPerUnit;
        delta.y *= wheelPixelsPerUnit;
        return delta;
      }
      function onScrollWheel(cm, e) {
        if (chrome && chrome_version == 102) {
          if (cm.display.chromeScrollHack == null) {
            cm.display.sizer.style.pointerEvents = "none";
          } else {
            clearTimeout(cm.display.chromeScrollHack);
          }
          cm.display.chromeScrollHack = setTimeout(function() {
            cm.display.chromeScrollHack = null;
            cm.display.sizer.style.pointerEvents = "";
          }, 100);
        }
        var delta = wheelEventDelta(e), dx = delta.x, dy = delta.y;
        var pixelsPerUnit = wheelPixelsPerUnit;
        if (e.deltaMode === 0) {
          dx = e.deltaX;
          dy = e.deltaY;
          pixelsPerUnit = 1;
        }
        var display = cm.display, scroll = display.scroller;
        var canScrollX = scroll.scrollWidth > scroll.clientWidth;
        var canScrollY = scroll.scrollHeight > scroll.clientHeight;
        if (!(dx && canScrollX || dy && canScrollY)) {
          return;
        }
        if (dy && mac && webkit) {
          outer: for (var cur = e.target, view = display.view; cur != scroll; cur = cur.parentNode) {
            for (var i2 = 0; i2 < view.length; i2++) {
              if (view[i2].node == cur) {
                cm.display.currentWheelTarget = cur;
                break outer;
              }
            }
          }
        }
        if (dx && !gecko && !presto && pixelsPerUnit != null) {
          if (dy && canScrollY) {
            updateScrollTop(cm, Math.max(0, scroll.scrollTop + dy * pixelsPerUnit));
          }
          setScrollLeft(cm, Math.max(0, scroll.scrollLeft + dx * pixelsPerUnit));
          if (!dy || dy && canScrollY) {
            e_preventDefault(e);
          }
          display.wheelStartX = null;
          return;
        }
        if (dy && pixelsPerUnit != null) {
          var pixels = dy * pixelsPerUnit;
          var top = cm.doc.scrollTop, bot = top + display.wrapper.clientHeight;
          if (pixels < 0) {
            top = Math.max(0, top + pixels - 50);
          } else {
            bot = Math.min(cm.doc.height, bot + pixels + 50);
          }
          updateDisplaySimple(cm, { top, bottom: bot });
        }
        if (wheelSamples < 20 && e.deltaMode !== 0) {
          if (display.wheelStartX == null) {
            display.wheelStartX = scroll.scrollLeft;
            display.wheelStartY = scroll.scrollTop;
            display.wheelDX = dx;
            display.wheelDY = dy;
            setTimeout(function() {
              if (display.wheelStartX == null) {
                return;
              }
              var movedX = scroll.scrollLeft - display.wheelStartX;
              var movedY = scroll.scrollTop - display.wheelStartY;
              var sample = movedY && display.wheelDY && movedY / display.wheelDY || movedX && display.wheelDX && movedX / display.wheelDX;
              display.wheelStartX = display.wheelStartY = null;
              if (!sample) {
                return;
              }
              wheelPixelsPerUnit = (wheelPixelsPerUnit * wheelSamples + sample) / (wheelSamples + 1);
              ++wheelSamples;
            }, 200);
          } else {
            display.wheelDX += dx;
            display.wheelDY += dy;
          }
        }
      }
      var Selection = function(ranges, primIndex) {
        this.ranges = ranges;
        this.primIndex = primIndex;
      };
      Selection.prototype.primary = function() {
        return this.ranges[this.primIndex];
      };
      Selection.prototype.equals = function(other) {
        if (other == this) {
          return true;
        }
        if (other.primIndex != this.primIndex || other.ranges.length != this.ranges.length) {
          return false;
        }
        for (var i2 = 0; i2 < this.ranges.length; i2++) {
          var here = this.ranges[i2], there = other.ranges[i2];
          if (!equalCursorPos(here.anchor, there.anchor) || !equalCursorPos(here.head, there.head)) {
            return false;
          }
        }
        return true;
      };
      Selection.prototype.deepCopy = function() {
        var out = [];
        for (var i2 = 0; i2 < this.ranges.length; i2++) {
          out[i2] = new Range(copyPos(this.ranges[i2].anchor), copyPos(this.ranges[i2].head));
        }
        return new Selection(out, this.primIndex);
      };
      Selection.prototype.somethingSelected = function() {
        for (var i2 = 0; i2 < this.ranges.length; i2++) {
          if (!this.ranges[i2].empty()) {
            return true;
          }
        }
        return false;
      };
      Selection.prototype.contains = function(pos, end) {
        if (!end) {
          end = pos;
        }
        for (var i2 = 0; i2 < this.ranges.length; i2++) {
          var range2 = this.ranges[i2];
          if (cmp(end, range2.from()) >= 0 && cmp(pos, range2.to()) <= 0) {
            return i2;
          }
        }
        return -1;
      };
      var Range = function(anchor, head) {
        this.anchor = anchor;
        this.head = head;
      };
      Range.prototype.from = function() {
        return minPos(this.anchor, this.head);
      };
      Range.prototype.to = function() {
        return maxPos(this.anchor, this.head);
      };
      Range.prototype.empty = function() {
        return this.head.line == this.anchor.line && this.head.ch == this.anchor.ch;
      };
      function normalizeSelection(cm, ranges, primIndex) {
        var mayTouch = cm && cm.options.selectionsMayTouch;
        var prim = ranges[primIndex];
        ranges.sort(function(a, b) {
          return cmp(a.from(), b.from());
        });
        primIndex = indexOf(ranges, prim);
        for (var i2 = 1; i2 < ranges.length; i2++) {
          var cur = ranges[i2], prev = ranges[i2 - 1];
          var diff = cmp(prev.to(), cur.from());
          if (mayTouch && !cur.empty() ? diff > 0 : diff >= 0) {
            var from = minPos(prev.from(), cur.from()), to = maxPos(prev.to(), cur.to());
            var inv = prev.empty() ? cur.from() == cur.head : prev.from() == prev.head;
            if (i2 <= primIndex) {
              --primIndex;
            }
            ranges.splice(--i2, 2, new Range(inv ? to : from, inv ? from : to));
          }
        }
        return new Selection(ranges, primIndex);
      }
      function simpleSelection(anchor, head) {
        return new Selection([new Range(anchor, head || anchor)], 0);
      }
      function changeEnd(change) {
        if (!change.text) {
          return change.to;
        }
        return Pos(
          change.from.line + change.text.length - 1,
          lst(change.text).length + (change.text.length == 1 ? change.from.ch : 0)
        );
      }
      function adjustForChange(pos, change) {
        if (cmp(pos, change.from) < 0) {
          return pos;
        }
        if (cmp(pos, change.to) <= 0) {
          return changeEnd(change);
        }
        var line = pos.line + change.text.length - (change.to.line - change.from.line) - 1, ch = pos.ch;
        if (pos.line == change.to.line) {
          ch += changeEnd(change).ch - change.to.ch;
        }
        return Pos(line, ch);
      }
      function computeSelAfterChange(doc2, change) {
        var out = [];
        for (var i2 = 0; i2 < doc2.sel.ranges.length; i2++) {
          var range2 = doc2.sel.ranges[i2];
          out.push(new Range(
            adjustForChange(range2.anchor, change),
            adjustForChange(range2.head, change)
          ));
        }
        return normalizeSelection(doc2.cm, out, doc2.sel.primIndex);
      }
      function offsetPos(pos, old, nw) {
        if (pos.line == old.line) {
          return Pos(nw.line, pos.ch - old.ch + nw.ch);
        } else {
          return Pos(nw.line + (pos.line - old.line), pos.ch);
        }
      }
      function computeReplacedSel(doc2, changes, hint) {
        var out = [];
        var oldPrev = Pos(doc2.first, 0), newPrev = oldPrev;
        for (var i2 = 0; i2 < changes.length; i2++) {
          var change = changes[i2];
          var from = offsetPos(change.from, oldPrev, newPrev);
          var to = offsetPos(changeEnd(change), oldPrev, newPrev);
          oldPrev = change.to;
          newPrev = to;
          if (hint == "around") {
            var range2 = doc2.sel.ranges[i2], inv = cmp(range2.head, range2.anchor) < 0;
            out[i2] = new Range(inv ? to : from, inv ? from : to);
          } else {
            out[i2] = new Range(from, from);
          }
        }
        return new Selection(out, doc2.sel.primIndex);
      }
      function loadMode(cm) {
        cm.doc.mode = getMode(cm.options, cm.doc.modeOption);
        resetModeState(cm);
      }
      function resetModeState(cm) {
        cm.doc.iter(function(line) {
          if (line.stateAfter) {
            line.stateAfter = null;
          }
          if (line.styles) {
            line.styles = null;
          }
        });
        cm.doc.modeFrontier = cm.doc.highlightFrontier = cm.doc.first;
        startWorker(cm, 100);
        cm.state.modeGen++;
        if (cm.curOp) {
          regChange(cm);
        }
      }
      function isWholeLineUpdate(doc2, change) {
        return change.from.ch == 0 && change.to.ch == 0 && lst(change.text) == "" && (!doc2.cm || doc2.cm.options.wholeLineUpdateBefore);
      }
      function updateDoc(doc2, change, markedSpans, estimateHeight2) {
        function spansFor(n) {
          return markedSpans ? markedSpans[n] : null;
        }
        function update(line, text2, spans) {
          updateLine(line, text2, spans, estimateHeight2);
          signalLater(line, "change", line, change);
        }
        function linesFor(start, end) {
          var result = [];
          for (var i2 = start; i2 < end; ++i2) {
            result.push(new Line(text[i2], spansFor(i2), estimateHeight2));
          }
          return result;
        }
        var from = change.from, to = change.to, text = change.text;
        var firstLine = getLine(doc2, from.line), lastLine = getLine(doc2, to.line);
        var lastText = lst(text), lastSpans = spansFor(text.length - 1), nlines = to.line - from.line;
        if (change.full) {
          doc2.insert(0, linesFor(0, text.length));
          doc2.remove(text.length, doc2.size - text.length);
        } else if (isWholeLineUpdate(doc2, change)) {
          var added = linesFor(0, text.length - 1);
          update(lastLine, lastLine.text, lastSpans);
          if (nlines) {
            doc2.remove(from.line, nlines);
          }
          if (added.length) {
            doc2.insert(from.line, added);
          }
        } else if (firstLine == lastLine) {
          if (text.length == 1) {
            update(firstLine, firstLine.text.slice(0, from.ch) + lastText + firstLine.text.slice(to.ch), lastSpans);
          } else {
            var added$1 = linesFor(1, text.length - 1);
            added$1.push(new Line(lastText + firstLine.text.slice(to.ch), lastSpans, estimateHeight2));
            update(firstLine, firstLine.text.slice(0, from.ch) + text[0], spansFor(0));
            doc2.insert(from.line + 1, added$1);
          }
        } else if (text.length == 1) {
          update(firstLine, firstLine.text.slice(0, from.ch) + text[0] + lastLine.text.slice(to.ch), spansFor(0));
          doc2.remove(from.line + 1, nlines);
        } else {
          update(firstLine, firstLine.text.slice(0, from.ch) + text[0], spansFor(0));
          update(lastLine, lastText + lastLine.text.slice(to.ch), lastSpans);
          var added$2 = linesFor(1, text.length - 1);
          if (nlines > 1) {
            doc2.remove(from.line + 1, nlines - 1);
          }
          doc2.insert(from.line + 1, added$2);
        }
        signalLater(doc2, "change", doc2, change);
      }
      function linkedDocs(doc2, f, sharedHistOnly) {
        function propagate(doc3, skip, sharedHist) {
          if (doc3.linked) {
            for (var i2 = 0; i2 < doc3.linked.length; ++i2) {
              var rel = doc3.linked[i2];
              if (rel.doc == skip) {
                continue;
              }
              var shared = sharedHist && rel.sharedHist;
              if (sharedHistOnly && !shared) {
                continue;
              }
              f(rel.doc, shared);
              propagate(rel.doc, doc3, shared);
            }
          }
        }
        propagate(doc2, null, true);
      }
      function attachDoc(cm, doc2) {
        if (doc2.cm) {
          throw new Error("This document is already in use.");
        }
        cm.doc = doc2;
        doc2.cm = cm;
        estimateLineHeights(cm);
        loadMode(cm);
        setDirectionClass(cm);
        cm.options.direction = doc2.direction;
        if (!cm.options.lineWrapping) {
          findMaxLine(cm);
        }
        cm.options.mode = doc2.modeOption;
        regChange(cm);
      }
      function setDirectionClass(cm) {
        (cm.doc.direction == "rtl" ? addClass : rmClass)(cm.display.lineDiv, "CodeMirror-rtl");
      }
      function directionChanged(cm) {
        runInOp(cm, function() {
          setDirectionClass(cm);
          regChange(cm);
        });
      }
      function History(prev) {
        this.done = [];
        this.undone = [];
        this.undoDepth = prev ? prev.undoDepth : Infinity;
        this.lastModTime = this.lastSelTime = 0;
        this.lastOp = this.lastSelOp = null;
        this.lastOrigin = this.lastSelOrigin = null;
        this.generation = this.maxGeneration = prev ? prev.maxGeneration : 1;
      }
      function historyChangeFromChange(doc2, change) {
        var histChange = { from: copyPos(change.from), to: changeEnd(change), text: getBetween(doc2, change.from, change.to) };
        attachLocalSpans(doc2, histChange, change.from.line, change.to.line + 1);
        linkedDocs(doc2, function(doc3) {
          return attachLocalSpans(doc3, histChange, change.from.line, change.to.line + 1);
        }, true);
        return histChange;
      }
      function clearSelectionEvents(array) {
        while (array.length) {
          var last = lst(array);
          if (last.ranges) {
            array.pop();
          } else {
            break;
          }
        }
      }
      function lastChangeEvent(hist, force) {
        if (force) {
          clearSelectionEvents(hist.done);
          return lst(hist.done);
        } else if (hist.done.length && !lst(hist.done).ranges) {
          return lst(hist.done);
        } else if (hist.done.length > 1 && !hist.done[hist.done.length - 2].ranges) {
          hist.done.pop();
          return lst(hist.done);
        }
      }
      function addChangeToHistory(doc2, change, selAfter, opId) {
        var hist = doc2.history;
        hist.undone.length = 0;
        var time = +/* @__PURE__ */ new Date(), cur;
        var last;
        if ((hist.lastOp == opId || hist.lastOrigin == change.origin && change.origin && (change.origin.charAt(0) == "+" && hist.lastModTime > time - (doc2.cm ? doc2.cm.options.historyEventDelay : 500) || change.origin.charAt(0) == "*")) && (cur = lastChangeEvent(hist, hist.lastOp == opId))) {
          last = lst(cur.changes);
          if (cmp(change.from, change.to) == 0 && cmp(change.from, last.to) == 0) {
            last.to = changeEnd(change);
          } else {
            cur.changes.push(historyChangeFromChange(doc2, change));
          }
        } else {
          var before = lst(hist.done);
          if (!before || !before.ranges) {
            pushSelectionToHistory(doc2.sel, hist.done);
          }
          cur = {
            changes: [historyChangeFromChange(doc2, change)],
            generation: hist.generation
          };
          hist.done.push(cur);
          while (hist.done.length > hist.undoDepth) {
            hist.done.shift();
            if (!hist.done[0].ranges) {
              hist.done.shift();
            }
          }
        }
        hist.done.push(selAfter);
        hist.generation = ++hist.maxGeneration;
        hist.lastModTime = hist.lastSelTime = time;
        hist.lastOp = hist.lastSelOp = opId;
        hist.lastOrigin = hist.lastSelOrigin = change.origin;
        if (!last) {
          signal(doc2, "historyAdded");
        }
      }
      function selectionEventCanBeMerged(doc2, origin, prev, sel) {
        var ch = origin.charAt(0);
        return ch == "*" || ch == "+" && prev.ranges.length == sel.ranges.length && prev.somethingSelected() == sel.somethingSelected() && /* @__PURE__ */ new Date() - doc2.history.lastSelTime <= (doc2.cm ? doc2.cm.options.historyEventDelay : 500);
      }
      function addSelectionToHistory(doc2, sel, opId, options) {
        var hist = doc2.history, origin = options && options.origin;
        if (opId == hist.lastSelOp || origin && hist.lastSelOrigin == origin && (hist.lastModTime == hist.lastSelTime && hist.lastOrigin == origin || selectionEventCanBeMerged(doc2, origin, lst(hist.done), sel))) {
          hist.done[hist.done.length - 1] = sel;
        } else {
          pushSelectionToHistory(sel, hist.done);
        }
        hist.lastSelTime = +/* @__PURE__ */ new Date();
        hist.lastSelOrigin = origin;
        hist.lastSelOp = opId;
        if (options && options.clearRedo !== false) {
          clearSelectionEvents(hist.undone);
        }
      }
      function pushSelectionToHistory(sel, dest) {
        var top = lst(dest);
        if (!(top && top.ranges && top.equals(sel))) {
          dest.push(sel);
        }
      }
      function attachLocalSpans(doc2, change, from, to) {
        var existing = change["spans_" + doc2.id], n = 0;
        doc2.iter(Math.max(doc2.first, from), Math.min(doc2.first + doc2.size, to), function(line) {
          if (line.markedSpans) {
            (existing || (existing = change["spans_" + doc2.id] = {}))[n] = line.markedSpans;
          }
          ++n;
        });
      }
      function removeClearedSpans(spans) {
        if (!spans) {
          return null;
        }
        var out;
        for (var i2 = 0; i2 < spans.length; ++i2) {
          if (spans[i2].marker.explicitlyCleared) {
            if (!out) {
              out = spans.slice(0, i2);
            }
          } else if (out) {
            out.push(spans[i2]);
          }
        }
        return !out ? spans : out.length ? out : null;
      }
      function getOldSpans(doc2, change) {
        var found = change["spans_" + doc2.id];
        if (!found) {
          return null;
        }
        var nw = [];
        for (var i2 = 0; i2 < change.text.length; ++i2) {
          nw.push(removeClearedSpans(found[i2]));
        }
        return nw;
      }
      function mergeOldSpans(doc2, change) {
        var old = getOldSpans(doc2, change);
        var stretched = stretchSpansOverChange(doc2, change);
        if (!old) {
          return stretched;
        }
        if (!stretched) {
          return old;
        }
        for (var i2 = 0; i2 < old.length; ++i2) {
          var oldCur = old[i2], stretchCur = stretched[i2];
          if (oldCur && stretchCur) {
            spans: for (var j = 0; j < stretchCur.length; ++j) {
              var span = stretchCur[j];
              for (var k = 0; k < oldCur.length; ++k) {
                if (oldCur[k].marker == span.marker) {
                  continue spans;
                }
              }
              oldCur.push(span);
            }
          } else if (stretchCur) {
            old[i2] = stretchCur;
          }
        }
        return old;
      }
      function copyHistoryArray(events, newGroup, instantiateSel) {
        var copy = [];
        for (var i2 = 0; i2 < events.length; ++i2) {
          var event = events[i2];
          if (event.ranges) {
            copy.push(instantiateSel ? Selection.prototype.deepCopy.call(event) : event);
            continue;
          }
          var changes = event.changes, newChanges = [];
          copy.push({ changes: newChanges });
          for (var j = 0; j < changes.length; ++j) {
            var change = changes[j], m = void 0;
            newChanges.push({ from: change.from, to: change.to, text: change.text });
            if (newGroup) {
              for (var prop2 in change) {
                if (m = prop2.match(/^spans_(\d+)$/)) {
                  if (indexOf(newGroup, Number(m[1])) > -1) {
                    lst(newChanges)[prop2] = change[prop2];
                    delete change[prop2];
                  }
                }
              }
            }
          }
        }
        return copy;
      }
      function extendRange(range2, head, other, extend) {
        if (extend) {
          var anchor = range2.anchor;
          if (other) {
            var posBefore = cmp(head, anchor) < 0;
            if (posBefore != cmp(other, anchor) < 0) {
              anchor = head;
              head = other;
            } else if (posBefore != cmp(head, other) < 0) {
              head = other;
            }
          }
          return new Range(anchor, head);
        } else {
          return new Range(other || head, head);
        }
      }
      function extendSelection(doc2, head, other, options, extend) {
        if (extend == null) {
          extend = doc2.cm && (doc2.cm.display.shift || doc2.extend);
        }
        setSelection(doc2, new Selection([extendRange(doc2.sel.primary(), head, other, extend)], 0), options);
      }
      function extendSelections(doc2, heads, options) {
        var out = [];
        var extend = doc2.cm && (doc2.cm.display.shift || doc2.extend);
        for (var i2 = 0; i2 < doc2.sel.ranges.length; i2++) {
          out[i2] = extendRange(doc2.sel.ranges[i2], heads[i2], null, extend);
        }
        var newSel = normalizeSelection(doc2.cm, out, doc2.sel.primIndex);
        setSelection(doc2, newSel, options);
      }
      function replaceOneSelection(doc2, i2, range2, options) {
        var ranges = doc2.sel.ranges.slice(0);
        ranges[i2] = range2;
        setSelection(doc2, normalizeSelection(doc2.cm, ranges, doc2.sel.primIndex), options);
      }
      function setSimpleSelection(doc2, anchor, head, options) {
        setSelection(doc2, simpleSelection(anchor, head), options);
      }
      function filterSelectionChange(doc2, sel, options) {
        var obj = {
          ranges: sel.ranges,
          update: function(ranges) {
            this.ranges = [];
            for (var i2 = 0; i2 < ranges.length; i2++) {
              this.ranges[i2] = new Range(
                clipPos(doc2, ranges[i2].anchor),
                clipPos(doc2, ranges[i2].head)
              );
            }
          },
          origin: options && options.origin
        };
        signal(doc2, "beforeSelectionChange", doc2, obj);
        if (doc2.cm) {
          signal(doc2.cm, "beforeSelectionChange", doc2.cm, obj);
        }
        if (obj.ranges != sel.ranges) {
          return normalizeSelection(doc2.cm, obj.ranges, obj.ranges.length - 1);
        } else {
          return sel;
        }
      }
      function setSelectionReplaceHistory(doc2, sel, options) {
        var done = doc2.history.done, last = lst(done);
        if (last && last.ranges) {
          done[done.length - 1] = sel;
          setSelectionNoUndo(doc2, sel, options);
        } else {
          setSelection(doc2, sel, options);
        }
      }
      function setSelection(doc2, sel, options) {
        setSelectionNoUndo(doc2, sel, options);
        addSelectionToHistory(doc2, doc2.sel, doc2.cm ? doc2.cm.curOp.id : NaN, options);
      }
      function setSelectionNoUndo(doc2, sel, options) {
        if (hasHandler(doc2, "beforeSelectionChange") || doc2.cm && hasHandler(doc2.cm, "beforeSelectionChange")) {
          sel = filterSelectionChange(doc2, sel, options);
        }
        var bias = options && options.bias || (cmp(sel.primary().head, doc2.sel.primary().head) < 0 ? -1 : 1);
        setSelectionInner(doc2, skipAtomicInSelection(doc2, sel, bias, true));
        if (!(options && options.scroll === false) && doc2.cm && doc2.cm.getOption("readOnly") != "nocursor") {
          ensureCursorVisible(doc2.cm);
        }
      }
      function setSelectionInner(doc2, sel) {
        if (sel.equals(doc2.sel)) {
          return;
        }
        doc2.sel = sel;
        if (doc2.cm) {
          doc2.cm.curOp.updateInput = 1;
          doc2.cm.curOp.selectionChanged = true;
          signalCursorActivity(doc2.cm);
        }
        signalLater(doc2, "cursorActivity", doc2);
      }
      function reCheckSelection(doc2) {
        setSelectionInner(doc2, skipAtomicInSelection(doc2, doc2.sel, null, false));
      }
      function skipAtomicInSelection(doc2, sel, bias, mayClear) {
        var out;
        for (var i2 = 0; i2 < sel.ranges.length; i2++) {
          var range2 = sel.ranges[i2];
          var old = sel.ranges.length == doc2.sel.ranges.length && doc2.sel.ranges[i2];
          var newAnchor = skipAtomic(doc2, range2.anchor, old && old.anchor, bias, mayClear);
          var newHead = range2.head == range2.anchor ? newAnchor : skipAtomic(doc2, range2.head, old && old.head, bias, mayClear);
          if (out || newAnchor != range2.anchor || newHead != range2.head) {
            if (!out) {
              out = sel.ranges.slice(0, i2);
            }
            out[i2] = new Range(newAnchor, newHead);
          }
        }
        return out ? normalizeSelection(doc2.cm, out, sel.primIndex) : sel;
      }
      function skipAtomicInner(doc2, pos, oldPos, dir, mayClear) {
        var line = getLine(doc2, pos.line);
        if (line.markedSpans) {
          for (var i2 = 0; i2 < line.markedSpans.length; ++i2) {
            var sp = line.markedSpans[i2], m = sp.marker;
            var preventCursorLeft = "selectLeft" in m ? !m.selectLeft : m.inclusiveLeft;
            var preventCursorRight = "selectRight" in m ? !m.selectRight : m.inclusiveRight;
            if ((sp.from == null || (preventCursorLeft ? sp.from <= pos.ch : sp.from < pos.ch)) && (sp.to == null || (preventCursorRight ? sp.to >= pos.ch : sp.to > pos.ch))) {
              if (mayClear) {
                signal(m, "beforeCursorEnter");
                if (m.explicitlyCleared) {
                  if (!line.markedSpans) {
                    break;
                  } else {
                    --i2;
                    continue;
                  }
                }
              }
              if (!m.atomic) {
                continue;
              }
              if (oldPos) {
                var near = m.find(dir < 0 ? 1 : -1), diff = void 0;
                if (dir < 0 ? preventCursorRight : preventCursorLeft) {
                  near = movePos(doc2, near, -dir, near && near.line == pos.line ? line : null);
                }
                if (near && near.line == pos.line && (diff = cmp(near, oldPos)) && (dir < 0 ? diff < 0 : diff > 0)) {
                  return skipAtomicInner(doc2, near, pos, dir, mayClear);
                }
              }
              var far = m.find(dir < 0 ? -1 : 1);
              if (dir < 0 ? preventCursorLeft : preventCursorRight) {
                far = movePos(doc2, far, dir, far.line == pos.line ? line : null);
              }
              return far ? skipAtomicInner(doc2, far, pos, dir, mayClear) : null;
            }
          }
        }
        return pos;
      }
      function skipAtomic(doc2, pos, oldPos, bias, mayClear) {
        var dir = bias || 1;
        var found = skipAtomicInner(doc2, pos, oldPos, dir, mayClear) || !mayClear && skipAtomicInner(doc2, pos, oldPos, dir, true) || skipAtomicInner(doc2, pos, oldPos, -dir, mayClear) || !mayClear && skipAtomicInner(doc2, pos, oldPos, -dir, true);
        if (!found) {
          doc2.cantEdit = true;
          return Pos(doc2.first, 0);
        }
        return found;
      }
      function movePos(doc2, pos, dir, line) {
        if (dir < 0 && pos.ch == 0) {
          if (pos.line > doc2.first) {
            return clipPos(doc2, Pos(pos.line - 1));
          } else {
            return null;
          }
        } else if (dir > 0 && pos.ch == (line || getLine(doc2, pos.line)).text.length) {
          if (pos.line < doc2.first + doc2.size - 1) {
            return Pos(pos.line + 1, 0);
          } else {
            return null;
          }
        } else {
          return new Pos(pos.line, pos.ch + dir);
        }
      }
      function selectAll(cm) {
        cm.setSelection(Pos(cm.firstLine(), 0), Pos(cm.lastLine()), sel_dontScroll);
      }
      function filterChange(doc2, change, update) {
        var obj = {
          canceled: false,
          from: change.from,
          to: change.to,
          text: change.text,
          origin: change.origin,
          cancel: function() {
            return obj.canceled = true;
          }
        };
        if (update) {
          obj.update = function(from, to, text, origin) {
            if (from) {
              obj.from = clipPos(doc2, from);
            }
            if (to) {
              obj.to = clipPos(doc2, to);
            }
            if (text) {
              obj.text = text;
            }
            if (origin !== void 0) {
              obj.origin = origin;
            }
          };
        }
        signal(doc2, "beforeChange", doc2, obj);
        if (doc2.cm) {
          signal(doc2.cm, "beforeChange", doc2.cm, obj);
        }
        if (obj.canceled) {
          if (doc2.cm) {
            doc2.cm.curOp.updateInput = 2;
          }
          return null;
        }
        return { from: obj.from, to: obj.to, text: obj.text, origin: obj.origin };
      }
      function makeChange(doc2, change, ignoreReadOnly) {
        if (doc2.cm) {
          if (!doc2.cm.curOp) {
            return operation(doc2.cm, makeChange)(doc2, change, ignoreReadOnly);
          }
          if (doc2.cm.state.suppressEdits) {
            return;
          }
        }
        if (hasHandler(doc2, "beforeChange") || doc2.cm && hasHandler(doc2.cm, "beforeChange")) {
          change = filterChange(doc2, change, true);
          if (!change) {
            return;
          }
        }
        var split = sawReadOnlySpans && !ignoreReadOnly && removeReadOnlyRanges(doc2, change.from, change.to);
        if (split) {
          for (var i2 = split.length - 1; i2 >= 0; --i2) {
            makeChangeInner(doc2, { from: split[i2].from, to: split[i2].to, text: i2 ? [""] : change.text, origin: change.origin });
          }
        } else {
          makeChangeInner(doc2, change);
        }
      }
      function makeChangeInner(doc2, change) {
        if (change.text.length == 1 && change.text[0] == "" && cmp(change.from, change.to) == 0) {
          return;
        }
        var selAfter = computeSelAfterChange(doc2, change);
        addChangeToHistory(doc2, change, selAfter, doc2.cm ? doc2.cm.curOp.id : NaN);
        makeChangeSingleDoc(doc2, change, selAfter, stretchSpansOverChange(doc2, change));
        var rebased = [];
        linkedDocs(doc2, function(doc3, sharedHist) {
          if (!sharedHist && indexOf(rebased, doc3.history) == -1) {
            rebaseHist(doc3.history, change);
            rebased.push(doc3.history);
          }
          makeChangeSingleDoc(doc3, change, null, stretchSpansOverChange(doc3, change));
        });
      }
      function makeChangeFromHistory(doc2, type, allowSelectionOnly) {
        var suppress = doc2.cm && doc2.cm.state.suppressEdits;
        if (suppress && !allowSelectionOnly) {
          return;
        }
        var hist = doc2.history, event, selAfter = doc2.sel;
        var source = type == "undo" ? hist.done : hist.undone, dest = type == "undo" ? hist.undone : hist.done;
        var i2 = 0;
        for (; i2 < source.length; i2++) {
          event = source[i2];
          if (allowSelectionOnly ? event.ranges && !event.equals(doc2.sel) : !event.ranges) {
            break;
          }
        }
        if (i2 == source.length) {
          return;
        }
        hist.lastOrigin = hist.lastSelOrigin = null;
        for (; ; ) {
          event = source.pop();
          if (event.ranges) {
            pushSelectionToHistory(event, dest);
            if (allowSelectionOnly && !event.equals(doc2.sel)) {
              setSelection(doc2, event, { clearRedo: false });
              return;
            }
            selAfter = event;
          } else if (suppress) {
            source.push(event);
            return;
          } else {
            break;
          }
        }
        var antiChanges = [];
        pushSelectionToHistory(selAfter, dest);
        dest.push({ changes: antiChanges, generation: hist.generation });
        hist.generation = event.generation || ++hist.maxGeneration;
        var filter = hasHandler(doc2, "beforeChange") || doc2.cm && hasHandler(doc2.cm, "beforeChange");
        var loop = function(i3) {
          var change = event.changes[i3];
          change.origin = type;
          if (filter && !filterChange(doc2, change, false)) {
            source.length = 0;
            return {};
          }
          antiChanges.push(historyChangeFromChange(doc2, change));
          var after = i3 ? computeSelAfterChange(doc2, change) : lst(source);
          makeChangeSingleDoc(doc2, change, after, mergeOldSpans(doc2, change));
          if (!i3 && doc2.cm) {
            doc2.cm.scrollIntoView({ from: change.from, to: changeEnd(change) });
          }
          var rebased = [];
          linkedDocs(doc2, function(doc3, sharedHist) {
            if (!sharedHist && indexOf(rebased, doc3.history) == -1) {
              rebaseHist(doc3.history, change);
              rebased.push(doc3.history);
            }
            makeChangeSingleDoc(doc3, change, null, mergeOldSpans(doc3, change));
          });
        };
        for (var i$12 = event.changes.length - 1; i$12 >= 0; --i$12) {
          var returned = loop(i$12);
          if (returned) return returned.v;
        }
      }
      function shiftDoc(doc2, distance) {
        if (distance == 0) {
          return;
        }
        doc2.first += distance;
        doc2.sel = new Selection(map(doc2.sel.ranges, function(range2) {
          return new Range(
            Pos(range2.anchor.line + distance, range2.anchor.ch),
            Pos(range2.head.line + distance, range2.head.ch)
          );
        }), doc2.sel.primIndex);
        if (doc2.cm) {
          regChange(doc2.cm, doc2.first, doc2.first - distance, distance);
          for (var d = doc2.cm.display, l = d.viewFrom; l < d.viewTo; l++) {
            regLineChange(doc2.cm, l, "gutter");
          }
        }
      }
      function makeChangeSingleDoc(doc2, change, selAfter, spans) {
        if (doc2.cm && !doc2.cm.curOp) {
          return operation(doc2.cm, makeChangeSingleDoc)(doc2, change, selAfter, spans);
        }
        if (change.to.line < doc2.first) {
          shiftDoc(doc2, change.text.length - 1 - (change.to.line - change.from.line));
          return;
        }
        if (change.from.line > doc2.lastLine()) {
          return;
        }
        if (change.from.line < doc2.first) {
          var shift = change.text.length - 1 - (doc2.first - change.from.line);
          shiftDoc(doc2, shift);
          change = {
            from: Pos(doc2.first, 0),
            to: Pos(change.to.line + shift, change.to.ch),
            text: [lst(change.text)],
            origin: change.origin
          };
        }
        var last = doc2.lastLine();
        if (change.to.line > last) {
          change = {
            from: change.from,
            to: Pos(last, getLine(doc2, last).text.length),
            text: [change.text[0]],
            origin: change.origin
          };
        }
        change.removed = getBetween(doc2, change.from, change.to);
        if (!selAfter) {
          selAfter = computeSelAfterChange(doc2, change);
        }
        if (doc2.cm) {
          makeChangeSingleDocInEditor(doc2.cm, change, spans);
        } else {
          updateDoc(doc2, change, spans);
        }
        setSelectionNoUndo(doc2, selAfter, sel_dontScroll);
        if (doc2.cantEdit && skipAtomic(doc2, Pos(doc2.firstLine(), 0))) {
          doc2.cantEdit = false;
        }
      }
      function makeChangeSingleDocInEditor(cm, change, spans) {
        var doc2 = cm.doc, display = cm.display, from = change.from, to = change.to;
        var recomputeMaxLength = false, checkWidthStart = from.line;
        if (!cm.options.lineWrapping) {
          checkWidthStart = lineNo(visualLine(getLine(doc2, from.line)));
          doc2.iter(checkWidthStart, to.line + 1, function(line) {
            if (line == display.maxLine) {
              recomputeMaxLength = true;
              return true;
            }
          });
        }
        if (doc2.sel.contains(change.from, change.to) > -1) {
          signalCursorActivity(cm);
        }
        updateDoc(doc2, change, spans, estimateHeight(cm));
        if (!cm.options.lineWrapping) {
          doc2.iter(checkWidthStart, from.line + change.text.length, function(line) {
            var len = lineLength(line);
            if (len > display.maxLineLength) {
              display.maxLine = line;
              display.maxLineLength = len;
              display.maxLineChanged = true;
              recomputeMaxLength = false;
            }
          });
          if (recomputeMaxLength) {
            cm.curOp.updateMaxLine = true;
          }
        }
        retreatFrontier(doc2, from.line);
        startWorker(cm, 400);
        var lendiff = change.text.length - (to.line - from.line) - 1;
        if (change.full) {
          regChange(cm);
        } else if (from.line == to.line && change.text.length == 1 && !isWholeLineUpdate(cm.doc, change)) {
          regLineChange(cm, from.line, "text");
        } else {
          regChange(cm, from.line, to.line + 1, lendiff);
        }
        var changesHandler = hasHandler(cm, "changes"), changeHandler = hasHandler(cm, "change");
        if (changeHandler || changesHandler) {
          var obj = {
            from,
            to,
            text: change.text,
            removed: change.removed,
            origin: change.origin
          };
          if (changeHandler) {
            signalLater(cm, "change", cm, obj);
          }
          if (changesHandler) {
            (cm.curOp.changeObjs || (cm.curOp.changeObjs = [])).push(obj);
          }
        }
        cm.display.selForContextMenu = null;
      }
      function replaceRange(doc2, code, from, to, origin) {
        var assign;
        if (!to) {
          to = from;
        }
        if (cmp(to, from) < 0) {
          assign = [to, from], from = assign[0], to = assign[1];
        }
        if (typeof code == "string") {
          code = doc2.splitLines(code);
        }
        makeChange(doc2, { from, to, text: code, origin });
      }
      function rebaseHistSelSingle(pos, from, to, diff) {
        if (to < pos.line) {
          pos.line += diff;
        } else if (from < pos.line) {
          pos.line = from;
          pos.ch = 0;
        }
      }
      function rebaseHistArray(array, from, to, diff) {
        for (var i2 = 0; i2 < array.length; ++i2) {
          var sub = array[i2], ok = true;
          if (sub.ranges) {
            if (!sub.copied) {
              sub = array[i2] = sub.deepCopy();
              sub.copied = true;
            }
            for (var j = 0; j < sub.ranges.length; j++) {
              rebaseHistSelSingle(sub.ranges[j].anchor, from, to, diff);
              rebaseHistSelSingle(sub.ranges[j].head, from, to, diff);
            }
            continue;
          }
          for (var j$1 = 0; j$1 < sub.changes.length; ++j$1) {
            var cur = sub.changes[j$1];
            if (to < cur.from.line) {
              cur.from = Pos(cur.from.line + diff, cur.from.ch);
              cur.to = Pos(cur.to.line + diff, cur.to.ch);
            } else if (from <= cur.to.line) {
              ok = false;
              break;
            }
          }
          if (!ok) {
            array.splice(0, i2 + 1);
            i2 = 0;
          }
        }
      }
      function rebaseHist(hist, change) {
        var from = change.from.line, to = change.to.line, diff = change.text.length - (to - from) - 1;
        rebaseHistArray(hist.done, from, to, diff);
        rebaseHistArray(hist.undone, from, to, diff);
      }
      function changeLine(doc2, handle, changeType, op) {
        var no = handle, line = handle;
        if (typeof handle == "number") {
          line = getLine(doc2, clipLine(doc2, handle));
        } else {
          no = lineNo(handle);
        }
        if (no == null) {
          return null;
        }
        if (op(line, no) && doc2.cm) {
          regLineChange(doc2.cm, no, changeType);
        }
        return line;
      }
      function LeafChunk(lines) {
        this.lines = lines;
        this.parent = null;
        var height = 0;
        for (var i2 = 0; i2 < lines.length; ++i2) {
          lines[i2].parent = this;
          height += lines[i2].height;
        }
        this.height = height;
      }
      LeafChunk.prototype = {
        chunkSize: function() {
          return this.lines.length;
        },
        // Remove the n lines at offset 'at'.
        removeInner: function(at, n) {
          for (var i2 = at, e = at + n; i2 < e; ++i2) {
            var line = this.lines[i2];
            this.height -= line.height;
            cleanUpLine(line);
            signalLater(line, "delete");
          }
          this.lines.splice(at, n);
        },
        // Helper used to collapse a small branch into a single leaf.
        collapse: function(lines) {
          lines.push.apply(lines, this.lines);
        },
        // Insert the given array of lines at offset 'at', count them as
        // having the given height.
        insertInner: function(at, lines, height) {
          this.height += height;
          this.lines = this.lines.slice(0, at).concat(lines).concat(this.lines.slice(at));
          for (var i2 = 0; i2 < lines.length; ++i2) {
            lines[i2].parent = this;
          }
        },
        // Used to iterate over a part of the tree.
        iterN: function(at, n, op) {
          for (var e = at + n; at < e; ++at) {
            if (op(this.lines[at])) {
              return true;
            }
          }
        }
      };
      function BranchChunk(children) {
        this.children = children;
        var size = 0, height = 0;
        for (var i2 = 0; i2 < children.length; ++i2) {
          var ch = children[i2];
          size += ch.chunkSize();
          height += ch.height;
          ch.parent = this;
        }
        this.size = size;
        this.height = height;
        this.parent = null;
      }
      BranchChunk.prototype = {
        chunkSize: function() {
          return this.size;
        },
        removeInner: function(at, n) {
          this.size -= n;
          for (var i2 = 0; i2 < this.children.length; ++i2) {
            var child = this.children[i2], sz = child.chunkSize();
            if (at < sz) {
              var rm = Math.min(n, sz - at), oldHeight = child.height;
              child.removeInner(at, rm);
              this.height -= oldHeight - child.height;
              if (sz == rm) {
                this.children.splice(i2--, 1);
                child.parent = null;
              }
              if ((n -= rm) == 0) {
                break;
              }
              at = 0;
            } else {
              at -= sz;
            }
          }
          if (this.size - n < 25 && (this.children.length > 1 || !(this.children[0] instanceof LeafChunk))) {
            var lines = [];
            this.collapse(lines);
            this.children = [new LeafChunk(lines)];
            this.children[0].parent = this;
          }
        },
        collapse: function(lines) {
          for (var i2 = 0; i2 < this.children.length; ++i2) {
            this.children[i2].collapse(lines);
          }
        },
        insertInner: function(at, lines, height) {
          this.size += lines.length;
          this.height += height;
          for (var i2 = 0; i2 < this.children.length; ++i2) {
            var child = this.children[i2], sz = child.chunkSize();
            if (at <= sz) {
              child.insertInner(at, lines, height);
              if (child.lines && child.lines.length > 50) {
                var remaining = child.lines.length % 25 + 25;
                for (var pos = remaining; pos < child.lines.length; ) {
                  var leaf = new LeafChunk(child.lines.slice(pos, pos += 25));
                  child.height -= leaf.height;
                  this.children.splice(++i2, 0, leaf);
                  leaf.parent = this;
                }
                child.lines = child.lines.slice(0, remaining);
                this.maybeSpill();
              }
              break;
            }
            at -= sz;
          }
        },
        // When a node has grown, check whether it should be split.
        maybeSpill: function() {
          if (this.children.length <= 10) {
            return;
          }
          var me = this;
          do {
            var spilled = me.children.splice(me.children.length - 5, 5);
            var sibling = new BranchChunk(spilled);
            if (!me.parent) {
              var copy = new BranchChunk(me.children);
              copy.parent = me;
              me.children = [copy, sibling];
              me = copy;
            } else {
              me.size -= sibling.size;
              me.height -= sibling.height;
              var myIndex = indexOf(me.parent.children, me);
              me.parent.children.splice(myIndex + 1, 0, sibling);
            }
            sibling.parent = me.parent;
          } while (me.children.length > 10);
          me.parent.maybeSpill();
        },
        iterN: function(at, n, op) {
          for (var i2 = 0; i2 < this.children.length; ++i2) {
            var child = this.children[i2], sz = child.chunkSize();
            if (at < sz) {
              var used = Math.min(n, sz - at);
              if (child.iterN(at, used, op)) {
                return true;
              }
              if ((n -= used) == 0) {
                break;
              }
              at = 0;
            } else {
              at -= sz;
            }
          }
        }
      };
      var LineWidget = function(doc2, node, options) {
        if (options) {
          for (var opt in options) {
            if (options.hasOwnProperty(opt)) {
              this[opt] = options[opt];
            }
          }
        }
        this.doc = doc2;
        this.node = node;
      };
      LineWidget.prototype.clear = function() {
        var cm = this.doc.cm, ws = this.line.widgets, line = this.line, no = lineNo(line);
        if (no == null || !ws) {
          return;
        }
        for (var i2 = 0; i2 < ws.length; ++i2) {
          if (ws[i2] == this) {
            ws.splice(i2--, 1);
          }
        }
        if (!ws.length) {
          line.widgets = null;
        }
        var height = widgetHeight(this);
        updateLineHeight(line, Math.max(0, line.height - height));
        if (cm) {
          runInOp(cm, function() {
            adjustScrollWhenAboveVisible(cm, line, -height);
            regLineChange(cm, no, "widget");
          });
          signalLater(cm, "lineWidgetCleared", cm, this, no);
        }
      };
      LineWidget.prototype.changed = function() {
        var this$1$1 = this;
        var oldH = this.height, cm = this.doc.cm, line = this.line;
        this.height = null;
        var diff = widgetHeight(this) - oldH;
        if (!diff) {
          return;
        }
        if (!lineIsHidden(this.doc, line)) {
          updateLineHeight(line, line.height + diff);
        }
        if (cm) {
          runInOp(cm, function() {
            cm.curOp.forceUpdate = true;
            adjustScrollWhenAboveVisible(cm, line, diff);
            signalLater(cm, "lineWidgetChanged", cm, this$1$1, lineNo(line));
          });
        }
      };
      eventMixin(LineWidget);
      function adjustScrollWhenAboveVisible(cm, line, diff) {
        if (heightAtLine(line) < (cm.curOp && cm.curOp.scrollTop || cm.doc.scrollTop)) {
          addToScrollTop(cm, diff);
        }
      }
      function addLineWidget(doc2, handle, node, options) {
        var widget = new LineWidget(doc2, node, options);
        var cm = doc2.cm;
        if (cm && widget.noHScroll) {
          cm.display.alignWidgets = true;
        }
        changeLine(doc2, handle, "widget", function(line) {
          var widgets = line.widgets || (line.widgets = []);
          if (widget.insertAt == null) {
            widgets.push(widget);
          } else {
            widgets.splice(Math.min(widgets.length, Math.max(0, widget.insertAt)), 0, widget);
          }
          widget.line = line;
          if (cm && !lineIsHidden(doc2, line)) {
            var aboveVisible = heightAtLine(line) < doc2.scrollTop;
            updateLineHeight(line, line.height + widgetHeight(widget));
            if (aboveVisible) {
              addToScrollTop(cm, widget.height);
            }
            cm.curOp.forceUpdate = true;
          }
          return true;
        });
        if (cm) {
          signalLater(cm, "lineWidgetAdded", cm, widget, typeof handle == "number" ? handle : lineNo(handle));
        }
        return widget;
      }
      var nextMarkerId = 0;
      var TextMarker = function(doc2, type) {
        this.lines = [];
        this.type = type;
        this.doc = doc2;
        this.id = ++nextMarkerId;
      };
      TextMarker.prototype.clear = function() {
        if (this.explicitlyCleared) {
          return;
        }
        var cm = this.doc.cm, withOp = cm && !cm.curOp;
        if (withOp) {
          startOperation(cm);
        }
        if (hasHandler(this, "clear")) {
          var found = this.find();
          if (found) {
            signalLater(this, "clear", found.from, found.to);
          }
        }
        var min = null, max = null;
        for (var i2 = 0; i2 < this.lines.length; ++i2) {
          var line = this.lines[i2];
          var span = getMarkedSpanFor(line.markedSpans, this);
          if (cm && !this.collapsed) {
            regLineChange(cm, lineNo(line), "text");
          } else if (cm) {
            if (span.to != null) {
              max = lineNo(line);
            }
            if (span.from != null) {
              min = lineNo(line);
            }
          }
          line.markedSpans = removeMarkedSpan(line.markedSpans, span);
          if (span.from == null && this.collapsed && !lineIsHidden(this.doc, line) && cm) {
            updateLineHeight(line, textHeight(cm.display));
          }
        }
        if (cm && this.collapsed && !cm.options.lineWrapping) {
          for (var i$12 = 0; i$12 < this.lines.length; ++i$12) {
            var visual = visualLine(this.lines[i$12]), len = lineLength(visual);
            if (len > cm.display.maxLineLength) {
              cm.display.maxLine = visual;
              cm.display.maxLineLength = len;
              cm.display.maxLineChanged = true;
            }
          }
        }
        if (min != null && cm && this.collapsed) {
          regChange(cm, min, max + 1);
        }
        this.lines.length = 0;
        this.explicitlyCleared = true;
        if (this.atomic && this.doc.cantEdit) {
          this.doc.cantEdit = false;
          if (cm) {
            reCheckSelection(cm.doc);
          }
        }
        if (cm) {
          signalLater(cm, "markerCleared", cm, this, min, max);
        }
        if (withOp) {
          endOperation(cm);
        }
        if (this.parent) {
          this.parent.clear();
        }
      };
      TextMarker.prototype.find = function(side, lineObj) {
        if (side == null && this.type == "bookmark") {
          side = 1;
        }
        var from, to;
        for (var i2 = 0; i2 < this.lines.length; ++i2) {
          var line = this.lines[i2];
          var span = getMarkedSpanFor(line.markedSpans, this);
          if (span.from != null) {
            from = Pos(lineObj ? line : lineNo(line), span.from);
            if (side == -1) {
              return from;
            }
          }
          if (span.to != null) {
            to = Pos(lineObj ? line : lineNo(line), span.to);
            if (side == 1) {
              return to;
            }
          }
        }
        return from && { from, to };
      };
      TextMarker.prototype.changed = function() {
        var this$1$1 = this;
        var pos = this.find(-1, true), widget = this, cm = this.doc.cm;
        if (!pos || !cm) {
          return;
        }
        runInOp(cm, function() {
          var line = pos.line, lineN = lineNo(pos.line);
          var view = findViewForLine(cm, lineN);
          if (view) {
            clearLineMeasurementCacheFor(view);
            cm.curOp.selectionChanged = cm.curOp.forceUpdate = true;
          }
          cm.curOp.updateMaxLine = true;
          if (!lineIsHidden(widget.doc, line) && widget.height != null) {
            var oldHeight = widget.height;
            widget.height = null;
            var dHeight = widgetHeight(widget) - oldHeight;
            if (dHeight) {
              updateLineHeight(line, line.height + dHeight);
            }
          }
          signalLater(cm, "markerChanged", cm, this$1$1);
        });
      };
      TextMarker.prototype.attachLine = function(line) {
        if (!this.lines.length && this.doc.cm) {
          var op = this.doc.cm.curOp;
          if (!op.maybeHiddenMarkers || indexOf(op.maybeHiddenMarkers, this) == -1) {
            (op.maybeUnhiddenMarkers || (op.maybeUnhiddenMarkers = [])).push(this);
          }
        }
        this.lines.push(line);
      };
      TextMarker.prototype.detachLine = function(line) {
        this.lines.splice(indexOf(this.lines, line), 1);
        if (!this.lines.length && this.doc.cm) {
          var op = this.doc.cm.curOp;
          (op.maybeHiddenMarkers || (op.maybeHiddenMarkers = [])).push(this);
        }
      };
      eventMixin(TextMarker);
      function markText(doc2, from, to, options, type) {
        if (options && options.shared) {
          return markTextShared(doc2, from, to, options, type);
        }
        if (doc2.cm && !doc2.cm.curOp) {
          return operation(doc2.cm, markText)(doc2, from, to, options, type);
        }
        var marker = new TextMarker(doc2, type), diff = cmp(from, to);
        if (options) {
          copyObj(options, marker, false);
        }
        if (diff > 0 || diff == 0 && marker.clearWhenEmpty !== false) {
          return marker;
        }
        if (marker.replacedWith) {
          marker.collapsed = true;
          marker.widgetNode = eltP("span", [marker.replacedWith], "CodeMirror-widget");
          if (!options.handleMouseEvents) {
            marker.widgetNode.setAttribute("cm-ignore-events", "true");
          }
          if (options.insertLeft) {
            marker.widgetNode.insertLeft = true;
          }
        }
        if (marker.collapsed) {
          if (conflictingCollapsedRange(doc2, from.line, from, to, marker) || from.line != to.line && conflictingCollapsedRange(doc2, to.line, from, to, marker)) {
            throw new Error("Inserting collapsed marker partially overlapping an existing one");
          }
          seeCollapsedSpans();
        }
        if (marker.addToHistory) {
          addChangeToHistory(doc2, { from, to, origin: "markText" }, doc2.sel, NaN);
        }
        var curLine = from.line, cm = doc2.cm, updateMaxLine;
        doc2.iter(curLine, to.line + 1, function(line) {
          if (cm && marker.collapsed && !cm.options.lineWrapping && visualLine(line) == cm.display.maxLine) {
            updateMaxLine = true;
          }
          if (marker.collapsed && curLine != from.line) {
            updateLineHeight(line, 0);
          }
          addMarkedSpan(line, new MarkedSpan(
            marker,
            curLine == from.line ? from.ch : null,
            curLine == to.line ? to.ch : null
          ), doc2.cm && doc2.cm.curOp);
          ++curLine;
        });
        if (marker.collapsed) {
          doc2.iter(from.line, to.line + 1, function(line) {
            if (lineIsHidden(doc2, line)) {
              updateLineHeight(line, 0);
            }
          });
        }
        if (marker.clearOnEnter) {
          on(marker, "beforeCursorEnter", function() {
            return marker.clear();
          });
        }
        if (marker.readOnly) {
          seeReadOnlySpans();
          if (doc2.history.done.length || doc2.history.undone.length) {
            doc2.clearHistory();
          }
        }
        if (marker.collapsed) {
          marker.id = ++nextMarkerId;
          marker.atomic = true;
        }
        if (cm) {
          if (updateMaxLine) {
            cm.curOp.updateMaxLine = true;
          }
          if (marker.collapsed) {
            regChange(cm, from.line, to.line + 1);
          } else if (marker.className || marker.startStyle || marker.endStyle || marker.css || marker.attributes || marker.title) {
            for (var i2 = from.line; i2 <= to.line; i2++) {
              regLineChange(cm, i2, "text");
            }
          }
          if (marker.atomic) {
            reCheckSelection(cm.doc);
          }
          signalLater(cm, "markerAdded", cm, marker);
        }
        return marker;
      }
      var SharedTextMarker = function(markers, primary) {
        this.markers = markers;
        this.primary = primary;
        for (var i2 = 0; i2 < markers.length; ++i2) {
          markers[i2].parent = this;
        }
      };
      SharedTextMarker.prototype.clear = function() {
        if (this.explicitlyCleared) {
          return;
        }
        this.explicitlyCleared = true;
        for (var i2 = 0; i2 < this.markers.length; ++i2) {
          this.markers[i2].clear();
        }
        signalLater(this, "clear");
      };
      SharedTextMarker.prototype.find = function(side, lineObj) {
        return this.primary.find(side, lineObj);
      };
      eventMixin(SharedTextMarker);
      function markTextShared(doc2, from, to, options, type) {
        options = copyObj(options);
        options.shared = false;
        var markers = [markText(doc2, from, to, options, type)], primary = markers[0];
        var widget = options.widgetNode;
        linkedDocs(doc2, function(doc3) {
          if (widget) {
            options.widgetNode = widget.cloneNode(true);
          }
          markers.push(markText(doc3, clipPos(doc3, from), clipPos(doc3, to), options, type));
          for (var i2 = 0; i2 < doc3.linked.length; ++i2) {
            if (doc3.linked[i2].isParent) {
              return;
            }
          }
          primary = lst(markers);
        });
        return new SharedTextMarker(markers, primary);
      }
      function findSharedMarkers(doc2) {
        return doc2.findMarks(Pos(doc2.first, 0), doc2.clipPos(Pos(doc2.lastLine())), function(m) {
          return m.parent;
        });
      }
      function copySharedMarkers(doc2, markers) {
        for (var i2 = 0; i2 < markers.length; i2++) {
          var marker = markers[i2], pos = marker.find();
          var mFrom = doc2.clipPos(pos.from), mTo = doc2.clipPos(pos.to);
          if (cmp(mFrom, mTo)) {
            var subMark = markText(doc2, mFrom, mTo, marker.primary, marker.primary.type);
            marker.markers.push(subMark);
            subMark.parent = marker;
          }
        }
      }
      function detachSharedMarkers(markers) {
        var loop = function(i3) {
          var marker = markers[i3], linked = [marker.primary.doc];
          linkedDocs(marker.primary.doc, function(d) {
            return linked.push(d);
          });
          for (var j = 0; j < marker.markers.length; j++) {
            var subMarker = marker.markers[j];
            if (indexOf(linked, subMarker.doc) == -1) {
              subMarker.parent = null;
              marker.markers.splice(j--, 1);
            }
          }
        };
        for (var i2 = 0; i2 < markers.length; i2++) loop(i2);
      }
      var nextDocId = 0;
      var Doc = function(text, mode, firstLine, lineSep, direction) {
        if (!(this instanceof Doc)) {
          return new Doc(text, mode, firstLine, lineSep, direction);
        }
        if (firstLine == null) {
          firstLine = 0;
        }
        BranchChunk.call(this, [new LeafChunk([new Line("", null)])]);
        this.first = firstLine;
        this.scrollTop = this.scrollLeft = 0;
        this.cantEdit = false;
        this.cleanGeneration = 1;
        this.modeFrontier = this.highlightFrontier = firstLine;
        var start = Pos(firstLine, 0);
        this.sel = simpleSelection(start);
        this.history = new History(null);
        this.id = ++nextDocId;
        this.modeOption = mode;
        this.lineSep = lineSep;
        this.direction = direction == "rtl" ? "rtl" : "ltr";
        this.extend = false;
        if (typeof text == "string") {
          text = this.splitLines(text);
        }
        updateDoc(this, { from: start, to: start, text });
        setSelection(this, simpleSelection(start), sel_dontScroll);
      };
      Doc.prototype = createObj(BranchChunk.prototype, {
        constructor: Doc,
        // Iterate over the document. Supports two forms -- with only one
        // argument, it calls that for each line in the document. With
        // three, it iterates over the range given by the first two (with
        // the second being non-inclusive).
        iter: function(from, to, op) {
          if (op) {
            this.iterN(from - this.first, to - from, op);
          } else {
            this.iterN(this.first, this.first + this.size, from);
          }
        },
        // Non-public interface for adding and removing lines.
        insert: function(at, lines) {
          var height = 0;
          for (var i2 = 0; i2 < lines.length; ++i2) {
            height += lines[i2].height;
          }
          this.insertInner(at - this.first, lines, height);
        },
        remove: function(at, n) {
          this.removeInner(at - this.first, n);
        },
        // From here, the methods are part of the public interface. Most
        // are also available from CodeMirror (editor) instances.
        getValue: function(lineSep) {
          var lines = getLines(this, this.first, this.first + this.size);
          if (lineSep === false) {
            return lines;
          }
          return lines.join(lineSep || this.lineSeparator());
        },
        setValue: docMethodOp(function(code) {
          var top = Pos(this.first, 0), last = this.first + this.size - 1;
          makeChange(this, {
            from: top,
            to: Pos(last, getLine(this, last).text.length),
            text: this.splitLines(code),
            origin: "setValue",
            full: true
          }, true);
          if (this.cm) {
            scrollToCoords(this.cm, 0, 0);
          }
          setSelection(this, simpleSelection(top), sel_dontScroll);
        }),
        replaceRange: function(code, from, to, origin) {
          from = clipPos(this, from);
          to = to ? clipPos(this, to) : from;
          replaceRange(this, code, from, to, origin);
        },
        getRange: function(from, to, lineSep) {
          var lines = getBetween(this, clipPos(this, from), clipPos(this, to));
          if (lineSep === false) {
            return lines;
          }
          if (lineSep === "") {
            return lines.join("");
          }
          return lines.join(lineSep || this.lineSeparator());
        },
        getLine: function(line) {
          var l = this.getLineHandle(line);
          return l && l.text;
        },
        getLineHandle: function(line) {
          if (isLine(this, line)) {
            return getLine(this, line);
          }
        },
        getLineNumber: function(line) {
          return lineNo(line);
        },
        getLineHandleVisualStart: function(line) {
          if (typeof line == "number") {
            line = getLine(this, line);
          }
          return visualLine(line);
        },
        lineCount: function() {
          return this.size;
        },
        firstLine: function() {
          return this.first;
        },
        lastLine: function() {
          return this.first + this.size - 1;
        },
        clipPos: function(pos) {
          return clipPos(this, pos);
        },
        getCursor: function(start) {
          var range2 = this.sel.primary(), pos;
          if (start == null || start == "head") {
            pos = range2.head;
          } else if (start == "anchor") {
            pos = range2.anchor;
          } else if (start == "end" || start == "to" || start === false) {
            pos = range2.to();
          } else {
            pos = range2.from();
          }
          return pos;
        },
        listSelections: function() {
          return this.sel.ranges;
        },
        somethingSelected: function() {
          return this.sel.somethingSelected();
        },
        setCursor: docMethodOp(function(line, ch, options) {
          setSimpleSelection(this, clipPos(this, typeof line == "number" ? Pos(line, ch || 0) : line), null, options);
        }),
        setSelection: docMethodOp(function(anchor, head, options) {
          setSimpleSelection(this, clipPos(this, anchor), clipPos(this, head || anchor), options);
        }),
        extendSelection: docMethodOp(function(head, other, options) {
          extendSelection(this, clipPos(this, head), other && clipPos(this, other), options);
        }),
        extendSelections: docMethodOp(function(heads, options) {
          extendSelections(this, clipPosArray(this, heads), options);
        }),
        extendSelectionsBy: docMethodOp(function(f, options) {
          var heads = map(this.sel.ranges, f);
          extendSelections(this, clipPosArray(this, heads), options);
        }),
        setSelections: docMethodOp(function(ranges, primary, options) {
          if (!ranges.length) {
            return;
          }
          var out = [];
          for (var i2 = 0; i2 < ranges.length; i2++) {
            out[i2] = new Range(
              clipPos(this, ranges[i2].anchor),
              clipPos(this, ranges[i2].head || ranges[i2].anchor)
            );
          }
          if (primary == null) {
            primary = Math.min(ranges.length - 1, this.sel.primIndex);
          }
          setSelection(this, normalizeSelection(this.cm, out, primary), options);
        }),
        addSelection: docMethodOp(function(anchor, head, options) {
          var ranges = this.sel.ranges.slice(0);
          ranges.push(new Range(clipPos(this, anchor), clipPos(this, head || anchor)));
          setSelection(this, normalizeSelection(this.cm, ranges, ranges.length - 1), options);
        }),
        getSelection: function(lineSep) {
          var ranges = this.sel.ranges, lines;
          for (var i2 = 0; i2 < ranges.length; i2++) {
            var sel = getBetween(this, ranges[i2].from(), ranges[i2].to());
            lines = lines ? lines.concat(sel) : sel;
          }
          if (lineSep === false) {
            return lines;
          } else {
            return lines.join(lineSep || this.lineSeparator());
          }
        },
        getSelections: function(lineSep) {
          var parts = [], ranges = this.sel.ranges;
          for (var i2 = 0; i2 < ranges.length; i2++) {
            var sel = getBetween(this, ranges[i2].from(), ranges[i2].to());
            if (lineSep !== false) {
              sel = sel.join(lineSep || this.lineSeparator());
            }
            parts[i2] = sel;
          }
          return parts;
        },
        replaceSelection: function(code, collapse, origin) {
          var dup = [];
          for (var i2 = 0; i2 < this.sel.ranges.length; i2++) {
            dup[i2] = code;
          }
          this.replaceSelections(dup, collapse, origin || "+input");
        },
        replaceSelections: docMethodOp(function(code, collapse, origin) {
          var changes = [], sel = this.sel;
          for (var i2 = 0; i2 < sel.ranges.length; i2++) {
            var range2 = sel.ranges[i2];
            changes[i2] = { from: range2.from(), to: range2.to(), text: this.splitLines(code[i2]), origin };
          }
          var newSel = collapse && collapse != "end" && computeReplacedSel(this, changes, collapse);
          for (var i$12 = changes.length - 1; i$12 >= 0; i$12--) {
            makeChange(this, changes[i$12]);
          }
          if (newSel) {
            setSelectionReplaceHistory(this, newSel);
          } else if (this.cm) {
            ensureCursorVisible(this.cm);
          }
        }),
        undo: docMethodOp(function() {
          makeChangeFromHistory(this, "undo");
        }),
        redo: docMethodOp(function() {
          makeChangeFromHistory(this, "redo");
        }),
        undoSelection: docMethodOp(function() {
          makeChangeFromHistory(this, "undo", true);
        }),
        redoSelection: docMethodOp(function() {
          makeChangeFromHistory(this, "redo", true);
        }),
        setExtending: function(val) {
          this.extend = val;
        },
        getExtending: function() {
          return this.extend;
        },
        historySize: function() {
          var hist = this.history, done = 0, undone = 0;
          for (var i2 = 0; i2 < hist.done.length; i2++) {
            if (!hist.done[i2].ranges) {
              ++done;
            }
          }
          for (var i$12 = 0; i$12 < hist.undone.length; i$12++) {
            if (!hist.undone[i$12].ranges) {
              ++undone;
            }
          }
          return { undo: done, redo: undone };
        },
        clearHistory: function() {
          var this$1$1 = this;
          this.history = new History(this.history);
          linkedDocs(this, function(doc2) {
            return doc2.history = this$1$1.history;
          }, true);
        },
        markClean: function() {
          this.cleanGeneration = this.changeGeneration(true);
        },
        changeGeneration: function(forceSplit) {
          if (forceSplit) {
            this.history.lastOp = this.history.lastSelOp = this.history.lastOrigin = null;
          }
          return this.history.generation;
        },
        isClean: function(gen) {
          return this.history.generation == (gen || this.cleanGeneration);
        },
        getHistory: function() {
          return {
            done: copyHistoryArray(this.history.done),
            undone: copyHistoryArray(this.history.undone)
          };
        },
        setHistory: function(histData) {
          var hist = this.history = new History(this.history);
          hist.done = copyHistoryArray(histData.done.slice(0), null, true);
          hist.undone = copyHistoryArray(histData.undone.slice(0), null, true);
        },
        setGutterMarker: docMethodOp(function(line, gutterID, value) {
          return changeLine(this, line, "gutter", function(line2) {
            var markers = line2.gutterMarkers || (line2.gutterMarkers = {});
            markers[gutterID] = value;
            if (!value && isEmpty(markers)) {
              line2.gutterMarkers = null;
            }
            return true;
          });
        }),
        clearGutter: docMethodOp(function(gutterID) {
          var this$1$1 = this;
          this.iter(function(line) {
            if (line.gutterMarkers && line.gutterMarkers[gutterID]) {
              changeLine(this$1$1, line, "gutter", function() {
                line.gutterMarkers[gutterID] = null;
                if (isEmpty(line.gutterMarkers)) {
                  line.gutterMarkers = null;
                }
                return true;
              });
            }
          });
        }),
        lineInfo: function(line) {
          var n;
          if (typeof line == "number") {
            if (!isLine(this, line)) {
              return null;
            }
            n = line;
            line = getLine(this, line);
            if (!line) {
              return null;
            }
          } else {
            n = lineNo(line);
            if (n == null) {
              return null;
            }
          }
          return {
            line: n,
            handle: line,
            text: line.text,
            gutterMarkers: line.gutterMarkers,
            textClass: line.textClass,
            bgClass: line.bgClass,
            wrapClass: line.wrapClass,
            widgets: line.widgets
          };
        },
        addLineClass: docMethodOp(function(handle, where, cls) {
          return changeLine(this, handle, where == "gutter" ? "gutter" : "class", function(line) {
            var prop2 = where == "text" ? "textClass" : where == "background" ? "bgClass" : where == "gutter" ? "gutterClass" : "wrapClass";
            if (!line[prop2]) {
              line[prop2] = cls;
            } else if (classTest(cls).test(line[prop2])) {
              return false;
            } else {
              line[prop2] += " " + cls;
            }
            return true;
          });
        }),
        removeLineClass: docMethodOp(function(handle, where, cls) {
          return changeLine(this, handle, where == "gutter" ? "gutter" : "class", function(line) {
            var prop2 = where == "text" ? "textClass" : where == "background" ? "bgClass" : where == "gutter" ? "gutterClass" : "wrapClass";
            var cur = line[prop2];
            if (!cur) {
              return false;
            } else if (cls == null) {
              line[prop2] = null;
            } else {
              var found = cur.match(classTest(cls));
              if (!found) {
                return false;
              }
              var end = found.index + found[0].length;
              line[prop2] = cur.slice(0, found.index) + (!found.index || end == cur.length ? "" : " ") + cur.slice(end) || null;
            }
            return true;
          });
        }),
        addLineWidget: docMethodOp(function(handle, node, options) {
          return addLineWidget(this, handle, node, options);
        }),
        removeLineWidget: function(widget) {
          widget.clear();
        },
        markText: function(from, to, options) {
          return markText(this, clipPos(this, from), clipPos(this, to), options, options && options.type || "range");
        },
        setBookmark: function(pos, options) {
          var realOpts = {
            replacedWith: options && (options.nodeType == null ? options.widget : options),
            insertLeft: options && options.insertLeft,
            clearWhenEmpty: false,
            shared: options && options.shared,
            handleMouseEvents: options && options.handleMouseEvents
          };
          pos = clipPos(this, pos);
          return markText(this, pos, pos, realOpts, "bookmark");
        },
        findMarksAt: function(pos) {
          pos = clipPos(this, pos);
          var markers = [], spans = getLine(this, pos.line).markedSpans;
          if (spans) {
            for (var i2 = 0; i2 < spans.length; ++i2) {
              var span = spans[i2];
              if ((span.from == null || span.from <= pos.ch) && (span.to == null || span.to >= pos.ch)) {
                markers.push(span.marker.parent || span.marker);
              }
            }
          }
          return markers;
        },
        findMarks: function(from, to, filter) {
          from = clipPos(this, from);
          to = clipPos(this, to);
          var found = [], lineNo2 = from.line;
          this.iter(from.line, to.line + 1, function(line) {
            var spans = line.markedSpans;
            if (spans) {
              for (var i2 = 0; i2 < spans.length; i2++) {
                var span = spans[i2];
                if (!(span.to != null && lineNo2 == from.line && from.ch >= span.to || span.from == null && lineNo2 != from.line || span.from != null && lineNo2 == to.line && span.from >= to.ch) && (!filter || filter(span.marker))) {
                  found.push(span.marker.parent || span.marker);
                }
              }
            }
            ++lineNo2;
          });
          return found;
        },
        getAllMarks: function() {
          var markers = [];
          this.iter(function(line) {
            var sps = line.markedSpans;
            if (sps) {
              for (var i2 = 0; i2 < sps.length; ++i2) {
                if (sps[i2].from != null) {
                  markers.push(sps[i2].marker);
                }
              }
            }
          });
          return markers;
        },
        posFromIndex: function(off2) {
          var ch, lineNo2 = this.first, sepSize = this.lineSeparator().length;
          this.iter(function(line) {
            var sz = line.text.length + sepSize;
            if (sz > off2) {
              ch = off2;
              return true;
            }
            off2 -= sz;
            ++lineNo2;
          });
          return clipPos(this, Pos(lineNo2, ch));
        },
        indexFromPos: function(coords) {
          coords = clipPos(this, coords);
          var index = coords.ch;
          if (coords.line < this.first || coords.ch < 0) {
            return 0;
          }
          var sepSize = this.lineSeparator().length;
          this.iter(this.first, coords.line, function(line) {
            index += line.text.length + sepSize;
          });
          return index;
        },
        copy: function(copyHistory) {
          var doc2 = new Doc(
            getLines(this, this.first, this.first + this.size),
            this.modeOption,
            this.first,
            this.lineSep,
            this.direction
          );
          doc2.scrollTop = this.scrollTop;
          doc2.scrollLeft = this.scrollLeft;
          doc2.sel = this.sel;
          doc2.extend = false;
          if (copyHistory) {
            doc2.history.undoDepth = this.history.undoDepth;
            doc2.setHistory(this.getHistory());
          }
          return doc2;
        },
        linkedDoc: function(options) {
          if (!options) {
            options = {};
          }
          var from = this.first, to = this.first + this.size;
          if (options.from != null && options.from > from) {
            from = options.from;
          }
          if (options.to != null && options.to < to) {
            to = options.to;
          }
          var copy = new Doc(getLines(this, from, to), options.mode || this.modeOption, from, this.lineSep, this.direction);
          if (options.sharedHist) {
            copy.history = this.history;
          }
          (this.linked || (this.linked = [])).push({ doc: copy, sharedHist: options.sharedHist });
          copy.linked = [{ doc: this, isParent: true, sharedHist: options.sharedHist }];
          copySharedMarkers(copy, findSharedMarkers(this));
          return copy;
        },
        unlinkDoc: function(other) {
          if (other instanceof CodeMirror) {
            other = other.doc;
          }
          if (this.linked) {
            for (var i2 = 0; i2 < this.linked.length; ++i2) {
              var link = this.linked[i2];
              if (link.doc != other) {
                continue;
              }
              this.linked.splice(i2, 1);
              other.unlinkDoc(this);
              detachSharedMarkers(findSharedMarkers(this));
              break;
            }
          }
          if (other.history == this.history) {
            var splitIds = [other.id];
            linkedDocs(other, function(doc2) {
              return splitIds.push(doc2.id);
            }, true);
            other.history = new History(null);
            other.history.done = copyHistoryArray(this.history.done, splitIds);
            other.history.undone = copyHistoryArray(this.history.undone, splitIds);
          }
        },
        iterLinkedDocs: function(f) {
          linkedDocs(this, f);
        },
        getMode: function() {
          return this.mode;
        },
        getEditor: function() {
          return this.cm;
        },
        splitLines: function(str) {
          if (this.lineSep) {
            return str.split(this.lineSep);
          }
          return splitLinesAuto(str);
        },
        lineSeparator: function() {
          return this.lineSep || "\n";
        },
        setDirection: docMethodOp(function(dir) {
          if (dir != "rtl") {
            dir = "ltr";
          }
          if (dir == this.direction) {
            return;
          }
          this.direction = dir;
          this.iter(function(line) {
            return line.order = null;
          });
          if (this.cm) {
            directionChanged(this.cm);
          }
        })
      });
      Doc.prototype.eachLine = Doc.prototype.iter;
      var lastDrop = 0;
      function onDrop(e) {
        var cm = this;
        clearDragCursor(cm);
        if (signalDOMEvent(cm, e) || eventInWidget(cm.display, e)) {
          return;
        }
        e_preventDefault(e);
        if (ie) {
          lastDrop = +/* @__PURE__ */ new Date();
        }
        var pos = posFromMouse(cm, e, true), files = e.dataTransfer.files;
        if (!pos || cm.isReadOnly()) {
          return;
        }
        if (files && files.length && window.FileReader && window.File) {
          var n = files.length, text = Array(n), read = 0;
          var markAsReadAndPasteIfAllFilesAreRead = function() {
            if (++read == n) {
              operation(cm, function() {
                pos = clipPos(cm.doc, pos);
                var change = {
                  from: pos,
                  to: pos,
                  text: cm.doc.splitLines(
                    text.filter(function(t) {
                      return t != null;
                    }).join(cm.doc.lineSeparator())
                  ),
                  origin: "paste"
                };
                makeChange(cm.doc, change);
                setSelectionReplaceHistory(cm.doc, simpleSelection(clipPos(cm.doc, pos), clipPos(cm.doc, changeEnd(change))));
              })();
            }
          };
          var readTextFromFile = function(file, i3) {
            if (cm.options.allowDropFileTypes && indexOf(cm.options.allowDropFileTypes, file.type) == -1) {
              markAsReadAndPasteIfAllFilesAreRead();
              return;
            }
            var reader = new FileReader();
            reader.onerror = function() {
              return markAsReadAndPasteIfAllFilesAreRead();
            };
            reader.onload = function() {
              var content = reader.result;
              if (/[\x00-\x08\x0e-\x1f]{2}/.test(content)) {
                markAsReadAndPasteIfAllFilesAreRead();
                return;
              }
              text[i3] = content;
              markAsReadAndPasteIfAllFilesAreRead();
            };
            reader.readAsText(file);
          };
          for (var i2 = 0; i2 < files.length; i2++) {
            readTextFromFile(files[i2], i2);
          }
        } else {
          if (cm.state.draggingText && cm.doc.sel.contains(pos) > -1) {
            cm.state.draggingText(e);
            setTimeout(function() {
              return cm.display.input.focus();
            }, 20);
            return;
          }
          try {
            var text$1 = e.dataTransfer.getData("Text");
            if (text$1) {
              var selected;
              if (cm.state.draggingText && !cm.state.draggingText.copy) {
                selected = cm.listSelections();
              }
              setSelectionNoUndo(cm.doc, simpleSelection(pos, pos));
              if (selected) {
                for (var i$12 = 0; i$12 < selected.length; ++i$12) {
                  replaceRange(cm.doc, "", selected[i$12].anchor, selected[i$12].head, "drag");
                }
              }
              cm.replaceSelection(text$1, "around", "paste");
              cm.display.input.focus();
            }
          } catch (e$1) {
          }
        }
      }
      function onDragStart(cm, e) {
        if (ie && (!cm.state.draggingText || +/* @__PURE__ */ new Date() - lastDrop < 100)) {
          e_stop(e);
          return;
        }
        if (signalDOMEvent(cm, e) || eventInWidget(cm.display, e)) {
          return;
        }
        e.dataTransfer.setData("Text", cm.getSelection());
        e.dataTransfer.effectAllowed = "copyMove";
        if (e.dataTransfer.setDragImage && !safari) {
          var img = elt("img", null, null, "position: fixed; left: 0; top: 0;");
          img.src = "data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";
          if (presto) {
            img.width = img.height = 1;
            cm.display.wrapper.appendChild(img);
            img._top = img.offsetTop;
          }
          e.dataTransfer.setDragImage(img, 0, 0);
          if (presto) {
            img.parentNode.removeChild(img);
          }
        }
      }
      function onDragOver(cm, e) {
        var pos = posFromMouse(cm, e);
        if (!pos) {
          return;
        }
        var frag = document.createDocumentFragment();
        drawSelectionCursor(cm, pos, frag);
        if (!cm.display.dragCursor) {
          cm.display.dragCursor = elt("div", null, "CodeMirror-cursors CodeMirror-dragcursors");
          cm.display.lineSpace.insertBefore(cm.display.dragCursor, cm.display.cursorDiv);
        }
        removeChildrenAndAdd(cm.display.dragCursor, frag);
      }
      function clearDragCursor(cm) {
        if (cm.display.dragCursor) {
          cm.display.lineSpace.removeChild(cm.display.dragCursor);
          cm.display.dragCursor = null;
        }
      }
      function forEachCodeMirror(f) {
        if (!document.getElementsByClassName) {
          return;
        }
        var byClass = document.getElementsByClassName("CodeMirror"), editors = [];
        for (var i2 = 0; i2 < byClass.length; i2++) {
          var cm = byClass[i2].CodeMirror;
          if (cm) {
            editors.push(cm);
          }
        }
        if (editors.length) {
          editors[0].operation(function() {
            for (var i3 = 0; i3 < editors.length; i3++) {
              f(editors[i3]);
            }
          });
        }
      }
      var globalsRegistered = false;
      function ensureGlobalHandlers() {
        if (globalsRegistered) {
          return;
        }
        registerGlobalHandlers();
        globalsRegistered = true;
      }
      function registerGlobalHandlers() {
        var resizeTimer;
        on(window, "resize", function() {
          if (resizeTimer == null) {
            resizeTimer = setTimeout(function() {
              resizeTimer = null;
              forEachCodeMirror(onResize);
            }, 100);
          }
        });
        on(window, "blur", function() {
          return forEachCodeMirror(onBlur);
        });
      }
      function onResize(cm) {
        var d = cm.display;
        d.cachedCharWidth = d.cachedTextHeight = d.cachedPaddingH = null;
        d.scrollbarsClipped = false;
        cm.setSize();
      }
      var keyNames = {
        3: "Pause",
        8: "Backspace",
        9: "Tab",
        13: "Enter",
        16: "Shift",
        17: "Ctrl",
        18: "Alt",
        19: "Pause",
        20: "CapsLock",
        27: "Esc",
        32: "Space",
        33: "PageUp",
        34: "PageDown",
        35: "End",
        36: "Home",
        37: "Left",
        38: "Up",
        39: "Right",
        40: "Down",
        44: "PrintScrn",
        45: "Insert",
        46: "Delete",
        59: ";",
        61: "=",
        91: "Mod",
        92: "Mod",
        93: "Mod",
        106: "*",
        107: "=",
        109: "-",
        110: ".",
        111: "/",
        145: "ScrollLock",
        173: "-",
        186: ";",
        187: "=",
        188: ",",
        189: "-",
        190: ".",
        191: "/",
        192: "`",
        219: "[",
        220: "\\",
        221: "]",
        222: "'",
        224: "Mod",
        63232: "Up",
        63233: "Down",
        63234: "Left",
        63235: "Right",
        63272: "Delete",
        63273: "Home",
        63275: "End",
        63276: "PageUp",
        63277: "PageDown",
        63302: "Insert"
      };
      for (var i = 0; i < 10; i++) {
        keyNames[i + 48] = keyNames[i + 96] = String(i);
      }
      for (var i$1 = 65; i$1 <= 90; i$1++) {
        keyNames[i$1] = String.fromCharCode(i$1);
      }
      for (var i$2 = 1; i$2 <= 12; i$2++) {
        keyNames[i$2 + 111] = keyNames[i$2 + 63235] = "F" + i$2;
      }
      var keyMap = {};
      keyMap.basic = {
        "Left": "goCharLeft",
        "Right": "goCharRight",
        "Up": "goLineUp",
        "Down": "goLineDown",
        "End": "goLineEnd",
        "Home": "goLineStartSmart",
        "PageUp": "goPageUp",
        "PageDown": "goPageDown",
        "Delete": "delCharAfter",
        "Backspace": "delCharBefore",
        "Shift-Backspace": "delCharBefore",
        "Tab": "defaultTab",
        "Shift-Tab": "indentAuto",
        "Enter": "newlineAndIndent",
        "Insert": "toggleOverwrite",
        "Esc": "singleSelection"
      };
      keyMap.pcDefault = {
        "Ctrl-A": "selectAll",
        "Ctrl-D": "deleteLine",
        "Ctrl-Z": "undo",
        "Shift-Ctrl-Z": "redo",
        "Ctrl-Y": "redo",
        "Ctrl-Home": "goDocStart",
        "Ctrl-End": "goDocEnd",
        "Ctrl-Up": "goLineUp",
        "Ctrl-Down": "goLineDown",
        "Ctrl-Left": "goGroupLeft",
        "Ctrl-Right": "goGroupRight",
        "Alt-Left": "goLineStart",
        "Alt-Right": "goLineEnd",
        "Ctrl-Backspace": "delGroupBefore",
        "Ctrl-Delete": "delGroupAfter",
        "Ctrl-S": "save",
        "Ctrl-F": "find",
        "Ctrl-G": "findNext",
        "Shift-Ctrl-G": "findPrev",
        "Shift-Ctrl-F": "replace",
        "Shift-Ctrl-R": "replaceAll",
        "Ctrl-[": "indentLess",
        "Ctrl-]": "indentMore",
        "Ctrl-U": "undoSelection",
        "Shift-Ctrl-U": "redoSelection",
        "Alt-U": "redoSelection",
        "fallthrough": "basic"
      };
      keyMap.emacsy = {
        "Ctrl-F": "goCharRight",
        "Ctrl-B": "goCharLeft",
        "Ctrl-P": "goLineUp",
        "Ctrl-N": "goLineDown",
        "Ctrl-A": "goLineStart",
        "Ctrl-E": "goLineEnd",
        "Ctrl-V": "goPageDown",
        "Shift-Ctrl-V": "goPageUp",
        "Ctrl-D": "delCharAfter",
        "Ctrl-H": "delCharBefore",
        "Alt-Backspace": "delWordBefore",
        "Ctrl-K": "killLine",
        "Ctrl-T": "transposeChars",
        "Ctrl-O": "openLine"
      };
      keyMap.macDefault = {
        "Cmd-A": "selectAll",
        "Cmd-D": "deleteLine",
        "Cmd-Z": "undo",
        "Shift-Cmd-Z": "redo",
        "Cmd-Y": "redo",
        "Cmd-Home": "goDocStart",
        "Cmd-Up": "goDocStart",
        "Cmd-End": "goDocEnd",
        "Cmd-Down": "goDocEnd",
        "Alt-Left": "goGroupLeft",
        "Alt-Right": "goGroupRight",
        "Cmd-Left": "goLineLeft",
        "Cmd-Right": "goLineRight",
        "Alt-Backspace": "delGroupBefore",
        "Ctrl-Alt-Backspace": "delGroupAfter",
        "Alt-Delete": "delGroupAfter",
        "Cmd-S": "save",
        "Cmd-F": "find",
        "Cmd-G": "findNext",
        "Shift-Cmd-G": "findPrev",
        "Cmd-Alt-F": "replace",
        "Shift-Cmd-Alt-F": "replaceAll",
        "Cmd-[": "indentLess",
        "Cmd-]": "indentMore",
        "Cmd-Backspace": "delWrappedLineLeft",
        "Cmd-Delete": "delWrappedLineRight",
        "Cmd-U": "undoSelection",
        "Shift-Cmd-U": "redoSelection",
        "Ctrl-Up": "goDocStart",
        "Ctrl-Down": "goDocEnd",
        "fallthrough": ["basic", "emacsy"]
      };
      keyMap["default"] = mac ? keyMap.macDefault : keyMap.pcDefault;
      function normalizeKeyName(name) {
        var parts = name.split(/-(?!$)/);
        name = parts[parts.length - 1];
        var alt, ctrl, shift, cmd;
        for (var i2 = 0; i2 < parts.length - 1; i2++) {
          var mod = parts[i2];
          if (/^(cmd|meta|m)$/i.test(mod)) {
            cmd = true;
          } else if (/^a(lt)?$/i.test(mod)) {
            alt = true;
          } else if (/^(c|ctrl|control)$/i.test(mod)) {
            ctrl = true;
          } else if (/^s(hift)?$/i.test(mod)) {
            shift = true;
          } else {
            throw new Error("Unrecognized modifier name: " + mod);
          }
        }
        if (alt) {
          name = "Alt-" + name;
        }
        if (ctrl) {
          name = "Ctrl-" + name;
        }
        if (cmd) {
          name = "Cmd-" + name;
        }
        if (shift) {
          name = "Shift-" + name;
        }
        return name;
      }
      function normalizeKeyMap(keymap) {
        var copy = {};
        for (var keyname in keymap) {
          if (keymap.hasOwnProperty(keyname)) {
            var value = keymap[keyname];
            if (/^(name|fallthrough|(de|at)tach)$/.test(keyname)) {
              continue;
            }
            if (value == "...") {
              delete keymap[keyname];
              continue;
            }
            var keys = map(keyname.split(" "), normalizeKeyName);
            for (var i2 = 0; i2 < keys.length; i2++) {
              var val = void 0, name = void 0;
              if (i2 == keys.length - 1) {
                name = keys.join(" ");
                val = value;
              } else {
                name = keys.slice(0, i2 + 1).join(" ");
                val = "...";
              }
              var prev = copy[name];
              if (!prev) {
                copy[name] = val;
              } else if (prev != val) {
                throw new Error("Inconsistent bindings for " + name);
              }
            }
            delete keymap[keyname];
          }
        }
        for (var prop2 in copy) {
          keymap[prop2] = copy[prop2];
        }
        return keymap;
      }
      function lookupKey(key, map2, handle, context) {
        map2 = getKeyMap(map2);
        var found = map2.call ? map2.call(key, context) : map2[key];
        if (found === false) {
          return "nothing";
        }
        if (found === "...") {
          return "multi";
        }
        if (found != null && handle(found)) {
          return "handled";
        }
        if (map2.fallthrough) {
          if (Object.prototype.toString.call(map2.fallthrough) != "[object Array]") {
            return lookupKey(key, map2.fallthrough, handle, context);
          }
          for (var i2 = 0; i2 < map2.fallthrough.length; i2++) {
            var result = lookupKey(key, map2.fallthrough[i2], handle, context);
            if (result) {
              return result;
            }
          }
        }
      }
      function isModifierKey(value) {
        var name = typeof value == "string" ? value : keyNames[value.keyCode];
        return name == "Ctrl" || name == "Alt" || name == "Shift" || name == "Mod";
      }
      function addModifierNames(name, event, noShift) {
        var base = name;
        if (event.altKey && base != "Alt") {
          name = "Alt-" + name;
        }
        if ((flipCtrlCmd ? event.metaKey : event.ctrlKey) && base != "Ctrl") {
          name = "Ctrl-" + name;
        }
        if ((flipCtrlCmd ? event.ctrlKey : event.metaKey) && base != "Mod") {
          name = "Cmd-" + name;
        }
        if (!noShift && event.shiftKey && base != "Shift") {
          name = "Shift-" + name;
        }
        return name;
      }
      function keyName(event, noShift) {
        if (presto && event.keyCode == 34 && event["char"]) {
          return false;
        }
        var name = keyNames[event.keyCode];
        if (name == null || event.altGraphKey) {
          return false;
        }
        if (event.keyCode == 3 && event.code) {
          name = event.code;
        }
        return addModifierNames(name, event, noShift);
      }
      function getKeyMap(val) {
        return typeof val == "string" ? keyMap[val] : val;
      }
      function deleteNearSelection(cm, compute) {
        var ranges = cm.doc.sel.ranges, kill = [];
        for (var i2 = 0; i2 < ranges.length; i2++) {
          var toKill = compute(ranges[i2]);
          while (kill.length && cmp(toKill.from, lst(kill).to) <= 0) {
            var replaced = kill.pop();
            if (cmp(replaced.from, toKill.from) < 0) {
              toKill.from = replaced.from;
              break;
            }
          }
          kill.push(toKill);
        }
        runInOp(cm, function() {
          for (var i3 = kill.length - 1; i3 >= 0; i3--) {
            replaceRange(cm.doc, "", kill[i3].from, kill[i3].to, "+delete");
          }
          ensureCursorVisible(cm);
        });
      }
      function moveCharLogically(line, ch, dir) {
        var target = skipExtendingChars(line.text, ch + dir, dir);
        return target < 0 || target > line.text.length ? null : target;
      }
      function moveLogically(line, start, dir) {
        var ch = moveCharLogically(line, start.ch, dir);
        return ch == null ? null : new Pos(start.line, ch, dir < 0 ? "after" : "before");
      }
      function endOfLine(visually, cm, lineObj, lineNo2, dir) {
        if (visually) {
          if (cm.doc.direction == "rtl") {
            dir = -dir;
          }
          var order = getOrder(lineObj, cm.doc.direction);
          if (order) {
            var part = dir < 0 ? lst(order) : order[0];
            var moveInStorageOrder = dir < 0 == (part.level == 1);
            var sticky = moveInStorageOrder ? "after" : "before";
            var ch;
            if (part.level > 0 || cm.doc.direction == "rtl") {
              var prep = prepareMeasureForLine(cm, lineObj);
              ch = dir < 0 ? lineObj.text.length - 1 : 0;
              var targetTop = measureCharPrepared(cm, prep, ch).top;
              ch = findFirst(function(ch2) {
                return measureCharPrepared(cm, prep, ch2).top == targetTop;
              }, dir < 0 == (part.level == 1) ? part.from : part.to - 1, ch);
              if (sticky == "before") {
                ch = moveCharLogically(lineObj, ch, 1);
              }
            } else {
              ch = dir < 0 ? part.to : part.from;
            }
            return new Pos(lineNo2, ch, sticky);
          }
        }
        return new Pos(lineNo2, dir < 0 ? lineObj.text.length : 0, dir < 0 ? "before" : "after");
      }
      function moveVisually(cm, line, start, dir) {
        var bidi = getOrder(line, cm.doc.direction);
        if (!bidi) {
          return moveLogically(line, start, dir);
        }
        if (start.ch >= line.text.length) {
          start.ch = line.text.length;
          start.sticky = "before";
        } else if (start.ch <= 0) {
          start.ch = 0;
          start.sticky = "after";
        }
        var partPos = getBidiPartAt(bidi, start.ch, start.sticky), part = bidi[partPos];
        if (cm.doc.direction == "ltr" && part.level % 2 == 0 && (dir > 0 ? part.to > start.ch : part.from < start.ch)) {
          return moveLogically(line, start, dir);
        }
        var mv = function(pos, dir2) {
          return moveCharLogically(line, pos instanceof Pos ? pos.ch : pos, dir2);
        };
        var prep;
        var getWrappedLineExtent = function(ch2) {
          if (!cm.options.lineWrapping) {
            return { begin: 0, end: line.text.length };
          }
          prep = prep || prepareMeasureForLine(cm, line);
          return wrappedLineExtentChar(cm, line, prep, ch2);
        };
        var wrappedLineExtent2 = getWrappedLineExtent(start.sticky == "before" ? mv(start, -1) : start.ch);
        if (cm.doc.direction == "rtl" || part.level == 1) {
          var moveInStorageOrder = part.level == 1 == dir < 0;
          var ch = mv(start, moveInStorageOrder ? 1 : -1);
          if (ch != null && (!moveInStorageOrder ? ch >= part.from && ch >= wrappedLineExtent2.begin : ch <= part.to && ch <= wrappedLineExtent2.end)) {
            var sticky = moveInStorageOrder ? "before" : "after";
            return new Pos(start.line, ch, sticky);
          }
        }
        var searchInVisualLine = function(partPos2, dir2, wrappedLineExtent3) {
          var getRes = function(ch3, moveInStorageOrder3) {
            return moveInStorageOrder3 ? new Pos(start.line, mv(ch3, 1), "before") : new Pos(start.line, ch3, "after");
          };
          for (; partPos2 >= 0 && partPos2 < bidi.length; partPos2 += dir2) {
            var part2 = bidi[partPos2];
            var moveInStorageOrder2 = dir2 > 0 == (part2.level != 1);
            var ch2 = moveInStorageOrder2 ? wrappedLineExtent3.begin : mv(wrappedLineExtent3.end, -1);
            if (part2.from <= ch2 && ch2 < part2.to) {
              return getRes(ch2, moveInStorageOrder2);
            }
            ch2 = moveInStorageOrder2 ? part2.from : mv(part2.to, -1);
            if (wrappedLineExtent3.begin <= ch2 && ch2 < wrappedLineExtent3.end) {
              return getRes(ch2, moveInStorageOrder2);
            }
          }
        };
        var res = searchInVisualLine(partPos + dir, dir, wrappedLineExtent2);
        if (res) {
          return res;
        }
        var nextCh = dir > 0 ? wrappedLineExtent2.end : mv(wrappedLineExtent2.begin, -1);
        if (nextCh != null && !(dir > 0 && nextCh == line.text.length)) {
          res = searchInVisualLine(dir > 0 ? 0 : bidi.length - 1, dir, getWrappedLineExtent(nextCh));
          if (res) {
            return res;
          }
        }
        return null;
      }
      var commands = {
        selectAll,
        singleSelection: function(cm) {
          return cm.setSelection(cm.getCursor("anchor"), cm.getCursor("head"), sel_dontScroll);
        },
        killLine: function(cm) {
          return deleteNearSelection(cm, function(range2) {
            if (range2.empty()) {
              var len = getLine(cm.doc, range2.head.line).text.length;
              if (range2.head.ch == len && range2.head.line < cm.lastLine()) {
                return { from: range2.head, to: Pos(range2.head.line + 1, 0) };
              } else {
                return { from: range2.head, to: Pos(range2.head.line, len) };
              }
            } else {
              return { from: range2.from(), to: range2.to() };
            }
          });
        },
        deleteLine: function(cm) {
          return deleteNearSelection(cm, function(range2) {
            return {
              from: Pos(range2.from().line, 0),
              to: clipPos(cm.doc, Pos(range2.to().line + 1, 0))
            };
          });
        },
        delLineLeft: function(cm) {
          return deleteNearSelection(cm, function(range2) {
            return {
              from: Pos(range2.from().line, 0),
              to: range2.from()
            };
          });
        },
        delWrappedLineLeft: function(cm) {
          return deleteNearSelection(cm, function(range2) {
            var top = cm.charCoords(range2.head, "div").top + 5;
            var leftPos = cm.coordsChar({ left: 0, top }, "div");
            return { from: leftPos, to: range2.from() };
          });
        },
        delWrappedLineRight: function(cm) {
          return deleteNearSelection(cm, function(range2) {
            var top = cm.charCoords(range2.head, "div").top + 5;
            var rightPos = cm.coordsChar({ left: cm.display.lineDiv.offsetWidth + 100, top }, "div");
            return { from: range2.from(), to: rightPos };
          });
        },
        undo: function(cm) {
          return cm.undo();
        },
        redo: function(cm) {
          return cm.redo();
        },
        undoSelection: function(cm) {
          return cm.undoSelection();
        },
        redoSelection: function(cm) {
          return cm.redoSelection();
        },
        goDocStart: function(cm) {
          return cm.extendSelection(Pos(cm.firstLine(), 0));
        },
        goDocEnd: function(cm) {
          return cm.extendSelection(Pos(cm.lastLine()));
        },
        goLineStart: function(cm) {
          return cm.extendSelectionsBy(
            function(range2) {
              return lineStart(cm, range2.head.line);
            },
            { origin: "+move", bias: 1 }
          );
        },
        goLineStartSmart: function(cm) {
          return cm.extendSelectionsBy(
            function(range2) {
              return lineStartSmart(cm, range2.head);
            },
            { origin: "+move", bias: 1 }
          );
        },
        goLineEnd: function(cm) {
          return cm.extendSelectionsBy(
            function(range2) {
              return lineEnd(cm, range2.head.line);
            },
            { origin: "+move", bias: -1 }
          );
        },
        goLineRight: function(cm) {
          return cm.extendSelectionsBy(function(range2) {
            var top = cm.cursorCoords(range2.head, "div").top + 5;
            return cm.coordsChar({ left: cm.display.lineDiv.offsetWidth + 100, top }, "div");
          }, sel_move);
        },
        goLineLeft: function(cm) {
          return cm.extendSelectionsBy(function(range2) {
            var top = cm.cursorCoords(range2.head, "div").top + 5;
            return cm.coordsChar({ left: 0, top }, "div");
          }, sel_move);
        },
        goLineLeftSmart: function(cm) {
          return cm.extendSelectionsBy(function(range2) {
            var top = cm.cursorCoords(range2.head, "div").top + 5;
            var pos = cm.coordsChar({ left: 0, top }, "div");
            if (pos.ch < cm.getLine(pos.line).search(/\S/)) {
              return lineStartSmart(cm, range2.head);
            }
            return pos;
          }, sel_move);
        },
        goLineUp: function(cm) {
          return cm.moveV(-1, "line");
        },
        goLineDown: function(cm) {
          return cm.moveV(1, "line");
        },
        goPageUp: function(cm) {
          return cm.moveV(-1, "page");
        },
        goPageDown: function(cm) {
          return cm.moveV(1, "page");
        },
        goCharLeft: function(cm) {
          return cm.moveH(-1, "char");
        },
        goCharRight: function(cm) {
          return cm.moveH(1, "char");
        },
        goColumnLeft: function(cm) {
          return cm.moveH(-1, "column");
        },
        goColumnRight: function(cm) {
          return cm.moveH(1, "column");
        },
        goWordLeft: function(cm) {
          return cm.moveH(-1, "word");
        },
        goGroupRight: function(cm) {
          return cm.moveH(1, "group");
        },
        goGroupLeft: function(cm) {
          return cm.moveH(-1, "group");
        },
        goWordRight: function(cm) {
          return cm.moveH(1, "word");
        },
        delCharBefore: function(cm) {
          return cm.deleteH(-1, "codepoint");
        },
        delCharAfter: function(cm) {
          return cm.deleteH(1, "char");
        },
        delWordBefore: function(cm) {
          return cm.deleteH(-1, "word");
        },
        delWordAfter: function(cm) {
          return cm.deleteH(1, "word");
        },
        delGroupBefore: function(cm) {
          return cm.deleteH(-1, "group");
        },
        delGroupAfter: function(cm) {
          return cm.deleteH(1, "group");
        },
        indentAuto: function(cm) {
          return cm.indentSelection("smart");
        },
        indentMore: function(cm) {
          return cm.indentSelection("add");
        },
        indentLess: function(cm) {
          return cm.indentSelection("subtract");
        },
        insertTab: function(cm) {
          return cm.replaceSelection("	");
        },
        insertSoftTab: function(cm) {
          var spaces = [], ranges = cm.listSelections(), tabSize = cm.options.tabSize;
          for (var i2 = 0; i2 < ranges.length; i2++) {
            var pos = ranges[i2].from();
            var col = countColumn(cm.getLine(pos.line), pos.ch, tabSize);
            spaces.push(spaceStr(tabSize - col % tabSize));
          }
          cm.replaceSelections(spaces);
        },
        defaultTab: function(cm) {
          if (cm.somethingSelected()) {
            cm.indentSelection("add");
          } else {
            cm.execCommand("insertTab");
          }
        },
        // Swap the two chars left and right of each selection's head.
        // Move cursor behind the two swapped characters afterwards.
        //
        // Doesn't consider line feeds a character.
        // Doesn't scan more than one line above to find a character.
        // Doesn't do anything on an empty line.
        // Doesn't do anything with non-empty selections.
        transposeChars: function(cm) {
          return runInOp(cm, function() {
            var ranges = cm.listSelections(), newSel = [];
            for (var i2 = 0; i2 < ranges.length; i2++) {
              if (!ranges[i2].empty()) {
                continue;
              }
              var cur = ranges[i2].head, line = getLine(cm.doc, cur.line).text;
              if (line) {
                if (cur.ch == line.length) {
                  cur = new Pos(cur.line, cur.ch - 1);
                }
                if (cur.ch > 0) {
                  cur = new Pos(cur.line, cur.ch + 1);
                  cm.replaceRange(
                    line.charAt(cur.ch - 1) + line.charAt(cur.ch - 2),
                    Pos(cur.line, cur.ch - 2),
                    cur,
                    "+transpose"
                  );
                } else if (cur.line > cm.doc.first) {
                  var prev = getLine(cm.doc, cur.line - 1).text;
                  if (prev) {
                    cur = new Pos(cur.line, 1);
                    cm.replaceRange(
                      line.charAt(0) + cm.doc.lineSeparator() + prev.charAt(prev.length - 1),
                      Pos(cur.line - 1, prev.length - 1),
                      cur,
                      "+transpose"
                    );
                  }
                }
              }
              newSel.push(new Range(cur, cur));
            }
            cm.setSelections(newSel);
          });
        },
        newlineAndIndent: function(cm) {
          return runInOp(cm, function() {
            var sels = cm.listSelections();
            for (var i2 = sels.length - 1; i2 >= 0; i2--) {
              cm.replaceRange(cm.doc.lineSeparator(), sels[i2].anchor, sels[i2].head, "+input");
            }
            sels = cm.listSelections();
            for (var i$12 = 0; i$12 < sels.length; i$12++) {
              cm.indentLine(sels[i$12].from().line, null, true);
            }
            ensureCursorVisible(cm);
          });
        },
        openLine: function(cm) {
          return cm.replaceSelection("\n", "start");
        },
        toggleOverwrite: function(cm) {
          return cm.toggleOverwrite();
        }
      };
      function lineStart(cm, lineN) {
        var line = getLine(cm.doc, lineN);
        var visual = visualLine(line);
        if (visual != line) {
          lineN = lineNo(visual);
        }
        return endOfLine(true, cm, visual, lineN, 1);
      }
      function lineEnd(cm, lineN) {
        var line = getLine(cm.doc, lineN);
        var visual = visualLineEnd(line);
        if (visual != line) {
          lineN = lineNo(visual);
        }
        return endOfLine(true, cm, line, lineN, -1);
      }
      function lineStartSmart(cm, pos) {
        var start = lineStart(cm, pos.line);
        var line = getLine(cm.doc, start.line);
        var order = getOrder(line, cm.doc.direction);
        if (!order || order[0].level == 0) {
          var firstNonWS = Math.max(start.ch, line.text.search(/\S/));
          var inWS = pos.line == start.line && pos.ch <= firstNonWS && pos.ch;
          return Pos(start.line, inWS ? 0 : firstNonWS, start.sticky);
        }
        return start;
      }
      function doHandleBinding(cm, bound, dropShift) {
        if (typeof bound == "string") {
          bound = commands[bound];
          if (!bound) {
            return false;
          }
        }
        cm.display.input.ensurePolled();
        var prevShift = cm.display.shift, done = false;
        try {
          if (cm.isReadOnly()) {
            cm.state.suppressEdits = true;
          }
          if (dropShift) {
            cm.display.shift = false;
          }
          done = bound(cm) != Pass;
        } finally {
          cm.display.shift = prevShift;
          cm.state.suppressEdits = false;
        }
        return done;
      }
      function lookupKeyForEditor(cm, name, handle) {
        for (var i2 = 0; i2 < cm.state.keyMaps.length; i2++) {
          var result = lookupKey(name, cm.state.keyMaps[i2], handle, cm);
          if (result) {
            return result;
          }
        }
        return cm.options.extraKeys && lookupKey(name, cm.options.extraKeys, handle, cm) || lookupKey(name, cm.options.keyMap, handle, cm);
      }
      var stopSeq = new Delayed();
      function dispatchKey(cm, name, e, handle) {
        var seq = cm.state.keySeq;
        if (seq) {
          if (isModifierKey(name)) {
            return "handled";
          }
          if (/\'$/.test(name)) {
            cm.state.keySeq = null;
          } else {
            stopSeq.set(50, function() {
              if (cm.state.keySeq == seq) {
                cm.state.keySeq = null;
                cm.display.input.reset();
              }
            });
          }
          if (dispatchKeyInner(cm, seq + " " + name, e, handle)) {
            return true;
          }
        }
        return dispatchKeyInner(cm, name, e, handle);
      }
      function dispatchKeyInner(cm, name, e, handle) {
        var result = lookupKeyForEditor(cm, name, handle);
        if (result == "multi") {
          cm.state.keySeq = name;
        }
        if (result == "handled") {
          signalLater(cm, "keyHandled", cm, name, e);
        }
        if (result == "handled" || result == "multi") {
          e_preventDefault(e);
          restartBlink(cm);
        }
        return !!result;
      }
      function handleKeyBinding(cm, e) {
        var name = keyName(e, true);
        if (!name) {
          return false;
        }
        if (e.shiftKey && !cm.state.keySeq) {
          return dispatchKey(cm, "Shift-" + name, e, function(b) {
            return doHandleBinding(cm, b, true);
          }) || dispatchKey(cm, name, e, function(b) {
            if (typeof b == "string" ? /^go[A-Z]/.test(b) : b.motion) {
              return doHandleBinding(cm, b);
            }
          });
        } else {
          return dispatchKey(cm, name, e, function(b) {
            return doHandleBinding(cm, b);
          });
        }
      }
      function handleCharBinding(cm, e, ch) {
        return dispatchKey(cm, "'" + ch + "'", e, function(b) {
          return doHandleBinding(cm, b, true);
        });
      }
      var lastStoppedKey = null;
      function onKeyDown(e) {
        var cm = this;
        if (e.target && e.target != cm.display.input.getField()) {
          return;
        }
        cm.curOp.focus = activeElt(root(cm));
        if (signalDOMEvent(cm, e)) {
          return;
        }
        if (ie && ie_version < 11 && e.keyCode == 27) {
          e.returnValue = false;
        }
        var code = e.keyCode;
        cm.display.shift = code == 16 || e.shiftKey;
        var handled = handleKeyBinding(cm, e);
        if (presto) {
          lastStoppedKey = handled ? code : null;
          if (!handled && code == 88 && !hasCopyEvent && (mac ? e.metaKey : e.ctrlKey)) {
            cm.replaceSelection("", null, "cut");
          }
        }
        if (gecko && !mac && !handled && code == 46 && e.shiftKey && !e.ctrlKey && document.execCommand) {
          document.execCommand("cut");
        }
        if (code == 18 && !/\bCodeMirror-crosshair\b/.test(cm.display.lineDiv.className)) {
          showCrossHair(cm);
        }
      }
      function showCrossHair(cm) {
        var lineDiv = cm.display.lineDiv;
        addClass(lineDiv, "CodeMirror-crosshair");
        function up(e) {
          if (e.keyCode == 18 || !e.altKey) {
            rmClass(lineDiv, "CodeMirror-crosshair");
            off(document, "keyup", up);
            off(document, "mouseover", up);
          }
        }
        on(document, "keyup", up);
        on(document, "mouseover", up);
      }
      function onKeyUp(e) {
        if (e.keyCode == 16) {
          this.doc.sel.shift = false;
        }
        signalDOMEvent(this, e);
      }
      function onKeyPress(e) {
        var cm = this;
        if (e.target && e.target != cm.display.input.getField()) {
          return;
        }
        if (eventInWidget(cm.display, e) || signalDOMEvent(cm, e) || e.ctrlKey && !e.altKey || mac && e.metaKey) {
          return;
        }
        var keyCode = e.keyCode, charCode = e.charCode;
        if (presto && keyCode == lastStoppedKey) {
          lastStoppedKey = null;
          e_preventDefault(e);
          return;
        }
        if (presto && (!e.which || e.which < 10) && handleKeyBinding(cm, e)) {
          return;
        }
        var ch = String.fromCharCode(charCode == null ? keyCode : charCode);
        if (ch == "\b") {
          return;
        }
        if (handleCharBinding(cm, e, ch)) {
          return;
        }
        cm.display.input.onKeyPress(e);
      }
      var DOUBLECLICK_DELAY = 400;
      var PastClick = function(time, pos, button) {
        this.time = time;
        this.pos = pos;
        this.button = button;
      };
      PastClick.prototype.compare = function(time, pos, button) {
        return this.time + DOUBLECLICK_DELAY > time && cmp(pos, this.pos) == 0 && button == this.button;
      };
      var lastClick, lastDoubleClick;
      function clickRepeat(pos, button) {
        var now = +/* @__PURE__ */ new Date();
        if (lastDoubleClick && lastDoubleClick.compare(now, pos, button)) {
          lastClick = lastDoubleClick = null;
          return "triple";
        } else if (lastClick && lastClick.compare(now, pos, button)) {
          lastDoubleClick = new PastClick(now, pos, button);
          lastClick = null;
          return "double";
        } else {
          lastClick = new PastClick(now, pos, button);
          lastDoubleClick = null;
          return "single";
        }
      }
      function onMouseDown(e) {
        var cm = this, display = cm.display;
        if (signalDOMEvent(cm, e) || display.activeTouch && display.input.supportsTouch()) {
          return;
        }
        display.input.ensurePolled();
        display.shift = e.shiftKey;
        if (eventInWidget(display, e)) {
          if (!webkit) {
            display.scroller.draggable = false;
            setTimeout(function() {
              return display.scroller.draggable = true;
            }, 100);
          }
          return;
        }
        if (clickInGutter(cm, e)) {
          return;
        }
        var pos = posFromMouse(cm, e), button = e_button(e), repeat = pos ? clickRepeat(pos, button) : "single";
        win(cm).focus();
        if (button == 1 && cm.state.selectingText) {
          cm.state.selectingText(e);
        }
        if (pos && handleMappedButton(cm, button, pos, repeat, e)) {
          return;
        }
        if (button == 1) {
          if (pos) {
            leftButtonDown(cm, pos, repeat, e);
          } else if (e_target(e) == display.scroller) {
            e_preventDefault(e);
          }
        } else if (button == 2) {
          if (pos) {
            extendSelection(cm.doc, pos);
          }
          setTimeout(function() {
            return display.input.focus();
          }, 20);
        } else if (button == 3) {
          if (captureRightClick) {
            cm.display.input.onContextMenu(e);
          } else {
            delayBlurEvent(cm);
          }
        }
      }
      function handleMappedButton(cm, button, pos, repeat, event) {
        var name = "Click";
        if (repeat == "double") {
          name = "Double" + name;
        } else if (repeat == "triple") {
          name = "Triple" + name;
        }
        name = (button == 1 ? "Left" : button == 2 ? "Middle" : "Right") + name;
        return dispatchKey(cm, addModifierNames(name, event), event, function(bound) {
          if (typeof bound == "string") {
            bound = commands[bound];
          }
          if (!bound) {
            return false;
          }
          var done = false;
          try {
            if (cm.isReadOnly()) {
              cm.state.suppressEdits = true;
            }
            done = bound(cm, pos) != Pass;
          } finally {
            cm.state.suppressEdits = false;
          }
          return done;
        });
      }
      function configureMouse(cm, repeat, event) {
        var option = cm.getOption("configureMouse");
        var value = option ? option(cm, repeat, event) : {};
        if (value.unit == null) {
          var rect = chromeOS ? event.shiftKey && event.metaKey : event.altKey;
          value.unit = rect ? "rectangle" : repeat == "single" ? "char" : repeat == "double" ? "word" : "line";
        }
        if (value.extend == null || cm.doc.extend) {
          value.extend = cm.doc.extend || event.shiftKey;
        }
        if (value.addNew == null) {
          value.addNew = mac ? event.metaKey : event.ctrlKey;
        }
        if (value.moveOnDrag == null) {
          value.moveOnDrag = !(mac ? event.altKey : event.ctrlKey);
        }
        return value;
      }
      function leftButtonDown(cm, pos, repeat, event) {
        if (ie) {
          setTimeout(bind(ensureFocus, cm), 0);
        } else {
          cm.curOp.focus = activeElt(root(cm));
        }
        var behavior = configureMouse(cm, repeat, event);
        var sel = cm.doc.sel, contained;
        if (cm.options.dragDrop && dragAndDrop && !cm.isReadOnly() && repeat == "single" && (contained = sel.contains(pos)) > -1 && (cmp((contained = sel.ranges[contained]).from(), pos) < 0 || pos.xRel > 0) && (cmp(contained.to(), pos) > 0 || pos.xRel < 0)) {
          leftButtonStartDrag(cm, event, pos, behavior);
        } else {
          leftButtonSelect(cm, event, pos, behavior);
        }
      }
      function leftButtonStartDrag(cm, event, pos, behavior) {
        var display = cm.display, moved = false;
        var dragEnd = operation(cm, function(e) {
          if (webkit) {
            display.scroller.draggable = false;
          }
          cm.state.draggingText = false;
          if (cm.state.delayingBlurEvent) {
            if (cm.hasFocus()) {
              cm.state.delayingBlurEvent = false;
            } else {
              delayBlurEvent(cm);
            }
          }
          off(display.wrapper.ownerDocument, "mouseup", dragEnd);
          off(display.wrapper.ownerDocument, "mousemove", mouseMove);
          off(display.scroller, "dragstart", dragStart);
          off(display.scroller, "drop", dragEnd);
          if (!moved) {
            e_preventDefault(e);
            if (!behavior.addNew) {
              extendSelection(cm.doc, pos, null, null, behavior.extend);
            }
            if (webkit && !safari || ie && ie_version == 9) {
              setTimeout(function() {
                display.wrapper.ownerDocument.body.focus({ preventScroll: true });
                display.input.focus();
              }, 20);
            } else {
              display.input.focus();
            }
          }
        });
        var mouseMove = function(e2) {
          moved = moved || Math.abs(event.clientX - e2.clientX) + Math.abs(event.clientY - e2.clientY) >= 10;
        };
        var dragStart = function() {
          return moved = true;
        };
        if (webkit) {
          display.scroller.draggable = true;
        }
        cm.state.draggingText = dragEnd;
        dragEnd.copy = !behavior.moveOnDrag;
        on(display.wrapper.ownerDocument, "mouseup", dragEnd);
        on(display.wrapper.ownerDocument, "mousemove", mouseMove);
        on(display.scroller, "dragstart", dragStart);
        on(display.scroller, "drop", dragEnd);
        cm.state.delayingBlurEvent = true;
        setTimeout(function() {
          return display.input.focus();
        }, 20);
        if (display.scroller.dragDrop) {
          display.scroller.dragDrop();
        }
      }
      function rangeForUnit(cm, pos, unit) {
        if (unit == "char") {
          return new Range(pos, pos);
        }
        if (unit == "word") {
          return cm.findWordAt(pos);
        }
        if (unit == "line") {
          return new Range(Pos(pos.line, 0), clipPos(cm.doc, Pos(pos.line + 1, 0)));
        }
        var result = unit(cm, pos);
        return new Range(result.from, result.to);
      }
      function leftButtonSelect(cm, event, start, behavior) {
        if (ie) {
          delayBlurEvent(cm);
        }
        var display = cm.display, doc2 = cm.doc;
        e_preventDefault(event);
        var ourRange, ourIndex, startSel = doc2.sel, ranges = startSel.ranges;
        if (behavior.addNew && !behavior.extend) {
          ourIndex = doc2.sel.contains(start);
          if (ourIndex > -1) {
            ourRange = ranges[ourIndex];
          } else {
            ourRange = new Range(start, start);
          }
        } else {
          ourRange = doc2.sel.primary();
          ourIndex = doc2.sel.primIndex;
        }
        if (behavior.unit == "rectangle") {
          if (!behavior.addNew) {
            ourRange = new Range(start, start);
          }
          start = posFromMouse(cm, event, true, true);
          ourIndex = -1;
        } else {
          var range2 = rangeForUnit(cm, start, behavior.unit);
          if (behavior.extend) {
            ourRange = extendRange(ourRange, range2.anchor, range2.head, behavior.extend);
          } else {
            ourRange = range2;
          }
        }
        if (!behavior.addNew) {
          ourIndex = 0;
          setSelection(doc2, new Selection([ourRange], 0), sel_mouse);
          startSel = doc2.sel;
        } else if (ourIndex == -1) {
          ourIndex = ranges.length;
          setSelection(
            doc2,
            normalizeSelection(cm, ranges.concat([ourRange]), ourIndex),
            { scroll: false, origin: "*mouse" }
          );
        } else if (ranges.length > 1 && ranges[ourIndex].empty() && behavior.unit == "char" && !behavior.extend) {
          setSelection(
            doc2,
            normalizeSelection(cm, ranges.slice(0, ourIndex).concat(ranges.slice(ourIndex + 1)), 0),
            { scroll: false, origin: "*mouse" }
          );
          startSel = doc2.sel;
        } else {
          replaceOneSelection(doc2, ourIndex, ourRange, sel_mouse);
        }
        var lastPos = start;
        function extendTo(pos) {
          if (cmp(lastPos, pos) == 0) {
            return;
          }
          lastPos = pos;
          if (behavior.unit == "rectangle") {
            var ranges2 = [], tabSize = cm.options.tabSize;
            var startCol = countColumn(getLine(doc2, start.line).text, start.ch, tabSize);
            var posCol = countColumn(getLine(doc2, pos.line).text, pos.ch, tabSize);
            var left = Math.min(startCol, posCol), right = Math.max(startCol, posCol);
            for (var line = Math.min(start.line, pos.line), end = Math.min(cm.lastLine(), Math.max(start.line, pos.line)); line <= end; line++) {
              var text = getLine(doc2, line).text, leftPos = findColumn(text, left, tabSize);
              if (left == right) {
                ranges2.push(new Range(Pos(line, leftPos), Pos(line, leftPos)));
              } else if (text.length > leftPos) {
                ranges2.push(new Range(Pos(line, leftPos), Pos(line, findColumn(text, right, tabSize))));
              }
            }
            if (!ranges2.length) {
              ranges2.push(new Range(start, start));
            }
            setSelection(
              doc2,
              normalizeSelection(cm, startSel.ranges.slice(0, ourIndex).concat(ranges2), ourIndex),
              { origin: "*mouse", scroll: false }
            );
            cm.scrollIntoView(pos);
          } else {
            var oldRange = ourRange;
            var range3 = rangeForUnit(cm, pos, behavior.unit);
            var anchor = oldRange.anchor, head;
            if (cmp(range3.anchor, anchor) > 0) {
              head = range3.head;
              anchor = minPos(oldRange.from(), range3.anchor);
            } else {
              head = range3.anchor;
              anchor = maxPos(oldRange.to(), range3.head);
            }
            var ranges$1 = startSel.ranges.slice(0);
            ranges$1[ourIndex] = bidiSimplify(cm, new Range(clipPos(doc2, anchor), head));
            setSelection(doc2, normalizeSelection(cm, ranges$1, ourIndex), sel_mouse);
          }
        }
        var editorSize = display.wrapper.getBoundingClientRect();
        var counter = 0;
        function extend(e) {
          var curCount = ++counter;
          var cur = posFromMouse(cm, e, true, behavior.unit == "rectangle");
          if (!cur) {
            return;
          }
          if (cmp(cur, lastPos) != 0) {
            cm.curOp.focus = activeElt(root(cm));
            extendTo(cur);
            var visible = visibleLines(display, doc2);
            if (cur.line >= visible.to || cur.line < visible.from) {
              setTimeout(operation(cm, function() {
                if (counter == curCount) {
                  extend(e);
                }
              }), 150);
            }
          } else {
            var outside = e.clientY < editorSize.top ? -20 : e.clientY > editorSize.bottom ? 20 : 0;
            if (outside) {
              setTimeout(operation(cm, function() {
                if (counter != curCount) {
                  return;
                }
                display.scroller.scrollTop += outside;
                extend(e);
              }), 50);
            }
          }
        }
        function done(e) {
          cm.state.selectingText = false;
          counter = Infinity;
          if (e) {
            e_preventDefault(e);
            display.input.focus();
          }
          off(display.wrapper.ownerDocument, "mousemove", move);
          off(display.wrapper.ownerDocument, "mouseup", up);
          doc2.history.lastSelOrigin = null;
        }
        var move = operation(cm, function(e) {
          if (e.buttons === 0 || !e_button(e)) {
            done(e);
          } else {
            extend(e);
          }
        });
        var up = operation(cm, done);
        cm.state.selectingText = up;
        on(display.wrapper.ownerDocument, "mousemove", move);
        on(display.wrapper.ownerDocument, "mouseup", up);
      }
      function bidiSimplify(cm, range2) {
        var anchor = range2.anchor;
        var head = range2.head;
        var anchorLine = getLine(cm.doc, anchor.line);
        if (cmp(anchor, head) == 0 && anchor.sticky == head.sticky) {
          return range2;
        }
        var order = getOrder(anchorLine);
        if (!order) {
          return range2;
        }
        var index = getBidiPartAt(order, anchor.ch, anchor.sticky), part = order[index];
        if (part.from != anchor.ch && part.to != anchor.ch) {
          return range2;
        }
        var boundary = index + (part.from == anchor.ch == (part.level != 1) ? 0 : 1);
        if (boundary == 0 || boundary == order.length) {
          return range2;
        }
        var leftSide;
        if (head.line != anchor.line) {
          leftSide = (head.line - anchor.line) * (cm.doc.direction == "ltr" ? 1 : -1) > 0;
        } else {
          var headIndex = getBidiPartAt(order, head.ch, head.sticky);
          var dir = headIndex - index || (head.ch - anchor.ch) * (part.level == 1 ? -1 : 1);
          if (headIndex == boundary - 1 || headIndex == boundary) {
            leftSide = dir < 0;
          } else {
            leftSide = dir > 0;
          }
        }
        var usePart = order[boundary + (leftSide ? -1 : 0)];
        var from = leftSide == (usePart.level == 1);
        var ch = from ? usePart.from : usePart.to, sticky = from ? "after" : "before";
        return anchor.ch == ch && anchor.sticky == sticky ? range2 : new Range(new Pos(anchor.line, ch, sticky), head);
      }
      function gutterEvent(cm, e, type, prevent) {
        var mX, mY;
        if (e.touches) {
          mX = e.touches[0].clientX;
          mY = e.touches[0].clientY;
        } else {
          try {
            mX = e.clientX;
            mY = e.clientY;
          } catch (e$1) {
            return false;
          }
        }
        if (mX >= Math.floor(cm.display.gutters.getBoundingClientRect().right)) {
          return false;
        }
        if (prevent) {
          e_preventDefault(e);
        }
        var display = cm.display;
        var lineBox = display.lineDiv.getBoundingClientRect();
        if (mY > lineBox.bottom || !hasHandler(cm, type)) {
          return e_defaultPrevented(e);
        }
        mY -= lineBox.top - display.viewOffset;
        for (var i2 = 0; i2 < cm.display.gutterSpecs.length; ++i2) {
          var g = display.gutters.childNodes[i2];
          if (g && g.getBoundingClientRect().right >= mX) {
            var line = lineAtHeight(cm.doc, mY);
            var gutter = cm.display.gutterSpecs[i2];
            signal(cm, type, cm, line, gutter.className, e);
            return e_defaultPrevented(e);
          }
        }
      }
      function clickInGutter(cm, e) {
        return gutterEvent(cm, e, "gutterClick", true);
      }
      function onContextMenu(cm, e) {
        if (eventInWidget(cm.display, e) || contextMenuInGutter(cm, e)) {
          return;
        }
        if (signalDOMEvent(cm, e, "contextmenu")) {
          return;
        }
        if (!captureRightClick) {
          cm.display.input.onContextMenu(e);
        }
      }
      function contextMenuInGutter(cm, e) {
        if (!hasHandler(cm, "gutterContextMenu")) {
          return false;
        }
        return gutterEvent(cm, e, "gutterContextMenu", false);
      }
      function themeChanged(cm) {
        cm.display.wrapper.className = cm.display.wrapper.className.replace(/\s*cm-s-\S+/g, "") + cm.options.theme.replace(/(^|\s)\s*/g, " cm-s-");
        clearCaches(cm);
      }
      var Init = { toString: function() {
        return "CodeMirror.Init";
      } };
      var defaults = {};
      var optionHandlers = {};
      function defineOptions(CodeMirror2) {
        var optionHandlers2 = CodeMirror2.optionHandlers;
        function option(name, deflt, handle, notOnInit) {
          CodeMirror2.defaults[name] = deflt;
          if (handle) {
            optionHandlers2[name] = notOnInit ? function(cm, val, old) {
              if (old != Init) {
                handle(cm, val, old);
              }
            } : handle;
          }
        }
        CodeMirror2.defineOption = option;
        CodeMirror2.Init = Init;
        option("value", "", function(cm, val) {
          return cm.setValue(val);
        }, true);
        option("mode", null, function(cm, val) {
          cm.doc.modeOption = val;
          loadMode(cm);
        }, true);
        option("indentUnit", 2, loadMode, true);
        option("indentWithTabs", false);
        option("smartIndent", true);
        option("tabSize", 4, function(cm) {
          resetModeState(cm);
          clearCaches(cm);
          regChange(cm);
        }, true);
        option("lineSeparator", null, function(cm, val) {
          cm.doc.lineSep = val;
          if (!val) {
            return;
          }
          var newBreaks = [], lineNo2 = cm.doc.first;
          cm.doc.iter(function(line) {
            for (var pos = 0; ; ) {
              var found = line.text.indexOf(val, pos);
              if (found == -1) {
                break;
              }
              pos = found + val.length;
              newBreaks.push(Pos(lineNo2, found));
            }
            lineNo2++;
          });
          for (var i2 = newBreaks.length - 1; i2 >= 0; i2--) {
            replaceRange(cm.doc, val, newBreaks[i2], Pos(newBreaks[i2].line, newBreaks[i2].ch + val.length));
          }
        });
        option("specialChars", /[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\u202d\u202e\u2066\u2067\u2069\ufeff\ufff9-\ufffc]/g, function(cm, val, old) {
          cm.state.specialChars = new RegExp(val.source + (val.test("	") ? "" : "|	"), "g");
          if (old != Init) {
            cm.refresh();
          }
        });
        option("specialCharPlaceholder", defaultSpecialCharPlaceholder, function(cm) {
          return cm.refresh();
        }, true);
        option("electricChars", true);
        option("inputStyle", mobile ? "contenteditable" : "textarea", function() {
          throw new Error("inputStyle can not (yet) be changed in a running editor");
        }, true);
        option("spellcheck", false, function(cm, val) {
          return cm.getInputField().spellcheck = val;
        }, true);
        option("autocorrect", false, function(cm, val) {
          return cm.getInputField().autocorrect = val;
        }, true);
        option("autocapitalize", false, function(cm, val) {
          return cm.getInputField().autocapitalize = val;
        }, true);
        option("rtlMoveVisually", !windows);
        option("wholeLineUpdateBefore", true);
        option("theme", "default", function(cm) {
          themeChanged(cm);
          updateGutters(cm);
        }, true);
        option("keyMap", "default", function(cm, val, old) {
          var next = getKeyMap(val);
          var prev = old != Init && getKeyMap(old);
          if (prev && prev.detach) {
            prev.detach(cm, next);
          }
          if (next.attach) {
            next.attach(cm, prev || null);
          }
        });
        option("extraKeys", null);
        option("configureMouse", null);
        option("lineWrapping", false, wrappingChanged, true);
        option("gutters", [], function(cm, val) {
          cm.display.gutterSpecs = getGutters(val, cm.options.lineNumbers);
          updateGutters(cm);
        }, true);
        option("fixedGutter", true, function(cm, val) {
          cm.display.gutters.style.left = val ? compensateForHScroll(cm.display) + "px" : "0";
          cm.refresh();
        }, true);
        option("coverGutterNextToScrollbar", false, function(cm) {
          return updateScrollbars(cm);
        }, true);
        option("scrollbarStyle", "native", function(cm) {
          initScrollbars(cm);
          updateScrollbars(cm);
          cm.display.scrollbars.setScrollTop(cm.doc.scrollTop);
          cm.display.scrollbars.setScrollLeft(cm.doc.scrollLeft);
        }, true);
        option("lineNumbers", false, function(cm, val) {
          cm.display.gutterSpecs = getGutters(cm.options.gutters, val);
          updateGutters(cm);
        }, true);
        option("firstLineNumber", 1, updateGutters, true);
        option("lineNumberFormatter", function(integer) {
          return integer;
        }, updateGutters, true);
        option("showCursorWhenSelecting", false, updateSelection, true);
        option("resetSelectionOnContextMenu", true);
        option("lineWiseCopyCut", true);
        option("pasteLinesPerSelection", true);
        option("selectionsMayTouch", false);
        option("readOnly", false, function(cm, val) {
          if (val == "nocursor") {
            onBlur(cm);
            cm.display.input.blur();
          }
          cm.display.input.readOnlyChanged(val);
        });
        option("screenReaderLabel", null, function(cm, val) {
          val = val === "" ? null : val;
          cm.display.input.screenReaderLabelChanged(val);
        });
        option("disableInput", false, function(cm, val) {
          if (!val) {
            cm.display.input.reset();
          }
        }, true);
        option("dragDrop", true, dragDropChanged);
        option("allowDropFileTypes", null);
        option("cursorBlinkRate", 530);
        option("cursorScrollMargin", 0);
        option("cursorHeight", 1, updateSelection, true);
        option("singleCursorHeightPerLine", true, updateSelection, true);
        option("workTime", 100);
        option("workDelay", 100);
        option("flattenSpans", true, resetModeState, true);
        option("addModeClass", false, resetModeState, true);
        option("pollInterval", 100);
        option("undoDepth", 200, function(cm, val) {
          return cm.doc.history.undoDepth = val;
        });
        option("historyEventDelay", 1250);
        option("viewportMargin", 10, function(cm) {
          return cm.refresh();
        }, true);
        option("maxHighlightLength", 1e4, resetModeState, true);
        option("moveInputWithCursor", true, function(cm, val) {
          if (!val) {
            cm.display.input.resetPosition();
          }
        });
        option("tabindex", null, function(cm, val) {
          return cm.display.input.getField().tabIndex = val || "";
        });
        option("autofocus", null);
        option("direction", "ltr", function(cm, val) {
          return cm.doc.setDirection(val);
        }, true);
        option("phrases", null);
      }
      function dragDropChanged(cm, value, old) {
        var wasOn = old && old != Init;
        if (!value != !wasOn) {
          var funcs = cm.display.dragFunctions;
          var toggle = value ? on : off;
          toggle(cm.display.scroller, "dragstart", funcs.start);
          toggle(cm.display.scroller, "dragenter", funcs.enter);
          toggle(cm.display.scroller, "dragover", funcs.over);
          toggle(cm.display.scroller, "dragleave", funcs.leave);
          toggle(cm.display.scroller, "drop", funcs.drop);
        }
      }
      function wrappingChanged(cm) {
        if (cm.options.lineWrapping) {
          addClass(cm.display.wrapper, "CodeMirror-wrap");
          cm.display.sizer.style.minWidth = "";
          cm.display.sizerWidth = null;
        } else {
          rmClass(cm.display.wrapper, "CodeMirror-wrap");
          findMaxLine(cm);
        }
        estimateLineHeights(cm);
        regChange(cm);
        clearCaches(cm);
        setTimeout(function() {
          return updateScrollbars(cm);
        }, 100);
      }
      function CodeMirror(place, options) {
        var this$1$1 = this;
        if (!(this instanceof CodeMirror)) {
          return new CodeMirror(place, options);
        }
        this.options = options = options ? copyObj(options) : {};
        copyObj(defaults, options, false);
        var doc2 = options.value;
        if (typeof doc2 == "string") {
          doc2 = new Doc(doc2, options.mode, null, options.lineSeparator, options.direction);
        } else if (options.mode) {
          doc2.modeOption = options.mode;
        }
        this.doc = doc2;
        var input = new CodeMirror.inputStyles[options.inputStyle](this);
        var display = this.display = new Display(place, doc2, input, options);
        display.wrapper.CodeMirror = this;
        themeChanged(this);
        if (options.lineWrapping) {
          this.display.wrapper.className += " CodeMirror-wrap";
        }
        initScrollbars(this);
        this.state = {
          keyMaps: [],
          // stores maps added by addKeyMap
          overlays: [],
          // highlighting overlays, as added by addOverlay
          modeGen: 0,
          // bumped when mode/overlay changes, used to invalidate highlighting info
          overwrite: false,
          delayingBlurEvent: false,
          focused: false,
          suppressEdits: false,
          // used to disable editing during key handlers when in readOnly mode
          pasteIncoming: -1,
          cutIncoming: -1,
          // help recognize paste/cut edits in input.poll
          selectingText: false,
          draggingText: false,
          highlight: new Delayed(),
          // stores highlight worker timeout
          keySeq: null,
          // Unfinished key sequence
          specialChars: null
        };
        if (options.autofocus && !mobile) {
          display.input.focus();
        }
        if (ie && ie_version < 11) {
          setTimeout(function() {
            return this$1$1.display.input.reset(true);
          }, 20);
        }
        registerEventHandlers(this);
        ensureGlobalHandlers();
        startOperation(this);
        this.curOp.forceUpdate = true;
        attachDoc(this, doc2);
        if (options.autofocus && !mobile || this.hasFocus()) {
          setTimeout(function() {
            if (this$1$1.hasFocus() && !this$1$1.state.focused) {
              onFocus(this$1$1);
            }
          }, 20);
        } else {
          onBlur(this);
        }
        for (var opt in optionHandlers) {
          if (optionHandlers.hasOwnProperty(opt)) {
            optionHandlers[opt](this, options[opt], Init);
          }
        }
        maybeUpdateLineNumberWidth(this);
        if (options.finishInit) {
          options.finishInit(this);
        }
        for (var i2 = 0; i2 < initHooks.length; ++i2) {
          initHooks[i2](this);
        }
        endOperation(this);
        if (webkit && options.lineWrapping && getComputedStyle(display.lineDiv).textRendering == "optimizelegibility") {
          display.lineDiv.style.textRendering = "auto";
        }
      }
      CodeMirror.defaults = defaults;
      CodeMirror.optionHandlers = optionHandlers;
      function registerEventHandlers(cm) {
        var d = cm.display;
        on(d.scroller, "mousedown", operation(cm, onMouseDown));
        if (ie && ie_version < 11) {
          on(d.scroller, "dblclick", operation(cm, function(e) {
            if (signalDOMEvent(cm, e)) {
              return;
            }
            var pos = posFromMouse(cm, e);
            if (!pos || clickInGutter(cm, e) || eventInWidget(cm.display, e)) {
              return;
            }
            e_preventDefault(e);
            var word = cm.findWordAt(pos);
            extendSelection(cm.doc, word.anchor, word.head);
          }));
        } else {
          on(d.scroller, "dblclick", function(e) {
            return signalDOMEvent(cm, e) || e_preventDefault(e);
          });
        }
        on(d.scroller, "contextmenu", function(e) {
          return onContextMenu(cm, e);
        });
        on(d.input.getField(), "contextmenu", function(e) {
          if (!d.scroller.contains(e.target)) {
            onContextMenu(cm, e);
          }
        });
        var touchFinished, prevTouch = { end: 0 };
        function finishTouch() {
          if (d.activeTouch) {
            touchFinished = setTimeout(function() {
              return d.activeTouch = null;
            }, 1e3);
            prevTouch = d.activeTouch;
            prevTouch.end = +/* @__PURE__ */ new Date();
          }
        }
        function isMouseLikeTouchEvent(e) {
          if (e.touches.length != 1) {
            return false;
          }
          var touch = e.touches[0];
          return touch.radiusX <= 1 && touch.radiusY <= 1;
        }
        function farAway(touch, other) {
          if (other.left == null) {
            return true;
          }
          var dx = other.left - touch.left, dy = other.top - touch.top;
          return dx * dx + dy * dy > 20 * 20;
        }
        on(d.scroller, "touchstart", function(e) {
          if (!signalDOMEvent(cm, e) && !isMouseLikeTouchEvent(e) && !clickInGutter(cm, e)) {
            d.input.ensurePolled();
            clearTimeout(touchFinished);
            var now = +/* @__PURE__ */ new Date();
            d.activeTouch = {
              start: now,
              moved: false,
              prev: now - prevTouch.end <= 300 ? prevTouch : null
            };
            if (e.touches.length == 1) {
              d.activeTouch.left = e.touches[0].pageX;
              d.activeTouch.top = e.touches[0].pageY;
            }
          }
        });
        on(d.scroller, "touchmove", function() {
          if (d.activeTouch) {
            d.activeTouch.moved = true;
          }
        });
        on(d.scroller, "touchend", function(e) {
          var touch = d.activeTouch;
          if (touch && !eventInWidget(d, e) && touch.left != null && !touch.moved && /* @__PURE__ */ new Date() - touch.start < 300) {
            var pos = cm.coordsChar(d.activeTouch, "page"), range2;
            if (!touch.prev || farAway(touch, touch.prev)) {
              range2 = new Range(pos, pos);
            } else if (!touch.prev.prev || farAway(touch, touch.prev.prev)) {
              range2 = cm.findWordAt(pos);
            } else {
              range2 = new Range(Pos(pos.line, 0), clipPos(cm.doc, Pos(pos.line + 1, 0)));
            }
            cm.setSelection(range2.anchor, range2.head);
            cm.focus();
            e_preventDefault(e);
          }
          finishTouch();
        });
        on(d.scroller, "touchcancel", finishTouch);
        on(d.scroller, "scroll", function() {
          if (d.scroller.clientHeight) {
            updateScrollTop(cm, d.scroller.scrollTop);
            setScrollLeft(cm, d.scroller.scrollLeft, true);
            signal(cm, "scroll", cm);
          }
        });
        on(d.scroller, "mousewheel", function(e) {
          return onScrollWheel(cm, e);
        });
        on(d.scroller, "DOMMouseScroll", function(e) {
          return onScrollWheel(cm, e);
        });
        on(d.wrapper, "scroll", function() {
          return d.wrapper.scrollTop = d.wrapper.scrollLeft = 0;
        });
        d.dragFunctions = {
          enter: function(e) {
            if (!signalDOMEvent(cm, e)) {
              e_stop(e);
            }
          },
          over: function(e) {
            if (!signalDOMEvent(cm, e)) {
              onDragOver(cm, e);
              e_stop(e);
            }
          },
          start: function(e) {
            return onDragStart(cm, e);
          },
          drop: operation(cm, onDrop),
          leave: function(e) {
            if (!signalDOMEvent(cm, e)) {
              clearDragCursor(cm);
            }
          }
        };
        var inp = d.input.getField();
        on(inp, "keyup", function(e) {
          return onKeyUp.call(cm, e);
        });
        on(inp, "keydown", operation(cm, onKeyDown));
        on(inp, "keypress", operation(cm, onKeyPress));
        on(inp, "focus", function(e) {
          return onFocus(cm, e);
        });
        on(inp, "blur", function(e) {
          return onBlur(cm, e);
        });
      }
      var initHooks = [];
      CodeMirror.defineInitHook = function(f) {
        return initHooks.push(f);
      };
      function indentLine(cm, n, how, aggressive) {
        var doc2 = cm.doc, state;
        if (how == null) {
          how = "add";
        }
        if (how == "smart") {
          if (!doc2.mode.indent) {
            how = "prev";
          } else {
            state = getContextBefore(cm, n).state;
          }
        }
        var tabSize = cm.options.tabSize;
        var line = getLine(doc2, n), curSpace = countColumn(line.text, null, tabSize);
        if (line.stateAfter) {
          line.stateAfter = null;
        }
        var curSpaceString = line.text.match(/^\s*/)[0], indentation;
        if (!aggressive && !/\S/.test(line.text)) {
          indentation = 0;
          how = "not";
        } else if (how == "smart") {
          indentation = doc2.mode.indent(state, line.text.slice(curSpaceString.length), line.text);
          if (indentation == Pass || indentation > 150) {
            if (!aggressive) {
              return;
            }
            how = "prev";
          }
        }
        if (how == "prev") {
          if (n > doc2.first) {
            indentation = countColumn(getLine(doc2, n - 1).text, null, tabSize);
          } else {
            indentation = 0;
          }
        } else if (how == "add") {
          indentation = curSpace + cm.options.indentUnit;
        } else if (how == "subtract") {
          indentation = curSpace - cm.options.indentUnit;
        } else if (typeof how == "number") {
          indentation = curSpace + how;
        }
        indentation = Math.max(0, indentation);
        var indentString = "", pos = 0;
        if (cm.options.indentWithTabs) {
          for (var i2 = Math.floor(indentation / tabSize); i2; --i2) {
            pos += tabSize;
            indentString += "	";
          }
        }
        if (pos < indentation) {
          indentString += spaceStr(indentation - pos);
        }
        if (indentString != curSpaceString) {
          replaceRange(doc2, indentString, Pos(n, 0), Pos(n, curSpaceString.length), "+input");
          line.stateAfter = null;
          return true;
        } else {
          for (var i$12 = 0; i$12 < doc2.sel.ranges.length; i$12++) {
            var range2 = doc2.sel.ranges[i$12];
            if (range2.head.line == n && range2.head.ch < curSpaceString.length) {
              var pos$1 = Pos(n, curSpaceString.length);
              replaceOneSelection(doc2, i$12, new Range(pos$1, pos$1));
              break;
            }
          }
        }
      }
      var lastCopied = null;
      function setLastCopied(newLastCopied) {
        lastCopied = newLastCopied;
      }
      function applyTextInput(cm, inserted, deleted, sel, origin) {
        var doc2 = cm.doc;
        cm.display.shift = false;
        if (!sel) {
          sel = doc2.sel;
        }
        var recent = +/* @__PURE__ */ new Date() - 200;
        var paste = origin == "paste" || cm.state.pasteIncoming > recent;
        var textLines = splitLinesAuto(inserted), multiPaste = null;
        if (paste && sel.ranges.length > 1) {
          if (lastCopied && lastCopied.text.join("\n") == inserted) {
            if (sel.ranges.length % lastCopied.text.length == 0) {
              multiPaste = [];
              for (var i2 = 0; i2 < lastCopied.text.length; i2++) {
                multiPaste.push(doc2.splitLines(lastCopied.text[i2]));
              }
            }
          } else if (textLines.length == sel.ranges.length && cm.options.pasteLinesPerSelection) {
            multiPaste = map(textLines, function(l) {
              return [l];
            });
          }
        }
        var updateInput = cm.curOp.updateInput;
        for (var i$12 = sel.ranges.length - 1; i$12 >= 0; i$12--) {
          var range2 = sel.ranges[i$12];
          var from = range2.from(), to = range2.to();
          if (range2.empty()) {
            if (deleted && deleted > 0) {
              from = Pos(from.line, from.ch - deleted);
            } else if (cm.state.overwrite && !paste) {
              to = Pos(to.line, Math.min(getLine(doc2, to.line).text.length, to.ch + lst(textLines).length));
            } else if (paste && lastCopied && lastCopied.lineWise && lastCopied.text.join("\n") == textLines.join("\n")) {
              from = to = Pos(from.line, 0);
            }
          }
          var changeEvent = {
            from,
            to,
            text: multiPaste ? multiPaste[i$12 % multiPaste.length] : textLines,
            origin: origin || (paste ? "paste" : cm.state.cutIncoming > recent ? "cut" : "+input")
          };
          makeChange(cm.doc, changeEvent);
          signalLater(cm, "inputRead", cm, changeEvent);
        }
        if (inserted && !paste) {
          triggerElectric(cm, inserted);
        }
        ensureCursorVisible(cm);
        if (cm.curOp.updateInput < 2) {
          cm.curOp.updateInput = updateInput;
        }
        cm.curOp.typing = true;
        cm.state.pasteIncoming = cm.state.cutIncoming = -1;
      }
      function handlePaste(e, cm) {
        var pasted = e.clipboardData && e.clipboardData.getData("Text");
        if (pasted) {
          e.preventDefault();
          if (!cm.isReadOnly() && !cm.options.disableInput && cm.hasFocus()) {
            runInOp(cm, function() {
              return applyTextInput(cm, pasted, 0, null, "paste");
            });
          }
          return true;
        }
      }
      function triggerElectric(cm, inserted) {
        if (!cm.options.electricChars || !cm.options.smartIndent) {
          return;
        }
        var sel = cm.doc.sel;
        for (var i2 = sel.ranges.length - 1; i2 >= 0; i2--) {
          var range2 = sel.ranges[i2];
          if (range2.head.ch > 100 || i2 && sel.ranges[i2 - 1].head.line == range2.head.line) {
            continue;
          }
          var mode = cm.getModeAt(range2.head);
          var indented = false;
          if (mode.electricChars) {
            for (var j = 0; j < mode.electricChars.length; j++) {
              if (inserted.indexOf(mode.electricChars.charAt(j)) > -1) {
                indented = indentLine(cm, range2.head.line, "smart");
                break;
              }
            }
          } else if (mode.electricInput) {
            if (mode.electricInput.test(getLine(cm.doc, range2.head.line).text.slice(0, range2.head.ch))) {
              indented = indentLine(cm, range2.head.line, "smart");
            }
          }
          if (indented) {
            signalLater(cm, "electricInput", cm, range2.head.line);
          }
        }
      }
      function copyableRanges(cm) {
        var text = [], ranges = [];
        for (var i2 = 0; i2 < cm.doc.sel.ranges.length; i2++) {
          var line = cm.doc.sel.ranges[i2].head.line;
          var lineRange = { anchor: Pos(line, 0), head: Pos(line + 1, 0) };
          ranges.push(lineRange);
          text.push(cm.getRange(lineRange.anchor, lineRange.head));
        }
        return { text, ranges };
      }
      function disableBrowserMagic(field, spellcheck, autocorrect, autocapitalize) {
        field.setAttribute("autocorrect", autocorrect ? "on" : "off");
        field.setAttribute("autocapitalize", autocapitalize ? "on" : "off");
        field.setAttribute("spellcheck", !!spellcheck);
      }
      function hiddenTextarea() {
        var te = elt("textarea", null, null, "position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none");
        var div = elt("div", [te], null, "overflow: hidden; position: relative; width: 3px; height: 0px;");
        if (webkit) {
          te.style.width = "1000px";
        } else {
          te.setAttribute("wrap", "off");
        }
        if (ios) {
          te.style.border = "1px solid black";
        }
        return div;
      }
      function addEditorMethods(CodeMirror2) {
        var optionHandlers2 = CodeMirror2.optionHandlers;
        var helpers = CodeMirror2.helpers = {};
        CodeMirror2.prototype = {
          constructor: CodeMirror2,
          focus: function() {
            win(this).focus();
            this.display.input.focus();
          },
          setOption: function(option, value) {
            var options = this.options, old = options[option];
            if (options[option] == value && option != "mode") {
              return;
            }
            options[option] = value;
            if (optionHandlers2.hasOwnProperty(option)) {
              operation(this, optionHandlers2[option])(this, value, old);
            }
            signal(this, "optionChange", this, option);
          },
          getOption: function(option) {
            return this.options[option];
          },
          getDoc: function() {
            return this.doc;
          },
          addKeyMap: function(map2, bottom) {
            this.state.keyMaps[bottom ? "push" : "unshift"](getKeyMap(map2));
          },
          removeKeyMap: function(map2) {
            var maps = this.state.keyMaps;
            for (var i2 = 0; i2 < maps.length; ++i2) {
              if (maps[i2] == map2 || maps[i2].name == map2) {
                maps.splice(i2, 1);
                return true;
              }
            }
          },
          addOverlay: methodOp(function(spec, options) {
            var mode = spec.token ? spec : CodeMirror2.getMode(this.options, spec);
            if (mode.startState) {
              throw new Error("Overlays may not be stateful.");
            }
            insertSorted(
              this.state.overlays,
              {
                mode,
                modeSpec: spec,
                opaque: options && options.opaque,
                priority: options && options.priority || 0
              },
              function(overlay) {
                return overlay.priority;
              }
            );
            this.state.modeGen++;
            regChange(this);
          }),
          removeOverlay: methodOp(function(spec) {
            var overlays = this.state.overlays;
            for (var i2 = 0; i2 < overlays.length; ++i2) {
              var cur = overlays[i2].modeSpec;
              if (cur == spec || typeof spec == "string" && cur.name == spec) {
                overlays.splice(i2, 1);
                this.state.modeGen++;
                regChange(this);
                return;
              }
            }
          }),
          indentLine: methodOp(function(n, dir, aggressive) {
            if (typeof dir != "string" && typeof dir != "number") {
              if (dir == null) {
                dir = this.options.smartIndent ? "smart" : "prev";
              } else {
                dir = dir ? "add" : "subtract";
              }
            }
            if (isLine(this.doc, n)) {
              indentLine(this, n, dir, aggressive);
            }
          }),
          indentSelection: methodOp(function(how) {
            var ranges = this.doc.sel.ranges, end = -1;
            for (var i2 = 0; i2 < ranges.length; i2++) {
              var range2 = ranges[i2];
              if (!range2.empty()) {
                var from = range2.from(), to = range2.to();
                var start = Math.max(end, from.line);
                end = Math.min(this.lastLine(), to.line - (to.ch ? 0 : 1)) + 1;
                for (var j = start; j < end; ++j) {
                  indentLine(this, j, how);
                }
                var newRanges = this.doc.sel.ranges;
                if (from.ch == 0 && ranges.length == newRanges.length && newRanges[i2].from().ch > 0) {
                  replaceOneSelection(this.doc, i2, new Range(from, newRanges[i2].to()), sel_dontScroll);
                }
              } else if (range2.head.line > end) {
                indentLine(this, range2.head.line, how, true);
                end = range2.head.line;
                if (i2 == this.doc.sel.primIndex) {
                  ensureCursorVisible(this);
                }
              }
            }
          }),
          // Fetch the parser token for a given character. Useful for hacks
          // that want to inspect the mode state (say, for completion).
          getTokenAt: function(pos, precise) {
            return takeToken(this, pos, precise);
          },
          getLineTokens: function(line, precise) {
            return takeToken(this, Pos(line), precise, true);
          },
          getTokenTypeAt: function(pos) {
            pos = clipPos(this.doc, pos);
            var styles = getLineStyles(this, getLine(this.doc, pos.line));
            var before = 0, after = (styles.length - 1) / 2, ch = pos.ch;
            var type;
            if (ch == 0) {
              type = styles[2];
            } else {
              for (; ; ) {
                var mid = before + after >> 1;
                if ((mid ? styles[mid * 2 - 1] : 0) >= ch) {
                  after = mid;
                } else if (styles[mid * 2 + 1] < ch) {
                  before = mid + 1;
                } else {
                  type = styles[mid * 2 + 2];
                  break;
                }
              }
            }
            var cut = type ? type.indexOf("overlay ") : -1;
            return cut < 0 ? type : cut == 0 ? null : type.slice(0, cut - 1);
          },
          getModeAt: function(pos) {
            var mode = this.doc.mode;
            if (!mode.innerMode) {
              return mode;
            }
            return CodeMirror2.innerMode(mode, this.getTokenAt(pos).state).mode;
          },
          getHelper: function(pos, type) {
            return this.getHelpers(pos, type)[0];
          },
          getHelpers: function(pos, type) {
            var found = [];
            if (!helpers.hasOwnProperty(type)) {
              return found;
            }
            var help = helpers[type], mode = this.getModeAt(pos);
            if (typeof mode[type] == "string") {
              if (help[mode[type]]) {
                found.push(help[mode[type]]);
              }
            } else if (mode[type]) {
              for (var i2 = 0; i2 < mode[type].length; i2++) {
                var val = help[mode[type][i2]];
                if (val) {
                  found.push(val);
                }
              }
            } else if (mode.helperType && help[mode.helperType]) {
              found.push(help[mode.helperType]);
            } else if (help[mode.name]) {
              found.push(help[mode.name]);
            }
            for (var i$12 = 0; i$12 < help._global.length; i$12++) {
              var cur = help._global[i$12];
              if (cur.pred(mode, this) && indexOf(found, cur.val) == -1) {
                found.push(cur.val);
              }
            }
            return found;
          },
          getStateAfter: function(line, precise) {
            var doc2 = this.doc;
            line = clipLine(doc2, line == null ? doc2.first + doc2.size - 1 : line);
            return getContextBefore(this, line + 1, precise).state;
          },
          cursorCoords: function(start, mode) {
            var pos, range2 = this.doc.sel.primary();
            if (start == null) {
              pos = range2.head;
            } else if (typeof start == "object") {
              pos = clipPos(this.doc, start);
            } else {
              pos = start ? range2.from() : range2.to();
            }
            return cursorCoords(this, pos, mode || "page");
          },
          charCoords: function(pos, mode) {
            return charCoords(this, clipPos(this.doc, pos), mode || "page");
          },
          coordsChar: function(coords, mode) {
            coords = fromCoordSystem(this, coords, mode || "page");
            return coordsChar(this, coords.left, coords.top);
          },
          lineAtHeight: function(height, mode) {
            height = fromCoordSystem(this, { top: height, left: 0 }, mode || "page").top;
            return lineAtHeight(this.doc, height + this.display.viewOffset);
          },
          heightAtLine: function(line, mode, includeWidgets) {
            var end = false, lineObj;
            if (typeof line == "number") {
              var last = this.doc.first + this.doc.size - 1;
              if (line < this.doc.first) {
                line = this.doc.first;
              } else if (line > last) {
                line = last;
                end = true;
              }
              lineObj = getLine(this.doc, line);
            } else {
              lineObj = line;
            }
            return intoCoordSystem(this, lineObj, { top: 0, left: 0 }, mode || "page", includeWidgets || end).top + (end ? this.doc.height - heightAtLine(lineObj) : 0);
          },
          defaultTextHeight: function() {
            return textHeight(this.display);
          },
          defaultCharWidth: function() {
            return charWidth(this.display);
          },
          getViewport: function() {
            return { from: this.display.viewFrom, to: this.display.viewTo };
          },
          addWidget: function(pos, node, scroll, vert, horiz) {
            var display = this.display;
            pos = cursorCoords(this, clipPos(this.doc, pos));
            var top = pos.bottom, left = pos.left;
            node.style.position = "absolute";
            node.setAttribute("cm-ignore-events", "true");
            this.display.input.setUneditable(node);
            display.sizer.appendChild(node);
            if (vert == "over") {
              top = pos.top;
            } else if (vert == "above" || vert == "near") {
              var vspace = Math.max(display.wrapper.clientHeight, this.doc.height), hspace = Math.max(display.sizer.clientWidth, display.lineSpace.clientWidth);
              if ((vert == "above" || pos.bottom + node.offsetHeight > vspace) && pos.top > node.offsetHeight) {
                top = pos.top - node.offsetHeight;
              } else if (pos.bottom + node.offsetHeight <= vspace) {
                top = pos.bottom;
              }
              if (left + node.offsetWidth > hspace) {
                left = hspace - node.offsetWidth;
              }
            }
            node.style.top = top + "px";
            node.style.left = node.style.right = "";
            if (horiz == "right") {
              left = display.sizer.clientWidth - node.offsetWidth;
              node.style.right = "0px";
            } else {
              if (horiz == "left") {
                left = 0;
              } else if (horiz == "middle") {
                left = (display.sizer.clientWidth - node.offsetWidth) / 2;
              }
              node.style.left = left + "px";
            }
            if (scroll) {
              scrollIntoView(this, { left, top, right: left + node.offsetWidth, bottom: top + node.offsetHeight });
            }
          },
          triggerOnKeyDown: methodOp(onKeyDown),
          triggerOnKeyPress: methodOp(onKeyPress),
          triggerOnKeyUp: onKeyUp,
          triggerOnMouseDown: methodOp(onMouseDown),
          execCommand: function(cmd) {
            if (commands.hasOwnProperty(cmd)) {
              return commands[cmd].call(null, this);
            }
          },
          triggerElectric: methodOp(function(text) {
            triggerElectric(this, text);
          }),
          findPosH: function(from, amount, unit, visually) {
            var dir = 1;
            if (amount < 0) {
              dir = -1;
              amount = -amount;
            }
            var cur = clipPos(this.doc, from);
            for (var i2 = 0; i2 < amount; ++i2) {
              cur = findPosH(this.doc, cur, dir, unit, visually);
              if (cur.hitSide) {
                break;
              }
            }
            return cur;
          },
          moveH: methodOp(function(dir, unit) {
            var this$1$1 = this;
            this.extendSelectionsBy(function(range2) {
              if (this$1$1.display.shift || this$1$1.doc.extend || range2.empty()) {
                return findPosH(this$1$1.doc, range2.head, dir, unit, this$1$1.options.rtlMoveVisually);
              } else {
                return dir < 0 ? range2.from() : range2.to();
              }
            }, sel_move);
          }),
          deleteH: methodOp(function(dir, unit) {
            var sel = this.doc.sel, doc2 = this.doc;
            if (sel.somethingSelected()) {
              doc2.replaceSelection("", null, "+delete");
            } else {
              deleteNearSelection(this, function(range2) {
                var other = findPosH(doc2, range2.head, dir, unit, false);
                return dir < 0 ? { from: other, to: range2.head } : { from: range2.head, to: other };
              });
            }
          }),
          findPosV: function(from, amount, unit, goalColumn) {
            var dir = 1, x = goalColumn;
            if (amount < 0) {
              dir = -1;
              amount = -amount;
            }
            var cur = clipPos(this.doc, from);
            for (var i2 = 0; i2 < amount; ++i2) {
              var coords = cursorCoords(this, cur, "div");
              if (x == null) {
                x = coords.left;
              } else {
                coords.left = x;
              }
              cur = findPosV(this, coords, dir, unit);
              if (cur.hitSide) {
                break;
              }
            }
            return cur;
          },
          moveV: methodOp(function(dir, unit) {
            var this$1$1 = this;
            var doc2 = this.doc, goals = [];
            var collapse = !this.display.shift && !doc2.extend && doc2.sel.somethingSelected();
            doc2.extendSelectionsBy(function(range2) {
              if (collapse) {
                return dir < 0 ? range2.from() : range2.to();
              }
              var headPos = cursorCoords(this$1$1, range2.head, "div");
              if (range2.goalColumn != null) {
                headPos.left = range2.goalColumn;
              }
              goals.push(headPos.left);
              var pos = findPosV(this$1$1, headPos, dir, unit);
              if (unit == "page" && range2 == doc2.sel.primary()) {
                addToScrollTop(this$1$1, charCoords(this$1$1, pos, "div").top - headPos.top);
              }
              return pos;
            }, sel_move);
            if (goals.length) {
              for (var i2 = 0; i2 < doc2.sel.ranges.length; i2++) {
                doc2.sel.ranges[i2].goalColumn = goals[i2];
              }
            }
          }),
          // Find the word at the given position (as returned by coordsChar).
          findWordAt: function(pos) {
            var doc2 = this.doc, line = getLine(doc2, pos.line).text;
            var start = pos.ch, end = pos.ch;
            if (line) {
              var helper = this.getHelper(pos, "wordChars");
              if ((pos.sticky == "before" || end == line.length) && start) {
                --start;
              } else {
                ++end;
              }
              var startChar = line.charAt(start);
              var check = isWordChar(startChar, helper) ? function(ch) {
                return isWordChar(ch, helper);
              } : /\s/.test(startChar) ? function(ch) {
                return /\s/.test(ch);
              } : function(ch) {
                return !/\s/.test(ch) && !isWordChar(ch);
              };
              while (start > 0 && check(line.charAt(start - 1))) {
                --start;
              }
              while (end < line.length && check(line.charAt(end))) {
                ++end;
              }
            }
            return new Range(Pos(pos.line, start), Pos(pos.line, end));
          },
          toggleOverwrite: function(value) {
            if (value != null && value == this.state.overwrite) {
              return;
            }
            if (this.state.overwrite = !this.state.overwrite) {
              addClass(this.display.cursorDiv, "CodeMirror-overwrite");
            } else {
              rmClass(this.display.cursorDiv, "CodeMirror-overwrite");
            }
            signal(this, "overwriteToggle", this, this.state.overwrite);
          },
          hasFocus: function() {
            return this.display.input.getField() == activeElt(root(this));
          },
          isReadOnly: function() {
            return !!(this.options.readOnly || this.doc.cantEdit);
          },
          scrollTo: methodOp(function(x, y) {
            scrollToCoords(this, x, y);
          }),
          getScrollInfo: function() {
            var scroller = this.display.scroller;
            return {
              left: scroller.scrollLeft,
              top: scroller.scrollTop,
              height: scroller.scrollHeight - scrollGap(this) - this.display.barHeight,
              width: scroller.scrollWidth - scrollGap(this) - this.display.barWidth,
              clientHeight: displayHeight(this),
              clientWidth: displayWidth(this)
            };
          },
          scrollIntoView: methodOp(function(range2, margin) {
            if (range2 == null) {
              range2 = { from: this.doc.sel.primary().head, to: null };
              if (margin == null) {
                margin = this.options.cursorScrollMargin;
              }
            } else if (typeof range2 == "number") {
              range2 = { from: Pos(range2, 0), to: null };
            } else if (range2.from == null) {
              range2 = { from: range2, to: null };
            }
            if (!range2.to) {
              range2.to = range2.from;
            }
            range2.margin = margin || 0;
            if (range2.from.line != null) {
              scrollToRange(this, range2);
            } else {
              scrollToCoordsRange(this, range2.from, range2.to, range2.margin);
            }
          }),
          setSize: methodOp(function(width, height) {
            var this$1$1 = this;
            var interpret = function(val) {
              return typeof val == "number" || /^\d+$/.test(String(val)) ? val + "px" : val;
            };
            if (width != null) {
              this.display.wrapper.style.width = interpret(width);
            }
            if (height != null) {
              this.display.wrapper.style.height = interpret(height);
            }
            if (this.options.lineWrapping) {
              clearLineMeasurementCache(this);
            }
            var lineNo2 = this.display.viewFrom;
            this.doc.iter(lineNo2, this.display.viewTo, function(line) {
              if (line.widgets) {
                for (var i2 = 0; i2 < line.widgets.length; i2++) {
                  if (line.widgets[i2].noHScroll) {
                    regLineChange(this$1$1, lineNo2, "widget");
                    break;
                  }
                }
              }
              ++lineNo2;
            });
            this.curOp.forceUpdate = true;
            signal(this, "refresh", this);
          }),
          operation: function(f) {
            return runInOp(this, f);
          },
          startOperation: function() {
            return startOperation(this);
          },
          endOperation: function() {
            return endOperation(this);
          },
          refresh: methodOp(function() {
            var oldHeight = this.display.cachedTextHeight;
            regChange(this);
            this.curOp.forceUpdate = true;
            clearCaches(this);
            scrollToCoords(this, this.doc.scrollLeft, this.doc.scrollTop);
            updateGutterSpace(this.display);
            if (oldHeight == null || Math.abs(oldHeight - textHeight(this.display)) > 0.5 || this.options.lineWrapping) {
              estimateLineHeights(this);
            }
            signal(this, "refresh", this);
          }),
          swapDoc: methodOp(function(doc2) {
            var old = this.doc;
            old.cm = null;
            if (this.state.selectingText) {
              this.state.selectingText();
            }
            attachDoc(this, doc2);
            clearCaches(this);
            this.display.input.reset();
            scrollToCoords(this, doc2.scrollLeft, doc2.scrollTop);
            this.curOp.forceScroll = true;
            signalLater(this, "swapDoc", this, old);
            return old;
          }),
          phrase: function(phraseText) {
            var phrases = this.options.phrases;
            return phrases && Object.prototype.hasOwnProperty.call(phrases, phraseText) ? phrases[phraseText] : phraseText;
          },
          getInputField: function() {
            return this.display.input.getField();
          },
          getWrapperElement: function() {
            return this.display.wrapper;
          },
          getScrollerElement: function() {
            return this.display.scroller;
          },
          getGutterElement: function() {
            return this.display.gutters;
          }
        };
        eventMixin(CodeMirror2);
        CodeMirror2.registerHelper = function(type, name, value) {
          if (!helpers.hasOwnProperty(type)) {
            helpers[type] = CodeMirror2[type] = { _global: [] };
          }
          helpers[type][name] = value;
        };
        CodeMirror2.registerGlobalHelper = function(type, name, predicate, value) {
          CodeMirror2.registerHelper(type, name, value);
          helpers[type]._global.push({ pred: predicate, val: value });
        };
      }
      function findPosH(doc2, pos, dir, unit, visually) {
        var oldPos = pos;
        var origDir = dir;
        var lineObj = getLine(doc2, pos.line);
        var lineDir = visually && doc2.direction == "rtl" ? -dir : dir;
        function findNextLine() {
          var l = pos.line + lineDir;
          if (l < doc2.first || l >= doc2.first + doc2.size) {
            return false;
          }
          pos = new Pos(l, pos.ch, pos.sticky);
          return lineObj = getLine(doc2, l);
        }
        function moveOnce(boundToLine) {
          var next;
          if (unit == "codepoint") {
            var ch = lineObj.text.charCodeAt(pos.ch + (dir > 0 ? 0 : -1));
            if (isNaN(ch)) {
              next = null;
            } else {
              var astral = dir > 0 ? ch >= 55296 && ch < 56320 : ch >= 56320 && ch < 57343;
              next = new Pos(pos.line, Math.max(0, Math.min(lineObj.text.length, pos.ch + dir * (astral ? 2 : 1))), -dir);
            }
          } else if (visually) {
            next = moveVisually(doc2.cm, lineObj, pos, dir);
          } else {
            next = moveLogically(lineObj, pos, dir);
          }
          if (next == null) {
            if (!boundToLine && findNextLine()) {
              pos = endOfLine(visually, doc2.cm, lineObj, pos.line, lineDir);
            } else {
              return false;
            }
          } else {
            pos = next;
          }
          return true;
        }
        if (unit == "char" || unit == "codepoint") {
          moveOnce();
        } else if (unit == "column") {
          moveOnce(true);
        } else if (unit == "word" || unit == "group") {
          var sawType = null, group = unit == "group";
          var helper = doc2.cm && doc2.cm.getHelper(pos, "wordChars");
          for (var first = true; ; first = false) {
            if (dir < 0 && !moveOnce(!first)) {
              break;
            }
            var cur = lineObj.text.charAt(pos.ch) || "\n";
            var type = isWordChar(cur, helper) ? "w" : group && cur == "\n" ? "n" : !group || /\s/.test(cur) ? null : "p";
            if (group && !first && !type) {
              type = "s";
            }
            if (sawType && sawType != type) {
              if (dir < 0) {
                dir = 1;
                moveOnce();
                pos.sticky = "after";
              }
              break;
            }
            if (type) {
              sawType = type;
            }
            if (dir > 0 && !moveOnce(!first)) {
              break;
            }
          }
        }
        var result = skipAtomic(doc2, pos, oldPos, origDir, true);
        if (equalCursorPos(oldPos, result)) {
          result.hitSide = true;
        }
        return result;
      }
      function findPosV(cm, pos, dir, unit) {
        var doc2 = cm.doc, x = pos.left, y;
        if (unit == "page") {
          var pageSize = Math.min(cm.display.wrapper.clientHeight, win(cm).innerHeight || doc2(cm).documentElement.clientHeight);
          var moveAmount = Math.max(pageSize - 0.5 * textHeight(cm.display), 3);
          y = (dir > 0 ? pos.bottom : pos.top) + dir * moveAmount;
        } else if (unit == "line") {
          y = dir > 0 ? pos.bottom + 3 : pos.top - 3;
        }
        var target;
        for (; ; ) {
          target = coordsChar(cm, x, y);
          if (!target.outside) {
            break;
          }
          if (dir < 0 ? y <= 0 : y >= doc2.height) {
            target.hitSide = true;
            break;
          }
          y += dir * 5;
        }
        return target;
      }
      var ContentEditableInput = function(cm) {
        this.cm = cm;
        this.lastAnchorNode = this.lastAnchorOffset = this.lastFocusNode = this.lastFocusOffset = null;
        this.polling = new Delayed();
        this.composing = null;
        this.gracePeriod = false;
        this.readDOMTimeout = null;
      };
      ContentEditableInput.prototype.init = function(display) {
        var this$1$1 = this;
        var input = this, cm = input.cm;
        var div = input.div = display.lineDiv;
        div.contentEditable = true;
        disableBrowserMagic(div, cm.options.spellcheck, cm.options.autocorrect, cm.options.autocapitalize);
        function belongsToInput(e) {
          for (var t = e.target; t; t = t.parentNode) {
            if (t == div) {
              return true;
            }
            if (/\bCodeMirror-(?:line)?widget\b/.test(t.className)) {
              break;
            }
          }
          return false;
        }
        on(div, "paste", function(e) {
          if (!belongsToInput(e) || signalDOMEvent(cm, e) || handlePaste(e, cm)) {
            return;
          }
          if (ie_version <= 11) {
            setTimeout(operation(cm, function() {
              return this$1$1.updateFromDOM();
            }), 20);
          }
        });
        on(div, "compositionstart", function(e) {
          this$1$1.composing = { data: e.data, done: false };
        });
        on(div, "compositionupdate", function(e) {
          if (!this$1$1.composing) {
            this$1$1.composing = { data: e.data, done: false };
          }
        });
        on(div, "compositionend", function(e) {
          if (this$1$1.composing) {
            if (e.data != this$1$1.composing.data) {
              this$1$1.readFromDOMSoon();
            }
            this$1$1.composing.done = true;
          }
        });
        on(div, "touchstart", function() {
          return input.forceCompositionEnd();
        });
        on(div, "input", function() {
          if (!this$1$1.composing) {
            this$1$1.readFromDOMSoon();
          }
        });
        function onCopyCut(e) {
          if (!belongsToInput(e) || signalDOMEvent(cm, e)) {
            return;
          }
          if (cm.somethingSelected()) {
            setLastCopied({ lineWise: false, text: cm.getSelections() });
            if (e.type == "cut") {
              cm.replaceSelection("", null, "cut");
            }
          } else if (!cm.options.lineWiseCopyCut) {
            return;
          } else {
            var ranges = copyableRanges(cm);
            setLastCopied({ lineWise: true, text: ranges.text });
            if (e.type == "cut") {
              cm.operation(function() {
                cm.setSelections(ranges.ranges, 0, sel_dontScroll);
                cm.replaceSelection("", null, "cut");
              });
            }
          }
          if (e.clipboardData) {
            e.clipboardData.clearData();
            var content = lastCopied.text.join("\n");
            e.clipboardData.setData("Text", content);
            if (e.clipboardData.getData("Text") == content) {
              e.preventDefault();
              return;
            }
          }
          var kludge = hiddenTextarea(), te = kludge.firstChild;
          disableBrowserMagic(te);
          cm.display.lineSpace.insertBefore(kludge, cm.display.lineSpace.firstChild);
          te.value = lastCopied.text.join("\n");
          var hadFocus = activeElt(rootNode(div));
          selectInput(te);
          setTimeout(function() {
            cm.display.lineSpace.removeChild(kludge);
            hadFocus.focus();
            if (hadFocus == div) {
              input.showPrimarySelection();
            }
          }, 50);
        }
        on(div, "copy", onCopyCut);
        on(div, "cut", onCopyCut);
      };
      ContentEditableInput.prototype.screenReaderLabelChanged = function(label) {
        if (label) {
          this.div.setAttribute("aria-label", label);
        } else {
          this.div.removeAttribute("aria-label");
        }
      };
      ContentEditableInput.prototype.prepareSelection = function() {
        var result = prepareSelection(this.cm, false);
        result.focus = activeElt(rootNode(this.div)) == this.div;
        return result;
      };
      ContentEditableInput.prototype.showSelection = function(info, takeFocus) {
        if (!info || !this.cm.display.view.length) {
          return;
        }
        if (info.focus || takeFocus) {
          this.showPrimarySelection();
        }
        this.showMultipleSelections(info);
      };
      ContentEditableInput.prototype.getSelection = function() {
        return this.cm.display.wrapper.ownerDocument.getSelection();
      };
      ContentEditableInput.prototype.showPrimarySelection = function() {
        var sel = this.getSelection(), cm = this.cm, prim = cm.doc.sel.primary();
        var from = prim.from(), to = prim.to();
        if (cm.display.viewTo == cm.display.viewFrom || from.line >= cm.display.viewTo || to.line < cm.display.viewFrom) {
          sel.removeAllRanges();
          return;
        }
        var curAnchor = domToPos(cm, sel.anchorNode, sel.anchorOffset);
        var curFocus = domToPos(cm, sel.focusNode, sel.focusOffset);
        if (curAnchor && !curAnchor.bad && curFocus && !curFocus.bad && cmp(minPos(curAnchor, curFocus), from) == 0 && cmp(maxPos(curAnchor, curFocus), to) == 0) {
          return;
        }
        var view = cm.display.view;
        var start = from.line >= cm.display.viewFrom && posToDOM(cm, from) || { node: view[0].measure.map[2], offset: 0 };
        var end = to.line < cm.display.viewTo && posToDOM(cm, to);
        if (!end) {
          var measure = view[view.length - 1].measure;
          var map2 = measure.maps ? measure.maps[measure.maps.length - 1] : measure.map;
          end = { node: map2[map2.length - 1], offset: map2[map2.length - 2] - map2[map2.length - 3] };
        }
        if (!start || !end) {
          sel.removeAllRanges();
          return;
        }
        var old = sel.rangeCount && sel.getRangeAt(0), rng;
        try {
          rng = range(start.node, start.offset, end.offset, end.node);
        } catch (e) {
        }
        if (rng) {
          if (!gecko && cm.state.focused) {
            sel.collapse(start.node, start.offset);
            if (!rng.collapsed) {
              sel.removeAllRanges();
              sel.addRange(rng);
            }
          } else {
            sel.removeAllRanges();
            sel.addRange(rng);
          }
          if (old && sel.anchorNode == null) {
            sel.addRange(old);
          } else if (gecko) {
            this.startGracePeriod();
          }
        }
        this.rememberSelection();
      };
      ContentEditableInput.prototype.startGracePeriod = function() {
        var this$1$1 = this;
        clearTimeout(this.gracePeriod);
        this.gracePeriod = setTimeout(function() {
          this$1$1.gracePeriod = false;
          if (this$1$1.selectionChanged()) {
            this$1$1.cm.operation(function() {
              return this$1$1.cm.curOp.selectionChanged = true;
            });
          }
        }, 20);
      };
      ContentEditableInput.prototype.showMultipleSelections = function(info) {
        removeChildrenAndAdd(this.cm.display.cursorDiv, info.cursors);
        removeChildrenAndAdd(this.cm.display.selectionDiv, info.selection);
      };
      ContentEditableInput.prototype.rememberSelection = function() {
        var sel = this.getSelection();
        this.lastAnchorNode = sel.anchorNode;
        this.lastAnchorOffset = sel.anchorOffset;
        this.lastFocusNode = sel.focusNode;
        this.lastFocusOffset = sel.focusOffset;
      };
      ContentEditableInput.prototype.selectionInEditor = function() {
        var sel = this.getSelection();
        if (!sel.rangeCount) {
          return false;
        }
        var node = sel.getRangeAt(0).commonAncestorContainer;
        return contains(this.div, node);
      };
      ContentEditableInput.prototype.focus = function() {
        if (this.cm.options.readOnly != "nocursor") {
          if (!this.selectionInEditor() || activeElt(rootNode(this.div)) != this.div) {
            this.showSelection(this.prepareSelection(), true);
          }
          this.div.focus();
        }
      };
      ContentEditableInput.prototype.blur = function() {
        this.div.blur();
      };
      ContentEditableInput.prototype.getField = function() {
        return this.div;
      };
      ContentEditableInput.prototype.supportsTouch = function() {
        return true;
      };
      ContentEditableInput.prototype.receivedFocus = function() {
        var this$1$1 = this;
        var input = this;
        if (this.selectionInEditor()) {
          setTimeout(function() {
            return this$1$1.pollSelection();
          }, 20);
        } else {
          runInOp(this.cm, function() {
            return input.cm.curOp.selectionChanged = true;
          });
        }
        function poll() {
          if (input.cm.state.focused) {
            input.pollSelection();
            input.polling.set(input.cm.options.pollInterval, poll);
          }
        }
        this.polling.set(this.cm.options.pollInterval, poll);
      };
      ContentEditableInput.prototype.selectionChanged = function() {
        var sel = this.getSelection();
        return sel.anchorNode != this.lastAnchorNode || sel.anchorOffset != this.lastAnchorOffset || sel.focusNode != this.lastFocusNode || sel.focusOffset != this.lastFocusOffset;
      };
      ContentEditableInput.prototype.pollSelection = function() {
        if (this.readDOMTimeout != null || this.gracePeriod || !this.selectionChanged()) {
          return;
        }
        var sel = this.getSelection(), cm = this.cm;
        if (android && chrome && this.cm.display.gutterSpecs.length && isInGutter(sel.anchorNode)) {
          this.cm.triggerOnKeyDown({ type: "keydown", keyCode: 8, preventDefault: Math.abs });
          this.blur();
          this.focus();
          return;
        }
        if (this.composing) {
          return;
        }
        this.rememberSelection();
        var anchor = domToPos(cm, sel.anchorNode, sel.anchorOffset);
        var head = domToPos(cm, sel.focusNode, sel.focusOffset);
        if (anchor && head) {
          runInOp(cm, function() {
            setSelection(cm.doc, simpleSelection(anchor, head), sel_dontScroll);
            if (anchor.bad || head.bad) {
              cm.curOp.selectionChanged = true;
            }
          });
        }
      };
      ContentEditableInput.prototype.pollContent = function() {
        if (this.readDOMTimeout != null) {
          clearTimeout(this.readDOMTimeout);
          this.readDOMTimeout = null;
        }
        var cm = this.cm, display = cm.display, sel = cm.doc.sel.primary();
        var from = sel.from(), to = sel.to();
        if (from.ch == 0 && from.line > cm.firstLine()) {
          from = Pos(from.line - 1, getLine(cm.doc, from.line - 1).length);
        }
        if (to.ch == getLine(cm.doc, to.line).text.length && to.line < cm.lastLine()) {
          to = Pos(to.line + 1, 0);
        }
        if (from.line < display.viewFrom || to.line > display.viewTo - 1) {
          return false;
        }
        var fromIndex, fromLine, fromNode;
        if (from.line == display.viewFrom || (fromIndex = findViewIndex(cm, from.line)) == 0) {
          fromLine = lineNo(display.view[0].line);
          fromNode = display.view[0].node;
        } else {
          fromLine = lineNo(display.view[fromIndex].line);
          fromNode = display.view[fromIndex - 1].node.nextSibling;
        }
        var toIndex = findViewIndex(cm, to.line);
        var toLine, toNode;
        if (toIndex == display.view.length - 1) {
          toLine = display.viewTo - 1;
          toNode = display.lineDiv.lastChild;
        } else {
          toLine = lineNo(display.view[toIndex + 1].line) - 1;
          toNode = display.view[toIndex + 1].node.previousSibling;
        }
        if (!fromNode) {
          return false;
        }
        var newText = cm.doc.splitLines(domTextBetween(cm, fromNode, toNode, fromLine, toLine));
        var oldText = getBetween(cm.doc, Pos(fromLine, 0), Pos(toLine, getLine(cm.doc, toLine).text.length));
        while (newText.length > 1 && oldText.length > 1) {
          if (lst(newText) == lst(oldText)) {
            newText.pop();
            oldText.pop();
            toLine--;
          } else if (newText[0] == oldText[0]) {
            newText.shift();
            oldText.shift();
            fromLine++;
          } else {
            break;
          }
        }
        var cutFront = 0, cutEnd = 0;
        var newTop = newText[0], oldTop = oldText[0], maxCutFront = Math.min(newTop.length, oldTop.length);
        while (cutFront < maxCutFront && newTop.charCodeAt(cutFront) == oldTop.charCodeAt(cutFront)) {
          ++cutFront;
        }
        var newBot = lst(newText), oldBot = lst(oldText);
        var maxCutEnd = Math.min(
          newBot.length - (newText.length == 1 ? cutFront : 0),
          oldBot.length - (oldText.length == 1 ? cutFront : 0)
        );
        while (cutEnd < maxCutEnd && newBot.charCodeAt(newBot.length - cutEnd - 1) == oldBot.charCodeAt(oldBot.length - cutEnd - 1)) {
          ++cutEnd;
        }
        if (newText.length == 1 && oldText.length == 1 && fromLine == from.line) {
          while (cutFront && cutFront > from.ch && newBot.charCodeAt(newBot.length - cutEnd - 1) == oldBot.charCodeAt(oldBot.length - cutEnd - 1)) {
            cutFront--;
            cutEnd++;
          }
        }
        newText[newText.length - 1] = newBot.slice(0, newBot.length - cutEnd).replace(/^\u200b+/, "");
        newText[0] = newText[0].slice(cutFront).replace(/\u200b+$/, "");
        var chFrom = Pos(fromLine, cutFront);
        var chTo = Pos(toLine, oldText.length ? lst(oldText).length - cutEnd : 0);
        if (newText.length > 1 || newText[0] || cmp(chFrom, chTo)) {
          replaceRange(cm.doc, newText, chFrom, chTo, "+input");
          return true;
        }
      };
      ContentEditableInput.prototype.ensurePolled = function() {
        this.forceCompositionEnd();
      };
      ContentEditableInput.prototype.reset = function() {
        this.forceCompositionEnd();
      };
      ContentEditableInput.prototype.forceCompositionEnd = function() {
        if (!this.composing) {
          return;
        }
        clearTimeout(this.readDOMTimeout);
        this.composing = null;
        this.updateFromDOM();
        this.div.blur();
        this.div.focus();
      };
      ContentEditableInput.prototype.readFromDOMSoon = function() {
        var this$1$1 = this;
        if (this.readDOMTimeout != null) {
          return;
        }
        this.readDOMTimeout = setTimeout(function() {
          this$1$1.readDOMTimeout = null;
          if (this$1$1.composing) {
            if (this$1$1.composing.done) {
              this$1$1.composing = null;
            } else {
              return;
            }
          }
          this$1$1.updateFromDOM();
        }, 80);
      };
      ContentEditableInput.prototype.updateFromDOM = function() {
        var this$1$1 = this;
        if (this.cm.isReadOnly() || !this.pollContent()) {
          runInOp(this.cm, function() {
            return regChange(this$1$1.cm);
          });
        }
      };
      ContentEditableInput.prototype.setUneditable = function(node) {
        node.contentEditable = "false";
      };
      ContentEditableInput.prototype.onKeyPress = function(e) {
        if (e.charCode == 0 || this.composing) {
          return;
        }
        e.preventDefault();
        if (!this.cm.isReadOnly()) {
          operation(this.cm, applyTextInput)(this.cm, String.fromCharCode(e.charCode == null ? e.keyCode : e.charCode), 0);
        }
      };
      ContentEditableInput.prototype.readOnlyChanged = function(val) {
        this.div.contentEditable = String(val != "nocursor");
      };
      ContentEditableInput.prototype.onContextMenu = function() {
      };
      ContentEditableInput.prototype.resetPosition = function() {
      };
      ContentEditableInput.prototype.needsContentAttribute = true;
      function posToDOM(cm, pos) {
        var view = findViewForLine(cm, pos.line);
        if (!view || view.hidden) {
          return null;
        }
        var line = getLine(cm.doc, pos.line);
        var info = mapFromLineView(view, line, pos.line);
        var order = getOrder(line, cm.doc.direction), side = "left";
        if (order) {
          var partPos = getBidiPartAt(order, pos.ch);
          side = partPos % 2 ? "right" : "left";
        }
        var result = nodeAndOffsetInLineMap(info.map, pos.ch, side);
        result.offset = result.collapse == "right" ? result.end : result.start;
        return result;
      }
      function isInGutter(node) {
        for (var scan = node; scan; scan = scan.parentNode) {
          if (/CodeMirror-gutter-wrapper/.test(scan.className)) {
            return true;
          }
        }
        return false;
      }
      function badPos(pos, bad) {
        if (bad) {
          pos.bad = true;
        }
        return pos;
      }
      function domTextBetween(cm, from, to, fromLine, toLine) {
        var text = "", closing = false, lineSep = cm.doc.lineSeparator(), extraLinebreak = false;
        function recognizeMarker(id) {
          return function(marker) {
            return marker.id == id;
          };
        }
        function close() {
          if (closing) {
            text += lineSep;
            if (extraLinebreak) {
              text += lineSep;
            }
            closing = extraLinebreak = false;
          }
        }
        function addText(str) {
          if (str) {
            close();
            text += str;
          }
        }
        function walk(node) {
          if (node.nodeType == 1) {
            var cmText = node.getAttribute("cm-text");
            if (cmText) {
              addText(cmText);
              return;
            }
            var markerID = node.getAttribute("cm-marker"), range2;
            if (markerID) {
              var found = cm.findMarks(Pos(fromLine, 0), Pos(toLine + 1, 0), recognizeMarker(+markerID));
              if (found.length && (range2 = found[0].find(0))) {
                addText(getBetween(cm.doc, range2.from, range2.to).join(lineSep));
              }
              return;
            }
            if (node.getAttribute("contenteditable") == "false") {
              return;
            }
            var isBlock = /^(pre|div|p|li|table|br)$/i.test(node.nodeName);
            if (!/^br$/i.test(node.nodeName) && node.textContent.length == 0) {
              return;
            }
            if (isBlock) {
              close();
            }
            for (var i2 = 0; i2 < node.childNodes.length; i2++) {
              walk(node.childNodes[i2]);
            }
            if (/^(pre|p)$/i.test(node.nodeName)) {
              extraLinebreak = true;
            }
            if (isBlock) {
              closing = true;
            }
          } else if (node.nodeType == 3) {
            addText(node.nodeValue.replace(/\u200b/g, "").replace(/\u00a0/g, " "));
          }
        }
        for (; ; ) {
          walk(from);
          if (from == to) {
            break;
          }
          from = from.nextSibling;
          extraLinebreak = false;
        }
        return text;
      }
      function domToPos(cm, node, offset) {
        var lineNode;
        if (node == cm.display.lineDiv) {
          lineNode = cm.display.lineDiv.childNodes[offset];
          if (!lineNode) {
            return badPos(cm.clipPos(Pos(cm.display.viewTo - 1)), true);
          }
          node = null;
          offset = 0;
        } else {
          for (lineNode = node; ; lineNode = lineNode.parentNode) {
            if (!lineNode || lineNode == cm.display.lineDiv) {
              return null;
            }
            if (lineNode.parentNode && lineNode.parentNode == cm.display.lineDiv) {
              break;
            }
          }
        }
        for (var i2 = 0; i2 < cm.display.view.length; i2++) {
          var lineView = cm.display.view[i2];
          if (lineView.node == lineNode) {
            return locateNodeInLineView(lineView, node, offset);
          }
        }
      }
      function locateNodeInLineView(lineView, node, offset) {
        var wrapper = lineView.text.firstChild, bad = false;
        if (!node || !contains(wrapper, node)) {
          return badPos(Pos(lineNo(lineView.line), 0), true);
        }
        if (node == wrapper) {
          bad = true;
          node = wrapper.childNodes[offset];
          offset = 0;
          if (!node) {
            var line = lineView.rest ? lst(lineView.rest) : lineView.line;
            return badPos(Pos(lineNo(line), line.text.length), bad);
          }
        }
        var textNode = node.nodeType == 3 ? node : null, topNode = node;
        if (!textNode && node.childNodes.length == 1 && node.firstChild.nodeType == 3) {
          textNode = node.firstChild;
          if (offset) {
            offset = textNode.nodeValue.length;
          }
        }
        while (topNode.parentNode != wrapper) {
          topNode = topNode.parentNode;
        }
        var measure = lineView.measure, maps = measure.maps;
        function find(textNode2, topNode2, offset2) {
          for (var i2 = -1; i2 < (maps ? maps.length : 0); i2++) {
            var map2 = i2 < 0 ? measure.map : maps[i2];
            for (var j = 0; j < map2.length; j += 3) {
              var curNode = map2[j + 2];
              if (curNode == textNode2 || curNode == topNode2) {
                var line2 = lineNo(i2 < 0 ? lineView.line : lineView.rest[i2]);
                var ch = map2[j] + offset2;
                if (offset2 < 0 || curNode != textNode2) {
                  ch = map2[j + (offset2 ? 1 : 0)];
                }
                return Pos(line2, ch);
              }
            }
          }
        }
        var found = find(textNode, topNode, offset);
        if (found) {
          return badPos(found, bad);
        }
        for (var after = topNode.nextSibling, dist = textNode ? textNode.nodeValue.length - offset : 0; after; after = after.nextSibling) {
          found = find(after, after.firstChild, 0);
          if (found) {
            return badPos(Pos(found.line, found.ch - dist), bad);
          } else {
            dist += after.textContent.length;
          }
        }
        for (var before = topNode.previousSibling, dist$1 = offset; before; before = before.previousSibling) {
          found = find(before, before.firstChild, -1);
          if (found) {
            return badPos(Pos(found.line, found.ch + dist$1), bad);
          } else {
            dist$1 += before.textContent.length;
          }
        }
      }
      var TextareaInput = function(cm) {
        this.cm = cm;
        this.prevInput = "";
        this.pollingFast = false;
        this.polling = new Delayed();
        this.hasSelection = false;
        this.composing = null;
        this.resetting = false;
      };
      TextareaInput.prototype.init = function(display) {
        var this$1$1 = this;
        var input = this, cm = this.cm;
        this.createField(display);
        var te = this.textarea;
        display.wrapper.insertBefore(this.wrapper, display.wrapper.firstChild);
        if (ios) {
          te.style.width = "0px";
        }
        on(te, "input", function() {
          if (ie && ie_version >= 9 && this$1$1.hasSelection) {
            this$1$1.hasSelection = null;
          }
          input.poll();
        });
        on(te, "paste", function(e) {
          if (signalDOMEvent(cm, e) || handlePaste(e, cm)) {
            return;
          }
          cm.state.pasteIncoming = +/* @__PURE__ */ new Date();
          input.fastPoll();
        });
        function prepareCopyCut(e) {
          if (signalDOMEvent(cm, e)) {
            return;
          }
          if (cm.somethingSelected()) {
            setLastCopied({ lineWise: false, text: cm.getSelections() });
          } else if (!cm.options.lineWiseCopyCut) {
            return;
          } else {
            var ranges = copyableRanges(cm);
            setLastCopied({ lineWise: true, text: ranges.text });
            if (e.type == "cut") {
              cm.setSelections(ranges.ranges, null, sel_dontScroll);
            } else {
              input.prevInput = "";
              te.value = ranges.text.join("\n");
              selectInput(te);
            }
          }
          if (e.type == "cut") {
            cm.state.cutIncoming = +/* @__PURE__ */ new Date();
          }
        }
        on(te, "cut", prepareCopyCut);
        on(te, "copy", prepareCopyCut);
        on(display.scroller, "paste", function(e) {
          if (eventInWidget(display, e) || signalDOMEvent(cm, e)) {
            return;
          }
          if (!te.dispatchEvent) {
            cm.state.pasteIncoming = +/* @__PURE__ */ new Date();
            input.focus();
            return;
          }
          var event = new Event("paste");
          event.clipboardData = e.clipboardData;
          te.dispatchEvent(event);
        });
        on(display.lineSpace, "selectstart", function(e) {
          if (!eventInWidget(display, e)) {
            e_preventDefault(e);
          }
        });
        on(te, "compositionstart", function() {
          var start = cm.getCursor("from");
          if (input.composing) {
            input.composing.range.clear();
          }
          input.composing = {
            start,
            range: cm.markText(start, cm.getCursor("to"), { className: "CodeMirror-composing" })
          };
        });
        on(te, "compositionend", function() {
          if (input.composing) {
            input.poll();
            input.composing.range.clear();
            input.composing = null;
          }
        });
      };
      TextareaInput.prototype.createField = function(_display) {
        this.wrapper = hiddenTextarea();
        this.textarea = this.wrapper.firstChild;
        var opts = this.cm.options;
        disableBrowserMagic(this.textarea, opts.spellcheck, opts.autocorrect, opts.autocapitalize);
      };
      TextareaInput.prototype.screenReaderLabelChanged = function(label) {
        if (label) {
          this.textarea.setAttribute("aria-label", label);
        } else {
          this.textarea.removeAttribute("aria-label");
        }
      };
      TextareaInput.prototype.prepareSelection = function() {
        var cm = this.cm, display = cm.display, doc2 = cm.doc;
        var result = prepareSelection(cm);
        if (cm.options.moveInputWithCursor) {
          var headPos = cursorCoords(cm, doc2.sel.primary().head, "div");
          var wrapOff = display.wrapper.getBoundingClientRect(), lineOff = display.lineDiv.getBoundingClientRect();
          result.teTop = Math.max(0, Math.min(
            display.wrapper.clientHeight - 10,
            headPos.top + lineOff.top - wrapOff.top
          ));
          result.teLeft = Math.max(0, Math.min(
            display.wrapper.clientWidth - 10,
            headPos.left + lineOff.left - wrapOff.left
          ));
        }
        return result;
      };
      TextareaInput.prototype.showSelection = function(drawn) {
        var cm = this.cm, display = cm.display;
        removeChildrenAndAdd(display.cursorDiv, drawn.cursors);
        removeChildrenAndAdd(display.selectionDiv, drawn.selection);
        if (drawn.teTop != null) {
          this.wrapper.style.top = drawn.teTop + "px";
          this.wrapper.style.left = drawn.teLeft + "px";
        }
      };
      TextareaInput.prototype.reset = function(typing) {
        if (this.contextMenuPending || this.composing && typing) {
          return;
        }
        var cm = this.cm;
        this.resetting = true;
        if (cm.somethingSelected()) {
          this.prevInput = "";
          var content = cm.getSelection();
          this.textarea.value = content;
          if (cm.state.focused) {
            selectInput(this.textarea);
          }
          if (ie && ie_version >= 9) {
            this.hasSelection = content;
          }
        } else if (!typing) {
          this.prevInput = this.textarea.value = "";
          if (ie && ie_version >= 9) {
            this.hasSelection = null;
          }
        }
        this.resetting = false;
      };
      TextareaInput.prototype.getField = function() {
        return this.textarea;
      };
      TextareaInput.prototype.supportsTouch = function() {
        return false;
      };
      TextareaInput.prototype.focus = function() {
        if (this.cm.options.readOnly != "nocursor" && (!mobile || activeElt(rootNode(this.textarea)) != this.textarea)) {
          try {
            this.textarea.focus();
          } catch (e) {
          }
        }
      };
      TextareaInput.prototype.blur = function() {
        this.textarea.blur();
      };
      TextareaInput.prototype.resetPosition = function() {
        this.wrapper.style.top = this.wrapper.style.left = 0;
      };
      TextareaInput.prototype.receivedFocus = function() {
        this.slowPoll();
      };
      TextareaInput.prototype.slowPoll = function() {
        var this$1$1 = this;
        if (this.pollingFast) {
          return;
        }
        this.polling.set(this.cm.options.pollInterval, function() {
          this$1$1.poll();
          if (this$1$1.cm.state.focused) {
            this$1$1.slowPoll();
          }
        });
      };
      TextareaInput.prototype.fastPoll = function() {
        var missed = false, input = this;
        input.pollingFast = true;
        function p() {
          var changed = input.poll();
          if (!changed && !missed) {
            missed = true;
            input.polling.set(60, p);
          } else {
            input.pollingFast = false;
            input.slowPoll();
          }
        }
        input.polling.set(20, p);
      };
      TextareaInput.prototype.poll = function() {
        var this$1$1 = this;
        var cm = this.cm, input = this.textarea, prevInput = this.prevInput;
        if (this.contextMenuPending || this.resetting || !cm.state.focused || hasSelection(input) && !prevInput && !this.composing || cm.isReadOnly() || cm.options.disableInput || cm.state.keySeq) {
          return false;
        }
        var text = input.value;
        if (text == prevInput && !cm.somethingSelected()) {
          return false;
        }
        if (ie && ie_version >= 9 && this.hasSelection === text || mac && /[\uf700-\uf7ff]/.test(text)) {
          cm.display.input.reset();
          return false;
        }
        if (cm.doc.sel == cm.display.selForContextMenu) {
          var first = text.charCodeAt(0);
          if (first == 8203 && !prevInput) {
            prevInput = "​";
          }
          if (first == 8666) {
            this.reset();
            return this.cm.execCommand("undo");
          }
        }
        var same = 0, l = Math.min(prevInput.length, text.length);
        while (same < l && prevInput.charCodeAt(same) == text.charCodeAt(same)) {
          ++same;
        }
        runInOp(cm, function() {
          applyTextInput(
            cm,
            text.slice(same),
            prevInput.length - same,
            null,
            this$1$1.composing ? "*compose" : null
          );
          if (text.length > 1e3 || text.indexOf("\n") > -1) {
            input.value = this$1$1.prevInput = "";
          } else {
            this$1$1.prevInput = text;
          }
          if (this$1$1.composing) {
            this$1$1.composing.range.clear();
            this$1$1.composing.range = cm.markText(
              this$1$1.composing.start,
              cm.getCursor("to"),
              { className: "CodeMirror-composing" }
            );
          }
        });
        return true;
      };
      TextareaInput.prototype.ensurePolled = function() {
        if (this.pollingFast && this.poll()) {
          this.pollingFast = false;
        }
      };
      TextareaInput.prototype.onKeyPress = function() {
        if (ie && ie_version >= 9) {
          this.hasSelection = null;
        }
        this.fastPoll();
      };
      TextareaInput.prototype.onContextMenu = function(e) {
        var input = this, cm = input.cm, display = cm.display, te = input.textarea;
        if (input.contextMenuPending) {
          input.contextMenuPending();
        }
        var pos = posFromMouse(cm, e), scrollPos = display.scroller.scrollTop;
        if (!pos || presto) {
          return;
        }
        var reset = cm.options.resetSelectionOnContextMenu;
        if (reset && cm.doc.sel.contains(pos) == -1) {
          operation(cm, setSelection)(cm.doc, simpleSelection(pos), sel_dontScroll);
        }
        var oldCSS = te.style.cssText, oldWrapperCSS = input.wrapper.style.cssText;
        var wrapperBox = input.wrapper.offsetParent.getBoundingClientRect();
        input.wrapper.style.cssText = "position: static";
        te.style.cssText = "position: absolute; width: 30px; height: 30px;\n      top: " + (e.clientY - wrapperBox.top - 5) + "px; left: " + (e.clientX - wrapperBox.left - 5) + "px;\n      z-index: 1000; background: " + (ie ? "rgba(255, 255, 255, .05)" : "transparent") + ";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";
        var oldScrollY;
        if (webkit) {
          oldScrollY = te.ownerDocument.defaultView.scrollY;
        }
        display.input.focus();
        if (webkit) {
          te.ownerDocument.defaultView.scrollTo(null, oldScrollY);
        }
        display.input.reset();
        if (!cm.somethingSelected()) {
          te.value = input.prevInput = " ";
        }
        input.contextMenuPending = rehide;
        display.selForContextMenu = cm.doc.sel;
        clearTimeout(display.detectingSelectAll);
        function prepareSelectAllHack() {
          if (te.selectionStart != null) {
            var selected = cm.somethingSelected();
            var extval = "​" + (selected ? te.value : "");
            te.value = "⇚";
            te.value = extval;
            input.prevInput = selected ? "" : "​";
            te.selectionStart = 1;
            te.selectionEnd = extval.length;
            display.selForContextMenu = cm.doc.sel;
          }
        }
        function rehide() {
          if (input.contextMenuPending != rehide) {
            return;
          }
          input.contextMenuPending = false;
          input.wrapper.style.cssText = oldWrapperCSS;
          te.style.cssText = oldCSS;
          if (ie && ie_version < 9) {
            display.scrollbars.setScrollTop(display.scroller.scrollTop = scrollPos);
          }
          if (te.selectionStart != null) {
            if (!ie || ie && ie_version < 9) {
              prepareSelectAllHack();
            }
            var i2 = 0, poll = function() {
              if (display.selForContextMenu == cm.doc.sel && te.selectionStart == 0 && te.selectionEnd > 0 && input.prevInput == "​") {
                operation(cm, selectAll)(cm);
              } else if (i2++ < 10) {
                display.detectingSelectAll = setTimeout(poll, 500);
              } else {
                display.selForContextMenu = null;
                display.input.reset();
              }
            };
            display.detectingSelectAll = setTimeout(poll, 200);
          }
        }
        if (ie && ie_version >= 9) {
          prepareSelectAllHack();
        }
        if (captureRightClick) {
          e_stop(e);
          var mouseup = function() {
            off(window, "mouseup", mouseup);
            setTimeout(rehide, 20);
          };
          on(window, "mouseup", mouseup);
        } else {
          setTimeout(rehide, 50);
        }
      };
      TextareaInput.prototype.readOnlyChanged = function(val) {
        if (!val) {
          this.reset();
        }
        this.textarea.disabled = val == "nocursor";
        this.textarea.readOnly = !!val;
      };
      TextareaInput.prototype.setUneditable = function() {
      };
      TextareaInput.prototype.needsContentAttribute = false;
      function fromTextArea(textarea, options) {
        options = options ? copyObj(options) : {};
        options.value = textarea.value;
        if (!options.tabindex && textarea.tabIndex) {
          options.tabindex = textarea.tabIndex;
        }
        if (!options.placeholder && textarea.placeholder) {
          options.placeholder = textarea.placeholder;
        }
        if (options.autofocus == null) {
          var hasFocus = activeElt(rootNode(textarea));
          options.autofocus = hasFocus == textarea || textarea.getAttribute("autofocus") != null && hasFocus == document.body;
        }
        function save() {
          textarea.value = cm.getValue();
        }
        var realSubmit;
        if (textarea.form) {
          on(textarea.form, "submit", save);
          if (!options.leaveSubmitMethodAlone) {
            var form = textarea.form;
            realSubmit = form.submit;
            try {
              var wrappedSubmit = form.submit = function() {
                save();
                form.submit = realSubmit;
                form.submit();
                form.submit = wrappedSubmit;
              };
            } catch (e) {
            }
          }
        }
        options.finishInit = function(cm2) {
          cm2.save = save;
          cm2.getTextArea = function() {
            return textarea;
          };
          cm2.toTextArea = function() {
            cm2.toTextArea = isNaN;
            save();
            textarea.parentNode.removeChild(cm2.getWrapperElement());
            textarea.style.display = "";
            if (textarea.form) {
              off(textarea.form, "submit", save);
              if (!options.leaveSubmitMethodAlone && typeof textarea.form.submit == "function") {
                textarea.form.submit = realSubmit;
              }
            }
          };
        };
        textarea.style.display = "none";
        var cm = CodeMirror(
          function(node) {
            return textarea.parentNode.insertBefore(node, textarea.nextSibling);
          },
          options
        );
        return cm;
      }
      function addLegacyProps(CodeMirror2) {
        CodeMirror2.off = off;
        CodeMirror2.on = on;
        CodeMirror2.wheelEventPixels = wheelEventPixels;
        CodeMirror2.Doc = Doc;
        CodeMirror2.splitLines = splitLinesAuto;
        CodeMirror2.countColumn = countColumn;
        CodeMirror2.findColumn = findColumn;
        CodeMirror2.isWordChar = isWordCharBasic;
        CodeMirror2.Pass = Pass;
        CodeMirror2.signal = signal;
        CodeMirror2.Line = Line;
        CodeMirror2.changeEnd = changeEnd;
        CodeMirror2.scrollbarModel = scrollbarModel;
        CodeMirror2.Pos = Pos;
        CodeMirror2.cmpPos = cmp;
        CodeMirror2.modes = modes;
        CodeMirror2.mimeModes = mimeModes;
        CodeMirror2.resolveMode = resolveMode;
        CodeMirror2.getMode = getMode;
        CodeMirror2.modeExtensions = modeExtensions;
        CodeMirror2.extendMode = extendMode;
        CodeMirror2.copyState = copyState;
        CodeMirror2.startState = startState;
        CodeMirror2.innerMode = innerMode;
        CodeMirror2.commands = commands;
        CodeMirror2.keyMap = keyMap;
        CodeMirror2.keyName = keyName;
        CodeMirror2.isModifierKey = isModifierKey;
        CodeMirror2.lookupKey = lookupKey;
        CodeMirror2.normalizeKeyMap = normalizeKeyMap;
        CodeMirror2.StringStream = StringStream;
        CodeMirror2.SharedTextMarker = SharedTextMarker;
        CodeMirror2.TextMarker = TextMarker;
        CodeMirror2.LineWidget = LineWidget;
        CodeMirror2.e_preventDefault = e_preventDefault;
        CodeMirror2.e_stopPropagation = e_stopPropagation;
        CodeMirror2.e_stop = e_stop;
        CodeMirror2.addClass = addClass;
        CodeMirror2.contains = contains;
        CodeMirror2.rmClass = rmClass;
        CodeMirror2.keyNames = keyNames;
      }
      defineOptions(CodeMirror);
      addEditorMethods(CodeMirror);
      var dontDelegate = "iter insert remove copy getEditor constructor".split(" ");
      for (var prop in Doc.prototype) {
        if (Doc.prototype.hasOwnProperty(prop) && indexOf(dontDelegate, prop) < 0) {
          CodeMirror.prototype[prop] = /* @__PURE__ */ (function(method) {
            return function() {
              return method.apply(this.doc, arguments);
            };
          })(Doc.prototype[prop]);
        }
      }
      eventMixin(Doc);
      CodeMirror.inputStyles = { "textarea": TextareaInput, "contenteditable": ContentEditableInput };
      CodeMirror.defineMode = function(name) {
        if (!CodeMirror.defaults.mode && name != "null") {
          CodeMirror.defaults.mode = name;
        }
        defineMode.apply(this, arguments);
      };
      CodeMirror.defineMIME = defineMIME;
      CodeMirror.defineMode("null", function() {
        return { token: function(stream) {
          return stream.skipToEnd();
        } };
      });
      CodeMirror.defineMIME("text/plain", "null");
      CodeMirror.defineExtension = function(name, func) {
        CodeMirror.prototype[name] = func;
      };
      CodeMirror.defineDocExtension = function(name, func) {
        Doc.prototype[name] = func;
      };
      CodeMirror.fromTextArea = fromTextArea;
      addLegacyProps(CodeMirror);
      CodeMirror.version = "5.65.20";
      return CodeMirror;
    }));
  })(codemirror$1);
  return codemirror$1.exports;
}
export {
  requireCodemirror as r
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29kZW1pcnJvcjMuanMiLCJzb3VyY2VzIjpbIi4uLy4uL25vZGVfbW9kdWxlcy9jb2RlbWlycm9yL2xpYi9jb2RlbWlycm9yLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvZGVNaXJyb3IsIGNvcHlyaWdodCAoYykgYnkgTWFyaWpuIEhhdmVyYmVrZSBhbmQgb3RoZXJzXG4vLyBEaXN0cmlidXRlZCB1bmRlciBhbiBNSVQgbGljZW5zZTogaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC81L0xJQ0VOU0VcblxuLy8gVGhpcyBpcyBDb2RlTWlycm9yIChodHRwczovL2NvZGVtaXJyb3IubmV0LzUpLCBhIGNvZGUgZWRpdG9yXG4vLyBpbXBsZW1lbnRlZCBpbiBKYXZhU2NyaXB0IG9uIHRvcCBvZiB0aGUgYnJvd3NlcidzIERPTS5cbi8vXG4vLyBZb3UgY2FuIGZpbmQgc29tZSB0ZWNobmljYWwgYmFja2dyb3VuZCBmb3Igc29tZSBvZiB0aGUgY29kZSBiZWxvd1xuLy8gYXQgaHR0cDovL21hcmlqbmhhdmVyYmVrZS5ubC9ibG9nLyNjbS1pbnRlcm5hbHMgLlxuXG4oZnVuY3Rpb24gKGdsb2JhbCwgZmFjdG9yeSkge1xuICB0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgPyBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKSA6XG4gIHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCA/IGRlZmluZShmYWN0b3J5KSA6XG4gIChnbG9iYWwgPSBnbG9iYWwgfHwgc2VsZiwgZ2xvYmFsLkNvZGVNaXJyb3IgPSBmYWN0b3J5KCkpO1xufSh0aGlzLCAoZnVuY3Rpb24gKCkgeyAndXNlIHN0cmljdCc7XG5cbiAgLy8gS2x1ZGdlcyBmb3IgYnVncyBhbmQgYmVoYXZpb3IgZGlmZmVyZW5jZXMgdGhhdCBjYW4ndCBiZSBmZWF0dXJlXG4gIC8vIGRldGVjdGVkIGFyZSBlbmFibGVkIGJhc2VkIG9uIHVzZXJBZ2VudCBldGMgc25pZmZpbmcuXG4gIHZhciB1c2VyQWdlbnQgPSBuYXZpZ2F0b3IudXNlckFnZW50O1xuICB2YXIgcGxhdGZvcm0gPSBuYXZpZ2F0b3IucGxhdGZvcm07XG5cbiAgdmFyIGdlY2tvID0gL2dlY2tvXFwvXFxkL2kudGVzdCh1c2VyQWdlbnQpO1xuICB2YXIgaWVfdXB0bzEwID0gL01TSUUgXFxkLy50ZXN0KHVzZXJBZ2VudCk7XG4gIHZhciBpZV8xMXVwID0gL1RyaWRlbnRcXC8oPzpbNy05XXxcXGR7Mix9KVxcLi4qcnY6KFxcZCspLy5leGVjKHVzZXJBZ2VudCk7XG4gIHZhciBlZGdlID0gL0VkZ2VcXC8oXFxkKykvLmV4ZWModXNlckFnZW50KTtcbiAgdmFyIGllID0gaWVfdXB0bzEwIHx8IGllXzExdXAgfHwgZWRnZTtcbiAgdmFyIGllX3ZlcnNpb24gPSBpZSAmJiAoaWVfdXB0bzEwID8gZG9jdW1lbnQuZG9jdW1lbnRNb2RlIHx8IDYgOiArKGVkZ2UgfHwgaWVfMTF1cClbMV0pO1xuICB2YXIgd2Via2l0ID0gIWVkZ2UgJiYgL1dlYktpdFxcLy8udGVzdCh1c2VyQWdlbnQpO1xuICB2YXIgcXR3ZWJraXQgPSB3ZWJraXQgJiYgL1F0XFwvXFxkK1xcLlxcZCsvLnRlc3QodXNlckFnZW50KTtcbiAgdmFyIGNocm9tZSA9ICFlZGdlICYmIC9DaHJvbWVcXC8oXFxkKykvLmV4ZWModXNlckFnZW50KTtcbiAgdmFyIGNocm9tZV92ZXJzaW9uID0gY2hyb21lICYmICtjaHJvbWVbMV07XG4gIHZhciBwcmVzdG8gPSAvT3BlcmFcXC8vLnRlc3QodXNlckFnZW50KTtcbiAgdmFyIHNhZmFyaSA9IC9BcHBsZSBDb21wdXRlci8udGVzdChuYXZpZ2F0b3IudmVuZG9yKTtcbiAgdmFyIG1hY19nZU1vdW50YWluTGlvbiA9IC9NYWMgT1MgWCAxXFxkXFxEKFs4LTldfFxcZFxcZClcXEQvLnRlc3QodXNlckFnZW50KTtcbiAgdmFyIHBoYW50b20gPSAvUGhhbnRvbUpTLy50ZXN0KHVzZXJBZ2VudCk7XG5cbiAgdmFyIGlvcyA9IHNhZmFyaSAmJiAoL01vYmlsZVxcL1xcdysvLnRlc3QodXNlckFnZW50KSB8fCBuYXZpZ2F0b3IubWF4VG91Y2hQb2ludHMgPiAyKTtcbiAgdmFyIGFuZHJvaWQgPSAvQW5kcm9pZC8udGVzdCh1c2VyQWdlbnQpO1xuICAvLyBUaGlzIGlzIHdvZWZ1bGx5IGluY29tcGxldGUuIFN1Z2dlc3Rpb25zIGZvciBhbHRlcm5hdGl2ZSBtZXRob2RzIHdlbGNvbWUuXG4gIHZhciBtb2JpbGUgPSBpb3MgfHwgYW5kcm9pZCB8fCAvd2ViT1N8QmxhY2tCZXJyeXxPcGVyYSBNaW5pfE9wZXJhIE1vYml8SUVNb2JpbGUvaS50ZXN0KHVzZXJBZ2VudCk7XG4gIHZhciBtYWMgPSBpb3MgfHwgL01hYy8udGVzdChwbGF0Zm9ybSk7XG4gIHZhciBjaHJvbWVPUyA9IC9cXGJDck9TXFxiLy50ZXN0KHVzZXJBZ2VudCk7XG4gIHZhciB3aW5kb3dzID0gL3dpbi9pLnRlc3QocGxhdGZvcm0pO1xuXG4gIHZhciBwcmVzdG9fdmVyc2lvbiA9IHByZXN0byAmJiB1c2VyQWdlbnQubWF0Y2goL1ZlcnNpb25cXC8oXFxkKlxcLlxcZCopLyk7XG4gIGlmIChwcmVzdG9fdmVyc2lvbikgeyBwcmVzdG9fdmVyc2lvbiA9IE51bWJlcihwcmVzdG9fdmVyc2lvblsxXSk7IH1cbiAgaWYgKHByZXN0b192ZXJzaW9uICYmIHByZXN0b192ZXJzaW9uID49IDE1KSB7IHByZXN0byA9IGZhbHNlOyB3ZWJraXQgPSB0cnVlOyB9XG4gIC8vIFNvbWUgYnJvd3NlcnMgdXNlIHRoZSB3cm9uZyBldmVudCBwcm9wZXJ0aWVzIHRvIHNpZ25hbCBjbWQvY3RybCBvbiBPUyBYXG4gIHZhciBmbGlwQ3RybENtZCA9IG1hYyAmJiAocXR3ZWJraXQgfHwgcHJlc3RvICYmIChwcmVzdG9fdmVyc2lvbiA9PSBudWxsIHx8IHByZXN0b192ZXJzaW9uIDwgMTIuMTEpKTtcbiAgdmFyIGNhcHR1cmVSaWdodENsaWNrID0gZ2Vja28gfHwgKGllICYmIGllX3ZlcnNpb24gPj0gOSk7XG5cbiAgZnVuY3Rpb24gY2xhc3NUZXN0KGNscykgeyByZXR1cm4gbmV3IFJlZ0V4cChcIihefFxcXFxzKVwiICsgY2xzICsgXCIoPzokfFxcXFxzKVxcXFxzKlwiKSB9XG5cbiAgdmFyIHJtQ2xhc3MgPSBmdW5jdGlvbihub2RlLCBjbHMpIHtcbiAgICB2YXIgY3VycmVudCA9IG5vZGUuY2xhc3NOYW1lO1xuICAgIHZhciBtYXRjaCA9IGNsYXNzVGVzdChjbHMpLmV4ZWMoY3VycmVudCk7XG4gICAgaWYgKG1hdGNoKSB7XG4gICAgICB2YXIgYWZ0ZXIgPSBjdXJyZW50LnNsaWNlKG1hdGNoLmluZGV4ICsgbWF0Y2hbMF0ubGVuZ3RoKTtcbiAgICAgIG5vZGUuY2xhc3NOYW1lID0gY3VycmVudC5zbGljZSgwLCBtYXRjaC5pbmRleCkgKyAoYWZ0ZXIgPyBtYXRjaFsxXSArIGFmdGVyIDogXCJcIik7XG4gICAgfVxuICB9O1xuXG4gIGZ1bmN0aW9uIHJlbW92ZUNoaWxkcmVuKGUpIHtcbiAgICBmb3IgKHZhciBjb3VudCA9IGUuY2hpbGROb2Rlcy5sZW5ndGg7IGNvdW50ID4gMDsgLS1jb3VudClcbiAgICAgIHsgZS5yZW1vdmVDaGlsZChlLmZpcnN0Q2hpbGQpOyB9XG4gICAgcmV0dXJuIGVcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbW92ZUNoaWxkcmVuQW5kQWRkKHBhcmVudCwgZSkge1xuICAgIHJldHVybiByZW1vdmVDaGlsZHJlbihwYXJlbnQpLmFwcGVuZENoaWxkKGUpXG4gIH1cblxuICBmdW5jdGlvbiBlbHQodGFnLCBjb250ZW50LCBjbGFzc05hbWUsIHN0eWxlKSB7XG4gICAgdmFyIGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHRhZyk7XG4gICAgaWYgKGNsYXNzTmFtZSkgeyBlLmNsYXNzTmFtZSA9IGNsYXNzTmFtZTsgfVxuICAgIGlmIChzdHlsZSkgeyBlLnN0eWxlLmNzc1RleHQgPSBzdHlsZTsgfVxuICAgIGlmICh0eXBlb2YgY29udGVudCA9PSBcInN0cmluZ1wiKSB7IGUuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY29udGVudCkpOyB9XG4gICAgZWxzZSBpZiAoY29udGVudCkgeyBmb3IgKHZhciBpID0gMDsgaSA8IGNvbnRlbnQubGVuZ3RoOyArK2kpIHsgZS5hcHBlbmRDaGlsZChjb250ZW50W2ldKTsgfSB9XG4gICAgcmV0dXJuIGVcbiAgfVxuICAvLyB3cmFwcGVyIGZvciBlbHQsIHdoaWNoIHJlbW92ZXMgdGhlIGVsdCBmcm9tIHRoZSBhY2Nlc3NpYmlsaXR5IHRyZWVcbiAgZnVuY3Rpb24gZWx0UCh0YWcsIGNvbnRlbnQsIGNsYXNzTmFtZSwgc3R5bGUpIHtcbiAgICB2YXIgZSA9IGVsdCh0YWcsIGNvbnRlbnQsIGNsYXNzTmFtZSwgc3R5bGUpO1xuICAgIGUuc2V0QXR0cmlidXRlKFwicm9sZVwiLCBcInByZXNlbnRhdGlvblwiKTtcbiAgICByZXR1cm4gZVxuICB9XG5cbiAgdmFyIHJhbmdlO1xuICBpZiAoZG9jdW1lbnQuY3JlYXRlUmFuZ2UpIHsgcmFuZ2UgPSBmdW5jdGlvbihub2RlLCBzdGFydCwgZW5kLCBlbmROb2RlKSB7XG4gICAgdmFyIHIgPSBkb2N1bWVudC5jcmVhdGVSYW5nZSgpO1xuICAgIHIuc2V0RW5kKGVuZE5vZGUgfHwgbm9kZSwgZW5kKTtcbiAgICByLnNldFN0YXJ0KG5vZGUsIHN0YXJ0KTtcbiAgICByZXR1cm4gclxuICB9OyB9XG4gIGVsc2UgeyByYW5nZSA9IGZ1bmN0aW9uKG5vZGUsIHN0YXJ0LCBlbmQpIHtcbiAgICB2YXIgciA9IGRvY3VtZW50LmJvZHkuY3JlYXRlVGV4dFJhbmdlKCk7XG4gICAgdHJ5IHsgci5tb3ZlVG9FbGVtZW50VGV4dChub2RlLnBhcmVudE5vZGUpOyB9XG4gICAgY2F0Y2goZSkgeyByZXR1cm4gciB9XG4gICAgci5jb2xsYXBzZSh0cnVlKTtcbiAgICByLm1vdmVFbmQoXCJjaGFyYWN0ZXJcIiwgZW5kKTtcbiAgICByLm1vdmVTdGFydChcImNoYXJhY3RlclwiLCBzdGFydCk7XG4gICAgcmV0dXJuIHJcbiAgfTsgfVxuXG4gIGZ1bmN0aW9uIGNvbnRhaW5zKHBhcmVudCwgY2hpbGQpIHtcbiAgICBpZiAoY2hpbGQubm9kZVR5cGUgPT0gMykgLy8gQW5kcm9pZCBicm93c2VyIGFsd2F5cyByZXR1cm5zIGZhbHNlIHdoZW4gY2hpbGQgaXMgYSB0ZXh0bm9kZVxuICAgICAgeyBjaGlsZCA9IGNoaWxkLnBhcmVudE5vZGU7IH1cbiAgICBpZiAocGFyZW50LmNvbnRhaW5zKVxuICAgICAgeyByZXR1cm4gcGFyZW50LmNvbnRhaW5zKGNoaWxkKSB9XG4gICAgZG8ge1xuICAgICAgaWYgKGNoaWxkLm5vZGVUeXBlID09IDExKSB7IGNoaWxkID0gY2hpbGQuaG9zdDsgfVxuICAgICAgaWYgKGNoaWxkID09IHBhcmVudCkgeyByZXR1cm4gdHJ1ZSB9XG4gICAgfSB3aGlsZSAoY2hpbGQgPSBjaGlsZC5wYXJlbnROb2RlKVxuICB9XG5cbiAgZnVuY3Rpb24gYWN0aXZlRWx0KHJvb3ROb2RlKSB7XG4gICAgLy8gSUUgYW5kIEVkZ2UgbWF5IHRocm93IGFuIFwiVW5zcGVjaWZpZWQgRXJyb3JcIiB3aGVuIGFjY2Vzc2luZyBkb2N1bWVudC5hY3RpdmVFbGVtZW50LlxuICAgIC8vIElFIDwgMTAgd2lsbCB0aHJvdyB3aGVuIGFjY2Vzc2VkIHdoaWxlIHRoZSBwYWdlIGlzIGxvYWRpbmcgb3IgaW4gYW4gaWZyYW1lLlxuICAgIC8vIElFID4gOSBhbmQgRWRnZSB3aWxsIHRocm93IHdoZW4gYWNjZXNzZWQgaW4gYW4gaWZyYW1lIGlmIGRvY3VtZW50LmJvZHkgaXMgdW5hdmFpbGFibGUuXG4gICAgdmFyIGRvYyA9IHJvb3ROb2RlLm93bmVyRG9jdW1lbnQgfHwgcm9vdE5vZGU7XG4gICAgdmFyIGFjdGl2ZUVsZW1lbnQ7XG4gICAgdHJ5IHtcbiAgICAgIGFjdGl2ZUVsZW1lbnQgPSByb290Tm9kZS5hY3RpdmVFbGVtZW50O1xuICAgIH0gY2F0Y2goZSkge1xuICAgICAgYWN0aXZlRWxlbWVudCA9IGRvYy5ib2R5IHx8IG51bGw7XG4gICAgfVxuICAgIHdoaWxlIChhY3RpdmVFbGVtZW50ICYmIGFjdGl2ZUVsZW1lbnQuc2hhZG93Um9vdCAmJiBhY3RpdmVFbGVtZW50LnNoYWRvd1Jvb3QuYWN0aXZlRWxlbWVudClcbiAgICAgIHsgYWN0aXZlRWxlbWVudCA9IGFjdGl2ZUVsZW1lbnQuc2hhZG93Um9vdC5hY3RpdmVFbGVtZW50OyB9XG4gICAgcmV0dXJuIGFjdGl2ZUVsZW1lbnRcbiAgfVxuXG4gIGZ1bmN0aW9uIGFkZENsYXNzKG5vZGUsIGNscykge1xuICAgIHZhciBjdXJyZW50ID0gbm9kZS5jbGFzc05hbWU7XG4gICAgaWYgKCFjbGFzc1Rlc3QoY2xzKS50ZXN0KGN1cnJlbnQpKSB7IG5vZGUuY2xhc3NOYW1lICs9IChjdXJyZW50ID8gXCIgXCIgOiBcIlwiKSArIGNsczsgfVxuICB9XG4gIGZ1bmN0aW9uIGpvaW5DbGFzc2VzKGEsIGIpIHtcbiAgICB2YXIgYXMgPSBhLnNwbGl0KFwiIFwiKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFzLmxlbmd0aDsgaSsrKVxuICAgICAgeyBpZiAoYXNbaV0gJiYgIWNsYXNzVGVzdChhc1tpXSkudGVzdChiKSkgeyBiICs9IFwiIFwiICsgYXNbaV07IH0gfVxuICAgIHJldHVybiBiXG4gIH1cblxuICB2YXIgc2VsZWN0SW5wdXQgPSBmdW5jdGlvbihub2RlKSB7IG5vZGUuc2VsZWN0KCk7IH07XG4gIGlmIChpb3MpIC8vIE1vYmlsZSBTYWZhcmkgYXBwYXJlbnRseSBoYXMgYSBidWcgd2hlcmUgc2VsZWN0KCkgaXMgYnJva2VuLlxuICAgIHsgc2VsZWN0SW5wdXQgPSBmdW5jdGlvbihub2RlKSB7IG5vZGUuc2VsZWN0aW9uU3RhcnQgPSAwOyBub2RlLnNlbGVjdGlvbkVuZCA9IG5vZGUudmFsdWUubGVuZ3RoOyB9OyB9XG4gIGVsc2UgaWYgKGllKSAvLyBTdXBwcmVzcyBteXN0ZXJpb3VzIElFMTAgZXJyb3JzXG4gICAgeyBzZWxlY3RJbnB1dCA9IGZ1bmN0aW9uKG5vZGUpIHsgdHJ5IHsgbm9kZS5zZWxlY3QoKTsgfSBjYXRjaChfZSkge30gfTsgfVxuXG4gIGZ1bmN0aW9uIGRvYyhjbSkgeyByZXR1cm4gY20uZGlzcGxheS53cmFwcGVyLm93bmVyRG9jdW1lbnQgfVxuXG4gIGZ1bmN0aW9uIHJvb3QoY20pIHtcbiAgICByZXR1cm4gcm9vdE5vZGUoY20uZGlzcGxheS53cmFwcGVyKVxuICB9XG5cbiAgZnVuY3Rpb24gcm9vdE5vZGUoZWxlbWVudCkge1xuICAgIC8vIERldGVjdCBtb2Rlcm4gYnJvd3NlcnMgKDIwMTcrKS5cbiAgICByZXR1cm4gZWxlbWVudC5nZXRSb290Tm9kZSA/IGVsZW1lbnQuZ2V0Um9vdE5vZGUoKSA6IGVsZW1lbnQub3duZXJEb2N1bWVudFxuICB9XG5cbiAgZnVuY3Rpb24gd2luKGNtKSB7IHJldHVybiBkb2MoY20pLmRlZmF1bHRWaWV3IH1cblxuICBmdW5jdGlvbiBiaW5kKGYpIHtcbiAgICB2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGYuYXBwbHkobnVsbCwgYXJncyl9XG4gIH1cblxuICBmdW5jdGlvbiBjb3B5T2JqKG9iaiwgdGFyZ2V0LCBvdmVyd3JpdGUpIHtcbiAgICBpZiAoIXRhcmdldCkgeyB0YXJnZXQgPSB7fTsgfVxuICAgIGZvciAodmFyIHByb3AgaW4gb2JqKVxuICAgICAgeyBpZiAob2JqLmhhc093blByb3BlcnR5KHByb3ApICYmIChvdmVyd3JpdGUgIT09IGZhbHNlIHx8ICF0YXJnZXQuaGFzT3duUHJvcGVydHkocHJvcCkpKVxuICAgICAgICB7IHRhcmdldFtwcm9wXSA9IG9ialtwcm9wXTsgfSB9XG4gICAgcmV0dXJuIHRhcmdldFxuICB9XG5cbiAgLy8gQ291bnRzIHRoZSBjb2x1bW4gb2Zmc2V0IGluIGEgc3RyaW5nLCB0YWtpbmcgdGFicyBpbnRvIGFjY291bnQuXG4gIC8vIFVzZWQgbW9zdGx5IHRvIGZpbmQgaW5kZW50YXRpb24uXG4gIGZ1bmN0aW9uIGNvdW50Q29sdW1uKHN0cmluZywgZW5kLCB0YWJTaXplLCBzdGFydEluZGV4LCBzdGFydFZhbHVlKSB7XG4gICAgaWYgKGVuZCA9PSBudWxsKSB7XG4gICAgICBlbmQgPSBzdHJpbmcuc2VhcmNoKC9bXlxcc1xcdTAwYTBdLyk7XG4gICAgICBpZiAoZW5kID09IC0xKSB7IGVuZCA9IHN0cmluZy5sZW5ndGg7IH1cbiAgICB9XG4gICAgZm9yICh2YXIgaSA9IHN0YXJ0SW5kZXggfHwgMCwgbiA9IHN0YXJ0VmFsdWUgfHwgMDs7KSB7XG4gICAgICB2YXIgbmV4dFRhYiA9IHN0cmluZy5pbmRleE9mKFwiXFx0XCIsIGkpO1xuICAgICAgaWYgKG5leHRUYWIgPCAwIHx8IG5leHRUYWIgPj0gZW5kKVxuICAgICAgICB7IHJldHVybiBuICsgKGVuZCAtIGkpIH1cbiAgICAgIG4gKz0gbmV4dFRhYiAtIGk7XG4gICAgICBuICs9IHRhYlNpemUgLSAobiAlIHRhYlNpemUpO1xuICAgICAgaSA9IG5leHRUYWIgKyAxO1xuICAgIH1cbiAgfVxuXG4gIHZhciBEZWxheWVkID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5pZCA9IG51bGw7XG4gICAgdGhpcy5mID0gbnVsbDtcbiAgICB0aGlzLnRpbWUgPSAwO1xuICAgIHRoaXMuaGFuZGxlciA9IGJpbmQodGhpcy5vblRpbWVvdXQsIHRoaXMpO1xuICB9O1xuICBEZWxheWVkLnByb3RvdHlwZS5vblRpbWVvdXQgPSBmdW5jdGlvbiAoc2VsZikge1xuICAgIHNlbGYuaWQgPSAwO1xuICAgIGlmIChzZWxmLnRpbWUgPD0gK25ldyBEYXRlKSB7XG4gICAgICBzZWxmLmYoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2V0VGltZW91dChzZWxmLmhhbmRsZXIsIHNlbGYudGltZSAtICtuZXcgRGF0ZSk7XG4gICAgfVxuICB9O1xuICBEZWxheWVkLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAobXMsIGYpIHtcbiAgICB0aGlzLmYgPSBmO1xuICAgIHZhciB0aW1lID0gK25ldyBEYXRlICsgbXM7XG4gICAgaWYgKCF0aGlzLmlkIHx8IHRpbWUgPCB0aGlzLnRpbWUpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLmlkKTtcbiAgICAgIHRoaXMuaWQgPSBzZXRUaW1lb3V0KHRoaXMuaGFuZGxlciwgbXMpO1xuICAgICAgdGhpcy50aW1lID0gdGltZTtcbiAgICB9XG4gIH07XG5cbiAgZnVuY3Rpb24gaW5kZXhPZihhcnJheSwgZWx0KSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnJheS5sZW5ndGg7ICsraSlcbiAgICAgIHsgaWYgKGFycmF5W2ldID09IGVsdCkgeyByZXR1cm4gaSB9IH1cbiAgICByZXR1cm4gLTFcbiAgfVxuXG4gIC8vIE51bWJlciBvZiBwaXhlbHMgYWRkZWQgdG8gc2Nyb2xsZXIgYW5kIHNpemVyIHRvIGhpZGUgc2Nyb2xsYmFyXG4gIHZhciBzY3JvbGxlckdhcCA9IDUwO1xuXG4gIC8vIFJldHVybmVkIG9yIHRocm93biBieSB2YXJpb3VzIHByb3RvY29scyB0byBzaWduYWwgJ0knbSBub3RcbiAgLy8gaGFuZGxpbmcgdGhpcycuXG4gIHZhciBQYXNzID0ge3RvU3RyaW5nOiBmdW5jdGlvbigpe3JldHVybiBcIkNvZGVNaXJyb3IuUGFzc1wifX07XG5cbiAgLy8gUmV1c2VkIG9wdGlvbiBvYmplY3RzIGZvciBzZXRTZWxlY3Rpb24gJiBmcmllbmRzXG4gIHZhciBzZWxfZG9udFNjcm9sbCA9IHtzY3JvbGw6IGZhbHNlfSwgc2VsX21vdXNlID0ge29yaWdpbjogXCIqbW91c2VcIn0sIHNlbF9tb3ZlID0ge29yaWdpbjogXCIrbW92ZVwifTtcblxuICAvLyBUaGUgaW52ZXJzZSBvZiBjb3VudENvbHVtbiAtLSBmaW5kIHRoZSBvZmZzZXQgdGhhdCBjb3JyZXNwb25kcyB0b1xuICAvLyBhIHBhcnRpY3VsYXIgY29sdW1uLlxuICBmdW5jdGlvbiBmaW5kQ29sdW1uKHN0cmluZywgZ29hbCwgdGFiU2l6ZSkge1xuICAgIGZvciAodmFyIHBvcyA9IDAsIGNvbCA9IDA7Oykge1xuICAgICAgdmFyIG5leHRUYWIgPSBzdHJpbmcuaW5kZXhPZihcIlxcdFwiLCBwb3MpO1xuICAgICAgaWYgKG5leHRUYWIgPT0gLTEpIHsgbmV4dFRhYiA9IHN0cmluZy5sZW5ndGg7IH1cbiAgICAgIHZhciBza2lwcGVkID0gbmV4dFRhYiAtIHBvcztcbiAgICAgIGlmIChuZXh0VGFiID09IHN0cmluZy5sZW5ndGggfHwgY29sICsgc2tpcHBlZCA+PSBnb2FsKVxuICAgICAgICB7IHJldHVybiBwb3MgKyBNYXRoLm1pbihza2lwcGVkLCBnb2FsIC0gY29sKSB9XG4gICAgICBjb2wgKz0gbmV4dFRhYiAtIHBvcztcbiAgICAgIGNvbCArPSB0YWJTaXplIC0gKGNvbCAlIHRhYlNpemUpO1xuICAgICAgcG9zID0gbmV4dFRhYiArIDE7XG4gICAgICBpZiAoY29sID49IGdvYWwpIHsgcmV0dXJuIHBvcyB9XG4gICAgfVxuICB9XG5cbiAgdmFyIHNwYWNlU3RycyA9IFtcIlwiXTtcbiAgZnVuY3Rpb24gc3BhY2VTdHIobikge1xuICAgIHdoaWxlIChzcGFjZVN0cnMubGVuZ3RoIDw9IG4pXG4gICAgICB7IHNwYWNlU3Rycy5wdXNoKGxzdChzcGFjZVN0cnMpICsgXCIgXCIpOyB9XG4gICAgcmV0dXJuIHNwYWNlU3Ryc1tuXVxuICB9XG5cbiAgZnVuY3Rpb24gbHN0KGFycikgeyByZXR1cm4gYXJyW2Fyci5sZW5ndGgtMV0gfVxuXG4gIGZ1bmN0aW9uIG1hcChhcnJheSwgZikge1xuICAgIHZhciBvdXQgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFycmF5Lmxlbmd0aDsgaSsrKSB7IG91dFtpXSA9IGYoYXJyYXlbaV0sIGkpOyB9XG4gICAgcmV0dXJuIG91dFxuICB9XG5cbiAgZnVuY3Rpb24gaW5zZXJ0U29ydGVkKGFycmF5LCB2YWx1ZSwgc2NvcmUpIHtcbiAgICB2YXIgcG9zID0gMCwgcHJpb3JpdHkgPSBzY29yZSh2YWx1ZSk7XG4gICAgd2hpbGUgKHBvcyA8IGFycmF5Lmxlbmd0aCAmJiBzY29yZShhcnJheVtwb3NdKSA8PSBwcmlvcml0eSkgeyBwb3MrKzsgfVxuICAgIGFycmF5LnNwbGljZShwb3MsIDAsIHZhbHVlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG5vdGhpbmcoKSB7fVxuXG4gIGZ1bmN0aW9uIGNyZWF0ZU9iaihiYXNlLCBwcm9wcykge1xuICAgIHZhciBpbnN0O1xuICAgIGlmIChPYmplY3QuY3JlYXRlKSB7XG4gICAgICBpbnN0ID0gT2JqZWN0LmNyZWF0ZShiYXNlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbm90aGluZy5wcm90b3R5cGUgPSBiYXNlO1xuICAgICAgaW5zdCA9IG5ldyBub3RoaW5nKCk7XG4gICAgfVxuICAgIGlmIChwcm9wcykgeyBjb3B5T2JqKHByb3BzLCBpbnN0KTsgfVxuICAgIHJldHVybiBpbnN0XG4gIH1cblxuICB2YXIgbm9uQVNDSUlTaW5nbGVDYXNlV29yZENoYXIgPSAvW1xcdTAwZGZcXHUwNTg3XFx1MDU5MC1cXHUwNWY0XFx1MDYwMC1cXHUwNmZmXFx1MzA0MC1cXHUzMDlmXFx1MzBhMC1cXHUzMGZmXFx1MzQwMC1cXHU0ZGI1XFx1NGUwMC1cXHU5ZmNjXFx1YWMwMC1cXHVkN2FmXS87XG4gIGZ1bmN0aW9uIGlzV29yZENoYXJCYXNpYyhjaCkge1xuICAgIHJldHVybiAvXFx3Ly50ZXN0KGNoKSB8fCBjaCA+IFwiXFx4ODBcIiAmJlxuICAgICAgKGNoLnRvVXBwZXJDYXNlKCkgIT0gY2gudG9Mb3dlckNhc2UoKSB8fCBub25BU0NJSVNpbmdsZUNhc2VXb3JkQ2hhci50ZXN0KGNoKSlcbiAgfVxuICBmdW5jdGlvbiBpc1dvcmRDaGFyKGNoLCBoZWxwZXIpIHtcbiAgICBpZiAoIWhlbHBlcikgeyByZXR1cm4gaXNXb3JkQ2hhckJhc2ljKGNoKSB9XG4gICAgaWYgKGhlbHBlci5zb3VyY2UuaW5kZXhPZihcIlxcXFx3XCIpID4gLTEgJiYgaXNXb3JkQ2hhckJhc2ljKGNoKSkgeyByZXR1cm4gdHJ1ZSB9XG4gICAgcmV0dXJuIGhlbHBlci50ZXN0KGNoKVxuICB9XG5cbiAgZnVuY3Rpb24gaXNFbXB0eShvYmopIHtcbiAgICBmb3IgKHZhciBuIGluIG9iaikgeyBpZiAob2JqLmhhc093blByb3BlcnR5KG4pICYmIG9ialtuXSkgeyByZXR1cm4gZmFsc2UgfSB9XG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIC8vIEV4dGVuZGluZyB1bmljb2RlIGNoYXJhY3RlcnMuIEEgc2VyaWVzIG9mIGEgbm9uLWV4dGVuZGluZyBjaGFyICtcbiAgLy8gYW55IG51bWJlciBvZiBleHRlbmRpbmcgY2hhcnMgaXMgdHJlYXRlZCBhcyBhIHNpbmdsZSB1bml0IGFzIGZhclxuICAvLyBhcyBlZGl0aW5nIGFuZCBtZWFzdXJpbmcgaXMgY29uY2VybmVkLiBUaGlzIGlzIG5vdCBmdWxseSBjb3JyZWN0LFxuICAvLyBzaW5jZSBzb21lIHNjcmlwdHMvZm9udHMvYnJvd3NlcnMgYWxzbyB0cmVhdCBvdGhlciBjb25maWd1cmF0aW9uc1xuICAvLyBvZiBjb2RlIHBvaW50cyBhcyBhIGdyb3VwLlxuICB2YXIgZXh0ZW5kaW5nQ2hhcnMgPSAvW1xcdTAzMDAtXFx1MDM2ZlxcdTA0ODMtXFx1MDQ4OVxcdTA1OTEtXFx1MDViZFxcdTA1YmZcXHUwNWMxXFx1MDVjMlxcdTA1YzRcXHUwNWM1XFx1MDVjN1xcdTA2MTAtXFx1MDYxYVxcdTA2NGItXFx1MDY1ZVxcdTA2NzBcXHUwNmQ2LVxcdTA2ZGNcXHUwNmRlLVxcdTA2ZTRcXHUwNmU3XFx1MDZlOFxcdTA2ZWEtXFx1MDZlZFxcdTA3MTFcXHUwNzMwLVxcdTA3NGFcXHUwN2E2LVxcdTA3YjBcXHUwN2ViLVxcdTA3ZjNcXHUwODE2LVxcdTA4MTlcXHUwODFiLVxcdTA4MjNcXHUwODI1LVxcdTA4MjdcXHUwODI5LVxcdTA4MmRcXHUwOTAwLVxcdTA5MDJcXHUwOTNjXFx1MDk0MS1cXHUwOTQ4XFx1MDk0ZFxcdTA5NTEtXFx1MDk1NVxcdTA5NjJcXHUwOTYzXFx1MDk4MVxcdTA5YmNcXHUwOWJlXFx1MDljMS1cXHUwOWM0XFx1MDljZFxcdTA5ZDdcXHUwOWUyXFx1MDllM1xcdTBhMDFcXHUwYTAyXFx1MGEzY1xcdTBhNDFcXHUwYTQyXFx1MGE0N1xcdTBhNDhcXHUwYTRiLVxcdTBhNGRcXHUwYTUxXFx1MGE3MFxcdTBhNzFcXHUwYTc1XFx1MGE4MVxcdTBhODJcXHUwYWJjXFx1MGFjMS1cXHUwYWM1XFx1MGFjN1xcdTBhYzhcXHUwYWNkXFx1MGFlMlxcdTBhZTNcXHUwYjAxXFx1MGIzY1xcdTBiM2VcXHUwYjNmXFx1MGI0MS1cXHUwYjQ0XFx1MGI0ZFxcdTBiNTZcXHUwYjU3XFx1MGI2MlxcdTBiNjNcXHUwYjgyXFx1MGJiZVxcdTBiYzBcXHUwYmNkXFx1MGJkN1xcdTBjM2UtXFx1MGM0MFxcdTBjNDYtXFx1MGM0OFxcdTBjNGEtXFx1MGM0ZFxcdTBjNTVcXHUwYzU2XFx1MGM2MlxcdTBjNjNcXHUwY2JjXFx1MGNiZlxcdTBjYzJcXHUwY2M2XFx1MGNjY1xcdTBjY2RcXHUwY2Q1XFx1MGNkNlxcdTBjZTJcXHUwY2UzXFx1MGQzZVxcdTBkNDEtXFx1MGQ0NFxcdTBkNGRcXHUwZDU3XFx1MGQ2MlxcdTBkNjNcXHUwZGNhXFx1MGRjZlxcdTBkZDItXFx1MGRkNFxcdTBkZDZcXHUwZGRmXFx1MGUzMVxcdTBlMzQtXFx1MGUzYVxcdTBlNDctXFx1MGU0ZVxcdTBlYjFcXHUwZWI0LVxcdTBlYjlcXHUwZWJiXFx1MGViY1xcdTBlYzgtXFx1MGVjZFxcdTBmMThcXHUwZjE5XFx1MGYzNVxcdTBmMzdcXHUwZjM5XFx1MGY3MS1cXHUwZjdlXFx1MGY4MC1cXHUwZjg0XFx1MGY4NlxcdTBmODdcXHUwZjkwLVxcdTBmOTdcXHUwZjk5LVxcdTBmYmNcXHUwZmM2XFx1MTAyZC1cXHUxMDMwXFx1MTAzMi1cXHUxMDM3XFx1MTAzOVxcdTEwM2FcXHUxMDNkXFx1MTAzZVxcdTEwNThcXHUxMDU5XFx1MTA1ZS1cXHUxMDYwXFx1MTA3MS1cXHUxMDc0XFx1MTA4MlxcdTEwODVcXHUxMDg2XFx1MTA4ZFxcdTEwOWRcXHUxMzVmXFx1MTcxMi1cXHUxNzE0XFx1MTczMi1cXHUxNzM0XFx1MTc1MlxcdTE3NTNcXHUxNzcyXFx1MTc3M1xcdTE3YjctXFx1MTdiZFxcdTE3YzZcXHUxN2M5LVxcdTE3ZDNcXHUxN2RkXFx1MTgwYi1cXHUxODBkXFx1MThhOVxcdTE5MjAtXFx1MTkyMlxcdTE5MjdcXHUxOTI4XFx1MTkzMlxcdTE5MzktXFx1MTkzYlxcdTFhMTdcXHUxYTE4XFx1MWE1NlxcdTFhNTgtXFx1MWE1ZVxcdTFhNjBcXHUxYTYyXFx1MWE2NS1cXHUxYTZjXFx1MWE3My1cXHUxYTdjXFx1MWE3ZlxcdTFiMDAtXFx1MWIwM1xcdTFiMzRcXHUxYjM2LVxcdTFiM2FcXHUxYjNjXFx1MWI0MlxcdTFiNmItXFx1MWI3M1xcdTFiODBcXHUxYjgxXFx1MWJhMi1cXHUxYmE1XFx1MWJhOFxcdTFiYTlcXHUxYzJjLVxcdTFjMzNcXHUxYzM2XFx1MWMzN1xcdTFjZDAtXFx1MWNkMlxcdTFjZDQtXFx1MWNlMFxcdTFjZTItXFx1MWNlOFxcdTFjZWRcXHUxZGMwLVxcdTFkZTZcXHUxZGZkLVxcdTFkZmZcXHUyMDBjXFx1MjAwZFxcdTIwZDAtXFx1MjBmMFxcdTJjZWYtXFx1MmNmMVxcdTJkZTAtXFx1MmRmZlxcdTMwMmEtXFx1MzAyZlxcdTMwOTlcXHUzMDlhXFx1YTY2Zi1cXHVhNjcyXFx1YTY3Y1xcdWE2N2RcXHVhNmYwXFx1YTZmMVxcdWE4MDJcXHVhODA2XFx1YTgwYlxcdWE4MjVcXHVhODI2XFx1YThjNFxcdWE4ZTAtXFx1YThmMVxcdWE5MjYtXFx1YTkyZFxcdWE5NDctXFx1YTk1MVxcdWE5ODAtXFx1YTk4MlxcdWE5YjNcXHVhOWI2LVxcdWE5YjlcXHVhOWJjXFx1YWEyOS1cXHVhYTJlXFx1YWEzMVxcdWFhMzJcXHVhYTM1XFx1YWEzNlxcdWFhNDNcXHVhYTRjXFx1YWFiMFxcdWFhYjItXFx1YWFiNFxcdWFhYjdcXHVhYWI4XFx1YWFiZVxcdWFhYmZcXHVhYWMxXFx1YWJlNVxcdWFiZThcXHVhYmVkXFx1ZGMwMC1cXHVkZmZmXFx1ZmIxZVxcdWZlMDAtXFx1ZmUwZlxcdWZlMjAtXFx1ZmUyNlxcdWZmOWVcXHVmZjlmXS87XG4gIGZ1bmN0aW9uIGlzRXh0ZW5kaW5nQ2hhcihjaCkgeyByZXR1cm4gY2guY2hhckNvZGVBdCgwKSA+PSA3NjggJiYgZXh0ZW5kaW5nQ2hhcnMudGVzdChjaCkgfVxuXG4gIC8vIFJldHVybnMgYSBudW1iZXIgZnJvbSB0aGUgcmFuZ2UgW2AwYDsgYHN0ci5sZW5ndGhgXSB1bmxlc3MgYHBvc2AgaXMgb3V0c2lkZSB0aGF0IHJhbmdlLlxuICBmdW5jdGlvbiBza2lwRXh0ZW5kaW5nQ2hhcnMoc3RyLCBwb3MsIGRpcikge1xuICAgIHdoaWxlICgoZGlyIDwgMCA/IHBvcyA+IDAgOiBwb3MgPCBzdHIubGVuZ3RoKSAmJiBpc0V4dGVuZGluZ0NoYXIoc3RyLmNoYXJBdChwb3MpKSkgeyBwb3MgKz0gZGlyOyB9XG4gICAgcmV0dXJuIHBvc1xuICB9XG5cbiAgLy8gUmV0dXJucyB0aGUgdmFsdWUgZnJvbSB0aGUgcmFuZ2UgW2Bmcm9tYDsgYHRvYF0gdGhhdCBzYXRpc2ZpZXNcbiAgLy8gYHByZWRgIGFuZCBpcyBjbG9zZXN0IHRvIGBmcm9tYC4gQXNzdW1lcyB0aGF0IGF0IGxlYXN0IGB0b2BcbiAgLy8gc2F0aXNmaWVzIGBwcmVkYC4gU3VwcG9ydHMgYGZyb21gIGJlaW5nIGdyZWF0ZXIgdGhhbiBgdG9gLlxuICBmdW5jdGlvbiBmaW5kRmlyc3QocHJlZCwgZnJvbSwgdG8pIHtcbiAgICAvLyBBdCBhbnkgcG9pbnQgd2UgYXJlIGNlcnRhaW4gYHRvYCBzYXRpc2ZpZXMgYHByZWRgLCBkb24ndCBrbm93XG4gICAgLy8gd2hldGhlciBgZnJvbWAgZG9lcy5cbiAgICB2YXIgZGlyID0gZnJvbSA+IHRvID8gLTEgOiAxO1xuICAgIGZvciAoOzspIHtcbiAgICAgIGlmIChmcm9tID09IHRvKSB7IHJldHVybiBmcm9tIH1cbiAgICAgIHZhciBtaWRGID0gKGZyb20gKyB0bykgLyAyLCBtaWQgPSBkaXIgPCAwID8gTWF0aC5jZWlsKG1pZEYpIDogTWF0aC5mbG9vcihtaWRGKTtcbiAgICAgIGlmIChtaWQgPT0gZnJvbSkgeyByZXR1cm4gcHJlZChtaWQpID8gZnJvbSA6IHRvIH1cbiAgICAgIGlmIChwcmVkKG1pZCkpIHsgdG8gPSBtaWQ7IH1cbiAgICAgIGVsc2UgeyBmcm9tID0gbWlkICsgZGlyOyB9XG4gICAgfVxuICB9XG5cbiAgLy8gQklESSBIRUxQRVJTXG5cbiAgZnVuY3Rpb24gaXRlcmF0ZUJpZGlTZWN0aW9ucyhvcmRlciwgZnJvbSwgdG8sIGYpIHtcbiAgICBpZiAoIW9yZGVyKSB7IHJldHVybiBmKGZyb20sIHRvLCBcImx0clwiLCAwKSB9XG4gICAgdmFyIGZvdW5kID0gZmFsc2U7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvcmRlci5sZW5ndGg7ICsraSkge1xuICAgICAgdmFyIHBhcnQgPSBvcmRlcltpXTtcbiAgICAgIGlmIChwYXJ0LmZyb20gPCB0byAmJiBwYXJ0LnRvID4gZnJvbSB8fCBmcm9tID09IHRvICYmIHBhcnQudG8gPT0gZnJvbSkge1xuICAgICAgICBmKE1hdGgubWF4KHBhcnQuZnJvbSwgZnJvbSksIE1hdGgubWluKHBhcnQudG8sIHRvKSwgcGFydC5sZXZlbCA9PSAxID8gXCJydGxcIiA6IFwibHRyXCIsIGkpO1xuICAgICAgICBmb3VuZCA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICghZm91bmQpIHsgZihmcm9tLCB0bywgXCJsdHJcIik7IH1cbiAgfVxuXG4gIHZhciBiaWRpT3RoZXIgPSBudWxsO1xuICBmdW5jdGlvbiBnZXRCaWRpUGFydEF0KG9yZGVyLCBjaCwgc3RpY2t5KSB7XG4gICAgdmFyIGZvdW5kO1xuICAgIGJpZGlPdGhlciA9IG51bGw7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvcmRlci5sZW5ndGg7ICsraSkge1xuICAgICAgdmFyIGN1ciA9IG9yZGVyW2ldO1xuICAgICAgaWYgKGN1ci5mcm9tIDwgY2ggJiYgY3VyLnRvID4gY2gpIHsgcmV0dXJuIGkgfVxuICAgICAgaWYgKGN1ci50byA9PSBjaCkge1xuICAgICAgICBpZiAoY3VyLmZyb20gIT0gY3VyLnRvICYmIHN0aWNreSA9PSBcImJlZm9yZVwiKSB7IGZvdW5kID0gaTsgfVxuICAgICAgICBlbHNlIHsgYmlkaU90aGVyID0gaTsgfVxuICAgICAgfVxuICAgICAgaWYgKGN1ci5mcm9tID09IGNoKSB7XG4gICAgICAgIGlmIChjdXIuZnJvbSAhPSBjdXIudG8gJiYgc3RpY2t5ICE9IFwiYmVmb3JlXCIpIHsgZm91bmQgPSBpOyB9XG4gICAgICAgIGVsc2UgeyBiaWRpT3RoZXIgPSBpOyB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmb3VuZCAhPSBudWxsID8gZm91bmQgOiBiaWRpT3RoZXJcbiAgfVxuXG4gIC8vIEJpZGlyZWN0aW9uYWwgb3JkZXJpbmcgYWxnb3JpdGhtXG4gIC8vIFNlZSBodHRwOi8vdW5pY29kZS5vcmcvcmVwb3J0cy90cjkvdHI5LTEzLmh0bWwgZm9yIHRoZSBhbGdvcml0aG1cbiAgLy8gdGhhdCB0aGlzIChwYXJ0aWFsbHkpIGltcGxlbWVudHMuXG5cbiAgLy8gT25lLWNoYXIgY29kZXMgdXNlZCBmb3IgY2hhcmFjdGVyIHR5cGVzOlxuICAvLyBMIChMKTogICBMZWZ0LXRvLVJpZ2h0XG4gIC8vIFIgKFIpOiAgIFJpZ2h0LXRvLUxlZnRcbiAgLy8gciAoQUwpOiAgUmlnaHQtdG8tTGVmdCBBcmFiaWNcbiAgLy8gMSAoRU4pOiAgRXVyb3BlYW4gTnVtYmVyXG4gIC8vICsgKEVTKTogIEV1cm9wZWFuIE51bWJlciBTZXBhcmF0b3JcbiAgLy8gJSAoRVQpOiAgRXVyb3BlYW4gTnVtYmVyIFRlcm1pbmF0b3JcbiAgLy8gbiAoQU4pOiAgQXJhYmljIE51bWJlclxuICAvLyAsIChDUyk6ICBDb21tb24gTnVtYmVyIFNlcGFyYXRvclxuICAvLyBtIChOU00pOiBOb24tU3BhY2luZyBNYXJrXG4gIC8vIGIgKEJOKTogIEJvdW5kYXJ5IE5ldXRyYWxcbiAgLy8gcyAoQik6ICAgUGFyYWdyYXBoIFNlcGFyYXRvclxuICAvLyB0IChTKTogICBTZWdtZW50IFNlcGFyYXRvclxuICAvLyB3IChXUyk6ICBXaGl0ZXNwYWNlXG4gIC8vIE4gKE9OKTogIE90aGVyIE5ldXRyYWxzXG5cbiAgLy8gUmV0dXJucyBudWxsIGlmIGNoYXJhY3RlcnMgYXJlIG9yZGVyZWQgYXMgdGhleSBhcHBlYXJcbiAgLy8gKGxlZnQtdG8tcmlnaHQpLCBvciBhbiBhcnJheSBvZiBzZWN0aW9ucyAoe2Zyb20sIHRvLCBsZXZlbH1cbiAgLy8gb2JqZWN0cykgaW4gdGhlIG9yZGVyIGluIHdoaWNoIHRoZXkgb2NjdXIgdmlzdWFsbHkuXG4gIHZhciBiaWRpT3JkZXJpbmcgPSAoZnVuY3Rpb24oKSB7XG4gICAgLy8gQ2hhcmFjdGVyIHR5cGVzIGZvciBjb2RlcG9pbnRzIDAgdG8gMHhmZlxuICAgIHZhciBsb3dUeXBlcyA9IFwiYmJiYmJiYmJidHN0d3NiYmJiYmJiYmJiYmJiYnNzc3R3Tk4lJSVOTk5OTk4sTixOMTExMTExMTExMU5OTk5OTk5MTExMTExMTExMTExMTExMTExMTExMTExMTE5OTk5OTkxMTExMTExMTExMTExMTExMTExMTExMTExMTk5OTmJiYmJiYnNiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYixOJSUlJU5OTk5MTk5OTk4lJTExTkxOTk4xTE5OTk5OTExMTExMTExMTExMTExMTExMTExMTExOTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTE5cIjtcbiAgICAvLyBDaGFyYWN0ZXIgdHlwZXMgZm9yIGNvZGVwb2ludHMgMHg2MDAgdG8gMHg2ZjlcbiAgICB2YXIgYXJhYmljVHlwZXMgPSBcIm5ubm5ubk5OciUlcixyTk5tbW1tbW1tbW1tbXJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycm1tbW1tbW1tbW1tbW1tbW1tbW1tbW5ubm5ubm5ubm4lbm5ycnJtcnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJtbW1tbW1tbk5tbW1tbW1ycm1tTm1tbW1ycjExMTExMTExMTFcIjtcbiAgICBmdW5jdGlvbiBjaGFyVHlwZShjb2RlKSB7XG4gICAgICBpZiAoY29kZSA8PSAweGY3KSB7IHJldHVybiBsb3dUeXBlcy5jaGFyQXQoY29kZSkgfVxuICAgICAgZWxzZSBpZiAoMHg1OTAgPD0gY29kZSAmJiBjb2RlIDw9IDB4NWY0KSB7IHJldHVybiBcIlJcIiB9XG4gICAgICBlbHNlIGlmICgweDYwMCA8PSBjb2RlICYmIGNvZGUgPD0gMHg2ZjkpIHsgcmV0dXJuIGFyYWJpY1R5cGVzLmNoYXJBdChjb2RlIC0gMHg2MDApIH1cbiAgICAgIGVsc2UgaWYgKDB4NmVlIDw9IGNvZGUgJiYgY29kZSA8PSAweDhhYykgeyByZXR1cm4gXCJyXCIgfVxuICAgICAgZWxzZSBpZiAoMHgyMDAwIDw9IGNvZGUgJiYgY29kZSA8PSAweDIwMGIpIHsgcmV0dXJuIFwid1wiIH1cbiAgICAgIGVsc2UgaWYgKGNvZGUgPT0gMHgyMDBjKSB7IHJldHVybiBcImJcIiB9XG4gICAgICBlbHNlIHsgcmV0dXJuIFwiTFwiIH1cbiAgICB9XG5cbiAgICB2YXIgYmlkaVJFID0gL1tcXHUwNTkwLVxcdTA1ZjRcXHUwNjAwLVxcdTA2ZmZcXHUwNzAwLVxcdTA4YWNdLztcbiAgICB2YXIgaXNOZXV0cmFsID0gL1tzdHdOXS8sIGlzU3Ryb25nID0gL1tMUnJdLywgY291bnRzQXNMZWZ0ID0gL1tMYjFuXS8sIGNvdW50c0FzTnVtID0gL1sxbl0vO1xuXG4gICAgZnVuY3Rpb24gQmlkaVNwYW4obGV2ZWwsIGZyb20sIHRvKSB7XG4gICAgICB0aGlzLmxldmVsID0gbGV2ZWw7XG4gICAgICB0aGlzLmZyb20gPSBmcm9tOyB0aGlzLnRvID0gdG87XG4gICAgfVxuXG4gICAgcmV0dXJuIGZ1bmN0aW9uKHN0ciwgZGlyZWN0aW9uKSB7XG4gICAgICB2YXIgb3V0ZXJUeXBlID0gZGlyZWN0aW9uID09IFwibHRyXCIgPyBcIkxcIiA6IFwiUlwiO1xuXG4gICAgICBpZiAoc3RyLmxlbmd0aCA9PSAwIHx8IGRpcmVjdGlvbiA9PSBcImx0clwiICYmICFiaWRpUkUudGVzdChzdHIpKSB7IHJldHVybiBmYWxzZSB9XG4gICAgICB2YXIgbGVuID0gc3RyLmxlbmd0aCwgdHlwZXMgPSBbXTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyArK2kpXG4gICAgICAgIHsgdHlwZXMucHVzaChjaGFyVHlwZShzdHIuY2hhckNvZGVBdChpKSkpOyB9XG5cbiAgICAgIC8vIFcxLiBFeGFtaW5lIGVhY2ggbm9uLXNwYWNpbmcgbWFyayAoTlNNKSBpbiB0aGUgbGV2ZWwgcnVuLCBhbmRcbiAgICAgIC8vIGNoYW5nZSB0aGUgdHlwZSBvZiB0aGUgTlNNIHRvIHRoZSB0eXBlIG9mIHRoZSBwcmV2aW91c1xuICAgICAgLy8gY2hhcmFjdGVyLiBJZiB0aGUgTlNNIGlzIGF0IHRoZSBzdGFydCBvZiB0aGUgbGV2ZWwgcnVuLCBpdCB3aWxsXG4gICAgICAvLyBnZXQgdGhlIHR5cGUgb2Ygc29yLlxuICAgICAgZm9yICh2YXIgaSQxID0gMCwgcHJldiA9IG91dGVyVHlwZTsgaSQxIDwgbGVuOyArK2kkMSkge1xuICAgICAgICB2YXIgdHlwZSA9IHR5cGVzW2kkMV07XG4gICAgICAgIGlmICh0eXBlID09IFwibVwiKSB7IHR5cGVzW2kkMV0gPSBwcmV2OyB9XG4gICAgICAgIGVsc2UgeyBwcmV2ID0gdHlwZTsgfVxuICAgICAgfVxuXG4gICAgICAvLyBXMi4gU2VhcmNoIGJhY2t3YXJkcyBmcm9tIGVhY2ggaW5zdGFuY2Ugb2YgYSBFdXJvcGVhbiBudW1iZXJcbiAgICAgIC8vIHVudGlsIHRoZSBmaXJzdCBzdHJvbmcgdHlwZSAoUiwgTCwgQUwsIG9yIHNvcikgaXMgZm91bmQuIElmIGFuXG4gICAgICAvLyBBTCBpcyBmb3VuZCwgY2hhbmdlIHRoZSB0eXBlIG9mIHRoZSBFdXJvcGVhbiBudW1iZXIgdG8gQXJhYmljXG4gICAgICAvLyBudW1iZXIuXG4gICAgICAvLyBXMy4gQ2hhbmdlIGFsbCBBTHMgdG8gUi5cbiAgICAgIGZvciAodmFyIGkkMiA9IDAsIGN1ciA9IG91dGVyVHlwZTsgaSQyIDwgbGVuOyArK2kkMikge1xuICAgICAgICB2YXIgdHlwZSQxID0gdHlwZXNbaSQyXTtcbiAgICAgICAgaWYgKHR5cGUkMSA9PSBcIjFcIiAmJiBjdXIgPT0gXCJyXCIpIHsgdHlwZXNbaSQyXSA9IFwiblwiOyB9XG4gICAgICAgIGVsc2UgaWYgKGlzU3Ryb25nLnRlc3QodHlwZSQxKSkgeyBjdXIgPSB0eXBlJDE7IGlmICh0eXBlJDEgPT0gXCJyXCIpIHsgdHlwZXNbaSQyXSA9IFwiUlwiOyB9IH1cbiAgICAgIH1cblxuICAgICAgLy8gVzQuIEEgc2luZ2xlIEV1cm9wZWFuIHNlcGFyYXRvciBiZXR3ZWVuIHR3byBFdXJvcGVhbiBudW1iZXJzXG4gICAgICAvLyBjaGFuZ2VzIHRvIGEgRXVyb3BlYW4gbnVtYmVyLiBBIHNpbmdsZSBjb21tb24gc2VwYXJhdG9yIGJldHdlZW5cbiAgICAgIC8vIHR3byBudW1iZXJzIG9mIHRoZSBzYW1lIHR5cGUgY2hhbmdlcyB0byB0aGF0IHR5cGUuXG4gICAgICBmb3IgKHZhciBpJDMgPSAxLCBwcmV2JDEgPSB0eXBlc1swXTsgaSQzIDwgbGVuIC0gMTsgKytpJDMpIHtcbiAgICAgICAgdmFyIHR5cGUkMiA9IHR5cGVzW2kkM107XG4gICAgICAgIGlmICh0eXBlJDIgPT0gXCIrXCIgJiYgcHJldiQxID09IFwiMVwiICYmIHR5cGVzW2kkMysxXSA9PSBcIjFcIikgeyB0eXBlc1tpJDNdID0gXCIxXCI7IH1cbiAgICAgICAgZWxzZSBpZiAodHlwZSQyID09IFwiLFwiICYmIHByZXYkMSA9PSB0eXBlc1tpJDMrMV0gJiZcbiAgICAgICAgICAgICAgICAgKHByZXYkMSA9PSBcIjFcIiB8fCBwcmV2JDEgPT0gXCJuXCIpKSB7IHR5cGVzW2kkM10gPSBwcmV2JDE7IH1cbiAgICAgICAgcHJldiQxID0gdHlwZSQyO1xuICAgICAgfVxuXG4gICAgICAvLyBXNS4gQSBzZXF1ZW5jZSBvZiBFdXJvcGVhbiB0ZXJtaW5hdG9ycyBhZGphY2VudCB0byBFdXJvcGVhblxuICAgICAgLy8gbnVtYmVycyBjaGFuZ2VzIHRvIGFsbCBFdXJvcGVhbiBudW1iZXJzLlxuICAgICAgLy8gVzYuIE90aGVyd2lzZSwgc2VwYXJhdG9ycyBhbmQgdGVybWluYXRvcnMgY2hhbmdlIHRvIE90aGVyXG4gICAgICAvLyBOZXV0cmFsLlxuICAgICAgZm9yICh2YXIgaSQ0ID0gMDsgaSQ0IDwgbGVuOyArK2kkNCkge1xuICAgICAgICB2YXIgdHlwZSQzID0gdHlwZXNbaSQ0XTtcbiAgICAgICAgaWYgKHR5cGUkMyA9PSBcIixcIikgeyB0eXBlc1tpJDRdID0gXCJOXCI7IH1cbiAgICAgICAgZWxzZSBpZiAodHlwZSQzID09IFwiJVwiKSB7XG4gICAgICAgICAgdmFyIGVuZCA9ICh2b2lkIDApO1xuICAgICAgICAgIGZvciAoZW5kID0gaSQ0ICsgMTsgZW5kIDwgbGVuICYmIHR5cGVzW2VuZF0gPT0gXCIlXCI7ICsrZW5kKSB7fVxuICAgICAgICAgIHZhciByZXBsYWNlID0gKGkkNCAmJiB0eXBlc1tpJDQtMV0gPT0gXCIhXCIpIHx8IChlbmQgPCBsZW4gJiYgdHlwZXNbZW5kXSA9PSBcIjFcIikgPyBcIjFcIiA6IFwiTlwiO1xuICAgICAgICAgIGZvciAodmFyIGogPSBpJDQ7IGogPCBlbmQ7ICsraikgeyB0eXBlc1tqXSA9IHJlcGxhY2U7IH1cbiAgICAgICAgICBpJDQgPSBlbmQgLSAxO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIFc3LiBTZWFyY2ggYmFja3dhcmRzIGZyb20gZWFjaCBpbnN0YW5jZSBvZiBhIEV1cm9wZWFuIG51bWJlclxuICAgICAgLy8gdW50aWwgdGhlIGZpcnN0IHN0cm9uZyB0eXBlIChSLCBMLCBvciBzb3IpIGlzIGZvdW5kLiBJZiBhbiBMIGlzXG4gICAgICAvLyBmb3VuZCwgdGhlbiBjaGFuZ2UgdGhlIHR5cGUgb2YgdGhlIEV1cm9wZWFuIG51bWJlciB0byBMLlxuICAgICAgZm9yICh2YXIgaSQ1ID0gMCwgY3VyJDEgPSBvdXRlclR5cGU7IGkkNSA8IGxlbjsgKytpJDUpIHtcbiAgICAgICAgdmFyIHR5cGUkNCA9IHR5cGVzW2kkNV07XG4gICAgICAgIGlmIChjdXIkMSA9PSBcIkxcIiAmJiB0eXBlJDQgPT0gXCIxXCIpIHsgdHlwZXNbaSQ1XSA9IFwiTFwiOyB9XG4gICAgICAgIGVsc2UgaWYgKGlzU3Ryb25nLnRlc3QodHlwZSQ0KSkgeyBjdXIkMSA9IHR5cGUkNDsgfVxuICAgICAgfVxuXG4gICAgICAvLyBOMS4gQSBzZXF1ZW5jZSBvZiBuZXV0cmFscyB0YWtlcyB0aGUgZGlyZWN0aW9uIG9mIHRoZVxuICAgICAgLy8gc3Vycm91bmRpbmcgc3Ryb25nIHRleHQgaWYgdGhlIHRleHQgb24gYm90aCBzaWRlcyBoYXMgdGhlIHNhbWVcbiAgICAgIC8vIGRpcmVjdGlvbi4gRXVyb3BlYW4gYW5kIEFyYWJpYyBudW1iZXJzIGFjdCBhcyBpZiB0aGV5IHdlcmUgUiBpblxuICAgICAgLy8gdGVybXMgb2YgdGhlaXIgaW5mbHVlbmNlIG9uIG5ldXRyYWxzLiBTdGFydC1vZi1sZXZlbC1ydW4gKHNvcilcbiAgICAgIC8vIGFuZCBlbmQtb2YtbGV2ZWwtcnVuIChlb3IpIGFyZSB1c2VkIGF0IGxldmVsIHJ1biBib3VuZGFyaWVzLlxuICAgICAgLy8gTjIuIEFueSByZW1haW5pbmcgbmV1dHJhbHMgdGFrZSB0aGUgZW1iZWRkaW5nIGRpcmVjdGlvbi5cbiAgICAgIGZvciAodmFyIGkkNiA9IDA7IGkkNiA8IGxlbjsgKytpJDYpIHtcbiAgICAgICAgaWYgKGlzTmV1dHJhbC50ZXN0KHR5cGVzW2kkNl0pKSB7XG4gICAgICAgICAgdmFyIGVuZCQxID0gKHZvaWQgMCk7XG4gICAgICAgICAgZm9yIChlbmQkMSA9IGkkNiArIDE7IGVuZCQxIDwgbGVuICYmIGlzTmV1dHJhbC50ZXN0KHR5cGVzW2VuZCQxXSk7ICsrZW5kJDEpIHt9XG4gICAgICAgICAgdmFyIGJlZm9yZSA9IChpJDYgPyB0eXBlc1tpJDYtMV0gOiBvdXRlclR5cGUpID09IFwiTFwiO1xuICAgICAgICAgIHZhciBhZnRlciA9IChlbmQkMSA8IGxlbiA/IHR5cGVzW2VuZCQxXSA6IG91dGVyVHlwZSkgPT0gXCJMXCI7XG4gICAgICAgICAgdmFyIHJlcGxhY2UkMSA9IGJlZm9yZSA9PSBhZnRlciA/IChiZWZvcmUgPyBcIkxcIiA6IFwiUlwiKSA6IG91dGVyVHlwZTtcbiAgICAgICAgICBmb3IgKHZhciBqJDEgPSBpJDY7IGokMSA8IGVuZCQxOyArK2okMSkgeyB0eXBlc1tqJDFdID0gcmVwbGFjZSQxOyB9XG4gICAgICAgICAgaSQ2ID0gZW5kJDEgLSAxO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIEhlcmUgd2UgZGVwYXJ0IGZyb20gdGhlIGRvY3VtZW50ZWQgYWxnb3JpdGhtLCBpbiBvcmRlciB0byBhdm9pZFxuICAgICAgLy8gYnVpbGRpbmcgdXAgYW4gYWN0dWFsIGxldmVscyBhcnJheS4gU2luY2UgdGhlcmUgYXJlIG9ubHkgdGhyZWVcbiAgICAgIC8vIGxldmVscyAoMCwgMSwgMikgaW4gYW4gaW1wbGVtZW50YXRpb24gdGhhdCBkb2Vzbid0IHRha2VcbiAgICAgIC8vIGV4cGxpY2l0IGVtYmVkZGluZyBpbnRvIGFjY291bnQsIHdlIGNhbiBidWlsZCB1cCB0aGUgb3JkZXIgb25cbiAgICAgIC8vIHRoZSBmbHksIHdpdGhvdXQgZm9sbG93aW5nIHRoZSBsZXZlbC1iYXNlZCBhbGdvcml0aG0uXG4gICAgICB2YXIgb3JkZXIgPSBbXSwgbTtcbiAgICAgIGZvciAodmFyIGkkNyA9IDA7IGkkNyA8IGxlbjspIHtcbiAgICAgICAgaWYgKGNvdW50c0FzTGVmdC50ZXN0KHR5cGVzW2kkN10pKSB7XG4gICAgICAgICAgdmFyIHN0YXJ0ID0gaSQ3O1xuICAgICAgICAgIGZvciAoKytpJDc7IGkkNyA8IGxlbiAmJiBjb3VudHNBc0xlZnQudGVzdCh0eXBlc1tpJDddKTsgKytpJDcpIHt9XG4gICAgICAgICAgb3JkZXIucHVzaChuZXcgQmlkaVNwYW4oMCwgc3RhcnQsIGkkNykpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhciBwb3MgPSBpJDcsIGF0ID0gb3JkZXIubGVuZ3RoLCBpc1JUTCA9IGRpcmVjdGlvbiA9PSBcInJ0bFwiID8gMSA6IDA7XG4gICAgICAgICAgZm9yICgrK2kkNzsgaSQ3IDwgbGVuICYmIHR5cGVzW2kkN10gIT0gXCJMXCI7ICsraSQ3KSB7fVxuICAgICAgICAgIGZvciAodmFyIGokMiA9IHBvczsgaiQyIDwgaSQ3Oykge1xuICAgICAgICAgICAgaWYgKGNvdW50c0FzTnVtLnRlc3QodHlwZXNbaiQyXSkpIHtcbiAgICAgICAgICAgICAgaWYgKHBvcyA8IGokMikgeyBvcmRlci5zcGxpY2UoYXQsIDAsIG5ldyBCaWRpU3BhbigxLCBwb3MsIGokMikpOyBhdCArPSBpc1JUTDsgfVxuICAgICAgICAgICAgICB2YXIgbnN0YXJ0ID0gaiQyO1xuICAgICAgICAgICAgICBmb3IgKCsraiQyOyBqJDIgPCBpJDcgJiYgY291bnRzQXNOdW0udGVzdCh0eXBlc1tqJDJdKTsgKytqJDIpIHt9XG4gICAgICAgICAgICAgIG9yZGVyLnNwbGljZShhdCwgMCwgbmV3IEJpZGlTcGFuKDIsIG5zdGFydCwgaiQyKSk7XG4gICAgICAgICAgICAgIGF0ICs9IGlzUlRMO1xuICAgICAgICAgICAgICBwb3MgPSBqJDI7XG4gICAgICAgICAgICB9IGVsc2UgeyArK2okMjsgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAocG9zIDwgaSQ3KSB7IG9yZGVyLnNwbGljZShhdCwgMCwgbmV3IEJpZGlTcGFuKDEsIHBvcywgaSQ3KSk7IH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGRpcmVjdGlvbiA9PSBcImx0clwiKSB7XG4gICAgICAgIGlmIChvcmRlclswXS5sZXZlbCA9PSAxICYmIChtID0gc3RyLm1hdGNoKC9eXFxzKy8pKSkge1xuICAgICAgICAgIG9yZGVyWzBdLmZyb20gPSBtWzBdLmxlbmd0aDtcbiAgICAgICAgICBvcmRlci51bnNoaWZ0KG5ldyBCaWRpU3BhbigwLCAwLCBtWzBdLmxlbmd0aCkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChsc3Qob3JkZXIpLmxldmVsID09IDEgJiYgKG0gPSBzdHIubWF0Y2goL1xccyskLykpKSB7XG4gICAgICAgICAgbHN0KG9yZGVyKS50byAtPSBtWzBdLmxlbmd0aDtcbiAgICAgICAgICBvcmRlci5wdXNoKG5ldyBCaWRpU3BhbigwLCBsZW4gLSBtWzBdLmxlbmd0aCwgbGVuKSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGRpcmVjdGlvbiA9PSBcInJ0bFwiID8gb3JkZXIucmV2ZXJzZSgpIDogb3JkZXJcbiAgICB9XG4gIH0pKCk7XG5cbiAgLy8gR2V0IHRoZSBiaWRpIG9yZGVyaW5nIGZvciB0aGUgZ2l2ZW4gbGluZSAoYW5kIGNhY2hlIGl0KS4gUmV0dXJuc1xuICAvLyBmYWxzZSBmb3IgbGluZXMgdGhhdCBhcmUgZnVsbHkgbGVmdC10by1yaWdodCwgYW5kIGFuIGFycmF5IG9mXG4gIC8vIEJpZGlTcGFuIG9iamVjdHMgb3RoZXJ3aXNlLlxuICBmdW5jdGlvbiBnZXRPcmRlcihsaW5lLCBkaXJlY3Rpb24pIHtcbiAgICB2YXIgb3JkZXIgPSBsaW5lLm9yZGVyO1xuICAgIGlmIChvcmRlciA9PSBudWxsKSB7IG9yZGVyID0gbGluZS5vcmRlciA9IGJpZGlPcmRlcmluZyhsaW5lLnRleHQsIGRpcmVjdGlvbik7IH1cbiAgICByZXR1cm4gb3JkZXJcbiAgfVxuXG4gIC8vIEVWRU5UIEhBTkRMSU5HXG5cbiAgLy8gTGlnaHR3ZWlnaHQgZXZlbnQgZnJhbWV3b3JrLiBvbi9vZmYgYWxzbyB3b3JrIG9uIERPTSBub2RlcyxcbiAgLy8gcmVnaXN0ZXJpbmcgbmF0aXZlIERPTSBoYW5kbGVycy5cblxuICB2YXIgbm9IYW5kbGVycyA9IFtdO1xuXG4gIHZhciBvbiA9IGZ1bmN0aW9uKGVtaXR0ZXIsIHR5cGUsIGYpIHtcbiAgICBpZiAoZW1pdHRlci5hZGRFdmVudExpc3RlbmVyKSB7XG4gICAgICBlbWl0dGVyLmFkZEV2ZW50TGlzdGVuZXIodHlwZSwgZiwgZmFsc2UpO1xuICAgIH0gZWxzZSBpZiAoZW1pdHRlci5hdHRhY2hFdmVudCkge1xuICAgICAgZW1pdHRlci5hdHRhY2hFdmVudChcIm9uXCIgKyB0eXBlLCBmKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIG1hcCA9IGVtaXR0ZXIuX2hhbmRsZXJzIHx8IChlbWl0dGVyLl9oYW5kbGVycyA9IHt9KTtcbiAgICAgIG1hcFt0eXBlXSA9IChtYXBbdHlwZV0gfHwgbm9IYW5kbGVycykuY29uY2F0KGYpO1xuICAgIH1cbiAgfTtcblxuICBmdW5jdGlvbiBnZXRIYW5kbGVycyhlbWl0dGVyLCB0eXBlKSB7XG4gICAgcmV0dXJuIGVtaXR0ZXIuX2hhbmRsZXJzICYmIGVtaXR0ZXIuX2hhbmRsZXJzW3R5cGVdIHx8IG5vSGFuZGxlcnNcbiAgfVxuXG4gIGZ1bmN0aW9uIG9mZihlbWl0dGVyLCB0eXBlLCBmKSB7XG4gICAgaWYgKGVtaXR0ZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcikge1xuICAgICAgZW1pdHRlci5yZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsIGYsIGZhbHNlKTtcbiAgICB9IGVsc2UgaWYgKGVtaXR0ZXIuZGV0YWNoRXZlbnQpIHtcbiAgICAgIGVtaXR0ZXIuZGV0YWNoRXZlbnQoXCJvblwiICsgdHlwZSwgZik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBtYXAgPSBlbWl0dGVyLl9oYW5kbGVycywgYXJyID0gbWFwICYmIG1hcFt0eXBlXTtcbiAgICAgIGlmIChhcnIpIHtcbiAgICAgICAgdmFyIGluZGV4ID0gaW5kZXhPZihhcnIsIGYpO1xuICAgICAgICBpZiAoaW5kZXggPiAtMSlcbiAgICAgICAgICB7IG1hcFt0eXBlXSA9IGFyci5zbGljZSgwLCBpbmRleCkuY29uY2F0KGFyci5zbGljZShpbmRleCArIDEpKTsgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHNpZ25hbChlbWl0dGVyLCB0eXBlIC8qLCB2YWx1ZXMuLi4qLykge1xuICAgIHZhciBoYW5kbGVycyA9IGdldEhhbmRsZXJzKGVtaXR0ZXIsIHR5cGUpO1xuICAgIGlmICghaGFuZGxlcnMubGVuZ3RoKSB7IHJldHVybiB9XG4gICAgdmFyIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDIpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaGFuZGxlcnMubGVuZ3RoOyArK2kpIHsgaGFuZGxlcnNbaV0uYXBwbHkobnVsbCwgYXJncyk7IH1cbiAgfVxuXG4gIC8vIFRoZSBET00gZXZlbnRzIHRoYXQgQ29kZU1pcnJvciBoYW5kbGVzIGNhbiBiZSBvdmVycmlkZGVuIGJ5XG4gIC8vIHJlZ2lzdGVyaW5nIGEgKG5vbi1ET00pIGhhbmRsZXIgb24gdGhlIGVkaXRvciBmb3IgdGhlIGV2ZW50IG5hbWUsXG4gIC8vIGFuZCBwcmV2ZW50RGVmYXVsdC1pbmcgdGhlIGV2ZW50IGluIHRoYXQgaGFuZGxlci5cbiAgZnVuY3Rpb24gc2lnbmFsRE9NRXZlbnQoY20sIGUsIG92ZXJyaWRlKSB7XG4gICAgaWYgKHR5cGVvZiBlID09IFwic3RyaW5nXCIpXG4gICAgICB7IGUgPSB7dHlwZTogZSwgcHJldmVudERlZmF1bHQ6IGZ1bmN0aW9uKCkgeyB0aGlzLmRlZmF1bHRQcmV2ZW50ZWQgPSB0cnVlOyB9fTsgfVxuICAgIHNpZ25hbChjbSwgb3ZlcnJpZGUgfHwgZS50eXBlLCBjbSwgZSk7XG4gICAgcmV0dXJuIGVfZGVmYXVsdFByZXZlbnRlZChlKSB8fCBlLmNvZGVtaXJyb3JJZ25vcmVcbiAgfVxuXG4gIGZ1bmN0aW9uIHNpZ25hbEN1cnNvckFjdGl2aXR5KGNtKSB7XG4gICAgdmFyIGFyciA9IGNtLl9oYW5kbGVycyAmJiBjbS5faGFuZGxlcnMuY3Vyc29yQWN0aXZpdHk7XG4gICAgaWYgKCFhcnIpIHsgcmV0dXJuIH1cbiAgICB2YXIgc2V0ID0gY20uY3VyT3AuY3Vyc29yQWN0aXZpdHlIYW5kbGVycyB8fCAoY20uY3VyT3AuY3Vyc29yQWN0aXZpdHlIYW5kbGVycyA9IFtdKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyci5sZW5ndGg7ICsraSkgeyBpZiAoaW5kZXhPZihzZXQsIGFycltpXSkgPT0gLTEpXG4gICAgICB7IHNldC5wdXNoKGFycltpXSk7IH0gfVxuICB9XG5cbiAgZnVuY3Rpb24gaGFzSGFuZGxlcihlbWl0dGVyLCB0eXBlKSB7XG4gICAgcmV0dXJuIGdldEhhbmRsZXJzKGVtaXR0ZXIsIHR5cGUpLmxlbmd0aCA+IDBcbiAgfVxuXG4gIC8vIEFkZCBvbiBhbmQgb2ZmIG1ldGhvZHMgdG8gYSBjb25zdHJ1Y3RvcidzIHByb3RvdHlwZSwgdG8gbWFrZVxuICAvLyByZWdpc3RlcmluZyBldmVudHMgb24gc3VjaCBvYmplY3RzIG1vcmUgY29udmVuaWVudC5cbiAgZnVuY3Rpb24gZXZlbnRNaXhpbihjdG9yKSB7XG4gICAgY3Rvci5wcm90b3R5cGUub24gPSBmdW5jdGlvbih0eXBlLCBmKSB7b24odGhpcywgdHlwZSwgZik7fTtcbiAgICBjdG9yLnByb3RvdHlwZS5vZmYgPSBmdW5jdGlvbih0eXBlLCBmKSB7b2ZmKHRoaXMsIHR5cGUsIGYpO307XG4gIH1cblxuICAvLyBEdWUgdG8gdGhlIGZhY3QgdGhhdCB3ZSBzdGlsbCBzdXBwb3J0IGp1cmFzc2ljIElFIHZlcnNpb25zLCBzb21lXG4gIC8vIGNvbXBhdGliaWxpdHkgd3JhcHBlcnMgYXJlIG5lZWRlZC5cblxuICBmdW5jdGlvbiBlX3ByZXZlbnREZWZhdWx0KGUpIHtcbiAgICBpZiAoZS5wcmV2ZW50RGVmYXVsdCkgeyBlLnByZXZlbnREZWZhdWx0KCk7IH1cbiAgICBlbHNlIHsgZS5yZXR1cm5WYWx1ZSA9IGZhbHNlOyB9XG4gIH1cbiAgZnVuY3Rpb24gZV9zdG9wUHJvcGFnYXRpb24oZSkge1xuICAgIGlmIChlLnN0b3BQcm9wYWdhdGlvbikgeyBlLnN0b3BQcm9wYWdhdGlvbigpOyB9XG4gICAgZWxzZSB7IGUuY2FuY2VsQnViYmxlID0gdHJ1ZTsgfVxuICB9XG4gIGZ1bmN0aW9uIGVfZGVmYXVsdFByZXZlbnRlZChlKSB7XG4gICAgcmV0dXJuIGUuZGVmYXVsdFByZXZlbnRlZCAhPSBudWxsID8gZS5kZWZhdWx0UHJldmVudGVkIDogZS5yZXR1cm5WYWx1ZSA9PSBmYWxzZVxuICB9XG4gIGZ1bmN0aW9uIGVfc3RvcChlKSB7ZV9wcmV2ZW50RGVmYXVsdChlKTsgZV9zdG9wUHJvcGFnYXRpb24oZSk7fVxuXG4gIGZ1bmN0aW9uIGVfdGFyZ2V0KGUpIHtyZXR1cm4gZS50YXJnZXQgfHwgZS5zcmNFbGVtZW50fVxuICBmdW5jdGlvbiBlX2J1dHRvbihlKSB7XG4gICAgdmFyIGIgPSBlLndoaWNoO1xuICAgIGlmIChiID09IG51bGwpIHtcbiAgICAgIGlmIChlLmJ1dHRvbiAmIDEpIHsgYiA9IDE7IH1cbiAgICAgIGVsc2UgaWYgKGUuYnV0dG9uICYgMikgeyBiID0gMzsgfVxuICAgICAgZWxzZSBpZiAoZS5idXR0b24gJiA0KSB7IGIgPSAyOyB9XG4gICAgfVxuICAgIGlmIChtYWMgJiYgZS5jdHJsS2V5ICYmIGIgPT0gMSkgeyBiID0gMzsgfVxuICAgIHJldHVybiBiXG4gIH1cblxuICAvLyBEZXRlY3QgZHJhZy1hbmQtZHJvcFxuICB2YXIgZHJhZ0FuZERyb3AgPSBmdW5jdGlvbigpIHtcbiAgICAvLyBUaGVyZSBpcyAqc29tZSoga2luZCBvZiBkcmFnLWFuZC1kcm9wIHN1cHBvcnQgaW4gSUU2LTgsIGJ1dCBJXG4gICAgLy8gY291bGRuJ3QgZ2V0IGl0IHRvIHdvcmsgeWV0LlxuICAgIGlmIChpZSAmJiBpZV92ZXJzaW9uIDwgOSkgeyByZXR1cm4gZmFsc2UgfVxuICAgIHZhciBkaXYgPSBlbHQoJ2RpdicpO1xuICAgIHJldHVybiBcImRyYWdnYWJsZVwiIGluIGRpdiB8fCBcImRyYWdEcm9wXCIgaW4gZGl2XG4gIH0oKTtcblxuICB2YXIgendzcFN1cHBvcnRlZDtcbiAgZnVuY3Rpb24gemVyb1dpZHRoRWxlbWVudChtZWFzdXJlKSB7XG4gICAgaWYgKHp3c3BTdXBwb3J0ZWQgPT0gbnVsbCkge1xuICAgICAgdmFyIHRlc3QgPSBlbHQoXCJzcGFuXCIsIFwiXFx1MjAwYlwiKTtcbiAgICAgIHJlbW92ZUNoaWxkcmVuQW5kQWRkKG1lYXN1cmUsIGVsdChcInNwYW5cIiwgW3Rlc3QsIGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKFwieFwiKV0pKTtcbiAgICAgIGlmIChtZWFzdXJlLmZpcnN0Q2hpbGQub2Zmc2V0SGVpZ2h0ICE9IDApXG4gICAgICAgIHsgendzcFN1cHBvcnRlZCA9IHRlc3Qub2Zmc2V0V2lkdGggPD0gMSAmJiB0ZXN0Lm9mZnNldEhlaWdodCA+IDIgJiYgIShpZSAmJiBpZV92ZXJzaW9uIDwgOCk7IH1cbiAgICB9XG4gICAgdmFyIG5vZGUgPSB6d3NwU3VwcG9ydGVkID8gZWx0KFwic3BhblwiLCBcIlxcdTIwMGJcIikgOlxuICAgICAgZWx0KFwic3BhblwiLCBcIlxcdTAwYTBcIiwgbnVsbCwgXCJkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IHdpZHRoOiAxcHg7IG1hcmdpbi1yaWdodDogLTFweFwiKTtcbiAgICBub2RlLnNldEF0dHJpYnV0ZShcImNtLXRleHRcIiwgXCJcIik7XG4gICAgcmV0dXJuIG5vZGVcbiAgfVxuXG4gIC8vIEZlYXR1cmUtZGV0ZWN0IElFJ3MgY3J1bW15IGNsaWVudCByZWN0IHJlcG9ydGluZyBmb3IgYmlkaSB0ZXh0XG4gIHZhciBiYWRCaWRpUmVjdHM7XG4gIGZ1bmN0aW9uIGhhc0JhZEJpZGlSZWN0cyhtZWFzdXJlKSB7XG4gICAgaWYgKGJhZEJpZGlSZWN0cyAhPSBudWxsKSB7IHJldHVybiBiYWRCaWRpUmVjdHMgfVxuICAgIHZhciB0eHQgPSByZW1vdmVDaGlsZHJlbkFuZEFkZChtZWFzdXJlLCBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShcIkFcXHUwNjJlQVwiKSk7XG4gICAgdmFyIHIwID0gcmFuZ2UodHh0LCAwLCAxKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICB2YXIgcjEgPSByYW5nZSh0eHQsIDEsIDIpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIHJlbW92ZUNoaWxkcmVuKG1lYXN1cmUpO1xuICAgIGlmICghcjAgfHwgcjAubGVmdCA9PSByMC5yaWdodCkgeyByZXR1cm4gZmFsc2UgfSAvLyBTYWZhcmkgcmV0dXJucyBudWxsIGluIHNvbWUgY2FzZXMgKCMyNzgwKVxuICAgIHJldHVybiBiYWRCaWRpUmVjdHMgPSAocjEucmlnaHQgLSByMC5yaWdodCA8IDMpXG4gIH1cblxuICAvLyBTZWUgaWYgXCJcIi5zcGxpdCBpcyB0aGUgYnJva2VuIElFIHZlcnNpb24sIGlmIHNvLCBwcm92aWRlIGFuXG4gIC8vIGFsdGVybmF0aXZlIHdheSB0byBzcGxpdCBsaW5lcy5cbiAgdmFyIHNwbGl0TGluZXNBdXRvID0gXCJcXG5cXG5iXCIuc3BsaXQoL1xcbi8pLmxlbmd0aCAhPSAzID8gZnVuY3Rpb24gKHN0cmluZykge1xuICAgIHZhciBwb3MgPSAwLCByZXN1bHQgPSBbXSwgbCA9IHN0cmluZy5sZW5ndGg7XG4gICAgd2hpbGUgKHBvcyA8PSBsKSB7XG4gICAgICB2YXIgbmwgPSBzdHJpbmcuaW5kZXhPZihcIlxcblwiLCBwb3MpO1xuICAgICAgaWYgKG5sID09IC0xKSB7IG5sID0gc3RyaW5nLmxlbmd0aDsgfVxuICAgICAgdmFyIGxpbmUgPSBzdHJpbmcuc2xpY2UocG9zLCBzdHJpbmcuY2hhckF0KG5sIC0gMSkgPT0gXCJcXHJcIiA/IG5sIC0gMSA6IG5sKTtcbiAgICAgIHZhciBydCA9IGxpbmUuaW5kZXhPZihcIlxcclwiKTtcbiAgICAgIGlmIChydCAhPSAtMSkge1xuICAgICAgICByZXN1bHQucHVzaChsaW5lLnNsaWNlKDAsIHJ0KSk7XG4gICAgICAgIHBvcyArPSBydCArIDE7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHQucHVzaChsaW5lKTtcbiAgICAgICAgcG9zID0gbmwgKyAxO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0XG4gIH0gOiBmdW5jdGlvbiAoc3RyaW5nKSB7IHJldHVybiBzdHJpbmcuc3BsaXQoL1xcclxcbj98XFxuLyk7IH07XG5cbiAgdmFyIGhhc1NlbGVjdGlvbiA9IHdpbmRvdy5nZXRTZWxlY3Rpb24gPyBmdW5jdGlvbiAodGUpIHtcbiAgICB0cnkgeyByZXR1cm4gdGUuc2VsZWN0aW9uU3RhcnQgIT0gdGUuc2VsZWN0aW9uRW5kIH1cbiAgICBjYXRjaChlKSB7IHJldHVybiBmYWxzZSB9XG4gIH0gOiBmdW5jdGlvbiAodGUpIHtcbiAgICB2YXIgcmFuZ2U7XG4gICAgdHJ5IHtyYW5nZSA9IHRlLm93bmVyRG9jdW1lbnQuc2VsZWN0aW9uLmNyZWF0ZVJhbmdlKCk7fVxuICAgIGNhdGNoKGUpIHt9XG4gICAgaWYgKCFyYW5nZSB8fCByYW5nZS5wYXJlbnRFbGVtZW50KCkgIT0gdGUpIHsgcmV0dXJuIGZhbHNlIH1cbiAgICByZXR1cm4gcmFuZ2UuY29tcGFyZUVuZFBvaW50cyhcIlN0YXJ0VG9FbmRcIiwgcmFuZ2UpICE9IDBcbiAgfTtcblxuICB2YXIgaGFzQ29weUV2ZW50ID0gKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZSA9IGVsdChcImRpdlwiKTtcbiAgICBpZiAoXCJvbmNvcHlcIiBpbiBlKSB7IHJldHVybiB0cnVlIH1cbiAgICBlLnNldEF0dHJpYnV0ZShcIm9uY29weVwiLCBcInJldHVybjtcIik7XG4gICAgcmV0dXJuIHR5cGVvZiBlLm9uY29weSA9PSBcImZ1bmN0aW9uXCJcbiAgfSkoKTtcblxuICB2YXIgYmFkWm9vbWVkUmVjdHMgPSBudWxsO1xuICBmdW5jdGlvbiBoYXNCYWRab29tZWRSZWN0cyhtZWFzdXJlKSB7XG4gICAgaWYgKGJhZFpvb21lZFJlY3RzICE9IG51bGwpIHsgcmV0dXJuIGJhZFpvb21lZFJlY3RzIH1cbiAgICB2YXIgbm9kZSA9IHJlbW92ZUNoaWxkcmVuQW5kQWRkKG1lYXN1cmUsIGVsdChcInNwYW5cIiwgXCJ4XCIpKTtcbiAgICB2YXIgbm9ybWFsID0gbm9kZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICB2YXIgZnJvbVJhbmdlID0gcmFuZ2Uobm9kZSwgMCwgMSkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgcmV0dXJuIGJhZFpvb21lZFJlY3RzID0gTWF0aC5hYnMobm9ybWFsLmxlZnQgLSBmcm9tUmFuZ2UubGVmdCkgPiAxXG4gIH1cblxuICAvLyBLbm93biBtb2RlcywgYnkgbmFtZSBhbmQgYnkgTUlNRVxuICB2YXIgbW9kZXMgPSB7fSwgbWltZU1vZGVzID0ge307XG5cbiAgLy8gRXh0cmEgYXJndW1lbnRzIGFyZSBzdG9yZWQgYXMgdGhlIG1vZGUncyBkZXBlbmRlbmNpZXMsIHdoaWNoIGlzXG4gIC8vIHVzZWQgYnkgKGxlZ2FjeSkgbWVjaGFuaXNtcyBsaWtlIGxvYWRtb2RlLmpzIHRvIGF1dG9tYXRpY2FsbHlcbiAgLy8gbG9hZCBhIG1vZGUuIChQcmVmZXJyZWQgbWVjaGFuaXNtIGlzIHRoZSByZXF1aXJlL2RlZmluZSBjYWxscy4pXG4gIGZ1bmN0aW9uIGRlZmluZU1vZGUobmFtZSwgbW9kZSkge1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMilcbiAgICAgIHsgbW9kZS5kZXBlbmRlbmNpZXMgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDIpOyB9XG4gICAgbW9kZXNbbmFtZV0gPSBtb2RlO1xuICB9XG5cbiAgZnVuY3Rpb24gZGVmaW5lTUlNRShtaW1lLCBzcGVjKSB7XG4gICAgbWltZU1vZGVzW21pbWVdID0gc3BlYztcbiAgfVxuXG4gIC8vIEdpdmVuIGEgTUlNRSB0eXBlLCBhIHtuYW1lLCAuLi5vcHRpb25zfSBjb25maWcgb2JqZWN0LCBvciBhIG5hbWVcbiAgLy8gc3RyaW5nLCByZXR1cm4gYSBtb2RlIGNvbmZpZyBvYmplY3QuXG4gIGZ1bmN0aW9uIHJlc29sdmVNb2RlKHNwZWMpIHtcbiAgICBpZiAodHlwZW9mIHNwZWMgPT0gXCJzdHJpbmdcIiAmJiBtaW1lTW9kZXMuaGFzT3duUHJvcGVydHkoc3BlYykpIHtcbiAgICAgIHNwZWMgPSBtaW1lTW9kZXNbc3BlY107XG4gICAgfSBlbHNlIGlmIChzcGVjICYmIHR5cGVvZiBzcGVjLm5hbWUgPT0gXCJzdHJpbmdcIiAmJiBtaW1lTW9kZXMuaGFzT3duUHJvcGVydHkoc3BlYy5uYW1lKSkge1xuICAgICAgdmFyIGZvdW5kID0gbWltZU1vZGVzW3NwZWMubmFtZV07XG4gICAgICBpZiAodHlwZW9mIGZvdW5kID09IFwic3RyaW5nXCIpIHsgZm91bmQgPSB7bmFtZTogZm91bmR9OyB9XG4gICAgICBzcGVjID0gY3JlYXRlT2JqKGZvdW5kLCBzcGVjKTtcbiAgICAgIHNwZWMubmFtZSA9IGZvdW5kLm5hbWU7XG4gICAgfSBlbHNlIGlmICh0eXBlb2Ygc3BlYyA9PSBcInN0cmluZ1wiICYmIC9eW1xcd1xcLV0rXFwvW1xcd1xcLV0rXFwreG1sJC8udGVzdChzcGVjKSkge1xuICAgICAgcmV0dXJuIHJlc29sdmVNb2RlKFwiYXBwbGljYXRpb24veG1sXCIpXG4gICAgfSBlbHNlIGlmICh0eXBlb2Ygc3BlYyA9PSBcInN0cmluZ1wiICYmIC9eW1xcd1xcLV0rXFwvW1xcd1xcLV0rXFwranNvbiQvLnRlc3Qoc3BlYykpIHtcbiAgICAgIHJldHVybiByZXNvbHZlTW9kZShcImFwcGxpY2F0aW9uL2pzb25cIilcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBzcGVjID09IFwic3RyaW5nXCIpIHsgcmV0dXJuIHtuYW1lOiBzcGVjfSB9XG4gICAgZWxzZSB7IHJldHVybiBzcGVjIHx8IHtuYW1lOiBcIm51bGxcIn0gfVxuICB9XG5cbiAgLy8gR2l2ZW4gYSBtb2RlIHNwZWMgKGFueXRoaW5nIHRoYXQgcmVzb2x2ZU1vZGUgYWNjZXB0cyksIGZpbmQgYW5kXG4gIC8vIGluaXRpYWxpemUgYW4gYWN0dWFsIG1vZGUgb2JqZWN0LlxuICBmdW5jdGlvbiBnZXRNb2RlKG9wdGlvbnMsIHNwZWMpIHtcbiAgICBzcGVjID0gcmVzb2x2ZU1vZGUoc3BlYyk7XG4gICAgdmFyIG1mYWN0b3J5ID0gbW9kZXNbc3BlYy5uYW1lXTtcbiAgICBpZiAoIW1mYWN0b3J5KSB7IHJldHVybiBnZXRNb2RlKG9wdGlvbnMsIFwidGV4dC9wbGFpblwiKSB9XG4gICAgdmFyIG1vZGVPYmogPSBtZmFjdG9yeShvcHRpb25zLCBzcGVjKTtcbiAgICBpZiAobW9kZUV4dGVuc2lvbnMuaGFzT3duUHJvcGVydHkoc3BlYy5uYW1lKSkge1xuICAgICAgdmFyIGV4dHMgPSBtb2RlRXh0ZW5zaW9uc1tzcGVjLm5hbWVdO1xuICAgICAgZm9yICh2YXIgcHJvcCBpbiBleHRzKSB7XG4gICAgICAgIGlmICghZXh0cy5oYXNPd25Qcm9wZXJ0eShwcm9wKSkgeyBjb250aW51ZSB9XG4gICAgICAgIGlmIChtb2RlT2JqLmhhc093blByb3BlcnR5KHByb3ApKSB7IG1vZGVPYmpbXCJfXCIgKyBwcm9wXSA9IG1vZGVPYmpbcHJvcF07IH1cbiAgICAgICAgbW9kZU9ialtwcm9wXSA9IGV4dHNbcHJvcF07XG4gICAgICB9XG4gICAgfVxuICAgIG1vZGVPYmoubmFtZSA9IHNwZWMubmFtZTtcbiAgICBpZiAoc3BlYy5oZWxwZXJUeXBlKSB7IG1vZGVPYmouaGVscGVyVHlwZSA9IHNwZWMuaGVscGVyVHlwZTsgfVxuICAgIGlmIChzcGVjLm1vZGVQcm9wcykgeyBmb3IgKHZhciBwcm9wJDEgaW4gc3BlYy5tb2RlUHJvcHMpXG4gICAgICB7IG1vZGVPYmpbcHJvcCQxXSA9IHNwZWMubW9kZVByb3BzW3Byb3AkMV07IH0gfVxuXG4gICAgcmV0dXJuIG1vZGVPYmpcbiAgfVxuXG4gIC8vIFRoaXMgY2FuIGJlIHVzZWQgdG8gYXR0YWNoIHByb3BlcnRpZXMgdG8gbW9kZSBvYmplY3RzIGZyb21cbiAgLy8gb3V0c2lkZSB0aGUgYWN0dWFsIG1vZGUgZGVmaW5pdGlvbi5cbiAgdmFyIG1vZGVFeHRlbnNpb25zID0ge307XG4gIGZ1bmN0aW9uIGV4dGVuZE1vZGUobW9kZSwgcHJvcGVydGllcykge1xuICAgIHZhciBleHRzID0gbW9kZUV4dGVuc2lvbnMuaGFzT3duUHJvcGVydHkobW9kZSkgPyBtb2RlRXh0ZW5zaW9uc1ttb2RlXSA6IChtb2RlRXh0ZW5zaW9uc1ttb2RlXSA9IHt9KTtcbiAgICBjb3B5T2JqKHByb3BlcnRpZXMsIGV4dHMpO1xuICB9XG5cbiAgZnVuY3Rpb24gY29weVN0YXRlKG1vZGUsIHN0YXRlKSB7XG4gICAgaWYgKHN0YXRlID09PSB0cnVlKSB7IHJldHVybiBzdGF0ZSB9XG4gICAgaWYgKG1vZGUuY29weVN0YXRlKSB7IHJldHVybiBtb2RlLmNvcHlTdGF0ZShzdGF0ZSkgfVxuICAgIHZhciBuc3RhdGUgPSB7fTtcbiAgICBmb3IgKHZhciBuIGluIHN0YXRlKSB7XG4gICAgICB2YXIgdmFsID0gc3RhdGVbbl07XG4gICAgICBpZiAodmFsIGluc3RhbmNlb2YgQXJyYXkpIHsgdmFsID0gdmFsLmNvbmNhdChbXSk7IH1cbiAgICAgIG5zdGF0ZVtuXSA9IHZhbDtcbiAgICB9XG4gICAgcmV0dXJuIG5zdGF0ZVxuICB9XG5cbiAgLy8gR2l2ZW4gYSBtb2RlIGFuZCBhIHN0YXRlIChmb3IgdGhhdCBtb2RlKSwgZmluZCB0aGUgaW5uZXIgbW9kZSBhbmRcbiAgLy8gc3RhdGUgYXQgdGhlIHBvc2l0aW9uIHRoYXQgdGhlIHN0YXRlIHJlZmVycyB0by5cbiAgZnVuY3Rpb24gaW5uZXJNb2RlKG1vZGUsIHN0YXRlKSB7XG4gICAgdmFyIGluZm87XG4gICAgd2hpbGUgKG1vZGUuaW5uZXJNb2RlKSB7XG4gICAgICBpbmZvID0gbW9kZS5pbm5lck1vZGUoc3RhdGUpO1xuICAgICAgaWYgKCFpbmZvIHx8IGluZm8ubW9kZSA9PSBtb2RlKSB7IGJyZWFrIH1cbiAgICAgIHN0YXRlID0gaW5mby5zdGF0ZTtcbiAgICAgIG1vZGUgPSBpbmZvLm1vZGU7XG4gICAgfVxuICAgIHJldHVybiBpbmZvIHx8IHttb2RlOiBtb2RlLCBzdGF0ZTogc3RhdGV9XG4gIH1cblxuICBmdW5jdGlvbiBzdGFydFN0YXRlKG1vZGUsIGExLCBhMikge1xuICAgIHJldHVybiBtb2RlLnN0YXJ0U3RhdGUgPyBtb2RlLnN0YXJ0U3RhdGUoYTEsIGEyKSA6IHRydWVcbiAgfVxuXG4gIC8vIFNUUklORyBTVFJFQU1cblxuICAvLyBGZWQgdG8gdGhlIG1vZGUgcGFyc2VycywgcHJvdmlkZXMgaGVscGVyIGZ1bmN0aW9ucyB0byBtYWtlXG4gIC8vIHBhcnNlcnMgbW9yZSBzdWNjaW5jdC5cblxuICB2YXIgU3RyaW5nU3RyZWFtID0gZnVuY3Rpb24oc3RyaW5nLCB0YWJTaXplLCBsaW5lT3JhY2xlKSB7XG4gICAgdGhpcy5wb3MgPSB0aGlzLnN0YXJ0ID0gMDtcbiAgICB0aGlzLnN0cmluZyA9IHN0cmluZztcbiAgICB0aGlzLnRhYlNpemUgPSB0YWJTaXplIHx8IDg7XG4gICAgdGhpcy5sYXN0Q29sdW1uUG9zID0gdGhpcy5sYXN0Q29sdW1uVmFsdWUgPSAwO1xuICAgIHRoaXMubGluZVN0YXJ0ID0gMDtcbiAgICB0aGlzLmxpbmVPcmFjbGUgPSBsaW5lT3JhY2xlO1xuICB9O1xuXG4gIFN0cmluZ1N0cmVhbS5wcm90b3R5cGUuZW9sID0gZnVuY3Rpb24gKCkge3JldHVybiB0aGlzLnBvcyA+PSB0aGlzLnN0cmluZy5sZW5ndGh9O1xuICBTdHJpbmdTdHJlYW0ucHJvdG90eXBlLnNvbCA9IGZ1bmN0aW9uICgpIHtyZXR1cm4gdGhpcy5wb3MgPT0gdGhpcy5saW5lU3RhcnR9O1xuICBTdHJpbmdTdHJlYW0ucHJvdG90eXBlLnBlZWsgPSBmdW5jdGlvbiAoKSB7cmV0dXJuIHRoaXMuc3RyaW5nLmNoYXJBdCh0aGlzLnBvcykgfHwgdW5kZWZpbmVkfTtcbiAgU3RyaW5nU3RyZWFtLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICh0aGlzLnBvcyA8IHRoaXMuc3RyaW5nLmxlbmd0aClcbiAgICAgIHsgcmV0dXJuIHRoaXMuc3RyaW5nLmNoYXJBdCh0aGlzLnBvcysrKSB9XG4gIH07XG4gIFN0cmluZ1N0cmVhbS5wcm90b3R5cGUuZWF0ID0gZnVuY3Rpb24gKG1hdGNoKSB7XG4gICAgdmFyIGNoID0gdGhpcy5zdHJpbmcuY2hhckF0KHRoaXMucG9zKTtcbiAgICB2YXIgb2s7XG4gICAgaWYgKHR5cGVvZiBtYXRjaCA9PSBcInN0cmluZ1wiKSB7IG9rID0gY2ggPT0gbWF0Y2g7IH1cbiAgICBlbHNlIHsgb2sgPSBjaCAmJiAobWF0Y2gudGVzdCA/IG1hdGNoLnRlc3QoY2gpIDogbWF0Y2goY2gpKTsgfVxuICAgIGlmIChvaykgeysrdGhpcy5wb3M7IHJldHVybiBjaH1cbiAgfTtcbiAgU3RyaW5nU3RyZWFtLnByb3RvdHlwZS5lYXRXaGlsZSA9IGZ1bmN0aW9uIChtYXRjaCkge1xuICAgIHZhciBzdGFydCA9IHRoaXMucG9zO1xuICAgIHdoaWxlICh0aGlzLmVhdChtYXRjaCkpe31cbiAgICByZXR1cm4gdGhpcy5wb3MgPiBzdGFydFxuICB9O1xuICBTdHJpbmdTdHJlYW0ucHJvdG90eXBlLmVhdFNwYWNlID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBzdGFydCA9IHRoaXMucG9zO1xuICAgIHdoaWxlICgvW1xcc1xcdTAwYTBdLy50ZXN0KHRoaXMuc3RyaW5nLmNoYXJBdCh0aGlzLnBvcykpKSB7ICsrdGhpcy5wb3M7IH1cbiAgICByZXR1cm4gdGhpcy5wb3MgPiBzdGFydFxuICB9O1xuICBTdHJpbmdTdHJlYW0ucHJvdG90eXBlLnNraXBUb0VuZCA9IGZ1bmN0aW9uICgpIHt0aGlzLnBvcyA9IHRoaXMuc3RyaW5nLmxlbmd0aDt9O1xuICBTdHJpbmdTdHJlYW0ucHJvdG90eXBlLnNraXBUbyA9IGZ1bmN0aW9uIChjaCkge1xuICAgIHZhciBmb3VuZCA9IHRoaXMuc3RyaW5nLmluZGV4T2YoY2gsIHRoaXMucG9zKTtcbiAgICBpZiAoZm91bmQgPiAtMSkge3RoaXMucG9zID0gZm91bmQ7IHJldHVybiB0cnVlfVxuICB9O1xuICBTdHJpbmdTdHJlYW0ucHJvdG90eXBlLmJhY2tVcCA9IGZ1bmN0aW9uIChuKSB7dGhpcy5wb3MgLT0gbjt9O1xuICBTdHJpbmdTdHJlYW0ucHJvdG90eXBlLmNvbHVtbiA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodGhpcy5sYXN0Q29sdW1uUG9zIDwgdGhpcy5zdGFydCkge1xuICAgICAgdGhpcy5sYXN0Q29sdW1uVmFsdWUgPSBjb3VudENvbHVtbih0aGlzLnN0cmluZywgdGhpcy5zdGFydCwgdGhpcy50YWJTaXplLCB0aGlzLmxhc3RDb2x1bW5Qb3MsIHRoaXMubGFzdENvbHVtblZhbHVlKTtcbiAgICAgIHRoaXMubGFzdENvbHVtblBvcyA9IHRoaXMuc3RhcnQ7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmxhc3RDb2x1bW5WYWx1ZSAtICh0aGlzLmxpbmVTdGFydCA/IGNvdW50Q29sdW1uKHRoaXMuc3RyaW5nLCB0aGlzLmxpbmVTdGFydCwgdGhpcy50YWJTaXplKSA6IDApXG4gIH07XG4gIFN0cmluZ1N0cmVhbS5wcm90b3R5cGUuaW5kZW50YXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGNvdW50Q29sdW1uKHRoaXMuc3RyaW5nLCBudWxsLCB0aGlzLnRhYlNpemUpIC1cbiAgICAgICh0aGlzLmxpbmVTdGFydCA/IGNvdW50Q29sdW1uKHRoaXMuc3RyaW5nLCB0aGlzLmxpbmVTdGFydCwgdGhpcy50YWJTaXplKSA6IDApXG4gIH07XG4gIFN0cmluZ1N0cmVhbS5wcm90b3R5cGUubWF0Y2ggPSBmdW5jdGlvbiAocGF0dGVybiwgY29uc3VtZSwgY2FzZUluc2Vuc2l0aXZlKSB7XG4gICAgaWYgKHR5cGVvZiBwYXR0ZXJuID09IFwic3RyaW5nXCIpIHtcbiAgICAgIHZhciBjYXNlZCA9IGZ1bmN0aW9uIChzdHIpIHsgcmV0dXJuIGNhc2VJbnNlbnNpdGl2ZSA/IHN0ci50b0xvd2VyQ2FzZSgpIDogc3RyOyB9O1xuICAgICAgdmFyIHN1YnN0ciA9IHRoaXMuc3RyaW5nLnN1YnN0cih0aGlzLnBvcywgcGF0dGVybi5sZW5ndGgpO1xuICAgICAgaWYgKGNhc2VkKHN1YnN0cikgPT0gY2FzZWQocGF0dGVybikpIHtcbiAgICAgICAgaWYgKGNvbnN1bWUgIT09IGZhbHNlKSB7IHRoaXMucG9zICs9IHBhdHRlcm4ubGVuZ3RoOyB9XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBtYXRjaCA9IHRoaXMuc3RyaW5nLnNsaWNlKHRoaXMucG9zKS5tYXRjaChwYXR0ZXJuKTtcbiAgICAgIGlmIChtYXRjaCAmJiBtYXRjaC5pbmRleCA+IDApIHsgcmV0dXJuIG51bGwgfVxuICAgICAgaWYgKG1hdGNoICYmIGNvbnN1bWUgIT09IGZhbHNlKSB7IHRoaXMucG9zICs9IG1hdGNoWzBdLmxlbmd0aDsgfVxuICAgICAgcmV0dXJuIG1hdGNoXG4gICAgfVxuICB9O1xuICBTdHJpbmdTdHJlYW0ucHJvdG90eXBlLmN1cnJlbnQgPSBmdW5jdGlvbiAoKXtyZXR1cm4gdGhpcy5zdHJpbmcuc2xpY2UodGhpcy5zdGFydCwgdGhpcy5wb3MpfTtcbiAgU3RyaW5nU3RyZWFtLnByb3RvdHlwZS5oaWRlRmlyc3RDaGFycyA9IGZ1bmN0aW9uIChuLCBpbm5lcikge1xuICAgIHRoaXMubGluZVN0YXJ0ICs9IG47XG4gICAgdHJ5IHsgcmV0dXJuIGlubmVyKCkgfVxuICAgIGZpbmFsbHkgeyB0aGlzLmxpbmVTdGFydCAtPSBuOyB9XG4gIH07XG4gIFN0cmluZ1N0cmVhbS5wcm90b3R5cGUubG9va0FoZWFkID0gZnVuY3Rpb24gKG4pIHtcbiAgICB2YXIgb3JhY2xlID0gdGhpcy5saW5lT3JhY2xlO1xuICAgIHJldHVybiBvcmFjbGUgJiYgb3JhY2xlLmxvb2tBaGVhZChuKVxuICB9O1xuICBTdHJpbmdTdHJlYW0ucHJvdG90eXBlLmJhc2VUb2tlbiA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgb3JhY2xlID0gdGhpcy5saW5lT3JhY2xlO1xuICAgIHJldHVybiBvcmFjbGUgJiYgb3JhY2xlLmJhc2VUb2tlbih0aGlzLnBvcylcbiAgfTtcblxuICAvLyBGaW5kIHRoZSBsaW5lIG9iamVjdCBjb3JyZXNwb25kaW5nIHRvIHRoZSBnaXZlbiBsaW5lIG51bWJlci5cbiAgZnVuY3Rpb24gZ2V0TGluZShkb2MsIG4pIHtcbiAgICBuIC09IGRvYy5maXJzdDtcbiAgICBpZiAobiA8IDAgfHwgbiA+PSBkb2Muc2l6ZSkgeyB0aHJvdyBuZXcgRXJyb3IoXCJUaGVyZSBpcyBubyBsaW5lIFwiICsgKG4gKyBkb2MuZmlyc3QpICsgXCIgaW4gdGhlIGRvY3VtZW50LlwiKSB9XG4gICAgdmFyIGNodW5rID0gZG9jO1xuICAgIHdoaWxlICghY2h1bmsubGluZXMpIHtcbiAgICAgIGZvciAodmFyIGkgPSAwOzsgKytpKSB7XG4gICAgICAgIHZhciBjaGlsZCA9IGNodW5rLmNoaWxkcmVuW2ldLCBzeiA9IGNoaWxkLmNodW5rU2l6ZSgpO1xuICAgICAgICBpZiAobiA8IHN6KSB7IGNodW5rID0gY2hpbGQ7IGJyZWFrIH1cbiAgICAgICAgbiAtPSBzejtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGNodW5rLmxpbmVzW25dXG4gIH1cblxuICAvLyBHZXQgdGhlIHBhcnQgb2YgYSBkb2N1bWVudCBiZXR3ZWVuIHR3byBwb3NpdGlvbnMsIGFzIGFuIGFycmF5IG9mXG4gIC8vIHN0cmluZ3MuXG4gIGZ1bmN0aW9uIGdldEJldHdlZW4oZG9jLCBzdGFydCwgZW5kKSB7XG4gICAgdmFyIG91dCA9IFtdLCBuID0gc3RhcnQubGluZTtcbiAgICBkb2MuaXRlcihzdGFydC5saW5lLCBlbmQubGluZSArIDEsIGZ1bmN0aW9uIChsaW5lKSB7XG4gICAgICB2YXIgdGV4dCA9IGxpbmUudGV4dDtcbiAgICAgIGlmIChuID09IGVuZC5saW5lKSB7IHRleHQgPSB0ZXh0LnNsaWNlKDAsIGVuZC5jaCk7IH1cbiAgICAgIGlmIChuID09IHN0YXJ0LmxpbmUpIHsgdGV4dCA9IHRleHQuc2xpY2Uoc3RhcnQuY2gpOyB9XG4gICAgICBvdXQucHVzaCh0ZXh0KTtcbiAgICAgICsrbjtcbiAgICB9KTtcbiAgICByZXR1cm4gb3V0XG4gIH1cbiAgLy8gR2V0IHRoZSBsaW5lcyBiZXR3ZWVuIGZyb20gYW5kIHRvLCBhcyBhcnJheSBvZiBzdHJpbmdzLlxuICBmdW5jdGlvbiBnZXRMaW5lcyhkb2MsIGZyb20sIHRvKSB7XG4gICAgdmFyIG91dCA9IFtdO1xuICAgIGRvYy5pdGVyKGZyb20sIHRvLCBmdW5jdGlvbiAobGluZSkgeyBvdXQucHVzaChsaW5lLnRleHQpOyB9KTsgLy8gaXRlciBhYm9ydHMgd2hlbiBjYWxsYmFjayByZXR1cm5zIHRydXRoeSB2YWx1ZVxuICAgIHJldHVybiBvdXRcbiAgfVxuXG4gIC8vIFVwZGF0ZSB0aGUgaGVpZ2h0IG9mIGEgbGluZSwgcHJvcGFnYXRpbmcgdGhlIGhlaWdodCBjaGFuZ2VcbiAgLy8gdXB3YXJkcyB0byBwYXJlbnQgbm9kZXMuXG4gIGZ1bmN0aW9uIHVwZGF0ZUxpbmVIZWlnaHQobGluZSwgaGVpZ2h0KSB7XG4gICAgdmFyIGRpZmYgPSBoZWlnaHQgLSBsaW5lLmhlaWdodDtcbiAgICBpZiAoZGlmZikgeyBmb3IgKHZhciBuID0gbGluZTsgbjsgbiA9IG4ucGFyZW50KSB7IG4uaGVpZ2h0ICs9IGRpZmY7IH0gfVxuICB9XG5cbiAgLy8gR2l2ZW4gYSBsaW5lIG9iamVjdCwgZmluZCBpdHMgbGluZSBudW1iZXIgYnkgd2Fsa2luZyB1cCB0aHJvdWdoXG4gIC8vIGl0cyBwYXJlbnQgbGlua3MuXG4gIGZ1bmN0aW9uIGxpbmVObyhsaW5lKSB7XG4gICAgaWYgKGxpbmUucGFyZW50ID09IG51bGwpIHsgcmV0dXJuIG51bGwgfVxuICAgIHZhciBjdXIgPSBsaW5lLnBhcmVudCwgbm8gPSBpbmRleE9mKGN1ci5saW5lcywgbGluZSk7XG4gICAgZm9yICh2YXIgY2h1bmsgPSBjdXIucGFyZW50OyBjaHVuazsgY3VyID0gY2h1bmssIGNodW5rID0gY2h1bmsucGFyZW50KSB7XG4gICAgICBmb3IgKHZhciBpID0gMDs7ICsraSkge1xuICAgICAgICBpZiAoY2h1bmsuY2hpbGRyZW5baV0gPT0gY3VyKSB7IGJyZWFrIH1cbiAgICAgICAgbm8gKz0gY2h1bmsuY2hpbGRyZW5baV0uY2h1bmtTaXplKCk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBubyArIGN1ci5maXJzdFxuICB9XG5cbiAgLy8gRmluZCB0aGUgbGluZSBhdCB0aGUgZ2l2ZW4gdmVydGljYWwgcG9zaXRpb24sIHVzaW5nIHRoZSBoZWlnaHRcbiAgLy8gaW5mb3JtYXRpb24gaW4gdGhlIGRvY3VtZW50IHRyZWUuXG4gIGZ1bmN0aW9uIGxpbmVBdEhlaWdodChjaHVuaywgaCkge1xuICAgIHZhciBuID0gY2h1bmsuZmlyc3Q7XG4gICAgb3V0ZXI6IGRvIHtcbiAgICAgIGZvciAodmFyIGkkMSA9IDA7IGkkMSA8IGNodW5rLmNoaWxkcmVuLmxlbmd0aDsgKytpJDEpIHtcbiAgICAgICAgdmFyIGNoaWxkID0gY2h1bmsuY2hpbGRyZW5baSQxXSwgY2ggPSBjaGlsZC5oZWlnaHQ7XG4gICAgICAgIGlmIChoIDwgY2gpIHsgY2h1bmsgPSBjaGlsZDsgY29udGludWUgb3V0ZXIgfVxuICAgICAgICBoIC09IGNoO1xuICAgICAgICBuICs9IGNoaWxkLmNodW5rU2l6ZSgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG5cbiAgICB9IHdoaWxlICghY2h1bmsubGluZXMpXG4gICAgdmFyIGkgPSAwO1xuICAgIGZvciAoOyBpIDwgY2h1bmsubGluZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgIHZhciBsaW5lID0gY2h1bmsubGluZXNbaV0sIGxoID0gbGluZS5oZWlnaHQ7XG4gICAgICBpZiAoaCA8IGxoKSB7IGJyZWFrIH1cbiAgICAgIGggLT0gbGg7XG4gICAgfVxuICAgIHJldHVybiBuICsgaVxuICB9XG5cbiAgZnVuY3Rpb24gaXNMaW5lKGRvYywgbCkge3JldHVybiBsID49IGRvYy5maXJzdCAmJiBsIDwgZG9jLmZpcnN0ICsgZG9jLnNpemV9XG5cbiAgZnVuY3Rpb24gbGluZU51bWJlckZvcihvcHRpb25zLCBpKSB7XG4gICAgcmV0dXJuIFN0cmluZyhvcHRpb25zLmxpbmVOdW1iZXJGb3JtYXR0ZXIoaSArIG9wdGlvbnMuZmlyc3RMaW5lTnVtYmVyKSlcbiAgfVxuXG4gIC8vIEEgUG9zIGluc3RhbmNlIHJlcHJlc2VudHMgYSBwb3NpdGlvbiB3aXRoaW4gdGhlIHRleHQuXG4gIGZ1bmN0aW9uIFBvcyhsaW5lLCBjaCwgc3RpY2t5KSB7XG4gICAgaWYgKCBzdGlja3kgPT09IHZvaWQgMCApIHN0aWNreSA9IG51bGw7XG5cbiAgICBpZiAoISh0aGlzIGluc3RhbmNlb2YgUG9zKSkgeyByZXR1cm4gbmV3IFBvcyhsaW5lLCBjaCwgc3RpY2t5KSB9XG4gICAgdGhpcy5saW5lID0gbGluZTtcbiAgICB0aGlzLmNoID0gY2g7XG4gICAgdGhpcy5zdGlja3kgPSBzdGlja3k7XG4gIH1cblxuICAvLyBDb21wYXJlIHR3byBwb3NpdGlvbnMsIHJldHVybiAwIGlmIHRoZXkgYXJlIHRoZSBzYW1lLCBhIG5lZ2F0aXZlXG4gIC8vIG51bWJlciB3aGVuIGEgaXMgbGVzcywgYW5kIGEgcG9zaXRpdmUgbnVtYmVyIG90aGVyd2lzZS5cbiAgZnVuY3Rpb24gY21wKGEsIGIpIHsgcmV0dXJuIGEubGluZSAtIGIubGluZSB8fCBhLmNoIC0gYi5jaCB9XG5cbiAgZnVuY3Rpb24gZXF1YWxDdXJzb3JQb3MoYSwgYikgeyByZXR1cm4gYS5zdGlja3kgPT0gYi5zdGlja3kgJiYgY21wKGEsIGIpID09IDAgfVxuXG4gIGZ1bmN0aW9uIGNvcHlQb3MoeCkge3JldHVybiBQb3MoeC5saW5lLCB4LmNoKX1cbiAgZnVuY3Rpb24gbWF4UG9zKGEsIGIpIHsgcmV0dXJuIGNtcChhLCBiKSA8IDAgPyBiIDogYSB9XG4gIGZ1bmN0aW9uIG1pblBvcyhhLCBiKSB7IHJldHVybiBjbXAoYSwgYikgPCAwID8gYSA6IGIgfVxuXG4gIC8vIE1vc3Qgb2YgdGhlIGV4dGVybmFsIEFQSSBjbGlwcyBnaXZlbiBwb3NpdGlvbnMgdG8gbWFrZSBzdXJlIHRoZXlcbiAgLy8gYWN0dWFsbHkgZXhpc3Qgd2l0aGluIHRoZSBkb2N1bWVudC5cbiAgZnVuY3Rpb24gY2xpcExpbmUoZG9jLCBuKSB7cmV0dXJuIE1hdGgubWF4KGRvYy5maXJzdCwgTWF0aC5taW4obiwgZG9jLmZpcnN0ICsgZG9jLnNpemUgLSAxKSl9XG4gIGZ1bmN0aW9uIGNsaXBQb3MoZG9jLCBwb3MpIHtcbiAgICBpZiAocG9zLmxpbmUgPCBkb2MuZmlyc3QpIHsgcmV0dXJuIFBvcyhkb2MuZmlyc3QsIDApIH1cbiAgICB2YXIgbGFzdCA9IGRvYy5maXJzdCArIGRvYy5zaXplIC0gMTtcbiAgICBpZiAocG9zLmxpbmUgPiBsYXN0KSB7IHJldHVybiBQb3MobGFzdCwgZ2V0TGluZShkb2MsIGxhc3QpLnRleHQubGVuZ3RoKSB9XG4gICAgcmV0dXJuIGNsaXBUb0xlbihwb3MsIGdldExpbmUoZG9jLCBwb3MubGluZSkudGV4dC5sZW5ndGgpXG4gIH1cbiAgZnVuY3Rpb24gY2xpcFRvTGVuKHBvcywgbGluZWxlbikge1xuICAgIHZhciBjaCA9IHBvcy5jaDtcbiAgICBpZiAoY2ggPT0gbnVsbCB8fCBjaCA+IGxpbmVsZW4pIHsgcmV0dXJuIFBvcyhwb3MubGluZSwgbGluZWxlbikgfVxuICAgIGVsc2UgaWYgKGNoIDwgMCkgeyByZXR1cm4gUG9zKHBvcy5saW5lLCAwKSB9XG4gICAgZWxzZSB7IHJldHVybiBwb3MgfVxuICB9XG4gIGZ1bmN0aW9uIGNsaXBQb3NBcnJheShkb2MsIGFycmF5KSB7XG4gICAgdmFyIG91dCA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyYXkubGVuZ3RoOyBpKyspIHsgb3V0W2ldID0gY2xpcFBvcyhkb2MsIGFycmF5W2ldKTsgfVxuICAgIHJldHVybiBvdXRcbiAgfVxuXG4gIHZhciBTYXZlZENvbnRleHQgPSBmdW5jdGlvbihzdGF0ZSwgbG9va0FoZWFkKSB7XG4gICAgdGhpcy5zdGF0ZSA9IHN0YXRlO1xuICAgIHRoaXMubG9va0FoZWFkID0gbG9va0FoZWFkO1xuICB9O1xuXG4gIHZhciBDb250ZXh0ID0gZnVuY3Rpb24oZG9jLCBzdGF0ZSwgbGluZSwgbG9va0FoZWFkKSB7XG4gICAgdGhpcy5zdGF0ZSA9IHN0YXRlO1xuICAgIHRoaXMuZG9jID0gZG9jO1xuICAgIHRoaXMubGluZSA9IGxpbmU7XG4gICAgdGhpcy5tYXhMb29rQWhlYWQgPSBsb29rQWhlYWQgfHwgMDtcbiAgICB0aGlzLmJhc2VUb2tlbnMgPSBudWxsO1xuICAgIHRoaXMuYmFzZVRva2VuUG9zID0gMTtcbiAgfTtcblxuICBDb250ZXh0LnByb3RvdHlwZS5sb29rQWhlYWQgPSBmdW5jdGlvbiAobikge1xuICAgIHZhciBsaW5lID0gdGhpcy5kb2MuZ2V0TGluZSh0aGlzLmxpbmUgKyBuKTtcbiAgICBpZiAobGluZSAhPSBudWxsICYmIG4gPiB0aGlzLm1heExvb2tBaGVhZCkgeyB0aGlzLm1heExvb2tBaGVhZCA9IG47IH1cbiAgICByZXR1cm4gbGluZVxuICB9O1xuXG4gIENvbnRleHQucHJvdG90eXBlLmJhc2VUb2tlbiA9IGZ1bmN0aW9uIChuKSB7XG4gICAgaWYgKCF0aGlzLmJhc2VUb2tlbnMpIHsgcmV0dXJuIG51bGwgfVxuICAgIHdoaWxlICh0aGlzLmJhc2VUb2tlbnNbdGhpcy5iYXNlVG9rZW5Qb3NdIDw9IG4pXG4gICAgICB7IHRoaXMuYmFzZVRva2VuUG9zICs9IDI7IH1cbiAgICB2YXIgdHlwZSA9IHRoaXMuYmFzZVRva2Vuc1t0aGlzLmJhc2VUb2tlblBvcyArIDFdO1xuICAgIHJldHVybiB7dHlwZTogdHlwZSAmJiB0eXBlLnJlcGxhY2UoLyggfF4pb3ZlcmxheSAuKi8sIFwiXCIpLFxuICAgICAgICAgICAgc2l6ZTogdGhpcy5iYXNlVG9rZW5zW3RoaXMuYmFzZVRva2VuUG9zXSAtIG59XG4gIH07XG5cbiAgQ29udGV4dC5wcm90b3R5cGUubmV4dExpbmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5saW5lKys7XG4gICAgaWYgKHRoaXMubWF4TG9va0FoZWFkID4gMCkgeyB0aGlzLm1heExvb2tBaGVhZC0tOyB9XG4gIH07XG5cbiAgQ29udGV4dC5mcm9tU2F2ZWQgPSBmdW5jdGlvbiAoZG9jLCBzYXZlZCwgbGluZSkge1xuICAgIGlmIChzYXZlZCBpbnN0YW5jZW9mIFNhdmVkQ29udGV4dClcbiAgICAgIHsgcmV0dXJuIG5ldyBDb250ZXh0KGRvYywgY29weVN0YXRlKGRvYy5tb2RlLCBzYXZlZC5zdGF0ZSksIGxpbmUsIHNhdmVkLmxvb2tBaGVhZCkgfVxuICAgIGVsc2VcbiAgICAgIHsgcmV0dXJuIG5ldyBDb250ZXh0KGRvYywgY29weVN0YXRlKGRvYy5tb2RlLCBzYXZlZCksIGxpbmUpIH1cbiAgfTtcblxuICBDb250ZXh0LnByb3RvdHlwZS5zYXZlID0gZnVuY3Rpb24gKGNvcHkpIHtcbiAgICB2YXIgc3RhdGUgPSBjb3B5ICE9PSBmYWxzZSA/IGNvcHlTdGF0ZSh0aGlzLmRvYy5tb2RlLCB0aGlzLnN0YXRlKSA6IHRoaXMuc3RhdGU7XG4gICAgcmV0dXJuIHRoaXMubWF4TG9va0FoZWFkID4gMCA/IG5ldyBTYXZlZENvbnRleHQoc3RhdGUsIHRoaXMubWF4TG9va0FoZWFkKSA6IHN0YXRlXG4gIH07XG5cblxuICAvLyBDb21wdXRlIGEgc3R5bGUgYXJyYXkgKGFuIGFycmF5IHN0YXJ0aW5nIHdpdGggYSBtb2RlIGdlbmVyYXRpb25cbiAgLy8gLS0gZm9yIGludmFsaWRhdGlvbiAtLSBmb2xsb3dlZCBieSBwYWlycyBvZiBlbmQgcG9zaXRpb25zIGFuZFxuICAvLyBzdHlsZSBzdHJpbmdzKSwgd2hpY2ggaXMgdXNlZCB0byBoaWdobGlnaHQgdGhlIHRva2VucyBvbiB0aGVcbiAgLy8gbGluZS5cbiAgZnVuY3Rpb24gaGlnaGxpZ2h0TGluZShjbSwgbGluZSwgY29udGV4dCwgZm9yY2VUb0VuZCkge1xuICAgIC8vIEEgc3R5bGVzIGFycmF5IGFsd2F5cyBzdGFydHMgd2l0aCBhIG51bWJlciBpZGVudGlmeWluZyB0aGVcbiAgICAvLyBtb2RlL292ZXJsYXlzIHRoYXQgaXQgaXMgYmFzZWQgb24gKGZvciBlYXN5IGludmFsaWRhdGlvbikuXG4gICAgdmFyIHN0ID0gW2NtLnN0YXRlLm1vZGVHZW5dLCBsaW5lQ2xhc3NlcyA9IHt9O1xuICAgIC8vIENvbXB1dGUgdGhlIGJhc2UgYXJyYXkgb2Ygc3R5bGVzXG4gICAgcnVuTW9kZShjbSwgbGluZS50ZXh0LCBjbS5kb2MubW9kZSwgY29udGV4dCwgZnVuY3Rpb24gKGVuZCwgc3R5bGUpIHsgcmV0dXJuIHN0LnB1c2goZW5kLCBzdHlsZSk7IH0sXG4gICAgICAgICAgICBsaW5lQ2xhc3NlcywgZm9yY2VUb0VuZCk7XG4gICAgdmFyIHN0YXRlID0gY29udGV4dC5zdGF0ZTtcblxuICAgIC8vIFJ1biBvdmVybGF5cywgYWRqdXN0IHN0eWxlIGFycmF5LlxuICAgIHZhciBsb29wID0gZnVuY3Rpb24gKCBvICkge1xuICAgICAgY29udGV4dC5iYXNlVG9rZW5zID0gc3Q7XG4gICAgICB2YXIgb3ZlcmxheSA9IGNtLnN0YXRlLm92ZXJsYXlzW29dLCBpID0gMSwgYXQgPSAwO1xuICAgICAgY29udGV4dC5zdGF0ZSA9IHRydWU7XG4gICAgICBydW5Nb2RlKGNtLCBsaW5lLnRleHQsIG92ZXJsYXkubW9kZSwgY29udGV4dCwgZnVuY3Rpb24gKGVuZCwgc3R5bGUpIHtcbiAgICAgICAgdmFyIHN0YXJ0ID0gaTtcbiAgICAgICAgLy8gRW5zdXJlIHRoZXJlJ3MgYSB0b2tlbiBlbmQgYXQgdGhlIGN1cnJlbnQgcG9zaXRpb24sIGFuZCB0aGF0IGkgcG9pbnRzIGF0IGl0XG4gICAgICAgIHdoaWxlIChhdCA8IGVuZCkge1xuICAgICAgICAgIHZhciBpX2VuZCA9IHN0W2ldO1xuICAgICAgICAgIGlmIChpX2VuZCA+IGVuZClcbiAgICAgICAgICAgIHsgc3Quc3BsaWNlKGksIDEsIGVuZCwgc3RbaSsxXSwgaV9lbmQpOyB9XG4gICAgICAgICAgaSArPSAyO1xuICAgICAgICAgIGF0ID0gTWF0aC5taW4oZW5kLCBpX2VuZCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFzdHlsZSkgeyByZXR1cm4gfVxuICAgICAgICBpZiAob3ZlcmxheS5vcGFxdWUpIHtcbiAgICAgICAgICBzdC5zcGxpY2Uoc3RhcnQsIGkgLSBzdGFydCwgZW5kLCBcIm92ZXJsYXkgXCIgKyBzdHlsZSk7XG4gICAgICAgICAgaSA9IHN0YXJ0ICsgMjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBmb3IgKDsgc3RhcnQgPCBpOyBzdGFydCArPSAyKSB7XG4gICAgICAgICAgICB2YXIgY3VyID0gc3Rbc3RhcnQrMV07XG4gICAgICAgICAgICBzdFtzdGFydCsxXSA9IChjdXIgPyBjdXIgKyBcIiBcIiA6IFwiXCIpICsgXCJvdmVybGF5IFwiICsgc3R5bGU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LCBsaW5lQ2xhc3Nlcyk7XG4gICAgICBjb250ZXh0LnN0YXRlID0gc3RhdGU7XG4gICAgICBjb250ZXh0LmJhc2VUb2tlbnMgPSBudWxsO1xuICAgICAgY29udGV4dC5iYXNlVG9rZW5Qb3MgPSAxO1xuICAgIH07XG5cbiAgICBmb3IgKHZhciBvID0gMDsgbyA8IGNtLnN0YXRlLm92ZXJsYXlzLmxlbmd0aDsgKytvKSBsb29wKCBvICk7XG5cbiAgICByZXR1cm4ge3N0eWxlczogc3QsIGNsYXNzZXM6IGxpbmVDbGFzc2VzLmJnQ2xhc3MgfHwgbGluZUNsYXNzZXMudGV4dENsYXNzID8gbGluZUNsYXNzZXMgOiBudWxsfVxuICB9XG5cbiAgZnVuY3Rpb24gZ2V0TGluZVN0eWxlcyhjbSwgbGluZSwgdXBkYXRlRnJvbnRpZXIpIHtcbiAgICBpZiAoIWxpbmUuc3R5bGVzIHx8IGxpbmUuc3R5bGVzWzBdICE9IGNtLnN0YXRlLm1vZGVHZW4pIHtcbiAgICAgIHZhciBjb250ZXh0ID0gZ2V0Q29udGV4dEJlZm9yZShjbSwgbGluZU5vKGxpbmUpKTtcbiAgICAgIHZhciByZXNldFN0YXRlID0gbGluZS50ZXh0Lmxlbmd0aCA+IGNtLm9wdGlvbnMubWF4SGlnaGxpZ2h0TGVuZ3RoICYmIGNvcHlTdGF0ZShjbS5kb2MubW9kZSwgY29udGV4dC5zdGF0ZSk7XG4gICAgICB2YXIgcmVzdWx0ID0gaGlnaGxpZ2h0TGluZShjbSwgbGluZSwgY29udGV4dCk7XG4gICAgICBpZiAocmVzZXRTdGF0ZSkgeyBjb250ZXh0LnN0YXRlID0gcmVzZXRTdGF0ZTsgfVxuICAgICAgbGluZS5zdGF0ZUFmdGVyID0gY29udGV4dC5zYXZlKCFyZXNldFN0YXRlKTtcbiAgICAgIGxpbmUuc3R5bGVzID0gcmVzdWx0LnN0eWxlcztcbiAgICAgIGlmIChyZXN1bHQuY2xhc3NlcykgeyBsaW5lLnN0eWxlQ2xhc3NlcyA9IHJlc3VsdC5jbGFzc2VzOyB9XG4gICAgICBlbHNlIGlmIChsaW5lLnN0eWxlQ2xhc3NlcykgeyBsaW5lLnN0eWxlQ2xhc3NlcyA9IG51bGw7IH1cbiAgICAgIGlmICh1cGRhdGVGcm9udGllciA9PT0gY20uZG9jLmhpZ2hsaWdodEZyb250aWVyKVxuICAgICAgICB7IGNtLmRvYy5tb2RlRnJvbnRpZXIgPSBNYXRoLm1heChjbS5kb2MubW9kZUZyb250aWVyLCArK2NtLmRvYy5oaWdobGlnaHRGcm9udGllcik7IH1cbiAgICB9XG4gICAgcmV0dXJuIGxpbmUuc3R5bGVzXG4gIH1cblxuICBmdW5jdGlvbiBnZXRDb250ZXh0QmVmb3JlKGNtLCBuLCBwcmVjaXNlKSB7XG4gICAgdmFyIGRvYyA9IGNtLmRvYywgZGlzcGxheSA9IGNtLmRpc3BsYXk7XG4gICAgaWYgKCFkb2MubW9kZS5zdGFydFN0YXRlKSB7IHJldHVybiBuZXcgQ29udGV4dChkb2MsIHRydWUsIG4pIH1cbiAgICB2YXIgc3RhcnQgPSBmaW5kU3RhcnRMaW5lKGNtLCBuLCBwcmVjaXNlKTtcbiAgICB2YXIgc2F2ZWQgPSBzdGFydCA+IGRvYy5maXJzdCAmJiBnZXRMaW5lKGRvYywgc3RhcnQgLSAxKS5zdGF0ZUFmdGVyO1xuICAgIHZhciBjb250ZXh0ID0gc2F2ZWQgPyBDb250ZXh0LmZyb21TYXZlZChkb2MsIHNhdmVkLCBzdGFydCkgOiBuZXcgQ29udGV4dChkb2MsIHN0YXJ0U3RhdGUoZG9jLm1vZGUpLCBzdGFydCk7XG5cbiAgICBkb2MuaXRlcihzdGFydCwgbiwgZnVuY3Rpb24gKGxpbmUpIHtcbiAgICAgIHByb2Nlc3NMaW5lKGNtLCBsaW5lLnRleHQsIGNvbnRleHQpO1xuICAgICAgdmFyIHBvcyA9IGNvbnRleHQubGluZTtcbiAgICAgIGxpbmUuc3RhdGVBZnRlciA9IHBvcyA9PSBuIC0gMSB8fCBwb3MgJSA1ID09IDAgfHwgcG9zID49IGRpc3BsYXkudmlld0Zyb20gJiYgcG9zIDwgZGlzcGxheS52aWV3VG8gPyBjb250ZXh0LnNhdmUoKSA6IG51bGw7XG4gICAgICBjb250ZXh0Lm5leHRMaW5lKCk7XG4gICAgfSk7XG4gICAgaWYgKHByZWNpc2UpIHsgZG9jLm1vZGVGcm9udGllciA9IGNvbnRleHQubGluZTsgfVxuICAgIHJldHVybiBjb250ZXh0XG4gIH1cblxuICAvLyBMaWdodHdlaWdodCBmb3JtIG9mIGhpZ2hsaWdodCAtLSBwcm9jZWVkIG92ZXIgdGhpcyBsaW5lIGFuZFxuICAvLyB1cGRhdGUgc3RhdGUsIGJ1dCBkb24ndCBzYXZlIGEgc3R5bGUgYXJyYXkuIFVzZWQgZm9yIGxpbmVzIHRoYXRcbiAgLy8gYXJlbid0IGN1cnJlbnRseSB2aXNpYmxlLlxuICBmdW5jdGlvbiBwcm9jZXNzTGluZShjbSwgdGV4dCwgY29udGV4dCwgc3RhcnRBdCkge1xuICAgIHZhciBtb2RlID0gY20uZG9jLm1vZGU7XG4gICAgdmFyIHN0cmVhbSA9IG5ldyBTdHJpbmdTdHJlYW0odGV4dCwgY20ub3B0aW9ucy50YWJTaXplLCBjb250ZXh0KTtcbiAgICBzdHJlYW0uc3RhcnQgPSBzdHJlYW0ucG9zID0gc3RhcnRBdCB8fCAwO1xuICAgIGlmICh0ZXh0ID09IFwiXCIpIHsgY2FsbEJsYW5rTGluZShtb2RlLCBjb250ZXh0LnN0YXRlKTsgfVxuICAgIHdoaWxlICghc3RyZWFtLmVvbCgpKSB7XG4gICAgICByZWFkVG9rZW4obW9kZSwgc3RyZWFtLCBjb250ZXh0LnN0YXRlKTtcbiAgICAgIHN0cmVhbS5zdGFydCA9IHN0cmVhbS5wb3M7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gY2FsbEJsYW5rTGluZShtb2RlLCBzdGF0ZSkge1xuICAgIGlmIChtb2RlLmJsYW5rTGluZSkgeyByZXR1cm4gbW9kZS5ibGFua0xpbmUoc3RhdGUpIH1cbiAgICBpZiAoIW1vZGUuaW5uZXJNb2RlKSB7IHJldHVybiB9XG4gICAgdmFyIGlubmVyID0gaW5uZXJNb2RlKG1vZGUsIHN0YXRlKTtcbiAgICBpZiAoaW5uZXIubW9kZS5ibGFua0xpbmUpIHsgcmV0dXJuIGlubmVyLm1vZGUuYmxhbmtMaW5lKGlubmVyLnN0YXRlKSB9XG4gIH1cblxuICBmdW5jdGlvbiByZWFkVG9rZW4obW9kZSwgc3RyZWFtLCBzdGF0ZSwgaW5uZXIpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IDEwOyBpKyspIHtcbiAgICAgIGlmIChpbm5lcikgeyBpbm5lclswXSA9IGlubmVyTW9kZShtb2RlLCBzdGF0ZSkubW9kZTsgfVxuICAgICAgdmFyIHN0eWxlID0gbW9kZS50b2tlbihzdHJlYW0sIHN0YXRlKTtcbiAgICAgIGlmIChzdHJlYW0ucG9zID4gc3RyZWFtLnN0YXJ0KSB7IHJldHVybiBzdHlsZSB9XG4gICAgfVxuICAgIHRocm93IG5ldyBFcnJvcihcIk1vZGUgXCIgKyBtb2RlLm5hbWUgKyBcIiBmYWlsZWQgdG8gYWR2YW5jZSBzdHJlYW0uXCIpXG4gIH1cblxuICB2YXIgVG9rZW4gPSBmdW5jdGlvbihzdHJlYW0sIHR5cGUsIHN0YXRlKSB7XG4gICAgdGhpcy5zdGFydCA9IHN0cmVhbS5zdGFydDsgdGhpcy5lbmQgPSBzdHJlYW0ucG9zO1xuICAgIHRoaXMuc3RyaW5nID0gc3RyZWFtLmN1cnJlbnQoKTtcbiAgICB0aGlzLnR5cGUgPSB0eXBlIHx8IG51bGw7XG4gICAgdGhpcy5zdGF0ZSA9IHN0YXRlO1xuICB9O1xuXG4gIC8vIFV0aWxpdHkgZm9yIGdldFRva2VuQXQgYW5kIGdldExpbmVUb2tlbnNcbiAgZnVuY3Rpb24gdGFrZVRva2VuKGNtLCBwb3MsIHByZWNpc2UsIGFzQXJyYXkpIHtcbiAgICB2YXIgZG9jID0gY20uZG9jLCBtb2RlID0gZG9jLm1vZGUsIHN0eWxlO1xuICAgIHBvcyA9IGNsaXBQb3MoZG9jLCBwb3MpO1xuICAgIHZhciBsaW5lID0gZ2V0TGluZShkb2MsIHBvcy5saW5lKSwgY29udGV4dCA9IGdldENvbnRleHRCZWZvcmUoY20sIHBvcy5saW5lLCBwcmVjaXNlKTtcbiAgICB2YXIgc3RyZWFtID0gbmV3IFN0cmluZ1N0cmVhbShsaW5lLnRleHQsIGNtLm9wdGlvbnMudGFiU2l6ZSwgY29udGV4dCksIHRva2VucztcbiAgICBpZiAoYXNBcnJheSkgeyB0b2tlbnMgPSBbXTsgfVxuICAgIHdoaWxlICgoYXNBcnJheSB8fCBzdHJlYW0ucG9zIDwgcG9zLmNoKSAmJiAhc3RyZWFtLmVvbCgpKSB7XG4gICAgICBzdHJlYW0uc3RhcnQgPSBzdHJlYW0ucG9zO1xuICAgICAgc3R5bGUgPSByZWFkVG9rZW4obW9kZSwgc3RyZWFtLCBjb250ZXh0LnN0YXRlKTtcbiAgICAgIGlmIChhc0FycmF5KSB7IHRva2Vucy5wdXNoKG5ldyBUb2tlbihzdHJlYW0sIHN0eWxlLCBjb3B5U3RhdGUoZG9jLm1vZGUsIGNvbnRleHQuc3RhdGUpKSk7IH1cbiAgICB9XG4gICAgcmV0dXJuIGFzQXJyYXkgPyB0b2tlbnMgOiBuZXcgVG9rZW4oc3RyZWFtLCBzdHlsZSwgY29udGV4dC5zdGF0ZSlcbiAgfVxuXG4gIGZ1bmN0aW9uIGV4dHJhY3RMaW5lQ2xhc3Nlcyh0eXBlLCBvdXRwdXQpIHtcbiAgICBpZiAodHlwZSkgeyBmb3IgKDs7KSB7XG4gICAgICB2YXIgbGluZUNsYXNzID0gdHlwZS5tYXRjaCgvKD86XnxcXHMrKWxpbmUtKGJhY2tncm91bmQtKT8oXFxTKykvKTtcbiAgICAgIGlmICghbGluZUNsYXNzKSB7IGJyZWFrIH1cbiAgICAgIHR5cGUgPSB0eXBlLnNsaWNlKDAsIGxpbmVDbGFzcy5pbmRleCkgKyB0eXBlLnNsaWNlKGxpbmVDbGFzcy5pbmRleCArIGxpbmVDbGFzc1swXS5sZW5ndGgpO1xuICAgICAgdmFyIHByb3AgPSBsaW5lQ2xhc3NbMV0gPyBcImJnQ2xhc3NcIiA6IFwidGV4dENsYXNzXCI7XG4gICAgICBpZiAob3V0cHV0W3Byb3BdID09IG51bGwpXG4gICAgICAgIHsgb3V0cHV0W3Byb3BdID0gbGluZUNsYXNzWzJdOyB9XG4gICAgICBlbHNlIGlmICghKG5ldyBSZWdFeHAoXCIoPzpefFxcXFxzKVwiICsgbGluZUNsYXNzWzJdICsgXCIoPzokfFxcXFxzKVwiKSkudGVzdChvdXRwdXRbcHJvcF0pKVxuICAgICAgICB7IG91dHB1dFtwcm9wXSArPSBcIiBcIiArIGxpbmVDbGFzc1syXTsgfVxuICAgIH0gfVxuICAgIHJldHVybiB0eXBlXG4gIH1cblxuICAvLyBSdW4gdGhlIGdpdmVuIG1vZGUncyBwYXJzZXIgb3ZlciBhIGxpbmUsIGNhbGxpbmcgZiBmb3IgZWFjaCB0b2tlbi5cbiAgZnVuY3Rpb24gcnVuTW9kZShjbSwgdGV4dCwgbW9kZSwgY29udGV4dCwgZiwgbGluZUNsYXNzZXMsIGZvcmNlVG9FbmQpIHtcbiAgICB2YXIgZmxhdHRlblNwYW5zID0gbW9kZS5mbGF0dGVuU3BhbnM7XG4gICAgaWYgKGZsYXR0ZW5TcGFucyA9PSBudWxsKSB7IGZsYXR0ZW5TcGFucyA9IGNtLm9wdGlvbnMuZmxhdHRlblNwYW5zOyB9XG4gICAgdmFyIGN1clN0YXJ0ID0gMCwgY3VyU3R5bGUgPSBudWxsO1xuICAgIHZhciBzdHJlYW0gPSBuZXcgU3RyaW5nU3RyZWFtKHRleHQsIGNtLm9wdGlvbnMudGFiU2l6ZSwgY29udGV4dCksIHN0eWxlO1xuICAgIHZhciBpbm5lciA9IGNtLm9wdGlvbnMuYWRkTW9kZUNsYXNzICYmIFtudWxsXTtcbiAgICBpZiAodGV4dCA9PSBcIlwiKSB7IGV4dHJhY3RMaW5lQ2xhc3NlcyhjYWxsQmxhbmtMaW5lKG1vZGUsIGNvbnRleHQuc3RhdGUpLCBsaW5lQ2xhc3Nlcyk7IH1cbiAgICB3aGlsZSAoIXN0cmVhbS5lb2woKSkge1xuICAgICAgaWYgKHN0cmVhbS5wb3MgPiBjbS5vcHRpb25zLm1heEhpZ2hsaWdodExlbmd0aCkge1xuICAgICAgICBmbGF0dGVuU3BhbnMgPSBmYWxzZTtcbiAgICAgICAgaWYgKGZvcmNlVG9FbmQpIHsgcHJvY2Vzc0xpbmUoY20sIHRleHQsIGNvbnRleHQsIHN0cmVhbS5wb3MpOyB9XG4gICAgICAgIHN0cmVhbS5wb3MgPSB0ZXh0Lmxlbmd0aDtcbiAgICAgICAgc3R5bGUgPSBudWxsO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3R5bGUgPSBleHRyYWN0TGluZUNsYXNzZXMocmVhZFRva2VuKG1vZGUsIHN0cmVhbSwgY29udGV4dC5zdGF0ZSwgaW5uZXIpLCBsaW5lQ2xhc3Nlcyk7XG4gICAgICB9XG4gICAgICBpZiAoaW5uZXIpIHtcbiAgICAgICAgdmFyIG1OYW1lID0gaW5uZXJbMF0ubmFtZTtcbiAgICAgICAgaWYgKG1OYW1lKSB7IHN0eWxlID0gXCJtLVwiICsgKHN0eWxlID8gbU5hbWUgKyBcIiBcIiArIHN0eWxlIDogbU5hbWUpOyB9XG4gICAgICB9XG4gICAgICBpZiAoIWZsYXR0ZW5TcGFucyB8fCBjdXJTdHlsZSAhPSBzdHlsZSkge1xuICAgICAgICB3aGlsZSAoY3VyU3RhcnQgPCBzdHJlYW0uc3RhcnQpIHtcbiAgICAgICAgICBjdXJTdGFydCA9IE1hdGgubWluKHN0cmVhbS5zdGFydCwgY3VyU3RhcnQgKyA1MDAwKTtcbiAgICAgICAgICBmKGN1clN0YXJ0LCBjdXJTdHlsZSk7XG4gICAgICAgIH1cbiAgICAgICAgY3VyU3R5bGUgPSBzdHlsZTtcbiAgICAgIH1cbiAgICAgIHN0cmVhbS5zdGFydCA9IHN0cmVhbS5wb3M7XG4gICAgfVxuICAgIHdoaWxlIChjdXJTdGFydCA8IHN0cmVhbS5wb3MpIHtcbiAgICAgIC8vIFdlYmtpdCBzZWVtcyB0byByZWZ1c2UgdG8gcmVuZGVyIHRleHQgbm9kZXMgbG9uZ2VyIHRoYW4gNTc0NDRcbiAgICAgIC8vIGNoYXJhY3RlcnMsIGFuZCByZXR1cm5zIGluYWNjdXJhdGUgbWVhc3VyZW1lbnRzIGluIG5vZGVzXG4gICAgICAvLyBzdGFydGluZyBhcm91bmQgNTAwMCBjaGFycy5cbiAgICAgIHZhciBwb3MgPSBNYXRoLm1pbihzdHJlYW0ucG9zLCBjdXJTdGFydCArIDUwMDApO1xuICAgICAgZihwb3MsIGN1clN0eWxlKTtcbiAgICAgIGN1clN0YXJ0ID0gcG9zO1xuICAgIH1cbiAgfVxuXG4gIC8vIEZpbmRzIHRoZSBsaW5lIHRvIHN0YXJ0IHdpdGggd2hlbiBzdGFydGluZyBhIHBhcnNlLiBUcmllcyB0b1xuICAvLyBmaW5kIGEgbGluZSB3aXRoIGEgc3RhdGVBZnRlciwgc28gdGhhdCBpdCBjYW4gc3RhcnQgd2l0aCBhXG4gIC8vIHZhbGlkIHN0YXRlLiBJZiB0aGF0IGZhaWxzLCBpdCByZXR1cm5zIHRoZSBsaW5lIHdpdGggdGhlXG4gIC8vIHNtYWxsZXN0IGluZGVudGF0aW9uLCB3aGljaCB0ZW5kcyB0byBuZWVkIHRoZSBsZWFzdCBjb250ZXh0IHRvXG4gIC8vIHBhcnNlIGNvcnJlY3RseS5cbiAgZnVuY3Rpb24gZmluZFN0YXJ0TGluZShjbSwgbiwgcHJlY2lzZSkge1xuICAgIHZhciBtaW5pbmRlbnQsIG1pbmxpbmUsIGRvYyA9IGNtLmRvYztcbiAgICB2YXIgbGltID0gcHJlY2lzZSA/IC0xIDogbiAtIChjbS5kb2MubW9kZS5pbm5lck1vZGUgPyAxMDAwIDogMTAwKTtcbiAgICBmb3IgKHZhciBzZWFyY2ggPSBuOyBzZWFyY2ggPiBsaW07IC0tc2VhcmNoKSB7XG4gICAgICBpZiAoc2VhcmNoIDw9IGRvYy5maXJzdCkgeyByZXR1cm4gZG9jLmZpcnN0IH1cbiAgICAgIHZhciBsaW5lID0gZ2V0TGluZShkb2MsIHNlYXJjaCAtIDEpLCBhZnRlciA9IGxpbmUuc3RhdGVBZnRlcjtcbiAgICAgIGlmIChhZnRlciAmJiAoIXByZWNpc2UgfHwgc2VhcmNoICsgKGFmdGVyIGluc3RhbmNlb2YgU2F2ZWRDb250ZXh0ID8gYWZ0ZXIubG9va0FoZWFkIDogMCkgPD0gZG9jLm1vZGVGcm9udGllcikpXG4gICAgICAgIHsgcmV0dXJuIHNlYXJjaCB9XG4gICAgICB2YXIgaW5kZW50ZWQgPSBjb3VudENvbHVtbihsaW5lLnRleHQsIG51bGwsIGNtLm9wdGlvbnMudGFiU2l6ZSk7XG4gICAgICBpZiAobWlubGluZSA9PSBudWxsIHx8IG1pbmluZGVudCA+IGluZGVudGVkKSB7XG4gICAgICAgIG1pbmxpbmUgPSBzZWFyY2ggLSAxO1xuICAgICAgICBtaW5pbmRlbnQgPSBpbmRlbnRlZDtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG1pbmxpbmVcbiAgfVxuXG4gIGZ1bmN0aW9uIHJldHJlYXRGcm9udGllcihkb2MsIG4pIHtcbiAgICBkb2MubW9kZUZyb250aWVyID0gTWF0aC5taW4oZG9jLm1vZGVGcm9udGllciwgbik7XG4gICAgaWYgKGRvYy5oaWdobGlnaHRGcm9udGllciA8IG4gLSAxMCkgeyByZXR1cm4gfVxuICAgIHZhciBzdGFydCA9IGRvYy5maXJzdDtcbiAgICBmb3IgKHZhciBsaW5lID0gbiAtIDE7IGxpbmUgPiBzdGFydDsgbGluZS0tKSB7XG4gICAgICB2YXIgc2F2ZWQgPSBnZXRMaW5lKGRvYywgbGluZSkuc3RhdGVBZnRlcjtcbiAgICAgIC8vIGNoYW5nZSBpcyBvbiAzXG4gICAgICAvLyBzdGF0ZSBvbiBsaW5lIDEgbG9va2VkIGFoZWFkIDIgLS0gc28gc2F3IDNcbiAgICAgIC8vIHRlc3QgMSArIDIgPCAzIHNob3VsZCBjb3ZlciB0aGlzXG4gICAgICBpZiAoc2F2ZWQgJiYgKCEoc2F2ZWQgaW5zdGFuY2VvZiBTYXZlZENvbnRleHQpIHx8IGxpbmUgKyBzYXZlZC5sb29rQWhlYWQgPCBuKSkge1xuICAgICAgICBzdGFydCA9IGxpbmUgKyAxO1xuICAgICAgICBicmVha1xuICAgICAgfVxuICAgIH1cbiAgICBkb2MuaGlnaGxpZ2h0RnJvbnRpZXIgPSBNYXRoLm1pbihkb2MuaGlnaGxpZ2h0RnJvbnRpZXIsIHN0YXJ0KTtcbiAgfVxuXG4gIC8vIE9wdGltaXplIHNvbWUgY29kZSB3aGVuIHRoZXNlIGZlYXR1cmVzIGFyZSBub3QgdXNlZC5cbiAgdmFyIHNhd1JlYWRPbmx5U3BhbnMgPSBmYWxzZSwgc2F3Q29sbGFwc2VkU3BhbnMgPSBmYWxzZTtcblxuICBmdW5jdGlvbiBzZWVSZWFkT25seVNwYW5zKCkge1xuICAgIHNhd1JlYWRPbmx5U3BhbnMgPSB0cnVlO1xuICB9XG5cbiAgZnVuY3Rpb24gc2VlQ29sbGFwc2VkU3BhbnMoKSB7XG4gICAgc2F3Q29sbGFwc2VkU3BhbnMgPSB0cnVlO1xuICB9XG5cbiAgLy8gVEVYVE1BUktFUiBTUEFOU1xuXG4gIGZ1bmN0aW9uIE1hcmtlZFNwYW4obWFya2VyLCBmcm9tLCB0bykge1xuICAgIHRoaXMubWFya2VyID0gbWFya2VyO1xuICAgIHRoaXMuZnJvbSA9IGZyb207IHRoaXMudG8gPSB0bztcbiAgfVxuXG4gIC8vIFNlYXJjaCBhbiBhcnJheSBvZiBzcGFucyBmb3IgYSBzcGFuIG1hdGNoaW5nIHRoZSBnaXZlbiBtYXJrZXIuXG4gIGZ1bmN0aW9uIGdldE1hcmtlZFNwYW5Gb3Ioc3BhbnMsIG1hcmtlcikge1xuICAgIGlmIChzcGFucykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHNwYW5zLmxlbmd0aDsgKytpKSB7XG4gICAgICB2YXIgc3BhbiA9IHNwYW5zW2ldO1xuICAgICAgaWYgKHNwYW4ubWFya2VyID09IG1hcmtlcikgeyByZXR1cm4gc3BhbiB9XG4gICAgfSB9XG4gIH1cblxuICAvLyBSZW1vdmUgYSBzcGFuIGZyb20gYW4gYXJyYXksIHJldHVybmluZyB1bmRlZmluZWQgaWYgbm8gc3BhbnMgYXJlXG4gIC8vIGxlZnQgKHdlIGRvbid0IHN0b3JlIGFycmF5cyBmb3IgbGluZXMgd2l0aG91dCBzcGFucykuXG4gIGZ1bmN0aW9uIHJlbW92ZU1hcmtlZFNwYW4oc3BhbnMsIHNwYW4pIHtcbiAgICB2YXIgcjtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNwYW5zLmxlbmd0aDsgKytpKVxuICAgICAgeyBpZiAoc3BhbnNbaV0gIT0gc3BhbikgeyAociB8fCAociA9IFtdKSkucHVzaChzcGFuc1tpXSk7IH0gfVxuICAgIHJldHVybiByXG4gIH1cblxuICAvLyBBZGQgYSBzcGFuIHRvIGEgbGluZS5cbiAgZnVuY3Rpb24gYWRkTWFya2VkU3BhbihsaW5lLCBzcGFuLCBvcCkge1xuICAgIHZhciBpblRoaXNPcCA9IG9wICYmIHdpbmRvdy5XZWFrU2V0ICYmIChvcC5tYXJrZWRTcGFucyB8fCAob3AubWFya2VkU3BhbnMgPSBuZXcgV2Vha1NldCkpO1xuICAgIGlmIChpblRoaXNPcCAmJiBsaW5lLm1hcmtlZFNwYW5zICYmIGluVGhpc09wLmhhcyhsaW5lLm1hcmtlZFNwYW5zKSkge1xuICAgICAgbGluZS5tYXJrZWRTcGFucy5wdXNoKHNwYW4pO1xuICAgIH0gZWxzZSB7XG4gICAgICBsaW5lLm1hcmtlZFNwYW5zID0gbGluZS5tYXJrZWRTcGFucyA/IGxpbmUubWFya2VkU3BhbnMuY29uY2F0KFtzcGFuXSkgOiBbc3Bhbl07XG4gICAgICBpZiAoaW5UaGlzT3ApIHsgaW5UaGlzT3AuYWRkKGxpbmUubWFya2VkU3BhbnMpOyB9XG4gICAgfVxuICAgIHNwYW4ubWFya2VyLmF0dGFjaExpbmUobGluZSk7XG4gIH1cblxuICAvLyBVc2VkIGZvciB0aGUgYWxnb3JpdGhtIHRoYXQgYWRqdXN0cyBtYXJrZXJzIGZvciBhIGNoYW5nZSBpbiB0aGVcbiAgLy8gZG9jdW1lbnQuIFRoZXNlIGZ1bmN0aW9ucyBjdXQgYW4gYXJyYXkgb2Ygc3BhbnMgYXQgYSBnaXZlblxuICAvLyBjaGFyYWN0ZXIgcG9zaXRpb24sIHJldHVybmluZyBhbiBhcnJheSBvZiByZW1haW5pbmcgY2h1bmtzIChvclxuICAvLyB1bmRlZmluZWQgaWYgbm90aGluZyByZW1haW5zKS5cbiAgZnVuY3Rpb24gbWFya2VkU3BhbnNCZWZvcmUob2xkLCBzdGFydENoLCBpc0luc2VydCkge1xuICAgIHZhciBudztcbiAgICBpZiAob2xkKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgb2xkLmxlbmd0aDsgKytpKSB7XG4gICAgICB2YXIgc3BhbiA9IG9sZFtpXSwgbWFya2VyID0gc3Bhbi5tYXJrZXI7XG4gICAgICB2YXIgc3RhcnRzQmVmb3JlID0gc3Bhbi5mcm9tID09IG51bGwgfHwgKG1hcmtlci5pbmNsdXNpdmVMZWZ0ID8gc3Bhbi5mcm9tIDw9IHN0YXJ0Q2ggOiBzcGFuLmZyb20gPCBzdGFydENoKTtcbiAgICAgIGlmIChzdGFydHNCZWZvcmUgfHwgc3Bhbi5mcm9tID09IHN0YXJ0Q2ggJiYgbWFya2VyLnR5cGUgPT0gXCJib29rbWFya1wiICYmICghaXNJbnNlcnQgfHwgIXNwYW4ubWFya2VyLmluc2VydExlZnQpKSB7XG4gICAgICAgIHZhciBlbmRzQWZ0ZXIgPSBzcGFuLnRvID09IG51bGwgfHwgKG1hcmtlci5pbmNsdXNpdmVSaWdodCA/IHNwYW4udG8gPj0gc3RhcnRDaCA6IHNwYW4udG8gPiBzdGFydENoKVxuICAgICAgICA7KG53IHx8IChudyA9IFtdKSkucHVzaChuZXcgTWFya2VkU3BhbihtYXJrZXIsIHNwYW4uZnJvbSwgZW5kc0FmdGVyID8gbnVsbCA6IHNwYW4udG8pKTtcbiAgICAgIH1cbiAgICB9IH1cbiAgICByZXR1cm4gbndcbiAgfVxuICBmdW5jdGlvbiBtYXJrZWRTcGFuc0FmdGVyKG9sZCwgZW5kQ2gsIGlzSW5zZXJ0KSB7XG4gICAgdmFyIG53O1xuICAgIGlmIChvbGQpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBvbGQubGVuZ3RoOyArK2kpIHtcbiAgICAgIHZhciBzcGFuID0gb2xkW2ldLCBtYXJrZXIgPSBzcGFuLm1hcmtlcjtcbiAgICAgIHZhciBlbmRzQWZ0ZXIgPSBzcGFuLnRvID09IG51bGwgfHwgKG1hcmtlci5pbmNsdXNpdmVSaWdodCA/IHNwYW4udG8gPj0gZW5kQ2ggOiBzcGFuLnRvID4gZW5kQ2gpO1xuICAgICAgaWYgKGVuZHNBZnRlciB8fCBzcGFuLmZyb20gPT0gZW5kQ2ggJiYgbWFya2VyLnR5cGUgPT0gXCJib29rbWFya1wiICYmICghaXNJbnNlcnQgfHwgc3Bhbi5tYXJrZXIuaW5zZXJ0TGVmdCkpIHtcbiAgICAgICAgdmFyIHN0YXJ0c0JlZm9yZSA9IHNwYW4uZnJvbSA9PSBudWxsIHx8IChtYXJrZXIuaW5jbHVzaXZlTGVmdCA/IHNwYW4uZnJvbSA8PSBlbmRDaCA6IHNwYW4uZnJvbSA8IGVuZENoKVxuICAgICAgICA7KG53IHx8IChudyA9IFtdKSkucHVzaChuZXcgTWFya2VkU3BhbihtYXJrZXIsIHN0YXJ0c0JlZm9yZSA/IG51bGwgOiBzcGFuLmZyb20gLSBlbmRDaCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGFuLnRvID09IG51bGwgPyBudWxsIDogc3Bhbi50byAtIGVuZENoKSk7XG4gICAgICB9XG4gICAgfSB9XG4gICAgcmV0dXJuIG53XG4gIH1cblxuICAvLyBHaXZlbiBhIGNoYW5nZSBvYmplY3QsIGNvbXB1dGUgdGhlIG5ldyBzZXQgb2YgbWFya2VyIHNwYW5zIHRoYXRcbiAgLy8gY292ZXIgdGhlIGxpbmUgaW4gd2hpY2ggdGhlIGNoYW5nZSB0b29rIHBsYWNlLiBSZW1vdmVzIHNwYW5zXG4gIC8vIGVudGlyZWx5IHdpdGhpbiB0aGUgY2hhbmdlLCByZWNvbm5lY3RzIHNwYW5zIGJlbG9uZ2luZyB0byB0aGVcbiAgLy8gc2FtZSBtYXJrZXIgdGhhdCBhcHBlYXIgb24gYm90aCBzaWRlcyBvZiB0aGUgY2hhbmdlLCBhbmQgY3V0cyBvZmZcbiAgLy8gc3BhbnMgcGFydGlhbGx5IHdpdGhpbiB0aGUgY2hhbmdlLiBSZXR1cm5zIGFuIGFycmF5IG9mIHNwYW5cbiAgLy8gYXJyYXlzIHdpdGggb25lIGVsZW1lbnQgZm9yIGVhY2ggbGluZSBpbiAoYWZ0ZXIpIHRoZSBjaGFuZ2UuXG4gIGZ1bmN0aW9uIHN0cmV0Y2hTcGFuc092ZXJDaGFuZ2UoZG9jLCBjaGFuZ2UpIHtcbiAgICBpZiAoY2hhbmdlLmZ1bGwpIHsgcmV0dXJuIG51bGwgfVxuICAgIHZhciBvbGRGaXJzdCA9IGlzTGluZShkb2MsIGNoYW5nZS5mcm9tLmxpbmUpICYmIGdldExpbmUoZG9jLCBjaGFuZ2UuZnJvbS5saW5lKS5tYXJrZWRTcGFucztcbiAgICB2YXIgb2xkTGFzdCA9IGlzTGluZShkb2MsIGNoYW5nZS50by5saW5lKSAmJiBnZXRMaW5lKGRvYywgY2hhbmdlLnRvLmxpbmUpLm1hcmtlZFNwYW5zO1xuICAgIGlmICghb2xkRmlyc3QgJiYgIW9sZExhc3QpIHsgcmV0dXJuIG51bGwgfVxuXG4gICAgdmFyIHN0YXJ0Q2ggPSBjaGFuZ2UuZnJvbS5jaCwgZW5kQ2ggPSBjaGFuZ2UudG8uY2gsIGlzSW5zZXJ0ID0gY21wKGNoYW5nZS5mcm9tLCBjaGFuZ2UudG8pID09IDA7XG4gICAgLy8gR2V0IHRoZSBzcGFucyB0aGF0ICdzdGljayBvdXQnIG9uIGJvdGggc2lkZXNcbiAgICB2YXIgZmlyc3QgPSBtYXJrZWRTcGFuc0JlZm9yZShvbGRGaXJzdCwgc3RhcnRDaCwgaXNJbnNlcnQpO1xuICAgIHZhciBsYXN0ID0gbWFya2VkU3BhbnNBZnRlcihvbGRMYXN0LCBlbmRDaCwgaXNJbnNlcnQpO1xuXG4gICAgLy8gTmV4dCwgbWVyZ2UgdGhvc2UgdHdvIGVuZHNcbiAgICB2YXIgc2FtZUxpbmUgPSBjaGFuZ2UudGV4dC5sZW5ndGggPT0gMSwgb2Zmc2V0ID0gbHN0KGNoYW5nZS50ZXh0KS5sZW5ndGggKyAoc2FtZUxpbmUgPyBzdGFydENoIDogMCk7XG4gICAgaWYgKGZpcnN0KSB7XG4gICAgICAvLyBGaXggdXAgLnRvIHByb3BlcnRpZXMgb2YgZmlyc3RcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZmlyc3QubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgdmFyIHNwYW4gPSBmaXJzdFtpXTtcbiAgICAgICAgaWYgKHNwYW4udG8gPT0gbnVsbCkge1xuICAgICAgICAgIHZhciBmb3VuZCA9IGdldE1hcmtlZFNwYW5Gb3IobGFzdCwgc3Bhbi5tYXJrZXIpO1xuICAgICAgICAgIGlmICghZm91bmQpIHsgc3Bhbi50byA9IHN0YXJ0Q2g7IH1cbiAgICAgICAgICBlbHNlIGlmIChzYW1lTGluZSkgeyBzcGFuLnRvID0gZm91bmQudG8gPT0gbnVsbCA/IG51bGwgOiBmb3VuZC50byArIG9mZnNldDsgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChsYXN0KSB7XG4gICAgICAvLyBGaXggdXAgLmZyb20gaW4gbGFzdCAob3IgbW92ZSB0aGVtIGludG8gZmlyc3QgaW4gY2FzZSBvZiBzYW1lTGluZSlcbiAgICAgIGZvciAodmFyIGkkMSA9IDA7IGkkMSA8IGxhc3QubGVuZ3RoOyArK2kkMSkge1xuICAgICAgICB2YXIgc3BhbiQxID0gbGFzdFtpJDFdO1xuICAgICAgICBpZiAoc3BhbiQxLnRvICE9IG51bGwpIHsgc3BhbiQxLnRvICs9IG9mZnNldDsgfVxuICAgICAgICBpZiAoc3BhbiQxLmZyb20gPT0gbnVsbCkge1xuICAgICAgICAgIHZhciBmb3VuZCQxID0gZ2V0TWFya2VkU3BhbkZvcihmaXJzdCwgc3BhbiQxLm1hcmtlcik7XG4gICAgICAgICAgaWYgKCFmb3VuZCQxKSB7XG4gICAgICAgICAgICBzcGFuJDEuZnJvbSA9IG9mZnNldDtcbiAgICAgICAgICAgIGlmIChzYW1lTGluZSkgeyAoZmlyc3QgfHwgKGZpcnN0ID0gW10pKS5wdXNoKHNwYW4kMSk7IH1cbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3BhbiQxLmZyb20gKz0gb2Zmc2V0O1xuICAgICAgICAgIGlmIChzYW1lTGluZSkgeyAoZmlyc3QgfHwgKGZpcnN0ID0gW10pKS5wdXNoKHNwYW4kMSk7IH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICAvLyBNYWtlIHN1cmUgd2UgZGlkbid0IGNyZWF0ZSBhbnkgemVyby1sZW5ndGggc3BhbnNcbiAgICBpZiAoZmlyc3QpIHsgZmlyc3QgPSBjbGVhckVtcHR5U3BhbnMoZmlyc3QpOyB9XG4gICAgaWYgKGxhc3QgJiYgbGFzdCAhPSBmaXJzdCkgeyBsYXN0ID0gY2xlYXJFbXB0eVNwYW5zKGxhc3QpOyB9XG5cbiAgICB2YXIgbmV3TWFya2VycyA9IFtmaXJzdF07XG4gICAgaWYgKCFzYW1lTGluZSkge1xuICAgICAgLy8gRmlsbCBnYXAgd2l0aCB3aG9sZS1saW5lLXNwYW5zXG4gICAgICB2YXIgZ2FwID0gY2hhbmdlLnRleHQubGVuZ3RoIC0gMiwgZ2FwTWFya2VycztcbiAgICAgIGlmIChnYXAgPiAwICYmIGZpcnN0KVxuICAgICAgICB7IGZvciAodmFyIGkkMiA9IDA7IGkkMiA8IGZpcnN0Lmxlbmd0aDsgKytpJDIpXG4gICAgICAgICAgeyBpZiAoZmlyc3RbaSQyXS50byA9PSBudWxsKVxuICAgICAgICAgICAgeyAoZ2FwTWFya2VycyB8fCAoZ2FwTWFya2VycyA9IFtdKSkucHVzaChuZXcgTWFya2VkU3BhbihmaXJzdFtpJDJdLm1hcmtlciwgbnVsbCwgbnVsbCkpOyB9IH0gfVxuICAgICAgZm9yICh2YXIgaSQzID0gMDsgaSQzIDwgZ2FwOyArK2kkMylcbiAgICAgICAgeyBuZXdNYXJrZXJzLnB1c2goZ2FwTWFya2Vycyk7IH1cbiAgICAgIG5ld01hcmtlcnMucHVzaChsYXN0KTtcbiAgICB9XG4gICAgcmV0dXJuIG5ld01hcmtlcnNcbiAgfVxuXG4gIC8vIFJlbW92ZSBzcGFucyB0aGF0IGFyZSBlbXB0eSBhbmQgZG9uJ3QgaGF2ZSBhIGNsZWFyV2hlbkVtcHR5XG4gIC8vIG9wdGlvbiBvZiBmYWxzZS5cbiAgZnVuY3Rpb24gY2xlYXJFbXB0eVNwYW5zKHNwYW5zKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzcGFucy5sZW5ndGg7ICsraSkge1xuICAgICAgdmFyIHNwYW4gPSBzcGFuc1tpXTtcbiAgICAgIGlmIChzcGFuLmZyb20gIT0gbnVsbCAmJiBzcGFuLmZyb20gPT0gc3Bhbi50byAmJiBzcGFuLm1hcmtlci5jbGVhcldoZW5FbXB0eSAhPT0gZmFsc2UpXG4gICAgICAgIHsgc3BhbnMuc3BsaWNlKGktLSwgMSk7IH1cbiAgICB9XG4gICAgaWYgKCFzcGFucy5sZW5ndGgpIHsgcmV0dXJuIG51bGwgfVxuICAgIHJldHVybiBzcGFuc1xuICB9XG5cbiAgLy8gVXNlZCB0byAnY2xpcCcgb3V0IHJlYWRPbmx5IHJhbmdlcyB3aGVuIG1ha2luZyBhIGNoYW5nZS5cbiAgZnVuY3Rpb24gcmVtb3ZlUmVhZE9ubHlSYW5nZXMoZG9jLCBmcm9tLCB0bykge1xuICAgIHZhciBtYXJrZXJzID0gbnVsbDtcbiAgICBkb2MuaXRlcihmcm9tLmxpbmUsIHRvLmxpbmUgKyAxLCBmdW5jdGlvbiAobGluZSkge1xuICAgICAgaWYgKGxpbmUubWFya2VkU3BhbnMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBsaW5lLm1hcmtlZFNwYW5zLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIHZhciBtYXJrID0gbGluZS5tYXJrZWRTcGFuc1tpXS5tYXJrZXI7XG4gICAgICAgIGlmIChtYXJrLnJlYWRPbmx5ICYmICghbWFya2VycyB8fCBpbmRleE9mKG1hcmtlcnMsIG1hcmspID09IC0xKSlcbiAgICAgICAgICB7IChtYXJrZXJzIHx8IChtYXJrZXJzID0gW10pKS5wdXNoKG1hcmspOyB9XG4gICAgICB9IH1cbiAgICB9KTtcbiAgICBpZiAoIW1hcmtlcnMpIHsgcmV0dXJuIG51bGwgfVxuICAgIHZhciBwYXJ0cyA9IFt7ZnJvbTogZnJvbSwgdG86IHRvfV07XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXJrZXJzLmxlbmd0aDsgKytpKSB7XG4gICAgICB2YXIgbWsgPSBtYXJrZXJzW2ldLCBtID0gbWsuZmluZCgwKTtcbiAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgcGFydHMubGVuZ3RoOyArK2opIHtcbiAgICAgICAgdmFyIHAgPSBwYXJ0c1tqXTtcbiAgICAgICAgaWYgKGNtcChwLnRvLCBtLmZyb20pIDwgMCB8fCBjbXAocC5mcm9tLCBtLnRvKSA+IDApIHsgY29udGludWUgfVxuICAgICAgICB2YXIgbmV3UGFydHMgPSBbaiwgMV0sIGRmcm9tID0gY21wKHAuZnJvbSwgbS5mcm9tKSwgZHRvID0gY21wKHAudG8sIG0udG8pO1xuICAgICAgICBpZiAoZGZyb20gPCAwIHx8ICFtay5pbmNsdXNpdmVMZWZ0ICYmICFkZnJvbSlcbiAgICAgICAgICB7IG5ld1BhcnRzLnB1c2goe2Zyb206IHAuZnJvbSwgdG86IG0uZnJvbX0pOyB9XG4gICAgICAgIGlmIChkdG8gPiAwIHx8ICFtay5pbmNsdXNpdmVSaWdodCAmJiAhZHRvKVxuICAgICAgICAgIHsgbmV3UGFydHMucHVzaCh7ZnJvbTogbS50bywgdG86IHAudG99KTsgfVxuICAgICAgICBwYXJ0cy5zcGxpY2UuYXBwbHkocGFydHMsIG5ld1BhcnRzKTtcbiAgICAgICAgaiArPSBuZXdQYXJ0cy5sZW5ndGggLSAzO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcGFydHNcbiAgfVxuXG4gIC8vIENvbm5lY3Qgb3IgZGlzY29ubmVjdCBzcGFucyBmcm9tIGEgbGluZS5cbiAgZnVuY3Rpb24gZGV0YWNoTWFya2VkU3BhbnMobGluZSkge1xuICAgIHZhciBzcGFucyA9IGxpbmUubWFya2VkU3BhbnM7XG4gICAgaWYgKCFzcGFucykgeyByZXR1cm4gfVxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3BhbnMubGVuZ3RoOyArK2kpXG4gICAgICB7IHNwYW5zW2ldLm1hcmtlci5kZXRhY2hMaW5lKGxpbmUpOyB9XG4gICAgbGluZS5tYXJrZWRTcGFucyA9IG51bGw7XG4gIH1cbiAgZnVuY3Rpb24gYXR0YWNoTWFya2VkU3BhbnMobGluZSwgc3BhbnMpIHtcbiAgICBpZiAoIXNwYW5zKSB7IHJldHVybiB9XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzcGFucy5sZW5ndGg7ICsraSlcbiAgICAgIHsgc3BhbnNbaV0ubWFya2VyLmF0dGFjaExpbmUobGluZSk7IH1cbiAgICBsaW5lLm1hcmtlZFNwYW5zID0gc3BhbnM7XG4gIH1cblxuICAvLyBIZWxwZXJzIHVzZWQgd2hlbiBjb21wdXRpbmcgd2hpY2ggb3ZlcmxhcHBpbmcgY29sbGFwc2VkIHNwYW5cbiAgLy8gY291bnRzIGFzIHRoZSBsYXJnZXIgb25lLlxuICBmdW5jdGlvbiBleHRyYUxlZnQobWFya2VyKSB7IHJldHVybiBtYXJrZXIuaW5jbHVzaXZlTGVmdCA/IC0xIDogMCB9XG4gIGZ1bmN0aW9uIGV4dHJhUmlnaHQobWFya2VyKSB7IHJldHVybiBtYXJrZXIuaW5jbHVzaXZlUmlnaHQgPyAxIDogMCB9XG5cbiAgLy8gUmV0dXJucyBhIG51bWJlciBpbmRpY2F0aW5nIHdoaWNoIG9mIHR3byBvdmVybGFwcGluZyBjb2xsYXBzZWRcbiAgLy8gc3BhbnMgaXMgbGFyZ2VyIChhbmQgdGh1cyBpbmNsdWRlcyB0aGUgb3RoZXIpLiBGYWxscyBiYWNrIHRvXG4gIC8vIGNvbXBhcmluZyBpZHMgd2hlbiB0aGUgc3BhbnMgY292ZXIgZXhhY3RseSB0aGUgc2FtZSByYW5nZS5cbiAgZnVuY3Rpb24gY29tcGFyZUNvbGxhcHNlZE1hcmtlcnMoYSwgYikge1xuICAgIHZhciBsZW5EaWZmID0gYS5saW5lcy5sZW5ndGggLSBiLmxpbmVzLmxlbmd0aDtcbiAgICBpZiAobGVuRGlmZiAhPSAwKSB7IHJldHVybiBsZW5EaWZmIH1cbiAgICB2YXIgYVBvcyA9IGEuZmluZCgpLCBiUG9zID0gYi5maW5kKCk7XG4gICAgdmFyIGZyb21DbXAgPSBjbXAoYVBvcy5mcm9tLCBiUG9zLmZyb20pIHx8IGV4dHJhTGVmdChhKSAtIGV4dHJhTGVmdChiKTtcbiAgICBpZiAoZnJvbUNtcCkgeyByZXR1cm4gLWZyb21DbXAgfVxuICAgIHZhciB0b0NtcCA9IGNtcChhUG9zLnRvLCBiUG9zLnRvKSB8fCBleHRyYVJpZ2h0KGEpIC0gZXh0cmFSaWdodChiKTtcbiAgICBpZiAodG9DbXApIHsgcmV0dXJuIHRvQ21wIH1cbiAgICByZXR1cm4gYi5pZCAtIGEuaWRcbiAgfVxuXG4gIC8vIEZpbmQgb3V0IHdoZXRoZXIgYSBsaW5lIGVuZHMgb3Igc3RhcnRzIGluIGEgY29sbGFwc2VkIHNwYW4uIElmXG4gIC8vIHNvLCByZXR1cm4gdGhlIG1hcmtlciBmb3IgdGhhdCBzcGFuLlxuICBmdW5jdGlvbiBjb2xsYXBzZWRTcGFuQXRTaWRlKGxpbmUsIHN0YXJ0KSB7XG4gICAgdmFyIHNwcyA9IHNhd0NvbGxhcHNlZFNwYW5zICYmIGxpbmUubWFya2VkU3BhbnMsIGZvdW5kO1xuICAgIGlmIChzcHMpIHsgZm9yICh2YXIgc3AgPSAodm9pZCAwKSwgaSA9IDA7IGkgPCBzcHMubGVuZ3RoOyArK2kpIHtcbiAgICAgIHNwID0gc3BzW2ldO1xuICAgICAgaWYgKHNwLm1hcmtlci5jb2xsYXBzZWQgJiYgKHN0YXJ0ID8gc3AuZnJvbSA6IHNwLnRvKSA9PSBudWxsICYmXG4gICAgICAgICAgKCFmb3VuZCB8fCBjb21wYXJlQ29sbGFwc2VkTWFya2Vycyhmb3VuZCwgc3AubWFya2VyKSA8IDApKVxuICAgICAgICB7IGZvdW5kID0gc3AubWFya2VyOyB9XG4gICAgfSB9XG4gICAgcmV0dXJuIGZvdW5kXG4gIH1cbiAgZnVuY3Rpb24gY29sbGFwc2VkU3BhbkF0U3RhcnQobGluZSkgeyByZXR1cm4gY29sbGFwc2VkU3BhbkF0U2lkZShsaW5lLCB0cnVlKSB9XG4gIGZ1bmN0aW9uIGNvbGxhcHNlZFNwYW5BdEVuZChsaW5lKSB7IHJldHVybiBjb2xsYXBzZWRTcGFuQXRTaWRlKGxpbmUsIGZhbHNlKSB9XG5cbiAgZnVuY3Rpb24gY29sbGFwc2VkU3BhbkFyb3VuZChsaW5lLCBjaCkge1xuICAgIHZhciBzcHMgPSBzYXdDb2xsYXBzZWRTcGFucyAmJiBsaW5lLm1hcmtlZFNwYW5zLCBmb3VuZDtcbiAgICBpZiAoc3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgc3BzLmxlbmd0aDsgKytpKSB7XG4gICAgICB2YXIgc3AgPSBzcHNbaV07XG4gICAgICBpZiAoc3AubWFya2VyLmNvbGxhcHNlZCAmJiAoc3AuZnJvbSA9PSBudWxsIHx8IHNwLmZyb20gPCBjaCkgJiYgKHNwLnRvID09IG51bGwgfHwgc3AudG8gPiBjaCkgJiZcbiAgICAgICAgICAoIWZvdW5kIHx8IGNvbXBhcmVDb2xsYXBzZWRNYXJrZXJzKGZvdW5kLCBzcC5tYXJrZXIpIDwgMCkpIHsgZm91bmQgPSBzcC5tYXJrZXI7IH1cbiAgICB9IH1cbiAgICByZXR1cm4gZm91bmRcbiAgfVxuXG4gIC8vIFRlc3Qgd2hldGhlciB0aGVyZSBleGlzdHMgYSBjb2xsYXBzZWQgc3BhbiB0aGF0IHBhcnRpYWxseVxuICAvLyBvdmVybGFwcyAoY292ZXJzIHRoZSBzdGFydCBvciBlbmQsIGJ1dCBub3QgYm90aCkgb2YgYSBuZXcgc3Bhbi5cbiAgLy8gU3VjaCBvdmVybGFwIGlzIG5vdCBhbGxvd2VkLlxuICBmdW5jdGlvbiBjb25mbGljdGluZ0NvbGxhcHNlZFJhbmdlKGRvYywgbGluZU5vLCBmcm9tLCB0bywgbWFya2VyKSB7XG4gICAgdmFyIGxpbmUgPSBnZXRMaW5lKGRvYywgbGluZU5vKTtcbiAgICB2YXIgc3BzID0gc2F3Q29sbGFwc2VkU3BhbnMgJiYgbGluZS5tYXJrZWRTcGFucztcbiAgICBpZiAoc3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgc3BzLmxlbmd0aDsgKytpKSB7XG4gICAgICB2YXIgc3AgPSBzcHNbaV07XG4gICAgICBpZiAoIXNwLm1hcmtlci5jb2xsYXBzZWQpIHsgY29udGludWUgfVxuICAgICAgdmFyIGZvdW5kID0gc3AubWFya2VyLmZpbmQoMCk7XG4gICAgICB2YXIgZnJvbUNtcCA9IGNtcChmb3VuZC5mcm9tLCBmcm9tKSB8fCBleHRyYUxlZnQoc3AubWFya2VyKSAtIGV4dHJhTGVmdChtYXJrZXIpO1xuICAgICAgdmFyIHRvQ21wID0gY21wKGZvdW5kLnRvLCB0bykgfHwgZXh0cmFSaWdodChzcC5tYXJrZXIpIC0gZXh0cmFSaWdodChtYXJrZXIpO1xuICAgICAgaWYgKGZyb21DbXAgPj0gMCAmJiB0b0NtcCA8PSAwIHx8IGZyb21DbXAgPD0gMCAmJiB0b0NtcCA+PSAwKSB7IGNvbnRpbnVlIH1cbiAgICAgIGlmIChmcm9tQ21wIDw9IDAgJiYgKHNwLm1hcmtlci5pbmNsdXNpdmVSaWdodCAmJiBtYXJrZXIuaW5jbHVzaXZlTGVmdCA/IGNtcChmb3VuZC50bywgZnJvbSkgPj0gMCA6IGNtcChmb3VuZC50bywgZnJvbSkgPiAwKSB8fFxuICAgICAgICAgIGZyb21DbXAgPj0gMCAmJiAoc3AubWFya2VyLmluY2x1c2l2ZVJpZ2h0ICYmIG1hcmtlci5pbmNsdXNpdmVMZWZ0ID8gY21wKGZvdW5kLmZyb20sIHRvKSA8PSAwIDogY21wKGZvdW5kLmZyb20sIHRvKSA8IDApKVxuICAgICAgICB7IHJldHVybiB0cnVlIH1cbiAgICB9IH1cbiAgfVxuXG4gIC8vIEEgdmlzdWFsIGxpbmUgaXMgYSBsaW5lIGFzIGRyYXduIG9uIHRoZSBzY3JlZW4uIEZvbGRpbmcsIGZvclxuICAvLyBleGFtcGxlLCBjYW4gY2F1c2UgbXVsdGlwbGUgbG9naWNhbCBsaW5lcyB0byBhcHBlYXIgb24gdGhlIHNhbWVcbiAgLy8gdmlzdWFsIGxpbmUuIFRoaXMgZmluZHMgdGhlIHN0YXJ0IG9mIHRoZSB2aXN1YWwgbGluZSB0aGF0IHRoZVxuICAvLyBnaXZlbiBsaW5lIGlzIHBhcnQgb2YgKHVzdWFsbHkgdGhhdCBpcyB0aGUgbGluZSBpdHNlbGYpLlxuICBmdW5jdGlvbiB2aXN1YWxMaW5lKGxpbmUpIHtcbiAgICB2YXIgbWVyZ2VkO1xuICAgIHdoaWxlIChtZXJnZWQgPSBjb2xsYXBzZWRTcGFuQXRTdGFydChsaW5lKSlcbiAgICAgIHsgbGluZSA9IG1lcmdlZC5maW5kKC0xLCB0cnVlKS5saW5lOyB9XG4gICAgcmV0dXJuIGxpbmVcbiAgfVxuXG4gIGZ1bmN0aW9uIHZpc3VhbExpbmVFbmQobGluZSkge1xuICAgIHZhciBtZXJnZWQ7XG4gICAgd2hpbGUgKG1lcmdlZCA9IGNvbGxhcHNlZFNwYW5BdEVuZChsaW5lKSlcbiAgICAgIHsgbGluZSA9IG1lcmdlZC5maW5kKDEsIHRydWUpLmxpbmU7IH1cbiAgICByZXR1cm4gbGluZVxuICB9XG5cbiAgLy8gUmV0dXJucyBhbiBhcnJheSBvZiBsb2dpY2FsIGxpbmVzIHRoYXQgY29udGludWUgdGhlIHZpc3VhbCBsaW5lXG4gIC8vIHN0YXJ0ZWQgYnkgdGhlIGFyZ3VtZW50LCBvciB1bmRlZmluZWQgaWYgdGhlcmUgYXJlIG5vIHN1Y2ggbGluZXMuXG4gIGZ1bmN0aW9uIHZpc3VhbExpbmVDb250aW51ZWQobGluZSkge1xuICAgIHZhciBtZXJnZWQsIGxpbmVzO1xuICAgIHdoaWxlIChtZXJnZWQgPSBjb2xsYXBzZWRTcGFuQXRFbmQobGluZSkpIHtcbiAgICAgIGxpbmUgPSBtZXJnZWQuZmluZCgxLCB0cnVlKS5saW5lXG4gICAgICA7KGxpbmVzIHx8IChsaW5lcyA9IFtdKSkucHVzaChsaW5lKTtcbiAgICB9XG4gICAgcmV0dXJuIGxpbmVzXG4gIH1cblxuICAvLyBHZXQgdGhlIGxpbmUgbnVtYmVyIG9mIHRoZSBzdGFydCBvZiB0aGUgdmlzdWFsIGxpbmUgdGhhdCB0aGVcbiAgLy8gZ2l2ZW4gbGluZSBudW1iZXIgaXMgcGFydCBvZi5cbiAgZnVuY3Rpb24gdmlzdWFsTGluZU5vKGRvYywgbGluZU4pIHtcbiAgICB2YXIgbGluZSA9IGdldExpbmUoZG9jLCBsaW5lTiksIHZpcyA9IHZpc3VhbExpbmUobGluZSk7XG4gICAgaWYgKGxpbmUgPT0gdmlzKSB7IHJldHVybiBsaW5lTiB9XG4gICAgcmV0dXJuIGxpbmVObyh2aXMpXG4gIH1cblxuICAvLyBHZXQgdGhlIGxpbmUgbnVtYmVyIG9mIHRoZSBzdGFydCBvZiB0aGUgbmV4dCB2aXN1YWwgbGluZSBhZnRlclxuICAvLyB0aGUgZ2l2ZW4gbGluZS5cbiAgZnVuY3Rpb24gdmlzdWFsTGluZUVuZE5vKGRvYywgbGluZU4pIHtcbiAgICBpZiAobGluZU4gPiBkb2MubGFzdExpbmUoKSkgeyByZXR1cm4gbGluZU4gfVxuICAgIHZhciBsaW5lID0gZ2V0TGluZShkb2MsIGxpbmVOKSwgbWVyZ2VkO1xuICAgIGlmICghbGluZUlzSGlkZGVuKGRvYywgbGluZSkpIHsgcmV0dXJuIGxpbmVOIH1cbiAgICB3aGlsZSAobWVyZ2VkID0gY29sbGFwc2VkU3BhbkF0RW5kKGxpbmUpKVxuICAgICAgeyBsaW5lID0gbWVyZ2VkLmZpbmQoMSwgdHJ1ZSkubGluZTsgfVxuICAgIHJldHVybiBsaW5lTm8obGluZSkgKyAxXG4gIH1cblxuICAvLyBDb21wdXRlIHdoZXRoZXIgYSBsaW5lIGlzIGhpZGRlbi4gTGluZXMgY291bnQgYXMgaGlkZGVuIHdoZW4gdGhleVxuICAvLyBhcmUgcGFydCBvZiBhIHZpc3VhbCBsaW5lIHRoYXQgc3RhcnRzIHdpdGggYW5vdGhlciBsaW5lLCBvciB3aGVuXG4gIC8vIHRoZXkgYXJlIGVudGlyZWx5IGNvdmVyZWQgYnkgY29sbGFwc2VkLCBub24td2lkZ2V0IHNwYW4uXG4gIGZ1bmN0aW9uIGxpbmVJc0hpZGRlbihkb2MsIGxpbmUpIHtcbiAgICB2YXIgc3BzID0gc2F3Q29sbGFwc2VkU3BhbnMgJiYgbGluZS5tYXJrZWRTcGFucztcbiAgICBpZiAoc3BzKSB7IGZvciAodmFyIHNwID0gKHZvaWQgMCksIGkgPSAwOyBpIDwgc3BzLmxlbmd0aDsgKytpKSB7XG4gICAgICBzcCA9IHNwc1tpXTtcbiAgICAgIGlmICghc3AubWFya2VyLmNvbGxhcHNlZCkgeyBjb250aW51ZSB9XG4gICAgICBpZiAoc3AuZnJvbSA9PSBudWxsKSB7IHJldHVybiB0cnVlIH1cbiAgICAgIGlmIChzcC5tYXJrZXIud2lkZ2V0Tm9kZSkgeyBjb250aW51ZSB9XG4gICAgICBpZiAoc3AuZnJvbSA9PSAwICYmIHNwLm1hcmtlci5pbmNsdXNpdmVMZWZ0ICYmIGxpbmVJc0hpZGRlbklubmVyKGRvYywgbGluZSwgc3ApKVxuICAgICAgICB7IHJldHVybiB0cnVlIH1cbiAgICB9IH1cbiAgfVxuICBmdW5jdGlvbiBsaW5lSXNIaWRkZW5Jbm5lcihkb2MsIGxpbmUsIHNwYW4pIHtcbiAgICBpZiAoc3Bhbi50byA9PSBudWxsKSB7XG4gICAgICB2YXIgZW5kID0gc3Bhbi5tYXJrZXIuZmluZCgxLCB0cnVlKTtcbiAgICAgIHJldHVybiBsaW5lSXNIaWRkZW5Jbm5lcihkb2MsIGVuZC5saW5lLCBnZXRNYXJrZWRTcGFuRm9yKGVuZC5saW5lLm1hcmtlZFNwYW5zLCBzcGFuLm1hcmtlcikpXG4gICAgfVxuICAgIGlmIChzcGFuLm1hcmtlci5pbmNsdXNpdmVSaWdodCAmJiBzcGFuLnRvID09IGxpbmUudGV4dC5sZW5ndGgpXG4gICAgICB7IHJldHVybiB0cnVlIH1cbiAgICBmb3IgKHZhciBzcCA9ICh2b2lkIDApLCBpID0gMDsgaSA8IGxpbmUubWFya2VkU3BhbnMubGVuZ3RoOyArK2kpIHtcbiAgICAgIHNwID0gbGluZS5tYXJrZWRTcGFuc1tpXTtcbiAgICAgIGlmIChzcC5tYXJrZXIuY29sbGFwc2VkICYmICFzcC5tYXJrZXIud2lkZ2V0Tm9kZSAmJiBzcC5mcm9tID09IHNwYW4udG8gJiZcbiAgICAgICAgICAoc3AudG8gPT0gbnVsbCB8fCBzcC50byAhPSBzcGFuLmZyb20pICYmXG4gICAgICAgICAgKHNwLm1hcmtlci5pbmNsdXNpdmVMZWZ0IHx8IHNwYW4ubWFya2VyLmluY2x1c2l2ZVJpZ2h0KSAmJlxuICAgICAgICAgIGxpbmVJc0hpZGRlbklubmVyKGRvYywgbGluZSwgc3ApKSB7IHJldHVybiB0cnVlIH1cbiAgICB9XG4gIH1cblxuICAvLyBGaW5kIHRoZSBoZWlnaHQgYWJvdmUgdGhlIGdpdmVuIGxpbmUuXG4gIGZ1bmN0aW9uIGhlaWdodEF0TGluZShsaW5lT2JqKSB7XG4gICAgbGluZU9iaiA9IHZpc3VhbExpbmUobGluZU9iaik7XG5cbiAgICB2YXIgaCA9IDAsIGNodW5rID0gbGluZU9iai5wYXJlbnQ7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaHVuay5saW5lcy5sZW5ndGg7ICsraSkge1xuICAgICAgdmFyIGxpbmUgPSBjaHVuay5saW5lc1tpXTtcbiAgICAgIGlmIChsaW5lID09IGxpbmVPYmopIHsgYnJlYWsgfVxuICAgICAgZWxzZSB7IGggKz0gbGluZS5oZWlnaHQ7IH1cbiAgICB9XG4gICAgZm9yICh2YXIgcCA9IGNodW5rLnBhcmVudDsgcDsgY2h1bmsgPSBwLCBwID0gY2h1bmsucGFyZW50KSB7XG4gICAgICBmb3IgKHZhciBpJDEgPSAwOyBpJDEgPCBwLmNoaWxkcmVuLmxlbmd0aDsgKytpJDEpIHtcbiAgICAgICAgdmFyIGN1ciA9IHAuY2hpbGRyZW5baSQxXTtcbiAgICAgICAgaWYgKGN1ciA9PSBjaHVuaykgeyBicmVhayB9XG4gICAgICAgIGVsc2UgeyBoICs9IGN1ci5oZWlnaHQ7IH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGhcbiAgfVxuXG4gIC8vIENvbXB1dGUgdGhlIGNoYXJhY3RlciBsZW5ndGggb2YgYSBsaW5lLCB0YWtpbmcgaW50byBhY2NvdW50XG4gIC8vIGNvbGxhcHNlZCByYW5nZXMgKHNlZSBtYXJrVGV4dCkgdGhhdCBtaWdodCBoaWRlIHBhcnRzLCBhbmQgam9pblxuICAvLyBvdGhlciBsaW5lcyBvbnRvIGl0LlxuICBmdW5jdGlvbiBsaW5lTGVuZ3RoKGxpbmUpIHtcbiAgICBpZiAobGluZS5oZWlnaHQgPT0gMCkgeyByZXR1cm4gMCB9XG4gICAgdmFyIGxlbiA9IGxpbmUudGV4dC5sZW5ndGgsIG1lcmdlZCwgY3VyID0gbGluZTtcbiAgICB3aGlsZSAobWVyZ2VkID0gY29sbGFwc2VkU3BhbkF0U3RhcnQoY3VyKSkge1xuICAgICAgdmFyIGZvdW5kID0gbWVyZ2VkLmZpbmQoMCwgdHJ1ZSk7XG4gICAgICBjdXIgPSBmb3VuZC5mcm9tLmxpbmU7XG4gICAgICBsZW4gKz0gZm91bmQuZnJvbS5jaCAtIGZvdW5kLnRvLmNoO1xuICAgIH1cbiAgICBjdXIgPSBsaW5lO1xuICAgIHdoaWxlIChtZXJnZWQgPSBjb2xsYXBzZWRTcGFuQXRFbmQoY3VyKSkge1xuICAgICAgdmFyIGZvdW5kJDEgPSBtZXJnZWQuZmluZCgwLCB0cnVlKTtcbiAgICAgIGxlbiAtPSBjdXIudGV4dC5sZW5ndGggLSBmb3VuZCQxLmZyb20uY2g7XG4gICAgICBjdXIgPSBmb3VuZCQxLnRvLmxpbmU7XG4gICAgICBsZW4gKz0gY3VyLnRleHQubGVuZ3RoIC0gZm91bmQkMS50by5jaDtcbiAgICB9XG4gICAgcmV0dXJuIGxlblxuICB9XG5cbiAgLy8gRmluZCB0aGUgbG9uZ2VzdCBsaW5lIGluIHRoZSBkb2N1bWVudC5cbiAgZnVuY3Rpb24gZmluZE1heExpbmUoY20pIHtcbiAgICB2YXIgZCA9IGNtLmRpc3BsYXksIGRvYyA9IGNtLmRvYztcbiAgICBkLm1heExpbmUgPSBnZXRMaW5lKGRvYywgZG9jLmZpcnN0KTtcbiAgICBkLm1heExpbmVMZW5ndGggPSBsaW5lTGVuZ3RoKGQubWF4TGluZSk7XG4gICAgZC5tYXhMaW5lQ2hhbmdlZCA9IHRydWU7XG4gICAgZG9jLml0ZXIoZnVuY3Rpb24gKGxpbmUpIHtcbiAgICAgIHZhciBsZW4gPSBsaW5lTGVuZ3RoKGxpbmUpO1xuICAgICAgaWYgKGxlbiA+IGQubWF4TGluZUxlbmd0aCkge1xuICAgICAgICBkLm1heExpbmVMZW5ndGggPSBsZW47XG4gICAgICAgIGQubWF4TGluZSA9IGxpbmU7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvLyBMSU5FIERBVEEgU1RSVUNUVVJFXG5cbiAgLy8gTGluZSBvYmplY3RzLiBUaGVzZSBob2xkIHN0YXRlIHJlbGF0ZWQgdG8gYSBsaW5lLCBpbmNsdWRpbmdcbiAgLy8gaGlnaGxpZ2h0aW5nIGluZm8gKHRoZSBzdHlsZXMgYXJyYXkpLlxuICB2YXIgTGluZSA9IGZ1bmN0aW9uKHRleHQsIG1hcmtlZFNwYW5zLCBlc3RpbWF0ZUhlaWdodCkge1xuICAgIHRoaXMudGV4dCA9IHRleHQ7XG4gICAgYXR0YWNoTWFya2VkU3BhbnModGhpcywgbWFya2VkU3BhbnMpO1xuICAgIHRoaXMuaGVpZ2h0ID0gZXN0aW1hdGVIZWlnaHQgPyBlc3RpbWF0ZUhlaWdodCh0aGlzKSA6IDE7XG4gIH07XG5cbiAgTGluZS5wcm90b3R5cGUubGluZU5vID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gbGluZU5vKHRoaXMpIH07XG4gIGV2ZW50TWl4aW4oTGluZSk7XG5cbiAgLy8gQ2hhbmdlIHRoZSBjb250ZW50ICh0ZXh0LCBtYXJrZXJzKSBvZiBhIGxpbmUuIEF1dG9tYXRpY2FsbHlcbiAgLy8gaW52YWxpZGF0ZXMgY2FjaGVkIGluZm9ybWF0aW9uIGFuZCB0cmllcyB0byByZS1lc3RpbWF0ZSB0aGVcbiAgLy8gbGluZSdzIGhlaWdodC5cbiAgZnVuY3Rpb24gdXBkYXRlTGluZShsaW5lLCB0ZXh0LCBtYXJrZWRTcGFucywgZXN0aW1hdGVIZWlnaHQpIHtcbiAgICBsaW5lLnRleHQgPSB0ZXh0O1xuICAgIGlmIChsaW5lLnN0YXRlQWZ0ZXIpIHsgbGluZS5zdGF0ZUFmdGVyID0gbnVsbDsgfVxuICAgIGlmIChsaW5lLnN0eWxlcykgeyBsaW5lLnN0eWxlcyA9IG51bGw7IH1cbiAgICBpZiAobGluZS5vcmRlciAhPSBudWxsKSB7IGxpbmUub3JkZXIgPSBudWxsOyB9XG4gICAgZGV0YWNoTWFya2VkU3BhbnMobGluZSk7XG4gICAgYXR0YWNoTWFya2VkU3BhbnMobGluZSwgbWFya2VkU3BhbnMpO1xuICAgIHZhciBlc3RIZWlnaHQgPSBlc3RpbWF0ZUhlaWdodCA/IGVzdGltYXRlSGVpZ2h0KGxpbmUpIDogMTtcbiAgICBpZiAoZXN0SGVpZ2h0ICE9IGxpbmUuaGVpZ2h0KSB7IHVwZGF0ZUxpbmVIZWlnaHQobGluZSwgZXN0SGVpZ2h0KTsgfVxuICB9XG5cbiAgLy8gRGV0YWNoIGEgbGluZSBmcm9tIHRoZSBkb2N1bWVudCB0cmVlIGFuZCBpdHMgbWFya2Vycy5cbiAgZnVuY3Rpb24gY2xlYW5VcExpbmUobGluZSkge1xuICAgIGxpbmUucGFyZW50ID0gbnVsbDtcbiAgICBkZXRhY2hNYXJrZWRTcGFucyhsaW5lKTtcbiAgfVxuXG4gIC8vIENvbnZlcnQgYSBzdHlsZSBhcyByZXR1cm5lZCBieSBhIG1vZGUgKGVpdGhlciBudWxsLCBvciBhIHN0cmluZ1xuICAvLyBjb250YWluaW5nIG9uZSBvciBtb3JlIHN0eWxlcykgdG8gYSBDU1Mgc3R5bGUuIFRoaXMgaXMgY2FjaGVkLFxuICAvLyBhbmQgYWxzbyBsb29rcyBmb3IgbGluZS13aWRlIHN0eWxlcy5cbiAgdmFyIHN0eWxlVG9DbGFzc0NhY2hlID0ge30sIHN0eWxlVG9DbGFzc0NhY2hlV2l0aE1vZGUgPSB7fTtcbiAgZnVuY3Rpb24gaW50ZXJwcmV0VG9rZW5TdHlsZShzdHlsZSwgb3B0aW9ucykge1xuICAgIGlmICghc3R5bGUgfHwgL15cXHMqJC8udGVzdChzdHlsZSkpIHsgcmV0dXJuIG51bGwgfVxuICAgIHZhciBjYWNoZSA9IG9wdGlvbnMuYWRkTW9kZUNsYXNzID8gc3R5bGVUb0NsYXNzQ2FjaGVXaXRoTW9kZSA6IHN0eWxlVG9DbGFzc0NhY2hlO1xuICAgIHJldHVybiBjYWNoZVtzdHlsZV0gfHxcbiAgICAgIChjYWNoZVtzdHlsZV0gPSBzdHlsZS5yZXBsYWNlKC9cXFMrL2csIFwiY20tJCZcIikpXG4gIH1cblxuICAvLyBSZW5kZXIgdGhlIERPTSByZXByZXNlbnRhdGlvbiBvZiB0aGUgdGV4dCBvZiBhIGxpbmUuIEFsc28gYnVpbGRzXG4gIC8vIHVwIGEgJ2xpbmUgbWFwJywgd2hpY2ggcG9pbnRzIGF0IHRoZSBET00gbm9kZXMgdGhhdCByZXByZXNlbnRcbiAgLy8gc3BlY2lmaWMgc3RyZXRjaGVzIG9mIHRleHQsIGFuZCBpcyB1c2VkIGJ5IHRoZSBtZWFzdXJpbmcgY29kZS5cbiAgLy8gVGhlIHJldHVybmVkIG9iamVjdCBjb250YWlucyB0aGUgRE9NIG5vZGUsIHRoaXMgbWFwLCBhbmRcbiAgLy8gaW5mb3JtYXRpb24gYWJvdXQgbGluZS13aWRlIHN0eWxlcyB0aGF0IHdlcmUgc2V0IGJ5IHRoZSBtb2RlLlxuICBmdW5jdGlvbiBidWlsZExpbmVDb250ZW50KGNtLCBsaW5lVmlldykge1xuICAgIC8vIFRoZSBwYWRkaW5nLXJpZ2h0IGZvcmNlcyB0aGUgZWxlbWVudCB0byBoYXZlIGEgJ2JvcmRlcicsIHdoaWNoXG4gICAgLy8gaXMgbmVlZGVkIG9uIFdlYmtpdCB0byBiZSBhYmxlIHRvIGdldCBsaW5lLWxldmVsIGJvdW5kaW5nXG4gICAgLy8gcmVjdGFuZ2xlcyBmb3IgaXQgKGluIG1lYXN1cmVDaGFyKS5cbiAgICB2YXIgY29udGVudCA9IGVsdFAoXCJzcGFuXCIsIG51bGwsIG51bGwsIHdlYmtpdCA/IFwicGFkZGluZy1yaWdodDogLjFweFwiIDogbnVsbCk7XG4gICAgdmFyIGJ1aWxkZXIgPSB7cHJlOiBlbHRQKFwicHJlXCIsIFtjb250ZW50XSwgXCJDb2RlTWlycm9yLWxpbmVcIiksIGNvbnRlbnQ6IGNvbnRlbnQsXG4gICAgICAgICAgICAgICAgICAgY29sOiAwLCBwb3M6IDAsIGNtOiBjbSxcbiAgICAgICAgICAgICAgICAgICB0cmFpbGluZ1NwYWNlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICBzcGxpdFNwYWNlczogY20uZ2V0T3B0aW9uKFwibGluZVdyYXBwaW5nXCIpfTtcbiAgICBsaW5lVmlldy5tZWFzdXJlID0ge307XG5cbiAgICAvLyBJdGVyYXRlIG92ZXIgdGhlIGxvZ2ljYWwgbGluZXMgdGhhdCBtYWtlIHVwIHRoaXMgdmlzdWFsIGxpbmUuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPD0gKGxpbmVWaWV3LnJlc3QgPyBsaW5lVmlldy5yZXN0Lmxlbmd0aCA6IDApOyBpKyspIHtcbiAgICAgIHZhciBsaW5lID0gaSA/IGxpbmVWaWV3LnJlc3RbaSAtIDFdIDogbGluZVZpZXcubGluZSwgb3JkZXIgPSAodm9pZCAwKTtcbiAgICAgIGJ1aWxkZXIucG9zID0gMDtcbiAgICAgIGJ1aWxkZXIuYWRkVG9rZW4gPSBidWlsZFRva2VuO1xuICAgICAgLy8gT3B0aW9uYWxseSB3aXJlIGluIHNvbWUgaGFja3MgaW50byB0aGUgdG9rZW4tcmVuZGVyaW5nXG4gICAgICAvLyBhbGdvcml0aG0sIHRvIGRlYWwgd2l0aCBicm93c2VyIHF1aXJrcy5cbiAgICAgIGlmIChoYXNCYWRCaWRpUmVjdHMoY20uZGlzcGxheS5tZWFzdXJlKSAmJiAob3JkZXIgPSBnZXRPcmRlcihsaW5lLCBjbS5kb2MuZGlyZWN0aW9uKSkpXG4gICAgICAgIHsgYnVpbGRlci5hZGRUb2tlbiA9IGJ1aWxkVG9rZW5CYWRCaWRpKGJ1aWxkZXIuYWRkVG9rZW4sIG9yZGVyKTsgfVxuICAgICAgYnVpbGRlci5tYXAgPSBbXTtcbiAgICAgIHZhciBhbGxvd0Zyb250aWVyVXBkYXRlID0gbGluZVZpZXcgIT0gY20uZGlzcGxheS5leHRlcm5hbE1lYXN1cmVkICYmIGxpbmVObyhsaW5lKTtcbiAgICAgIGluc2VydExpbmVDb250ZW50KGxpbmUsIGJ1aWxkZXIsIGdldExpbmVTdHlsZXMoY20sIGxpbmUsIGFsbG93RnJvbnRpZXJVcGRhdGUpKTtcbiAgICAgIGlmIChsaW5lLnN0eWxlQ2xhc3Nlcykge1xuICAgICAgICBpZiAobGluZS5zdHlsZUNsYXNzZXMuYmdDbGFzcylcbiAgICAgICAgICB7IGJ1aWxkZXIuYmdDbGFzcyA9IGpvaW5DbGFzc2VzKGxpbmUuc3R5bGVDbGFzc2VzLmJnQ2xhc3MsIGJ1aWxkZXIuYmdDbGFzcyB8fCBcIlwiKTsgfVxuICAgICAgICBpZiAobGluZS5zdHlsZUNsYXNzZXMudGV4dENsYXNzKVxuICAgICAgICAgIHsgYnVpbGRlci50ZXh0Q2xhc3MgPSBqb2luQ2xhc3NlcyhsaW5lLnN0eWxlQ2xhc3Nlcy50ZXh0Q2xhc3MsIGJ1aWxkZXIudGV4dENsYXNzIHx8IFwiXCIpOyB9XG4gICAgICB9XG5cbiAgICAgIC8vIEVuc3VyZSBhdCBsZWFzdCBhIHNpbmdsZSBub2RlIGlzIHByZXNlbnQsIGZvciBtZWFzdXJpbmcuXG4gICAgICBpZiAoYnVpbGRlci5tYXAubGVuZ3RoID09IDApXG4gICAgICAgIHsgYnVpbGRlci5tYXAucHVzaCgwLCAwLCBidWlsZGVyLmNvbnRlbnQuYXBwZW5kQ2hpbGQoemVyb1dpZHRoRWxlbWVudChjbS5kaXNwbGF5Lm1lYXN1cmUpKSk7IH1cblxuICAgICAgLy8gU3RvcmUgdGhlIG1hcCBhbmQgYSBjYWNoZSBvYmplY3QgZm9yIHRoZSBjdXJyZW50IGxvZ2ljYWwgbGluZVxuICAgICAgaWYgKGkgPT0gMCkge1xuICAgICAgICBsaW5lVmlldy5tZWFzdXJlLm1hcCA9IGJ1aWxkZXIubWFwO1xuICAgICAgICBsaW5lVmlldy5tZWFzdXJlLmNhY2hlID0ge307XG4gICAgICB9IGVsc2Uge1xuICAobGluZVZpZXcubWVhc3VyZS5tYXBzIHx8IChsaW5lVmlldy5tZWFzdXJlLm1hcHMgPSBbXSkpLnB1c2goYnVpbGRlci5tYXApXG4gICAgICAgIDsobGluZVZpZXcubWVhc3VyZS5jYWNoZXMgfHwgKGxpbmVWaWV3Lm1lYXN1cmUuY2FjaGVzID0gW10pKS5wdXNoKHt9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBTZWUgaXNzdWUgIzI5MDFcbiAgICBpZiAod2Via2l0KSB7XG4gICAgICB2YXIgbGFzdCA9IGJ1aWxkZXIuY29udGVudC5sYXN0Q2hpbGQ7XG4gICAgICBpZiAoL1xcYmNtLXRhYlxcYi8udGVzdChsYXN0LmNsYXNzTmFtZSkgfHwgKGxhc3QucXVlcnlTZWxlY3RvciAmJiBsYXN0LnF1ZXJ5U2VsZWN0b3IoXCIuY20tdGFiXCIpKSlcbiAgICAgICAgeyBidWlsZGVyLmNvbnRlbnQuY2xhc3NOYW1lID0gXCJjbS10YWItd3JhcC1oYWNrXCI7IH1cbiAgICB9XG5cbiAgICBzaWduYWwoY20sIFwicmVuZGVyTGluZVwiLCBjbSwgbGluZVZpZXcubGluZSwgYnVpbGRlci5wcmUpO1xuICAgIGlmIChidWlsZGVyLnByZS5jbGFzc05hbWUpXG4gICAgICB7IGJ1aWxkZXIudGV4dENsYXNzID0gam9pbkNsYXNzZXMoYnVpbGRlci5wcmUuY2xhc3NOYW1lLCBidWlsZGVyLnRleHRDbGFzcyB8fCBcIlwiKTsgfVxuXG4gICAgcmV0dXJuIGJ1aWxkZXJcbiAgfVxuXG4gIGZ1bmN0aW9uIGRlZmF1bHRTcGVjaWFsQ2hhclBsYWNlaG9sZGVyKGNoKSB7XG4gICAgdmFyIHRva2VuID0gZWx0KFwic3BhblwiLCBcIlxcdTIwMjJcIiwgXCJjbS1pbnZhbGlkY2hhclwiKTtcbiAgICB0b2tlbi50aXRsZSA9IFwiXFxcXHVcIiArIGNoLmNoYXJDb2RlQXQoMCkudG9TdHJpbmcoMTYpO1xuICAgIHRva2VuLnNldEF0dHJpYnV0ZShcImFyaWEtbGFiZWxcIiwgdG9rZW4udGl0bGUpO1xuICAgIHJldHVybiB0b2tlblxuICB9XG5cbiAgLy8gQnVpbGQgdXAgdGhlIERPTSByZXByZXNlbnRhdGlvbiBmb3IgYSBzaW5nbGUgdG9rZW4sIGFuZCBhZGQgaXQgdG9cbiAgLy8gdGhlIGxpbmUgbWFwLiBUYWtlcyBjYXJlIHRvIHJlbmRlciBzcGVjaWFsIGNoYXJhY3RlcnMgc2VwYXJhdGVseS5cbiAgZnVuY3Rpb24gYnVpbGRUb2tlbihidWlsZGVyLCB0ZXh0LCBzdHlsZSwgc3RhcnRTdHlsZSwgZW5kU3R5bGUsIGNzcywgYXR0cmlidXRlcykge1xuICAgIGlmICghdGV4dCkgeyByZXR1cm4gfVxuICAgIHZhciBkaXNwbGF5VGV4dCA9IGJ1aWxkZXIuc3BsaXRTcGFjZXMgPyBzcGxpdFNwYWNlcyh0ZXh0LCBidWlsZGVyLnRyYWlsaW5nU3BhY2UpIDogdGV4dDtcbiAgICB2YXIgc3BlY2lhbCA9IGJ1aWxkZXIuY20uc3RhdGUuc3BlY2lhbENoYXJzLCBtdXN0V3JhcCA9IGZhbHNlO1xuICAgIHZhciBjb250ZW50O1xuICAgIGlmICghc3BlY2lhbC50ZXN0KHRleHQpKSB7XG4gICAgICBidWlsZGVyLmNvbCArPSB0ZXh0Lmxlbmd0aDtcbiAgICAgIGNvbnRlbnQgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShkaXNwbGF5VGV4dCk7XG4gICAgICBidWlsZGVyLm1hcC5wdXNoKGJ1aWxkZXIucG9zLCBidWlsZGVyLnBvcyArIHRleHQubGVuZ3RoLCBjb250ZW50KTtcbiAgICAgIGlmIChpZSAmJiBpZV92ZXJzaW9uIDwgOSkgeyBtdXN0V3JhcCA9IHRydWU7IH1cbiAgICAgIGJ1aWxkZXIucG9zICs9IHRleHQubGVuZ3RoO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb250ZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICAgICAgdmFyIHBvcyA9IDA7XG4gICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICBzcGVjaWFsLmxhc3RJbmRleCA9IHBvcztcbiAgICAgICAgdmFyIG0gPSBzcGVjaWFsLmV4ZWModGV4dCk7XG4gICAgICAgIHZhciBza2lwcGVkID0gbSA/IG0uaW5kZXggLSBwb3MgOiB0ZXh0Lmxlbmd0aCAtIHBvcztcbiAgICAgICAgaWYgKHNraXBwZWQpIHtcbiAgICAgICAgICB2YXIgdHh0ID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoZGlzcGxheVRleHQuc2xpY2UocG9zLCBwb3MgKyBza2lwcGVkKSk7XG4gICAgICAgICAgaWYgKGllICYmIGllX3ZlcnNpb24gPCA5KSB7IGNvbnRlbnQuYXBwZW5kQ2hpbGQoZWx0KFwic3BhblwiLCBbdHh0XSkpOyB9XG4gICAgICAgICAgZWxzZSB7IGNvbnRlbnQuYXBwZW5kQ2hpbGQodHh0KTsgfVxuICAgICAgICAgIGJ1aWxkZXIubWFwLnB1c2goYnVpbGRlci5wb3MsIGJ1aWxkZXIucG9zICsgc2tpcHBlZCwgdHh0KTtcbiAgICAgICAgICBidWlsZGVyLmNvbCArPSBza2lwcGVkO1xuICAgICAgICAgIGJ1aWxkZXIucG9zICs9IHNraXBwZWQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFtKSB7IGJyZWFrIH1cbiAgICAgICAgcG9zICs9IHNraXBwZWQgKyAxO1xuICAgICAgICB2YXIgdHh0JDEgPSAodm9pZCAwKTtcbiAgICAgICAgaWYgKG1bMF0gPT0gXCJcXHRcIikge1xuICAgICAgICAgIHZhciB0YWJTaXplID0gYnVpbGRlci5jbS5vcHRpb25zLnRhYlNpemUsIHRhYldpZHRoID0gdGFiU2l6ZSAtIGJ1aWxkZXIuY29sICUgdGFiU2l6ZTtcbiAgICAgICAgICB0eHQkMSA9IGNvbnRlbnQuYXBwZW5kQ2hpbGQoZWx0KFwic3BhblwiLCBzcGFjZVN0cih0YWJXaWR0aCksIFwiY20tdGFiXCIpKTtcbiAgICAgICAgICB0eHQkMS5zZXRBdHRyaWJ1dGUoXCJyb2xlXCIsIFwicHJlc2VudGF0aW9uXCIpO1xuICAgICAgICAgIHR4dCQxLnNldEF0dHJpYnV0ZShcImNtLXRleHRcIiwgXCJcXHRcIik7XG4gICAgICAgICAgYnVpbGRlci5jb2wgKz0gdGFiV2lkdGg7XG4gICAgICAgIH0gZWxzZSBpZiAobVswXSA9PSBcIlxcclwiIHx8IG1bMF0gPT0gXCJcXG5cIikge1xuICAgICAgICAgIHR4dCQxID0gY29udGVudC5hcHBlbmRDaGlsZChlbHQoXCJzcGFuXCIsIG1bMF0gPT0gXCJcXHJcIiA/IFwiXFx1MjQwZFwiIDogXCJcXHUyNDI0XCIsIFwiY20taW52YWxpZGNoYXJcIikpO1xuICAgICAgICAgIHR4dCQxLnNldEF0dHJpYnV0ZShcImNtLXRleHRcIiwgbVswXSk7XG4gICAgICAgICAgYnVpbGRlci5jb2wgKz0gMTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0eHQkMSA9IGJ1aWxkZXIuY20ub3B0aW9ucy5zcGVjaWFsQ2hhclBsYWNlaG9sZGVyKG1bMF0pO1xuICAgICAgICAgIHR4dCQxLnNldEF0dHJpYnV0ZShcImNtLXRleHRcIiwgbVswXSk7XG4gICAgICAgICAgaWYgKGllICYmIGllX3ZlcnNpb24gPCA5KSB7IGNvbnRlbnQuYXBwZW5kQ2hpbGQoZWx0KFwic3BhblwiLCBbdHh0JDFdKSk7IH1cbiAgICAgICAgICBlbHNlIHsgY29udGVudC5hcHBlbmRDaGlsZCh0eHQkMSk7IH1cbiAgICAgICAgICBidWlsZGVyLmNvbCArPSAxO1xuICAgICAgICB9XG4gICAgICAgIGJ1aWxkZXIubWFwLnB1c2goYnVpbGRlci5wb3MsIGJ1aWxkZXIucG9zICsgMSwgdHh0JDEpO1xuICAgICAgICBidWlsZGVyLnBvcysrO1xuICAgICAgfVxuICAgIH1cbiAgICBidWlsZGVyLnRyYWlsaW5nU3BhY2UgPSBkaXNwbGF5VGV4dC5jaGFyQ29kZUF0KHRleHQubGVuZ3RoIC0gMSkgPT0gMzI7XG4gICAgaWYgKHN0eWxlIHx8IHN0YXJ0U3R5bGUgfHwgZW5kU3R5bGUgfHwgbXVzdFdyYXAgfHwgY3NzIHx8IGF0dHJpYnV0ZXMpIHtcbiAgICAgIHZhciBmdWxsU3R5bGUgPSBzdHlsZSB8fCBcIlwiO1xuICAgICAgaWYgKHN0YXJ0U3R5bGUpIHsgZnVsbFN0eWxlICs9IHN0YXJ0U3R5bGU7IH1cbiAgICAgIGlmIChlbmRTdHlsZSkgeyBmdWxsU3R5bGUgKz0gZW5kU3R5bGU7IH1cbiAgICAgIHZhciB0b2tlbiA9IGVsdChcInNwYW5cIiwgW2NvbnRlbnRdLCBmdWxsU3R5bGUsIGNzcyk7XG4gICAgICBpZiAoYXR0cmlidXRlcykge1xuICAgICAgICBmb3IgKHZhciBhdHRyIGluIGF0dHJpYnV0ZXMpIHsgaWYgKGF0dHJpYnV0ZXMuaGFzT3duUHJvcGVydHkoYXR0cikgJiYgYXR0ciAhPSBcInN0eWxlXCIgJiYgYXR0ciAhPSBcImNsYXNzXCIpXG4gICAgICAgICAgeyB0b2tlbi5zZXRBdHRyaWJ1dGUoYXR0ciwgYXR0cmlidXRlc1thdHRyXSk7IH0gfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGJ1aWxkZXIuY29udGVudC5hcHBlbmRDaGlsZCh0b2tlbilcbiAgICB9XG4gICAgYnVpbGRlci5jb250ZW50LmFwcGVuZENoaWxkKGNvbnRlbnQpO1xuICB9XG5cbiAgLy8gQ2hhbmdlIHNvbWUgc3BhY2VzIHRvIE5CU1AgdG8gcHJldmVudCB0aGUgYnJvd3NlciBmcm9tIGNvbGxhcHNpbmdcbiAgLy8gdHJhaWxpbmcgc3BhY2VzIGF0IHRoZSBlbmQgb2YgYSBsaW5lIHdoZW4gcmVuZGVyaW5nIHRleHQgKGlzc3VlICMxMzYyKS5cbiAgZnVuY3Rpb24gc3BsaXRTcGFjZXModGV4dCwgdHJhaWxpbmdCZWZvcmUpIHtcbiAgICBpZiAodGV4dC5sZW5ndGggPiAxICYmICEvICAvLnRlc3QodGV4dCkpIHsgcmV0dXJuIHRleHQgfVxuICAgIHZhciBzcGFjZUJlZm9yZSA9IHRyYWlsaW5nQmVmb3JlLCByZXN1bHQgPSBcIlwiO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGV4dC5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGNoID0gdGV4dC5jaGFyQXQoaSk7XG4gICAgICBpZiAoY2ggPT0gXCIgXCIgJiYgc3BhY2VCZWZvcmUgJiYgKGkgPT0gdGV4dC5sZW5ndGggLSAxIHx8IHRleHQuY2hhckNvZGVBdChpICsgMSkgPT0gMzIpKVxuICAgICAgICB7IGNoID0gXCJcXHUwMGEwXCI7IH1cbiAgICAgIHJlc3VsdCArPSBjaDtcbiAgICAgIHNwYWNlQmVmb3JlID0gY2ggPT0gXCIgXCI7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHRcbiAgfVxuXG4gIC8vIFdvcmsgYXJvdW5kIG5vbnNlbnNlIGRpbWVuc2lvbnMgYmVpbmcgcmVwb3J0ZWQgZm9yIHN0cmV0Y2hlcyBvZlxuICAvLyByaWdodC10by1sZWZ0IHRleHQuXG4gIGZ1bmN0aW9uIGJ1aWxkVG9rZW5CYWRCaWRpKGlubmVyLCBvcmRlcikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYnVpbGRlciwgdGV4dCwgc3R5bGUsIHN0YXJ0U3R5bGUsIGVuZFN0eWxlLCBjc3MsIGF0dHJpYnV0ZXMpIHtcbiAgICAgIHN0eWxlID0gc3R5bGUgPyBzdHlsZSArIFwiIGNtLWZvcmNlLWJvcmRlclwiIDogXCJjbS1mb3JjZS1ib3JkZXJcIjtcbiAgICAgIHZhciBzdGFydCA9IGJ1aWxkZXIucG9zLCBlbmQgPSBzdGFydCArIHRleHQubGVuZ3RoO1xuICAgICAgZm9yICg7Oykge1xuICAgICAgICAvLyBGaW5kIHRoZSBwYXJ0IHRoYXQgb3ZlcmxhcHMgd2l0aCB0aGUgc3RhcnQgb2YgdGhpcyB0ZXh0XG4gICAgICAgIHZhciBwYXJ0ID0gKHZvaWQgMCk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb3JkZXIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBwYXJ0ID0gb3JkZXJbaV07XG4gICAgICAgICAgaWYgKHBhcnQudG8gPiBzdGFydCAmJiBwYXJ0LmZyb20gPD0gc3RhcnQpIHsgYnJlYWsgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJ0LnRvID49IGVuZCkgeyByZXR1cm4gaW5uZXIoYnVpbGRlciwgdGV4dCwgc3R5bGUsIHN0YXJ0U3R5bGUsIGVuZFN0eWxlLCBjc3MsIGF0dHJpYnV0ZXMpIH1cbiAgICAgICAgaW5uZXIoYnVpbGRlciwgdGV4dC5zbGljZSgwLCBwYXJ0LnRvIC0gc3RhcnQpLCBzdHlsZSwgc3RhcnRTdHlsZSwgbnVsbCwgY3NzLCBhdHRyaWJ1dGVzKTtcbiAgICAgICAgc3RhcnRTdHlsZSA9IG51bGw7XG4gICAgICAgIHRleHQgPSB0ZXh0LnNsaWNlKHBhcnQudG8gLSBzdGFydCk7XG4gICAgICAgIHN0YXJ0ID0gcGFydC50bztcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBidWlsZENvbGxhcHNlZFNwYW4oYnVpbGRlciwgc2l6ZSwgbWFya2VyLCBpZ25vcmVXaWRnZXQpIHtcbiAgICB2YXIgd2lkZ2V0ID0gIWlnbm9yZVdpZGdldCAmJiBtYXJrZXIud2lkZ2V0Tm9kZTtcbiAgICBpZiAod2lkZ2V0KSB7IGJ1aWxkZXIubWFwLnB1c2goYnVpbGRlci5wb3MsIGJ1aWxkZXIucG9zICsgc2l6ZSwgd2lkZ2V0KTsgfVxuICAgIGlmICghaWdub3JlV2lkZ2V0ICYmIGJ1aWxkZXIuY20uZGlzcGxheS5pbnB1dC5uZWVkc0NvbnRlbnRBdHRyaWJ1dGUpIHtcbiAgICAgIGlmICghd2lkZ2V0KVxuICAgICAgICB7IHdpZGdldCA9IGJ1aWxkZXIuY29udGVudC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKSk7IH1cbiAgICAgIHdpZGdldC5zZXRBdHRyaWJ1dGUoXCJjbS1tYXJrZXJcIiwgbWFya2VyLmlkKTtcbiAgICB9XG4gICAgaWYgKHdpZGdldCkge1xuICAgICAgYnVpbGRlci5jbS5kaXNwbGF5LmlucHV0LnNldFVuZWRpdGFibGUod2lkZ2V0KTtcbiAgICAgIGJ1aWxkZXIuY29udGVudC5hcHBlbmRDaGlsZCh3aWRnZXQpO1xuICAgIH1cbiAgICBidWlsZGVyLnBvcyArPSBzaXplO1xuICAgIGJ1aWxkZXIudHJhaWxpbmdTcGFjZSA9IGZhbHNlO1xuICB9XG5cbiAgLy8gT3V0cHV0cyBhIG51bWJlciBvZiBzcGFucyB0byBtYWtlIHVwIGEgbGluZSwgdGFraW5nIGhpZ2hsaWdodGluZ1xuICAvLyBhbmQgbWFya2VkIHRleHQgaW50byBhY2NvdW50LlxuICBmdW5jdGlvbiBpbnNlcnRMaW5lQ29udGVudChsaW5lLCBidWlsZGVyLCBzdHlsZXMpIHtcbiAgICB2YXIgc3BhbnMgPSBsaW5lLm1hcmtlZFNwYW5zLCBhbGxUZXh0ID0gbGluZS50ZXh0LCBhdCA9IDA7XG4gICAgaWYgKCFzcGFucykge1xuICAgICAgZm9yICh2YXIgaSQxID0gMTsgaSQxIDwgc3R5bGVzLmxlbmd0aDsgaSQxKz0yKVxuICAgICAgICB7IGJ1aWxkZXIuYWRkVG9rZW4oYnVpbGRlciwgYWxsVGV4dC5zbGljZShhdCwgYXQgPSBzdHlsZXNbaSQxXSksIGludGVycHJldFRva2VuU3R5bGUoc3R5bGVzW2kkMSsxXSwgYnVpbGRlci5jbS5vcHRpb25zKSk7IH1cbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIHZhciBsZW4gPSBhbGxUZXh0Lmxlbmd0aCwgcG9zID0gMCwgaSA9IDEsIHRleHQgPSBcIlwiLCBzdHlsZSwgY3NzO1xuICAgIHZhciBuZXh0Q2hhbmdlID0gMCwgc3BhblN0eWxlLCBzcGFuRW5kU3R5bGUsIHNwYW5TdGFydFN0eWxlLCBjb2xsYXBzZWQsIGF0dHJpYnV0ZXM7XG4gICAgZm9yICg7Oykge1xuICAgICAgaWYgKG5leHRDaGFuZ2UgPT0gcG9zKSB7IC8vIFVwZGF0ZSBjdXJyZW50IG1hcmtlciBzZXRcbiAgICAgICAgc3BhblN0eWxlID0gc3BhbkVuZFN0eWxlID0gc3BhblN0YXJ0U3R5bGUgPSBjc3MgPSBcIlwiO1xuICAgICAgICBhdHRyaWJ1dGVzID0gbnVsbDtcbiAgICAgICAgY29sbGFwc2VkID0gbnVsbDsgbmV4dENoYW5nZSA9IEluZmluaXR5O1xuICAgICAgICB2YXIgZm91bmRCb29rbWFya3MgPSBbXSwgZW5kU3R5bGVzID0gKHZvaWQgMCk7XG4gICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgc3BhbnMubGVuZ3RoOyArK2opIHtcbiAgICAgICAgICB2YXIgc3AgPSBzcGFuc1tqXSwgbSA9IHNwLm1hcmtlcjtcbiAgICAgICAgICBpZiAobS50eXBlID09IFwiYm9va21hcmtcIiAmJiBzcC5mcm9tID09IHBvcyAmJiBtLndpZGdldE5vZGUpIHtcbiAgICAgICAgICAgIGZvdW5kQm9va21hcmtzLnB1c2gobSk7XG4gICAgICAgICAgfSBlbHNlIGlmIChzcC5mcm9tIDw9IHBvcyAmJiAoc3AudG8gPT0gbnVsbCB8fCBzcC50byA+IHBvcyB8fCBtLmNvbGxhcHNlZCAmJiBzcC50byA9PSBwb3MgJiYgc3AuZnJvbSA9PSBwb3MpKSB7XG4gICAgICAgICAgICBpZiAoc3AudG8gIT0gbnVsbCAmJiBzcC50byAhPSBwb3MgJiYgbmV4dENoYW5nZSA+IHNwLnRvKSB7XG4gICAgICAgICAgICAgIG5leHRDaGFuZ2UgPSBzcC50bztcbiAgICAgICAgICAgICAgc3BhbkVuZFN0eWxlID0gXCJcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtLmNsYXNzTmFtZSkgeyBzcGFuU3R5bGUgKz0gXCIgXCIgKyBtLmNsYXNzTmFtZTsgfVxuICAgICAgICAgICAgaWYgKG0uY3NzKSB7IGNzcyA9IChjc3MgPyBjc3MgKyBcIjtcIiA6IFwiXCIpICsgbS5jc3M7IH1cbiAgICAgICAgICAgIGlmIChtLnN0YXJ0U3R5bGUgJiYgc3AuZnJvbSA9PSBwb3MpIHsgc3BhblN0YXJ0U3R5bGUgKz0gXCIgXCIgKyBtLnN0YXJ0U3R5bGU7IH1cbiAgICAgICAgICAgIGlmIChtLmVuZFN0eWxlICYmIHNwLnRvID09IG5leHRDaGFuZ2UpIHsgKGVuZFN0eWxlcyB8fCAoZW5kU3R5bGVzID0gW10pKS5wdXNoKG0uZW5kU3R5bGUsIHNwLnRvKTsgfVxuICAgICAgICAgICAgLy8gc3VwcG9ydCBmb3IgdGhlIG9sZCB0aXRsZSBwcm9wZXJ0eVxuICAgICAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2NvZGVtaXJyb3IvQ29kZU1pcnJvci9wdWxsLzU2NzNcbiAgICAgICAgICAgIGlmIChtLnRpdGxlKSB7IChhdHRyaWJ1dGVzIHx8IChhdHRyaWJ1dGVzID0ge30pKS50aXRsZSA9IG0udGl0bGU7IH1cbiAgICAgICAgICAgIGlmIChtLmF0dHJpYnV0ZXMpIHtcbiAgICAgICAgICAgICAgZm9yICh2YXIgYXR0ciBpbiBtLmF0dHJpYnV0ZXMpXG4gICAgICAgICAgICAgICAgeyAoYXR0cmlidXRlcyB8fCAoYXR0cmlidXRlcyA9IHt9KSlbYXR0cl0gPSBtLmF0dHJpYnV0ZXNbYXR0cl07IH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtLmNvbGxhcHNlZCAmJiAoIWNvbGxhcHNlZCB8fCBjb21wYXJlQ29sbGFwc2VkTWFya2Vycyhjb2xsYXBzZWQubWFya2VyLCBtKSA8IDApKVxuICAgICAgICAgICAgICB7IGNvbGxhcHNlZCA9IHNwOyB9XG4gICAgICAgICAgfSBlbHNlIGlmIChzcC5mcm9tID4gcG9zICYmIG5leHRDaGFuZ2UgPiBzcC5mcm9tKSB7XG4gICAgICAgICAgICBuZXh0Q2hhbmdlID0gc3AuZnJvbTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGVuZFN0eWxlcykgeyBmb3IgKHZhciBqJDEgPSAwOyBqJDEgPCBlbmRTdHlsZXMubGVuZ3RoOyBqJDEgKz0gMilcbiAgICAgICAgICB7IGlmIChlbmRTdHlsZXNbaiQxICsgMV0gPT0gbmV4dENoYW5nZSkgeyBzcGFuRW5kU3R5bGUgKz0gXCIgXCIgKyBlbmRTdHlsZXNbaiQxXTsgfSB9IH1cblxuICAgICAgICBpZiAoIWNvbGxhcHNlZCB8fCBjb2xsYXBzZWQuZnJvbSA9PSBwb3MpIHsgZm9yICh2YXIgaiQyID0gMDsgaiQyIDwgZm91bmRCb29rbWFya3MubGVuZ3RoOyArK2okMilcbiAgICAgICAgICB7IGJ1aWxkQ29sbGFwc2VkU3BhbihidWlsZGVyLCAwLCBmb3VuZEJvb2ttYXJrc1tqJDJdKTsgfSB9XG4gICAgICAgIGlmIChjb2xsYXBzZWQgJiYgKGNvbGxhcHNlZC5mcm9tIHx8IDApID09IHBvcykge1xuICAgICAgICAgIGJ1aWxkQ29sbGFwc2VkU3BhbihidWlsZGVyLCAoY29sbGFwc2VkLnRvID09IG51bGwgPyBsZW4gKyAxIDogY29sbGFwc2VkLnRvKSAtIHBvcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sbGFwc2VkLm1hcmtlciwgY29sbGFwc2VkLmZyb20gPT0gbnVsbCk7XG4gICAgICAgICAgaWYgKGNvbGxhcHNlZC50byA9PSBudWxsKSB7IHJldHVybiB9XG4gICAgICAgICAgaWYgKGNvbGxhcHNlZC50byA9PSBwb3MpIHsgY29sbGFwc2VkID0gZmFsc2U7IH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHBvcyA+PSBsZW4pIHsgYnJlYWsgfVxuXG4gICAgICB2YXIgdXB0byA9IE1hdGgubWluKGxlbiwgbmV4dENoYW5nZSk7XG4gICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICBpZiAodGV4dCkge1xuICAgICAgICAgIHZhciBlbmQgPSBwb3MgKyB0ZXh0Lmxlbmd0aDtcbiAgICAgICAgICBpZiAoIWNvbGxhcHNlZCkge1xuICAgICAgICAgICAgdmFyIHRva2VuVGV4dCA9IGVuZCA+IHVwdG8gPyB0ZXh0LnNsaWNlKDAsIHVwdG8gLSBwb3MpIDogdGV4dDtcbiAgICAgICAgICAgIGJ1aWxkZXIuYWRkVG9rZW4oYnVpbGRlciwgdG9rZW5UZXh0LCBzdHlsZSA/IHN0eWxlICsgc3BhblN0eWxlIDogc3BhblN0eWxlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGFuU3RhcnRTdHlsZSwgcG9zICsgdG9rZW5UZXh0Lmxlbmd0aCA9PSBuZXh0Q2hhbmdlID8gc3BhbkVuZFN0eWxlIDogXCJcIiwgY3NzLCBhdHRyaWJ1dGVzKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGVuZCA+PSB1cHRvKSB7dGV4dCA9IHRleHQuc2xpY2UodXB0byAtIHBvcyk7IHBvcyA9IHVwdG87IGJyZWFrfVxuICAgICAgICAgIHBvcyA9IGVuZDtcbiAgICAgICAgICBzcGFuU3RhcnRTdHlsZSA9IFwiXCI7XG4gICAgICAgIH1cbiAgICAgICAgdGV4dCA9IGFsbFRleHQuc2xpY2UoYXQsIGF0ID0gc3R5bGVzW2krK10pO1xuICAgICAgICBzdHlsZSA9IGludGVycHJldFRva2VuU3R5bGUoc3R5bGVzW2krK10sIGJ1aWxkZXIuY20ub3B0aW9ucyk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cblxuICAvLyBUaGVzZSBvYmplY3RzIGFyZSB1c2VkIHRvIHJlcHJlc2VudCB0aGUgdmlzaWJsZSAoY3VycmVudGx5IGRyYXduKVxuICAvLyBwYXJ0IG9mIHRoZSBkb2N1bWVudC4gQSBMaW5lVmlldyBtYXkgY29ycmVzcG9uZCB0byBtdWx0aXBsZVxuICAvLyBsb2dpY2FsIGxpbmVzLCBpZiB0aG9zZSBhcmUgY29ubmVjdGVkIGJ5IGNvbGxhcHNlZCByYW5nZXMuXG4gIGZ1bmN0aW9uIExpbmVWaWV3KGRvYywgbGluZSwgbGluZU4pIHtcbiAgICAvLyBUaGUgc3RhcnRpbmcgbGluZVxuICAgIHRoaXMubGluZSA9IGxpbmU7XG4gICAgLy8gQ29udGludWluZyBsaW5lcywgaWYgYW55XG4gICAgdGhpcy5yZXN0ID0gdmlzdWFsTGluZUNvbnRpbnVlZChsaW5lKTtcbiAgICAvLyBOdW1iZXIgb2YgbG9naWNhbCBsaW5lcyBpbiB0aGlzIHZpc3VhbCBsaW5lXG4gICAgdGhpcy5zaXplID0gdGhpcy5yZXN0ID8gbGluZU5vKGxzdCh0aGlzLnJlc3QpKSAtIGxpbmVOICsgMSA6IDE7XG4gICAgdGhpcy5ub2RlID0gdGhpcy50ZXh0ID0gbnVsbDtcbiAgICB0aGlzLmhpZGRlbiA9IGxpbmVJc0hpZGRlbihkb2MsIGxpbmUpO1xuICB9XG5cbiAgLy8gQ3JlYXRlIGEgcmFuZ2Ugb2YgTGluZVZpZXcgb2JqZWN0cyBmb3IgdGhlIGdpdmVuIGxpbmVzLlxuICBmdW5jdGlvbiBidWlsZFZpZXdBcnJheShjbSwgZnJvbSwgdG8pIHtcbiAgICB2YXIgYXJyYXkgPSBbXSwgbmV4dFBvcztcbiAgICBmb3IgKHZhciBwb3MgPSBmcm9tOyBwb3MgPCB0bzsgcG9zID0gbmV4dFBvcykge1xuICAgICAgdmFyIHZpZXcgPSBuZXcgTGluZVZpZXcoY20uZG9jLCBnZXRMaW5lKGNtLmRvYywgcG9zKSwgcG9zKTtcbiAgICAgIG5leHRQb3MgPSBwb3MgKyB2aWV3LnNpemU7XG4gICAgICBhcnJheS5wdXNoKHZpZXcpO1xuICAgIH1cbiAgICByZXR1cm4gYXJyYXlcbiAgfVxuXG4gIHZhciBvcGVyYXRpb25Hcm91cCA9IG51bGw7XG5cbiAgZnVuY3Rpb24gcHVzaE9wZXJhdGlvbihvcCkge1xuICAgIGlmIChvcGVyYXRpb25Hcm91cCkge1xuICAgICAgb3BlcmF0aW9uR3JvdXAub3BzLnB1c2gob3ApO1xuICAgIH0gZWxzZSB7XG4gICAgICBvcC5vd25zR3JvdXAgPSBvcGVyYXRpb25Hcm91cCA9IHtcbiAgICAgICAgb3BzOiBbb3BdLFxuICAgICAgICBkZWxheWVkQ2FsbGJhY2tzOiBbXVxuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBmaXJlQ2FsbGJhY2tzRm9yT3BzKGdyb3VwKSB7XG4gICAgLy8gQ2FsbHMgZGVsYXllZCBjYWxsYmFja3MgYW5kIGN1cnNvckFjdGl2aXR5IGhhbmRsZXJzIHVudGlsIG5vXG4gICAgLy8gbmV3IG9uZXMgYXBwZWFyXG4gICAgdmFyIGNhbGxiYWNrcyA9IGdyb3VwLmRlbGF5ZWRDYWxsYmFja3MsIGkgPSAwO1xuICAgIGRvIHtcbiAgICAgIGZvciAoOyBpIDwgY2FsbGJhY2tzLmxlbmd0aDsgaSsrKVxuICAgICAgICB7IGNhbGxiYWNrc1tpXS5jYWxsKG51bGwpOyB9XG4gICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGdyb3VwLm9wcy5sZW5ndGg7IGorKykge1xuICAgICAgICB2YXIgb3AgPSBncm91cC5vcHNbal07XG4gICAgICAgIGlmIChvcC5jdXJzb3JBY3Rpdml0eUhhbmRsZXJzKVxuICAgICAgICAgIHsgd2hpbGUgKG9wLmN1cnNvckFjdGl2aXR5Q2FsbGVkIDwgb3AuY3Vyc29yQWN0aXZpdHlIYW5kbGVycy5sZW5ndGgpXG4gICAgICAgICAgICB7IG9wLmN1cnNvckFjdGl2aXR5SGFuZGxlcnNbb3AuY3Vyc29yQWN0aXZpdHlDYWxsZWQrK10uY2FsbChudWxsLCBvcC5jbSk7IH0gfVxuICAgICAgfVxuICAgIH0gd2hpbGUgKGkgPCBjYWxsYmFja3MubGVuZ3RoKVxuICB9XG5cbiAgZnVuY3Rpb24gZmluaXNoT3BlcmF0aW9uKG9wLCBlbmRDYikge1xuICAgIHZhciBncm91cCA9IG9wLm93bnNHcm91cDtcbiAgICBpZiAoIWdyb3VwKSB7IHJldHVybiB9XG5cbiAgICB0cnkgeyBmaXJlQ2FsbGJhY2tzRm9yT3BzKGdyb3VwKTsgfVxuICAgIGZpbmFsbHkge1xuICAgICAgb3BlcmF0aW9uR3JvdXAgPSBudWxsO1xuICAgICAgZW5kQ2IoZ3JvdXApO1xuICAgIH1cbiAgfVxuXG4gIHZhciBvcnBoYW5EZWxheWVkQ2FsbGJhY2tzID0gbnVsbDtcblxuICAvLyBPZnRlbiwgd2Ugd2FudCB0byBzaWduYWwgZXZlbnRzIGF0IGEgcG9pbnQgd2hlcmUgd2UgYXJlIGluIHRoZVxuICAvLyBtaWRkbGUgb2Ygc29tZSB3b3JrLCBidXQgZG9uJ3Qgd2FudCB0aGUgaGFuZGxlciB0byBzdGFydCBjYWxsaW5nXG4gIC8vIG90aGVyIG1ldGhvZHMgb24gdGhlIGVkaXRvciwgd2hpY2ggbWlnaHQgYmUgaW4gYW4gaW5jb25zaXN0ZW50XG4gIC8vIHN0YXRlIG9yIHNpbXBseSBub3QgZXhwZWN0IGFueSBvdGhlciBldmVudHMgdG8gaGFwcGVuLlxuICAvLyBzaWduYWxMYXRlciBsb29rcyB3aGV0aGVyIHRoZXJlIGFyZSBhbnkgaGFuZGxlcnMsIGFuZCBzY2hlZHVsZXNcbiAgLy8gdGhlbSB0byBiZSBleGVjdXRlZCB3aGVuIHRoZSBsYXN0IG9wZXJhdGlvbiBlbmRzLCBvciwgaWYgbm9cbiAgLy8gb3BlcmF0aW9uIGlzIGFjdGl2ZSwgd2hlbiBhIHRpbWVvdXQgZmlyZXMuXG4gIGZ1bmN0aW9uIHNpZ25hbExhdGVyKGVtaXR0ZXIsIHR5cGUgLyosIHZhbHVlcy4uLiovKSB7XG4gICAgdmFyIGFyciA9IGdldEhhbmRsZXJzKGVtaXR0ZXIsIHR5cGUpO1xuICAgIGlmICghYXJyLmxlbmd0aCkgeyByZXR1cm4gfVxuICAgIHZhciBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAyKSwgbGlzdDtcbiAgICBpZiAob3BlcmF0aW9uR3JvdXApIHtcbiAgICAgIGxpc3QgPSBvcGVyYXRpb25Hcm91cC5kZWxheWVkQ2FsbGJhY2tzO1xuICAgIH0gZWxzZSBpZiAob3JwaGFuRGVsYXllZENhbGxiYWNrcykge1xuICAgICAgbGlzdCA9IG9ycGhhbkRlbGF5ZWRDYWxsYmFja3M7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxpc3QgPSBvcnBoYW5EZWxheWVkQ2FsbGJhY2tzID0gW107XG4gICAgICBzZXRUaW1lb3V0KGZpcmVPcnBoYW5EZWxheWVkLCAwKTtcbiAgICB9XG4gICAgdmFyIGxvb3AgPSBmdW5jdGlvbiAoIGkgKSB7XG4gICAgICBsaXN0LnB1c2goZnVuY3Rpb24gKCkgeyByZXR1cm4gYXJyW2ldLmFwcGx5KG51bGwsIGFyZ3MpOyB9KTtcbiAgICB9O1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyArK2kpXG4gICAgICBsb29wKCBpICk7XG4gIH1cblxuICBmdW5jdGlvbiBmaXJlT3JwaGFuRGVsYXllZCgpIHtcbiAgICB2YXIgZGVsYXllZCA9IG9ycGhhbkRlbGF5ZWRDYWxsYmFja3M7XG4gICAgb3JwaGFuRGVsYXllZENhbGxiYWNrcyA9IG51bGw7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkZWxheWVkLmxlbmd0aDsgKytpKSB7IGRlbGF5ZWRbaV0oKTsgfVxuICB9XG5cbiAgLy8gV2hlbiBhbiBhc3BlY3Qgb2YgYSBsaW5lIGNoYW5nZXMsIGEgc3RyaW5nIGlzIGFkZGVkIHRvXG4gIC8vIGxpbmVWaWV3LmNoYW5nZXMuIFRoaXMgdXBkYXRlcyB0aGUgcmVsZXZhbnQgcGFydCBvZiB0aGUgbGluZSdzXG4gIC8vIERPTSBzdHJ1Y3R1cmUuXG4gIGZ1bmN0aW9uIHVwZGF0ZUxpbmVGb3JDaGFuZ2VzKGNtLCBsaW5lVmlldywgbGluZU4sIGRpbXMpIHtcbiAgICBmb3IgKHZhciBqID0gMDsgaiA8IGxpbmVWaWV3LmNoYW5nZXMubGVuZ3RoOyBqKyspIHtcbiAgICAgIHZhciB0eXBlID0gbGluZVZpZXcuY2hhbmdlc1tqXTtcbiAgICAgIGlmICh0eXBlID09IFwidGV4dFwiKSB7IHVwZGF0ZUxpbmVUZXh0KGNtLCBsaW5lVmlldyk7IH1cbiAgICAgIGVsc2UgaWYgKHR5cGUgPT0gXCJndXR0ZXJcIikgeyB1cGRhdGVMaW5lR3V0dGVyKGNtLCBsaW5lVmlldywgbGluZU4sIGRpbXMpOyB9XG4gICAgICBlbHNlIGlmICh0eXBlID09IFwiY2xhc3NcIikgeyB1cGRhdGVMaW5lQ2xhc3NlcyhjbSwgbGluZVZpZXcpOyB9XG4gICAgICBlbHNlIGlmICh0eXBlID09IFwid2lkZ2V0XCIpIHsgdXBkYXRlTGluZVdpZGdldHMoY20sIGxpbmVWaWV3LCBkaW1zKTsgfVxuICAgIH1cbiAgICBsaW5lVmlldy5jaGFuZ2VzID0gbnVsbDtcbiAgfVxuXG4gIC8vIExpbmVzIHdpdGggZ3V0dGVyIGVsZW1lbnRzLCB3aWRnZXRzIG9yIGEgYmFja2dyb3VuZCBjbGFzcyBuZWVkIHRvXG4gIC8vIGJlIHdyYXBwZWQsIGFuZCBoYXZlIHRoZSBleHRyYSBlbGVtZW50cyBhZGRlZCB0byB0aGUgd3JhcHBlciBkaXZcbiAgZnVuY3Rpb24gZW5zdXJlTGluZVdyYXBwZWQobGluZVZpZXcpIHtcbiAgICBpZiAobGluZVZpZXcubm9kZSA9PSBsaW5lVmlldy50ZXh0KSB7XG4gICAgICBsaW5lVmlldy5ub2RlID0gZWx0KFwiZGl2XCIsIG51bGwsIG51bGwsIFwicG9zaXRpb246IHJlbGF0aXZlXCIpO1xuICAgICAgaWYgKGxpbmVWaWV3LnRleHQucGFyZW50Tm9kZSlcbiAgICAgICAgeyBsaW5lVmlldy50ZXh0LnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKGxpbmVWaWV3Lm5vZGUsIGxpbmVWaWV3LnRleHQpOyB9XG4gICAgICBsaW5lVmlldy5ub2RlLmFwcGVuZENoaWxkKGxpbmVWaWV3LnRleHQpO1xuICAgICAgaWYgKGllICYmIGllX3ZlcnNpb24gPCA4KSB7IGxpbmVWaWV3Lm5vZGUuc3R5bGUuekluZGV4ID0gMjsgfVxuICAgIH1cbiAgICByZXR1cm4gbGluZVZpZXcubm9kZVxuICB9XG5cbiAgZnVuY3Rpb24gdXBkYXRlTGluZUJhY2tncm91bmQoY20sIGxpbmVWaWV3KSB7XG4gICAgdmFyIGNscyA9IGxpbmVWaWV3LmJnQ2xhc3MgPyBsaW5lVmlldy5iZ0NsYXNzICsgXCIgXCIgKyAobGluZVZpZXcubGluZS5iZ0NsYXNzIHx8IFwiXCIpIDogbGluZVZpZXcubGluZS5iZ0NsYXNzO1xuICAgIGlmIChjbHMpIHsgY2xzICs9IFwiIENvZGVNaXJyb3ItbGluZWJhY2tncm91bmRcIjsgfVxuICAgIGlmIChsaW5lVmlldy5iYWNrZ3JvdW5kKSB7XG4gICAgICBpZiAoY2xzKSB7IGxpbmVWaWV3LmJhY2tncm91bmQuY2xhc3NOYW1lID0gY2xzOyB9XG4gICAgICBlbHNlIHsgbGluZVZpZXcuYmFja2dyb3VuZC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGxpbmVWaWV3LmJhY2tncm91bmQpOyBsaW5lVmlldy5iYWNrZ3JvdW5kID0gbnVsbDsgfVxuICAgIH0gZWxzZSBpZiAoY2xzKSB7XG4gICAgICB2YXIgd3JhcCA9IGVuc3VyZUxpbmVXcmFwcGVkKGxpbmVWaWV3KTtcbiAgICAgIGxpbmVWaWV3LmJhY2tncm91bmQgPSB3cmFwLmluc2VydEJlZm9yZShlbHQoXCJkaXZcIiwgbnVsbCwgY2xzKSwgd3JhcC5maXJzdENoaWxkKTtcbiAgICAgIGNtLmRpc3BsYXkuaW5wdXQuc2V0VW5lZGl0YWJsZShsaW5lVmlldy5iYWNrZ3JvdW5kKTtcbiAgICB9XG4gIH1cblxuICAvLyBXcmFwcGVyIGFyb3VuZCBidWlsZExpbmVDb250ZW50IHdoaWNoIHdpbGwgcmV1c2UgdGhlIHN0cnVjdHVyZVxuICAvLyBpbiBkaXNwbGF5LmV4dGVybmFsTWVhc3VyZWQgd2hlbiBwb3NzaWJsZS5cbiAgZnVuY3Rpb24gZ2V0TGluZUNvbnRlbnQoY20sIGxpbmVWaWV3KSB7XG4gICAgdmFyIGV4dCA9IGNtLmRpc3BsYXkuZXh0ZXJuYWxNZWFzdXJlZDtcbiAgICBpZiAoZXh0ICYmIGV4dC5saW5lID09IGxpbmVWaWV3LmxpbmUpIHtcbiAgICAgIGNtLmRpc3BsYXkuZXh0ZXJuYWxNZWFzdXJlZCA9IG51bGw7XG4gICAgICBsaW5lVmlldy5tZWFzdXJlID0gZXh0Lm1lYXN1cmU7XG4gICAgICByZXR1cm4gZXh0LmJ1aWx0XG4gICAgfVxuICAgIHJldHVybiBidWlsZExpbmVDb250ZW50KGNtLCBsaW5lVmlldylcbiAgfVxuXG4gIC8vIFJlZHJhdyB0aGUgbGluZSdzIHRleHQuIEludGVyYWN0cyB3aXRoIHRoZSBiYWNrZ3JvdW5kIGFuZCB0ZXh0XG4gIC8vIGNsYXNzZXMgYmVjYXVzZSB0aGUgbW9kZSBtYXkgb3V0cHV0IHRva2VucyB0aGF0IGluZmx1ZW5jZSB0aGVzZVxuICAvLyBjbGFzc2VzLlxuICBmdW5jdGlvbiB1cGRhdGVMaW5lVGV4dChjbSwgbGluZVZpZXcpIHtcbiAgICB2YXIgY2xzID0gbGluZVZpZXcudGV4dC5jbGFzc05hbWU7XG4gICAgdmFyIGJ1aWx0ID0gZ2V0TGluZUNvbnRlbnQoY20sIGxpbmVWaWV3KTtcbiAgICBpZiAobGluZVZpZXcudGV4dCA9PSBsaW5lVmlldy5ub2RlKSB7IGxpbmVWaWV3Lm5vZGUgPSBidWlsdC5wcmU7IH1cbiAgICBsaW5lVmlldy50ZXh0LnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKGJ1aWx0LnByZSwgbGluZVZpZXcudGV4dCk7XG4gICAgbGluZVZpZXcudGV4dCA9IGJ1aWx0LnByZTtcbiAgICBpZiAoYnVpbHQuYmdDbGFzcyAhPSBsaW5lVmlldy5iZ0NsYXNzIHx8IGJ1aWx0LnRleHRDbGFzcyAhPSBsaW5lVmlldy50ZXh0Q2xhc3MpIHtcbiAgICAgIGxpbmVWaWV3LmJnQ2xhc3MgPSBidWlsdC5iZ0NsYXNzO1xuICAgICAgbGluZVZpZXcudGV4dENsYXNzID0gYnVpbHQudGV4dENsYXNzO1xuICAgICAgdXBkYXRlTGluZUNsYXNzZXMoY20sIGxpbmVWaWV3KTtcbiAgICB9IGVsc2UgaWYgKGNscykge1xuICAgICAgbGluZVZpZXcudGV4dC5jbGFzc05hbWUgPSBjbHM7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gdXBkYXRlTGluZUNsYXNzZXMoY20sIGxpbmVWaWV3KSB7XG4gICAgdXBkYXRlTGluZUJhY2tncm91bmQoY20sIGxpbmVWaWV3KTtcbiAgICBpZiAobGluZVZpZXcubGluZS53cmFwQ2xhc3MpXG4gICAgICB7IGVuc3VyZUxpbmVXcmFwcGVkKGxpbmVWaWV3KS5jbGFzc05hbWUgPSBsaW5lVmlldy5saW5lLndyYXBDbGFzczsgfVxuICAgIGVsc2UgaWYgKGxpbmVWaWV3Lm5vZGUgIT0gbGluZVZpZXcudGV4dClcbiAgICAgIHsgbGluZVZpZXcubm9kZS5jbGFzc05hbWUgPSBcIlwiOyB9XG4gICAgdmFyIHRleHRDbGFzcyA9IGxpbmVWaWV3LnRleHRDbGFzcyA/IGxpbmVWaWV3LnRleHRDbGFzcyArIFwiIFwiICsgKGxpbmVWaWV3LmxpbmUudGV4dENsYXNzIHx8IFwiXCIpIDogbGluZVZpZXcubGluZS50ZXh0Q2xhc3M7XG4gICAgbGluZVZpZXcudGV4dC5jbGFzc05hbWUgPSB0ZXh0Q2xhc3MgfHwgXCJcIjtcbiAgfVxuXG4gIGZ1bmN0aW9uIHVwZGF0ZUxpbmVHdXR0ZXIoY20sIGxpbmVWaWV3LCBsaW5lTiwgZGltcykge1xuICAgIGlmIChsaW5lVmlldy5ndXR0ZXIpIHtcbiAgICAgIGxpbmVWaWV3Lm5vZGUucmVtb3ZlQ2hpbGQobGluZVZpZXcuZ3V0dGVyKTtcbiAgICAgIGxpbmVWaWV3Lmd1dHRlciA9IG51bGw7XG4gICAgfVxuICAgIGlmIChsaW5lVmlldy5ndXR0ZXJCYWNrZ3JvdW5kKSB7XG4gICAgICBsaW5lVmlldy5ub2RlLnJlbW92ZUNoaWxkKGxpbmVWaWV3Lmd1dHRlckJhY2tncm91bmQpO1xuICAgICAgbGluZVZpZXcuZ3V0dGVyQmFja2dyb3VuZCA9IG51bGw7XG4gICAgfVxuICAgIGlmIChsaW5lVmlldy5saW5lLmd1dHRlckNsYXNzKSB7XG4gICAgICB2YXIgd3JhcCA9IGVuc3VyZUxpbmVXcmFwcGVkKGxpbmVWaWV3KTtcbiAgICAgIGxpbmVWaWV3Lmd1dHRlckJhY2tncm91bmQgPSBlbHQoXCJkaXZcIiwgbnVsbCwgXCJDb2RlTWlycm9yLWd1dHRlci1iYWNrZ3JvdW5kIFwiICsgbGluZVZpZXcubGluZS5ndXR0ZXJDbGFzcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKFwibGVmdDogXCIgKyAoY20ub3B0aW9ucy5maXhlZEd1dHRlciA/IGRpbXMuZml4ZWRQb3MgOiAtZGltcy5ndXR0ZXJUb3RhbFdpZHRoKSArIFwicHg7IHdpZHRoOiBcIiArIChkaW1zLmd1dHRlclRvdGFsV2lkdGgpICsgXCJweFwiKSk7XG4gICAgICBjbS5kaXNwbGF5LmlucHV0LnNldFVuZWRpdGFibGUobGluZVZpZXcuZ3V0dGVyQmFja2dyb3VuZCk7XG4gICAgICB3cmFwLmluc2VydEJlZm9yZShsaW5lVmlldy5ndXR0ZXJCYWNrZ3JvdW5kLCBsaW5lVmlldy50ZXh0KTtcbiAgICB9XG4gICAgdmFyIG1hcmtlcnMgPSBsaW5lVmlldy5saW5lLmd1dHRlck1hcmtlcnM7XG4gICAgaWYgKGNtLm9wdGlvbnMubGluZU51bWJlcnMgfHwgbWFya2Vycykge1xuICAgICAgdmFyIHdyYXAkMSA9IGVuc3VyZUxpbmVXcmFwcGVkKGxpbmVWaWV3KTtcbiAgICAgIHZhciBndXR0ZXJXcmFwID0gbGluZVZpZXcuZ3V0dGVyID0gZWx0KFwiZGl2XCIsIG51bGwsIFwiQ29kZU1pcnJvci1ndXR0ZXItd3JhcHBlclwiLCAoXCJsZWZ0OiBcIiArIChjbS5vcHRpb25zLmZpeGVkR3V0dGVyID8gZGltcy5maXhlZFBvcyA6IC1kaW1zLmd1dHRlclRvdGFsV2lkdGgpICsgXCJweFwiKSk7XG4gICAgICBndXR0ZXJXcmFwLnNldEF0dHJpYnV0ZShcImFyaWEtaGlkZGVuXCIsIFwidHJ1ZVwiKTtcbiAgICAgIGNtLmRpc3BsYXkuaW5wdXQuc2V0VW5lZGl0YWJsZShndXR0ZXJXcmFwKTtcbiAgICAgIHdyYXAkMS5pbnNlcnRCZWZvcmUoZ3V0dGVyV3JhcCwgbGluZVZpZXcudGV4dCk7XG4gICAgICBpZiAobGluZVZpZXcubGluZS5ndXR0ZXJDbGFzcylcbiAgICAgICAgeyBndXR0ZXJXcmFwLmNsYXNzTmFtZSArPSBcIiBcIiArIGxpbmVWaWV3LmxpbmUuZ3V0dGVyQ2xhc3M7IH1cbiAgICAgIGlmIChjbS5vcHRpb25zLmxpbmVOdW1iZXJzICYmICghbWFya2VycyB8fCAhbWFya2Vyc1tcIkNvZGVNaXJyb3ItbGluZW51bWJlcnNcIl0pKVxuICAgICAgICB7IGxpbmVWaWV3LmxpbmVOdW1iZXIgPSBndXR0ZXJXcmFwLmFwcGVuZENoaWxkKFxuICAgICAgICAgIGVsdChcImRpdlwiLCBsaW5lTnVtYmVyRm9yKGNtLm9wdGlvbnMsIGxpbmVOKSxcbiAgICAgICAgICAgICAgXCJDb2RlTWlycm9yLWxpbmVudW1iZXIgQ29kZU1pcnJvci1ndXR0ZXItZWx0XCIsXG4gICAgICAgICAgICAgIChcImxlZnQ6IFwiICsgKGRpbXMuZ3V0dGVyTGVmdFtcIkNvZGVNaXJyb3ItbGluZW51bWJlcnNcIl0pICsgXCJweDsgd2lkdGg6IFwiICsgKGNtLmRpc3BsYXkubGluZU51bUlubmVyV2lkdGgpICsgXCJweFwiKSkpOyB9XG4gICAgICBpZiAobWFya2VycykgeyBmb3IgKHZhciBrID0gMDsgayA8IGNtLmRpc3BsYXkuZ3V0dGVyU3BlY3MubGVuZ3RoOyArK2spIHtcbiAgICAgICAgdmFyIGlkID0gY20uZGlzcGxheS5ndXR0ZXJTcGVjc1trXS5jbGFzc05hbWUsIGZvdW5kID0gbWFya2Vycy5oYXNPd25Qcm9wZXJ0eShpZCkgJiYgbWFya2Vyc1tpZF07XG4gICAgICAgIGlmIChmb3VuZClcbiAgICAgICAgICB7IGd1dHRlcldyYXAuYXBwZW5kQ2hpbGQoZWx0KFwiZGl2XCIsIFtmb3VuZF0sIFwiQ29kZU1pcnJvci1ndXR0ZXItZWx0XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKFwibGVmdDogXCIgKyAoZGltcy5ndXR0ZXJMZWZ0W2lkXSkgKyBcInB4OyB3aWR0aDogXCIgKyAoZGltcy5ndXR0ZXJXaWR0aFtpZF0pICsgXCJweFwiKSkpOyB9XG4gICAgICB9IH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiB1cGRhdGVMaW5lV2lkZ2V0cyhjbSwgbGluZVZpZXcsIGRpbXMpIHtcbiAgICBpZiAobGluZVZpZXcuYWxpZ25hYmxlKSB7IGxpbmVWaWV3LmFsaWduYWJsZSA9IG51bGw7IH1cbiAgICB2YXIgaXNXaWRnZXQgPSBjbGFzc1Rlc3QoXCJDb2RlTWlycm9yLWxpbmV3aWRnZXRcIik7XG4gICAgZm9yICh2YXIgbm9kZSA9IGxpbmVWaWV3Lm5vZGUuZmlyc3RDaGlsZCwgbmV4dCA9ICh2b2lkIDApOyBub2RlOyBub2RlID0gbmV4dCkge1xuICAgICAgbmV4dCA9IG5vZGUubmV4dFNpYmxpbmc7XG4gICAgICBpZiAoaXNXaWRnZXQudGVzdChub2RlLmNsYXNzTmFtZSkpIHsgbGluZVZpZXcubm9kZS5yZW1vdmVDaGlsZChub2RlKTsgfVxuICAgIH1cbiAgICBpbnNlcnRMaW5lV2lkZ2V0cyhjbSwgbGluZVZpZXcsIGRpbXMpO1xuICB9XG5cbiAgLy8gQnVpbGQgYSBsaW5lJ3MgRE9NIHJlcHJlc2VudGF0aW9uIGZyb20gc2NyYXRjaFxuICBmdW5jdGlvbiBidWlsZExpbmVFbGVtZW50KGNtLCBsaW5lVmlldywgbGluZU4sIGRpbXMpIHtcbiAgICB2YXIgYnVpbHQgPSBnZXRMaW5lQ29udGVudChjbSwgbGluZVZpZXcpO1xuICAgIGxpbmVWaWV3LnRleHQgPSBsaW5lVmlldy5ub2RlID0gYnVpbHQucHJlO1xuICAgIGlmIChidWlsdC5iZ0NsYXNzKSB7IGxpbmVWaWV3LmJnQ2xhc3MgPSBidWlsdC5iZ0NsYXNzOyB9XG4gICAgaWYgKGJ1aWx0LnRleHRDbGFzcykgeyBsaW5lVmlldy50ZXh0Q2xhc3MgPSBidWlsdC50ZXh0Q2xhc3M7IH1cblxuICAgIHVwZGF0ZUxpbmVDbGFzc2VzKGNtLCBsaW5lVmlldyk7XG4gICAgdXBkYXRlTGluZUd1dHRlcihjbSwgbGluZVZpZXcsIGxpbmVOLCBkaW1zKTtcbiAgICBpbnNlcnRMaW5lV2lkZ2V0cyhjbSwgbGluZVZpZXcsIGRpbXMpO1xuICAgIHJldHVybiBsaW5lVmlldy5ub2RlXG4gIH1cblxuICAvLyBBIGxpbmVWaWV3IG1heSBjb250YWluIG11bHRpcGxlIGxvZ2ljYWwgbGluZXMgKHdoZW4gbWVyZ2VkIGJ5XG4gIC8vIGNvbGxhcHNlZCBzcGFucykuIFRoZSB3aWRnZXRzIGZvciBhbGwgb2YgdGhlbSBuZWVkIHRvIGJlIGRyYXduLlxuICBmdW5jdGlvbiBpbnNlcnRMaW5lV2lkZ2V0cyhjbSwgbGluZVZpZXcsIGRpbXMpIHtcbiAgICBpbnNlcnRMaW5lV2lkZ2V0c0ZvcihjbSwgbGluZVZpZXcubGluZSwgbGluZVZpZXcsIGRpbXMsIHRydWUpO1xuICAgIGlmIChsaW5lVmlldy5yZXN0KSB7IGZvciAodmFyIGkgPSAwOyBpIDwgbGluZVZpZXcucmVzdC5sZW5ndGg7IGkrKylcbiAgICAgIHsgaW5zZXJ0TGluZVdpZGdldHNGb3IoY20sIGxpbmVWaWV3LnJlc3RbaV0sIGxpbmVWaWV3LCBkaW1zLCBmYWxzZSk7IH0gfVxuICB9XG5cbiAgZnVuY3Rpb24gaW5zZXJ0TGluZVdpZGdldHNGb3IoY20sIGxpbmUsIGxpbmVWaWV3LCBkaW1zLCBhbGxvd0Fib3ZlKSB7XG4gICAgaWYgKCFsaW5lLndpZGdldHMpIHsgcmV0dXJuIH1cbiAgICB2YXIgd3JhcCA9IGVuc3VyZUxpbmVXcmFwcGVkKGxpbmVWaWV3KTtcbiAgICBmb3IgKHZhciBpID0gMCwgd3MgPSBsaW5lLndpZGdldHM7IGkgPCB3cy5sZW5ndGg7ICsraSkge1xuICAgICAgdmFyIHdpZGdldCA9IHdzW2ldLCBub2RlID0gZWx0KFwiZGl2XCIsIFt3aWRnZXQubm9kZV0sIFwiQ29kZU1pcnJvci1saW5ld2lkZ2V0XCIgKyAod2lkZ2V0LmNsYXNzTmFtZSA/IFwiIFwiICsgd2lkZ2V0LmNsYXNzTmFtZSA6IFwiXCIpKTtcbiAgICAgIGlmICghd2lkZ2V0LmhhbmRsZU1vdXNlRXZlbnRzKSB7IG5vZGUuc2V0QXR0cmlidXRlKFwiY20taWdub3JlLWV2ZW50c1wiLCBcInRydWVcIik7IH1cbiAgICAgIHBvc2l0aW9uTGluZVdpZGdldCh3aWRnZXQsIG5vZGUsIGxpbmVWaWV3LCBkaW1zKTtcbiAgICAgIGNtLmRpc3BsYXkuaW5wdXQuc2V0VW5lZGl0YWJsZShub2RlKTtcbiAgICAgIGlmIChhbGxvd0Fib3ZlICYmIHdpZGdldC5hYm92ZSlcbiAgICAgICAgeyB3cmFwLmluc2VydEJlZm9yZShub2RlLCBsaW5lVmlldy5ndXR0ZXIgfHwgbGluZVZpZXcudGV4dCk7IH1cbiAgICAgIGVsc2VcbiAgICAgICAgeyB3cmFwLmFwcGVuZENoaWxkKG5vZGUpOyB9XG4gICAgICBzaWduYWxMYXRlcih3aWRnZXQsIFwicmVkcmF3XCIpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHBvc2l0aW9uTGluZVdpZGdldCh3aWRnZXQsIG5vZGUsIGxpbmVWaWV3LCBkaW1zKSB7XG4gICAgaWYgKHdpZGdldC5ub0hTY3JvbGwpIHtcbiAgKGxpbmVWaWV3LmFsaWduYWJsZSB8fCAobGluZVZpZXcuYWxpZ25hYmxlID0gW10pKS5wdXNoKG5vZGUpO1xuICAgICAgdmFyIHdpZHRoID0gZGltcy53cmFwcGVyV2lkdGg7XG4gICAgICBub2RlLnN0eWxlLmxlZnQgPSBkaW1zLmZpeGVkUG9zICsgXCJweFwiO1xuICAgICAgaWYgKCF3aWRnZXQuY292ZXJHdXR0ZXIpIHtcbiAgICAgICAgd2lkdGggLT0gZGltcy5ndXR0ZXJUb3RhbFdpZHRoO1xuICAgICAgICBub2RlLnN0eWxlLnBhZGRpbmdMZWZ0ID0gZGltcy5ndXR0ZXJUb3RhbFdpZHRoICsgXCJweFwiO1xuICAgICAgfVxuICAgICAgbm9kZS5zdHlsZS53aWR0aCA9IHdpZHRoICsgXCJweFwiO1xuICAgIH1cbiAgICBpZiAod2lkZ2V0LmNvdmVyR3V0dGVyKSB7XG4gICAgICBub2RlLnN0eWxlLnpJbmRleCA9IDU7XG4gICAgICBub2RlLnN0eWxlLnBvc2l0aW9uID0gXCJyZWxhdGl2ZVwiO1xuICAgICAgaWYgKCF3aWRnZXQubm9IU2Nyb2xsKSB7IG5vZGUuc3R5bGUubWFyZ2luTGVmdCA9IC1kaW1zLmd1dHRlclRvdGFsV2lkdGggKyBcInB4XCI7IH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiB3aWRnZXRIZWlnaHQod2lkZ2V0KSB7XG4gICAgaWYgKHdpZGdldC5oZWlnaHQgIT0gbnVsbCkgeyByZXR1cm4gd2lkZ2V0LmhlaWdodCB9XG4gICAgdmFyIGNtID0gd2lkZ2V0LmRvYy5jbTtcbiAgICBpZiAoIWNtKSB7IHJldHVybiAwIH1cbiAgICBpZiAoIWNvbnRhaW5zKGRvY3VtZW50LmJvZHksIHdpZGdldC5ub2RlKSkge1xuICAgICAgdmFyIHBhcmVudFN0eWxlID0gXCJwb3NpdGlvbjogcmVsYXRpdmU7XCI7XG4gICAgICBpZiAod2lkZ2V0LmNvdmVyR3V0dGVyKVxuICAgICAgICB7IHBhcmVudFN0eWxlICs9IFwibWFyZ2luLWxlZnQ6IC1cIiArIGNtLmRpc3BsYXkuZ3V0dGVycy5vZmZzZXRXaWR0aCArIFwicHg7XCI7IH1cbiAgICAgIGlmICh3aWRnZXQubm9IU2Nyb2xsKVxuICAgICAgICB7IHBhcmVudFN0eWxlICs9IFwid2lkdGg6IFwiICsgY20uZGlzcGxheS53cmFwcGVyLmNsaWVudFdpZHRoICsgXCJweDtcIjsgfVxuICAgICAgcmVtb3ZlQ2hpbGRyZW5BbmRBZGQoY20uZGlzcGxheS5tZWFzdXJlLCBlbHQoXCJkaXZcIiwgW3dpZGdldC5ub2RlXSwgbnVsbCwgcGFyZW50U3R5bGUpKTtcbiAgICB9XG4gICAgcmV0dXJuIHdpZGdldC5oZWlnaHQgPSB3aWRnZXQubm9kZS5wYXJlbnROb2RlLm9mZnNldEhlaWdodFxuICB9XG5cbiAgLy8gUmV0dXJuIHRydWUgd2hlbiB0aGUgZ2l2ZW4gbW91c2UgZXZlbnQgaGFwcGVuZWQgaW4gYSB3aWRnZXRcbiAgZnVuY3Rpb24gZXZlbnRJbldpZGdldChkaXNwbGF5LCBlKSB7XG4gICAgZm9yICh2YXIgbiA9IGVfdGFyZ2V0KGUpOyBuICE9IGRpc3BsYXkud3JhcHBlcjsgbiA9IG4ucGFyZW50Tm9kZSkge1xuICAgICAgaWYgKCFuIHx8IChuLm5vZGVUeXBlID09IDEgJiYgbi5nZXRBdHRyaWJ1dGUoXCJjbS1pZ25vcmUtZXZlbnRzXCIpID09IFwidHJ1ZVwiKSB8fFxuICAgICAgICAgIChuLnBhcmVudE5vZGUgPT0gZGlzcGxheS5zaXplciAmJiBuICE9IGRpc3BsYXkubW92ZXIpKVxuICAgICAgICB7IHJldHVybiB0cnVlIH1cbiAgICB9XG4gIH1cblxuICAvLyBQT1NJVElPTiBNRUFTVVJFTUVOVFxuXG4gIGZ1bmN0aW9uIHBhZGRpbmdUb3AoZGlzcGxheSkge3JldHVybiBkaXNwbGF5LmxpbmVTcGFjZS5vZmZzZXRUb3B9XG4gIGZ1bmN0aW9uIHBhZGRpbmdWZXJ0KGRpc3BsYXkpIHtyZXR1cm4gZGlzcGxheS5tb3Zlci5vZmZzZXRIZWlnaHQgLSBkaXNwbGF5LmxpbmVTcGFjZS5vZmZzZXRIZWlnaHR9XG4gIGZ1bmN0aW9uIHBhZGRpbmdIKGRpc3BsYXkpIHtcbiAgICBpZiAoZGlzcGxheS5jYWNoZWRQYWRkaW5nSCkgeyByZXR1cm4gZGlzcGxheS5jYWNoZWRQYWRkaW5nSCB9XG4gICAgdmFyIGUgPSByZW1vdmVDaGlsZHJlbkFuZEFkZChkaXNwbGF5Lm1lYXN1cmUsIGVsdChcInByZVwiLCBcInhcIiwgXCJDb2RlTWlycm9yLWxpbmUtbGlrZVwiKSk7XG4gICAgdmFyIHN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUgPyB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlKSA6IGUuY3VycmVudFN0eWxlO1xuICAgIHZhciBkYXRhID0ge2xlZnQ6IHBhcnNlSW50KHN0eWxlLnBhZGRpbmdMZWZ0KSwgcmlnaHQ6IHBhcnNlSW50KHN0eWxlLnBhZGRpbmdSaWdodCl9O1xuICAgIGlmICghaXNOYU4oZGF0YS5sZWZ0KSAmJiAhaXNOYU4oZGF0YS5yaWdodCkpIHsgZGlzcGxheS5jYWNoZWRQYWRkaW5nSCA9IGRhdGE7IH1cbiAgICByZXR1cm4gZGF0YVxuICB9XG5cbiAgZnVuY3Rpb24gc2Nyb2xsR2FwKGNtKSB7IHJldHVybiBzY3JvbGxlckdhcCAtIGNtLmRpc3BsYXkubmF0aXZlQmFyV2lkdGggfVxuICBmdW5jdGlvbiBkaXNwbGF5V2lkdGgoY20pIHtcbiAgICByZXR1cm4gY20uZGlzcGxheS5zY3JvbGxlci5jbGllbnRXaWR0aCAtIHNjcm9sbEdhcChjbSkgLSBjbS5kaXNwbGF5LmJhcldpZHRoXG4gIH1cbiAgZnVuY3Rpb24gZGlzcGxheUhlaWdodChjbSkge1xuICAgIHJldHVybiBjbS5kaXNwbGF5LnNjcm9sbGVyLmNsaWVudEhlaWdodCAtIHNjcm9sbEdhcChjbSkgLSBjbS5kaXNwbGF5LmJhckhlaWdodFxuICB9XG5cbiAgLy8gRW5zdXJlIHRoZSBsaW5lVmlldy53cmFwcGluZy5oZWlnaHRzIGFycmF5IGlzIHBvcHVsYXRlZC4gVGhpcyBpc1xuICAvLyBhbiBhcnJheSBvZiBib3R0b20gb2Zmc2V0cyBmb3IgdGhlIGxpbmVzIHRoYXQgbWFrZSB1cCBhIGRyYXduXG4gIC8vIGxpbmUuIFdoZW4gbGluZVdyYXBwaW5nIGlzIG9uLCB0aGVyZSBtaWdodCBiZSBtb3JlIHRoYW4gb25lXG4gIC8vIGhlaWdodC5cbiAgZnVuY3Rpb24gZW5zdXJlTGluZUhlaWdodHMoY20sIGxpbmVWaWV3LCByZWN0KSB7XG4gICAgdmFyIHdyYXBwaW5nID0gY20ub3B0aW9ucy5saW5lV3JhcHBpbmc7XG4gICAgdmFyIGN1cldpZHRoID0gd3JhcHBpbmcgJiYgZGlzcGxheVdpZHRoKGNtKTtcbiAgICBpZiAoIWxpbmVWaWV3Lm1lYXN1cmUuaGVpZ2h0cyB8fCB3cmFwcGluZyAmJiBsaW5lVmlldy5tZWFzdXJlLndpZHRoICE9IGN1cldpZHRoKSB7XG4gICAgICB2YXIgaGVpZ2h0cyA9IGxpbmVWaWV3Lm1lYXN1cmUuaGVpZ2h0cyA9IFtdO1xuICAgICAgaWYgKHdyYXBwaW5nKSB7XG4gICAgICAgIGxpbmVWaWV3Lm1lYXN1cmUud2lkdGggPSBjdXJXaWR0aDtcbiAgICAgICAgdmFyIHJlY3RzID0gbGluZVZpZXcudGV4dC5maXJzdENoaWxkLmdldENsaWVudFJlY3RzKCk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVjdHMubGVuZ3RoIC0gMTsgaSsrKSB7XG4gICAgICAgICAgdmFyIGN1ciA9IHJlY3RzW2ldLCBuZXh0ID0gcmVjdHNbaSArIDFdO1xuICAgICAgICAgIGlmIChNYXRoLmFicyhjdXIuYm90dG9tIC0gbmV4dC5ib3R0b20pID4gMilcbiAgICAgICAgICAgIHsgaGVpZ2h0cy5wdXNoKChjdXIuYm90dG9tICsgbmV4dC50b3ApIC8gMiAtIHJlY3QudG9wKTsgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBoZWlnaHRzLnB1c2gocmVjdC5ib3R0b20gLSByZWN0LnRvcCk7XG4gICAgfVxuICB9XG5cbiAgLy8gRmluZCBhIGxpbmUgbWFwIChtYXBwaW5nIGNoYXJhY3RlciBvZmZzZXRzIHRvIHRleHQgbm9kZXMpIGFuZCBhXG4gIC8vIG1lYXN1cmVtZW50IGNhY2hlIGZvciB0aGUgZ2l2ZW4gbGluZSBudW1iZXIuIChBIGxpbmUgdmlldyBtaWdodFxuICAvLyBjb250YWluIG11bHRpcGxlIGxpbmVzIHdoZW4gY29sbGFwc2VkIHJhbmdlcyBhcmUgcHJlc2VudC4pXG4gIGZ1bmN0aW9uIG1hcEZyb21MaW5lVmlldyhsaW5lVmlldywgbGluZSwgbGluZU4pIHtcbiAgICBpZiAobGluZVZpZXcubGluZSA9PSBsaW5lKVxuICAgICAgeyByZXR1cm4ge21hcDogbGluZVZpZXcubWVhc3VyZS5tYXAsIGNhY2hlOiBsaW5lVmlldy5tZWFzdXJlLmNhY2hlfSB9XG4gICAgaWYgKGxpbmVWaWV3LnJlc3QpIHtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGluZVZpZXcucmVzdC5sZW5ndGg7IGkrKylcbiAgICAgICAgeyBpZiAobGluZVZpZXcucmVzdFtpXSA9PSBsaW5lKVxuICAgICAgICAgIHsgcmV0dXJuIHttYXA6IGxpbmVWaWV3Lm1lYXN1cmUubWFwc1tpXSwgY2FjaGU6IGxpbmVWaWV3Lm1lYXN1cmUuY2FjaGVzW2ldfSB9IH1cbiAgICAgIGZvciAodmFyIGkkMSA9IDA7IGkkMSA8IGxpbmVWaWV3LnJlc3QubGVuZ3RoOyBpJDErKylcbiAgICAgICAgeyBpZiAobGluZU5vKGxpbmVWaWV3LnJlc3RbaSQxXSkgPiBsaW5lTilcbiAgICAgICAgICB7IHJldHVybiB7bWFwOiBsaW5lVmlldy5tZWFzdXJlLm1hcHNbaSQxXSwgY2FjaGU6IGxpbmVWaWV3Lm1lYXN1cmUuY2FjaGVzW2kkMV0sIGJlZm9yZTogdHJ1ZX0gfSB9XG4gICAgfVxuICB9XG5cbiAgLy8gUmVuZGVyIGEgbGluZSBpbnRvIHRoZSBoaWRkZW4gbm9kZSBkaXNwbGF5LmV4dGVybmFsTWVhc3VyZWQuIFVzZWRcbiAgLy8gd2hlbiBtZWFzdXJlbWVudCBpcyBuZWVkZWQgZm9yIGEgbGluZSB0aGF0J3Mgbm90IGluIHRoZSB2aWV3cG9ydC5cbiAgZnVuY3Rpb24gdXBkYXRlRXh0ZXJuYWxNZWFzdXJlbWVudChjbSwgbGluZSkge1xuICAgIGxpbmUgPSB2aXN1YWxMaW5lKGxpbmUpO1xuICAgIHZhciBsaW5lTiA9IGxpbmVObyhsaW5lKTtcbiAgICB2YXIgdmlldyA9IGNtLmRpc3BsYXkuZXh0ZXJuYWxNZWFzdXJlZCA9IG5ldyBMaW5lVmlldyhjbS5kb2MsIGxpbmUsIGxpbmVOKTtcbiAgICB2aWV3LmxpbmVOID0gbGluZU47XG4gICAgdmFyIGJ1aWx0ID0gdmlldy5idWlsdCA9IGJ1aWxkTGluZUNvbnRlbnQoY20sIHZpZXcpO1xuICAgIHZpZXcudGV4dCA9IGJ1aWx0LnByZTtcbiAgICByZW1vdmVDaGlsZHJlbkFuZEFkZChjbS5kaXNwbGF5LmxpbmVNZWFzdXJlLCBidWlsdC5wcmUpO1xuICAgIHJldHVybiB2aWV3XG4gIH1cblxuICAvLyBHZXQgYSB7dG9wLCBib3R0b20sIGxlZnQsIHJpZ2h0fSBib3ggKGluIGxpbmUtbG9jYWwgY29vcmRpbmF0ZXMpXG4gIC8vIGZvciBhIGdpdmVuIGNoYXJhY3Rlci5cbiAgZnVuY3Rpb24gbWVhc3VyZUNoYXIoY20sIGxpbmUsIGNoLCBiaWFzKSB7XG4gICAgcmV0dXJuIG1lYXN1cmVDaGFyUHJlcGFyZWQoY20sIHByZXBhcmVNZWFzdXJlRm9yTGluZShjbSwgbGluZSksIGNoLCBiaWFzKVxuICB9XG5cbiAgLy8gRmluZCBhIGxpbmUgdmlldyB0aGF0IGNvcnJlc3BvbmRzIHRvIHRoZSBnaXZlbiBsaW5lIG51bWJlci5cbiAgZnVuY3Rpb24gZmluZFZpZXdGb3JMaW5lKGNtLCBsaW5lTikge1xuICAgIGlmIChsaW5lTiA+PSBjbS5kaXNwbGF5LnZpZXdGcm9tICYmIGxpbmVOIDwgY20uZGlzcGxheS52aWV3VG8pXG4gICAgICB7IHJldHVybiBjbS5kaXNwbGF5LnZpZXdbZmluZFZpZXdJbmRleChjbSwgbGluZU4pXSB9XG4gICAgdmFyIGV4dCA9IGNtLmRpc3BsYXkuZXh0ZXJuYWxNZWFzdXJlZDtcbiAgICBpZiAoZXh0ICYmIGxpbmVOID49IGV4dC5saW5lTiAmJiBsaW5lTiA8IGV4dC5saW5lTiArIGV4dC5zaXplKVxuICAgICAgeyByZXR1cm4gZXh0IH1cbiAgfVxuXG4gIC8vIE1lYXN1cmVtZW50IGNhbiBiZSBzcGxpdCBpbiB0d28gc3RlcHMsIHRoZSBzZXQtdXAgd29yayB0aGF0XG4gIC8vIGFwcGxpZXMgdG8gdGhlIHdob2xlIGxpbmUsIGFuZCB0aGUgbWVhc3VyZW1lbnQgb2YgdGhlIGFjdHVhbFxuICAvLyBjaGFyYWN0ZXIuIEZ1bmN0aW9ucyBsaWtlIGNvb3Jkc0NoYXIsIHRoYXQgbmVlZCB0byBkbyBhIGxvdCBvZlxuICAvLyBtZWFzdXJlbWVudHMgaW4gYSByb3csIGNhbiB0aHVzIGVuc3VyZSB0aGF0IHRoZSBzZXQtdXAgd29yayBpc1xuICAvLyBvbmx5IGRvbmUgb25jZS5cbiAgZnVuY3Rpb24gcHJlcGFyZU1lYXN1cmVGb3JMaW5lKGNtLCBsaW5lKSB7XG4gICAgdmFyIGxpbmVOID0gbGluZU5vKGxpbmUpO1xuICAgIHZhciB2aWV3ID0gZmluZFZpZXdGb3JMaW5lKGNtLCBsaW5lTik7XG4gICAgaWYgKHZpZXcgJiYgIXZpZXcudGV4dCkge1xuICAgICAgdmlldyA9IG51bGw7XG4gICAgfSBlbHNlIGlmICh2aWV3ICYmIHZpZXcuY2hhbmdlcykge1xuICAgICAgdXBkYXRlTGluZUZvckNoYW5nZXMoY20sIHZpZXcsIGxpbmVOLCBnZXREaW1lbnNpb25zKGNtKSk7XG4gICAgICBjbS5jdXJPcC5mb3JjZVVwZGF0ZSA9IHRydWU7XG4gICAgfVxuICAgIGlmICghdmlldylcbiAgICAgIHsgdmlldyA9IHVwZGF0ZUV4dGVybmFsTWVhc3VyZW1lbnQoY20sIGxpbmUpOyB9XG5cbiAgICB2YXIgaW5mbyA9IG1hcEZyb21MaW5lVmlldyh2aWV3LCBsaW5lLCBsaW5lTik7XG4gICAgcmV0dXJuIHtcbiAgICAgIGxpbmU6IGxpbmUsIHZpZXc6IHZpZXcsIHJlY3Q6IG51bGwsXG4gICAgICBtYXA6IGluZm8ubWFwLCBjYWNoZTogaW5mby5jYWNoZSwgYmVmb3JlOiBpbmZvLmJlZm9yZSxcbiAgICAgIGhhc0hlaWdodHM6IGZhbHNlXG4gICAgfVxuICB9XG5cbiAgLy8gR2l2ZW4gYSBwcmVwYXJlZCBtZWFzdXJlbWVudCBvYmplY3QsIG1lYXN1cmVzIHRoZSBwb3NpdGlvbiBvZiBhblxuICAvLyBhY3R1YWwgY2hhcmFjdGVyIChvciBmZXRjaGVzIGl0IGZyb20gdGhlIGNhY2hlKS5cbiAgZnVuY3Rpb24gbWVhc3VyZUNoYXJQcmVwYXJlZChjbSwgcHJlcGFyZWQsIGNoLCBiaWFzLCB2YXJIZWlnaHQpIHtcbiAgICBpZiAocHJlcGFyZWQuYmVmb3JlKSB7IGNoID0gLTE7IH1cbiAgICB2YXIga2V5ID0gY2ggKyAoYmlhcyB8fCBcIlwiKSwgZm91bmQ7XG4gICAgaWYgKHByZXBhcmVkLmNhY2hlLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgIGZvdW5kID0gcHJlcGFyZWQuY2FjaGVba2V5XTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKCFwcmVwYXJlZC5yZWN0KVxuICAgICAgICB7IHByZXBhcmVkLnJlY3QgPSBwcmVwYXJlZC52aWV3LnRleHQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7IH1cbiAgICAgIGlmICghcHJlcGFyZWQuaGFzSGVpZ2h0cykge1xuICAgICAgICBlbnN1cmVMaW5lSGVpZ2h0cyhjbSwgcHJlcGFyZWQudmlldywgcHJlcGFyZWQucmVjdCk7XG4gICAgICAgIHByZXBhcmVkLmhhc0hlaWdodHMgPSB0cnVlO1xuICAgICAgfVxuICAgICAgZm91bmQgPSBtZWFzdXJlQ2hhcklubmVyKGNtLCBwcmVwYXJlZCwgY2gsIGJpYXMpO1xuICAgICAgaWYgKCFmb3VuZC5ib2d1cykgeyBwcmVwYXJlZC5jYWNoZVtrZXldID0gZm91bmQ7IH1cbiAgICB9XG4gICAgcmV0dXJuIHtsZWZ0OiBmb3VuZC5sZWZ0LCByaWdodDogZm91bmQucmlnaHQsXG4gICAgICAgICAgICB0b3A6IHZhckhlaWdodCA/IGZvdW5kLnJ0b3AgOiBmb3VuZC50b3AsXG4gICAgICAgICAgICBib3R0b206IHZhckhlaWdodCA/IGZvdW5kLnJib3R0b20gOiBmb3VuZC5ib3R0b219XG4gIH1cblxuICB2YXIgbnVsbFJlY3QgPSB7bGVmdDogMCwgcmlnaHQ6IDAsIHRvcDogMCwgYm90dG9tOiAwfTtcblxuICBmdW5jdGlvbiBub2RlQW5kT2Zmc2V0SW5MaW5lTWFwKG1hcCwgY2gsIGJpYXMpIHtcbiAgICB2YXIgbm9kZSwgc3RhcnQsIGVuZCwgY29sbGFwc2UsIG1TdGFydCwgbUVuZDtcbiAgICAvLyBGaXJzdCwgc2VhcmNoIHRoZSBsaW5lIG1hcCBmb3IgdGhlIHRleHQgbm9kZSBjb3JyZXNwb25kaW5nIHRvLFxuICAgIC8vIG9yIGNsb3Nlc3QgdG8sIHRoZSB0YXJnZXQgY2hhcmFjdGVyLlxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWFwLmxlbmd0aDsgaSArPSAzKSB7XG4gICAgICBtU3RhcnQgPSBtYXBbaV07XG4gICAgICBtRW5kID0gbWFwW2kgKyAxXTtcbiAgICAgIGlmIChjaCA8IG1TdGFydCkge1xuICAgICAgICBzdGFydCA9IDA7IGVuZCA9IDE7XG4gICAgICAgIGNvbGxhcHNlID0gXCJsZWZ0XCI7XG4gICAgICB9IGVsc2UgaWYgKGNoIDwgbUVuZCkge1xuICAgICAgICBzdGFydCA9IGNoIC0gbVN0YXJ0O1xuICAgICAgICBlbmQgPSBzdGFydCArIDE7XG4gICAgICB9IGVsc2UgaWYgKGkgPT0gbWFwLmxlbmd0aCAtIDMgfHwgY2ggPT0gbUVuZCAmJiBtYXBbaSArIDNdID4gY2gpIHtcbiAgICAgICAgZW5kID0gbUVuZCAtIG1TdGFydDtcbiAgICAgICAgc3RhcnQgPSBlbmQgLSAxO1xuICAgICAgICBpZiAoY2ggPj0gbUVuZCkgeyBjb2xsYXBzZSA9IFwicmlnaHRcIjsgfVxuICAgICAgfVxuICAgICAgaWYgKHN0YXJ0ICE9IG51bGwpIHtcbiAgICAgICAgbm9kZSA9IG1hcFtpICsgMl07XG4gICAgICAgIGlmIChtU3RhcnQgPT0gbUVuZCAmJiBiaWFzID09IChub2RlLmluc2VydExlZnQgPyBcImxlZnRcIiA6IFwicmlnaHRcIikpXG4gICAgICAgICAgeyBjb2xsYXBzZSA9IGJpYXM7IH1cbiAgICAgICAgaWYgKGJpYXMgPT0gXCJsZWZ0XCIgJiYgc3RhcnQgPT0gMClcbiAgICAgICAgICB7IHdoaWxlIChpICYmIG1hcFtpIC0gMl0gPT0gbWFwW2kgLSAzXSAmJiBtYXBbaSAtIDFdLmluc2VydExlZnQpIHtcbiAgICAgICAgICAgIG5vZGUgPSBtYXBbKGkgLT0gMykgKyAyXTtcbiAgICAgICAgICAgIGNvbGxhcHNlID0gXCJsZWZ0XCI7XG4gICAgICAgICAgfSB9XG4gICAgICAgIGlmIChiaWFzID09IFwicmlnaHRcIiAmJiBzdGFydCA9PSBtRW5kIC0gbVN0YXJ0KVxuICAgICAgICAgIHsgd2hpbGUgKGkgPCBtYXAubGVuZ3RoIC0gMyAmJiBtYXBbaSArIDNdID09IG1hcFtpICsgNF0gJiYgIW1hcFtpICsgNV0uaW5zZXJ0TGVmdCkge1xuICAgICAgICAgICAgbm9kZSA9IG1hcFsoaSArPSAzKSArIDJdO1xuICAgICAgICAgICAgY29sbGFwc2UgPSBcInJpZ2h0XCI7XG4gICAgICAgICAgfSB9XG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB7bm9kZTogbm9kZSwgc3RhcnQ6IHN0YXJ0LCBlbmQ6IGVuZCwgY29sbGFwc2U6IGNvbGxhcHNlLCBjb3ZlclN0YXJ0OiBtU3RhcnQsIGNvdmVyRW5kOiBtRW5kfVxuICB9XG5cbiAgZnVuY3Rpb24gZ2V0VXNlZnVsUmVjdChyZWN0cywgYmlhcykge1xuICAgIHZhciByZWN0ID0gbnVsbFJlY3Q7XG4gICAgaWYgKGJpYXMgPT0gXCJsZWZ0XCIpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCByZWN0cy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKChyZWN0ID0gcmVjdHNbaV0pLmxlZnQgIT0gcmVjdC5yaWdodCkgeyBicmVhayB9XG4gICAgfSB9IGVsc2UgeyBmb3IgKHZhciBpJDEgPSByZWN0cy5sZW5ndGggLSAxOyBpJDEgPj0gMDsgaSQxLS0pIHtcbiAgICAgIGlmICgocmVjdCA9IHJlY3RzW2kkMV0pLmxlZnQgIT0gcmVjdC5yaWdodCkgeyBicmVhayB9XG4gICAgfSB9XG4gICAgcmV0dXJuIHJlY3RcbiAgfVxuXG4gIGZ1bmN0aW9uIG1lYXN1cmVDaGFySW5uZXIoY20sIHByZXBhcmVkLCBjaCwgYmlhcykge1xuICAgIHZhciBwbGFjZSA9IG5vZGVBbmRPZmZzZXRJbkxpbmVNYXAocHJlcGFyZWQubWFwLCBjaCwgYmlhcyk7XG4gICAgdmFyIG5vZGUgPSBwbGFjZS5ub2RlLCBzdGFydCA9IHBsYWNlLnN0YXJ0LCBlbmQgPSBwbGFjZS5lbmQsIGNvbGxhcHNlID0gcGxhY2UuY29sbGFwc2U7XG5cbiAgICB2YXIgcmVjdDtcbiAgICBpZiAobm9kZS5ub2RlVHlwZSA9PSAzKSB7IC8vIElmIGl0IGlzIGEgdGV4dCBub2RlLCB1c2UgYSByYW5nZSB0byByZXRyaWV2ZSB0aGUgY29vcmRpbmF0ZXMuXG4gICAgICBmb3IgKHZhciBpJDEgPSAwOyBpJDEgPCA0OyBpJDErKykgeyAvLyBSZXRyeSBhIG1heGltdW0gb2YgNCB0aW1lcyB3aGVuIG5vbnNlbnNlIHJlY3RhbmdsZXMgYXJlIHJldHVybmVkXG4gICAgICAgIHdoaWxlIChzdGFydCAmJiBpc0V4dGVuZGluZ0NoYXIocHJlcGFyZWQubGluZS50ZXh0LmNoYXJBdChwbGFjZS5jb3ZlclN0YXJ0ICsgc3RhcnQpKSkgeyAtLXN0YXJ0OyB9XG4gICAgICAgIHdoaWxlIChwbGFjZS5jb3ZlclN0YXJ0ICsgZW5kIDwgcGxhY2UuY292ZXJFbmQgJiYgaXNFeHRlbmRpbmdDaGFyKHByZXBhcmVkLmxpbmUudGV4dC5jaGFyQXQocGxhY2UuY292ZXJTdGFydCArIGVuZCkpKSB7ICsrZW5kOyB9XG4gICAgICAgIGlmIChpZSAmJiBpZV92ZXJzaW9uIDwgOSAmJiBzdGFydCA9PSAwICYmIGVuZCA9PSBwbGFjZS5jb3ZlckVuZCAtIHBsYWNlLmNvdmVyU3RhcnQpXG4gICAgICAgICAgeyByZWN0ID0gbm9kZS5wYXJlbnROb2RlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOyB9XG4gICAgICAgIGVsc2VcbiAgICAgICAgICB7IHJlY3QgPSBnZXRVc2VmdWxSZWN0KHJhbmdlKG5vZGUsIHN0YXJ0LCBlbmQpLmdldENsaWVudFJlY3RzKCksIGJpYXMpOyB9XG4gICAgICAgIGlmIChyZWN0LmxlZnQgfHwgcmVjdC5yaWdodCB8fCBzdGFydCA9PSAwKSB7IGJyZWFrIH1cbiAgICAgICAgZW5kID0gc3RhcnQ7XG4gICAgICAgIHN0YXJ0ID0gc3RhcnQgLSAxO1xuICAgICAgICBjb2xsYXBzZSA9IFwicmlnaHRcIjtcbiAgICAgIH1cbiAgICAgIGlmIChpZSAmJiBpZV92ZXJzaW9uIDwgMTEpIHsgcmVjdCA9IG1heWJlVXBkYXRlUmVjdEZvclpvb21pbmcoY20uZGlzcGxheS5tZWFzdXJlLCByZWN0KTsgfVxuICAgIH0gZWxzZSB7IC8vIElmIGl0IGlzIGEgd2lkZ2V0LCBzaW1wbHkgZ2V0IHRoZSBib3ggZm9yIHRoZSB3aG9sZSB3aWRnZXQuXG4gICAgICBpZiAoc3RhcnQgPiAwKSB7IGNvbGxhcHNlID0gYmlhcyA9IFwicmlnaHRcIjsgfVxuICAgICAgdmFyIHJlY3RzO1xuICAgICAgaWYgKGNtLm9wdGlvbnMubGluZVdyYXBwaW5nICYmIChyZWN0cyA9IG5vZGUuZ2V0Q2xpZW50UmVjdHMoKSkubGVuZ3RoID4gMSlcbiAgICAgICAgeyByZWN0ID0gcmVjdHNbYmlhcyA9PSBcInJpZ2h0XCIgPyByZWN0cy5sZW5ndGggLSAxIDogMF07IH1cbiAgICAgIGVsc2VcbiAgICAgICAgeyByZWN0ID0gbm9kZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsgfVxuICAgIH1cbiAgICBpZiAoaWUgJiYgaWVfdmVyc2lvbiA8IDkgJiYgIXN0YXJ0ICYmICghcmVjdCB8fCAhcmVjdC5sZWZ0ICYmICFyZWN0LnJpZ2h0KSkge1xuICAgICAgdmFyIHJTcGFuID0gbm9kZS5wYXJlbnROb2RlLmdldENsaWVudFJlY3RzKClbMF07XG4gICAgICBpZiAoclNwYW4pXG4gICAgICAgIHsgcmVjdCA9IHtsZWZ0OiByU3Bhbi5sZWZ0LCByaWdodDogclNwYW4ubGVmdCArIGNoYXJXaWR0aChjbS5kaXNwbGF5KSwgdG9wOiByU3Bhbi50b3AsIGJvdHRvbTogclNwYW4uYm90dG9tfTsgfVxuICAgICAgZWxzZVxuICAgICAgICB7IHJlY3QgPSBudWxsUmVjdDsgfVxuICAgIH1cblxuICAgIHZhciBydG9wID0gcmVjdC50b3AgLSBwcmVwYXJlZC5yZWN0LnRvcCwgcmJvdCA9IHJlY3QuYm90dG9tIC0gcHJlcGFyZWQucmVjdC50b3A7XG4gICAgdmFyIG1pZCA9IChydG9wICsgcmJvdCkgLyAyO1xuICAgIHZhciBoZWlnaHRzID0gcHJlcGFyZWQudmlldy5tZWFzdXJlLmhlaWdodHM7XG4gICAgdmFyIGkgPSAwO1xuICAgIGZvciAoOyBpIDwgaGVpZ2h0cy5sZW5ndGggLSAxOyBpKyspXG4gICAgICB7IGlmIChtaWQgPCBoZWlnaHRzW2ldKSB7IGJyZWFrIH0gfVxuICAgIHZhciB0b3AgPSBpID8gaGVpZ2h0c1tpIC0gMV0gOiAwLCBib3QgPSBoZWlnaHRzW2ldO1xuICAgIHZhciByZXN1bHQgPSB7bGVmdDogKGNvbGxhcHNlID09IFwicmlnaHRcIiA/IHJlY3QucmlnaHQgOiByZWN0LmxlZnQpIC0gcHJlcGFyZWQucmVjdC5sZWZ0LFxuICAgICAgICAgICAgICAgICAgcmlnaHQ6IChjb2xsYXBzZSA9PSBcImxlZnRcIiA/IHJlY3QubGVmdCA6IHJlY3QucmlnaHQpIC0gcHJlcGFyZWQucmVjdC5sZWZ0LFxuICAgICAgICAgICAgICAgICAgdG9wOiB0b3AsIGJvdHRvbTogYm90fTtcbiAgICBpZiAoIXJlY3QubGVmdCAmJiAhcmVjdC5yaWdodCkgeyByZXN1bHQuYm9ndXMgPSB0cnVlOyB9XG4gICAgaWYgKCFjbS5vcHRpb25zLnNpbmdsZUN1cnNvckhlaWdodFBlckxpbmUpIHsgcmVzdWx0LnJ0b3AgPSBydG9wOyByZXN1bHQucmJvdHRvbSA9IHJib3Q7IH1cblxuICAgIHJldHVybiByZXN1bHRcbiAgfVxuXG4gIC8vIFdvcmsgYXJvdW5kIHByb2JsZW0gd2l0aCBib3VuZGluZyBjbGllbnQgcmVjdHMgb24gcmFuZ2VzIGJlaW5nXG4gIC8vIHJldHVybmVkIGluY29ycmVjdGx5IHdoZW4gem9vbWVkIG9uIElFMTAgYW5kIGJlbG93LlxuICBmdW5jdGlvbiBtYXliZVVwZGF0ZVJlY3RGb3Jab29taW5nKG1lYXN1cmUsIHJlY3QpIHtcbiAgICBpZiAoIXdpbmRvdy5zY3JlZW4gfHwgc2NyZWVuLmxvZ2ljYWxYRFBJID09IG51bGwgfHxcbiAgICAgICAgc2NyZWVuLmxvZ2ljYWxYRFBJID09IHNjcmVlbi5kZXZpY2VYRFBJIHx8ICFoYXNCYWRab29tZWRSZWN0cyhtZWFzdXJlKSlcbiAgICAgIHsgcmV0dXJuIHJlY3QgfVxuICAgIHZhciBzY2FsZVggPSBzY3JlZW4ubG9naWNhbFhEUEkgLyBzY3JlZW4uZGV2aWNlWERQSTtcbiAgICB2YXIgc2NhbGVZID0gc2NyZWVuLmxvZ2ljYWxZRFBJIC8gc2NyZWVuLmRldmljZVlEUEk7XG4gICAgcmV0dXJuIHtsZWZ0OiByZWN0LmxlZnQgKiBzY2FsZVgsIHJpZ2h0OiByZWN0LnJpZ2h0ICogc2NhbGVYLFxuICAgICAgICAgICAgdG9wOiByZWN0LnRvcCAqIHNjYWxlWSwgYm90dG9tOiByZWN0LmJvdHRvbSAqIHNjYWxlWX1cbiAgfVxuXG4gIGZ1bmN0aW9uIGNsZWFyTGluZU1lYXN1cmVtZW50Q2FjaGVGb3IobGluZVZpZXcpIHtcbiAgICBpZiAobGluZVZpZXcubWVhc3VyZSkge1xuICAgICAgbGluZVZpZXcubWVhc3VyZS5jYWNoZSA9IHt9O1xuICAgICAgbGluZVZpZXcubWVhc3VyZS5oZWlnaHRzID0gbnVsbDtcbiAgICAgIGlmIChsaW5lVmlldy5yZXN0KSB7IGZvciAodmFyIGkgPSAwOyBpIDwgbGluZVZpZXcucmVzdC5sZW5ndGg7IGkrKylcbiAgICAgICAgeyBsaW5lVmlldy5tZWFzdXJlLmNhY2hlc1tpXSA9IHt9OyB9IH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBjbGVhckxpbmVNZWFzdXJlbWVudENhY2hlKGNtKSB7XG4gICAgY20uZGlzcGxheS5leHRlcm5hbE1lYXN1cmUgPSBudWxsO1xuICAgIHJlbW92ZUNoaWxkcmVuKGNtLmRpc3BsYXkubGluZU1lYXN1cmUpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY20uZGlzcGxheS52aWV3Lmxlbmd0aDsgaSsrKVxuICAgICAgeyBjbGVhckxpbmVNZWFzdXJlbWVudENhY2hlRm9yKGNtLmRpc3BsYXkudmlld1tpXSk7IH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGNsZWFyQ2FjaGVzKGNtKSB7XG4gICAgY2xlYXJMaW5lTWVhc3VyZW1lbnRDYWNoZShjbSk7XG4gICAgY20uZGlzcGxheS5jYWNoZWRDaGFyV2lkdGggPSBjbS5kaXNwbGF5LmNhY2hlZFRleHRIZWlnaHQgPSBjbS5kaXNwbGF5LmNhY2hlZFBhZGRpbmdIID0gbnVsbDtcbiAgICBpZiAoIWNtLm9wdGlvbnMubGluZVdyYXBwaW5nKSB7IGNtLmRpc3BsYXkubWF4TGluZUNoYW5nZWQgPSB0cnVlOyB9XG4gICAgY20uZGlzcGxheS5saW5lTnVtQ2hhcnMgPSBudWxsO1xuICB9XG5cbiAgZnVuY3Rpb24gcGFnZVNjcm9sbFgoZG9jKSB7XG4gICAgLy8gV29yayBhcm91bmQgaHR0cHM6Ly9idWdzLmNocm9taXVtLm9yZy9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9NDg5MjA2XG4gICAgLy8gd2hpY2ggY2F1c2VzIHBhZ2VfT2Zmc2V0IGFuZCBib3VuZGluZyBjbGllbnQgcmVjdHMgdG8gdXNlXG4gICAgLy8gZGlmZmVyZW50IHJlZmVyZW5jZSB2aWV3cG9ydHMgYW5kIGludmFsaWRhdGUgb3VyIGNhbGN1bGF0aW9ucy5cbiAgICBpZiAoY2hyb21lICYmIGFuZHJvaWQpIHsgcmV0dXJuIC0oZG9jLmJvZHkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdCAtIHBhcnNlSW50KGdldENvbXB1dGVkU3R5bGUoZG9jLmJvZHkpLm1hcmdpbkxlZnQpKSB9XG4gICAgcmV0dXJuIGRvYy5kZWZhdWx0Vmlldy5wYWdlWE9mZnNldCB8fCAoZG9jLmRvY3VtZW50RWxlbWVudCB8fCBkb2MuYm9keSkuc2Nyb2xsTGVmdFxuICB9XG4gIGZ1bmN0aW9uIHBhZ2VTY3JvbGxZKGRvYykge1xuICAgIGlmIChjaHJvbWUgJiYgYW5kcm9pZCkgeyByZXR1cm4gLShkb2MuYm9keS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3AgLSBwYXJzZUludChnZXRDb21wdXRlZFN0eWxlKGRvYy5ib2R5KS5tYXJnaW5Ub3ApKSB9XG4gICAgcmV0dXJuIGRvYy5kZWZhdWx0Vmlldy5wYWdlWU9mZnNldCB8fCAoZG9jLmRvY3VtZW50RWxlbWVudCB8fCBkb2MuYm9keSkuc2Nyb2xsVG9wXG4gIH1cblxuICBmdW5jdGlvbiB3aWRnZXRUb3BIZWlnaHQobGluZU9iaikge1xuICAgIHZhciByZWYgPSB2aXN1YWxMaW5lKGxpbmVPYmopO1xuICAgIHZhciB3aWRnZXRzID0gcmVmLndpZGdldHM7XG4gICAgdmFyIGhlaWdodCA9IDA7XG4gICAgaWYgKHdpZGdldHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCB3aWRnZXRzLmxlbmd0aDsgKytpKSB7IGlmICh3aWRnZXRzW2ldLmFib3ZlKVxuICAgICAgeyBoZWlnaHQgKz0gd2lkZ2V0SGVpZ2h0KHdpZGdldHNbaV0pOyB9IH0gfVxuICAgIHJldHVybiBoZWlnaHRcbiAgfVxuXG4gIC8vIENvbnZlcnRzIGEge3RvcCwgYm90dG9tLCBsZWZ0LCByaWdodH0gYm94IGZyb20gbGluZS1sb2NhbFxuICAvLyBjb29yZGluYXRlcyBpbnRvIGFub3RoZXIgY29vcmRpbmF0ZSBzeXN0ZW0uIENvbnRleHQgbWF5IGJlIG9uZSBvZlxuICAvLyBcImxpbmVcIiwgXCJkaXZcIiAoZGlzcGxheS5saW5lRGl2KSwgXCJsb2NhbFwiLi9udWxsIChlZGl0b3IpLCBcIndpbmRvd1wiLFxuICAvLyBvciBcInBhZ2VcIi5cbiAgZnVuY3Rpb24gaW50b0Nvb3JkU3lzdGVtKGNtLCBsaW5lT2JqLCByZWN0LCBjb250ZXh0LCBpbmNsdWRlV2lkZ2V0cykge1xuICAgIGlmICghaW5jbHVkZVdpZGdldHMpIHtcbiAgICAgIHZhciBoZWlnaHQgPSB3aWRnZXRUb3BIZWlnaHQobGluZU9iaik7XG4gICAgICByZWN0LnRvcCArPSBoZWlnaHQ7IHJlY3QuYm90dG9tICs9IGhlaWdodDtcbiAgICB9XG4gICAgaWYgKGNvbnRleHQgPT0gXCJsaW5lXCIpIHsgcmV0dXJuIHJlY3QgfVxuICAgIGlmICghY29udGV4dCkgeyBjb250ZXh0ID0gXCJsb2NhbFwiOyB9XG4gICAgdmFyIHlPZmYgPSBoZWlnaHRBdExpbmUobGluZU9iaik7XG4gICAgaWYgKGNvbnRleHQgPT0gXCJsb2NhbFwiKSB7IHlPZmYgKz0gcGFkZGluZ1RvcChjbS5kaXNwbGF5KTsgfVxuICAgIGVsc2UgeyB5T2ZmIC09IGNtLmRpc3BsYXkudmlld09mZnNldDsgfVxuICAgIGlmIChjb250ZXh0ID09IFwicGFnZVwiIHx8IGNvbnRleHQgPT0gXCJ3aW5kb3dcIikge1xuICAgICAgdmFyIGxPZmYgPSBjbS5kaXNwbGF5LmxpbmVTcGFjZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgIHlPZmYgKz0gbE9mZi50b3AgKyAoY29udGV4dCA9PSBcIndpbmRvd1wiID8gMCA6IHBhZ2VTY3JvbGxZKGRvYyhjbSkpKTtcbiAgICAgIHZhciB4T2ZmID0gbE9mZi5sZWZ0ICsgKGNvbnRleHQgPT0gXCJ3aW5kb3dcIiA/IDAgOiBwYWdlU2Nyb2xsWChkb2MoY20pKSk7XG4gICAgICByZWN0LmxlZnQgKz0geE9mZjsgcmVjdC5yaWdodCArPSB4T2ZmO1xuICAgIH1cbiAgICByZWN0LnRvcCArPSB5T2ZmOyByZWN0LmJvdHRvbSArPSB5T2ZmO1xuICAgIHJldHVybiByZWN0XG4gIH1cblxuICAvLyBDb3ZlcnRzIGEgYm94IGZyb20gXCJkaXZcIiBjb29yZHMgdG8gYW5vdGhlciBjb29yZGluYXRlIHN5c3RlbS5cbiAgLy8gQ29udGV4dCBtYXkgYmUgXCJ3aW5kb3dcIiwgXCJwYWdlXCIsIFwiZGl2XCIsIG9yIFwibG9jYWxcIi4vbnVsbC5cbiAgZnVuY3Rpb24gZnJvbUNvb3JkU3lzdGVtKGNtLCBjb29yZHMsIGNvbnRleHQpIHtcbiAgICBpZiAoY29udGV4dCA9PSBcImRpdlwiKSB7IHJldHVybiBjb29yZHMgfVxuICAgIHZhciBsZWZ0ID0gY29vcmRzLmxlZnQsIHRvcCA9IGNvb3Jkcy50b3A7XG4gICAgLy8gRmlyc3QgbW92ZSBpbnRvIFwicGFnZVwiIGNvb3JkaW5hdGUgc3lzdGVtXG4gICAgaWYgKGNvbnRleHQgPT0gXCJwYWdlXCIpIHtcbiAgICAgIGxlZnQgLT0gcGFnZVNjcm9sbFgoZG9jKGNtKSk7XG4gICAgICB0b3AgLT0gcGFnZVNjcm9sbFkoZG9jKGNtKSk7XG4gICAgfSBlbHNlIGlmIChjb250ZXh0ID09IFwibG9jYWxcIiB8fCAhY29udGV4dCkge1xuICAgICAgdmFyIGxvY2FsQm94ID0gY20uZGlzcGxheS5zaXplci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgIGxlZnQgKz0gbG9jYWxCb3gubGVmdDtcbiAgICAgIHRvcCArPSBsb2NhbEJveC50b3A7XG4gICAgfVxuXG4gICAgdmFyIGxpbmVTcGFjZUJveCA9IGNtLmRpc3BsYXkubGluZVNwYWNlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIHJldHVybiB7bGVmdDogbGVmdCAtIGxpbmVTcGFjZUJveC5sZWZ0LCB0b3A6IHRvcCAtIGxpbmVTcGFjZUJveC50b3B9XG4gIH1cblxuICBmdW5jdGlvbiBjaGFyQ29vcmRzKGNtLCBwb3MsIGNvbnRleHQsIGxpbmVPYmosIGJpYXMpIHtcbiAgICBpZiAoIWxpbmVPYmopIHsgbGluZU9iaiA9IGdldExpbmUoY20uZG9jLCBwb3MubGluZSk7IH1cbiAgICByZXR1cm4gaW50b0Nvb3JkU3lzdGVtKGNtLCBsaW5lT2JqLCBtZWFzdXJlQ2hhcihjbSwgbGluZU9iaiwgcG9zLmNoLCBiaWFzKSwgY29udGV4dClcbiAgfVxuXG4gIC8vIFJldHVybnMgYSBib3ggZm9yIGEgZ2l2ZW4gY3Vyc29yIHBvc2l0aW9uLCB3aGljaCBtYXkgaGF2ZSBhblxuICAvLyAnb3RoZXInIHByb3BlcnR5IGNvbnRhaW5pbmcgdGhlIHBvc2l0aW9uIG9mIHRoZSBzZWNvbmRhcnkgY3Vyc29yXG4gIC8vIG9uIGEgYmlkaSBib3VuZGFyeS5cbiAgLy8gQSBjdXJzb3IgUG9zKGxpbmUsIGNoYXIsIFwiYmVmb3JlXCIpIGlzIG9uIHRoZSBzYW1lIHZpc3VhbCBsaW5lIGFzIGBjaGFyIC0gMWBcbiAgLy8gYW5kIGFmdGVyIGBjaGFyIC0gMWAgaW4gd3JpdGluZyBvcmRlciBvZiBgY2hhciAtIDFgXG4gIC8vIEEgY3Vyc29yIFBvcyhsaW5lLCBjaGFyLCBcImFmdGVyXCIpIGlzIG9uIHRoZSBzYW1lIHZpc3VhbCBsaW5lIGFzIGBjaGFyYFxuICAvLyBhbmQgYmVmb3JlIGBjaGFyYCBpbiB3cml0aW5nIG9yZGVyIG9mIGBjaGFyYFxuICAvLyBFeGFtcGxlcyAodXBwZXItY2FzZSBsZXR0ZXJzIGFyZSBSVEwsIGxvd2VyLWNhc2UgYXJlIExUUik6XG4gIC8vICAgICBQb3MoMCwgMSwgLi4uKVxuICAvLyAgICAgYmVmb3JlICAgYWZ0ZXJcbiAgLy8gYWIgICAgIGF8YiAgICAgYXxiXG4gIC8vIGFCICAgICBhfEIgICAgIGFCfFxuICAvLyBBYiAgICAgfEFiICAgICBBfGJcbiAgLy8gQUIgICAgIEJ8QSAgICAgQnxBXG4gIC8vIEV2ZXJ5IHBvc2l0aW9uIGFmdGVyIHRoZSBsYXN0IGNoYXJhY3RlciBvbiBhIGxpbmUgaXMgY29uc2lkZXJlZCB0byBzdGlja1xuICAvLyB0byB0aGUgbGFzdCBjaGFyYWN0ZXIgb24gdGhlIGxpbmUuXG4gIGZ1bmN0aW9uIGN1cnNvckNvb3JkcyhjbSwgcG9zLCBjb250ZXh0LCBsaW5lT2JqLCBwcmVwYXJlZE1lYXN1cmUsIHZhckhlaWdodCkge1xuICAgIGxpbmVPYmogPSBsaW5lT2JqIHx8IGdldExpbmUoY20uZG9jLCBwb3MubGluZSk7XG4gICAgaWYgKCFwcmVwYXJlZE1lYXN1cmUpIHsgcHJlcGFyZWRNZWFzdXJlID0gcHJlcGFyZU1lYXN1cmVGb3JMaW5lKGNtLCBsaW5lT2JqKTsgfVxuICAgIGZ1bmN0aW9uIGdldChjaCwgcmlnaHQpIHtcbiAgICAgIHZhciBtID0gbWVhc3VyZUNoYXJQcmVwYXJlZChjbSwgcHJlcGFyZWRNZWFzdXJlLCBjaCwgcmlnaHQgPyBcInJpZ2h0XCIgOiBcImxlZnRcIiwgdmFySGVpZ2h0KTtcbiAgICAgIGlmIChyaWdodCkgeyBtLmxlZnQgPSBtLnJpZ2h0OyB9IGVsc2UgeyBtLnJpZ2h0ID0gbS5sZWZ0OyB9XG4gICAgICByZXR1cm4gaW50b0Nvb3JkU3lzdGVtKGNtLCBsaW5lT2JqLCBtLCBjb250ZXh0KVxuICAgIH1cbiAgICB2YXIgb3JkZXIgPSBnZXRPcmRlcihsaW5lT2JqLCBjbS5kb2MuZGlyZWN0aW9uKSwgY2ggPSBwb3MuY2gsIHN0aWNreSA9IHBvcy5zdGlja3k7XG4gICAgaWYgKGNoID49IGxpbmVPYmoudGV4dC5sZW5ndGgpIHtcbiAgICAgIGNoID0gbGluZU9iai50ZXh0Lmxlbmd0aDtcbiAgICAgIHN0aWNreSA9IFwiYmVmb3JlXCI7XG4gICAgfSBlbHNlIGlmIChjaCA8PSAwKSB7XG4gICAgICBjaCA9IDA7XG4gICAgICBzdGlja3kgPSBcImFmdGVyXCI7XG4gICAgfVxuICAgIGlmICghb3JkZXIpIHsgcmV0dXJuIGdldChzdGlja3kgPT0gXCJiZWZvcmVcIiA/IGNoIC0gMSA6IGNoLCBzdGlja3kgPT0gXCJiZWZvcmVcIikgfVxuXG4gICAgZnVuY3Rpb24gZ2V0QmlkaShjaCwgcGFydFBvcywgaW52ZXJ0KSB7XG4gICAgICB2YXIgcGFydCA9IG9yZGVyW3BhcnRQb3NdLCByaWdodCA9IHBhcnQubGV2ZWwgPT0gMTtcbiAgICAgIHJldHVybiBnZXQoaW52ZXJ0ID8gY2ggLSAxIDogY2gsIHJpZ2h0ICE9IGludmVydClcbiAgICB9XG4gICAgdmFyIHBhcnRQb3MgPSBnZXRCaWRpUGFydEF0KG9yZGVyLCBjaCwgc3RpY2t5KTtcbiAgICB2YXIgb3RoZXIgPSBiaWRpT3RoZXI7XG4gICAgdmFyIHZhbCA9IGdldEJpZGkoY2gsIHBhcnRQb3MsIHN0aWNreSA9PSBcImJlZm9yZVwiKTtcbiAgICBpZiAob3RoZXIgIT0gbnVsbCkgeyB2YWwub3RoZXIgPSBnZXRCaWRpKGNoLCBvdGhlciwgc3RpY2t5ICE9IFwiYmVmb3JlXCIpOyB9XG4gICAgcmV0dXJuIHZhbFxuICB9XG5cbiAgLy8gVXNlZCB0byBjaGVhcGx5IGVzdGltYXRlIHRoZSBjb29yZGluYXRlcyBmb3IgYSBwb3NpdGlvbi4gVXNlZCBmb3JcbiAgLy8gaW50ZXJtZWRpYXRlIHNjcm9sbCB1cGRhdGVzLlxuICBmdW5jdGlvbiBlc3RpbWF0ZUNvb3JkcyhjbSwgcG9zKSB7XG4gICAgdmFyIGxlZnQgPSAwO1xuICAgIHBvcyA9IGNsaXBQb3MoY20uZG9jLCBwb3MpO1xuICAgIGlmICghY20ub3B0aW9ucy5saW5lV3JhcHBpbmcpIHsgbGVmdCA9IGNoYXJXaWR0aChjbS5kaXNwbGF5KSAqIHBvcy5jaDsgfVxuICAgIHZhciBsaW5lT2JqID0gZ2V0TGluZShjbS5kb2MsIHBvcy5saW5lKTtcbiAgICB2YXIgdG9wID0gaGVpZ2h0QXRMaW5lKGxpbmVPYmopICsgcGFkZGluZ1RvcChjbS5kaXNwbGF5KTtcbiAgICByZXR1cm4ge2xlZnQ6IGxlZnQsIHJpZ2h0OiBsZWZ0LCB0b3A6IHRvcCwgYm90dG9tOiB0b3AgKyBsaW5lT2JqLmhlaWdodH1cbiAgfVxuXG4gIC8vIFBvc2l0aW9ucyByZXR1cm5lZCBieSBjb29yZHNDaGFyIGNvbnRhaW4gc29tZSBleHRyYSBpbmZvcm1hdGlvbi5cbiAgLy8geFJlbCBpcyB0aGUgcmVsYXRpdmUgeCBwb3NpdGlvbiBvZiB0aGUgaW5wdXQgY29vcmRpbmF0ZXMgY29tcGFyZWRcbiAgLy8gdG8gdGhlIGZvdW5kIHBvc2l0aW9uIChzbyB4UmVsID4gMCBtZWFucyB0aGUgY29vcmRpbmF0ZXMgYXJlIHRvXG4gIC8vIHRoZSByaWdodCBvZiB0aGUgY2hhcmFjdGVyIHBvc2l0aW9uLCBmb3IgZXhhbXBsZSkuIFdoZW4gb3V0c2lkZVxuICAvLyBpcyB0cnVlLCB0aGF0IG1lYW5zIHRoZSBjb29yZGluYXRlcyBsaWUgb3V0c2lkZSB0aGUgbGluZSdzXG4gIC8vIHZlcnRpY2FsIHJhbmdlLlxuICBmdW5jdGlvbiBQb3NXaXRoSW5mbyhsaW5lLCBjaCwgc3RpY2t5LCBvdXRzaWRlLCB4UmVsKSB7XG4gICAgdmFyIHBvcyA9IFBvcyhsaW5lLCBjaCwgc3RpY2t5KTtcbiAgICBwb3MueFJlbCA9IHhSZWw7XG4gICAgaWYgKG91dHNpZGUpIHsgcG9zLm91dHNpZGUgPSBvdXRzaWRlOyB9XG4gICAgcmV0dXJuIHBvc1xuICB9XG5cbiAgLy8gQ29tcHV0ZSB0aGUgY2hhcmFjdGVyIHBvc2l0aW9uIGNsb3Nlc3QgdG8gdGhlIGdpdmVuIGNvb3JkaW5hdGVzLlxuICAvLyBJbnB1dCBtdXN0IGJlIGxpbmVTcGFjZS1sb2NhbCAoXCJkaXZcIiBjb29yZGluYXRlIHN5c3RlbSkuXG4gIGZ1bmN0aW9uIGNvb3Jkc0NoYXIoY20sIHgsIHkpIHtcbiAgICB2YXIgZG9jID0gY20uZG9jO1xuICAgIHkgKz0gY20uZGlzcGxheS52aWV3T2Zmc2V0O1xuICAgIGlmICh5IDwgMCkgeyByZXR1cm4gUG9zV2l0aEluZm8oZG9jLmZpcnN0LCAwLCBudWxsLCAtMSwgLTEpIH1cbiAgICB2YXIgbGluZU4gPSBsaW5lQXRIZWlnaHQoZG9jLCB5KSwgbGFzdCA9IGRvYy5maXJzdCArIGRvYy5zaXplIC0gMTtcbiAgICBpZiAobGluZU4gPiBsYXN0KVxuICAgICAgeyByZXR1cm4gUG9zV2l0aEluZm8oZG9jLmZpcnN0ICsgZG9jLnNpemUgLSAxLCBnZXRMaW5lKGRvYywgbGFzdCkudGV4dC5sZW5ndGgsIG51bGwsIDEsIDEpIH1cbiAgICBpZiAoeCA8IDApIHsgeCA9IDA7IH1cblxuICAgIHZhciBsaW5lT2JqID0gZ2V0TGluZShkb2MsIGxpbmVOKTtcbiAgICBmb3IgKDs7KSB7XG4gICAgICB2YXIgZm91bmQgPSBjb29yZHNDaGFySW5uZXIoY20sIGxpbmVPYmosIGxpbmVOLCB4LCB5KTtcbiAgICAgIHZhciBjb2xsYXBzZWQgPSBjb2xsYXBzZWRTcGFuQXJvdW5kKGxpbmVPYmosIGZvdW5kLmNoICsgKGZvdW5kLnhSZWwgPiAwIHx8IGZvdW5kLm91dHNpZGUgPiAwID8gMSA6IDApKTtcbiAgICAgIGlmICghY29sbGFwc2VkKSB7IHJldHVybiBmb3VuZCB9XG4gICAgICB2YXIgcmFuZ2VFbmQgPSBjb2xsYXBzZWQuZmluZCgxKTtcbiAgICAgIGlmIChyYW5nZUVuZC5saW5lID09IGxpbmVOKSB7IHJldHVybiByYW5nZUVuZCB9XG4gICAgICBsaW5lT2JqID0gZ2V0TGluZShkb2MsIGxpbmVOID0gcmFuZ2VFbmQubGluZSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gd3JhcHBlZExpbmVFeHRlbnQoY20sIGxpbmVPYmosIHByZXBhcmVkTWVhc3VyZSwgeSkge1xuICAgIHkgLT0gd2lkZ2V0VG9wSGVpZ2h0KGxpbmVPYmopO1xuICAgIHZhciBlbmQgPSBsaW5lT2JqLnRleHQubGVuZ3RoO1xuICAgIHZhciBiZWdpbiA9IGZpbmRGaXJzdChmdW5jdGlvbiAoY2gpIHsgcmV0dXJuIG1lYXN1cmVDaGFyUHJlcGFyZWQoY20sIHByZXBhcmVkTWVhc3VyZSwgY2ggLSAxKS5ib3R0b20gPD0geTsgfSwgZW5kLCAwKTtcbiAgICBlbmQgPSBmaW5kRmlyc3QoZnVuY3Rpb24gKGNoKSB7IHJldHVybiBtZWFzdXJlQ2hhclByZXBhcmVkKGNtLCBwcmVwYXJlZE1lYXN1cmUsIGNoKS50b3AgPiB5OyB9LCBiZWdpbiwgZW5kKTtcbiAgICByZXR1cm4ge2JlZ2luOiBiZWdpbiwgZW5kOiBlbmR9XG4gIH1cblxuICBmdW5jdGlvbiB3cmFwcGVkTGluZUV4dGVudENoYXIoY20sIGxpbmVPYmosIHByZXBhcmVkTWVhc3VyZSwgdGFyZ2V0KSB7XG4gICAgaWYgKCFwcmVwYXJlZE1lYXN1cmUpIHsgcHJlcGFyZWRNZWFzdXJlID0gcHJlcGFyZU1lYXN1cmVGb3JMaW5lKGNtLCBsaW5lT2JqKTsgfVxuICAgIHZhciB0YXJnZXRUb3AgPSBpbnRvQ29vcmRTeXN0ZW0oY20sIGxpbmVPYmosIG1lYXN1cmVDaGFyUHJlcGFyZWQoY20sIHByZXBhcmVkTWVhc3VyZSwgdGFyZ2V0KSwgXCJsaW5lXCIpLnRvcDtcbiAgICByZXR1cm4gd3JhcHBlZExpbmVFeHRlbnQoY20sIGxpbmVPYmosIHByZXBhcmVkTWVhc3VyZSwgdGFyZ2V0VG9wKVxuICB9XG5cbiAgLy8gUmV0dXJucyB0cnVlIGlmIHRoZSBnaXZlbiBzaWRlIG9mIGEgYm94IGlzIGFmdGVyIHRoZSBnaXZlblxuICAvLyBjb29yZGluYXRlcywgaW4gdG9wLXRvLWJvdHRvbSwgbGVmdC10by1yaWdodCBvcmRlci5cbiAgZnVuY3Rpb24gYm94SXNBZnRlcihib3gsIHgsIHksIGxlZnQpIHtcbiAgICByZXR1cm4gYm94LmJvdHRvbSA8PSB5ID8gZmFsc2UgOiBib3gudG9wID4geSA/IHRydWUgOiAobGVmdCA/IGJveC5sZWZ0IDogYm94LnJpZ2h0KSA+IHhcbiAgfVxuXG4gIGZ1bmN0aW9uIGNvb3Jkc0NoYXJJbm5lcihjbSwgbGluZU9iaiwgbGluZU5vLCB4LCB5KSB7XG4gICAgLy8gTW92ZSB5IGludG8gbGluZS1sb2NhbCBjb29yZGluYXRlIHNwYWNlXG4gICAgeSAtPSBoZWlnaHRBdExpbmUobGluZU9iaik7XG4gICAgdmFyIHByZXBhcmVkTWVhc3VyZSA9IHByZXBhcmVNZWFzdXJlRm9yTGluZShjbSwgbGluZU9iaik7XG4gICAgLy8gV2hlbiBkaXJlY3RseSBjYWxsaW5nIGBtZWFzdXJlQ2hhclByZXBhcmVkYCwgd2UgaGF2ZSB0byBhZGp1c3RcbiAgICAvLyBmb3IgdGhlIHdpZGdldHMgYXQgdGhpcyBsaW5lLlxuICAgIHZhciB3aWRnZXRIZWlnaHQgPSB3aWRnZXRUb3BIZWlnaHQobGluZU9iaik7XG4gICAgdmFyIGJlZ2luID0gMCwgZW5kID0gbGluZU9iai50ZXh0Lmxlbmd0aCwgbHRyID0gdHJ1ZTtcblxuICAgIHZhciBvcmRlciA9IGdldE9yZGVyKGxpbmVPYmosIGNtLmRvYy5kaXJlY3Rpb24pO1xuICAgIC8vIElmIHRoZSBsaW5lIGlzbid0IHBsYWluIGxlZnQtdG8tcmlnaHQgdGV4dCwgZmlyc3QgZmlndXJlIG91dFxuICAgIC8vIHdoaWNoIGJpZGkgc2VjdGlvbiB0aGUgY29vcmRpbmF0ZXMgZmFsbCBpbnRvLlxuICAgIGlmIChvcmRlcikge1xuICAgICAgdmFyIHBhcnQgPSAoY20ub3B0aW9ucy5saW5lV3JhcHBpbmcgPyBjb29yZHNCaWRpUGFydFdyYXBwZWQgOiBjb29yZHNCaWRpUGFydClcbiAgICAgICAgICAgICAgICAgICAoY20sIGxpbmVPYmosIGxpbmVObywgcHJlcGFyZWRNZWFzdXJlLCBvcmRlciwgeCwgeSk7XG4gICAgICBsdHIgPSBwYXJ0LmxldmVsICE9IDE7XG4gICAgICAvLyBUaGUgYXdrd2FyZCAtMSBvZmZzZXRzIGFyZSBuZWVkZWQgYmVjYXVzZSBmaW5kRmlyc3QgKGNhbGxlZFxuICAgICAgLy8gb24gdGhlc2UgYmVsb3cpIHdpbGwgdHJlYXQgaXRzIGZpcnN0IGJvdW5kIGFzIGluY2x1c2l2ZSxcbiAgICAgIC8vIHNlY29uZCBhcyBleGNsdXNpdmUsIGJ1dCB3ZSB3YW50IHRvIGFjdHVhbGx5IGFkZHJlc3MgdGhlXG4gICAgICAvLyBjaGFyYWN0ZXJzIGluIHRoZSBwYXJ0J3MgcmFuZ2VcbiAgICAgIGJlZ2luID0gbHRyID8gcGFydC5mcm9tIDogcGFydC50byAtIDE7XG4gICAgICBlbmQgPSBsdHIgPyBwYXJ0LnRvIDogcGFydC5mcm9tIC0gMTtcbiAgICB9XG5cbiAgICAvLyBBIGJpbmFyeSBzZWFyY2ggdG8gZmluZCB0aGUgZmlyc3QgY2hhcmFjdGVyIHdob3NlIGJvdW5kaW5nIGJveFxuICAgIC8vIHN0YXJ0cyBhZnRlciB0aGUgY29vcmRpbmF0ZXMuIElmIHdlIHJ1biBhY3Jvc3MgYW55IHdob3NlIGJveCB3cmFwXG4gICAgLy8gdGhlIGNvb3JkaW5hdGVzLCBzdG9yZSB0aGF0LlxuICAgIHZhciBjaEFyb3VuZCA9IG51bGwsIGJveEFyb3VuZCA9IG51bGw7XG4gICAgdmFyIGNoID0gZmluZEZpcnN0KGZ1bmN0aW9uIChjaCkge1xuICAgICAgdmFyIGJveCA9IG1lYXN1cmVDaGFyUHJlcGFyZWQoY20sIHByZXBhcmVkTWVhc3VyZSwgY2gpO1xuICAgICAgYm94LnRvcCArPSB3aWRnZXRIZWlnaHQ7IGJveC5ib3R0b20gKz0gd2lkZ2V0SGVpZ2h0O1xuICAgICAgaWYgKCFib3hJc0FmdGVyKGJveCwgeCwgeSwgZmFsc2UpKSB7IHJldHVybiBmYWxzZSB9XG4gICAgICBpZiAoYm94LnRvcCA8PSB5ICYmIGJveC5sZWZ0IDw9IHgpIHtcbiAgICAgICAgY2hBcm91bmQgPSBjaDtcbiAgICAgICAgYm94QXJvdW5kID0gYm94O1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRydWVcbiAgICB9LCBiZWdpbiwgZW5kKTtcblxuICAgIHZhciBiYXNlWCwgc3RpY2t5LCBvdXRzaWRlID0gZmFsc2U7XG4gICAgLy8gSWYgYSBib3ggYXJvdW5kIHRoZSBjb29yZGluYXRlcyB3YXMgZm91bmQsIHVzZSB0aGF0XG4gICAgaWYgKGJveEFyb3VuZCkge1xuICAgICAgLy8gRGlzdGluZ3Vpc2ggY29vcmRpbmF0ZXMgbmVhcmVyIHRvIHRoZSBsZWZ0IG9yIHJpZ2h0IHNpZGUgb2YgdGhlIGJveFxuICAgICAgdmFyIGF0TGVmdCA9IHggLSBib3hBcm91bmQubGVmdCA8IGJveEFyb3VuZC5yaWdodCAtIHgsIGF0U3RhcnQgPSBhdExlZnQgPT0gbHRyO1xuICAgICAgY2ggPSBjaEFyb3VuZCArIChhdFN0YXJ0ID8gMCA6IDEpO1xuICAgICAgc3RpY2t5ID0gYXRTdGFydCA/IFwiYWZ0ZXJcIiA6IFwiYmVmb3JlXCI7XG4gICAgICBiYXNlWCA9IGF0TGVmdCA/IGJveEFyb3VuZC5sZWZ0IDogYm94QXJvdW5kLnJpZ2h0O1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyAoQWRqdXN0IGZvciBleHRlbmRlZCBib3VuZCwgaWYgbmVjZXNzYXJ5LilcbiAgICAgIGlmICghbHRyICYmIChjaCA9PSBlbmQgfHwgY2ggPT0gYmVnaW4pKSB7IGNoKys7IH1cbiAgICAgIC8vIFRvIGRldGVybWluZSB3aGljaCBzaWRlIHRvIGFzc29jaWF0ZSB3aXRoLCBnZXQgdGhlIGJveCB0byB0aGVcbiAgICAgIC8vIGxlZnQgb2YgdGhlIGNoYXJhY3RlciBhbmQgY29tcGFyZSBpdCdzIHZlcnRpY2FsIHBvc2l0aW9uIHRvIHRoZVxuICAgICAgLy8gY29vcmRpbmF0ZXNcbiAgICAgIHN0aWNreSA9IGNoID09IDAgPyBcImFmdGVyXCIgOiBjaCA9PSBsaW5lT2JqLnRleHQubGVuZ3RoID8gXCJiZWZvcmVcIiA6XG4gICAgICAgIChtZWFzdXJlQ2hhclByZXBhcmVkKGNtLCBwcmVwYXJlZE1lYXN1cmUsIGNoIC0gKGx0ciA/IDEgOiAwKSkuYm90dG9tICsgd2lkZ2V0SGVpZ2h0IDw9IHkpID09IGx0ciA/XG4gICAgICAgIFwiYWZ0ZXJcIiA6IFwiYmVmb3JlXCI7XG4gICAgICAvLyBOb3cgZ2V0IGFjY3VyYXRlIGNvb3JkaW5hdGVzIGZvciB0aGlzIHBsYWNlLCBpbiBvcmRlciB0byBnZXQgYVxuICAgICAgLy8gYmFzZSBYIHBvc2l0aW9uXG4gICAgICB2YXIgY29vcmRzID0gY3Vyc29yQ29vcmRzKGNtLCBQb3MobGluZU5vLCBjaCwgc3RpY2t5KSwgXCJsaW5lXCIsIGxpbmVPYmosIHByZXBhcmVkTWVhc3VyZSk7XG4gICAgICBiYXNlWCA9IGNvb3Jkcy5sZWZ0O1xuICAgICAgb3V0c2lkZSA9IHkgPCBjb29yZHMudG9wID8gLTEgOiB5ID49IGNvb3Jkcy5ib3R0b20gPyAxIDogMDtcbiAgICB9XG5cbiAgICBjaCA9IHNraXBFeHRlbmRpbmdDaGFycyhsaW5lT2JqLnRleHQsIGNoLCAxKTtcbiAgICByZXR1cm4gUG9zV2l0aEluZm8obGluZU5vLCBjaCwgc3RpY2t5LCBvdXRzaWRlLCB4IC0gYmFzZVgpXG4gIH1cblxuICBmdW5jdGlvbiBjb29yZHNCaWRpUGFydChjbSwgbGluZU9iaiwgbGluZU5vLCBwcmVwYXJlZE1lYXN1cmUsIG9yZGVyLCB4LCB5KSB7XG4gICAgLy8gQmlkaSBwYXJ0cyBhcmUgc29ydGVkIGxlZnQtdG8tcmlnaHQsIGFuZCBpbiBhIG5vbi1saW5lLXdyYXBwaW5nXG4gICAgLy8gc2l0dWF0aW9uLCB3ZSBjYW4gdGFrZSB0aGlzIG9yZGVyaW5nIHRvIGNvcnJlc3BvbmQgdG8gdGhlIHZpc3VhbFxuICAgIC8vIG9yZGVyaW5nLiBUaGlzIGZpbmRzIHRoZSBmaXJzdCBwYXJ0IHdob3NlIGVuZCBpcyBhZnRlciB0aGUgZ2l2ZW5cbiAgICAvLyBjb29yZGluYXRlcy5cbiAgICB2YXIgaW5kZXggPSBmaW5kRmlyc3QoZnVuY3Rpb24gKGkpIHtcbiAgICAgIHZhciBwYXJ0ID0gb3JkZXJbaV0sIGx0ciA9IHBhcnQubGV2ZWwgIT0gMTtcbiAgICAgIHJldHVybiBib3hJc0FmdGVyKGN1cnNvckNvb3JkcyhjbSwgUG9zKGxpbmVObywgbHRyID8gcGFydC50byA6IHBhcnQuZnJvbSwgbHRyID8gXCJiZWZvcmVcIiA6IFwiYWZ0ZXJcIiksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJsaW5lXCIsIGxpbmVPYmosIHByZXBhcmVkTWVhc3VyZSksIHgsIHksIHRydWUpXG4gICAgfSwgMCwgb3JkZXIubGVuZ3RoIC0gMSk7XG4gICAgdmFyIHBhcnQgPSBvcmRlcltpbmRleF07XG4gICAgLy8gSWYgdGhpcyBpc24ndCB0aGUgZmlyc3QgcGFydCwgdGhlIHBhcnQncyBzdGFydCBpcyBhbHNvIGFmdGVyXG4gICAgLy8gdGhlIGNvb3JkaW5hdGVzLCBhbmQgdGhlIGNvb3JkaW5hdGVzIGFyZW4ndCBvbiB0aGUgc2FtZSBsaW5lIGFzXG4gICAgLy8gdGhhdCBzdGFydCwgbW92ZSBvbmUgcGFydCBiYWNrLlxuICAgIGlmIChpbmRleCA+IDApIHtcbiAgICAgIHZhciBsdHIgPSBwYXJ0LmxldmVsICE9IDE7XG4gICAgICB2YXIgc3RhcnQgPSBjdXJzb3JDb29yZHMoY20sIFBvcyhsaW5lTm8sIGx0ciA/IHBhcnQuZnJvbSA6IHBhcnQudG8sIGx0ciA/IFwiYWZ0ZXJcIiA6IFwiYmVmb3JlXCIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwibGluZVwiLCBsaW5lT2JqLCBwcmVwYXJlZE1lYXN1cmUpO1xuICAgICAgaWYgKGJveElzQWZ0ZXIoc3RhcnQsIHgsIHksIHRydWUpICYmIHN0YXJ0LnRvcCA+IHkpXG4gICAgICAgIHsgcGFydCA9IG9yZGVyW2luZGV4IC0gMV07IH1cbiAgICB9XG4gICAgcmV0dXJuIHBhcnRcbiAgfVxuXG4gIGZ1bmN0aW9uIGNvb3Jkc0JpZGlQYXJ0V3JhcHBlZChjbSwgbGluZU9iaiwgX2xpbmVObywgcHJlcGFyZWRNZWFzdXJlLCBvcmRlciwgeCwgeSkge1xuICAgIC8vIEluIGEgd3JhcHBlZCBsaW5lLCBydGwgdGV4dCBvbiB3cmFwcGluZyBib3VuZGFyaWVzIGNhbiBkbyB0aGluZ3NcbiAgICAvLyB0aGF0IGRvbid0IGNvcnJlc3BvbmQgdG8gdGhlIG9yZGVyaW5nIGluIG91ciBgb3JkZXJgIGFycmF5IGF0XG4gICAgLy8gYWxsLCBzbyBhIGJpbmFyeSBzZWFyY2ggZG9lc24ndCB3b3JrLCBhbmQgd2Ugd2FudCB0byByZXR1cm4gYVxuICAgIC8vIHBhcnQgdGhhdCBvbmx5IHNwYW5zIG9uZSBsaW5lIHNvIHRoYXQgdGhlIGJpbmFyeSBzZWFyY2ggaW5cbiAgICAvLyBjb29yZHNDaGFySW5uZXIgaXMgc2FmZS4gQXMgc3VjaCwgd2UgZmlyc3QgZmluZCB0aGUgZXh0ZW50IG9mIHRoZVxuICAgIC8vIHdyYXBwZWQgbGluZSwgYW5kIHRoZW4gZG8gYSBmbGF0IHNlYXJjaCBpbiB3aGljaCB3ZSBkaXNjYXJkIGFueVxuICAgIC8vIHNwYW5zIHRoYXQgYXJlbid0IG9uIHRoZSBsaW5lLlxuICAgIHZhciByZWYgPSB3cmFwcGVkTGluZUV4dGVudChjbSwgbGluZU9iaiwgcHJlcGFyZWRNZWFzdXJlLCB5KTtcbiAgICB2YXIgYmVnaW4gPSByZWYuYmVnaW47XG4gICAgdmFyIGVuZCA9IHJlZi5lbmQ7XG4gICAgaWYgKC9cXHMvLnRlc3QobGluZU9iai50ZXh0LmNoYXJBdChlbmQgLSAxKSkpIHsgZW5kLS07IH1cbiAgICB2YXIgcGFydCA9IG51bGwsIGNsb3Nlc3REaXN0ID0gbnVsbDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9yZGVyLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgcCA9IG9yZGVyW2ldO1xuICAgICAgaWYgKHAuZnJvbSA+PSBlbmQgfHwgcC50byA8PSBiZWdpbikgeyBjb250aW51ZSB9XG4gICAgICB2YXIgbHRyID0gcC5sZXZlbCAhPSAxO1xuICAgICAgdmFyIGVuZFggPSBtZWFzdXJlQ2hhclByZXBhcmVkKGNtLCBwcmVwYXJlZE1lYXN1cmUsIGx0ciA/IE1hdGgubWluKGVuZCwgcC50bykgLSAxIDogTWF0aC5tYXgoYmVnaW4sIHAuZnJvbSkpLnJpZ2h0O1xuICAgICAgLy8gV2VpZ2ggYWdhaW5zdCBzcGFucyBlbmRpbmcgYmVmb3JlIHRoaXMsIHNvIHRoYXQgdGhleSBhcmUgb25seVxuICAgICAgLy8gcGlja2VkIGlmIG5vdGhpbmcgZW5kcyBhZnRlclxuICAgICAgdmFyIGRpc3QgPSBlbmRYIDwgeCA/IHggLSBlbmRYICsgMWU5IDogZW5kWCAtIHg7XG4gICAgICBpZiAoIXBhcnQgfHwgY2xvc2VzdERpc3QgPiBkaXN0KSB7XG4gICAgICAgIHBhcnQgPSBwO1xuICAgICAgICBjbG9zZXN0RGlzdCA9IGRpc3Q7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICghcGFydCkgeyBwYXJ0ID0gb3JkZXJbb3JkZXIubGVuZ3RoIC0gMV07IH1cbiAgICAvLyBDbGlwIHRoZSBwYXJ0IHRvIHRoZSB3cmFwcGVkIGxpbmUuXG4gICAgaWYgKHBhcnQuZnJvbSA8IGJlZ2luKSB7IHBhcnQgPSB7ZnJvbTogYmVnaW4sIHRvOiBwYXJ0LnRvLCBsZXZlbDogcGFydC5sZXZlbH07IH1cbiAgICBpZiAocGFydC50byA+IGVuZCkgeyBwYXJ0ID0ge2Zyb206IHBhcnQuZnJvbSwgdG86IGVuZCwgbGV2ZWw6IHBhcnQubGV2ZWx9OyB9XG4gICAgcmV0dXJuIHBhcnRcbiAgfVxuXG4gIHZhciBtZWFzdXJlVGV4dDtcbiAgLy8gQ29tcHV0ZSB0aGUgZGVmYXVsdCB0ZXh0IGhlaWdodC5cbiAgZnVuY3Rpb24gdGV4dEhlaWdodChkaXNwbGF5KSB7XG4gICAgaWYgKGRpc3BsYXkuY2FjaGVkVGV4dEhlaWdodCAhPSBudWxsKSB7IHJldHVybiBkaXNwbGF5LmNhY2hlZFRleHRIZWlnaHQgfVxuICAgIGlmIChtZWFzdXJlVGV4dCA9PSBudWxsKSB7XG4gICAgICBtZWFzdXJlVGV4dCA9IGVsdChcInByZVwiLCBudWxsLCBcIkNvZGVNaXJyb3ItbGluZS1saWtlXCIpO1xuICAgICAgLy8gTWVhc3VyZSBhIGJ1bmNoIG9mIGxpbmVzLCBmb3IgYnJvd3NlcnMgdGhhdCBjb21wdXRlXG4gICAgICAvLyBmcmFjdGlvbmFsIGhlaWdodHMuXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDQ5OyArK2kpIHtcbiAgICAgICAgbWVhc3VyZVRleHQuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoXCJ4XCIpKTtcbiAgICAgICAgbWVhc3VyZVRleHQuYXBwZW5kQ2hpbGQoZWx0KFwiYnJcIikpO1xuICAgICAgfVxuICAgICAgbWVhc3VyZVRleHQuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoXCJ4XCIpKTtcbiAgICB9XG4gICAgcmVtb3ZlQ2hpbGRyZW5BbmRBZGQoZGlzcGxheS5tZWFzdXJlLCBtZWFzdXJlVGV4dCk7XG4gICAgdmFyIGhlaWdodCA9IG1lYXN1cmVUZXh0Lm9mZnNldEhlaWdodCAvIDUwO1xuICAgIGlmIChoZWlnaHQgPiAzKSB7IGRpc3BsYXkuY2FjaGVkVGV4dEhlaWdodCA9IGhlaWdodDsgfVxuICAgIHJlbW92ZUNoaWxkcmVuKGRpc3BsYXkubWVhc3VyZSk7XG4gICAgcmV0dXJuIGhlaWdodCB8fCAxXG4gIH1cblxuICAvLyBDb21wdXRlIHRoZSBkZWZhdWx0IGNoYXJhY3RlciB3aWR0aC5cbiAgZnVuY3Rpb24gY2hhcldpZHRoKGRpc3BsYXkpIHtcbiAgICBpZiAoZGlzcGxheS5jYWNoZWRDaGFyV2lkdGggIT0gbnVsbCkgeyByZXR1cm4gZGlzcGxheS5jYWNoZWRDaGFyV2lkdGggfVxuICAgIHZhciBhbmNob3IgPSBlbHQoXCJzcGFuXCIsIFwieHh4eHh4eHh4eFwiKTtcbiAgICB2YXIgcHJlID0gZWx0KFwicHJlXCIsIFthbmNob3JdLCBcIkNvZGVNaXJyb3ItbGluZS1saWtlXCIpO1xuICAgIHJlbW92ZUNoaWxkcmVuQW5kQWRkKGRpc3BsYXkubWVhc3VyZSwgcHJlKTtcbiAgICB2YXIgcmVjdCA9IGFuY2hvci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSwgd2lkdGggPSAocmVjdC5yaWdodCAtIHJlY3QubGVmdCkgLyAxMDtcbiAgICBpZiAod2lkdGggPiAyKSB7IGRpc3BsYXkuY2FjaGVkQ2hhcldpZHRoID0gd2lkdGg7IH1cbiAgICByZXR1cm4gd2lkdGggfHwgMTBcbiAgfVxuXG4gIC8vIERvIGEgYnVsay1yZWFkIG9mIHRoZSBET00gcG9zaXRpb25zIGFuZCBzaXplcyBuZWVkZWQgdG8gZHJhdyB0aGVcbiAgLy8gdmlldywgc28gdGhhdCB3ZSBkb24ndCBpbnRlcmxlYXZlIHJlYWRpbmcgYW5kIHdyaXRpbmcgdG8gdGhlIERPTS5cbiAgZnVuY3Rpb24gZ2V0RGltZW5zaW9ucyhjbSkge1xuICAgIHZhciBkID0gY20uZGlzcGxheSwgbGVmdCA9IHt9LCB3aWR0aCA9IHt9O1xuICAgIHZhciBndXR0ZXJMZWZ0ID0gZC5ndXR0ZXJzLmNsaWVudExlZnQ7XG4gICAgZm9yICh2YXIgbiA9IGQuZ3V0dGVycy5maXJzdENoaWxkLCBpID0gMDsgbjsgbiA9IG4ubmV4dFNpYmxpbmcsICsraSkge1xuICAgICAgdmFyIGlkID0gY20uZGlzcGxheS5ndXR0ZXJTcGVjc1tpXS5jbGFzc05hbWU7XG4gICAgICBsZWZ0W2lkXSA9IG4ub2Zmc2V0TGVmdCArIG4uY2xpZW50TGVmdCArIGd1dHRlckxlZnQ7XG4gICAgICB3aWR0aFtpZF0gPSBuLmNsaWVudFdpZHRoO1xuICAgIH1cbiAgICByZXR1cm4ge2ZpeGVkUG9zOiBjb21wZW5zYXRlRm9ySFNjcm9sbChkKSxcbiAgICAgICAgICAgIGd1dHRlclRvdGFsV2lkdGg6IGQuZ3V0dGVycy5vZmZzZXRXaWR0aCxcbiAgICAgICAgICAgIGd1dHRlckxlZnQ6IGxlZnQsXG4gICAgICAgICAgICBndXR0ZXJXaWR0aDogd2lkdGgsXG4gICAgICAgICAgICB3cmFwcGVyV2lkdGg6IGQud3JhcHBlci5jbGllbnRXaWR0aH1cbiAgfVxuXG4gIC8vIENvbXB1dGVzIGRpc3BsYXkuc2Nyb2xsZXIuc2Nyb2xsTGVmdCArIGRpc3BsYXkuZ3V0dGVycy5vZmZzZXRXaWR0aCxcbiAgLy8gYnV0IHVzaW5nIGdldEJvdW5kaW5nQ2xpZW50UmVjdCB0byBnZXQgYSBzdWItcGl4ZWwtYWNjdXJhdGVcbiAgLy8gcmVzdWx0LlxuICBmdW5jdGlvbiBjb21wZW5zYXRlRm9ySFNjcm9sbChkaXNwbGF5KSB7XG4gICAgcmV0dXJuIGRpc3BsYXkuc2Nyb2xsZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdCAtIGRpc3BsYXkuc2l6ZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdFxuICB9XG5cbiAgLy8gUmV0dXJucyBhIGZ1bmN0aW9uIHRoYXQgZXN0aW1hdGVzIHRoZSBoZWlnaHQgb2YgYSBsaW5lLCB0byB1c2UgYXNcbiAgLy8gZmlyc3QgYXBwcm94aW1hdGlvbiB1bnRpbCB0aGUgbGluZSBiZWNvbWVzIHZpc2libGUgKGFuZCBpcyB0aHVzXG4gIC8vIHByb3Blcmx5IG1lYXN1cmFibGUpLlxuICBmdW5jdGlvbiBlc3RpbWF0ZUhlaWdodChjbSkge1xuICAgIHZhciB0aCA9IHRleHRIZWlnaHQoY20uZGlzcGxheSksIHdyYXBwaW5nID0gY20ub3B0aW9ucy5saW5lV3JhcHBpbmc7XG4gICAgdmFyIHBlckxpbmUgPSB3cmFwcGluZyAmJiBNYXRoLm1heCg1LCBjbS5kaXNwbGF5LnNjcm9sbGVyLmNsaWVudFdpZHRoIC8gY2hhcldpZHRoKGNtLmRpc3BsYXkpIC0gMyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChsaW5lKSB7XG4gICAgICBpZiAobGluZUlzSGlkZGVuKGNtLmRvYywgbGluZSkpIHsgcmV0dXJuIDAgfVxuXG4gICAgICB2YXIgd2lkZ2V0c0hlaWdodCA9IDA7XG4gICAgICBpZiAobGluZS53aWRnZXRzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgbGluZS53aWRnZXRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChsaW5lLndpZGdldHNbaV0uaGVpZ2h0KSB7IHdpZGdldHNIZWlnaHQgKz0gbGluZS53aWRnZXRzW2ldLmhlaWdodDsgfVxuICAgICAgfSB9XG5cbiAgICAgIGlmICh3cmFwcGluZylcbiAgICAgICAgeyByZXR1cm4gd2lkZ2V0c0hlaWdodCArIChNYXRoLmNlaWwobGluZS50ZXh0Lmxlbmd0aCAvIHBlckxpbmUpIHx8IDEpICogdGggfVxuICAgICAgZWxzZVxuICAgICAgICB7IHJldHVybiB3aWRnZXRzSGVpZ2h0ICsgdGggfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGVzdGltYXRlTGluZUhlaWdodHMoY20pIHtcbiAgICB2YXIgZG9jID0gY20uZG9jLCBlc3QgPSBlc3RpbWF0ZUhlaWdodChjbSk7XG4gICAgZG9jLml0ZXIoZnVuY3Rpb24gKGxpbmUpIHtcbiAgICAgIHZhciBlc3RIZWlnaHQgPSBlc3QobGluZSk7XG4gICAgICBpZiAoZXN0SGVpZ2h0ICE9IGxpbmUuaGVpZ2h0KSB7IHVwZGF0ZUxpbmVIZWlnaHQobGluZSwgZXN0SGVpZ2h0KTsgfVxuICAgIH0pO1xuICB9XG5cbiAgLy8gR2l2ZW4gYSBtb3VzZSBldmVudCwgZmluZCB0aGUgY29ycmVzcG9uZGluZyBwb3NpdGlvbi4gSWYgbGliZXJhbFxuICAvLyBpcyBmYWxzZSwgaXQgY2hlY2tzIHdoZXRoZXIgYSBndXR0ZXIgb3Igc2Nyb2xsYmFyIHdhcyBjbGlja2VkLFxuICAvLyBhbmQgcmV0dXJucyBudWxsIGlmIGl0IHdhcy4gZm9yUmVjdCBpcyB1c2VkIGJ5IHJlY3Rhbmd1bGFyXG4gIC8vIHNlbGVjdGlvbnMsIGFuZCB0cmllcyB0byBlc3RpbWF0ZSBhIGNoYXJhY3RlciBwb3NpdGlvbiBldmVuIGZvclxuICAvLyBjb29yZGluYXRlcyBiZXlvbmQgdGhlIHJpZ2h0IG9mIHRoZSB0ZXh0LlxuICBmdW5jdGlvbiBwb3NGcm9tTW91c2UoY20sIGUsIGxpYmVyYWwsIGZvclJlY3QpIHtcbiAgICB2YXIgZGlzcGxheSA9IGNtLmRpc3BsYXk7XG4gICAgaWYgKCFsaWJlcmFsICYmIGVfdGFyZ2V0KGUpLmdldEF0dHJpYnV0ZShcImNtLW5vdC1jb250ZW50XCIpID09IFwidHJ1ZVwiKSB7IHJldHVybiBudWxsIH1cblxuICAgIHZhciB4LCB5LCBzcGFjZSA9IGRpc3BsYXkubGluZVNwYWNlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIC8vIEZhaWxzIHVucHJlZGljdGFibHkgb24gSUVbNjddIHdoZW4gbW91c2UgaXMgZHJhZ2dlZCBhcm91bmQgcXVpY2tseS5cbiAgICB0cnkgeyB4ID0gZS5jbGllbnRYIC0gc3BhY2UubGVmdDsgeSA9IGUuY2xpZW50WSAtIHNwYWNlLnRvcDsgfVxuICAgIGNhdGNoIChlJDEpIHsgcmV0dXJuIG51bGwgfVxuICAgIHZhciBjb29yZHMgPSBjb29yZHNDaGFyKGNtLCB4LCB5KSwgbGluZTtcbiAgICBpZiAoZm9yUmVjdCAmJiBjb29yZHMueFJlbCA+IDAgJiYgKGxpbmUgPSBnZXRMaW5lKGNtLmRvYywgY29vcmRzLmxpbmUpLnRleHQpLmxlbmd0aCA9PSBjb29yZHMuY2gpIHtcbiAgICAgIHZhciBjb2xEaWZmID0gY291bnRDb2x1bW4obGluZSwgbGluZS5sZW5ndGgsIGNtLm9wdGlvbnMudGFiU2l6ZSkgLSBsaW5lLmxlbmd0aDtcbiAgICAgIGNvb3JkcyA9IFBvcyhjb29yZHMubGluZSwgTWF0aC5tYXgoMCwgTWF0aC5yb3VuZCgoeCAtIHBhZGRpbmdIKGNtLmRpc3BsYXkpLmxlZnQpIC8gY2hhcldpZHRoKGNtLmRpc3BsYXkpKSAtIGNvbERpZmYpKTtcbiAgICB9XG4gICAgcmV0dXJuIGNvb3Jkc1xuICB9XG5cbiAgLy8gRmluZCB0aGUgdmlldyBlbGVtZW50IGNvcnJlc3BvbmRpbmcgdG8gYSBnaXZlbiBsaW5lLiBSZXR1cm4gbnVsbFxuICAvLyB3aGVuIHRoZSBsaW5lIGlzbid0IHZpc2libGUuXG4gIGZ1bmN0aW9uIGZpbmRWaWV3SW5kZXgoY20sIG4pIHtcbiAgICBpZiAobiA+PSBjbS5kaXNwbGF5LnZpZXdUbykgeyByZXR1cm4gbnVsbCB9XG4gICAgbiAtPSBjbS5kaXNwbGF5LnZpZXdGcm9tO1xuICAgIGlmIChuIDwgMCkgeyByZXR1cm4gbnVsbCB9XG4gICAgdmFyIHZpZXcgPSBjbS5kaXNwbGF5LnZpZXc7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2aWV3Lmxlbmd0aDsgaSsrKSB7XG4gICAgICBuIC09IHZpZXdbaV0uc2l6ZTtcbiAgICAgIGlmIChuIDwgMCkgeyByZXR1cm4gaSB9XG4gICAgfVxuICB9XG5cbiAgLy8gVXBkYXRlcyB0aGUgZGlzcGxheS52aWV3IGRhdGEgc3RydWN0dXJlIGZvciBhIGdpdmVuIGNoYW5nZSB0byB0aGVcbiAgLy8gZG9jdW1lbnQuIEZyb20gYW5kIHRvIGFyZSBpbiBwcmUtY2hhbmdlIGNvb3JkaW5hdGVzLiBMZW5kaWZmIGlzXG4gIC8vIHRoZSBhbW91bnQgb2YgbGluZXMgYWRkZWQgb3Igc3VidHJhY3RlZCBieSB0aGUgY2hhbmdlLiBUaGlzIGlzXG4gIC8vIHVzZWQgZm9yIGNoYW5nZXMgdGhhdCBzcGFuIG11bHRpcGxlIGxpbmVzLCBvciBjaGFuZ2UgdGhlIHdheVxuICAvLyBsaW5lcyBhcmUgZGl2aWRlZCBpbnRvIHZpc3VhbCBsaW5lcy4gcmVnTGluZUNoYW5nZSAoYmVsb3cpXG4gIC8vIHJlZ2lzdGVycyBzaW5nbGUtbGluZSBjaGFuZ2VzLlxuICBmdW5jdGlvbiByZWdDaGFuZ2UoY20sIGZyb20sIHRvLCBsZW5kaWZmKSB7XG4gICAgaWYgKGZyb20gPT0gbnVsbCkgeyBmcm9tID0gY20uZG9jLmZpcnN0OyB9XG4gICAgaWYgKHRvID09IG51bGwpIHsgdG8gPSBjbS5kb2MuZmlyc3QgKyBjbS5kb2Muc2l6ZTsgfVxuICAgIGlmICghbGVuZGlmZikgeyBsZW5kaWZmID0gMDsgfVxuXG4gICAgdmFyIGRpc3BsYXkgPSBjbS5kaXNwbGF5O1xuICAgIGlmIChsZW5kaWZmICYmIHRvIDwgZGlzcGxheS52aWV3VG8gJiZcbiAgICAgICAgKGRpc3BsYXkudXBkYXRlTGluZU51bWJlcnMgPT0gbnVsbCB8fCBkaXNwbGF5LnVwZGF0ZUxpbmVOdW1iZXJzID4gZnJvbSkpXG4gICAgICB7IGRpc3BsYXkudXBkYXRlTGluZU51bWJlcnMgPSBmcm9tOyB9XG5cbiAgICBjbS5jdXJPcC52aWV3Q2hhbmdlZCA9IHRydWU7XG5cbiAgICBpZiAoZnJvbSA+PSBkaXNwbGF5LnZpZXdUbykgeyAvLyBDaGFuZ2UgYWZ0ZXJcbiAgICAgIGlmIChzYXdDb2xsYXBzZWRTcGFucyAmJiB2aXN1YWxMaW5lTm8oY20uZG9jLCBmcm9tKSA8IGRpc3BsYXkudmlld1RvKVxuICAgICAgICB7IHJlc2V0VmlldyhjbSk7IH1cbiAgICB9IGVsc2UgaWYgKHRvIDw9IGRpc3BsYXkudmlld0Zyb20pIHsgLy8gQ2hhbmdlIGJlZm9yZVxuICAgICAgaWYgKHNhd0NvbGxhcHNlZFNwYW5zICYmIHZpc3VhbExpbmVFbmRObyhjbS5kb2MsIHRvICsgbGVuZGlmZikgPiBkaXNwbGF5LnZpZXdGcm9tKSB7XG4gICAgICAgIHJlc2V0VmlldyhjbSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkaXNwbGF5LnZpZXdGcm9tICs9IGxlbmRpZmY7XG4gICAgICAgIGRpc3BsYXkudmlld1RvICs9IGxlbmRpZmY7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChmcm9tIDw9IGRpc3BsYXkudmlld0Zyb20gJiYgdG8gPj0gZGlzcGxheS52aWV3VG8pIHsgLy8gRnVsbCBvdmVybGFwXG4gICAgICByZXNldFZpZXcoY20pO1xuICAgIH0gZWxzZSBpZiAoZnJvbSA8PSBkaXNwbGF5LnZpZXdGcm9tKSB7IC8vIFRvcCBvdmVybGFwXG4gICAgICB2YXIgY3V0ID0gdmlld0N1dHRpbmdQb2ludChjbSwgdG8sIHRvICsgbGVuZGlmZiwgMSk7XG4gICAgICBpZiAoY3V0KSB7XG4gICAgICAgIGRpc3BsYXkudmlldyA9IGRpc3BsYXkudmlldy5zbGljZShjdXQuaW5kZXgpO1xuICAgICAgICBkaXNwbGF5LnZpZXdGcm9tID0gY3V0LmxpbmVOO1xuICAgICAgICBkaXNwbGF5LnZpZXdUbyArPSBsZW5kaWZmO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzZXRWaWV3KGNtKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRvID49IGRpc3BsYXkudmlld1RvKSB7IC8vIEJvdHRvbSBvdmVybGFwXG4gICAgICB2YXIgY3V0JDEgPSB2aWV3Q3V0dGluZ1BvaW50KGNtLCBmcm9tLCBmcm9tLCAtMSk7XG4gICAgICBpZiAoY3V0JDEpIHtcbiAgICAgICAgZGlzcGxheS52aWV3ID0gZGlzcGxheS52aWV3LnNsaWNlKDAsIGN1dCQxLmluZGV4KTtcbiAgICAgICAgZGlzcGxheS52aWV3VG8gPSBjdXQkMS5saW5lTjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc2V0VmlldyhjbSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHsgLy8gR2FwIGluIHRoZSBtaWRkbGVcbiAgICAgIHZhciBjdXRUb3AgPSB2aWV3Q3V0dGluZ1BvaW50KGNtLCBmcm9tLCBmcm9tLCAtMSk7XG4gICAgICB2YXIgY3V0Qm90ID0gdmlld0N1dHRpbmdQb2ludChjbSwgdG8sIHRvICsgbGVuZGlmZiwgMSk7XG4gICAgICBpZiAoY3V0VG9wICYmIGN1dEJvdCkge1xuICAgICAgICBkaXNwbGF5LnZpZXcgPSBkaXNwbGF5LnZpZXcuc2xpY2UoMCwgY3V0VG9wLmluZGV4KVxuICAgICAgICAgIC5jb25jYXQoYnVpbGRWaWV3QXJyYXkoY20sIGN1dFRvcC5saW5lTiwgY3V0Qm90LmxpbmVOKSlcbiAgICAgICAgICAuY29uY2F0KGRpc3BsYXkudmlldy5zbGljZShjdXRCb3QuaW5kZXgpKTtcbiAgICAgICAgZGlzcGxheS52aWV3VG8gKz0gbGVuZGlmZjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc2V0VmlldyhjbSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIGV4dCA9IGRpc3BsYXkuZXh0ZXJuYWxNZWFzdXJlZDtcbiAgICBpZiAoZXh0KSB7XG4gICAgICBpZiAodG8gPCBleHQubGluZU4pXG4gICAgICAgIHsgZXh0LmxpbmVOICs9IGxlbmRpZmY7IH1cbiAgICAgIGVsc2UgaWYgKGZyb20gPCBleHQubGluZU4gKyBleHQuc2l6ZSlcbiAgICAgICAgeyBkaXNwbGF5LmV4dGVybmFsTWVhc3VyZWQgPSBudWxsOyB9XG4gICAgfVxuICB9XG5cbiAgLy8gUmVnaXN0ZXIgYSBjaGFuZ2UgdG8gYSBzaW5nbGUgbGluZS4gVHlwZSBtdXN0IGJlIG9uZSBvZiBcInRleHRcIixcbiAgLy8gXCJndXR0ZXJcIiwgXCJjbGFzc1wiLCBcIndpZGdldFwiXG4gIGZ1bmN0aW9uIHJlZ0xpbmVDaGFuZ2UoY20sIGxpbmUsIHR5cGUpIHtcbiAgICBjbS5jdXJPcC52aWV3Q2hhbmdlZCA9IHRydWU7XG4gICAgdmFyIGRpc3BsYXkgPSBjbS5kaXNwbGF5LCBleHQgPSBjbS5kaXNwbGF5LmV4dGVybmFsTWVhc3VyZWQ7XG4gICAgaWYgKGV4dCAmJiBsaW5lID49IGV4dC5saW5lTiAmJiBsaW5lIDwgZXh0LmxpbmVOICsgZXh0LnNpemUpXG4gICAgICB7IGRpc3BsYXkuZXh0ZXJuYWxNZWFzdXJlZCA9IG51bGw7IH1cblxuICAgIGlmIChsaW5lIDwgZGlzcGxheS52aWV3RnJvbSB8fCBsaW5lID49IGRpc3BsYXkudmlld1RvKSB7IHJldHVybiB9XG4gICAgdmFyIGxpbmVWaWV3ID0gZGlzcGxheS52aWV3W2ZpbmRWaWV3SW5kZXgoY20sIGxpbmUpXTtcbiAgICBpZiAobGluZVZpZXcubm9kZSA9PSBudWxsKSB7IHJldHVybiB9XG4gICAgdmFyIGFyciA9IGxpbmVWaWV3LmNoYW5nZXMgfHwgKGxpbmVWaWV3LmNoYW5nZXMgPSBbXSk7XG4gICAgaWYgKGluZGV4T2YoYXJyLCB0eXBlKSA9PSAtMSkgeyBhcnIucHVzaCh0eXBlKTsgfVxuICB9XG5cbiAgLy8gQ2xlYXIgdGhlIHZpZXcuXG4gIGZ1bmN0aW9uIHJlc2V0VmlldyhjbSkge1xuICAgIGNtLmRpc3BsYXkudmlld0Zyb20gPSBjbS5kaXNwbGF5LnZpZXdUbyA9IGNtLmRvYy5maXJzdDtcbiAgICBjbS5kaXNwbGF5LnZpZXcgPSBbXTtcbiAgICBjbS5kaXNwbGF5LnZpZXdPZmZzZXQgPSAwO1xuICB9XG5cbiAgZnVuY3Rpb24gdmlld0N1dHRpbmdQb2ludChjbSwgb2xkTiwgbmV3TiwgZGlyKSB7XG4gICAgdmFyIGluZGV4ID0gZmluZFZpZXdJbmRleChjbSwgb2xkTiksIGRpZmYsIHZpZXcgPSBjbS5kaXNwbGF5LnZpZXc7XG4gICAgaWYgKCFzYXdDb2xsYXBzZWRTcGFucyB8fCBuZXdOID09IGNtLmRvYy5maXJzdCArIGNtLmRvYy5zaXplKVxuICAgICAgeyByZXR1cm4ge2luZGV4OiBpbmRleCwgbGluZU46IG5ld059IH1cbiAgICB2YXIgbiA9IGNtLmRpc3BsYXkudmlld0Zyb207XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbmRleDsgaSsrKVxuICAgICAgeyBuICs9IHZpZXdbaV0uc2l6ZTsgfVxuICAgIGlmIChuICE9IG9sZE4pIHtcbiAgICAgIGlmIChkaXIgPiAwKSB7XG4gICAgICAgIGlmIChpbmRleCA9PSB2aWV3Lmxlbmd0aCAtIDEpIHsgcmV0dXJuIG51bGwgfVxuICAgICAgICBkaWZmID0gKG4gKyB2aWV3W2luZGV4XS5zaXplKSAtIG9sZE47XG4gICAgICAgIGluZGV4Kys7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkaWZmID0gbiAtIG9sZE47XG4gICAgICB9XG4gICAgICBvbGROICs9IGRpZmY7IG5ld04gKz0gZGlmZjtcbiAgICB9XG4gICAgd2hpbGUgKHZpc3VhbExpbmVObyhjbS5kb2MsIG5ld04pICE9IG5ld04pIHtcbiAgICAgIGlmIChpbmRleCA9PSAoZGlyIDwgMCA/IDAgOiB2aWV3Lmxlbmd0aCAtIDEpKSB7IHJldHVybiBudWxsIH1cbiAgICAgIG5ld04gKz0gZGlyICogdmlld1tpbmRleCAtIChkaXIgPCAwID8gMSA6IDApXS5zaXplO1xuICAgICAgaW5kZXggKz0gZGlyO1xuICAgIH1cbiAgICByZXR1cm4ge2luZGV4OiBpbmRleCwgbGluZU46IG5ld059XG4gIH1cblxuICAvLyBGb3JjZSB0aGUgdmlldyB0byBjb3ZlciBhIGdpdmVuIHJhbmdlLCBhZGRpbmcgZW1wdHkgdmlldyBlbGVtZW50XG4gIC8vIG9yIGNsaXBwaW5nIG9mZiBleGlzdGluZyBvbmVzIGFzIG5lZWRlZC5cbiAgZnVuY3Rpb24gYWRqdXN0VmlldyhjbSwgZnJvbSwgdG8pIHtcbiAgICB2YXIgZGlzcGxheSA9IGNtLmRpc3BsYXksIHZpZXcgPSBkaXNwbGF5LnZpZXc7XG4gICAgaWYgKHZpZXcubGVuZ3RoID09IDAgfHwgZnJvbSA+PSBkaXNwbGF5LnZpZXdUbyB8fCB0byA8PSBkaXNwbGF5LnZpZXdGcm9tKSB7XG4gICAgICBkaXNwbGF5LnZpZXcgPSBidWlsZFZpZXdBcnJheShjbSwgZnJvbSwgdG8pO1xuICAgICAgZGlzcGxheS52aWV3RnJvbSA9IGZyb207XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChkaXNwbGF5LnZpZXdGcm9tID4gZnJvbSlcbiAgICAgICAgeyBkaXNwbGF5LnZpZXcgPSBidWlsZFZpZXdBcnJheShjbSwgZnJvbSwgZGlzcGxheS52aWV3RnJvbSkuY29uY2F0KGRpc3BsYXkudmlldyk7IH1cbiAgICAgIGVsc2UgaWYgKGRpc3BsYXkudmlld0Zyb20gPCBmcm9tKVxuICAgICAgICB7IGRpc3BsYXkudmlldyA9IGRpc3BsYXkudmlldy5zbGljZShmaW5kVmlld0luZGV4KGNtLCBmcm9tKSk7IH1cbiAgICAgIGRpc3BsYXkudmlld0Zyb20gPSBmcm9tO1xuICAgICAgaWYgKGRpc3BsYXkudmlld1RvIDwgdG8pXG4gICAgICAgIHsgZGlzcGxheS52aWV3ID0gZGlzcGxheS52aWV3LmNvbmNhdChidWlsZFZpZXdBcnJheShjbSwgZGlzcGxheS52aWV3VG8sIHRvKSk7IH1cbiAgICAgIGVsc2UgaWYgKGRpc3BsYXkudmlld1RvID4gdG8pXG4gICAgICAgIHsgZGlzcGxheS52aWV3ID0gZGlzcGxheS52aWV3LnNsaWNlKDAsIGZpbmRWaWV3SW5kZXgoY20sIHRvKSk7IH1cbiAgICB9XG4gICAgZGlzcGxheS52aWV3VG8gPSB0bztcbiAgfVxuXG4gIC8vIENvdW50IHRoZSBudW1iZXIgb2YgbGluZXMgaW4gdGhlIHZpZXcgd2hvc2UgRE9NIHJlcHJlc2VudGF0aW9uIGlzXG4gIC8vIG91dCBvZiBkYXRlIChvciBub25leGlzdGVudCkuXG4gIGZ1bmN0aW9uIGNvdW50RGlydHlWaWV3KGNtKSB7XG4gICAgdmFyIHZpZXcgPSBjbS5kaXNwbGF5LnZpZXcsIGRpcnR5ID0gMDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZpZXcubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBsaW5lVmlldyA9IHZpZXdbaV07XG4gICAgICBpZiAoIWxpbmVWaWV3LmhpZGRlbiAmJiAoIWxpbmVWaWV3Lm5vZGUgfHwgbGluZVZpZXcuY2hhbmdlcykpIHsgKytkaXJ0eTsgfVxuICAgIH1cbiAgICByZXR1cm4gZGlydHlcbiAgfVxuXG4gIGZ1bmN0aW9uIHVwZGF0ZVNlbGVjdGlvbihjbSkge1xuICAgIGNtLmRpc3BsYXkuaW5wdXQuc2hvd1NlbGVjdGlvbihjbS5kaXNwbGF5LmlucHV0LnByZXBhcmVTZWxlY3Rpb24oKSk7XG4gIH1cblxuICBmdW5jdGlvbiBwcmVwYXJlU2VsZWN0aW9uKGNtLCBwcmltYXJ5KSB7XG4gICAgaWYgKCBwcmltYXJ5ID09PSB2b2lkIDAgKSBwcmltYXJ5ID0gdHJ1ZTtcblxuICAgIHZhciBkb2MgPSBjbS5kb2MsIHJlc3VsdCA9IHt9O1xuICAgIHZhciBjdXJGcmFnbWVudCA9IHJlc3VsdC5jdXJzb3JzID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICAgIHZhciBzZWxGcmFnbWVudCA9IHJlc3VsdC5zZWxlY3Rpb24gPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG5cbiAgICB2YXIgY3VzdG9tQ3Vyc29yID0gY20ub3B0aW9ucy4kY3VzdG9tQ3Vyc29yO1xuICAgIGlmIChjdXN0b21DdXJzb3IpIHsgcHJpbWFyeSA9IHRydWU7IH1cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRvYy5zZWwucmFuZ2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoIXByaW1hcnkgJiYgaSA9PSBkb2Muc2VsLnByaW1JbmRleCkgeyBjb250aW51ZSB9XG4gICAgICB2YXIgcmFuZ2UgPSBkb2Muc2VsLnJhbmdlc1tpXTtcbiAgICAgIGlmIChyYW5nZS5mcm9tKCkubGluZSA+PSBjbS5kaXNwbGF5LnZpZXdUbyB8fCByYW5nZS50bygpLmxpbmUgPCBjbS5kaXNwbGF5LnZpZXdGcm9tKSB7IGNvbnRpbnVlIH1cbiAgICAgIHZhciBjb2xsYXBzZWQgPSByYW5nZS5lbXB0eSgpO1xuICAgICAgaWYgKGN1c3RvbUN1cnNvcikge1xuICAgICAgICB2YXIgaGVhZCA9IGN1c3RvbUN1cnNvcihjbSwgcmFuZ2UpO1xuICAgICAgICBpZiAoaGVhZCkgeyBkcmF3U2VsZWN0aW9uQ3Vyc29yKGNtLCBoZWFkLCBjdXJGcmFnbWVudCk7IH1cbiAgICAgIH0gZWxzZSBpZiAoY29sbGFwc2VkIHx8IGNtLm9wdGlvbnMuc2hvd0N1cnNvcldoZW5TZWxlY3RpbmcpIHtcbiAgICAgICAgZHJhd1NlbGVjdGlvbkN1cnNvcihjbSwgcmFuZ2UuaGVhZCwgY3VyRnJhZ21lbnQpO1xuICAgICAgfVxuICAgICAgaWYgKCFjb2xsYXBzZWQpXG4gICAgICAgIHsgZHJhd1NlbGVjdGlvblJhbmdlKGNtLCByYW5nZSwgc2VsRnJhZ21lbnQpOyB9XG4gICAgfVxuICAgIHJldHVybiByZXN1bHRcbiAgfVxuXG4gIC8vIERyYXdzIGEgY3Vyc29yIGZvciB0aGUgZ2l2ZW4gcmFuZ2VcbiAgZnVuY3Rpb24gZHJhd1NlbGVjdGlvbkN1cnNvcihjbSwgaGVhZCwgb3V0cHV0KSB7XG4gICAgdmFyIHBvcyA9IGN1cnNvckNvb3JkcyhjbSwgaGVhZCwgXCJkaXZcIiwgbnVsbCwgbnVsbCwgIWNtLm9wdGlvbnMuc2luZ2xlQ3Vyc29ySGVpZ2h0UGVyTGluZSk7XG5cbiAgICB2YXIgY3Vyc29yID0gb3V0cHV0LmFwcGVuZENoaWxkKGVsdChcImRpdlwiLCBcIlxcdTAwYTBcIiwgXCJDb2RlTWlycm9yLWN1cnNvclwiKSk7XG4gICAgY3Vyc29yLnN0eWxlLmxlZnQgPSBwb3MubGVmdCArIFwicHhcIjtcbiAgICBjdXJzb3Iuc3R5bGUudG9wID0gcG9zLnRvcCArIFwicHhcIjtcbiAgICBjdXJzb3Iuc3R5bGUuaGVpZ2h0ID0gTWF0aC5tYXgoMCwgcG9zLmJvdHRvbSAtIHBvcy50b3ApICogY20ub3B0aW9ucy5jdXJzb3JIZWlnaHQgKyBcInB4XCI7XG5cbiAgICBpZiAoL1xcYmNtLWZhdC1jdXJzb3JcXGIvLnRlc3QoY20uZ2V0V3JhcHBlckVsZW1lbnQoKS5jbGFzc05hbWUpKSB7XG4gICAgICB2YXIgY2hhclBvcyA9IGNoYXJDb29yZHMoY20sIGhlYWQsIFwiZGl2XCIsIG51bGwsIG51bGwpO1xuICAgICAgdmFyIHdpZHRoID0gY2hhclBvcy5yaWdodCAtIGNoYXJQb3MubGVmdDtcbiAgICAgIGN1cnNvci5zdHlsZS53aWR0aCA9ICh3aWR0aCA+IDAgPyB3aWR0aCA6IGNtLmRlZmF1bHRDaGFyV2lkdGgoKSkgKyBcInB4XCI7XG4gICAgfVxuXG4gICAgaWYgKHBvcy5vdGhlcikge1xuICAgICAgLy8gU2Vjb25kYXJ5IGN1cnNvciwgc2hvd24gd2hlbiBvbiBhICdqdW1wJyBpbiBiaS1kaXJlY3Rpb25hbCB0ZXh0XG4gICAgICB2YXIgb3RoZXJDdXJzb3IgPSBvdXRwdXQuYXBwZW5kQ2hpbGQoZWx0KFwiZGl2XCIsIFwiXFx1MDBhMFwiLCBcIkNvZGVNaXJyb3ItY3Vyc29yIENvZGVNaXJyb3Itc2Vjb25kYXJ5Y3Vyc29yXCIpKTtcbiAgICAgIG90aGVyQ3Vyc29yLnN0eWxlLmRpc3BsYXkgPSBcIlwiO1xuICAgICAgb3RoZXJDdXJzb3Iuc3R5bGUubGVmdCA9IHBvcy5vdGhlci5sZWZ0ICsgXCJweFwiO1xuICAgICAgb3RoZXJDdXJzb3Iuc3R5bGUudG9wID0gcG9zLm90aGVyLnRvcCArIFwicHhcIjtcbiAgICAgIG90aGVyQ3Vyc29yLnN0eWxlLmhlaWdodCA9IChwb3Mub3RoZXIuYm90dG9tIC0gcG9zLm90aGVyLnRvcCkgKiAuODUgKyBcInB4XCI7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gY21wQ29vcmRzKGEsIGIpIHsgcmV0dXJuIGEudG9wIC0gYi50b3AgfHwgYS5sZWZ0IC0gYi5sZWZ0IH1cblxuICAvLyBEcmF3cyB0aGUgZ2l2ZW4gcmFuZ2UgYXMgYSBoaWdobGlnaHRlZCBzZWxlY3Rpb25cbiAgZnVuY3Rpb24gZHJhd1NlbGVjdGlvblJhbmdlKGNtLCByYW5nZSwgb3V0cHV0KSB7XG4gICAgdmFyIGRpc3BsYXkgPSBjbS5kaXNwbGF5LCBkb2MgPSBjbS5kb2M7XG4gICAgdmFyIGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICAgIHZhciBwYWRkaW5nID0gcGFkZGluZ0goY20uZGlzcGxheSksIGxlZnRTaWRlID0gcGFkZGluZy5sZWZ0O1xuICAgIHZhciByaWdodFNpZGUgPSBNYXRoLm1heChkaXNwbGF5LnNpemVyV2lkdGgsIGRpc3BsYXlXaWR0aChjbSkgLSBkaXNwbGF5LnNpemVyLm9mZnNldExlZnQpIC0gcGFkZGluZy5yaWdodDtcbiAgICB2YXIgZG9jTFRSID0gZG9jLmRpcmVjdGlvbiA9PSBcImx0clwiO1xuXG4gICAgZnVuY3Rpb24gYWRkKGxlZnQsIHRvcCwgd2lkdGgsIGJvdHRvbSkge1xuICAgICAgaWYgKHRvcCA8IDApIHsgdG9wID0gMDsgfVxuICAgICAgdG9wID0gTWF0aC5yb3VuZCh0b3ApO1xuICAgICAgYm90dG9tID0gTWF0aC5yb3VuZChib3R0b20pO1xuICAgICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQoZWx0KFwiZGl2XCIsIG51bGwsIFwiQ29kZU1pcnJvci1zZWxlY3RlZFwiLCAoXCJwb3NpdGlvbjogYWJzb2x1dGU7IGxlZnQ6IFwiICsgbGVmdCArIFwicHg7XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3A6IFwiICsgdG9wICsgXCJweDsgd2lkdGg6IFwiICsgKHdpZHRoID09IG51bGwgPyByaWdodFNpZGUgLSBsZWZ0IDogd2lkdGgpICsgXCJweDtcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogXCIgKyAoYm90dG9tIC0gdG9wKSArIFwicHhcIikpKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkcmF3Rm9yTGluZShsaW5lLCBmcm9tQXJnLCB0b0FyZykge1xuICAgICAgdmFyIGxpbmVPYmogPSBnZXRMaW5lKGRvYywgbGluZSk7XG4gICAgICB2YXIgbGluZUxlbiA9IGxpbmVPYmoudGV4dC5sZW5ndGg7XG4gICAgICB2YXIgc3RhcnQsIGVuZDtcbiAgICAgIGZ1bmN0aW9uIGNvb3JkcyhjaCwgYmlhcykge1xuICAgICAgICByZXR1cm4gY2hhckNvb3JkcyhjbSwgUG9zKGxpbmUsIGNoKSwgXCJkaXZcIiwgbGluZU9iaiwgYmlhcylcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gd3JhcFgocG9zLCBkaXIsIHNpZGUpIHtcbiAgICAgICAgdmFyIGV4dGVudCA9IHdyYXBwZWRMaW5lRXh0ZW50Q2hhcihjbSwgbGluZU9iaiwgbnVsbCwgcG9zKTtcbiAgICAgICAgdmFyIHByb3AgPSAoZGlyID09IFwibHRyXCIpID09IChzaWRlID09IFwiYWZ0ZXJcIikgPyBcImxlZnRcIiA6IFwicmlnaHRcIjtcbiAgICAgICAgdmFyIGNoID0gc2lkZSA9PSBcImFmdGVyXCIgPyBleHRlbnQuYmVnaW4gOiBleHRlbnQuZW5kIC0gKC9cXHMvLnRlc3QobGluZU9iai50ZXh0LmNoYXJBdChleHRlbnQuZW5kIC0gMSkpID8gMiA6IDEpO1xuICAgICAgICByZXR1cm4gY29vcmRzKGNoLCBwcm9wKVtwcm9wXVxuICAgICAgfVxuXG4gICAgICB2YXIgb3JkZXIgPSBnZXRPcmRlcihsaW5lT2JqLCBkb2MuZGlyZWN0aW9uKTtcbiAgICAgIGl0ZXJhdGVCaWRpU2VjdGlvbnMob3JkZXIsIGZyb21BcmcgfHwgMCwgdG9BcmcgPT0gbnVsbCA/IGxpbmVMZW4gOiB0b0FyZywgZnVuY3Rpb24gKGZyb20sIHRvLCBkaXIsIGkpIHtcbiAgICAgICAgdmFyIGx0ciA9IGRpciA9PSBcImx0clwiO1xuICAgICAgICB2YXIgZnJvbVBvcyA9IGNvb3Jkcyhmcm9tLCBsdHIgPyBcImxlZnRcIiA6IFwicmlnaHRcIik7XG4gICAgICAgIHZhciB0b1BvcyA9IGNvb3Jkcyh0byAtIDEsIGx0ciA/IFwicmlnaHRcIiA6IFwibGVmdFwiKTtcblxuICAgICAgICB2YXIgb3BlblN0YXJ0ID0gZnJvbUFyZyA9PSBudWxsICYmIGZyb20gPT0gMCwgb3BlbkVuZCA9IHRvQXJnID09IG51bGwgJiYgdG8gPT0gbGluZUxlbjtcbiAgICAgICAgdmFyIGZpcnN0ID0gaSA9PSAwLCBsYXN0ID0gIW9yZGVyIHx8IGkgPT0gb3JkZXIubGVuZ3RoIC0gMTtcbiAgICAgICAgaWYgKHRvUG9zLnRvcCAtIGZyb21Qb3MudG9wIDw9IDMpIHsgLy8gU2luZ2xlIGxpbmVcbiAgICAgICAgICB2YXIgb3BlbkxlZnQgPSAoZG9jTFRSID8gb3BlblN0YXJ0IDogb3BlbkVuZCkgJiYgZmlyc3Q7XG4gICAgICAgICAgdmFyIG9wZW5SaWdodCA9IChkb2NMVFIgPyBvcGVuRW5kIDogb3BlblN0YXJ0KSAmJiBsYXN0O1xuICAgICAgICAgIHZhciBsZWZ0ID0gb3BlbkxlZnQgPyBsZWZ0U2lkZSA6IChsdHIgPyBmcm9tUG9zIDogdG9Qb3MpLmxlZnQ7XG4gICAgICAgICAgdmFyIHJpZ2h0ID0gb3BlblJpZ2h0ID8gcmlnaHRTaWRlIDogKGx0ciA/IHRvUG9zIDogZnJvbVBvcykucmlnaHQ7XG4gICAgICAgICAgYWRkKGxlZnQsIGZyb21Qb3MudG9wLCByaWdodCAtIGxlZnQsIGZyb21Qb3MuYm90dG9tKTtcbiAgICAgICAgfSBlbHNlIHsgLy8gTXVsdGlwbGUgbGluZXNcbiAgICAgICAgICB2YXIgdG9wTGVmdCwgdG9wUmlnaHQsIGJvdExlZnQsIGJvdFJpZ2h0O1xuICAgICAgICAgIGlmIChsdHIpIHtcbiAgICAgICAgICAgIHRvcExlZnQgPSBkb2NMVFIgJiYgb3BlblN0YXJ0ICYmIGZpcnN0ID8gbGVmdFNpZGUgOiBmcm9tUG9zLmxlZnQ7XG4gICAgICAgICAgICB0b3BSaWdodCA9IGRvY0xUUiA/IHJpZ2h0U2lkZSA6IHdyYXBYKGZyb20sIGRpciwgXCJiZWZvcmVcIik7XG4gICAgICAgICAgICBib3RMZWZ0ID0gZG9jTFRSID8gbGVmdFNpZGUgOiB3cmFwWCh0bywgZGlyLCBcImFmdGVyXCIpO1xuICAgICAgICAgICAgYm90UmlnaHQgPSBkb2NMVFIgJiYgb3BlbkVuZCAmJiBsYXN0ID8gcmlnaHRTaWRlIDogdG9Qb3MucmlnaHQ7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRvcExlZnQgPSAhZG9jTFRSID8gbGVmdFNpZGUgOiB3cmFwWChmcm9tLCBkaXIsIFwiYmVmb3JlXCIpO1xuICAgICAgICAgICAgdG9wUmlnaHQgPSAhZG9jTFRSICYmIG9wZW5TdGFydCAmJiBmaXJzdCA/IHJpZ2h0U2lkZSA6IGZyb21Qb3MucmlnaHQ7XG4gICAgICAgICAgICBib3RMZWZ0ID0gIWRvY0xUUiAmJiBvcGVuRW5kICYmIGxhc3QgPyBsZWZ0U2lkZSA6IHRvUG9zLmxlZnQ7XG4gICAgICAgICAgICBib3RSaWdodCA9ICFkb2NMVFIgPyByaWdodFNpZGUgOiB3cmFwWCh0bywgZGlyLCBcImFmdGVyXCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBhZGQodG9wTGVmdCwgZnJvbVBvcy50b3AsIHRvcFJpZ2h0IC0gdG9wTGVmdCwgZnJvbVBvcy5ib3R0b20pO1xuICAgICAgICAgIGlmIChmcm9tUG9zLmJvdHRvbSA8IHRvUG9zLnRvcCkgeyBhZGQobGVmdFNpZGUsIGZyb21Qb3MuYm90dG9tLCBudWxsLCB0b1Bvcy50b3ApOyB9XG4gICAgICAgICAgYWRkKGJvdExlZnQsIHRvUG9zLnRvcCwgYm90UmlnaHQgLSBib3RMZWZ0LCB0b1Bvcy5ib3R0b20pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFzdGFydCB8fCBjbXBDb29yZHMoZnJvbVBvcywgc3RhcnQpIDwgMCkgeyBzdGFydCA9IGZyb21Qb3M7IH1cbiAgICAgICAgaWYgKGNtcENvb3Jkcyh0b1Bvcywgc3RhcnQpIDwgMCkgeyBzdGFydCA9IHRvUG9zOyB9XG4gICAgICAgIGlmICghZW5kIHx8IGNtcENvb3Jkcyhmcm9tUG9zLCBlbmQpIDwgMCkgeyBlbmQgPSBmcm9tUG9zOyB9XG4gICAgICAgIGlmIChjbXBDb29yZHModG9Qb3MsIGVuZCkgPCAwKSB7IGVuZCA9IHRvUG9zOyB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybiB7c3RhcnQ6IHN0YXJ0LCBlbmQ6IGVuZH1cbiAgICB9XG5cbiAgICB2YXIgc0Zyb20gPSByYW5nZS5mcm9tKCksIHNUbyA9IHJhbmdlLnRvKCk7XG4gICAgaWYgKHNGcm9tLmxpbmUgPT0gc1RvLmxpbmUpIHtcbiAgICAgIGRyYXdGb3JMaW5lKHNGcm9tLmxpbmUsIHNGcm9tLmNoLCBzVG8uY2gpO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgZnJvbUxpbmUgPSBnZXRMaW5lKGRvYywgc0Zyb20ubGluZSksIHRvTGluZSA9IGdldExpbmUoZG9jLCBzVG8ubGluZSk7XG4gICAgICB2YXIgc2luZ2xlVkxpbmUgPSB2aXN1YWxMaW5lKGZyb21MaW5lKSA9PSB2aXN1YWxMaW5lKHRvTGluZSk7XG4gICAgICB2YXIgbGVmdEVuZCA9IGRyYXdGb3JMaW5lKHNGcm9tLmxpbmUsIHNGcm9tLmNoLCBzaW5nbGVWTGluZSA/IGZyb21MaW5lLnRleHQubGVuZ3RoICsgMSA6IG51bGwpLmVuZDtcbiAgICAgIHZhciByaWdodFN0YXJ0ID0gZHJhd0ZvckxpbmUoc1RvLmxpbmUsIHNpbmdsZVZMaW5lID8gMCA6IG51bGwsIHNUby5jaCkuc3RhcnQ7XG4gICAgICBpZiAoc2luZ2xlVkxpbmUpIHtcbiAgICAgICAgaWYgKGxlZnRFbmQudG9wIDwgcmlnaHRTdGFydC50b3AgLSAyKSB7XG4gICAgICAgICAgYWRkKGxlZnRFbmQucmlnaHQsIGxlZnRFbmQudG9wLCBudWxsLCBsZWZ0RW5kLmJvdHRvbSk7XG4gICAgICAgICAgYWRkKGxlZnRTaWRlLCByaWdodFN0YXJ0LnRvcCwgcmlnaHRTdGFydC5sZWZ0LCByaWdodFN0YXJ0LmJvdHRvbSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYWRkKGxlZnRFbmQucmlnaHQsIGxlZnRFbmQudG9wLCByaWdodFN0YXJ0LmxlZnQgLSBsZWZ0RW5kLnJpZ2h0LCBsZWZ0RW5kLmJvdHRvbSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChsZWZ0RW5kLmJvdHRvbSA8IHJpZ2h0U3RhcnQudG9wKVxuICAgICAgICB7IGFkZChsZWZ0U2lkZSwgbGVmdEVuZC5ib3R0b20sIG51bGwsIHJpZ2h0U3RhcnQudG9wKTsgfVxuICAgIH1cblxuICAgIG91dHB1dC5hcHBlbmRDaGlsZChmcmFnbWVudCk7XG4gIH1cblxuICAvLyBDdXJzb3ItYmxpbmtpbmdcbiAgZnVuY3Rpb24gcmVzdGFydEJsaW5rKGNtKSB7XG4gICAgaWYgKCFjbS5zdGF0ZS5mb2N1c2VkKSB7IHJldHVybiB9XG4gICAgdmFyIGRpc3BsYXkgPSBjbS5kaXNwbGF5O1xuICAgIGNsZWFySW50ZXJ2YWwoZGlzcGxheS5ibGlua2VyKTtcbiAgICB2YXIgb24gPSB0cnVlO1xuICAgIGRpc3BsYXkuY3Vyc29yRGl2LnN0eWxlLnZpc2liaWxpdHkgPSBcIlwiO1xuICAgIGlmIChjbS5vcHRpb25zLmN1cnNvckJsaW5rUmF0ZSA+IDApXG4gICAgICB7IGRpc3BsYXkuYmxpbmtlciA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCFjbS5oYXNGb2N1cygpKSB7IG9uQmx1cihjbSk7IH1cbiAgICAgICAgZGlzcGxheS5jdXJzb3JEaXYuc3R5bGUudmlzaWJpbGl0eSA9IChvbiA9ICFvbikgPyBcIlwiIDogXCJoaWRkZW5cIjtcbiAgICAgIH0sIGNtLm9wdGlvbnMuY3Vyc29yQmxpbmtSYXRlKTsgfVxuICAgIGVsc2UgaWYgKGNtLm9wdGlvbnMuY3Vyc29yQmxpbmtSYXRlIDwgMClcbiAgICAgIHsgZGlzcGxheS5jdXJzb3JEaXYuc3R5bGUudmlzaWJpbGl0eSA9IFwiaGlkZGVuXCI7IH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGVuc3VyZUZvY3VzKGNtKSB7XG4gICAgaWYgKCFjbS5oYXNGb2N1cygpKSB7XG4gICAgICBjbS5kaXNwbGF5LmlucHV0LmZvY3VzKCk7XG4gICAgICBpZiAoIWNtLnN0YXRlLmZvY3VzZWQpIHsgb25Gb2N1cyhjbSk7IH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBkZWxheUJsdXJFdmVudChjbSkge1xuICAgIGNtLnN0YXRlLmRlbGF5aW5nQmx1ckV2ZW50ID0gdHJ1ZTtcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgaWYgKGNtLnN0YXRlLmRlbGF5aW5nQmx1ckV2ZW50KSB7XG4gICAgICBjbS5zdGF0ZS5kZWxheWluZ0JsdXJFdmVudCA9IGZhbHNlO1xuICAgICAgaWYgKGNtLnN0YXRlLmZvY3VzZWQpIHsgb25CbHVyKGNtKTsgfVxuICAgIH0gfSwgMTAwKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9uRm9jdXMoY20sIGUpIHtcbiAgICBpZiAoY20uc3RhdGUuZGVsYXlpbmdCbHVyRXZlbnQgJiYgIWNtLnN0YXRlLmRyYWdnaW5nVGV4dCkgeyBjbS5zdGF0ZS5kZWxheWluZ0JsdXJFdmVudCA9IGZhbHNlOyB9XG5cbiAgICBpZiAoY20ub3B0aW9ucy5yZWFkT25seSA9PSBcIm5vY3Vyc29yXCIpIHsgcmV0dXJuIH1cbiAgICBpZiAoIWNtLnN0YXRlLmZvY3VzZWQpIHtcbiAgICAgIHNpZ25hbChjbSwgXCJmb2N1c1wiLCBjbSwgZSk7XG4gICAgICBjbS5zdGF0ZS5mb2N1c2VkID0gdHJ1ZTtcbiAgICAgIGFkZENsYXNzKGNtLmRpc3BsYXkud3JhcHBlciwgXCJDb2RlTWlycm9yLWZvY3VzZWRcIik7XG4gICAgICAvLyBUaGlzIHRlc3QgcHJldmVudHMgdGhpcyBmcm9tIGZpcmluZyB3aGVuIGEgY29udGV4dFxuICAgICAgLy8gbWVudSBpcyBjbG9zZWQgKHNpbmNlIHRoZSBpbnB1dCByZXNldCB3b3VsZCBraWxsIHRoZVxuICAgICAgLy8gc2VsZWN0LWFsbCBkZXRlY3Rpb24gaGFjaylcbiAgICAgIGlmICghY20uY3VyT3AgJiYgY20uZGlzcGxheS5zZWxGb3JDb250ZXh0TWVudSAhPSBjbS5kb2Muc2VsKSB7XG4gICAgICAgIGNtLmRpc3BsYXkuaW5wdXQucmVzZXQoKTtcbiAgICAgICAgaWYgKHdlYmtpdCkgeyBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIGNtLmRpc3BsYXkuaW5wdXQucmVzZXQodHJ1ZSk7IH0sIDIwKTsgfSAvLyBJc3N1ZSAjMTczMFxuICAgICAgfVxuICAgICAgY20uZGlzcGxheS5pbnB1dC5yZWNlaXZlZEZvY3VzKCk7XG4gICAgfVxuICAgIHJlc3RhcnRCbGluayhjbSk7XG4gIH1cbiAgZnVuY3Rpb24gb25CbHVyKGNtLCBlKSB7XG4gICAgaWYgKGNtLnN0YXRlLmRlbGF5aW5nQmx1ckV2ZW50KSB7IHJldHVybiB9XG5cbiAgICBpZiAoY20uc3RhdGUuZm9jdXNlZCkge1xuICAgICAgc2lnbmFsKGNtLCBcImJsdXJcIiwgY20sIGUpO1xuICAgICAgY20uc3RhdGUuZm9jdXNlZCA9IGZhbHNlO1xuICAgICAgcm1DbGFzcyhjbS5kaXNwbGF5LndyYXBwZXIsIFwiQ29kZU1pcnJvci1mb2N1c2VkXCIpO1xuICAgIH1cbiAgICBjbGVhckludGVydmFsKGNtLmRpc3BsYXkuYmxpbmtlcik7XG4gICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7IGlmICghY20uc3RhdGUuZm9jdXNlZCkgeyBjbS5kaXNwbGF5LnNoaWZ0ID0gZmFsc2U7IH0gfSwgMTUwKTtcbiAgfVxuXG4gIC8vIFJlYWQgdGhlIGFjdHVhbCBoZWlnaHRzIG9mIHRoZSByZW5kZXJlZCBsaW5lcywgYW5kIHVwZGF0ZSB0aGVpclxuICAvLyBzdG9yZWQgaGVpZ2h0cyB0byBtYXRjaC5cbiAgZnVuY3Rpb24gdXBkYXRlSGVpZ2h0c0luVmlld3BvcnQoY20pIHtcbiAgICB2YXIgZGlzcGxheSA9IGNtLmRpc3BsYXk7XG4gICAgdmFyIHByZXZCb3R0b20gPSBkaXNwbGF5LmxpbmVEaXYub2Zmc2V0VG9wO1xuICAgIHZhciB2aWV3VG9wID0gTWF0aC5tYXgoMCwgZGlzcGxheS5zY3JvbGxlci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3ApO1xuICAgIHZhciBvbGRIZWlnaHQgPSBkaXNwbGF5LmxpbmVEaXYuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wO1xuICAgIHZhciBtdXN0U2Nyb2xsID0gMDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRpc3BsYXkudmlldy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGN1ciA9IGRpc3BsYXkudmlld1tpXSwgd3JhcHBpbmcgPSBjbS5vcHRpb25zLmxpbmVXcmFwcGluZztcbiAgICAgIHZhciBoZWlnaHQgPSAodm9pZCAwKSwgd2lkdGggPSAwO1xuICAgICAgaWYgKGN1ci5oaWRkZW4pIHsgY29udGludWUgfVxuICAgICAgb2xkSGVpZ2h0ICs9IGN1ci5saW5lLmhlaWdodDtcbiAgICAgIGlmIChpZSAmJiBpZV92ZXJzaW9uIDwgOCkge1xuICAgICAgICB2YXIgYm90ID0gY3VyLm5vZGUub2Zmc2V0VG9wICsgY3VyLm5vZGUub2Zmc2V0SGVpZ2h0O1xuICAgICAgICBoZWlnaHQgPSBib3QgLSBwcmV2Qm90dG9tO1xuICAgICAgICBwcmV2Qm90dG9tID0gYm90O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGJveCA9IGN1ci5ub2RlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICBoZWlnaHQgPSBib3guYm90dG9tIC0gYm94LnRvcDtcbiAgICAgICAgLy8gQ2hlY2sgdGhhdCBsaW5lcyBkb24ndCBleHRlbmQgcGFzdCB0aGUgcmlnaHQgb2YgdGhlIGN1cnJlbnRcbiAgICAgICAgLy8gZWRpdG9yIHdpZHRoXG4gICAgICAgIGlmICghd3JhcHBpbmcgJiYgY3VyLnRleHQuZmlyc3RDaGlsZClcbiAgICAgICAgICB7IHdpZHRoID0gY3VyLnRleHQuZmlyc3RDaGlsZC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5yaWdodCAtIGJveC5sZWZ0IC0gMTsgfVxuICAgICAgfVxuICAgICAgdmFyIGRpZmYgPSBjdXIubGluZS5oZWlnaHQgLSBoZWlnaHQ7XG4gICAgICBpZiAoZGlmZiA+IC4wMDUgfHwgZGlmZiA8IC0uMDA1KSB7XG4gICAgICAgIGlmIChvbGRIZWlnaHQgPCB2aWV3VG9wKSB7IG11c3RTY3JvbGwgLT0gZGlmZjsgfVxuICAgICAgICB1cGRhdGVMaW5lSGVpZ2h0KGN1ci5saW5lLCBoZWlnaHQpO1xuICAgICAgICB1cGRhdGVXaWRnZXRIZWlnaHQoY3VyLmxpbmUpO1xuICAgICAgICBpZiAoY3VyLnJlc3QpIHsgZm9yICh2YXIgaiA9IDA7IGogPCBjdXIucmVzdC5sZW5ndGg7IGorKylcbiAgICAgICAgICB7IHVwZGF0ZVdpZGdldEhlaWdodChjdXIucmVzdFtqXSk7IH0gfVxuICAgICAgfVxuICAgICAgaWYgKHdpZHRoID4gY20uZGlzcGxheS5zaXplcldpZHRoKSB7XG4gICAgICAgIHZhciBjaFdpZHRoID0gTWF0aC5jZWlsKHdpZHRoIC8gY2hhcldpZHRoKGNtLmRpc3BsYXkpKTtcbiAgICAgICAgaWYgKGNoV2lkdGggPiBjbS5kaXNwbGF5Lm1heExpbmVMZW5ndGgpIHtcbiAgICAgICAgICBjbS5kaXNwbGF5Lm1heExpbmVMZW5ndGggPSBjaFdpZHRoO1xuICAgICAgICAgIGNtLmRpc3BsYXkubWF4TGluZSA9IGN1ci5saW5lO1xuICAgICAgICAgIGNtLmRpc3BsYXkubWF4TGluZUNoYW5nZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChNYXRoLmFicyhtdXN0U2Nyb2xsKSA+IDIpIHsgZGlzcGxheS5zY3JvbGxlci5zY3JvbGxUb3AgKz0gbXVzdFNjcm9sbDsgfVxuICB9XG5cbiAgLy8gUmVhZCBhbmQgc3RvcmUgdGhlIGhlaWdodCBvZiBsaW5lIHdpZGdldHMgYXNzb2NpYXRlZCB3aXRoIHRoZVxuICAvLyBnaXZlbiBsaW5lLlxuICBmdW5jdGlvbiB1cGRhdGVXaWRnZXRIZWlnaHQobGluZSkge1xuICAgIGlmIChsaW5lLndpZGdldHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBsaW5lLndpZGdldHMubGVuZ3RoOyArK2kpIHtcbiAgICAgIHZhciB3ID0gbGluZS53aWRnZXRzW2ldLCBwYXJlbnQgPSB3Lm5vZGUucGFyZW50Tm9kZTtcbiAgICAgIGlmIChwYXJlbnQpIHsgdy5oZWlnaHQgPSBwYXJlbnQub2Zmc2V0SGVpZ2h0OyB9XG4gICAgfSB9XG4gIH1cblxuICAvLyBDb21wdXRlIHRoZSBsaW5lcyB0aGF0IGFyZSB2aXNpYmxlIGluIGEgZ2l2ZW4gdmlld3BvcnQgKGRlZmF1bHRzXG4gIC8vIHRoZSBjdXJyZW50IHNjcm9sbCBwb3NpdGlvbikuIHZpZXdwb3J0IG1heSBjb250YWluIHRvcCxcbiAgLy8gaGVpZ2h0LCBhbmQgZW5zdXJlIChzZWUgb3Auc2Nyb2xsVG9Qb3MpIHByb3BlcnRpZXMuXG4gIGZ1bmN0aW9uIHZpc2libGVMaW5lcyhkaXNwbGF5LCBkb2MsIHZpZXdwb3J0KSB7XG4gICAgdmFyIHRvcCA9IHZpZXdwb3J0ICYmIHZpZXdwb3J0LnRvcCAhPSBudWxsID8gTWF0aC5tYXgoMCwgdmlld3BvcnQudG9wKSA6IGRpc3BsYXkuc2Nyb2xsZXIuc2Nyb2xsVG9wO1xuICAgIHRvcCA9IE1hdGguZmxvb3IodG9wIC0gcGFkZGluZ1RvcChkaXNwbGF5KSk7XG4gICAgdmFyIGJvdHRvbSA9IHZpZXdwb3J0ICYmIHZpZXdwb3J0LmJvdHRvbSAhPSBudWxsID8gdmlld3BvcnQuYm90dG9tIDogdG9wICsgZGlzcGxheS53cmFwcGVyLmNsaWVudEhlaWdodDtcblxuICAgIHZhciBmcm9tID0gbGluZUF0SGVpZ2h0KGRvYywgdG9wKSwgdG8gPSBsaW5lQXRIZWlnaHQoZG9jLCBib3R0b20pO1xuICAgIC8vIEVuc3VyZSBpcyBhIHtmcm9tOiB7bGluZSwgY2h9LCB0bzoge2xpbmUsIGNofX0gb2JqZWN0LCBhbmRcbiAgICAvLyBmb3JjZXMgdGhvc2UgbGluZXMgaW50byB0aGUgdmlld3BvcnQgKGlmIHBvc3NpYmxlKS5cbiAgICBpZiAodmlld3BvcnQgJiYgdmlld3BvcnQuZW5zdXJlKSB7XG4gICAgICB2YXIgZW5zdXJlRnJvbSA9IHZpZXdwb3J0LmVuc3VyZS5mcm9tLmxpbmUsIGVuc3VyZVRvID0gdmlld3BvcnQuZW5zdXJlLnRvLmxpbmU7XG4gICAgICBpZiAoZW5zdXJlRnJvbSA8IGZyb20pIHtcbiAgICAgICAgZnJvbSA9IGVuc3VyZUZyb207XG4gICAgICAgIHRvID0gbGluZUF0SGVpZ2h0KGRvYywgaGVpZ2h0QXRMaW5lKGdldExpbmUoZG9jLCBlbnN1cmVGcm9tKSkgKyBkaXNwbGF5LndyYXBwZXIuY2xpZW50SGVpZ2h0KTtcbiAgICAgIH0gZWxzZSBpZiAoTWF0aC5taW4oZW5zdXJlVG8sIGRvYy5sYXN0TGluZSgpKSA+PSB0bykge1xuICAgICAgICBmcm9tID0gbGluZUF0SGVpZ2h0KGRvYywgaGVpZ2h0QXRMaW5lKGdldExpbmUoZG9jLCBlbnN1cmVUbykpIC0gZGlzcGxheS53cmFwcGVyLmNsaWVudEhlaWdodCk7XG4gICAgICAgIHRvID0gZW5zdXJlVG87XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB7ZnJvbTogZnJvbSwgdG86IE1hdGgubWF4KHRvLCBmcm9tICsgMSl9XG4gIH1cblxuICAvLyBTQ1JPTExJTkcgVEhJTkdTIElOVE8gVklFV1xuXG4gIC8vIElmIGFuIGVkaXRvciBzaXRzIG9uIHRoZSB0b3Agb3IgYm90dG9tIG9mIHRoZSB3aW5kb3csIHBhcnRpYWxseVxuICAvLyBzY3JvbGxlZCBvdXQgb2YgdmlldywgdGhpcyBlbnN1cmVzIHRoYXQgdGhlIGN1cnNvciBpcyB2aXNpYmxlLlxuICBmdW5jdGlvbiBtYXliZVNjcm9sbFdpbmRvdyhjbSwgcmVjdCkge1xuICAgIGlmIChzaWduYWxET01FdmVudChjbSwgXCJzY3JvbGxDdXJzb3JJbnRvVmlld1wiKSkgeyByZXR1cm4gfVxuXG4gICAgdmFyIGRpc3BsYXkgPSBjbS5kaXNwbGF5LCBib3ggPSBkaXNwbGF5LnNpemVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLCBkb1Njcm9sbCA9IG51bGw7XG4gICAgdmFyIGRvYyA9IGRpc3BsYXkud3JhcHBlci5vd25lckRvY3VtZW50O1xuICAgIGlmIChyZWN0LnRvcCArIGJveC50b3AgPCAwKSB7IGRvU2Nyb2xsID0gdHJ1ZTsgfVxuICAgIGVsc2UgaWYgKHJlY3QuYm90dG9tICsgYm94LnRvcCA+IChkb2MuZGVmYXVsdFZpZXcuaW5uZXJIZWlnaHQgfHwgZG9jLmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQpKSB7IGRvU2Nyb2xsID0gZmFsc2U7IH1cbiAgICBpZiAoZG9TY3JvbGwgIT0gbnVsbCAmJiAhcGhhbnRvbSkge1xuICAgICAgdmFyIHNjcm9sbE5vZGUgPSBlbHQoXCJkaXZcIiwgXCJcXHUyMDBiXCIsIG51bGwsIChcInBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gICAgICAgICAgICAgICAgICAgICAgICAgdG9wOiBcIiArIChyZWN0LnRvcCAtIGRpc3BsYXkudmlld09mZnNldCAtIHBhZGRpbmdUb3AoY20uZGlzcGxheSkpICsgXCJweDtcXG4gICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiBcIiArIChyZWN0LmJvdHRvbSAtIHJlY3QudG9wICsgc2Nyb2xsR2FwKGNtKSArIGRpc3BsYXkuYmFySGVpZ2h0KSArIFwicHg7XFxuICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6IFwiICsgKHJlY3QubGVmdCkgKyBcInB4OyB3aWR0aDogXCIgKyAoTWF0aC5tYXgoMiwgcmVjdC5yaWdodCAtIHJlY3QubGVmdCkpICsgXCJweDtcIikpO1xuICAgICAgY20uZGlzcGxheS5saW5lU3BhY2UuYXBwZW5kQ2hpbGQoc2Nyb2xsTm9kZSk7XG4gICAgICBzY3JvbGxOb2RlLnNjcm9sbEludG9WaWV3KGRvU2Nyb2xsKTtcbiAgICAgIGNtLmRpc3BsYXkubGluZVNwYWNlLnJlbW92ZUNoaWxkKHNjcm9sbE5vZGUpO1xuICAgIH1cbiAgfVxuXG4gIC8vIFNjcm9sbCBhIGdpdmVuIHBvc2l0aW9uIGludG8gdmlldyAoaW1tZWRpYXRlbHkpLCB2ZXJpZnlpbmcgdGhhdFxuICAvLyBpdCBhY3R1YWxseSBiZWNhbWUgdmlzaWJsZSAoYXMgbGluZSBoZWlnaHRzIGFyZSBhY2N1cmF0ZWx5XG4gIC8vIG1lYXN1cmVkLCB0aGUgcG9zaXRpb24gb2Ygc29tZXRoaW5nIG1heSAnZHJpZnQnIGR1cmluZyBkcmF3aW5nKS5cbiAgZnVuY3Rpb24gc2Nyb2xsUG9zSW50b1ZpZXcoY20sIHBvcywgZW5kLCBtYXJnaW4pIHtcbiAgICBpZiAobWFyZ2luID09IG51bGwpIHsgbWFyZ2luID0gMDsgfVxuICAgIHZhciByZWN0O1xuICAgIGlmICghY20ub3B0aW9ucy5saW5lV3JhcHBpbmcgJiYgcG9zID09IGVuZCkge1xuICAgICAgLy8gU2V0IHBvcyBhbmQgZW5kIHRvIHRoZSBjdXJzb3IgcG9zaXRpb25zIGFyb3VuZCB0aGUgY2hhcmFjdGVyIHBvcyBzdGlja3MgdG9cbiAgICAgIC8vIElmIHBvcy5zdGlja3kgPT0gXCJiZWZvcmVcIiwgdGhhdCBpcyBhcm91bmQgcG9zLmNoIC0gMSwgb3RoZXJ3aXNlIGFyb3VuZCBwb3MuY2hcbiAgICAgIC8vIElmIHBvcyA9PSBQb3MoXywgMCwgXCJiZWZvcmVcIiksIHBvcyBhbmQgZW5kIGFyZSB1bmNoYW5nZWRcbiAgICAgIGVuZCA9IHBvcy5zdGlja3kgPT0gXCJiZWZvcmVcIiA/IFBvcyhwb3MubGluZSwgcG9zLmNoICsgMSwgXCJiZWZvcmVcIikgOiBwb3M7XG4gICAgICBwb3MgPSBwb3MuY2ggPyBQb3MocG9zLmxpbmUsIHBvcy5zdGlja3kgPT0gXCJiZWZvcmVcIiA/IHBvcy5jaCAtIDEgOiBwb3MuY2gsIFwiYWZ0ZXJcIikgOiBwb3M7XG4gICAgfVxuICAgIGZvciAodmFyIGxpbWl0ID0gMDsgbGltaXQgPCA1OyBsaW1pdCsrKSB7XG4gICAgICB2YXIgY2hhbmdlZCA9IGZhbHNlO1xuICAgICAgdmFyIGNvb3JkcyA9IGN1cnNvckNvb3JkcyhjbSwgcG9zKTtcbiAgICAgIHZhciBlbmRDb29yZHMgPSAhZW5kIHx8IGVuZCA9PSBwb3MgPyBjb29yZHMgOiBjdXJzb3JDb29yZHMoY20sIGVuZCk7XG4gICAgICByZWN0ID0ge2xlZnQ6IE1hdGgubWluKGNvb3Jkcy5sZWZ0LCBlbmRDb29yZHMubGVmdCksXG4gICAgICAgICAgICAgIHRvcDogTWF0aC5taW4oY29vcmRzLnRvcCwgZW5kQ29vcmRzLnRvcCkgLSBtYXJnaW4sXG4gICAgICAgICAgICAgIHJpZ2h0OiBNYXRoLm1heChjb29yZHMubGVmdCwgZW5kQ29vcmRzLmxlZnQpLFxuICAgICAgICAgICAgICBib3R0b206IE1hdGgubWF4KGNvb3Jkcy5ib3R0b20sIGVuZENvb3Jkcy5ib3R0b20pICsgbWFyZ2lufTtcbiAgICAgIHZhciBzY3JvbGxQb3MgPSBjYWxjdWxhdGVTY3JvbGxQb3MoY20sIHJlY3QpO1xuICAgICAgdmFyIHN0YXJ0VG9wID0gY20uZG9jLnNjcm9sbFRvcCwgc3RhcnRMZWZ0ID0gY20uZG9jLnNjcm9sbExlZnQ7XG4gICAgICBpZiAoc2Nyb2xsUG9zLnNjcm9sbFRvcCAhPSBudWxsKSB7XG4gICAgICAgIHVwZGF0ZVNjcm9sbFRvcChjbSwgc2Nyb2xsUG9zLnNjcm9sbFRvcCk7XG4gICAgICAgIGlmIChNYXRoLmFicyhjbS5kb2Muc2Nyb2xsVG9wIC0gc3RhcnRUb3ApID4gMSkgeyBjaGFuZ2VkID0gdHJ1ZTsgfVxuICAgICAgfVxuICAgICAgaWYgKHNjcm9sbFBvcy5zY3JvbGxMZWZ0ICE9IG51bGwpIHtcbiAgICAgICAgc2V0U2Nyb2xsTGVmdChjbSwgc2Nyb2xsUG9zLnNjcm9sbExlZnQpO1xuICAgICAgICBpZiAoTWF0aC5hYnMoY20uZG9jLnNjcm9sbExlZnQgLSBzdGFydExlZnQpID4gMSkgeyBjaGFuZ2VkID0gdHJ1ZTsgfVxuICAgICAgfVxuICAgICAgaWYgKCFjaGFuZ2VkKSB7IGJyZWFrIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlY3RcbiAgfVxuXG4gIC8vIFNjcm9sbCBhIGdpdmVuIHNldCBvZiBjb29yZGluYXRlcyBpbnRvIHZpZXcgKGltbWVkaWF0ZWx5KS5cbiAgZnVuY3Rpb24gc2Nyb2xsSW50b1ZpZXcoY20sIHJlY3QpIHtcbiAgICB2YXIgc2Nyb2xsUG9zID0gY2FsY3VsYXRlU2Nyb2xsUG9zKGNtLCByZWN0KTtcbiAgICBpZiAoc2Nyb2xsUG9zLnNjcm9sbFRvcCAhPSBudWxsKSB7IHVwZGF0ZVNjcm9sbFRvcChjbSwgc2Nyb2xsUG9zLnNjcm9sbFRvcCk7IH1cbiAgICBpZiAoc2Nyb2xsUG9zLnNjcm9sbExlZnQgIT0gbnVsbCkgeyBzZXRTY3JvbGxMZWZ0KGNtLCBzY3JvbGxQb3Muc2Nyb2xsTGVmdCk7IH1cbiAgfVxuXG4gIC8vIENhbGN1bGF0ZSBhIG5ldyBzY3JvbGwgcG9zaXRpb24gbmVlZGVkIHRvIHNjcm9sbCB0aGUgZ2l2ZW5cbiAgLy8gcmVjdGFuZ2xlIGludG8gdmlldy4gUmV0dXJucyBhbiBvYmplY3Qgd2l0aCBzY3JvbGxUb3AgYW5kXG4gIC8vIHNjcm9sbExlZnQgcHJvcGVydGllcy4gV2hlbiB0aGVzZSBhcmUgdW5kZWZpbmVkLCB0aGVcbiAgLy8gdmVydGljYWwvaG9yaXpvbnRhbCBwb3NpdGlvbiBkb2VzIG5vdCBuZWVkIHRvIGJlIGFkanVzdGVkLlxuICBmdW5jdGlvbiBjYWxjdWxhdGVTY3JvbGxQb3MoY20sIHJlY3QpIHtcbiAgICB2YXIgZGlzcGxheSA9IGNtLmRpc3BsYXksIHNuYXBNYXJnaW4gPSB0ZXh0SGVpZ2h0KGNtLmRpc3BsYXkpO1xuICAgIGlmIChyZWN0LnRvcCA8IDApIHsgcmVjdC50b3AgPSAwOyB9XG4gICAgdmFyIHNjcmVlbnRvcCA9IGNtLmN1ck9wICYmIGNtLmN1ck9wLnNjcm9sbFRvcCAhPSBudWxsID8gY20uY3VyT3Auc2Nyb2xsVG9wIDogZGlzcGxheS5zY3JvbGxlci5zY3JvbGxUb3A7XG4gICAgdmFyIHNjcmVlbiA9IGRpc3BsYXlIZWlnaHQoY20pLCByZXN1bHQgPSB7fTtcbiAgICBpZiAocmVjdC5ib3R0b20gLSByZWN0LnRvcCA+IHNjcmVlbikgeyByZWN0LmJvdHRvbSA9IHJlY3QudG9wICsgc2NyZWVuOyB9XG4gICAgdmFyIGRvY0JvdHRvbSA9IGNtLmRvYy5oZWlnaHQgKyBwYWRkaW5nVmVydChkaXNwbGF5KTtcbiAgICB2YXIgYXRUb3AgPSByZWN0LnRvcCA8IHNuYXBNYXJnaW4sIGF0Qm90dG9tID0gcmVjdC5ib3R0b20gPiBkb2NCb3R0b20gLSBzbmFwTWFyZ2luO1xuICAgIGlmIChyZWN0LnRvcCA8IHNjcmVlbnRvcCkge1xuICAgICAgcmVzdWx0LnNjcm9sbFRvcCA9IGF0VG9wID8gMCA6IHJlY3QudG9wO1xuICAgIH0gZWxzZSBpZiAocmVjdC5ib3R0b20gPiBzY3JlZW50b3AgKyBzY3JlZW4pIHtcbiAgICAgIHZhciBuZXdUb3AgPSBNYXRoLm1pbihyZWN0LnRvcCwgKGF0Qm90dG9tID8gZG9jQm90dG9tIDogcmVjdC5ib3R0b20pIC0gc2NyZWVuKTtcbiAgICAgIGlmIChuZXdUb3AgIT0gc2NyZWVudG9wKSB7IHJlc3VsdC5zY3JvbGxUb3AgPSBuZXdUb3A7IH1cbiAgICB9XG5cbiAgICB2YXIgZ3V0dGVyU3BhY2UgPSBjbS5vcHRpb25zLmZpeGVkR3V0dGVyID8gMCA6IGRpc3BsYXkuZ3V0dGVycy5vZmZzZXRXaWR0aDtcbiAgICB2YXIgc2NyZWVubGVmdCA9IGNtLmN1ck9wICYmIGNtLmN1ck9wLnNjcm9sbExlZnQgIT0gbnVsbCA/IGNtLmN1ck9wLnNjcm9sbExlZnQgOiBkaXNwbGF5LnNjcm9sbGVyLnNjcm9sbExlZnQgLSBndXR0ZXJTcGFjZTtcbiAgICB2YXIgc2NyZWVudyA9IGRpc3BsYXlXaWR0aChjbSkgLSBkaXNwbGF5Lmd1dHRlcnMub2Zmc2V0V2lkdGg7XG4gICAgdmFyIHRvb1dpZGUgPSByZWN0LnJpZ2h0IC0gcmVjdC5sZWZ0ID4gc2NyZWVudztcbiAgICBpZiAodG9vV2lkZSkgeyByZWN0LnJpZ2h0ID0gcmVjdC5sZWZ0ICsgc2NyZWVudzsgfVxuICAgIGlmIChyZWN0LmxlZnQgPCAxMClcbiAgICAgIHsgcmVzdWx0LnNjcm9sbExlZnQgPSAwOyB9XG4gICAgZWxzZSBpZiAocmVjdC5sZWZ0IDwgc2NyZWVubGVmdClcbiAgICAgIHsgcmVzdWx0LnNjcm9sbExlZnQgPSBNYXRoLm1heCgwLCByZWN0LmxlZnQgKyBndXR0ZXJTcGFjZSAtICh0b29XaWRlID8gMCA6IDEwKSk7IH1cbiAgICBlbHNlIGlmIChyZWN0LnJpZ2h0ID4gc2NyZWVudyArIHNjcmVlbmxlZnQgLSAzKVxuICAgICAgeyByZXN1bHQuc2Nyb2xsTGVmdCA9IHJlY3QucmlnaHQgKyAodG9vV2lkZSA/IDAgOiAxMCkgLSBzY3JlZW53OyB9XG4gICAgcmV0dXJuIHJlc3VsdFxuICB9XG5cbiAgLy8gU3RvcmUgYSByZWxhdGl2ZSBhZGp1c3RtZW50IHRvIHRoZSBzY3JvbGwgcG9zaXRpb24gaW4gdGhlIGN1cnJlbnRcbiAgLy8gb3BlcmF0aW9uICh0byBiZSBhcHBsaWVkIHdoZW4gdGhlIG9wZXJhdGlvbiBmaW5pc2hlcykuXG4gIGZ1bmN0aW9uIGFkZFRvU2Nyb2xsVG9wKGNtLCB0b3ApIHtcbiAgICBpZiAodG9wID09IG51bGwpIHsgcmV0dXJuIH1cbiAgICByZXNvbHZlU2Nyb2xsVG9Qb3MoY20pO1xuICAgIGNtLmN1ck9wLnNjcm9sbFRvcCA9IChjbS5jdXJPcC5zY3JvbGxUb3AgPT0gbnVsbCA/IGNtLmRvYy5zY3JvbGxUb3AgOiBjbS5jdXJPcC5zY3JvbGxUb3ApICsgdG9wO1xuICB9XG5cbiAgLy8gTWFrZSBzdXJlIHRoYXQgYXQgdGhlIGVuZCBvZiB0aGUgb3BlcmF0aW9uIHRoZSBjdXJyZW50IGN1cnNvciBpc1xuICAvLyBzaG93bi5cbiAgZnVuY3Rpb24gZW5zdXJlQ3Vyc29yVmlzaWJsZShjbSkge1xuICAgIHJlc29sdmVTY3JvbGxUb1BvcyhjbSk7XG4gICAgdmFyIGN1ciA9IGNtLmdldEN1cnNvcigpO1xuICAgIGNtLmN1ck9wLnNjcm9sbFRvUG9zID0ge2Zyb206IGN1ciwgdG86IGN1ciwgbWFyZ2luOiBjbS5vcHRpb25zLmN1cnNvclNjcm9sbE1hcmdpbn07XG4gIH1cblxuICBmdW5jdGlvbiBzY3JvbGxUb0Nvb3JkcyhjbSwgeCwgeSkge1xuICAgIGlmICh4ICE9IG51bGwgfHwgeSAhPSBudWxsKSB7IHJlc29sdmVTY3JvbGxUb1BvcyhjbSk7IH1cbiAgICBpZiAoeCAhPSBudWxsKSB7IGNtLmN1ck9wLnNjcm9sbExlZnQgPSB4OyB9XG4gICAgaWYgKHkgIT0gbnVsbCkgeyBjbS5jdXJPcC5zY3JvbGxUb3AgPSB5OyB9XG4gIH1cblxuICBmdW5jdGlvbiBzY3JvbGxUb1JhbmdlKGNtLCByYW5nZSkge1xuICAgIHJlc29sdmVTY3JvbGxUb1BvcyhjbSk7XG4gICAgY20uY3VyT3Auc2Nyb2xsVG9Qb3MgPSByYW5nZTtcbiAgfVxuXG4gIC8vIFdoZW4gYW4gb3BlcmF0aW9uIGhhcyBpdHMgc2Nyb2xsVG9Qb3MgcHJvcGVydHkgc2V0LCBhbmQgYW5vdGhlclxuICAvLyBzY3JvbGwgYWN0aW9uIGlzIGFwcGxpZWQgYmVmb3JlIHRoZSBlbmQgb2YgdGhlIG9wZXJhdGlvbiwgdGhpc1xuICAvLyAnc2ltdWxhdGVzJyBzY3JvbGxpbmcgdGhhdCBwb3NpdGlvbiBpbnRvIHZpZXcgaW4gYSBjaGVhcCB3YXksIHNvXG4gIC8vIHRoYXQgdGhlIGVmZmVjdCBvZiBpbnRlcm1lZGlhdGUgc2Nyb2xsIGNvbW1hbmRzIGlzIG5vdCBpZ25vcmVkLlxuICBmdW5jdGlvbiByZXNvbHZlU2Nyb2xsVG9Qb3MoY20pIHtcbiAgICB2YXIgcmFuZ2UgPSBjbS5jdXJPcC5zY3JvbGxUb1BvcztcbiAgICBpZiAocmFuZ2UpIHtcbiAgICAgIGNtLmN1ck9wLnNjcm9sbFRvUG9zID0gbnVsbDtcbiAgICAgIHZhciBmcm9tID0gZXN0aW1hdGVDb29yZHMoY20sIHJhbmdlLmZyb20pLCB0byA9IGVzdGltYXRlQ29vcmRzKGNtLCByYW5nZS50byk7XG4gICAgICBzY3JvbGxUb0Nvb3Jkc1JhbmdlKGNtLCBmcm9tLCB0bywgcmFuZ2UubWFyZ2luKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBzY3JvbGxUb0Nvb3Jkc1JhbmdlKGNtLCBmcm9tLCB0bywgbWFyZ2luKSB7XG4gICAgdmFyIHNQb3MgPSBjYWxjdWxhdGVTY3JvbGxQb3MoY20sIHtcbiAgICAgIGxlZnQ6IE1hdGgubWluKGZyb20ubGVmdCwgdG8ubGVmdCksXG4gICAgICB0b3A6IE1hdGgubWluKGZyb20udG9wLCB0by50b3ApIC0gbWFyZ2luLFxuICAgICAgcmlnaHQ6IE1hdGgubWF4KGZyb20ucmlnaHQsIHRvLnJpZ2h0KSxcbiAgICAgIGJvdHRvbTogTWF0aC5tYXgoZnJvbS5ib3R0b20sIHRvLmJvdHRvbSkgKyBtYXJnaW5cbiAgICB9KTtcbiAgICBzY3JvbGxUb0Nvb3JkcyhjbSwgc1Bvcy5zY3JvbGxMZWZ0LCBzUG9zLnNjcm9sbFRvcCk7XG4gIH1cblxuICAvLyBTeW5jIHRoZSBzY3JvbGxhYmxlIGFyZWEgYW5kIHNjcm9sbGJhcnMsIGVuc3VyZSB0aGUgdmlld3BvcnRcbiAgLy8gY292ZXJzIHRoZSB2aXNpYmxlIGFyZWEuXG4gIGZ1bmN0aW9uIHVwZGF0ZVNjcm9sbFRvcChjbSwgdmFsKSB7XG4gICAgaWYgKE1hdGguYWJzKGNtLmRvYy5zY3JvbGxUb3AgLSB2YWwpIDwgMikgeyByZXR1cm4gfVxuICAgIGlmICghZ2Vja28pIHsgdXBkYXRlRGlzcGxheVNpbXBsZShjbSwge3RvcDogdmFsfSk7IH1cbiAgICBzZXRTY3JvbGxUb3AoY20sIHZhbCwgdHJ1ZSk7XG4gICAgaWYgKGdlY2tvKSB7IHVwZGF0ZURpc3BsYXlTaW1wbGUoY20pOyB9XG4gICAgc3RhcnRXb3JrZXIoY20sIDEwMCk7XG4gIH1cblxuICBmdW5jdGlvbiBzZXRTY3JvbGxUb3AoY20sIHZhbCwgZm9yY2VTY3JvbGwpIHtcbiAgICB2YWwgPSBNYXRoLm1heCgwLCBNYXRoLm1pbihjbS5kaXNwbGF5LnNjcm9sbGVyLnNjcm9sbEhlaWdodCAtIGNtLmRpc3BsYXkuc2Nyb2xsZXIuY2xpZW50SGVpZ2h0LCB2YWwpKTtcbiAgICBpZiAoY20uZGlzcGxheS5zY3JvbGxlci5zY3JvbGxUb3AgPT0gdmFsICYmICFmb3JjZVNjcm9sbCkgeyByZXR1cm4gfVxuICAgIGNtLmRvYy5zY3JvbGxUb3AgPSB2YWw7XG4gICAgY20uZGlzcGxheS5zY3JvbGxiYXJzLnNldFNjcm9sbFRvcCh2YWwpO1xuICAgIGlmIChjbS5kaXNwbGF5LnNjcm9sbGVyLnNjcm9sbFRvcCAhPSB2YWwpIHsgY20uZGlzcGxheS5zY3JvbGxlci5zY3JvbGxUb3AgPSB2YWw7IH1cbiAgfVxuXG4gIC8vIFN5bmMgc2Nyb2xsZXIgYW5kIHNjcm9sbGJhciwgZW5zdXJlIHRoZSBndXR0ZXIgZWxlbWVudHMgYXJlXG4gIC8vIGFsaWduZWQuXG4gIGZ1bmN0aW9uIHNldFNjcm9sbExlZnQoY20sIHZhbCwgaXNTY3JvbGxlciwgZm9yY2VTY3JvbGwpIHtcbiAgICB2YWwgPSBNYXRoLm1heCgwLCBNYXRoLm1pbih2YWwsIGNtLmRpc3BsYXkuc2Nyb2xsZXIuc2Nyb2xsV2lkdGggLSBjbS5kaXNwbGF5LnNjcm9sbGVyLmNsaWVudFdpZHRoKSk7XG4gICAgaWYgKChpc1Njcm9sbGVyID8gdmFsID09IGNtLmRvYy5zY3JvbGxMZWZ0IDogTWF0aC5hYnMoY20uZG9jLnNjcm9sbExlZnQgLSB2YWwpIDwgMikgJiYgIWZvcmNlU2Nyb2xsKSB7IHJldHVybiB9XG4gICAgY20uZG9jLnNjcm9sbExlZnQgPSB2YWw7XG4gICAgYWxpZ25Ib3Jpem9udGFsbHkoY20pO1xuICAgIGlmIChjbS5kaXNwbGF5LnNjcm9sbGVyLnNjcm9sbExlZnQgIT0gdmFsKSB7IGNtLmRpc3BsYXkuc2Nyb2xsZXIuc2Nyb2xsTGVmdCA9IHZhbDsgfVxuICAgIGNtLmRpc3BsYXkuc2Nyb2xsYmFycy5zZXRTY3JvbGxMZWZ0KHZhbCk7XG4gIH1cblxuICAvLyBTQ1JPTExCQVJTXG5cbiAgLy8gUHJlcGFyZSBET00gcmVhZHMgbmVlZGVkIHRvIHVwZGF0ZSB0aGUgc2Nyb2xsYmFycy4gRG9uZSBpbiBvbmVcbiAgLy8gc2hvdCB0byBtaW5pbWl6ZSB1cGRhdGUvbWVhc3VyZSByb3VuZHRyaXBzLlxuICBmdW5jdGlvbiBtZWFzdXJlRm9yU2Nyb2xsYmFycyhjbSkge1xuICAgIHZhciBkID0gY20uZGlzcGxheSwgZ3V0dGVyVyA9IGQuZ3V0dGVycy5vZmZzZXRXaWR0aDtcbiAgICB2YXIgZG9jSCA9IE1hdGgucm91bmQoY20uZG9jLmhlaWdodCArIHBhZGRpbmdWZXJ0KGNtLmRpc3BsYXkpKTtcbiAgICByZXR1cm4ge1xuICAgICAgY2xpZW50SGVpZ2h0OiBkLnNjcm9sbGVyLmNsaWVudEhlaWdodCxcbiAgICAgIHZpZXdIZWlnaHQ6IGQud3JhcHBlci5jbGllbnRIZWlnaHQsXG4gICAgICBzY3JvbGxXaWR0aDogZC5zY3JvbGxlci5zY3JvbGxXaWR0aCwgY2xpZW50V2lkdGg6IGQuc2Nyb2xsZXIuY2xpZW50V2lkdGgsXG4gICAgICB2aWV3V2lkdGg6IGQud3JhcHBlci5jbGllbnRXaWR0aCxcbiAgICAgIGJhckxlZnQ6IGNtLm9wdGlvbnMuZml4ZWRHdXR0ZXIgPyBndXR0ZXJXIDogMCxcbiAgICAgIGRvY0hlaWdodDogZG9jSCxcbiAgICAgIHNjcm9sbEhlaWdodDogZG9jSCArIHNjcm9sbEdhcChjbSkgKyBkLmJhckhlaWdodCxcbiAgICAgIG5hdGl2ZUJhcldpZHRoOiBkLm5hdGl2ZUJhcldpZHRoLFxuICAgICAgZ3V0dGVyV2lkdGg6IGd1dHRlcldcbiAgICB9XG4gIH1cblxuICB2YXIgTmF0aXZlU2Nyb2xsYmFycyA9IGZ1bmN0aW9uKHBsYWNlLCBzY3JvbGwsIGNtKSB7XG4gICAgdGhpcy5jbSA9IGNtO1xuICAgIHZhciB2ZXJ0ID0gdGhpcy52ZXJ0ID0gZWx0KFwiZGl2XCIsIFtlbHQoXCJkaXZcIiwgbnVsbCwgbnVsbCwgXCJtaW4td2lkdGg6IDFweFwiKV0sIFwiQ29kZU1pcnJvci12c2Nyb2xsYmFyXCIpO1xuICAgIHZhciBob3JpeiA9IHRoaXMuaG9yaXogPSBlbHQoXCJkaXZcIiwgW2VsdChcImRpdlwiLCBudWxsLCBudWxsLCBcImhlaWdodDogMTAwJTsgbWluLWhlaWdodDogMXB4XCIpXSwgXCJDb2RlTWlycm9yLWhzY3JvbGxiYXJcIik7XG4gICAgdmVydC50YWJJbmRleCA9IGhvcml6LnRhYkluZGV4ID0gLTE7XG4gICAgcGxhY2UodmVydCk7IHBsYWNlKGhvcml6KTtcblxuICAgIG9uKHZlcnQsIFwic2Nyb2xsXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICh2ZXJ0LmNsaWVudEhlaWdodCkgeyBzY3JvbGwodmVydC5zY3JvbGxUb3AsIFwidmVydGljYWxcIik7IH1cbiAgICB9KTtcbiAgICBvbihob3JpeiwgXCJzY3JvbGxcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKGhvcml6LmNsaWVudFdpZHRoKSB7IHNjcm9sbChob3Jpei5zY3JvbGxMZWZ0LCBcImhvcml6b250YWxcIik7IH1cbiAgICB9KTtcblxuICAgIHRoaXMuY2hlY2tlZFplcm9XaWR0aCA9IGZhbHNlO1xuICAgIC8vIE5lZWQgdG8gc2V0IGEgbWluaW11bSB3aWR0aCB0byBzZWUgdGhlIHNjcm9sbGJhciBvbiBJRTcgKGJ1dCBtdXN0IG5vdCBzZXQgaXQgb24gSUU4KS5cbiAgICBpZiAoaWUgJiYgaWVfdmVyc2lvbiA8IDgpIHsgdGhpcy5ob3Jpei5zdHlsZS5taW5IZWlnaHQgPSB0aGlzLnZlcnQuc3R5bGUubWluV2lkdGggPSBcIjE4cHhcIjsgfVxuICB9O1xuXG4gIE5hdGl2ZVNjcm9sbGJhcnMucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIChtZWFzdXJlKSB7XG4gICAgdmFyIG5lZWRzSCA9IG1lYXN1cmUuc2Nyb2xsV2lkdGggPiBtZWFzdXJlLmNsaWVudFdpZHRoICsgMTtcbiAgICB2YXIgbmVlZHNWID0gbWVhc3VyZS5zY3JvbGxIZWlnaHQgPiBtZWFzdXJlLmNsaWVudEhlaWdodCArIDE7XG4gICAgdmFyIHNXaWR0aCA9IG1lYXN1cmUubmF0aXZlQmFyV2lkdGg7XG5cbiAgICBpZiAobmVlZHNWKSB7XG4gICAgICB0aGlzLnZlcnQuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgIHRoaXMudmVydC5zdHlsZS5ib3R0b20gPSBuZWVkc0ggPyBzV2lkdGggKyBcInB4XCIgOiBcIjBcIjtcbiAgICAgIHZhciB0b3RhbEhlaWdodCA9IG1lYXN1cmUudmlld0hlaWdodCAtIChuZWVkc0ggPyBzV2lkdGggOiAwKTtcbiAgICAgIC8vIEEgYnVnIGluIElFOCBjYW4gY2F1c2UgdGhpcyB2YWx1ZSB0byBiZSBuZWdhdGl2ZSwgc28gZ3VhcmQgaXQuXG4gICAgICB0aGlzLnZlcnQuZmlyc3RDaGlsZC5zdHlsZS5oZWlnaHQgPVxuICAgICAgICBNYXRoLm1heCgwLCBtZWFzdXJlLnNjcm9sbEhlaWdodCAtIG1lYXN1cmUuY2xpZW50SGVpZ2h0ICsgdG90YWxIZWlnaHQpICsgXCJweFwiO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnZlcnQuc2Nyb2xsVG9wID0gMDtcbiAgICAgIHRoaXMudmVydC5zdHlsZS5kaXNwbGF5ID0gXCJcIjtcbiAgICAgIHRoaXMudmVydC5maXJzdENoaWxkLnN0eWxlLmhlaWdodCA9IFwiMFwiO1xuICAgIH1cblxuICAgIGlmIChuZWVkc0gpIHtcbiAgICAgIHRoaXMuaG9yaXouc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgIHRoaXMuaG9yaXouc3R5bGUucmlnaHQgPSBuZWVkc1YgPyBzV2lkdGggKyBcInB4XCIgOiBcIjBcIjtcbiAgICAgIHRoaXMuaG9yaXouc3R5bGUubGVmdCA9IG1lYXN1cmUuYmFyTGVmdCArIFwicHhcIjtcbiAgICAgIHZhciB0b3RhbFdpZHRoID0gbWVhc3VyZS52aWV3V2lkdGggLSBtZWFzdXJlLmJhckxlZnQgLSAobmVlZHNWID8gc1dpZHRoIDogMCk7XG4gICAgICB0aGlzLmhvcml6LmZpcnN0Q2hpbGQuc3R5bGUud2lkdGggPVxuICAgICAgICBNYXRoLm1heCgwLCBtZWFzdXJlLnNjcm9sbFdpZHRoIC0gbWVhc3VyZS5jbGllbnRXaWR0aCArIHRvdGFsV2lkdGgpICsgXCJweFwiO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmhvcml6LnN0eWxlLmRpc3BsYXkgPSBcIlwiO1xuICAgICAgdGhpcy5ob3Jpei5maXJzdENoaWxkLnN0eWxlLndpZHRoID0gXCIwXCI7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLmNoZWNrZWRaZXJvV2lkdGggJiYgbWVhc3VyZS5jbGllbnRIZWlnaHQgPiAwKSB7XG4gICAgICBpZiAoc1dpZHRoID09IDApIHsgdGhpcy56ZXJvV2lkdGhIYWNrKCk7IH1cbiAgICAgIHRoaXMuY2hlY2tlZFplcm9XaWR0aCA9IHRydWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtyaWdodDogbmVlZHNWID8gc1dpZHRoIDogMCwgYm90dG9tOiBuZWVkc0ggPyBzV2lkdGggOiAwfVxuICB9O1xuXG4gIE5hdGl2ZVNjcm9sbGJhcnMucHJvdG90eXBlLnNldFNjcm9sbExlZnQgPSBmdW5jdGlvbiAocG9zKSB7XG4gICAgaWYgKHRoaXMuaG9yaXouc2Nyb2xsTGVmdCAhPSBwb3MpIHsgdGhpcy5ob3Jpei5zY3JvbGxMZWZ0ID0gcG9zOyB9XG4gICAgaWYgKHRoaXMuZGlzYWJsZUhvcml6KSB7IHRoaXMuZW5hYmxlWmVyb1dpZHRoQmFyKHRoaXMuaG9yaXosIHRoaXMuZGlzYWJsZUhvcml6LCBcImhvcml6XCIpOyB9XG4gIH07XG5cbiAgTmF0aXZlU2Nyb2xsYmFycy5wcm90b3R5cGUuc2V0U2Nyb2xsVG9wID0gZnVuY3Rpb24gKHBvcykge1xuICAgIGlmICh0aGlzLnZlcnQuc2Nyb2xsVG9wICE9IHBvcykgeyB0aGlzLnZlcnQuc2Nyb2xsVG9wID0gcG9zOyB9XG4gICAgaWYgKHRoaXMuZGlzYWJsZVZlcnQpIHsgdGhpcy5lbmFibGVaZXJvV2lkdGhCYXIodGhpcy52ZXJ0LCB0aGlzLmRpc2FibGVWZXJ0LCBcInZlcnRcIik7IH1cbiAgfTtcblxuICBOYXRpdmVTY3JvbGxiYXJzLnByb3RvdHlwZS56ZXJvV2lkdGhIYWNrID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciB3ID0gbWFjICYmICFtYWNfZ2VNb3VudGFpbkxpb24gPyBcIjEycHhcIiA6IFwiMThweFwiO1xuICAgIHRoaXMuaG9yaXouc3R5bGUuaGVpZ2h0ID0gdGhpcy52ZXJ0LnN0eWxlLndpZHRoID0gdztcbiAgICB0aGlzLmhvcml6LnN0eWxlLnZpc2liaWxpdHkgPSB0aGlzLnZlcnQuc3R5bGUudmlzaWJpbGl0eSA9IFwiaGlkZGVuXCI7XG4gICAgdGhpcy5kaXNhYmxlSG9yaXogPSBuZXcgRGVsYXllZDtcbiAgICB0aGlzLmRpc2FibGVWZXJ0ID0gbmV3IERlbGF5ZWQ7XG4gIH07XG5cbiAgTmF0aXZlU2Nyb2xsYmFycy5wcm90b3R5cGUuZW5hYmxlWmVyb1dpZHRoQmFyID0gZnVuY3Rpb24gKGJhciwgZGVsYXksIHR5cGUpIHtcbiAgICBiYXIuc3R5bGUudmlzaWJpbGl0eSA9IFwiXCI7XG4gICAgZnVuY3Rpb24gbWF5YmVEaXNhYmxlKCkge1xuICAgICAgLy8gVG8gZmluZCBvdXQgd2hldGhlciB0aGUgc2Nyb2xsYmFyIGlzIHN0aWxsIHZpc2libGUsIHdlXG4gICAgICAvLyBjaGVjayB3aGV0aGVyIHRoZSBlbGVtZW50IHVuZGVyIHRoZSBwaXhlbCBpbiB0aGUgYm90dG9tXG4gICAgICAvLyByaWdodCBjb3JuZXIgb2YgdGhlIHNjcm9sbGJhciBib3ggaXMgdGhlIHNjcm9sbGJhciBib3hcbiAgICAgIC8vIGl0c2VsZiAod2hlbiB0aGUgYmFyIGlzIHN0aWxsIHZpc2libGUpIG9yIGl0cyBmaWxsZXIgY2hpbGRcbiAgICAgIC8vICh3aGVuIHRoZSBiYXIgaXMgaGlkZGVuKS4gSWYgaXQgaXMgc3RpbGwgdmlzaWJsZSwgd2Uga2VlcFxuICAgICAgLy8gaXQgZW5hYmxlZCwgaWYgaXQncyBoaWRkZW4sIHdlIGRpc2FibGUgcG9pbnRlciBldmVudHMuXG4gICAgICB2YXIgYm94ID0gYmFyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgdmFyIGVsdCA9IHR5cGUgPT0gXCJ2ZXJ0XCIgPyBkb2N1bWVudC5lbGVtZW50RnJvbVBvaW50KGJveC5yaWdodCAtIDEsIChib3gudG9wICsgYm94LmJvdHRvbSkgLyAyKVxuICAgICAgICAgIDogZG9jdW1lbnQuZWxlbWVudEZyb21Qb2ludCgoYm94LnJpZ2h0ICsgYm94LmxlZnQpIC8gMiwgYm94LmJvdHRvbSAtIDEpO1xuICAgICAgaWYgKGVsdCAhPSBiYXIpIHsgYmFyLnN0eWxlLnZpc2liaWxpdHkgPSBcImhpZGRlblwiOyB9XG4gICAgICBlbHNlIHsgZGVsYXkuc2V0KDEwMDAsIG1heWJlRGlzYWJsZSk7IH1cbiAgICB9XG4gICAgZGVsYXkuc2V0KDEwMDAsIG1heWJlRGlzYWJsZSk7XG4gIH07XG5cbiAgTmF0aXZlU2Nyb2xsYmFycy5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHBhcmVudCA9IHRoaXMuaG9yaXoucGFyZW50Tm9kZTtcbiAgICBwYXJlbnQucmVtb3ZlQ2hpbGQodGhpcy5ob3Jpeik7XG4gICAgcGFyZW50LnJlbW92ZUNoaWxkKHRoaXMudmVydCk7XG4gIH07XG5cbiAgdmFyIE51bGxTY3JvbGxiYXJzID0gZnVuY3Rpb24gKCkge307XG5cbiAgTnVsbFNjcm9sbGJhcnMucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHtib3R0b206IDAsIHJpZ2h0OiAwfSB9O1xuICBOdWxsU2Nyb2xsYmFycy5wcm90b3R5cGUuc2V0U2Nyb2xsTGVmdCA9IGZ1bmN0aW9uICgpIHt9O1xuICBOdWxsU2Nyb2xsYmFycy5wcm90b3R5cGUuc2V0U2Nyb2xsVG9wID0gZnVuY3Rpb24gKCkge307XG4gIE51bGxTY3JvbGxiYXJzLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHt9O1xuXG4gIGZ1bmN0aW9uIHVwZGF0ZVNjcm9sbGJhcnMoY20sIG1lYXN1cmUpIHtcbiAgICBpZiAoIW1lYXN1cmUpIHsgbWVhc3VyZSA9IG1lYXN1cmVGb3JTY3JvbGxiYXJzKGNtKTsgfVxuICAgIHZhciBzdGFydFdpZHRoID0gY20uZGlzcGxheS5iYXJXaWR0aCwgc3RhcnRIZWlnaHQgPSBjbS5kaXNwbGF5LmJhckhlaWdodDtcbiAgICB1cGRhdGVTY3JvbGxiYXJzSW5uZXIoY20sIG1lYXN1cmUpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgNCAmJiBzdGFydFdpZHRoICE9IGNtLmRpc3BsYXkuYmFyV2lkdGggfHwgc3RhcnRIZWlnaHQgIT0gY20uZGlzcGxheS5iYXJIZWlnaHQ7IGkrKykge1xuICAgICAgaWYgKHN0YXJ0V2lkdGggIT0gY20uZGlzcGxheS5iYXJXaWR0aCAmJiBjbS5vcHRpb25zLmxpbmVXcmFwcGluZylcbiAgICAgICAgeyB1cGRhdGVIZWlnaHRzSW5WaWV3cG9ydChjbSk7IH1cbiAgICAgIHVwZGF0ZVNjcm9sbGJhcnNJbm5lcihjbSwgbWVhc3VyZUZvclNjcm9sbGJhcnMoY20pKTtcbiAgICAgIHN0YXJ0V2lkdGggPSBjbS5kaXNwbGF5LmJhcldpZHRoOyBzdGFydEhlaWdodCA9IGNtLmRpc3BsYXkuYmFySGVpZ2h0O1xuICAgIH1cbiAgfVxuXG4gIC8vIFJlLXN5bmNocm9uaXplIHRoZSBmYWtlIHNjcm9sbGJhcnMgd2l0aCB0aGUgYWN0dWFsIHNpemUgb2YgdGhlXG4gIC8vIGNvbnRlbnQuXG4gIGZ1bmN0aW9uIHVwZGF0ZVNjcm9sbGJhcnNJbm5lcihjbSwgbWVhc3VyZSkge1xuICAgIHZhciBkID0gY20uZGlzcGxheTtcbiAgICB2YXIgc2l6ZXMgPSBkLnNjcm9sbGJhcnMudXBkYXRlKG1lYXN1cmUpO1xuXG4gICAgZC5zaXplci5zdHlsZS5wYWRkaW5nUmlnaHQgPSAoZC5iYXJXaWR0aCA9IHNpemVzLnJpZ2h0KSArIFwicHhcIjtcbiAgICBkLnNpemVyLnN0eWxlLnBhZGRpbmdCb3R0b20gPSAoZC5iYXJIZWlnaHQgPSBzaXplcy5ib3R0b20pICsgXCJweFwiO1xuICAgIGQuaGVpZ2h0Rm9yY2VyLnN0eWxlLmJvcmRlckJvdHRvbSA9IHNpemVzLmJvdHRvbSArIFwicHggc29saWQgdHJhbnNwYXJlbnRcIjtcblxuICAgIGlmIChzaXplcy5yaWdodCAmJiBzaXplcy5ib3R0b20pIHtcbiAgICAgIGQuc2Nyb2xsYmFyRmlsbGVyLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICBkLnNjcm9sbGJhckZpbGxlci5zdHlsZS5oZWlnaHQgPSBzaXplcy5ib3R0b20gKyBcInB4XCI7XG4gICAgICBkLnNjcm9sbGJhckZpbGxlci5zdHlsZS53aWR0aCA9IHNpemVzLnJpZ2h0ICsgXCJweFwiO1xuICAgIH0gZWxzZSB7IGQuc2Nyb2xsYmFyRmlsbGVyLnN0eWxlLmRpc3BsYXkgPSBcIlwiOyB9XG4gICAgaWYgKHNpemVzLmJvdHRvbSAmJiBjbS5vcHRpb25zLmNvdmVyR3V0dGVyTmV4dFRvU2Nyb2xsYmFyICYmIGNtLm9wdGlvbnMuZml4ZWRHdXR0ZXIpIHtcbiAgICAgIGQuZ3V0dGVyRmlsbGVyLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICBkLmd1dHRlckZpbGxlci5zdHlsZS5oZWlnaHQgPSBzaXplcy5ib3R0b20gKyBcInB4XCI7XG4gICAgICBkLmd1dHRlckZpbGxlci5zdHlsZS53aWR0aCA9IG1lYXN1cmUuZ3V0dGVyV2lkdGggKyBcInB4XCI7XG4gICAgfSBlbHNlIHsgZC5ndXR0ZXJGaWxsZXIuc3R5bGUuZGlzcGxheSA9IFwiXCI7IH1cbiAgfVxuXG4gIHZhciBzY3JvbGxiYXJNb2RlbCA9IHtcIm5hdGl2ZVwiOiBOYXRpdmVTY3JvbGxiYXJzLCBcIm51bGxcIjogTnVsbFNjcm9sbGJhcnN9O1xuXG4gIGZ1bmN0aW9uIGluaXRTY3JvbGxiYXJzKGNtKSB7XG4gICAgaWYgKGNtLmRpc3BsYXkuc2Nyb2xsYmFycykge1xuICAgICAgY20uZGlzcGxheS5zY3JvbGxiYXJzLmNsZWFyKCk7XG4gICAgICBpZiAoY20uZGlzcGxheS5zY3JvbGxiYXJzLmFkZENsYXNzKVxuICAgICAgICB7IHJtQ2xhc3MoY20uZGlzcGxheS53cmFwcGVyLCBjbS5kaXNwbGF5LnNjcm9sbGJhcnMuYWRkQ2xhc3MpOyB9XG4gICAgfVxuXG4gICAgY20uZGlzcGxheS5zY3JvbGxiYXJzID0gbmV3IHNjcm9sbGJhck1vZGVsW2NtLm9wdGlvbnMuc2Nyb2xsYmFyU3R5bGVdKGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICBjbS5kaXNwbGF5LndyYXBwZXIuaW5zZXJ0QmVmb3JlKG5vZGUsIGNtLmRpc3BsYXkuc2Nyb2xsYmFyRmlsbGVyKTtcbiAgICAgIC8vIFByZXZlbnQgY2xpY2tzIGluIHRoZSBzY3JvbGxiYXJzIGZyb20ga2lsbGluZyBmb2N1c1xuICAgICAgb24obm9kZSwgXCJtb3VzZWRvd25cIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoY20uc3RhdGUuZm9jdXNlZCkgeyBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIGNtLmRpc3BsYXkuaW5wdXQuZm9jdXMoKTsgfSwgMCk7IH1cbiAgICAgIH0pO1xuICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoXCJjbS1ub3QtY29udGVudFwiLCBcInRydWVcIik7XG4gICAgfSwgZnVuY3Rpb24gKHBvcywgYXhpcykge1xuICAgICAgaWYgKGF4aXMgPT0gXCJob3Jpem9udGFsXCIpIHsgc2V0U2Nyb2xsTGVmdChjbSwgcG9zKTsgfVxuICAgICAgZWxzZSB7IHVwZGF0ZVNjcm9sbFRvcChjbSwgcG9zKTsgfVxuICAgIH0sIGNtKTtcbiAgICBpZiAoY20uZGlzcGxheS5zY3JvbGxiYXJzLmFkZENsYXNzKVxuICAgICAgeyBhZGRDbGFzcyhjbS5kaXNwbGF5LndyYXBwZXIsIGNtLmRpc3BsYXkuc2Nyb2xsYmFycy5hZGRDbGFzcyk7IH1cbiAgfVxuXG4gIC8vIE9wZXJhdGlvbnMgYXJlIHVzZWQgdG8gd3JhcCBhIHNlcmllcyBvZiBjaGFuZ2VzIHRvIHRoZSBlZGl0b3JcbiAgLy8gc3RhdGUgaW4gc3VjaCBhIHdheSB0aGF0IGVhY2ggY2hhbmdlIHdvbid0IGhhdmUgdG8gdXBkYXRlIHRoZVxuICAvLyBjdXJzb3IgYW5kIGRpc3BsYXkgKHdoaWNoIHdvdWxkIGJlIGF3a3dhcmQsIHNsb3csIGFuZFxuICAvLyBlcnJvci1wcm9uZSkuIEluc3RlYWQsIGRpc3BsYXkgdXBkYXRlcyBhcmUgYmF0Y2hlZCBhbmQgdGhlbiBhbGxcbiAgLy8gY29tYmluZWQgYW5kIGV4ZWN1dGVkIGF0IG9uY2UuXG5cbiAgdmFyIG5leHRPcElkID0gMDtcbiAgLy8gU3RhcnQgYSBuZXcgb3BlcmF0aW9uLlxuICBmdW5jdGlvbiBzdGFydE9wZXJhdGlvbihjbSkge1xuICAgIGNtLmN1ck9wID0ge1xuICAgICAgY206IGNtLFxuICAgICAgdmlld0NoYW5nZWQ6IGZhbHNlLCAgICAgIC8vIEZsYWcgdGhhdCBpbmRpY2F0ZXMgdGhhdCBsaW5lcyBtaWdodCBuZWVkIHRvIGJlIHJlZHJhd25cbiAgICAgIHN0YXJ0SGVpZ2h0OiBjbS5kb2MuaGVpZ2h0LCAvLyBVc2VkIHRvIGRldGVjdCBuZWVkIHRvIHVwZGF0ZSBzY3JvbGxiYXJcbiAgICAgIGZvcmNlVXBkYXRlOiBmYWxzZSwgICAgICAvLyBVc2VkIHRvIGZvcmNlIGEgcmVkcmF3XG4gICAgICB1cGRhdGVJbnB1dDogMCwgICAgICAgLy8gV2hldGhlciB0byByZXNldCB0aGUgaW5wdXQgdGV4dGFyZWFcbiAgICAgIHR5cGluZzogZmFsc2UsICAgICAgICAgICAvLyBXaGV0aGVyIHRoaXMgcmVzZXQgc2hvdWxkIGJlIGNhcmVmdWwgdG8gbGVhdmUgZXhpc3RpbmcgdGV4dCAoZm9yIGNvbXBvc2l0aW5nKVxuICAgICAgY2hhbmdlT2JqczogbnVsbCwgICAgICAgIC8vIEFjY3VtdWxhdGVkIGNoYW5nZXMsIGZvciBmaXJpbmcgY2hhbmdlIGV2ZW50c1xuICAgICAgY3Vyc29yQWN0aXZpdHlIYW5kbGVyczogbnVsbCwgLy8gU2V0IG9mIGhhbmRsZXJzIHRvIGZpcmUgY3Vyc29yQWN0aXZpdHkgb25cbiAgICAgIGN1cnNvckFjdGl2aXR5Q2FsbGVkOiAwLCAvLyBUcmFja3Mgd2hpY2ggY3Vyc29yQWN0aXZpdHkgaGFuZGxlcnMgaGF2ZSBiZWVuIGNhbGxlZCBhbHJlYWR5XG4gICAgICBzZWxlY3Rpb25DaGFuZ2VkOiBmYWxzZSwgLy8gV2hldGhlciB0aGUgc2VsZWN0aW9uIG5lZWRzIHRvIGJlIHJlZHJhd25cbiAgICAgIHVwZGF0ZU1heExpbmU6IGZhbHNlLCAgICAvLyBTZXQgd2hlbiB0aGUgd2lkZXN0IGxpbmUgbmVlZHMgdG8gYmUgZGV0ZXJtaW5lZCBhbmV3XG4gICAgICBzY3JvbGxMZWZ0OiBudWxsLCBzY3JvbGxUb3A6IG51bGwsIC8vIEludGVybWVkaWF0ZSBzY3JvbGwgcG9zaXRpb24sIG5vdCBwdXNoZWQgdG8gRE9NIHlldFxuICAgICAgc2Nyb2xsVG9Qb3M6IG51bGwsICAgICAgIC8vIFVzZWQgdG8gc2Nyb2xsIHRvIGEgc3BlY2lmaWMgcG9zaXRpb25cbiAgICAgIGZvY3VzOiBmYWxzZSxcbiAgICAgIGlkOiArK25leHRPcElkLCAgICAgICAgICAvLyBVbmlxdWUgSURcbiAgICAgIG1hcmtBcnJheXM6IG51bGwgICAgICAgICAvLyBVc2VkIGJ5IGFkZE1hcmtlZFNwYW5cbiAgICB9O1xuICAgIHB1c2hPcGVyYXRpb24oY20uY3VyT3ApO1xuICB9XG5cbiAgLy8gRmluaXNoIGFuIG9wZXJhdGlvbiwgdXBkYXRpbmcgdGhlIGRpc3BsYXkgYW5kIHNpZ25hbGxpbmcgZGVsYXllZCBldmVudHNcbiAgZnVuY3Rpb24gZW5kT3BlcmF0aW9uKGNtKSB7XG4gICAgdmFyIG9wID0gY20uY3VyT3A7XG4gICAgaWYgKG9wKSB7IGZpbmlzaE9wZXJhdGlvbihvcCwgZnVuY3Rpb24gKGdyb3VwKSB7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGdyb3VwLm9wcy5sZW5ndGg7IGkrKylcbiAgICAgICAgeyBncm91cC5vcHNbaV0uY20uY3VyT3AgPSBudWxsOyB9XG4gICAgICBlbmRPcGVyYXRpb25zKGdyb3VwKTtcbiAgICB9KTsgfVxuICB9XG5cbiAgLy8gVGhlIERPTSB1cGRhdGVzIGRvbmUgd2hlbiBhbiBvcGVyYXRpb24gZmluaXNoZXMgYXJlIGJhdGNoZWQgc29cbiAgLy8gdGhhdCB0aGUgbWluaW11bSBudW1iZXIgb2YgcmVsYXlvdXRzIGFyZSByZXF1aXJlZC5cbiAgZnVuY3Rpb24gZW5kT3BlcmF0aW9ucyhncm91cCkge1xuICAgIHZhciBvcHMgPSBncm91cC5vcHM7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvcHMubGVuZ3RoOyBpKyspIC8vIFJlYWQgRE9NXG4gICAgICB7IGVuZE9wZXJhdGlvbl9SMShvcHNbaV0pOyB9XG4gICAgZm9yICh2YXIgaSQxID0gMDsgaSQxIDwgb3BzLmxlbmd0aDsgaSQxKyspIC8vIFdyaXRlIERPTSAobWF5YmUpXG4gICAgICB7IGVuZE9wZXJhdGlvbl9XMShvcHNbaSQxXSk7IH1cbiAgICBmb3IgKHZhciBpJDIgPSAwOyBpJDIgPCBvcHMubGVuZ3RoOyBpJDIrKykgLy8gUmVhZCBET01cbiAgICAgIHsgZW5kT3BlcmF0aW9uX1IyKG9wc1tpJDJdKTsgfVxuICAgIGZvciAodmFyIGkkMyA9IDA7IGkkMyA8IG9wcy5sZW5ndGg7IGkkMysrKSAvLyBXcml0ZSBET00gKG1heWJlKVxuICAgICAgeyBlbmRPcGVyYXRpb25fVzIob3BzW2kkM10pOyB9XG4gICAgZm9yICh2YXIgaSQ0ID0gMDsgaSQ0IDwgb3BzLmxlbmd0aDsgaSQ0KyspIC8vIFJlYWQgRE9NXG4gICAgICB7IGVuZE9wZXJhdGlvbl9maW5pc2gob3BzW2kkNF0pOyB9XG4gIH1cblxuICBmdW5jdGlvbiBlbmRPcGVyYXRpb25fUjEob3ApIHtcbiAgICB2YXIgY20gPSBvcC5jbSwgZGlzcGxheSA9IGNtLmRpc3BsYXk7XG4gICAgbWF5YmVDbGlwU2Nyb2xsYmFycyhjbSk7XG4gICAgaWYgKG9wLnVwZGF0ZU1heExpbmUpIHsgZmluZE1heExpbmUoY20pOyB9XG5cbiAgICBvcC5tdXN0VXBkYXRlID0gb3Audmlld0NoYW5nZWQgfHwgb3AuZm9yY2VVcGRhdGUgfHwgb3Auc2Nyb2xsVG9wICE9IG51bGwgfHxcbiAgICAgIG9wLnNjcm9sbFRvUG9zICYmIChvcC5zY3JvbGxUb1Bvcy5mcm9tLmxpbmUgPCBkaXNwbGF5LnZpZXdGcm9tIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgb3Auc2Nyb2xsVG9Qb3MudG8ubGluZSA+PSBkaXNwbGF5LnZpZXdUbykgfHxcbiAgICAgIGRpc3BsYXkubWF4TGluZUNoYW5nZWQgJiYgY20ub3B0aW9ucy5saW5lV3JhcHBpbmc7XG4gICAgb3AudXBkYXRlID0gb3AubXVzdFVwZGF0ZSAmJlxuICAgICAgbmV3IERpc3BsYXlVcGRhdGUoY20sIG9wLm11c3RVcGRhdGUgJiYge3RvcDogb3Auc2Nyb2xsVG9wLCBlbnN1cmU6IG9wLnNjcm9sbFRvUG9zfSwgb3AuZm9yY2VVcGRhdGUpO1xuICB9XG5cbiAgZnVuY3Rpb24gZW5kT3BlcmF0aW9uX1cxKG9wKSB7XG4gICAgb3AudXBkYXRlZERpc3BsYXkgPSBvcC5tdXN0VXBkYXRlICYmIHVwZGF0ZURpc3BsYXlJZk5lZWRlZChvcC5jbSwgb3AudXBkYXRlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGVuZE9wZXJhdGlvbl9SMihvcCkge1xuICAgIHZhciBjbSA9IG9wLmNtLCBkaXNwbGF5ID0gY20uZGlzcGxheTtcbiAgICBpZiAob3AudXBkYXRlZERpc3BsYXkpIHsgdXBkYXRlSGVpZ2h0c0luVmlld3BvcnQoY20pOyB9XG5cbiAgICBvcC5iYXJNZWFzdXJlID0gbWVhc3VyZUZvclNjcm9sbGJhcnMoY20pO1xuXG4gICAgLy8gSWYgdGhlIG1heCBsaW5lIGNoYW5nZWQgc2luY2UgaXQgd2FzIGxhc3QgbWVhc3VyZWQsIG1lYXN1cmUgaXQsXG4gICAgLy8gYW5kIGVuc3VyZSB0aGUgZG9jdW1lbnQncyB3aWR0aCBtYXRjaGVzIGl0LlxuICAgIC8vIHVwZGF0ZURpc3BsYXlfVzIgd2lsbCB1c2UgdGhlc2UgcHJvcGVydGllcyB0byBkbyB0aGUgYWN0dWFsIHJlc2l6aW5nXG4gICAgaWYgKGRpc3BsYXkubWF4TGluZUNoYW5nZWQgJiYgIWNtLm9wdGlvbnMubGluZVdyYXBwaW5nKSB7XG4gICAgICBvcC5hZGp1c3RXaWR0aFRvID0gbWVhc3VyZUNoYXIoY20sIGRpc3BsYXkubWF4TGluZSwgZGlzcGxheS5tYXhMaW5lLnRleHQubGVuZ3RoKS5sZWZ0ICsgMztcbiAgICAgIGNtLmRpc3BsYXkuc2l6ZXJXaWR0aCA9IG9wLmFkanVzdFdpZHRoVG87XG4gICAgICBvcC5iYXJNZWFzdXJlLnNjcm9sbFdpZHRoID1cbiAgICAgICAgTWF0aC5tYXgoZGlzcGxheS5zY3JvbGxlci5jbGllbnRXaWR0aCwgZGlzcGxheS5zaXplci5vZmZzZXRMZWZ0ICsgb3AuYWRqdXN0V2lkdGhUbyArIHNjcm9sbEdhcChjbSkgKyBjbS5kaXNwbGF5LmJhcldpZHRoKTtcbiAgICAgIG9wLm1heFNjcm9sbExlZnQgPSBNYXRoLm1heCgwLCBkaXNwbGF5LnNpemVyLm9mZnNldExlZnQgKyBvcC5hZGp1c3RXaWR0aFRvIC0gZGlzcGxheVdpZHRoKGNtKSk7XG4gICAgfVxuXG4gICAgaWYgKG9wLnVwZGF0ZWREaXNwbGF5IHx8IG9wLnNlbGVjdGlvbkNoYW5nZWQpXG4gICAgICB7IG9wLnByZXBhcmVkU2VsZWN0aW9uID0gZGlzcGxheS5pbnB1dC5wcmVwYXJlU2VsZWN0aW9uKCk7IH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGVuZE9wZXJhdGlvbl9XMihvcCkge1xuICAgIHZhciBjbSA9IG9wLmNtO1xuXG4gICAgaWYgKG9wLmFkanVzdFdpZHRoVG8gIT0gbnVsbCkge1xuICAgICAgY20uZGlzcGxheS5zaXplci5zdHlsZS5taW5XaWR0aCA9IG9wLmFkanVzdFdpZHRoVG8gKyBcInB4XCI7XG4gICAgICBpZiAob3AubWF4U2Nyb2xsTGVmdCA8IGNtLmRvYy5zY3JvbGxMZWZ0KVxuICAgICAgICB7IHNldFNjcm9sbExlZnQoY20sIE1hdGgubWluKGNtLmRpc3BsYXkuc2Nyb2xsZXIuc2Nyb2xsTGVmdCwgb3AubWF4U2Nyb2xsTGVmdCksIHRydWUpOyB9XG4gICAgICBjbS5kaXNwbGF5Lm1heExpbmVDaGFuZ2VkID0gZmFsc2U7XG4gICAgfVxuXG4gICAgdmFyIHRha2VGb2N1cyA9IG9wLmZvY3VzICYmIG9wLmZvY3VzID09IGFjdGl2ZUVsdChyb290KGNtKSk7XG4gICAgaWYgKG9wLnByZXBhcmVkU2VsZWN0aW9uKVxuICAgICAgeyBjbS5kaXNwbGF5LmlucHV0LnNob3dTZWxlY3Rpb24ob3AucHJlcGFyZWRTZWxlY3Rpb24sIHRha2VGb2N1cyk7IH1cbiAgICBpZiAob3AudXBkYXRlZERpc3BsYXkgfHwgb3Auc3RhcnRIZWlnaHQgIT0gY20uZG9jLmhlaWdodClcbiAgICAgIHsgdXBkYXRlU2Nyb2xsYmFycyhjbSwgb3AuYmFyTWVhc3VyZSk7IH1cbiAgICBpZiAob3AudXBkYXRlZERpc3BsYXkpXG4gICAgICB7IHNldERvY3VtZW50SGVpZ2h0KGNtLCBvcC5iYXJNZWFzdXJlKTsgfVxuXG4gICAgaWYgKG9wLnNlbGVjdGlvbkNoYW5nZWQpIHsgcmVzdGFydEJsaW5rKGNtKTsgfVxuXG4gICAgaWYgKGNtLnN0YXRlLmZvY3VzZWQgJiYgb3AudXBkYXRlSW5wdXQpXG4gICAgICB7IGNtLmRpc3BsYXkuaW5wdXQucmVzZXQob3AudHlwaW5nKTsgfVxuICAgIGlmICh0YWtlRm9jdXMpIHsgZW5zdXJlRm9jdXMob3AuY20pOyB9XG4gIH1cblxuICBmdW5jdGlvbiBlbmRPcGVyYXRpb25fZmluaXNoKG9wKSB7XG4gICAgdmFyIGNtID0gb3AuY20sIGRpc3BsYXkgPSBjbS5kaXNwbGF5LCBkb2MgPSBjbS5kb2M7XG5cbiAgICBpZiAob3AudXBkYXRlZERpc3BsYXkpIHsgcG9zdFVwZGF0ZURpc3BsYXkoY20sIG9wLnVwZGF0ZSk7IH1cblxuICAgIC8vIEFib3J0IG1vdXNlIHdoZWVsIGRlbHRhIG1lYXN1cmVtZW50LCB3aGVuIHNjcm9sbGluZyBleHBsaWNpdGx5XG4gICAgaWYgKGRpc3BsYXkud2hlZWxTdGFydFggIT0gbnVsbCAmJiAob3Auc2Nyb2xsVG9wICE9IG51bGwgfHwgb3Auc2Nyb2xsTGVmdCAhPSBudWxsIHx8IG9wLnNjcm9sbFRvUG9zKSlcbiAgICAgIHsgZGlzcGxheS53aGVlbFN0YXJ0WCA9IGRpc3BsYXkud2hlZWxTdGFydFkgPSBudWxsOyB9XG5cbiAgICAvLyBQcm9wYWdhdGUgdGhlIHNjcm9sbCBwb3NpdGlvbiB0byB0aGUgYWN0dWFsIERPTSBzY3JvbGxlclxuICAgIGlmIChvcC5zY3JvbGxUb3AgIT0gbnVsbCkgeyBzZXRTY3JvbGxUb3AoY20sIG9wLnNjcm9sbFRvcCwgb3AuZm9yY2VTY3JvbGwpOyB9XG5cbiAgICBpZiAob3Auc2Nyb2xsTGVmdCAhPSBudWxsKSB7IHNldFNjcm9sbExlZnQoY20sIG9wLnNjcm9sbExlZnQsIHRydWUsIHRydWUpOyB9XG4gICAgLy8gSWYgd2UgbmVlZCB0byBzY3JvbGwgYSBzcGVjaWZpYyBwb3NpdGlvbiBpbnRvIHZpZXcsIGRvIHNvLlxuICAgIGlmIChvcC5zY3JvbGxUb1Bvcykge1xuICAgICAgdmFyIHJlY3QgPSBzY3JvbGxQb3NJbnRvVmlldyhjbSwgY2xpcFBvcyhkb2MsIG9wLnNjcm9sbFRvUG9zLmZyb20pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGlwUG9zKGRvYywgb3Auc2Nyb2xsVG9Qb3MudG8pLCBvcC5zY3JvbGxUb1Bvcy5tYXJnaW4pO1xuICAgICAgbWF5YmVTY3JvbGxXaW5kb3coY20sIHJlY3QpO1xuICAgIH1cblxuICAgIC8vIEZpcmUgZXZlbnRzIGZvciBtYXJrZXJzIHRoYXQgYXJlIGhpZGRlbi91bmlkZGVuIGJ5IGVkaXRpbmcgb3JcbiAgICAvLyB1bmRvaW5nXG4gICAgdmFyIGhpZGRlbiA9IG9wLm1heWJlSGlkZGVuTWFya2VycywgdW5oaWRkZW4gPSBvcC5tYXliZVVuaGlkZGVuTWFya2VycztcbiAgICBpZiAoaGlkZGVuKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgaGlkZGVuLmxlbmd0aDsgKytpKVxuICAgICAgeyBpZiAoIWhpZGRlbltpXS5saW5lcy5sZW5ndGgpIHsgc2lnbmFsKGhpZGRlbltpXSwgXCJoaWRlXCIpOyB9IH0gfVxuICAgIGlmICh1bmhpZGRlbikgeyBmb3IgKHZhciBpJDEgPSAwOyBpJDEgPCB1bmhpZGRlbi5sZW5ndGg7ICsraSQxKVxuICAgICAgeyBpZiAodW5oaWRkZW5baSQxXS5saW5lcy5sZW5ndGgpIHsgc2lnbmFsKHVuaGlkZGVuW2kkMV0sIFwidW5oaWRlXCIpOyB9IH0gfVxuXG4gICAgaWYgKGRpc3BsYXkud3JhcHBlci5vZmZzZXRIZWlnaHQpXG4gICAgICB7IGRvYy5zY3JvbGxUb3AgPSBjbS5kaXNwbGF5LnNjcm9sbGVyLnNjcm9sbFRvcDsgfVxuXG4gICAgLy8gRmlyZSBjaGFuZ2UgZXZlbnRzLCBhbmQgZGVsYXllZCBldmVudCBoYW5kbGVyc1xuICAgIGlmIChvcC5jaGFuZ2VPYmpzKVxuICAgICAgeyBzaWduYWwoY20sIFwiY2hhbmdlc1wiLCBjbSwgb3AuY2hhbmdlT2Jqcyk7IH1cbiAgICBpZiAob3AudXBkYXRlKVxuICAgICAgeyBvcC51cGRhdGUuZmluaXNoKCk7IH1cbiAgfVxuXG4gIC8vIFJ1biB0aGUgZ2l2ZW4gZnVuY3Rpb24gaW4gYW4gb3BlcmF0aW9uXG4gIGZ1bmN0aW9uIHJ1bkluT3AoY20sIGYpIHtcbiAgICBpZiAoY20uY3VyT3ApIHsgcmV0dXJuIGYoKSB9XG4gICAgc3RhcnRPcGVyYXRpb24oY20pO1xuICAgIHRyeSB7IHJldHVybiBmKCkgfVxuICAgIGZpbmFsbHkgeyBlbmRPcGVyYXRpb24oY20pOyB9XG4gIH1cbiAgLy8gV3JhcHMgYSBmdW5jdGlvbiBpbiBhbiBvcGVyYXRpb24uIFJldHVybnMgdGhlIHdyYXBwZWQgZnVuY3Rpb24uXG4gIGZ1bmN0aW9uIG9wZXJhdGlvbihjbSwgZikge1xuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgIGlmIChjbS5jdXJPcCkgeyByZXR1cm4gZi5hcHBseShjbSwgYXJndW1lbnRzKSB9XG4gICAgICBzdGFydE9wZXJhdGlvbihjbSk7XG4gICAgICB0cnkgeyByZXR1cm4gZi5hcHBseShjbSwgYXJndW1lbnRzKSB9XG4gICAgICBmaW5hbGx5IHsgZW5kT3BlcmF0aW9uKGNtKTsgfVxuICAgIH1cbiAgfVxuICAvLyBVc2VkIHRvIGFkZCBtZXRob2RzIHRvIGVkaXRvciBhbmQgZG9jIGluc3RhbmNlcywgd3JhcHBpbmcgdGhlbSBpblxuICAvLyBvcGVyYXRpb25zLlxuICBmdW5jdGlvbiBtZXRob2RPcChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKHRoaXMuY3VyT3ApIHsgcmV0dXJuIGYuYXBwbHkodGhpcywgYXJndW1lbnRzKSB9XG4gICAgICBzdGFydE9wZXJhdGlvbih0aGlzKTtcbiAgICAgIHRyeSB7IHJldHVybiBmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfVxuICAgICAgZmluYWxseSB7IGVuZE9wZXJhdGlvbih0aGlzKTsgfVxuICAgIH1cbiAgfVxuICBmdW5jdGlvbiBkb2NNZXRob2RPcChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGNtID0gdGhpcy5jbTtcbiAgICAgIGlmICghY20gfHwgY20uY3VyT3ApIHsgcmV0dXJuIGYuYXBwbHkodGhpcywgYXJndW1lbnRzKSB9XG4gICAgICBzdGFydE9wZXJhdGlvbihjbSk7XG4gICAgICB0cnkgeyByZXR1cm4gZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpIH1cbiAgICAgIGZpbmFsbHkgeyBlbmRPcGVyYXRpb24oY20pOyB9XG4gICAgfVxuICB9XG5cbiAgLy8gSElHSExJR0hUIFdPUktFUlxuXG4gIGZ1bmN0aW9uIHN0YXJ0V29ya2VyKGNtLCB0aW1lKSB7XG4gICAgaWYgKGNtLmRvYy5oaWdobGlnaHRGcm9udGllciA8IGNtLmRpc3BsYXkudmlld1RvKVxuICAgICAgeyBjbS5zdGF0ZS5oaWdobGlnaHQuc2V0KHRpbWUsIGJpbmQoaGlnaGxpZ2h0V29ya2VyLCBjbSkpOyB9XG4gIH1cblxuICBmdW5jdGlvbiBoaWdobGlnaHRXb3JrZXIoY20pIHtcbiAgICB2YXIgZG9jID0gY20uZG9jO1xuICAgIGlmIChkb2MuaGlnaGxpZ2h0RnJvbnRpZXIgPj0gY20uZGlzcGxheS52aWV3VG8pIHsgcmV0dXJuIH1cbiAgICB2YXIgZW5kID0gK25ldyBEYXRlICsgY20ub3B0aW9ucy53b3JrVGltZTtcbiAgICB2YXIgY29udGV4dCA9IGdldENvbnRleHRCZWZvcmUoY20sIGRvYy5oaWdobGlnaHRGcm9udGllcik7XG4gICAgdmFyIGNoYW5nZWRMaW5lcyA9IFtdO1xuXG4gICAgZG9jLml0ZXIoY29udGV4dC5saW5lLCBNYXRoLm1pbihkb2MuZmlyc3QgKyBkb2Muc2l6ZSwgY20uZGlzcGxheS52aWV3VG8gKyA1MDApLCBmdW5jdGlvbiAobGluZSkge1xuICAgICAgaWYgKGNvbnRleHQubGluZSA+PSBjbS5kaXNwbGF5LnZpZXdGcm9tKSB7IC8vIFZpc2libGVcbiAgICAgICAgdmFyIG9sZFN0eWxlcyA9IGxpbmUuc3R5bGVzO1xuICAgICAgICB2YXIgcmVzZXRTdGF0ZSA9IGxpbmUudGV4dC5sZW5ndGggPiBjbS5vcHRpb25zLm1heEhpZ2hsaWdodExlbmd0aCA/IGNvcHlTdGF0ZShkb2MubW9kZSwgY29udGV4dC5zdGF0ZSkgOiBudWxsO1xuICAgICAgICB2YXIgaGlnaGxpZ2h0ZWQgPSBoaWdobGlnaHRMaW5lKGNtLCBsaW5lLCBjb250ZXh0LCB0cnVlKTtcbiAgICAgICAgaWYgKHJlc2V0U3RhdGUpIHsgY29udGV4dC5zdGF0ZSA9IHJlc2V0U3RhdGU7IH1cbiAgICAgICAgbGluZS5zdHlsZXMgPSBoaWdobGlnaHRlZC5zdHlsZXM7XG4gICAgICAgIHZhciBvbGRDbHMgPSBsaW5lLnN0eWxlQ2xhc3NlcywgbmV3Q2xzID0gaGlnaGxpZ2h0ZWQuY2xhc3NlcztcbiAgICAgICAgaWYgKG5ld0NscykgeyBsaW5lLnN0eWxlQ2xhc3NlcyA9IG5ld0NsczsgfVxuICAgICAgICBlbHNlIGlmIChvbGRDbHMpIHsgbGluZS5zdHlsZUNsYXNzZXMgPSBudWxsOyB9XG4gICAgICAgIHZhciBpc2NoYW5nZSA9ICFvbGRTdHlsZXMgfHwgb2xkU3R5bGVzLmxlbmd0aCAhPSBsaW5lLnN0eWxlcy5sZW5ndGggfHxcbiAgICAgICAgICBvbGRDbHMgIT0gbmV3Q2xzICYmICghb2xkQ2xzIHx8ICFuZXdDbHMgfHwgb2xkQ2xzLmJnQ2xhc3MgIT0gbmV3Q2xzLmJnQ2xhc3MgfHwgb2xkQ2xzLnRleHRDbGFzcyAhPSBuZXdDbHMudGV4dENsYXNzKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7ICFpc2NoYW5nZSAmJiBpIDwgb2xkU3R5bGVzLmxlbmd0aDsgKytpKSB7IGlzY2hhbmdlID0gb2xkU3R5bGVzW2ldICE9IGxpbmUuc3R5bGVzW2ldOyB9XG4gICAgICAgIGlmIChpc2NoYW5nZSkgeyBjaGFuZ2VkTGluZXMucHVzaChjb250ZXh0LmxpbmUpOyB9XG4gICAgICAgIGxpbmUuc3RhdGVBZnRlciA9IGNvbnRleHQuc2F2ZSgpO1xuICAgICAgICBjb250ZXh0Lm5leHRMaW5lKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAobGluZS50ZXh0Lmxlbmd0aCA8PSBjbS5vcHRpb25zLm1heEhpZ2hsaWdodExlbmd0aClcbiAgICAgICAgICB7IHByb2Nlc3NMaW5lKGNtLCBsaW5lLnRleHQsIGNvbnRleHQpOyB9XG4gICAgICAgIGxpbmUuc3RhdGVBZnRlciA9IGNvbnRleHQubGluZSAlIDUgPT0gMCA/IGNvbnRleHQuc2F2ZSgpIDogbnVsbDtcbiAgICAgICAgY29udGV4dC5uZXh0TGluZSgpO1xuICAgICAgfVxuICAgICAgaWYgKCtuZXcgRGF0ZSA+IGVuZCkge1xuICAgICAgICBzdGFydFdvcmtlcihjbSwgY20ub3B0aW9ucy53b3JrRGVsYXkpO1xuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgfVxuICAgIH0pO1xuICAgIGRvYy5oaWdobGlnaHRGcm9udGllciA9IGNvbnRleHQubGluZTtcbiAgICBkb2MubW9kZUZyb250aWVyID0gTWF0aC5tYXgoZG9jLm1vZGVGcm9udGllciwgY29udGV4dC5saW5lKTtcbiAgICBpZiAoY2hhbmdlZExpbmVzLmxlbmd0aCkgeyBydW5Jbk9wKGNtLCBmdW5jdGlvbiAoKSB7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNoYW5nZWRMaW5lcy5sZW5ndGg7IGkrKylcbiAgICAgICAgeyByZWdMaW5lQ2hhbmdlKGNtLCBjaGFuZ2VkTGluZXNbaV0sIFwidGV4dFwiKTsgfVxuICAgIH0pOyB9XG4gIH1cblxuICAvLyBESVNQTEFZIERSQVdJTkdcblxuICB2YXIgRGlzcGxheVVwZGF0ZSA9IGZ1bmN0aW9uKGNtLCB2aWV3cG9ydCwgZm9yY2UpIHtcbiAgICB2YXIgZGlzcGxheSA9IGNtLmRpc3BsYXk7XG5cbiAgICB0aGlzLnZpZXdwb3J0ID0gdmlld3BvcnQ7XG4gICAgLy8gU3RvcmUgc29tZSB2YWx1ZXMgdGhhdCB3ZSdsbCBuZWVkIGxhdGVyIChidXQgZG9uJ3Qgd2FudCB0byBmb3JjZSBhIHJlbGF5b3V0IGZvcilcbiAgICB0aGlzLnZpc2libGUgPSB2aXNpYmxlTGluZXMoZGlzcGxheSwgY20uZG9jLCB2aWV3cG9ydCk7XG4gICAgdGhpcy5lZGl0b3JJc0hpZGRlbiA9ICFkaXNwbGF5LndyYXBwZXIub2Zmc2V0V2lkdGg7XG4gICAgdGhpcy53cmFwcGVySGVpZ2h0ID0gZGlzcGxheS53cmFwcGVyLmNsaWVudEhlaWdodDtcbiAgICB0aGlzLndyYXBwZXJXaWR0aCA9IGRpc3BsYXkud3JhcHBlci5jbGllbnRXaWR0aDtcbiAgICB0aGlzLm9sZERpc3BsYXlXaWR0aCA9IGRpc3BsYXlXaWR0aChjbSk7XG4gICAgdGhpcy5mb3JjZSA9IGZvcmNlO1xuICAgIHRoaXMuZGltcyA9IGdldERpbWVuc2lvbnMoY20pO1xuICAgIHRoaXMuZXZlbnRzID0gW107XG4gIH07XG5cbiAgRGlzcGxheVVwZGF0ZS5wcm90b3R5cGUuc2lnbmFsID0gZnVuY3Rpb24gKGVtaXR0ZXIsIHR5cGUpIHtcbiAgICBpZiAoaGFzSGFuZGxlcihlbWl0dGVyLCB0eXBlKSlcbiAgICAgIHsgdGhpcy5ldmVudHMucHVzaChhcmd1bWVudHMpOyB9XG4gIH07XG4gIERpc3BsYXlVcGRhdGUucHJvdG90eXBlLmZpbmlzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuZXZlbnRzLmxlbmd0aDsgaSsrKVxuICAgICAgeyBzaWduYWwuYXBwbHkobnVsbCwgdGhpcy5ldmVudHNbaV0pOyB9XG4gIH07XG5cbiAgZnVuY3Rpb24gbWF5YmVDbGlwU2Nyb2xsYmFycyhjbSkge1xuICAgIHZhciBkaXNwbGF5ID0gY20uZGlzcGxheTtcbiAgICBpZiAoIWRpc3BsYXkuc2Nyb2xsYmFyc0NsaXBwZWQgJiYgZGlzcGxheS5zY3JvbGxlci5vZmZzZXRXaWR0aCkge1xuICAgICAgZGlzcGxheS5uYXRpdmVCYXJXaWR0aCA9IGRpc3BsYXkuc2Nyb2xsZXIub2Zmc2V0V2lkdGggLSBkaXNwbGF5LnNjcm9sbGVyLmNsaWVudFdpZHRoO1xuICAgICAgZGlzcGxheS5oZWlnaHRGb3JjZXIuc3R5bGUuaGVpZ2h0ID0gc2Nyb2xsR2FwKGNtKSArIFwicHhcIjtcbiAgICAgIGRpc3BsYXkuc2l6ZXIuc3R5bGUubWFyZ2luQm90dG9tID0gLWRpc3BsYXkubmF0aXZlQmFyV2lkdGggKyBcInB4XCI7XG4gICAgICBkaXNwbGF5LnNpemVyLnN0eWxlLmJvcmRlclJpZ2h0V2lkdGggPSBzY3JvbGxHYXAoY20pICsgXCJweFwiO1xuICAgICAgZGlzcGxheS5zY3JvbGxiYXJzQ2xpcHBlZCA9IHRydWU7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gc2VsZWN0aW9uU25hcHNob3QoY20pIHtcbiAgICBpZiAoY20uaGFzRm9jdXMoKSkgeyByZXR1cm4gbnVsbCB9XG4gICAgdmFyIGFjdGl2ZSA9IGFjdGl2ZUVsdChyb290KGNtKSk7XG4gICAgaWYgKCFhY3RpdmUgfHwgIWNvbnRhaW5zKGNtLmRpc3BsYXkubGluZURpdiwgYWN0aXZlKSkgeyByZXR1cm4gbnVsbCB9XG4gICAgdmFyIHJlc3VsdCA9IHthY3RpdmVFbHQ6IGFjdGl2ZX07XG4gICAgaWYgKHdpbmRvdy5nZXRTZWxlY3Rpb24pIHtcbiAgICAgIHZhciBzZWwgPSB3aW4oY20pLmdldFNlbGVjdGlvbigpO1xuICAgICAgaWYgKHNlbC5hbmNob3JOb2RlICYmIHNlbC5leHRlbmQgJiYgY29udGFpbnMoY20uZGlzcGxheS5saW5lRGl2LCBzZWwuYW5jaG9yTm9kZSkpIHtcbiAgICAgICAgcmVzdWx0LmFuY2hvck5vZGUgPSBzZWwuYW5jaG9yTm9kZTtcbiAgICAgICAgcmVzdWx0LmFuY2hvck9mZnNldCA9IHNlbC5hbmNob3JPZmZzZXQ7XG4gICAgICAgIHJlc3VsdC5mb2N1c05vZGUgPSBzZWwuZm9jdXNOb2RlO1xuICAgICAgICByZXN1bHQuZm9jdXNPZmZzZXQgPSBzZWwuZm9jdXNPZmZzZXQ7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXN1bHRcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlc3RvcmVTZWxlY3Rpb24oc25hcHNob3QpIHtcbiAgICBpZiAoIXNuYXBzaG90IHx8ICFzbmFwc2hvdC5hY3RpdmVFbHQgfHwgc25hcHNob3QuYWN0aXZlRWx0ID09IGFjdGl2ZUVsdChyb290Tm9kZShzbmFwc2hvdC5hY3RpdmVFbHQpKSkgeyByZXR1cm4gfVxuICAgIHNuYXBzaG90LmFjdGl2ZUVsdC5mb2N1cygpO1xuICAgIGlmICghL14oSU5QVVR8VEVYVEFSRUEpJC8udGVzdChzbmFwc2hvdC5hY3RpdmVFbHQubm9kZU5hbWUpICYmXG4gICAgICAgIHNuYXBzaG90LmFuY2hvck5vZGUgJiYgY29udGFpbnMoZG9jdW1lbnQuYm9keSwgc25hcHNob3QuYW5jaG9yTm9kZSkgJiYgY29udGFpbnMoZG9jdW1lbnQuYm9keSwgc25hcHNob3QuZm9jdXNOb2RlKSkge1xuICAgICAgdmFyIGRvYyA9IHNuYXBzaG90LmFjdGl2ZUVsdC5vd25lckRvY3VtZW50O1xuICAgICAgdmFyIHNlbCA9IGRvYy5kZWZhdWx0Vmlldy5nZXRTZWxlY3Rpb24oKSwgcmFuZ2UgPSBkb2MuY3JlYXRlUmFuZ2UoKTtcbiAgICAgIHJhbmdlLnNldEVuZChzbmFwc2hvdC5hbmNob3JOb2RlLCBzbmFwc2hvdC5hbmNob3JPZmZzZXQpO1xuICAgICAgcmFuZ2UuY29sbGFwc2UoZmFsc2UpO1xuICAgICAgc2VsLnJlbW92ZUFsbFJhbmdlcygpO1xuICAgICAgc2VsLmFkZFJhbmdlKHJhbmdlKTtcbiAgICAgIHNlbC5leHRlbmQoc25hcHNob3QuZm9jdXNOb2RlLCBzbmFwc2hvdC5mb2N1c09mZnNldCk7XG4gICAgfVxuICB9XG5cbiAgLy8gRG9lcyB0aGUgYWN0dWFsIHVwZGF0aW5nIG9mIHRoZSBsaW5lIGRpc3BsYXkuIEJhaWxzIG91dFxuICAvLyAocmV0dXJuaW5nIGZhbHNlKSB3aGVuIHRoZXJlIGlzIG5vdGhpbmcgdG8gYmUgZG9uZSBhbmQgZm9yY2VkIGlzXG4gIC8vIGZhbHNlLlxuICBmdW5jdGlvbiB1cGRhdGVEaXNwbGF5SWZOZWVkZWQoY20sIHVwZGF0ZSkge1xuICAgIHZhciBkaXNwbGF5ID0gY20uZGlzcGxheSwgZG9jID0gY20uZG9jO1xuXG4gICAgaWYgKHVwZGF0ZS5lZGl0b3JJc0hpZGRlbikge1xuICAgICAgcmVzZXRWaWV3KGNtKTtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cblxuICAgIC8vIEJhaWwgb3V0IGlmIHRoZSB2aXNpYmxlIGFyZWEgaXMgYWxyZWFkeSByZW5kZXJlZCBhbmQgbm90aGluZyBjaGFuZ2VkLlxuICAgIGlmICghdXBkYXRlLmZvcmNlICYmXG4gICAgICAgIHVwZGF0ZS52aXNpYmxlLmZyb20gPj0gZGlzcGxheS52aWV3RnJvbSAmJiB1cGRhdGUudmlzaWJsZS50byA8PSBkaXNwbGF5LnZpZXdUbyAmJlxuICAgICAgICAoZGlzcGxheS51cGRhdGVMaW5lTnVtYmVycyA9PSBudWxsIHx8IGRpc3BsYXkudXBkYXRlTGluZU51bWJlcnMgPj0gZGlzcGxheS52aWV3VG8pICYmXG4gICAgICAgIGRpc3BsYXkucmVuZGVyZWRWaWV3ID09IGRpc3BsYXkudmlldyAmJiBjb3VudERpcnR5VmlldyhjbSkgPT0gMClcbiAgICAgIHsgcmV0dXJuIGZhbHNlIH1cblxuICAgIGlmIChtYXliZVVwZGF0ZUxpbmVOdW1iZXJXaWR0aChjbSkpIHtcbiAgICAgIHJlc2V0VmlldyhjbSk7XG4gICAgICB1cGRhdGUuZGltcyA9IGdldERpbWVuc2lvbnMoY20pO1xuICAgIH1cblxuICAgIC8vIENvbXB1dGUgYSBzdWl0YWJsZSBuZXcgdmlld3BvcnQgKGZyb20gJiB0bylcbiAgICB2YXIgZW5kID0gZG9jLmZpcnN0ICsgZG9jLnNpemU7XG4gICAgdmFyIGZyb20gPSBNYXRoLm1heCh1cGRhdGUudmlzaWJsZS5mcm9tIC0gY20ub3B0aW9ucy52aWV3cG9ydE1hcmdpbiwgZG9jLmZpcnN0KTtcbiAgICB2YXIgdG8gPSBNYXRoLm1pbihlbmQsIHVwZGF0ZS52aXNpYmxlLnRvICsgY20ub3B0aW9ucy52aWV3cG9ydE1hcmdpbik7XG4gICAgaWYgKGRpc3BsYXkudmlld0Zyb20gPCBmcm9tICYmIGZyb20gLSBkaXNwbGF5LnZpZXdGcm9tIDwgMjApIHsgZnJvbSA9IE1hdGgubWF4KGRvYy5maXJzdCwgZGlzcGxheS52aWV3RnJvbSk7IH1cbiAgICBpZiAoZGlzcGxheS52aWV3VG8gPiB0byAmJiBkaXNwbGF5LnZpZXdUbyAtIHRvIDwgMjApIHsgdG8gPSBNYXRoLm1pbihlbmQsIGRpc3BsYXkudmlld1RvKTsgfVxuICAgIGlmIChzYXdDb2xsYXBzZWRTcGFucykge1xuICAgICAgZnJvbSA9IHZpc3VhbExpbmVObyhjbS5kb2MsIGZyb20pO1xuICAgICAgdG8gPSB2aXN1YWxMaW5lRW5kTm8oY20uZG9jLCB0byk7XG4gICAgfVxuXG4gICAgdmFyIGRpZmZlcmVudCA9IGZyb20gIT0gZGlzcGxheS52aWV3RnJvbSB8fCB0byAhPSBkaXNwbGF5LnZpZXdUbyB8fFxuICAgICAgZGlzcGxheS5sYXN0V3JhcEhlaWdodCAhPSB1cGRhdGUud3JhcHBlckhlaWdodCB8fCBkaXNwbGF5Lmxhc3RXcmFwV2lkdGggIT0gdXBkYXRlLndyYXBwZXJXaWR0aDtcbiAgICBhZGp1c3RWaWV3KGNtLCBmcm9tLCB0byk7XG5cbiAgICBkaXNwbGF5LnZpZXdPZmZzZXQgPSBoZWlnaHRBdExpbmUoZ2V0TGluZShjbS5kb2MsIGRpc3BsYXkudmlld0Zyb20pKTtcbiAgICAvLyBQb3NpdGlvbiB0aGUgbW92ZXIgZGl2IHRvIGFsaWduIHdpdGggdGhlIGN1cnJlbnQgc2Nyb2xsIHBvc2l0aW9uXG4gICAgY20uZGlzcGxheS5tb3Zlci5zdHlsZS50b3AgPSBkaXNwbGF5LnZpZXdPZmZzZXQgKyBcInB4XCI7XG5cbiAgICB2YXIgdG9VcGRhdGUgPSBjb3VudERpcnR5VmlldyhjbSk7XG4gICAgaWYgKCFkaWZmZXJlbnQgJiYgdG9VcGRhdGUgPT0gMCAmJiAhdXBkYXRlLmZvcmNlICYmIGRpc3BsYXkucmVuZGVyZWRWaWV3ID09IGRpc3BsYXkudmlldyAmJlxuICAgICAgICAoZGlzcGxheS51cGRhdGVMaW5lTnVtYmVycyA9PSBudWxsIHx8IGRpc3BsYXkudXBkYXRlTGluZU51bWJlcnMgPj0gZGlzcGxheS52aWV3VG8pKVxuICAgICAgeyByZXR1cm4gZmFsc2UgfVxuXG4gICAgLy8gRm9yIGJpZyBjaGFuZ2VzLCB3ZSBoaWRlIHRoZSBlbmNsb3NpbmcgZWxlbWVudCBkdXJpbmcgdGhlXG4gICAgLy8gdXBkYXRlLCBzaW5jZSB0aGF0IHNwZWVkcyB1cCB0aGUgb3BlcmF0aW9ucyBvbiBtb3N0IGJyb3dzZXJzLlxuICAgIHZhciBzZWxTbmFwc2hvdCA9IHNlbGVjdGlvblNuYXBzaG90KGNtKTtcbiAgICBpZiAodG9VcGRhdGUgPiA0KSB7IGRpc3BsYXkubGluZURpdi5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7IH1cbiAgICBwYXRjaERpc3BsYXkoY20sIGRpc3BsYXkudXBkYXRlTGluZU51bWJlcnMsIHVwZGF0ZS5kaW1zKTtcbiAgICBpZiAodG9VcGRhdGUgPiA0KSB7IGRpc3BsYXkubGluZURpdi5zdHlsZS5kaXNwbGF5ID0gXCJcIjsgfVxuICAgIGRpc3BsYXkucmVuZGVyZWRWaWV3ID0gZGlzcGxheS52aWV3O1xuICAgIC8vIFRoZXJlIG1pZ2h0IGhhdmUgYmVlbiBhIHdpZGdldCB3aXRoIGEgZm9jdXNlZCBlbGVtZW50IHRoYXQgZ290XG4gICAgLy8gaGlkZGVuIG9yIHVwZGF0ZWQsIGlmIHNvIHJlLWZvY3VzIGl0LlxuICAgIHJlc3RvcmVTZWxlY3Rpb24oc2VsU25hcHNob3QpO1xuXG4gICAgLy8gUHJldmVudCBzZWxlY3Rpb24gYW5kIGN1cnNvcnMgZnJvbSBpbnRlcmZlcmluZyB3aXRoIHRoZSBzY3JvbGxcbiAgICAvLyB3aWR0aCBhbmQgaGVpZ2h0LlxuICAgIHJlbW92ZUNoaWxkcmVuKGRpc3BsYXkuY3Vyc29yRGl2KTtcbiAgICByZW1vdmVDaGlsZHJlbihkaXNwbGF5LnNlbGVjdGlvbkRpdik7XG4gICAgZGlzcGxheS5ndXR0ZXJzLnN0eWxlLmhlaWdodCA9IGRpc3BsYXkuc2l6ZXIuc3R5bGUubWluSGVpZ2h0ID0gMDtcblxuICAgIGlmIChkaWZmZXJlbnQpIHtcbiAgICAgIGRpc3BsYXkubGFzdFdyYXBIZWlnaHQgPSB1cGRhdGUud3JhcHBlckhlaWdodDtcbiAgICAgIGRpc3BsYXkubGFzdFdyYXBXaWR0aCA9IHVwZGF0ZS53cmFwcGVyV2lkdGg7XG4gICAgICBzdGFydFdvcmtlcihjbSwgNDAwKTtcbiAgICB9XG5cbiAgICBkaXNwbGF5LnVwZGF0ZUxpbmVOdW1iZXJzID0gbnVsbDtcblxuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICBmdW5jdGlvbiBwb3N0VXBkYXRlRGlzcGxheShjbSwgdXBkYXRlKSB7XG4gICAgdmFyIHZpZXdwb3J0ID0gdXBkYXRlLnZpZXdwb3J0O1xuXG4gICAgZm9yICh2YXIgZmlyc3QgPSB0cnVlOzsgZmlyc3QgPSBmYWxzZSkge1xuICAgICAgaWYgKCFmaXJzdCB8fCAhY20ub3B0aW9ucy5saW5lV3JhcHBpbmcgfHwgdXBkYXRlLm9sZERpc3BsYXlXaWR0aCA9PSBkaXNwbGF5V2lkdGgoY20pKSB7XG4gICAgICAgIC8vIENsaXAgZm9yY2VkIHZpZXdwb3J0IHRvIGFjdHVhbCBzY3JvbGxhYmxlIGFyZWEuXG4gICAgICAgIGlmICh2aWV3cG9ydCAmJiB2aWV3cG9ydC50b3AgIT0gbnVsbClcbiAgICAgICAgICB7IHZpZXdwb3J0ID0ge3RvcDogTWF0aC5taW4oY20uZG9jLmhlaWdodCArIHBhZGRpbmdWZXJ0KGNtLmRpc3BsYXkpIC0gZGlzcGxheUhlaWdodChjbSksIHZpZXdwb3J0LnRvcCl9OyB9XG4gICAgICAgIC8vIFVwZGF0ZWQgbGluZSBoZWlnaHRzIG1pZ2h0IHJlc3VsdCBpbiB0aGUgZHJhd24gYXJlYSBub3RcbiAgICAgICAgLy8gYWN0dWFsbHkgY292ZXJpbmcgdGhlIHZpZXdwb3J0LiBLZWVwIGxvb3BpbmcgdW50aWwgaXQgZG9lcy5cbiAgICAgICAgdXBkYXRlLnZpc2libGUgPSB2aXNpYmxlTGluZXMoY20uZGlzcGxheSwgY20uZG9jLCB2aWV3cG9ydCk7XG4gICAgICAgIGlmICh1cGRhdGUudmlzaWJsZS5mcm9tID49IGNtLmRpc3BsYXkudmlld0Zyb20gJiYgdXBkYXRlLnZpc2libGUudG8gPD0gY20uZGlzcGxheS52aWV3VG8pXG4gICAgICAgICAgeyBicmVhayB9XG4gICAgICB9IGVsc2UgaWYgKGZpcnN0KSB7XG4gICAgICAgIHVwZGF0ZS52aXNpYmxlID0gdmlzaWJsZUxpbmVzKGNtLmRpc3BsYXksIGNtLmRvYywgdmlld3BvcnQpO1xuICAgICAgfVxuICAgICAgaWYgKCF1cGRhdGVEaXNwbGF5SWZOZWVkZWQoY20sIHVwZGF0ZSkpIHsgYnJlYWsgfVxuICAgICAgdXBkYXRlSGVpZ2h0c0luVmlld3BvcnQoY20pO1xuICAgICAgdmFyIGJhck1lYXN1cmUgPSBtZWFzdXJlRm9yU2Nyb2xsYmFycyhjbSk7XG4gICAgICB1cGRhdGVTZWxlY3Rpb24oY20pO1xuICAgICAgdXBkYXRlU2Nyb2xsYmFycyhjbSwgYmFyTWVhc3VyZSk7XG4gICAgICBzZXREb2N1bWVudEhlaWdodChjbSwgYmFyTWVhc3VyZSk7XG4gICAgICB1cGRhdGUuZm9yY2UgPSBmYWxzZTtcbiAgICB9XG5cbiAgICB1cGRhdGUuc2lnbmFsKGNtLCBcInVwZGF0ZVwiLCBjbSk7XG4gICAgaWYgKGNtLmRpc3BsYXkudmlld0Zyb20gIT0gY20uZGlzcGxheS5yZXBvcnRlZFZpZXdGcm9tIHx8IGNtLmRpc3BsYXkudmlld1RvICE9IGNtLmRpc3BsYXkucmVwb3J0ZWRWaWV3VG8pIHtcbiAgICAgIHVwZGF0ZS5zaWduYWwoY20sIFwidmlld3BvcnRDaGFuZ2VcIiwgY20sIGNtLmRpc3BsYXkudmlld0Zyb20sIGNtLmRpc3BsYXkudmlld1RvKTtcbiAgICAgIGNtLmRpc3BsYXkucmVwb3J0ZWRWaWV3RnJvbSA9IGNtLmRpc3BsYXkudmlld0Zyb207IGNtLmRpc3BsYXkucmVwb3J0ZWRWaWV3VG8gPSBjbS5kaXNwbGF5LnZpZXdUbztcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiB1cGRhdGVEaXNwbGF5U2ltcGxlKGNtLCB2aWV3cG9ydCkge1xuICAgIHZhciB1cGRhdGUgPSBuZXcgRGlzcGxheVVwZGF0ZShjbSwgdmlld3BvcnQpO1xuICAgIGlmICh1cGRhdGVEaXNwbGF5SWZOZWVkZWQoY20sIHVwZGF0ZSkpIHtcbiAgICAgIHVwZGF0ZUhlaWdodHNJblZpZXdwb3J0KGNtKTtcbiAgICAgIHBvc3RVcGRhdGVEaXNwbGF5KGNtLCB1cGRhdGUpO1xuICAgICAgdmFyIGJhck1lYXN1cmUgPSBtZWFzdXJlRm9yU2Nyb2xsYmFycyhjbSk7XG4gICAgICB1cGRhdGVTZWxlY3Rpb24oY20pO1xuICAgICAgdXBkYXRlU2Nyb2xsYmFycyhjbSwgYmFyTWVhc3VyZSk7XG4gICAgICBzZXREb2N1bWVudEhlaWdodChjbSwgYmFyTWVhc3VyZSk7XG4gICAgICB1cGRhdGUuZmluaXNoKCk7XG4gICAgfVxuICB9XG5cbiAgLy8gU3luYyB0aGUgYWN0dWFsIGRpc3BsYXkgRE9NIHN0cnVjdHVyZSB3aXRoIGRpc3BsYXkudmlldywgcmVtb3ZpbmdcbiAgLy8gbm9kZXMgZm9yIGxpbmVzIHRoYXQgYXJlIG5vIGxvbmdlciBpbiB2aWV3LCBhbmQgY3JlYXRpbmcgdGhlIG9uZXNcbiAgLy8gdGhhdCBhcmUgbm90IHRoZXJlIHlldCwgYW5kIHVwZGF0aW5nIHRoZSBvbmVzIHRoYXQgYXJlIG91dCBvZlxuICAvLyBkYXRlLlxuICBmdW5jdGlvbiBwYXRjaERpc3BsYXkoY20sIHVwZGF0ZU51bWJlcnNGcm9tLCBkaW1zKSB7XG4gICAgdmFyIGRpc3BsYXkgPSBjbS5kaXNwbGF5LCBsaW5lTnVtYmVycyA9IGNtLm9wdGlvbnMubGluZU51bWJlcnM7XG4gICAgdmFyIGNvbnRhaW5lciA9IGRpc3BsYXkubGluZURpdiwgY3VyID0gY29udGFpbmVyLmZpcnN0Q2hpbGQ7XG5cbiAgICBmdW5jdGlvbiBybShub2RlKSB7XG4gICAgICB2YXIgbmV4dCA9IG5vZGUubmV4dFNpYmxpbmc7XG4gICAgICAvLyBXb3JrcyBhcm91bmQgYSB0aHJvdy1zY3JvbGwgYnVnIGluIE9TIFggV2Via2l0XG4gICAgICBpZiAod2Via2l0ICYmIG1hYyAmJiBjbS5kaXNwbGF5LmN1cnJlbnRXaGVlbFRhcmdldCA9PSBub2RlKVxuICAgICAgICB7IG5vZGUuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiOyB9XG4gICAgICBlbHNlXG4gICAgICAgIHsgbm9kZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG5vZGUpOyB9XG4gICAgICByZXR1cm4gbmV4dFxuICAgIH1cblxuICAgIHZhciB2aWV3ID0gZGlzcGxheS52aWV3LCBsaW5lTiA9IGRpc3BsYXkudmlld0Zyb207XG4gICAgLy8gTG9vcCBvdmVyIHRoZSBlbGVtZW50cyBpbiB0aGUgdmlldywgc3luY2luZyBjdXIgKHRoZSBET00gbm9kZXNcbiAgICAvLyBpbiBkaXNwbGF5LmxpbmVEaXYpIHdpdGggdGhlIHZpZXcgYXMgd2UgZ28uXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2aWV3Lmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgbGluZVZpZXcgPSB2aWV3W2ldO1xuICAgICAgaWYgKGxpbmVWaWV3LmhpZGRlbikgOyBlbHNlIGlmICghbGluZVZpZXcubm9kZSB8fCBsaW5lVmlldy5ub2RlLnBhcmVudE5vZGUgIT0gY29udGFpbmVyKSB7IC8vIE5vdCBkcmF3biB5ZXRcbiAgICAgICAgdmFyIG5vZGUgPSBidWlsZExpbmVFbGVtZW50KGNtLCBsaW5lVmlldywgbGluZU4sIGRpbXMpO1xuICAgICAgICBjb250YWluZXIuaW5zZXJ0QmVmb3JlKG5vZGUsIGN1cik7XG4gICAgICB9IGVsc2UgeyAvLyBBbHJlYWR5IGRyYXduXG4gICAgICAgIHdoaWxlIChjdXIgIT0gbGluZVZpZXcubm9kZSkgeyBjdXIgPSBybShjdXIpOyB9XG4gICAgICAgIHZhciB1cGRhdGVOdW1iZXIgPSBsaW5lTnVtYmVycyAmJiB1cGRhdGVOdW1iZXJzRnJvbSAhPSBudWxsICYmXG4gICAgICAgICAgdXBkYXRlTnVtYmVyc0Zyb20gPD0gbGluZU4gJiYgbGluZVZpZXcubGluZU51bWJlcjtcbiAgICAgICAgaWYgKGxpbmVWaWV3LmNoYW5nZXMpIHtcbiAgICAgICAgICBpZiAoaW5kZXhPZihsaW5lVmlldy5jaGFuZ2VzLCBcImd1dHRlclwiKSA+IC0xKSB7IHVwZGF0ZU51bWJlciA9IGZhbHNlOyB9XG4gICAgICAgICAgdXBkYXRlTGluZUZvckNoYW5nZXMoY20sIGxpbmVWaWV3LCBsaW5lTiwgZGltcyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHVwZGF0ZU51bWJlcikge1xuICAgICAgICAgIHJlbW92ZUNoaWxkcmVuKGxpbmVWaWV3LmxpbmVOdW1iZXIpO1xuICAgICAgICAgIGxpbmVWaWV3LmxpbmVOdW1iZXIuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUobGluZU51bWJlckZvcihjbS5vcHRpb25zLCBsaW5lTikpKTtcbiAgICAgICAgfVxuICAgICAgICBjdXIgPSBsaW5lVmlldy5ub2RlLm5leHRTaWJsaW5nO1xuICAgICAgfVxuICAgICAgbGluZU4gKz0gbGluZVZpZXcuc2l6ZTtcbiAgICB9XG4gICAgd2hpbGUgKGN1cikgeyBjdXIgPSBybShjdXIpOyB9XG4gIH1cblxuICBmdW5jdGlvbiB1cGRhdGVHdXR0ZXJTcGFjZShkaXNwbGF5KSB7XG4gICAgdmFyIHdpZHRoID0gZGlzcGxheS5ndXR0ZXJzLm9mZnNldFdpZHRoO1xuICAgIGRpc3BsYXkuc2l6ZXIuc3R5bGUubWFyZ2luTGVmdCA9IHdpZHRoICsgXCJweFwiO1xuICAgIC8vIFNlbmQgYW4gZXZlbnQgdG8gY29uc3VtZXJzIHJlc3BvbmRpbmcgdG8gY2hhbmdlcyBpbiBndXR0ZXIgd2lkdGguXG4gICAgc2lnbmFsTGF0ZXIoZGlzcGxheSwgXCJndXR0ZXJDaGFuZ2VkXCIsIGRpc3BsYXkpO1xuICB9XG5cbiAgZnVuY3Rpb24gc2V0RG9jdW1lbnRIZWlnaHQoY20sIG1lYXN1cmUpIHtcbiAgICBjbS5kaXNwbGF5LnNpemVyLnN0eWxlLm1pbkhlaWdodCA9IG1lYXN1cmUuZG9jSGVpZ2h0ICsgXCJweFwiO1xuICAgIGNtLmRpc3BsYXkuaGVpZ2h0Rm9yY2VyLnN0eWxlLnRvcCA9IG1lYXN1cmUuZG9jSGVpZ2h0ICsgXCJweFwiO1xuICAgIGNtLmRpc3BsYXkuZ3V0dGVycy5zdHlsZS5oZWlnaHQgPSAobWVhc3VyZS5kb2NIZWlnaHQgKyBjbS5kaXNwbGF5LmJhckhlaWdodCArIHNjcm9sbEdhcChjbSkpICsgXCJweFwiO1xuICB9XG5cbiAgLy8gUmUtYWxpZ24gbGluZSBudW1iZXJzIGFuZCBndXR0ZXIgbWFya3MgdG8gY29tcGVuc2F0ZSBmb3JcbiAgLy8gaG9yaXpvbnRhbCBzY3JvbGxpbmcuXG4gIGZ1bmN0aW9uIGFsaWduSG9yaXpvbnRhbGx5KGNtKSB7XG4gICAgdmFyIGRpc3BsYXkgPSBjbS5kaXNwbGF5LCB2aWV3ID0gZGlzcGxheS52aWV3O1xuICAgIGlmICghZGlzcGxheS5hbGlnbldpZGdldHMgJiYgKCFkaXNwbGF5Lmd1dHRlcnMuZmlyc3RDaGlsZCB8fCAhY20ub3B0aW9ucy5maXhlZEd1dHRlcikpIHsgcmV0dXJuIH1cbiAgICB2YXIgY29tcCA9IGNvbXBlbnNhdGVGb3JIU2Nyb2xsKGRpc3BsYXkpIC0gZGlzcGxheS5zY3JvbGxlci5zY3JvbGxMZWZ0ICsgY20uZG9jLnNjcm9sbExlZnQ7XG4gICAgdmFyIGd1dHRlclcgPSBkaXNwbGF5Lmd1dHRlcnMub2Zmc2V0V2lkdGgsIGxlZnQgPSBjb21wICsgXCJweFwiO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmlldy5sZW5ndGg7IGkrKykgeyBpZiAoIXZpZXdbaV0uaGlkZGVuKSB7XG4gICAgICBpZiAoY20ub3B0aW9ucy5maXhlZEd1dHRlcikge1xuICAgICAgICBpZiAodmlld1tpXS5ndXR0ZXIpXG4gICAgICAgICAgeyB2aWV3W2ldLmd1dHRlci5zdHlsZS5sZWZ0ID0gbGVmdDsgfVxuICAgICAgICBpZiAodmlld1tpXS5ndXR0ZXJCYWNrZ3JvdW5kKVxuICAgICAgICAgIHsgdmlld1tpXS5ndXR0ZXJCYWNrZ3JvdW5kLnN0eWxlLmxlZnQgPSBsZWZ0OyB9XG4gICAgICB9XG4gICAgICB2YXIgYWxpZ24gPSB2aWV3W2ldLmFsaWduYWJsZTtcbiAgICAgIGlmIChhbGlnbikgeyBmb3IgKHZhciBqID0gMDsgaiA8IGFsaWduLmxlbmd0aDsgaisrKVxuICAgICAgICB7IGFsaWduW2pdLnN0eWxlLmxlZnQgPSBsZWZ0OyB9IH1cbiAgICB9IH1cbiAgICBpZiAoY20ub3B0aW9ucy5maXhlZEd1dHRlcilcbiAgICAgIHsgZGlzcGxheS5ndXR0ZXJzLnN0eWxlLmxlZnQgPSAoY29tcCArIGd1dHRlclcpICsgXCJweFwiOyB9XG4gIH1cblxuICAvLyBVc2VkIHRvIGVuc3VyZSB0aGF0IHRoZSBsaW5lIG51bWJlciBndXR0ZXIgaXMgc3RpbGwgdGhlIHJpZ2h0XG4gIC8vIHNpemUgZm9yIHRoZSBjdXJyZW50IGRvY3VtZW50IHNpemUuIFJldHVybnMgdHJ1ZSB3aGVuIGFuIHVwZGF0ZVxuICAvLyBpcyBuZWVkZWQuXG4gIGZ1bmN0aW9uIG1heWJlVXBkYXRlTGluZU51bWJlcldpZHRoKGNtKSB7XG4gICAgaWYgKCFjbS5vcHRpb25zLmxpbmVOdW1iZXJzKSB7IHJldHVybiBmYWxzZSB9XG4gICAgdmFyIGRvYyA9IGNtLmRvYywgbGFzdCA9IGxpbmVOdW1iZXJGb3IoY20ub3B0aW9ucywgZG9jLmZpcnN0ICsgZG9jLnNpemUgLSAxKSwgZGlzcGxheSA9IGNtLmRpc3BsYXk7XG4gICAgaWYgKGxhc3QubGVuZ3RoICE9IGRpc3BsYXkubGluZU51bUNoYXJzKSB7XG4gICAgICB2YXIgdGVzdCA9IGRpc3BsYXkubWVhc3VyZS5hcHBlbmRDaGlsZChlbHQoXCJkaXZcIiwgW2VsdChcImRpdlwiLCBsYXN0KV0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJDb2RlTWlycm9yLWxpbmVudW1iZXIgQ29kZU1pcnJvci1ndXR0ZXItZWx0XCIpKTtcbiAgICAgIHZhciBpbm5lclcgPSB0ZXN0LmZpcnN0Q2hpbGQub2Zmc2V0V2lkdGgsIHBhZGRpbmcgPSB0ZXN0Lm9mZnNldFdpZHRoIC0gaW5uZXJXO1xuICAgICAgZGlzcGxheS5saW5lR3V0dGVyLnN0eWxlLndpZHRoID0gXCJcIjtcbiAgICAgIGRpc3BsYXkubGluZU51bUlubmVyV2lkdGggPSBNYXRoLm1heChpbm5lclcsIGRpc3BsYXkubGluZUd1dHRlci5vZmZzZXRXaWR0aCAtIHBhZGRpbmcpICsgMTtcbiAgICAgIGRpc3BsYXkubGluZU51bVdpZHRoID0gZGlzcGxheS5saW5lTnVtSW5uZXJXaWR0aCArIHBhZGRpbmc7XG4gICAgICBkaXNwbGF5LmxpbmVOdW1DaGFycyA9IGRpc3BsYXkubGluZU51bUlubmVyV2lkdGggPyBsYXN0Lmxlbmd0aCA6IC0xO1xuICAgICAgZGlzcGxheS5saW5lR3V0dGVyLnN0eWxlLndpZHRoID0gZGlzcGxheS5saW5lTnVtV2lkdGggKyBcInB4XCI7XG4gICAgICB1cGRhdGVHdXR0ZXJTcGFjZShjbS5kaXNwbGF5KTtcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgZnVuY3Rpb24gZ2V0R3V0dGVycyhndXR0ZXJzLCBsaW5lTnVtYmVycykge1xuICAgIHZhciByZXN1bHQgPSBbXSwgc2F3TGluZU51bWJlcnMgPSBmYWxzZTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGd1dHRlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBuYW1lID0gZ3V0dGVyc1tpXSwgc3R5bGUgPSBudWxsO1xuICAgICAgaWYgKHR5cGVvZiBuYW1lICE9IFwic3RyaW5nXCIpIHsgc3R5bGUgPSBuYW1lLnN0eWxlOyBuYW1lID0gbmFtZS5jbGFzc05hbWU7IH1cbiAgICAgIGlmIChuYW1lID09IFwiQ29kZU1pcnJvci1saW5lbnVtYmVyc1wiKSB7XG4gICAgICAgIGlmICghbGluZU51bWJlcnMpIHsgY29udGludWUgfVxuICAgICAgICBlbHNlIHsgc2F3TGluZU51bWJlcnMgPSB0cnVlOyB9XG4gICAgICB9XG4gICAgICByZXN1bHQucHVzaCh7Y2xhc3NOYW1lOiBuYW1lLCBzdHlsZTogc3R5bGV9KTtcbiAgICB9XG4gICAgaWYgKGxpbmVOdW1iZXJzICYmICFzYXdMaW5lTnVtYmVycykgeyByZXN1bHQucHVzaCh7Y2xhc3NOYW1lOiBcIkNvZGVNaXJyb3ItbGluZW51bWJlcnNcIiwgc3R5bGU6IG51bGx9KTsgfVxuICAgIHJldHVybiByZXN1bHRcbiAgfVxuXG4gIC8vIFJlYnVpbGQgdGhlIGd1dHRlciBlbGVtZW50cywgZW5zdXJlIHRoZSBtYXJnaW4gdG8gdGhlIGxlZnQgb2YgdGhlXG4gIC8vIGNvZGUgbWF0Y2hlcyB0aGVpciB3aWR0aC5cbiAgZnVuY3Rpb24gcmVuZGVyR3V0dGVycyhkaXNwbGF5KSB7XG4gICAgdmFyIGd1dHRlcnMgPSBkaXNwbGF5Lmd1dHRlcnMsIHNwZWNzID0gZGlzcGxheS5ndXR0ZXJTcGVjcztcbiAgICByZW1vdmVDaGlsZHJlbihndXR0ZXJzKTtcbiAgICBkaXNwbGF5LmxpbmVHdXR0ZXIgPSBudWxsO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3BlY3MubGVuZ3RoOyArK2kpIHtcbiAgICAgIHZhciByZWYgPSBzcGVjc1tpXTtcbiAgICAgIHZhciBjbGFzc05hbWUgPSByZWYuY2xhc3NOYW1lO1xuICAgICAgdmFyIHN0eWxlID0gcmVmLnN0eWxlO1xuICAgICAgdmFyIGdFbHQgPSBndXR0ZXJzLmFwcGVuZENoaWxkKGVsdChcImRpdlwiLCBudWxsLCBcIkNvZGVNaXJyb3ItZ3V0dGVyIFwiICsgY2xhc3NOYW1lKSk7XG4gICAgICBpZiAoc3R5bGUpIHsgZ0VsdC5zdHlsZS5jc3NUZXh0ID0gc3R5bGU7IH1cbiAgICAgIGlmIChjbGFzc05hbWUgPT0gXCJDb2RlTWlycm9yLWxpbmVudW1iZXJzXCIpIHtcbiAgICAgICAgZGlzcGxheS5saW5lR3V0dGVyID0gZ0VsdDtcbiAgICAgICAgZ0VsdC5zdHlsZS53aWR0aCA9IChkaXNwbGF5LmxpbmVOdW1XaWR0aCB8fCAxKSArIFwicHhcIjtcbiAgICAgIH1cbiAgICB9XG4gICAgZ3V0dGVycy5zdHlsZS5kaXNwbGF5ID0gc3BlY3MubGVuZ3RoID8gXCJcIiA6IFwibm9uZVwiO1xuICAgIHVwZGF0ZUd1dHRlclNwYWNlKGRpc3BsYXkpO1xuICB9XG5cbiAgZnVuY3Rpb24gdXBkYXRlR3V0dGVycyhjbSkge1xuICAgIHJlbmRlckd1dHRlcnMoY20uZGlzcGxheSk7XG4gICAgcmVnQ2hhbmdlKGNtKTtcbiAgICBhbGlnbkhvcml6b250YWxseShjbSk7XG4gIH1cblxuICAvLyBUaGUgZGlzcGxheSBoYW5kbGVzIHRoZSBET00gaW50ZWdyYXRpb24sIGJvdGggZm9yIGlucHV0IHJlYWRpbmdcbiAgLy8gYW5kIGNvbnRlbnQgZHJhd2luZy4gSXQgaG9sZHMgcmVmZXJlbmNlcyB0byBET00gbm9kZXMgYW5kXG4gIC8vIGRpc3BsYXktcmVsYXRlZCBzdGF0ZS5cblxuICBmdW5jdGlvbiBEaXNwbGF5KHBsYWNlLCBkb2MsIGlucHV0LCBvcHRpb25zKSB7XG4gICAgdmFyIGQgPSB0aGlzO1xuICAgIHRoaXMuaW5wdXQgPSBpbnB1dDtcblxuICAgIC8vIENvdmVycyBib3R0b20tcmlnaHQgc3F1YXJlIHdoZW4gYm90aCBzY3JvbGxiYXJzIGFyZSBwcmVzZW50LlxuICAgIGQuc2Nyb2xsYmFyRmlsbGVyID0gZWx0KFwiZGl2XCIsIG51bGwsIFwiQ29kZU1pcnJvci1zY3JvbGxiYXItZmlsbGVyXCIpO1xuICAgIGQuc2Nyb2xsYmFyRmlsbGVyLnNldEF0dHJpYnV0ZShcImNtLW5vdC1jb250ZW50XCIsIFwidHJ1ZVwiKTtcbiAgICAvLyBDb3ZlcnMgYm90dG9tIG9mIGd1dHRlciB3aGVuIGNvdmVyR3V0dGVyTmV4dFRvU2Nyb2xsYmFyIGlzIG9uXG4gICAgLy8gYW5kIGggc2Nyb2xsYmFyIGlzIHByZXNlbnQuXG4gICAgZC5ndXR0ZXJGaWxsZXIgPSBlbHQoXCJkaXZcIiwgbnVsbCwgXCJDb2RlTWlycm9yLWd1dHRlci1maWxsZXJcIik7XG4gICAgZC5ndXR0ZXJGaWxsZXIuc2V0QXR0cmlidXRlKFwiY20tbm90LWNvbnRlbnRcIiwgXCJ0cnVlXCIpO1xuICAgIC8vIFdpbGwgY29udGFpbiB0aGUgYWN0dWFsIGNvZGUsIHBvc2l0aW9uZWQgdG8gY292ZXIgdGhlIHZpZXdwb3J0LlxuICAgIGQubGluZURpdiA9IGVsdFAoXCJkaXZcIiwgbnVsbCwgXCJDb2RlTWlycm9yLWNvZGVcIik7XG4gICAgLy8gRWxlbWVudHMgYXJlIGFkZGVkIHRvIHRoZXNlIHRvIHJlcHJlc2VudCBzZWxlY3Rpb24gYW5kIGN1cnNvcnMuXG4gICAgZC5zZWxlY3Rpb25EaXYgPSBlbHQoXCJkaXZcIiwgbnVsbCwgbnVsbCwgXCJwb3NpdGlvbjogcmVsYXRpdmU7IHotaW5kZXg6IDFcIik7XG4gICAgZC5jdXJzb3JEaXYgPSBlbHQoXCJkaXZcIiwgbnVsbCwgXCJDb2RlTWlycm9yLWN1cnNvcnNcIik7XG4gICAgLy8gQSB2aXNpYmlsaXR5OiBoaWRkZW4gZWxlbWVudCB1c2VkIHRvIGZpbmQgdGhlIHNpemUgb2YgdGhpbmdzLlxuICAgIGQubWVhc3VyZSA9IGVsdChcImRpdlwiLCBudWxsLCBcIkNvZGVNaXJyb3ItbWVhc3VyZVwiKTtcbiAgICAvLyBXaGVuIGxpbmVzIG91dHNpZGUgb2YgdGhlIHZpZXdwb3J0IGFyZSBtZWFzdXJlZCwgdGhleSBhcmUgZHJhd24gaW4gdGhpcy5cbiAgICBkLmxpbmVNZWFzdXJlID0gZWx0KFwiZGl2XCIsIG51bGwsIFwiQ29kZU1pcnJvci1tZWFzdXJlXCIpO1xuICAgIC8vIFdyYXBzIGV2ZXJ5dGhpbmcgdGhhdCBuZWVkcyB0byBleGlzdCBpbnNpZGUgdGhlIHZlcnRpY2FsbHktcGFkZGVkIGNvb3JkaW5hdGUgc3lzdGVtXG4gICAgZC5saW5lU3BhY2UgPSBlbHRQKFwiZGl2XCIsIFtkLm1lYXN1cmUsIGQubGluZU1lYXN1cmUsIGQuc2VsZWN0aW9uRGl2LCBkLmN1cnNvckRpdiwgZC5saW5lRGl2XSxcbiAgICAgICAgICAgICAgICAgICAgICBudWxsLCBcInBvc2l0aW9uOiByZWxhdGl2ZTsgb3V0bGluZTogbm9uZVwiKTtcbiAgICB2YXIgbGluZXMgPSBlbHRQKFwiZGl2XCIsIFtkLmxpbmVTcGFjZV0sIFwiQ29kZU1pcnJvci1saW5lc1wiKTtcbiAgICAvLyBNb3ZlZCBhcm91bmQgaXRzIHBhcmVudCB0byBjb3ZlciB2aXNpYmxlIHZpZXcuXG4gICAgZC5tb3ZlciA9IGVsdChcImRpdlwiLCBbbGluZXNdLCBudWxsLCBcInBvc2l0aW9uOiByZWxhdGl2ZVwiKTtcbiAgICAvLyBTZXQgdG8gdGhlIGhlaWdodCBvZiB0aGUgZG9jdW1lbnQsIGFsbG93aW5nIHNjcm9sbGluZy5cbiAgICBkLnNpemVyID0gZWx0KFwiZGl2XCIsIFtkLm1vdmVyXSwgXCJDb2RlTWlycm9yLXNpemVyXCIpO1xuICAgIGQuc2l6ZXJXaWR0aCA9IG51bGw7XG4gICAgLy8gQmVoYXZpb3Igb2YgZWx0cyB3aXRoIG92ZXJmbG93OiBhdXRvIGFuZCBwYWRkaW5nIGlzXG4gICAgLy8gaW5jb25zaXN0ZW50IGFjcm9zcyBicm93c2Vycy4gVGhpcyBpcyB1c2VkIHRvIGVuc3VyZSB0aGVcbiAgICAvLyBzY3JvbGxhYmxlIGFyZWEgaXMgYmlnIGVub3VnaC5cbiAgICBkLmhlaWdodEZvcmNlciA9IGVsdChcImRpdlwiLCBudWxsLCBudWxsLCBcInBvc2l0aW9uOiBhYnNvbHV0ZTsgaGVpZ2h0OiBcIiArIHNjcm9sbGVyR2FwICsgXCJweDsgd2lkdGg6IDFweDtcIik7XG4gICAgLy8gV2lsbCBjb250YWluIHRoZSBndXR0ZXJzLCBpZiBhbnkuXG4gICAgZC5ndXR0ZXJzID0gZWx0KFwiZGl2XCIsIG51bGwsIFwiQ29kZU1pcnJvci1ndXR0ZXJzXCIpO1xuICAgIGQubGluZUd1dHRlciA9IG51bGw7XG4gICAgLy8gQWN0dWFsIHNjcm9sbGFibGUgZWxlbWVudC5cbiAgICBkLnNjcm9sbGVyID0gZWx0KFwiZGl2XCIsIFtkLnNpemVyLCBkLmhlaWdodEZvcmNlciwgZC5ndXR0ZXJzXSwgXCJDb2RlTWlycm9yLXNjcm9sbFwiKTtcbiAgICBkLnNjcm9sbGVyLnNldEF0dHJpYnV0ZShcInRhYkluZGV4XCIsIFwiLTFcIik7XG4gICAgLy8gVGhlIGVsZW1lbnQgaW4gd2hpY2ggdGhlIGVkaXRvciBsaXZlcy5cbiAgICBkLndyYXBwZXIgPSBlbHQoXCJkaXZcIiwgW2Quc2Nyb2xsYmFyRmlsbGVyLCBkLmd1dHRlckZpbGxlciwgZC5zY3JvbGxlcl0sIFwiQ29kZU1pcnJvclwiKTtcbiAgICAvLyBTZWUgIzY5ODIuIEZJWE1FIHJlbW92ZSB3aGVuIHRoaXMgaGFzIGJlZW4gZml4ZWQgZm9yIGEgd2hpbGUgaW4gQ2hyb21lXG4gICAgaWYgKGNocm9tZSAmJiBjaHJvbWVfdmVyc2lvbiA9PT0gMTA1KSB7IGQud3JhcHBlci5zdHlsZS5jbGlwUGF0aCA9IFwiaW5zZXQoMHB4KVwiOyB9XG5cbiAgICAvLyBUaGlzIGF0dHJpYnV0ZSBpcyByZXNwZWN0ZWQgYnkgYXV0b21hdGljIHRyYW5zbGF0aW9uIHN5c3RlbXMgc3VjaCBhcyBHb29nbGUgVHJhbnNsYXRlLFxuICAgIC8vIGFuZCBtYXkgYWxzbyBiZSByZXNwZWN0ZWQgYnkgdG9vbHMgdXNlZCBieSBodW1hbiB0cmFuc2xhdG9ycy5cbiAgICBkLndyYXBwZXIuc2V0QXR0cmlidXRlKCd0cmFuc2xhdGUnLCAnbm8nKTtcblxuICAgIC8vIFdvcmsgYXJvdW5kIElFNyB6LWluZGV4IGJ1ZyAobm90IHBlcmZlY3QsIGhlbmNlIElFNyBub3QgcmVhbGx5IGJlaW5nIHN1cHBvcnRlZClcbiAgICBpZiAoaWUgJiYgaWVfdmVyc2lvbiA8IDgpIHsgZC5ndXR0ZXJzLnN0eWxlLnpJbmRleCA9IC0xOyBkLnNjcm9sbGVyLnN0eWxlLnBhZGRpbmdSaWdodCA9IDA7IH1cbiAgICBpZiAoIXdlYmtpdCAmJiAhKGdlY2tvICYmIG1vYmlsZSkpIHsgZC5zY3JvbGxlci5kcmFnZ2FibGUgPSB0cnVlOyB9XG5cbiAgICBpZiAocGxhY2UpIHtcbiAgICAgIGlmIChwbGFjZS5hcHBlbmRDaGlsZCkgeyBwbGFjZS5hcHBlbmRDaGlsZChkLndyYXBwZXIpOyB9XG4gICAgICBlbHNlIHsgcGxhY2UoZC53cmFwcGVyKTsgfVxuICAgIH1cblxuICAgIC8vIEN1cnJlbnQgcmVuZGVyZWQgcmFuZ2UgKG1heSBiZSBiaWdnZXIgdGhhbiB0aGUgdmlldyB3aW5kb3cpLlxuICAgIGQudmlld0Zyb20gPSBkLnZpZXdUbyA9IGRvYy5maXJzdDtcbiAgICBkLnJlcG9ydGVkVmlld0Zyb20gPSBkLnJlcG9ydGVkVmlld1RvID0gZG9jLmZpcnN0O1xuICAgIC8vIEluZm9ybWF0aW9uIGFib3V0IHRoZSByZW5kZXJlZCBsaW5lcy5cbiAgICBkLnZpZXcgPSBbXTtcbiAgICBkLnJlbmRlcmVkVmlldyA9IG51bGw7XG4gICAgLy8gSG9sZHMgaW5mbyBhYm91dCBhIHNpbmdsZSByZW5kZXJlZCBsaW5lIHdoZW4gaXQgd2FzIHJlbmRlcmVkXG4gICAgLy8gZm9yIG1lYXN1cmVtZW50LCB3aGlsZSBub3QgaW4gdmlldy5cbiAgICBkLmV4dGVybmFsTWVhc3VyZWQgPSBudWxsO1xuICAgIC8vIEVtcHR5IHNwYWNlIChpbiBwaXhlbHMpIGFib3ZlIHRoZSB2aWV3XG4gICAgZC52aWV3T2Zmc2V0ID0gMDtcbiAgICBkLmxhc3RXcmFwSGVpZ2h0ID0gZC5sYXN0V3JhcFdpZHRoID0gMDtcbiAgICBkLnVwZGF0ZUxpbmVOdW1iZXJzID0gbnVsbDtcblxuICAgIGQubmF0aXZlQmFyV2lkdGggPSBkLmJhckhlaWdodCA9IGQuYmFyV2lkdGggPSAwO1xuICAgIGQuc2Nyb2xsYmFyc0NsaXBwZWQgPSBmYWxzZTtcblxuICAgIC8vIFVzZWQgdG8gb25seSByZXNpemUgdGhlIGxpbmUgbnVtYmVyIGd1dHRlciB3aGVuIG5lY2Vzc2FyeSAod2hlblxuICAgIC8vIHRoZSBhbW91bnQgb2YgbGluZXMgY3Jvc3NlcyBhIGJvdW5kYXJ5IHRoYXQgbWFrZXMgaXRzIHdpZHRoIGNoYW5nZSlcbiAgICBkLmxpbmVOdW1XaWR0aCA9IGQubGluZU51bUlubmVyV2lkdGggPSBkLmxpbmVOdW1DaGFycyA9IG51bGw7XG4gICAgLy8gU2V0IHRvIHRydWUgd2hlbiBhIG5vbi1ob3Jpem9udGFsLXNjcm9sbGluZyBsaW5lIHdpZGdldCBpc1xuICAgIC8vIGFkZGVkLiBBcyBhbiBvcHRpbWl6YXRpb24sIGxpbmUgd2lkZ2V0IGFsaWduaW5nIGlzIHNraXBwZWQgd2hlblxuICAgIC8vIHRoaXMgaXMgZmFsc2UuXG4gICAgZC5hbGlnbldpZGdldHMgPSBmYWxzZTtcblxuICAgIGQuY2FjaGVkQ2hhcldpZHRoID0gZC5jYWNoZWRUZXh0SGVpZ2h0ID0gZC5jYWNoZWRQYWRkaW5nSCA9IG51bGw7XG5cbiAgICAvLyBUcmFja3MgdGhlIG1heGltdW0gbGluZSBsZW5ndGggc28gdGhhdCB0aGUgaG9yaXpvbnRhbCBzY3JvbGxiYXJcbiAgICAvLyBjYW4gYmUga2VwdCBzdGF0aWMgd2hlbiBzY3JvbGxpbmcuXG4gICAgZC5tYXhMaW5lID0gbnVsbDtcbiAgICBkLm1heExpbmVMZW5ndGggPSAwO1xuICAgIGQubWF4TGluZUNoYW5nZWQgPSBmYWxzZTtcblxuICAgIC8vIFVzZWQgZm9yIG1lYXN1cmluZyB3aGVlbCBzY3JvbGxpbmcgZ3JhbnVsYXJpdHlcbiAgICBkLndoZWVsRFggPSBkLndoZWVsRFkgPSBkLndoZWVsU3RhcnRYID0gZC53aGVlbFN0YXJ0WSA9IG51bGw7XG5cbiAgICAvLyBUcnVlIHdoZW4gc2hpZnQgaXMgaGVsZCBkb3duLlxuICAgIGQuc2hpZnQgPSBmYWxzZTtcblxuICAgIC8vIFVzZWQgdG8gdHJhY2sgd2hldGhlciBhbnl0aGluZyBoYXBwZW5lZCBzaW5jZSB0aGUgY29udGV4dCBtZW51XG4gICAgLy8gd2FzIG9wZW5lZC5cbiAgICBkLnNlbEZvckNvbnRleHRNZW51ID0gbnVsbDtcblxuICAgIGQuYWN0aXZlVG91Y2ggPSBudWxsO1xuXG4gICAgZC5ndXR0ZXJTcGVjcyA9IGdldEd1dHRlcnMob3B0aW9ucy5ndXR0ZXJzLCBvcHRpb25zLmxpbmVOdW1iZXJzKTtcbiAgICByZW5kZXJHdXR0ZXJzKGQpO1xuXG4gICAgaW5wdXQuaW5pdChkKTtcbiAgfVxuXG4gIC8vIFNpbmNlIHRoZSBkZWx0YSB2YWx1ZXMgcmVwb3J0ZWQgb24gbW91c2Ugd2hlZWwgZXZlbnRzIGFyZVxuICAvLyB1bnN0YW5kYXJkaXplZCBiZXR3ZWVuIGJyb3dzZXJzIGFuZCBldmVuIGJyb3dzZXIgdmVyc2lvbnMsIGFuZFxuICAvLyBnZW5lcmFsbHkgaG9ycmlibHkgdW5wcmVkaWN0YWJsZSwgdGhpcyBjb2RlIHN0YXJ0cyBieSBtZWFzdXJpbmdcbiAgLy8gdGhlIHNjcm9sbCBlZmZlY3QgdGhhdCB0aGUgZmlyc3QgZmV3IG1vdXNlIHdoZWVsIGV2ZW50cyBoYXZlLFxuICAvLyBhbmQsIGZyb20gdGhhdCwgZGV0ZWN0cyB0aGUgd2F5IGl0IGNhbiBjb252ZXJ0IGRlbHRhcyB0byBwaXhlbFxuICAvLyBvZmZzZXRzIGFmdGVyd2FyZHMuXG4gIC8vXG4gIC8vIFRoZSByZWFzb24gd2Ugd2FudCB0byBrbm93IHRoZSBhbW91bnQgYSB3aGVlbCBldmVudCB3aWxsIHNjcm9sbFxuICAvLyBpcyB0aGF0IGl0IGdpdmVzIHVzIGEgY2hhbmNlIHRvIHVwZGF0ZSB0aGUgZGlzcGxheSBiZWZvcmUgdGhlXG4gIC8vIGFjdHVhbCBzY3JvbGxpbmcgaGFwcGVucywgcmVkdWNpbmcgZmxpY2tlcmluZy5cblxuICB2YXIgd2hlZWxTYW1wbGVzID0gMCwgd2hlZWxQaXhlbHNQZXJVbml0ID0gbnVsbDtcbiAgLy8gRmlsbCBpbiBhIGJyb3dzZXItZGV0ZWN0ZWQgc3RhcnRpbmcgdmFsdWUgb24gYnJvd3NlcnMgd2hlcmUgd2VcbiAgLy8ga25vdyBvbmUuIFRoZXNlIGRvbid0IGhhdmUgdG8gYmUgYWNjdXJhdGUgLS0gdGhlIHJlc3VsdCBvZiB0aGVtXG4gIC8vIGJlaW5nIHdyb25nIHdvdWxkIGp1c3QgYmUgYSBzbGlnaHQgZmxpY2tlciBvbiB0aGUgZmlyc3Qgd2hlZWxcbiAgLy8gc2Nyb2xsIChpZiBpdCBpcyBsYXJnZSBlbm91Z2gpLlxuICBpZiAoaWUpIHsgd2hlZWxQaXhlbHNQZXJVbml0ID0gLS41MzsgfVxuICBlbHNlIGlmIChnZWNrbykgeyB3aGVlbFBpeGVsc1BlclVuaXQgPSAxNTsgfVxuICBlbHNlIGlmIChjaHJvbWUpIHsgd2hlZWxQaXhlbHNQZXJVbml0ID0gLS43OyB9XG4gIGVsc2UgaWYgKHNhZmFyaSkgeyB3aGVlbFBpeGVsc1BlclVuaXQgPSAtMS8zOyB9XG5cbiAgZnVuY3Rpb24gd2hlZWxFdmVudERlbHRhKGUpIHtcbiAgICB2YXIgZHggPSBlLndoZWVsRGVsdGFYLCBkeSA9IGUud2hlZWxEZWx0YVk7XG4gICAgaWYgKGR4ID09IG51bGwgJiYgZS5kZXRhaWwgJiYgZS5heGlzID09IGUuSE9SSVpPTlRBTF9BWElTKSB7IGR4ID0gZS5kZXRhaWw7IH1cbiAgICBpZiAoZHkgPT0gbnVsbCAmJiBlLmRldGFpbCAmJiBlLmF4aXMgPT0gZS5WRVJUSUNBTF9BWElTKSB7IGR5ID0gZS5kZXRhaWw7IH1cbiAgICBlbHNlIGlmIChkeSA9PSBudWxsKSB7IGR5ID0gZS53aGVlbERlbHRhOyB9XG4gICAgcmV0dXJuIHt4OiBkeCwgeTogZHl9XG4gIH1cbiAgZnVuY3Rpb24gd2hlZWxFdmVudFBpeGVscyhlKSB7XG4gICAgdmFyIGRlbHRhID0gd2hlZWxFdmVudERlbHRhKGUpO1xuICAgIGRlbHRhLnggKj0gd2hlZWxQaXhlbHNQZXJVbml0O1xuICAgIGRlbHRhLnkgKj0gd2hlZWxQaXhlbHNQZXJVbml0O1xuICAgIHJldHVybiBkZWx0YVxuICB9XG5cbiAgZnVuY3Rpb24gb25TY3JvbGxXaGVlbChjbSwgZSkge1xuICAgIC8vIE9uIENocm9tZSAxMDIsIHZpZXdwb3J0IHVwZGF0ZXMgc29tZWhvdyBzdG9wIHdoZWVsLWJhc2VkXG4gICAgLy8gc2Nyb2xsaW5nLiBUdXJuaW5nIG9mZiBwb2ludGVyIGV2ZW50cyBkdXJpbmcgdGhlIHNjcm9sbCBzZWVtc1xuICAgIC8vIHRvIGF2b2lkIHRoZSBpc3N1ZS5cbiAgICBpZiAoY2hyb21lICYmIGNocm9tZV92ZXJzaW9uID09IDEwMikge1xuICAgICAgaWYgKGNtLmRpc3BsYXkuY2hyb21lU2Nyb2xsSGFjayA9PSBudWxsKSB7IGNtLmRpc3BsYXkuc2l6ZXIuc3R5bGUucG9pbnRlckV2ZW50cyA9IFwibm9uZVwiOyB9XG4gICAgICBlbHNlIHsgY2xlYXJUaW1lb3V0KGNtLmRpc3BsYXkuY2hyb21lU2Nyb2xsSGFjayk7IH1cbiAgICAgIGNtLmRpc3BsYXkuY2hyb21lU2Nyb2xsSGFjayA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICBjbS5kaXNwbGF5LmNocm9tZVNjcm9sbEhhY2sgPSBudWxsO1xuICAgICAgICBjbS5kaXNwbGF5LnNpemVyLnN0eWxlLnBvaW50ZXJFdmVudHMgPSBcIlwiO1xuICAgICAgfSwgMTAwKTtcbiAgICB9XG4gICAgdmFyIGRlbHRhID0gd2hlZWxFdmVudERlbHRhKGUpLCBkeCA9IGRlbHRhLngsIGR5ID0gZGVsdGEueTtcbiAgICB2YXIgcGl4ZWxzUGVyVW5pdCA9IHdoZWVsUGl4ZWxzUGVyVW5pdDtcbiAgICBpZiAoZS5kZWx0YU1vZGUgPT09IDApIHtcbiAgICAgIGR4ID0gZS5kZWx0YVg7XG4gICAgICBkeSA9IGUuZGVsdGFZO1xuICAgICAgcGl4ZWxzUGVyVW5pdCA9IDE7XG4gICAgfVxuXG4gICAgdmFyIGRpc3BsYXkgPSBjbS5kaXNwbGF5LCBzY3JvbGwgPSBkaXNwbGF5LnNjcm9sbGVyO1xuICAgIC8vIFF1aXQgaWYgdGhlcmUncyBub3RoaW5nIHRvIHNjcm9sbCBoZXJlXG4gICAgdmFyIGNhblNjcm9sbFggPSBzY3JvbGwuc2Nyb2xsV2lkdGggPiBzY3JvbGwuY2xpZW50V2lkdGg7XG4gICAgdmFyIGNhblNjcm9sbFkgPSBzY3JvbGwuc2Nyb2xsSGVpZ2h0ID4gc2Nyb2xsLmNsaWVudEhlaWdodDtcbiAgICBpZiAoIShkeCAmJiBjYW5TY3JvbGxYIHx8IGR5ICYmIGNhblNjcm9sbFkpKSB7IHJldHVybiB9XG5cbiAgICAvLyBXZWJraXQgYnJvd3NlcnMgb24gT1MgWCBhYm9ydCBtb21lbnR1bSBzY3JvbGxzIHdoZW4gdGhlIHRhcmdldFxuICAgIC8vIG9mIHRoZSBzY3JvbGwgZXZlbnQgaXMgcmVtb3ZlZCBmcm9tIHRoZSBzY3JvbGxhYmxlIGVsZW1lbnQuXG4gICAgLy8gVGhpcyBoYWNrIChzZWUgcmVsYXRlZCBjb2RlIGluIHBhdGNoRGlzcGxheSkgbWFrZXMgc3VyZSB0aGVcbiAgICAvLyBlbGVtZW50IGlzIGtlcHQgYXJvdW5kLlxuICAgIGlmIChkeSAmJiBtYWMgJiYgd2Via2l0KSB7XG4gICAgICBvdXRlcjogZm9yICh2YXIgY3VyID0gZS50YXJnZXQsIHZpZXcgPSBkaXNwbGF5LnZpZXc7IGN1ciAhPSBzY3JvbGw7IGN1ciA9IGN1ci5wYXJlbnROb2RlKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmlldy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGlmICh2aWV3W2ldLm5vZGUgPT0gY3VyKSB7XG4gICAgICAgICAgICBjbS5kaXNwbGF5LmN1cnJlbnRXaGVlbFRhcmdldCA9IGN1cjtcbiAgICAgICAgICAgIGJyZWFrIG91dGVyXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gT24gc29tZSBicm93c2VycywgaG9yaXpvbnRhbCBzY3JvbGxpbmcgd2lsbCBjYXVzZSByZWRyYXdzIHRvXG4gICAgLy8gaGFwcGVuIGJlZm9yZSB0aGUgZ3V0dGVyIGhhcyBiZWVuIHJlYWxpZ25lZCwgY2F1c2luZyBpdCB0b1xuICAgIC8vIHdyaWdnbGUgYXJvdW5kIGluIGEgbW9zdCB1bnNlZW1seSB3YXkuIFdoZW4gd2UgaGF2ZSBhblxuICAgIC8vIGVzdGltYXRlZCBwaXhlbHMvZGVsdGEgdmFsdWUsIHdlIGp1c3QgaGFuZGxlIGhvcml6b250YWxcbiAgICAvLyBzY3JvbGxpbmcgZW50aXJlbHkgaGVyZS4gSXQnbGwgYmUgc2xpZ2h0bHkgb2ZmIGZyb20gbmF0aXZlLCBidXRcbiAgICAvLyBiZXR0ZXIgdGhhbiBnbGl0Y2hpbmcgb3V0LlxuICAgIGlmIChkeCAmJiAhZ2Vja28gJiYgIXByZXN0byAmJiBwaXhlbHNQZXJVbml0ICE9IG51bGwpIHtcbiAgICAgIGlmIChkeSAmJiBjYW5TY3JvbGxZKVxuICAgICAgICB7IHVwZGF0ZVNjcm9sbFRvcChjbSwgTWF0aC5tYXgoMCwgc2Nyb2xsLnNjcm9sbFRvcCArIGR5ICogcGl4ZWxzUGVyVW5pdCkpOyB9XG4gICAgICBzZXRTY3JvbGxMZWZ0KGNtLCBNYXRoLm1heCgwLCBzY3JvbGwuc2Nyb2xsTGVmdCArIGR4ICogcGl4ZWxzUGVyVW5pdCkpO1xuICAgICAgLy8gT25seSBwcmV2ZW50IGRlZmF1bHQgc2Nyb2xsaW5nIGlmIHZlcnRpY2FsIHNjcm9sbGluZyBpc1xuICAgICAgLy8gYWN0dWFsbHkgcG9zc2libGUuIE90aGVyd2lzZSwgaXQgY2F1c2VzIHZlcnRpY2FsIHNjcm9sbFxuICAgICAgLy8gaml0dGVyIG9uIE9TWCB0cmFja3BhZHMgd2hlbiBkZWx0YVggaXMgc21hbGwgYW5kIGRlbHRhWVxuICAgICAgLy8gaXMgbGFyZ2UgKGlzc3VlICMzNTc5KVxuICAgICAgaWYgKCFkeSB8fCAoZHkgJiYgY2FuU2Nyb2xsWSkpXG4gICAgICAgIHsgZV9wcmV2ZW50RGVmYXVsdChlKTsgfVxuICAgICAgZGlzcGxheS53aGVlbFN0YXJ0WCA9IG51bGw7IC8vIEFib3J0IG1lYXN1cmVtZW50LCBpZiBpbiBwcm9ncmVzc1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgLy8gJ1Byb2plY3QnIHRoZSB2aXNpYmxlIHZpZXdwb3J0IHRvIGNvdmVyIHRoZSBhcmVhIHRoYXQgaXMgYmVpbmdcbiAgICAvLyBzY3JvbGxlZCBpbnRvIHZpZXcgKGlmIHdlIGtub3cgZW5vdWdoIHRvIGVzdGltYXRlIGl0KS5cbiAgICBpZiAoZHkgJiYgcGl4ZWxzUGVyVW5pdCAhPSBudWxsKSB7XG4gICAgICB2YXIgcGl4ZWxzID0gZHkgKiBwaXhlbHNQZXJVbml0O1xuICAgICAgdmFyIHRvcCA9IGNtLmRvYy5zY3JvbGxUb3AsIGJvdCA9IHRvcCArIGRpc3BsYXkud3JhcHBlci5jbGllbnRIZWlnaHQ7XG4gICAgICBpZiAocGl4ZWxzIDwgMCkgeyB0b3AgPSBNYXRoLm1heCgwLCB0b3AgKyBwaXhlbHMgLSA1MCk7IH1cbiAgICAgIGVsc2UgeyBib3QgPSBNYXRoLm1pbihjbS5kb2MuaGVpZ2h0LCBib3QgKyBwaXhlbHMgKyA1MCk7IH1cbiAgICAgIHVwZGF0ZURpc3BsYXlTaW1wbGUoY20sIHt0b3A6IHRvcCwgYm90dG9tOiBib3R9KTtcbiAgICB9XG5cbiAgICBpZiAod2hlZWxTYW1wbGVzIDwgMjAgJiYgZS5kZWx0YU1vZGUgIT09IDApIHtcbiAgICAgIGlmIChkaXNwbGF5LndoZWVsU3RhcnRYID09IG51bGwpIHtcbiAgICAgICAgZGlzcGxheS53aGVlbFN0YXJ0WCA9IHNjcm9sbC5zY3JvbGxMZWZ0OyBkaXNwbGF5LndoZWVsU3RhcnRZID0gc2Nyb2xsLnNjcm9sbFRvcDtcbiAgICAgICAgZGlzcGxheS53aGVlbERYID0gZHg7IGRpc3BsYXkud2hlZWxEWSA9IGR5O1xuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBpZiAoZGlzcGxheS53aGVlbFN0YXJ0WCA9PSBudWxsKSB7IHJldHVybiB9XG4gICAgICAgICAgdmFyIG1vdmVkWCA9IHNjcm9sbC5zY3JvbGxMZWZ0IC0gZGlzcGxheS53aGVlbFN0YXJ0WDtcbiAgICAgICAgICB2YXIgbW92ZWRZID0gc2Nyb2xsLnNjcm9sbFRvcCAtIGRpc3BsYXkud2hlZWxTdGFydFk7XG4gICAgICAgICAgdmFyIHNhbXBsZSA9IChtb3ZlZFkgJiYgZGlzcGxheS53aGVlbERZICYmIG1vdmVkWSAvIGRpc3BsYXkud2hlZWxEWSkgfHxcbiAgICAgICAgICAgIChtb3ZlZFggJiYgZGlzcGxheS53aGVlbERYICYmIG1vdmVkWCAvIGRpc3BsYXkud2hlZWxEWCk7XG4gICAgICAgICAgZGlzcGxheS53aGVlbFN0YXJ0WCA9IGRpc3BsYXkud2hlZWxTdGFydFkgPSBudWxsO1xuICAgICAgICAgIGlmICghc2FtcGxlKSB7IHJldHVybiB9XG4gICAgICAgICAgd2hlZWxQaXhlbHNQZXJVbml0ID0gKHdoZWVsUGl4ZWxzUGVyVW5pdCAqIHdoZWVsU2FtcGxlcyArIHNhbXBsZSkgLyAod2hlZWxTYW1wbGVzICsgMSk7XG4gICAgICAgICAgKyt3aGVlbFNhbXBsZXM7XG4gICAgICAgIH0sIDIwMCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkaXNwbGF5LndoZWVsRFggKz0gZHg7IGRpc3BsYXkud2hlZWxEWSArPSBkeTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBTZWxlY3Rpb24gb2JqZWN0cyBhcmUgaW1tdXRhYmxlLiBBIG5ldyBvbmUgaXMgY3JlYXRlZCBldmVyeSB0aW1lXG4gIC8vIHRoZSBzZWxlY3Rpb24gY2hhbmdlcy4gQSBzZWxlY3Rpb24gaXMgb25lIG9yIG1vcmUgbm9uLW92ZXJsYXBwaW5nXG4gIC8vIChhbmQgbm9uLXRvdWNoaW5nKSByYW5nZXMsIHNvcnRlZCwgYW5kIGFuIGludGVnZXIgdGhhdCBpbmRpY2F0ZXNcbiAgLy8gd2hpY2ggb25lIGlzIHRoZSBwcmltYXJ5IHNlbGVjdGlvbiAodGhlIG9uZSB0aGF0J3Mgc2Nyb2xsZWQgaW50b1xuICAvLyB2aWV3LCB0aGF0IGdldEN1cnNvciByZXR1cm5zLCBldGMpLlxuICB2YXIgU2VsZWN0aW9uID0gZnVuY3Rpb24ocmFuZ2VzLCBwcmltSW5kZXgpIHtcbiAgICB0aGlzLnJhbmdlcyA9IHJhbmdlcztcbiAgICB0aGlzLnByaW1JbmRleCA9IHByaW1JbmRleDtcbiAgfTtcblxuICBTZWxlY3Rpb24ucHJvdG90eXBlLnByaW1hcnkgPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLnJhbmdlc1t0aGlzLnByaW1JbmRleF0gfTtcblxuICBTZWxlY3Rpb24ucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIChvdGhlcikge1xuICAgIGlmIChvdGhlciA9PSB0aGlzKSB7IHJldHVybiB0cnVlIH1cbiAgICBpZiAob3RoZXIucHJpbUluZGV4ICE9IHRoaXMucHJpbUluZGV4IHx8IG90aGVyLnJhbmdlcy5sZW5ndGggIT0gdGhpcy5yYW5nZXMubGVuZ3RoKSB7IHJldHVybiBmYWxzZSB9XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnJhbmdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGhlcmUgPSB0aGlzLnJhbmdlc1tpXSwgdGhlcmUgPSBvdGhlci5yYW5nZXNbaV07XG4gICAgICBpZiAoIWVxdWFsQ3Vyc29yUG9zKGhlcmUuYW5jaG9yLCB0aGVyZS5hbmNob3IpIHx8ICFlcXVhbEN1cnNvclBvcyhoZXJlLmhlYWQsIHRoZXJlLmhlYWQpKSB7IHJldHVybiBmYWxzZSB9XG4gICAgfVxuICAgIHJldHVybiB0cnVlXG4gIH07XG5cbiAgU2VsZWN0aW9uLnByb3RvdHlwZS5kZWVwQ29weSA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgb3V0ID0gW107XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnJhbmdlcy5sZW5ndGg7IGkrKylcbiAgICAgIHsgb3V0W2ldID0gbmV3IFJhbmdlKGNvcHlQb3ModGhpcy5yYW5nZXNbaV0uYW5jaG9yKSwgY29weVBvcyh0aGlzLnJhbmdlc1tpXS5oZWFkKSk7IH1cbiAgICByZXR1cm4gbmV3IFNlbGVjdGlvbihvdXQsIHRoaXMucHJpbUluZGV4KVxuICB9O1xuXG4gIFNlbGVjdGlvbi5wcm90b3R5cGUuc29tZXRoaW5nU2VsZWN0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnJhbmdlcy5sZW5ndGg7IGkrKylcbiAgICAgIHsgaWYgKCF0aGlzLnJhbmdlc1tpXS5lbXB0eSgpKSB7IHJldHVybiB0cnVlIH0gfVxuICAgIHJldHVybiBmYWxzZVxuICB9O1xuXG4gIFNlbGVjdGlvbi5wcm90b3R5cGUuY29udGFpbnMgPSBmdW5jdGlvbiAocG9zLCBlbmQpIHtcbiAgICBpZiAoIWVuZCkgeyBlbmQgPSBwb3M7IH1cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMucmFuZ2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgcmFuZ2UgPSB0aGlzLnJhbmdlc1tpXTtcbiAgICAgIGlmIChjbXAoZW5kLCByYW5nZS5mcm9tKCkpID49IDAgJiYgY21wKHBvcywgcmFuZ2UudG8oKSkgPD0gMClcbiAgICAgICAgeyByZXR1cm4gaSB9XG4gICAgfVxuICAgIHJldHVybiAtMVxuICB9O1xuXG4gIHZhciBSYW5nZSA9IGZ1bmN0aW9uKGFuY2hvciwgaGVhZCkge1xuICAgIHRoaXMuYW5jaG9yID0gYW5jaG9yOyB0aGlzLmhlYWQgPSBoZWFkO1xuICB9O1xuXG4gIFJhbmdlLnByb3RvdHlwZS5mcm9tID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gbWluUG9zKHRoaXMuYW5jaG9yLCB0aGlzLmhlYWQpIH07XG4gIFJhbmdlLnByb3RvdHlwZS50byA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIG1heFBvcyh0aGlzLmFuY2hvciwgdGhpcy5oZWFkKSB9O1xuICBSYW5nZS5wcm90b3R5cGUuZW1wdHkgPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLmhlYWQubGluZSA9PSB0aGlzLmFuY2hvci5saW5lICYmIHRoaXMuaGVhZC5jaCA9PSB0aGlzLmFuY2hvci5jaCB9O1xuXG4gIC8vIFRha2UgYW4gdW5zb3J0ZWQsIHBvdGVudGlhbGx5IG92ZXJsYXBwaW5nIHNldCBvZiByYW5nZXMsIGFuZFxuICAvLyBidWlsZCBhIHNlbGVjdGlvbiBvdXQgb2YgaXQuICdDb25zdW1lcycgcmFuZ2VzIGFycmF5IChtb2RpZnlpbmdcbiAgLy8gaXQpLlxuICBmdW5jdGlvbiBub3JtYWxpemVTZWxlY3Rpb24oY20sIHJhbmdlcywgcHJpbUluZGV4KSB7XG4gICAgdmFyIG1heVRvdWNoID0gY20gJiYgY20ub3B0aW9ucy5zZWxlY3Rpb25zTWF5VG91Y2g7XG4gICAgdmFyIHByaW0gPSByYW5nZXNbcHJpbUluZGV4XTtcbiAgICByYW5nZXMuc29ydChmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4gY21wKGEuZnJvbSgpLCBiLmZyb20oKSk7IH0pO1xuICAgIHByaW1JbmRleCA9IGluZGV4T2YocmFuZ2VzLCBwcmltKTtcbiAgICBmb3IgKHZhciBpID0gMTsgaSA8IHJhbmdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGN1ciA9IHJhbmdlc1tpXSwgcHJldiA9IHJhbmdlc1tpIC0gMV07XG4gICAgICB2YXIgZGlmZiA9IGNtcChwcmV2LnRvKCksIGN1ci5mcm9tKCkpO1xuICAgICAgaWYgKG1heVRvdWNoICYmICFjdXIuZW1wdHkoKSA/IGRpZmYgPiAwIDogZGlmZiA+PSAwKSB7XG4gICAgICAgIHZhciBmcm9tID0gbWluUG9zKHByZXYuZnJvbSgpLCBjdXIuZnJvbSgpKSwgdG8gPSBtYXhQb3MocHJldi50bygpLCBjdXIudG8oKSk7XG4gICAgICAgIHZhciBpbnYgPSBwcmV2LmVtcHR5KCkgPyBjdXIuZnJvbSgpID09IGN1ci5oZWFkIDogcHJldi5mcm9tKCkgPT0gcHJldi5oZWFkO1xuICAgICAgICBpZiAoaSA8PSBwcmltSW5kZXgpIHsgLS1wcmltSW5kZXg7IH1cbiAgICAgICAgcmFuZ2VzLnNwbGljZSgtLWksIDIsIG5ldyBSYW5nZShpbnYgPyB0byA6IGZyb20sIGludiA/IGZyb20gOiB0bykpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbmV3IFNlbGVjdGlvbihyYW5nZXMsIHByaW1JbmRleClcbiAgfVxuXG4gIGZ1bmN0aW9uIHNpbXBsZVNlbGVjdGlvbihhbmNob3IsIGhlYWQpIHtcbiAgICByZXR1cm4gbmV3IFNlbGVjdGlvbihbbmV3IFJhbmdlKGFuY2hvciwgaGVhZCB8fCBhbmNob3IpXSwgMClcbiAgfVxuXG4gIC8vIENvbXB1dGUgdGhlIHBvc2l0aW9uIG9mIHRoZSBlbmQgb2YgYSBjaGFuZ2UgKGl0cyAndG8nIHByb3BlcnR5XG4gIC8vIHJlZmVycyB0byB0aGUgcHJlLWNoYW5nZSBlbmQpLlxuICBmdW5jdGlvbiBjaGFuZ2VFbmQoY2hhbmdlKSB7XG4gICAgaWYgKCFjaGFuZ2UudGV4dCkgeyByZXR1cm4gY2hhbmdlLnRvIH1cbiAgICByZXR1cm4gUG9zKGNoYW5nZS5mcm9tLmxpbmUgKyBjaGFuZ2UudGV4dC5sZW5ndGggLSAxLFxuICAgICAgICAgICAgICAgbHN0KGNoYW5nZS50ZXh0KS5sZW5ndGggKyAoY2hhbmdlLnRleHQubGVuZ3RoID09IDEgPyBjaGFuZ2UuZnJvbS5jaCA6IDApKVxuICB9XG5cbiAgLy8gQWRqdXN0IGEgcG9zaXRpb24gdG8gcmVmZXIgdG8gdGhlIHBvc3QtY2hhbmdlIHBvc2l0aW9uIG9mIHRoZVxuICAvLyBzYW1lIHRleHQsIG9yIHRoZSBlbmQgb2YgdGhlIGNoYW5nZSBpZiB0aGUgY2hhbmdlIGNvdmVycyBpdC5cbiAgZnVuY3Rpb24gYWRqdXN0Rm9yQ2hhbmdlKHBvcywgY2hhbmdlKSB7XG4gICAgaWYgKGNtcChwb3MsIGNoYW5nZS5mcm9tKSA8IDApIHsgcmV0dXJuIHBvcyB9XG4gICAgaWYgKGNtcChwb3MsIGNoYW5nZS50bykgPD0gMCkgeyByZXR1cm4gY2hhbmdlRW5kKGNoYW5nZSkgfVxuXG4gICAgdmFyIGxpbmUgPSBwb3MubGluZSArIGNoYW5nZS50ZXh0Lmxlbmd0aCAtIChjaGFuZ2UudG8ubGluZSAtIGNoYW5nZS5mcm9tLmxpbmUpIC0gMSwgY2ggPSBwb3MuY2g7XG4gICAgaWYgKHBvcy5saW5lID09IGNoYW5nZS50by5saW5lKSB7IGNoICs9IGNoYW5nZUVuZChjaGFuZ2UpLmNoIC0gY2hhbmdlLnRvLmNoOyB9XG4gICAgcmV0dXJuIFBvcyhsaW5lLCBjaClcbiAgfVxuXG4gIGZ1bmN0aW9uIGNvbXB1dGVTZWxBZnRlckNoYW5nZShkb2MsIGNoYW5nZSkge1xuICAgIHZhciBvdXQgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRvYy5zZWwucmFuZ2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgcmFuZ2UgPSBkb2Muc2VsLnJhbmdlc1tpXTtcbiAgICAgIG91dC5wdXNoKG5ldyBSYW5nZShhZGp1c3RGb3JDaGFuZ2UocmFuZ2UuYW5jaG9yLCBjaGFuZ2UpLFxuICAgICAgICAgICAgICAgICAgICAgICAgIGFkanVzdEZvckNoYW5nZShyYW5nZS5oZWFkLCBjaGFuZ2UpKSk7XG4gICAgfVxuICAgIHJldHVybiBub3JtYWxpemVTZWxlY3Rpb24oZG9jLmNtLCBvdXQsIGRvYy5zZWwucHJpbUluZGV4KVxuICB9XG5cbiAgZnVuY3Rpb24gb2Zmc2V0UG9zKHBvcywgb2xkLCBudykge1xuICAgIGlmIChwb3MubGluZSA9PSBvbGQubGluZSlcbiAgICAgIHsgcmV0dXJuIFBvcyhudy5saW5lLCBwb3MuY2ggLSBvbGQuY2ggKyBudy5jaCkgfVxuICAgIGVsc2VcbiAgICAgIHsgcmV0dXJuIFBvcyhudy5saW5lICsgKHBvcy5saW5lIC0gb2xkLmxpbmUpLCBwb3MuY2gpIH1cbiAgfVxuXG4gIC8vIFVzZWQgYnkgcmVwbGFjZVNlbGVjdGlvbnMgdG8gYWxsb3cgbW92aW5nIHRoZSBzZWxlY3Rpb24gdG8gdGhlXG4gIC8vIHN0YXJ0IG9yIGFyb3VuZCB0aGUgcmVwbGFjZWQgdGVzdC4gSGludCBtYXkgYmUgXCJzdGFydFwiIG9yIFwiYXJvdW5kXCIuXG4gIGZ1bmN0aW9uIGNvbXB1dGVSZXBsYWNlZFNlbChkb2MsIGNoYW5nZXMsIGhpbnQpIHtcbiAgICB2YXIgb3V0ID0gW107XG4gICAgdmFyIG9sZFByZXYgPSBQb3MoZG9jLmZpcnN0LCAwKSwgbmV3UHJldiA9IG9sZFByZXY7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGFuZ2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgY2hhbmdlID0gY2hhbmdlc1tpXTtcbiAgICAgIHZhciBmcm9tID0gb2Zmc2V0UG9zKGNoYW5nZS5mcm9tLCBvbGRQcmV2LCBuZXdQcmV2KTtcbiAgICAgIHZhciB0byA9IG9mZnNldFBvcyhjaGFuZ2VFbmQoY2hhbmdlKSwgb2xkUHJldiwgbmV3UHJldik7XG4gICAgICBvbGRQcmV2ID0gY2hhbmdlLnRvO1xuICAgICAgbmV3UHJldiA9IHRvO1xuICAgICAgaWYgKGhpbnQgPT0gXCJhcm91bmRcIikge1xuICAgICAgICB2YXIgcmFuZ2UgPSBkb2Muc2VsLnJhbmdlc1tpXSwgaW52ID0gY21wKHJhbmdlLmhlYWQsIHJhbmdlLmFuY2hvcikgPCAwO1xuICAgICAgICBvdXRbaV0gPSBuZXcgUmFuZ2UoaW52ID8gdG8gOiBmcm9tLCBpbnYgPyBmcm9tIDogdG8pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgb3V0W2ldID0gbmV3IFJhbmdlKGZyb20sIGZyb20pO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbmV3IFNlbGVjdGlvbihvdXQsIGRvYy5zZWwucHJpbUluZGV4KVxuICB9XG5cbiAgLy8gVXNlZCB0byBnZXQgdGhlIGVkaXRvciBpbnRvIGEgY29uc2lzdGVudCBzdGF0ZSBhZ2FpbiB3aGVuIG9wdGlvbnMgY2hhbmdlLlxuXG4gIGZ1bmN0aW9uIGxvYWRNb2RlKGNtKSB7XG4gICAgY20uZG9jLm1vZGUgPSBnZXRNb2RlKGNtLm9wdGlvbnMsIGNtLmRvYy5tb2RlT3B0aW9uKTtcbiAgICByZXNldE1vZGVTdGF0ZShjbSk7XG4gIH1cblxuICBmdW5jdGlvbiByZXNldE1vZGVTdGF0ZShjbSkge1xuICAgIGNtLmRvYy5pdGVyKGZ1bmN0aW9uIChsaW5lKSB7XG4gICAgICBpZiAobGluZS5zdGF0ZUFmdGVyKSB7IGxpbmUuc3RhdGVBZnRlciA9IG51bGw7IH1cbiAgICAgIGlmIChsaW5lLnN0eWxlcykgeyBsaW5lLnN0eWxlcyA9IG51bGw7IH1cbiAgICB9KTtcbiAgICBjbS5kb2MubW9kZUZyb250aWVyID0gY20uZG9jLmhpZ2hsaWdodEZyb250aWVyID0gY20uZG9jLmZpcnN0O1xuICAgIHN0YXJ0V29ya2VyKGNtLCAxMDApO1xuICAgIGNtLnN0YXRlLm1vZGVHZW4rKztcbiAgICBpZiAoY20uY3VyT3ApIHsgcmVnQ2hhbmdlKGNtKTsgfVxuICB9XG5cbiAgLy8gRE9DVU1FTlQgREFUQSBTVFJVQ1RVUkVcblxuICAvLyBCeSBkZWZhdWx0LCB1cGRhdGVzIHRoYXQgc3RhcnQgYW5kIGVuZCBhdCB0aGUgYmVnaW5uaW5nIG9mIGEgbGluZVxuICAvLyBhcmUgdHJlYXRlZCBzcGVjaWFsbHksIGluIG9yZGVyIHRvIG1ha2UgdGhlIGFzc29jaWF0aW9uIG9mIGxpbmVcbiAgLy8gd2lkZ2V0cyBhbmQgbWFya2VyIGVsZW1lbnRzIHdpdGggdGhlIHRleHQgYmVoYXZlIG1vcmUgaW50dWl0aXZlLlxuICBmdW5jdGlvbiBpc1dob2xlTGluZVVwZGF0ZShkb2MsIGNoYW5nZSkge1xuICAgIHJldHVybiBjaGFuZ2UuZnJvbS5jaCA9PSAwICYmIGNoYW5nZS50by5jaCA9PSAwICYmIGxzdChjaGFuZ2UudGV4dCkgPT0gXCJcIiAmJlxuICAgICAgKCFkb2MuY20gfHwgZG9jLmNtLm9wdGlvbnMud2hvbGVMaW5lVXBkYXRlQmVmb3JlKVxuICB9XG5cbiAgLy8gUGVyZm9ybSBhIGNoYW5nZSBvbiB0aGUgZG9jdW1lbnQgZGF0YSBzdHJ1Y3R1cmUuXG4gIGZ1bmN0aW9uIHVwZGF0ZURvYyhkb2MsIGNoYW5nZSwgbWFya2VkU3BhbnMsIGVzdGltYXRlSGVpZ2h0KSB7XG4gICAgZnVuY3Rpb24gc3BhbnNGb3Iobikge3JldHVybiBtYXJrZWRTcGFucyA/IG1hcmtlZFNwYW5zW25dIDogbnVsbH1cbiAgICBmdW5jdGlvbiB1cGRhdGUobGluZSwgdGV4dCwgc3BhbnMpIHtcbiAgICAgIHVwZGF0ZUxpbmUobGluZSwgdGV4dCwgc3BhbnMsIGVzdGltYXRlSGVpZ2h0KTtcbiAgICAgIHNpZ25hbExhdGVyKGxpbmUsIFwiY2hhbmdlXCIsIGxpbmUsIGNoYW5nZSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGxpbmVzRm9yKHN0YXJ0LCBlbmQpIHtcbiAgICAgIHZhciByZXN1bHQgPSBbXTtcbiAgICAgIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IGVuZDsgKytpKVxuICAgICAgICB7IHJlc3VsdC5wdXNoKG5ldyBMaW5lKHRleHRbaV0sIHNwYW5zRm9yKGkpLCBlc3RpbWF0ZUhlaWdodCkpOyB9XG4gICAgICByZXR1cm4gcmVzdWx0XG4gICAgfVxuXG4gICAgdmFyIGZyb20gPSBjaGFuZ2UuZnJvbSwgdG8gPSBjaGFuZ2UudG8sIHRleHQgPSBjaGFuZ2UudGV4dDtcbiAgICB2YXIgZmlyc3RMaW5lID0gZ2V0TGluZShkb2MsIGZyb20ubGluZSksIGxhc3RMaW5lID0gZ2V0TGluZShkb2MsIHRvLmxpbmUpO1xuICAgIHZhciBsYXN0VGV4dCA9IGxzdCh0ZXh0KSwgbGFzdFNwYW5zID0gc3BhbnNGb3IodGV4dC5sZW5ndGggLSAxKSwgbmxpbmVzID0gdG8ubGluZSAtIGZyb20ubGluZTtcblxuICAgIC8vIEFkanVzdCB0aGUgbGluZSBzdHJ1Y3R1cmVcbiAgICBpZiAoY2hhbmdlLmZ1bGwpIHtcbiAgICAgIGRvYy5pbnNlcnQoMCwgbGluZXNGb3IoMCwgdGV4dC5sZW5ndGgpKTtcbiAgICAgIGRvYy5yZW1vdmUodGV4dC5sZW5ndGgsIGRvYy5zaXplIC0gdGV4dC5sZW5ndGgpO1xuICAgIH0gZWxzZSBpZiAoaXNXaG9sZUxpbmVVcGRhdGUoZG9jLCBjaGFuZ2UpKSB7XG4gICAgICAvLyBUaGlzIGlzIGEgd2hvbGUtbGluZSByZXBsYWNlLiBUcmVhdGVkIHNwZWNpYWxseSB0byBtYWtlXG4gICAgICAvLyBzdXJlIGxpbmUgb2JqZWN0cyBtb3ZlIHRoZSB3YXkgdGhleSBhcmUgc3VwcG9zZWQgdG8uXG4gICAgICB2YXIgYWRkZWQgPSBsaW5lc0ZvcigwLCB0ZXh0Lmxlbmd0aCAtIDEpO1xuICAgICAgdXBkYXRlKGxhc3RMaW5lLCBsYXN0TGluZS50ZXh0LCBsYXN0U3BhbnMpO1xuICAgICAgaWYgKG5saW5lcykgeyBkb2MucmVtb3ZlKGZyb20ubGluZSwgbmxpbmVzKTsgfVxuICAgICAgaWYgKGFkZGVkLmxlbmd0aCkgeyBkb2MuaW5zZXJ0KGZyb20ubGluZSwgYWRkZWQpOyB9XG4gICAgfSBlbHNlIGlmIChmaXJzdExpbmUgPT0gbGFzdExpbmUpIHtcbiAgICAgIGlmICh0ZXh0Lmxlbmd0aCA9PSAxKSB7XG4gICAgICAgIHVwZGF0ZShmaXJzdExpbmUsIGZpcnN0TGluZS50ZXh0LnNsaWNlKDAsIGZyb20uY2gpICsgbGFzdFRleHQgKyBmaXJzdExpbmUudGV4dC5zbGljZSh0by5jaCksIGxhc3RTcGFucyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgYWRkZWQkMSA9IGxpbmVzRm9yKDEsIHRleHQubGVuZ3RoIC0gMSk7XG4gICAgICAgIGFkZGVkJDEucHVzaChuZXcgTGluZShsYXN0VGV4dCArIGZpcnN0TGluZS50ZXh0LnNsaWNlKHRvLmNoKSwgbGFzdFNwYW5zLCBlc3RpbWF0ZUhlaWdodCkpO1xuICAgICAgICB1cGRhdGUoZmlyc3RMaW5lLCBmaXJzdExpbmUudGV4dC5zbGljZSgwLCBmcm9tLmNoKSArIHRleHRbMF0sIHNwYW5zRm9yKDApKTtcbiAgICAgICAgZG9jLmluc2VydChmcm9tLmxpbmUgKyAxLCBhZGRlZCQxKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRleHQubGVuZ3RoID09IDEpIHtcbiAgICAgIHVwZGF0ZShmaXJzdExpbmUsIGZpcnN0TGluZS50ZXh0LnNsaWNlKDAsIGZyb20uY2gpICsgdGV4dFswXSArIGxhc3RMaW5lLnRleHQuc2xpY2UodG8uY2gpLCBzcGFuc0ZvcigwKSk7XG4gICAgICBkb2MucmVtb3ZlKGZyb20ubGluZSArIDEsIG5saW5lcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHVwZGF0ZShmaXJzdExpbmUsIGZpcnN0TGluZS50ZXh0LnNsaWNlKDAsIGZyb20uY2gpICsgdGV4dFswXSwgc3BhbnNGb3IoMCkpO1xuICAgICAgdXBkYXRlKGxhc3RMaW5lLCBsYXN0VGV4dCArIGxhc3RMaW5lLnRleHQuc2xpY2UodG8uY2gpLCBsYXN0U3BhbnMpO1xuICAgICAgdmFyIGFkZGVkJDIgPSBsaW5lc0ZvcigxLCB0ZXh0Lmxlbmd0aCAtIDEpO1xuICAgICAgaWYgKG5saW5lcyA+IDEpIHsgZG9jLnJlbW92ZShmcm9tLmxpbmUgKyAxLCBubGluZXMgLSAxKTsgfVxuICAgICAgZG9jLmluc2VydChmcm9tLmxpbmUgKyAxLCBhZGRlZCQyKTtcbiAgICB9XG5cbiAgICBzaWduYWxMYXRlcihkb2MsIFwiY2hhbmdlXCIsIGRvYywgY2hhbmdlKTtcbiAgfVxuXG4gIC8vIENhbGwgZiBmb3IgYWxsIGxpbmtlZCBkb2N1bWVudHMuXG4gIGZ1bmN0aW9uIGxpbmtlZERvY3MoZG9jLCBmLCBzaGFyZWRIaXN0T25seSkge1xuICAgIGZ1bmN0aW9uIHByb3BhZ2F0ZShkb2MsIHNraXAsIHNoYXJlZEhpc3QpIHtcbiAgICAgIGlmIChkb2MubGlua2VkKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgZG9jLmxpbmtlZC5sZW5ndGg7ICsraSkge1xuICAgICAgICB2YXIgcmVsID0gZG9jLmxpbmtlZFtpXTtcbiAgICAgICAgaWYgKHJlbC5kb2MgPT0gc2tpcCkgeyBjb250aW51ZSB9XG4gICAgICAgIHZhciBzaGFyZWQgPSBzaGFyZWRIaXN0ICYmIHJlbC5zaGFyZWRIaXN0O1xuICAgICAgICBpZiAoc2hhcmVkSGlzdE9ubHkgJiYgIXNoYXJlZCkgeyBjb250aW51ZSB9XG4gICAgICAgIGYocmVsLmRvYywgc2hhcmVkKTtcbiAgICAgICAgcHJvcGFnYXRlKHJlbC5kb2MsIGRvYywgc2hhcmVkKTtcbiAgICAgIH0gfVxuICAgIH1cbiAgICBwcm9wYWdhdGUoZG9jLCBudWxsLCB0cnVlKTtcbiAgfVxuXG4gIC8vIEF0dGFjaCBhIGRvY3VtZW50IHRvIGFuIGVkaXRvci5cbiAgZnVuY3Rpb24gYXR0YWNoRG9jKGNtLCBkb2MpIHtcbiAgICBpZiAoZG9jLmNtKSB7IHRocm93IG5ldyBFcnJvcihcIlRoaXMgZG9jdW1lbnQgaXMgYWxyZWFkeSBpbiB1c2UuXCIpIH1cbiAgICBjbS5kb2MgPSBkb2M7XG4gICAgZG9jLmNtID0gY207XG4gICAgZXN0aW1hdGVMaW5lSGVpZ2h0cyhjbSk7XG4gICAgbG9hZE1vZGUoY20pO1xuICAgIHNldERpcmVjdGlvbkNsYXNzKGNtKTtcbiAgICBjbS5vcHRpb25zLmRpcmVjdGlvbiA9IGRvYy5kaXJlY3Rpb247XG4gICAgaWYgKCFjbS5vcHRpb25zLmxpbmVXcmFwcGluZykgeyBmaW5kTWF4TGluZShjbSk7IH1cbiAgICBjbS5vcHRpb25zLm1vZGUgPSBkb2MubW9kZU9wdGlvbjtcbiAgICByZWdDaGFuZ2UoY20pO1xuICB9XG5cbiAgZnVuY3Rpb24gc2V0RGlyZWN0aW9uQ2xhc3MoY20pIHtcbiAgKGNtLmRvYy5kaXJlY3Rpb24gPT0gXCJydGxcIiA/IGFkZENsYXNzIDogcm1DbGFzcykoY20uZGlzcGxheS5saW5lRGl2LCBcIkNvZGVNaXJyb3ItcnRsXCIpO1xuICB9XG5cbiAgZnVuY3Rpb24gZGlyZWN0aW9uQ2hhbmdlZChjbSkge1xuICAgIHJ1bkluT3AoY20sIGZ1bmN0aW9uICgpIHtcbiAgICAgIHNldERpcmVjdGlvbkNsYXNzKGNtKTtcbiAgICAgIHJlZ0NoYW5nZShjbSk7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBIaXN0b3J5KHByZXYpIHtcbiAgICAvLyBBcnJheXMgb2YgY2hhbmdlIGV2ZW50cyBhbmQgc2VsZWN0aW9ucy4gRG9pbmcgc29tZXRoaW5nIGFkZHMgYW5cbiAgICAvLyBldmVudCB0byBkb25lIGFuZCBjbGVhcnMgdW5kby4gVW5kb2luZyBtb3ZlcyBldmVudHMgZnJvbSBkb25lXG4gICAgLy8gdG8gdW5kb25lLCByZWRvaW5nIG1vdmVzIHRoZW0gaW4gdGhlIG90aGVyIGRpcmVjdGlvbi5cbiAgICB0aGlzLmRvbmUgPSBbXTsgdGhpcy51bmRvbmUgPSBbXTtcbiAgICB0aGlzLnVuZG9EZXB0aCA9IHByZXYgPyBwcmV2LnVuZG9EZXB0aCA6IEluZmluaXR5O1xuICAgIC8vIFVzZWQgdG8gdHJhY2sgd2hlbiBjaGFuZ2VzIGNhbiBiZSBtZXJnZWQgaW50byBhIHNpbmdsZSB1bmRvXG4gICAgLy8gZXZlbnRcbiAgICB0aGlzLmxhc3RNb2RUaW1lID0gdGhpcy5sYXN0U2VsVGltZSA9IDA7XG4gICAgdGhpcy5sYXN0T3AgPSB0aGlzLmxhc3RTZWxPcCA9IG51bGw7XG4gICAgdGhpcy5sYXN0T3JpZ2luID0gdGhpcy5sYXN0U2VsT3JpZ2luID0gbnVsbDtcbiAgICAvLyBVc2VkIGJ5IHRoZSBpc0NsZWFuKCkgbWV0aG9kXG4gICAgdGhpcy5nZW5lcmF0aW9uID0gdGhpcy5tYXhHZW5lcmF0aW9uID0gcHJldiA/IHByZXYubWF4R2VuZXJhdGlvbiA6IDE7XG4gIH1cblxuICAvLyBDcmVhdGUgYSBoaXN0b3J5IGNoYW5nZSBldmVudCBmcm9tIGFuIHVwZGF0ZURvYy1zdHlsZSBjaGFuZ2VcbiAgLy8gb2JqZWN0LlxuICBmdW5jdGlvbiBoaXN0b3J5Q2hhbmdlRnJvbUNoYW5nZShkb2MsIGNoYW5nZSkge1xuICAgIHZhciBoaXN0Q2hhbmdlID0ge2Zyb206IGNvcHlQb3MoY2hhbmdlLmZyb20pLCB0bzogY2hhbmdlRW5kKGNoYW5nZSksIHRleHQ6IGdldEJldHdlZW4oZG9jLCBjaGFuZ2UuZnJvbSwgY2hhbmdlLnRvKX07XG4gICAgYXR0YWNoTG9jYWxTcGFucyhkb2MsIGhpc3RDaGFuZ2UsIGNoYW5nZS5mcm9tLmxpbmUsIGNoYW5nZS50by5saW5lICsgMSk7XG4gICAgbGlua2VkRG9jcyhkb2MsIGZ1bmN0aW9uIChkb2MpIHsgcmV0dXJuIGF0dGFjaExvY2FsU3BhbnMoZG9jLCBoaXN0Q2hhbmdlLCBjaGFuZ2UuZnJvbS5saW5lLCBjaGFuZ2UudG8ubGluZSArIDEpOyB9LCB0cnVlKTtcbiAgICByZXR1cm4gaGlzdENoYW5nZVxuICB9XG5cbiAgLy8gUG9wIGFsbCBzZWxlY3Rpb24gZXZlbnRzIG9mZiB0aGUgZW5kIG9mIGEgaGlzdG9yeSBhcnJheS4gU3RvcCBhdFxuICAvLyBhIGNoYW5nZSBldmVudC5cbiAgZnVuY3Rpb24gY2xlYXJTZWxlY3Rpb25FdmVudHMoYXJyYXkpIHtcbiAgICB3aGlsZSAoYXJyYXkubGVuZ3RoKSB7XG4gICAgICB2YXIgbGFzdCA9IGxzdChhcnJheSk7XG4gICAgICBpZiAobGFzdC5yYW5nZXMpIHsgYXJyYXkucG9wKCk7IH1cbiAgICAgIGVsc2UgeyBicmVhayB9XG4gICAgfVxuICB9XG5cbiAgLy8gRmluZCB0aGUgdG9wIGNoYW5nZSBldmVudCBpbiB0aGUgaGlzdG9yeS4gUG9wIG9mZiBzZWxlY3Rpb25cbiAgLy8gZXZlbnRzIHRoYXQgYXJlIGluIHRoZSB3YXkuXG4gIGZ1bmN0aW9uIGxhc3RDaGFuZ2VFdmVudChoaXN0LCBmb3JjZSkge1xuICAgIGlmIChmb3JjZSkge1xuICAgICAgY2xlYXJTZWxlY3Rpb25FdmVudHMoaGlzdC5kb25lKTtcbiAgICAgIHJldHVybiBsc3QoaGlzdC5kb25lKVxuICAgIH0gZWxzZSBpZiAoaGlzdC5kb25lLmxlbmd0aCAmJiAhbHN0KGhpc3QuZG9uZSkucmFuZ2VzKSB7XG4gICAgICByZXR1cm4gbHN0KGhpc3QuZG9uZSlcbiAgICB9IGVsc2UgaWYgKGhpc3QuZG9uZS5sZW5ndGggPiAxICYmICFoaXN0LmRvbmVbaGlzdC5kb25lLmxlbmd0aCAtIDJdLnJhbmdlcykge1xuICAgICAgaGlzdC5kb25lLnBvcCgpO1xuICAgICAgcmV0dXJuIGxzdChoaXN0LmRvbmUpXG4gICAgfVxuICB9XG5cbiAgLy8gUmVnaXN0ZXIgYSBjaGFuZ2UgaW4gdGhlIGhpc3RvcnkuIE1lcmdlcyBjaGFuZ2VzIHRoYXQgYXJlIHdpdGhpblxuICAvLyBhIHNpbmdsZSBvcGVyYXRpb24sIG9yIGFyZSBjbG9zZSB0b2dldGhlciB3aXRoIGFuIG9yaWdpbiB0aGF0XG4gIC8vIGFsbG93cyBtZXJnaW5nIChzdGFydGluZyB3aXRoIFwiK1wiKSBpbnRvIGEgc2luZ2xlIGV2ZW50LlxuICBmdW5jdGlvbiBhZGRDaGFuZ2VUb0hpc3RvcnkoZG9jLCBjaGFuZ2UsIHNlbEFmdGVyLCBvcElkKSB7XG4gICAgdmFyIGhpc3QgPSBkb2MuaGlzdG9yeTtcbiAgICBoaXN0LnVuZG9uZS5sZW5ndGggPSAwO1xuICAgIHZhciB0aW1lID0gK25ldyBEYXRlLCBjdXI7XG4gICAgdmFyIGxhc3Q7XG5cbiAgICBpZiAoKGhpc3QubGFzdE9wID09IG9wSWQgfHxcbiAgICAgICAgIGhpc3QubGFzdE9yaWdpbiA9PSBjaGFuZ2Uub3JpZ2luICYmIGNoYW5nZS5vcmlnaW4gJiZcbiAgICAgICAgICgoY2hhbmdlLm9yaWdpbi5jaGFyQXQoMCkgPT0gXCIrXCIgJiYgaGlzdC5sYXN0TW9kVGltZSA+IHRpbWUgLSAoZG9jLmNtID8gZG9jLmNtLm9wdGlvbnMuaGlzdG9yeUV2ZW50RGVsYXkgOiA1MDApKSB8fFxuICAgICAgICAgIGNoYW5nZS5vcmlnaW4uY2hhckF0KDApID09IFwiKlwiKSkgJiZcbiAgICAgICAgKGN1ciA9IGxhc3RDaGFuZ2VFdmVudChoaXN0LCBoaXN0Lmxhc3RPcCA9PSBvcElkKSkpIHtcbiAgICAgIC8vIE1lcmdlIHRoaXMgY2hhbmdlIGludG8gdGhlIGxhc3QgZXZlbnRcbiAgICAgIGxhc3QgPSBsc3QoY3VyLmNoYW5nZXMpO1xuICAgICAgaWYgKGNtcChjaGFuZ2UuZnJvbSwgY2hhbmdlLnRvKSA9PSAwICYmIGNtcChjaGFuZ2UuZnJvbSwgbGFzdC50bykgPT0gMCkge1xuICAgICAgICAvLyBPcHRpbWl6ZWQgY2FzZSBmb3Igc2ltcGxlIGluc2VydGlvbiAtLSBkb24ndCB3YW50IHRvIGFkZFxuICAgICAgICAvLyBuZXcgY2hhbmdlc2V0cyBmb3IgZXZlcnkgY2hhcmFjdGVyIHR5cGVkXG4gICAgICAgIGxhc3QudG8gPSBjaGFuZ2VFbmQoY2hhbmdlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEFkZCBuZXcgc3ViLWV2ZW50XG4gICAgICAgIGN1ci5jaGFuZ2VzLnB1c2goaGlzdG9yeUNoYW5nZUZyb21DaGFuZ2UoZG9jLCBjaGFuZ2UpKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gQ2FuIG5vdCBiZSBtZXJnZWQsIHN0YXJ0IGEgbmV3IGV2ZW50LlxuICAgICAgdmFyIGJlZm9yZSA9IGxzdChoaXN0LmRvbmUpO1xuICAgICAgaWYgKCFiZWZvcmUgfHwgIWJlZm9yZS5yYW5nZXMpXG4gICAgICAgIHsgcHVzaFNlbGVjdGlvblRvSGlzdG9yeShkb2Muc2VsLCBoaXN0LmRvbmUpOyB9XG4gICAgICBjdXIgPSB7Y2hhbmdlczogW2hpc3RvcnlDaGFuZ2VGcm9tQ2hhbmdlKGRvYywgY2hhbmdlKV0sXG4gICAgICAgICAgICAgZ2VuZXJhdGlvbjogaGlzdC5nZW5lcmF0aW9ufTtcbiAgICAgIGhpc3QuZG9uZS5wdXNoKGN1cik7XG4gICAgICB3aGlsZSAoaGlzdC5kb25lLmxlbmd0aCA+IGhpc3QudW5kb0RlcHRoKSB7XG4gICAgICAgIGhpc3QuZG9uZS5zaGlmdCgpO1xuICAgICAgICBpZiAoIWhpc3QuZG9uZVswXS5yYW5nZXMpIHsgaGlzdC5kb25lLnNoaWZ0KCk7IH1cbiAgICAgIH1cbiAgICB9XG4gICAgaGlzdC5kb25lLnB1c2goc2VsQWZ0ZXIpO1xuICAgIGhpc3QuZ2VuZXJhdGlvbiA9ICsraGlzdC5tYXhHZW5lcmF0aW9uO1xuICAgIGhpc3QubGFzdE1vZFRpbWUgPSBoaXN0Lmxhc3RTZWxUaW1lID0gdGltZTtcbiAgICBoaXN0Lmxhc3RPcCA9IGhpc3QubGFzdFNlbE9wID0gb3BJZDtcbiAgICBoaXN0Lmxhc3RPcmlnaW4gPSBoaXN0Lmxhc3RTZWxPcmlnaW4gPSBjaGFuZ2Uub3JpZ2luO1xuXG4gICAgaWYgKCFsYXN0KSB7IHNpZ25hbChkb2MsIFwiaGlzdG9yeUFkZGVkXCIpOyB9XG4gIH1cblxuICBmdW5jdGlvbiBzZWxlY3Rpb25FdmVudENhbkJlTWVyZ2VkKGRvYywgb3JpZ2luLCBwcmV2LCBzZWwpIHtcbiAgICB2YXIgY2ggPSBvcmlnaW4uY2hhckF0KDApO1xuICAgIHJldHVybiBjaCA9PSBcIipcIiB8fFxuICAgICAgY2ggPT0gXCIrXCIgJiZcbiAgICAgIHByZXYucmFuZ2VzLmxlbmd0aCA9PSBzZWwucmFuZ2VzLmxlbmd0aCAmJlxuICAgICAgcHJldi5zb21ldGhpbmdTZWxlY3RlZCgpID09IHNlbC5zb21ldGhpbmdTZWxlY3RlZCgpICYmXG4gICAgICBuZXcgRGF0ZSAtIGRvYy5oaXN0b3J5Lmxhc3RTZWxUaW1lIDw9IChkb2MuY20gPyBkb2MuY20ub3B0aW9ucy5oaXN0b3J5RXZlbnREZWxheSA6IDUwMClcbiAgfVxuXG4gIC8vIENhbGxlZCB3aGVuZXZlciB0aGUgc2VsZWN0aW9uIGNoYW5nZXMsIHNldHMgdGhlIG5ldyBzZWxlY3Rpb24gYXNcbiAgLy8gdGhlIHBlbmRpbmcgc2VsZWN0aW9uIGluIHRoZSBoaXN0b3J5LCBhbmQgcHVzaGVzIHRoZSBvbGQgcGVuZGluZ1xuICAvLyBzZWxlY3Rpb24gaW50byB0aGUgJ2RvbmUnIGFycmF5IHdoZW4gaXQgd2FzIHNpZ25pZmljYW50bHlcbiAgLy8gZGlmZmVyZW50IChpbiBudW1iZXIgb2Ygc2VsZWN0ZWQgcmFuZ2VzLCBlbXB0aW5lc3MsIG9yIHRpbWUpLlxuICBmdW5jdGlvbiBhZGRTZWxlY3Rpb25Ub0hpc3RvcnkoZG9jLCBzZWwsIG9wSWQsIG9wdGlvbnMpIHtcbiAgICB2YXIgaGlzdCA9IGRvYy5oaXN0b3J5LCBvcmlnaW4gPSBvcHRpb25zICYmIG9wdGlvbnMub3JpZ2luO1xuXG4gICAgLy8gQSBuZXcgZXZlbnQgaXMgc3RhcnRlZCB3aGVuIHRoZSBwcmV2aW91cyBvcmlnaW4gZG9lcyBub3QgbWF0Y2hcbiAgICAvLyB0aGUgY3VycmVudCwgb3IgdGhlIG9yaWdpbnMgZG9uJ3QgYWxsb3cgbWF0Y2hpbmcuIE9yaWdpbnNcbiAgICAvLyBzdGFydGluZyB3aXRoICogYXJlIGFsd2F5cyBtZXJnZWQsIHRob3NlIHN0YXJ0aW5nIHdpdGggKyBhcmVcbiAgICAvLyBtZXJnZWQgd2hlbiBzaW1pbGFyIGFuZCBjbG9zZSB0b2dldGhlciBpbiB0aW1lLlxuICAgIGlmIChvcElkID09IGhpc3QubGFzdFNlbE9wIHx8XG4gICAgICAgIChvcmlnaW4gJiYgaGlzdC5sYXN0U2VsT3JpZ2luID09IG9yaWdpbiAmJlxuICAgICAgICAgKGhpc3QubGFzdE1vZFRpbWUgPT0gaGlzdC5sYXN0U2VsVGltZSAmJiBoaXN0Lmxhc3RPcmlnaW4gPT0gb3JpZ2luIHx8XG4gICAgICAgICAgc2VsZWN0aW9uRXZlbnRDYW5CZU1lcmdlZChkb2MsIG9yaWdpbiwgbHN0KGhpc3QuZG9uZSksIHNlbCkpKSlcbiAgICAgIHsgaGlzdC5kb25lW2hpc3QuZG9uZS5sZW5ndGggLSAxXSA9IHNlbDsgfVxuICAgIGVsc2VcbiAgICAgIHsgcHVzaFNlbGVjdGlvblRvSGlzdG9yeShzZWwsIGhpc3QuZG9uZSk7IH1cblxuICAgIGhpc3QubGFzdFNlbFRpbWUgPSArbmV3IERhdGU7XG4gICAgaGlzdC5sYXN0U2VsT3JpZ2luID0gb3JpZ2luO1xuICAgIGhpc3QubGFzdFNlbE9wID0gb3BJZDtcbiAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmNsZWFyUmVkbyAhPT0gZmFsc2UpXG4gICAgICB7IGNsZWFyU2VsZWN0aW9uRXZlbnRzKGhpc3QudW5kb25lKTsgfVxuICB9XG5cbiAgZnVuY3Rpb24gcHVzaFNlbGVjdGlvblRvSGlzdG9yeShzZWwsIGRlc3QpIHtcbiAgICB2YXIgdG9wID0gbHN0KGRlc3QpO1xuICAgIGlmICghKHRvcCAmJiB0b3AucmFuZ2VzICYmIHRvcC5lcXVhbHMoc2VsKSkpXG4gICAgICB7IGRlc3QucHVzaChzZWwpOyB9XG4gIH1cblxuICAvLyBVc2VkIHRvIHN0b3JlIG1hcmtlZCBzcGFuIGluZm9ybWF0aW9uIGluIHRoZSBoaXN0b3J5LlxuICBmdW5jdGlvbiBhdHRhY2hMb2NhbFNwYW5zKGRvYywgY2hhbmdlLCBmcm9tLCB0bykge1xuICAgIHZhciBleGlzdGluZyA9IGNoYW5nZVtcInNwYW5zX1wiICsgZG9jLmlkXSwgbiA9IDA7XG4gICAgZG9jLml0ZXIoTWF0aC5tYXgoZG9jLmZpcnN0LCBmcm9tKSwgTWF0aC5taW4oZG9jLmZpcnN0ICsgZG9jLnNpemUsIHRvKSwgZnVuY3Rpb24gKGxpbmUpIHtcbiAgICAgIGlmIChsaW5lLm1hcmtlZFNwYW5zKVxuICAgICAgICB7IChleGlzdGluZyB8fCAoZXhpc3RpbmcgPSBjaGFuZ2VbXCJzcGFuc19cIiArIGRvYy5pZF0gPSB7fSkpW25dID0gbGluZS5tYXJrZWRTcGFuczsgfVxuICAgICAgKytuO1xuICAgIH0pO1xuICB9XG5cbiAgLy8gV2hlbiB1bi9yZS1kb2luZyByZXN0b3JlcyB0ZXh0IGNvbnRhaW5pbmcgbWFya2VkIHNwYW5zLCB0aG9zZVxuICAvLyB0aGF0IGhhdmUgYmVlbiBleHBsaWNpdGx5IGNsZWFyZWQgc2hvdWxkIG5vdCBiZSByZXN0b3JlZC5cbiAgZnVuY3Rpb24gcmVtb3ZlQ2xlYXJlZFNwYW5zKHNwYW5zKSB7XG4gICAgaWYgKCFzcGFucykgeyByZXR1cm4gbnVsbCB9XG4gICAgdmFyIG91dDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNwYW5zLmxlbmd0aDsgKytpKSB7XG4gICAgICBpZiAoc3BhbnNbaV0ubWFya2VyLmV4cGxpY2l0bHlDbGVhcmVkKSB7IGlmICghb3V0KSB7IG91dCA9IHNwYW5zLnNsaWNlKDAsIGkpOyB9IH1cbiAgICAgIGVsc2UgaWYgKG91dCkgeyBvdXQucHVzaChzcGFuc1tpXSk7IH1cbiAgICB9XG4gICAgcmV0dXJuICFvdXQgPyBzcGFucyA6IG91dC5sZW5ndGggPyBvdXQgOiBudWxsXG4gIH1cblxuICAvLyBSZXRyaWV2ZSBhbmQgZmlsdGVyIHRoZSBvbGQgbWFya2VkIHNwYW5zIHN0b3JlZCBpbiBhIGNoYW5nZSBldmVudC5cbiAgZnVuY3Rpb24gZ2V0T2xkU3BhbnMoZG9jLCBjaGFuZ2UpIHtcbiAgICB2YXIgZm91bmQgPSBjaGFuZ2VbXCJzcGFuc19cIiArIGRvYy5pZF07XG4gICAgaWYgKCFmb3VuZCkgeyByZXR1cm4gbnVsbCB9XG4gICAgdmFyIG53ID0gW107XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGFuZ2UudGV4dC5sZW5ndGg7ICsraSlcbiAgICAgIHsgbncucHVzaChyZW1vdmVDbGVhcmVkU3BhbnMoZm91bmRbaV0pKTsgfVxuICAgIHJldHVybiBud1xuICB9XG5cbiAgLy8gVXNlZCBmb3IgdW4vcmUtZG9pbmcgY2hhbmdlcyBmcm9tIHRoZSBoaXN0b3J5LiBDb21iaW5lcyB0aGVcbiAgLy8gcmVzdWx0IG9mIGNvbXB1dGluZyB0aGUgZXhpc3Rpbmcgc3BhbnMgd2l0aCB0aGUgc2V0IG9mIHNwYW5zIHRoYXRcbiAgLy8gZXhpc3RlZCBpbiB0aGUgaGlzdG9yeSAoc28gdGhhdCBkZWxldGluZyBhcm91bmQgYSBzcGFuIGFuZCB0aGVuXG4gIC8vIHVuZG9pbmcgYnJpbmdzIGJhY2sgdGhlIHNwYW4pLlxuICBmdW5jdGlvbiBtZXJnZU9sZFNwYW5zKGRvYywgY2hhbmdlKSB7XG4gICAgdmFyIG9sZCA9IGdldE9sZFNwYW5zKGRvYywgY2hhbmdlKTtcbiAgICB2YXIgc3RyZXRjaGVkID0gc3RyZXRjaFNwYW5zT3ZlckNoYW5nZShkb2MsIGNoYW5nZSk7XG4gICAgaWYgKCFvbGQpIHsgcmV0dXJuIHN0cmV0Y2hlZCB9XG4gICAgaWYgKCFzdHJldGNoZWQpIHsgcmV0dXJuIG9sZCB9XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9sZC5sZW5ndGg7ICsraSkge1xuICAgICAgdmFyIG9sZEN1ciA9IG9sZFtpXSwgc3RyZXRjaEN1ciA9IHN0cmV0Y2hlZFtpXTtcbiAgICAgIGlmIChvbGRDdXIgJiYgc3RyZXRjaEN1cikge1xuICAgICAgICBzcGFuczogZm9yICh2YXIgaiA9IDA7IGogPCBzdHJldGNoQ3VyLmxlbmd0aDsgKytqKSB7XG4gICAgICAgICAgdmFyIHNwYW4gPSBzdHJldGNoQ3VyW2pdO1xuICAgICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgb2xkQ3VyLmxlbmd0aDsgKytrKVxuICAgICAgICAgICAgeyBpZiAob2xkQ3VyW2tdLm1hcmtlciA9PSBzcGFuLm1hcmtlcikgeyBjb250aW51ZSBzcGFucyB9IH1cbiAgICAgICAgICBvbGRDdXIucHVzaChzcGFuKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChzdHJldGNoQ3VyKSB7XG4gICAgICAgIG9sZFtpXSA9IHN0cmV0Y2hDdXI7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBvbGRcbiAgfVxuXG4gIC8vIFVzZWQgYm90aCB0byBwcm92aWRlIGEgSlNPTi1zYWZlIG9iamVjdCBpbiAuZ2V0SGlzdG9yeSwgYW5kLCB3aGVuXG4gIC8vIGRldGFjaGluZyBhIGRvY3VtZW50LCB0byBzcGxpdCB0aGUgaGlzdG9yeSBpbiB0d29cbiAgZnVuY3Rpb24gY29weUhpc3RvcnlBcnJheShldmVudHMsIG5ld0dyb3VwLCBpbnN0YW50aWF0ZVNlbCkge1xuICAgIHZhciBjb3B5ID0gW107XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBldmVudHMubGVuZ3RoOyArK2kpIHtcbiAgICAgIHZhciBldmVudCA9IGV2ZW50c1tpXTtcbiAgICAgIGlmIChldmVudC5yYW5nZXMpIHtcbiAgICAgICAgY29weS5wdXNoKGluc3RhbnRpYXRlU2VsID8gU2VsZWN0aW9uLnByb3RvdHlwZS5kZWVwQ29weS5jYWxsKGV2ZW50KSA6IGV2ZW50KTtcbiAgICAgICAgY29udGludWVcbiAgICAgIH1cbiAgICAgIHZhciBjaGFuZ2VzID0gZXZlbnQuY2hhbmdlcywgbmV3Q2hhbmdlcyA9IFtdO1xuICAgICAgY29weS5wdXNoKHtjaGFuZ2VzOiBuZXdDaGFuZ2VzfSk7XG4gICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGNoYW5nZXMubGVuZ3RoOyArK2opIHtcbiAgICAgICAgdmFyIGNoYW5nZSA9IGNoYW5nZXNbal0sIG0gPSAodm9pZCAwKTtcbiAgICAgICAgbmV3Q2hhbmdlcy5wdXNoKHtmcm9tOiBjaGFuZ2UuZnJvbSwgdG86IGNoYW5nZS50bywgdGV4dDogY2hhbmdlLnRleHR9KTtcbiAgICAgICAgaWYgKG5ld0dyb3VwKSB7IGZvciAodmFyIHByb3AgaW4gY2hhbmdlKSB7IGlmIChtID0gcHJvcC5tYXRjaCgvXnNwYW5zXyhcXGQrKSQvKSkge1xuICAgICAgICAgIGlmIChpbmRleE9mKG5ld0dyb3VwLCBOdW1iZXIobVsxXSkpID4gLTEpIHtcbiAgICAgICAgICAgIGxzdChuZXdDaGFuZ2VzKVtwcm9wXSA9IGNoYW5nZVtwcm9wXTtcbiAgICAgICAgICAgIGRlbGV0ZSBjaGFuZ2VbcHJvcF07XG4gICAgICAgICAgfVxuICAgICAgICB9IH0gfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gY29weVxuICB9XG5cbiAgLy8gVGhlICdzY3JvbGwnIHBhcmFtZXRlciBnaXZlbiB0byBtYW55IG9mIHRoZXNlIGluZGljYXRlZCB3aGV0aGVyXG4gIC8vIHRoZSBuZXcgY3Vyc29yIHBvc2l0aW9uIHNob3VsZCBiZSBzY3JvbGxlZCBpbnRvIHZpZXcgYWZ0ZXJcbiAgLy8gbW9kaWZ5aW5nIHRoZSBzZWxlY3Rpb24uXG5cbiAgLy8gSWYgc2hpZnQgaXMgaGVsZCBvciB0aGUgZXh0ZW5kIGZsYWcgaXMgc2V0LCBleHRlbmRzIGEgcmFuZ2UgdG9cbiAgLy8gaW5jbHVkZSBhIGdpdmVuIHBvc2l0aW9uIChhbmQgb3B0aW9uYWxseSBhIHNlY29uZCBwb3NpdGlvbikuXG4gIC8vIE90aGVyd2lzZSwgc2ltcGx5IHJldHVybnMgdGhlIHJhbmdlIGJldHdlZW4gdGhlIGdpdmVuIHBvc2l0aW9ucy5cbiAgLy8gVXNlZCBmb3IgY3Vyc29yIG1vdGlvbiBhbmQgc3VjaC5cbiAgZnVuY3Rpb24gZXh0ZW5kUmFuZ2UocmFuZ2UsIGhlYWQsIG90aGVyLCBleHRlbmQpIHtcbiAgICBpZiAoZXh0ZW5kKSB7XG4gICAgICB2YXIgYW5jaG9yID0gcmFuZ2UuYW5jaG9yO1xuICAgICAgaWYgKG90aGVyKSB7XG4gICAgICAgIHZhciBwb3NCZWZvcmUgPSBjbXAoaGVhZCwgYW5jaG9yKSA8IDA7XG4gICAgICAgIGlmIChwb3NCZWZvcmUgIT0gKGNtcChvdGhlciwgYW5jaG9yKSA8IDApKSB7XG4gICAgICAgICAgYW5jaG9yID0gaGVhZDtcbiAgICAgICAgICBoZWFkID0gb3RoZXI7XG4gICAgICAgIH0gZWxzZSBpZiAocG9zQmVmb3JlICE9IChjbXAoaGVhZCwgb3RoZXIpIDwgMCkpIHtcbiAgICAgICAgICBoZWFkID0gb3RoZXI7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBuZXcgUmFuZ2UoYW5jaG9yLCBoZWFkKVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbmV3IFJhbmdlKG90aGVyIHx8IGhlYWQsIGhlYWQpXG4gICAgfVxuICB9XG5cbiAgLy8gRXh0ZW5kIHRoZSBwcmltYXJ5IHNlbGVjdGlvbiByYW5nZSwgZGlzY2FyZCB0aGUgcmVzdC5cbiAgZnVuY3Rpb24gZXh0ZW5kU2VsZWN0aW9uKGRvYywgaGVhZCwgb3RoZXIsIG9wdGlvbnMsIGV4dGVuZCkge1xuICAgIGlmIChleHRlbmQgPT0gbnVsbCkgeyBleHRlbmQgPSBkb2MuY20gJiYgKGRvYy5jbS5kaXNwbGF5LnNoaWZ0IHx8IGRvYy5leHRlbmQpOyB9XG4gICAgc2V0U2VsZWN0aW9uKGRvYywgbmV3IFNlbGVjdGlvbihbZXh0ZW5kUmFuZ2UoZG9jLnNlbC5wcmltYXJ5KCksIGhlYWQsIG90aGVyLCBleHRlbmQpXSwgMCksIG9wdGlvbnMpO1xuICB9XG5cbiAgLy8gRXh0ZW5kIGFsbCBzZWxlY3Rpb25zIChwb3MgaXMgYW4gYXJyYXkgb2Ygc2VsZWN0aW9ucyB3aXRoIGxlbmd0aFxuICAvLyBlcXVhbCB0aGUgbnVtYmVyIG9mIHNlbGVjdGlvbnMpXG4gIGZ1bmN0aW9uIGV4dGVuZFNlbGVjdGlvbnMoZG9jLCBoZWFkcywgb3B0aW9ucykge1xuICAgIHZhciBvdXQgPSBbXTtcbiAgICB2YXIgZXh0ZW5kID0gZG9jLmNtICYmIChkb2MuY20uZGlzcGxheS5zaGlmdCB8fCBkb2MuZXh0ZW5kKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRvYy5zZWwucmFuZ2VzLmxlbmd0aDsgaSsrKVxuICAgICAgeyBvdXRbaV0gPSBleHRlbmRSYW5nZShkb2Muc2VsLnJhbmdlc1tpXSwgaGVhZHNbaV0sIG51bGwsIGV4dGVuZCk7IH1cbiAgICB2YXIgbmV3U2VsID0gbm9ybWFsaXplU2VsZWN0aW9uKGRvYy5jbSwgb3V0LCBkb2Muc2VsLnByaW1JbmRleCk7XG4gICAgc2V0U2VsZWN0aW9uKGRvYywgbmV3U2VsLCBvcHRpb25zKTtcbiAgfVxuXG4gIC8vIFVwZGF0ZXMgYSBzaW5nbGUgcmFuZ2UgaW4gdGhlIHNlbGVjdGlvbi5cbiAgZnVuY3Rpb24gcmVwbGFjZU9uZVNlbGVjdGlvbihkb2MsIGksIHJhbmdlLCBvcHRpb25zKSB7XG4gICAgdmFyIHJhbmdlcyA9IGRvYy5zZWwucmFuZ2VzLnNsaWNlKDApO1xuICAgIHJhbmdlc1tpXSA9IHJhbmdlO1xuICAgIHNldFNlbGVjdGlvbihkb2MsIG5vcm1hbGl6ZVNlbGVjdGlvbihkb2MuY20sIHJhbmdlcywgZG9jLnNlbC5wcmltSW5kZXgpLCBvcHRpb25zKTtcbiAgfVxuXG4gIC8vIFJlc2V0IHRoZSBzZWxlY3Rpb24gdG8gYSBzaW5nbGUgcmFuZ2UuXG4gIGZ1bmN0aW9uIHNldFNpbXBsZVNlbGVjdGlvbihkb2MsIGFuY2hvciwgaGVhZCwgb3B0aW9ucykge1xuICAgIHNldFNlbGVjdGlvbihkb2MsIHNpbXBsZVNlbGVjdGlvbihhbmNob3IsIGhlYWQpLCBvcHRpb25zKTtcbiAgfVxuXG4gIC8vIEdpdmUgYmVmb3JlU2VsZWN0aW9uQ2hhbmdlIGhhbmRsZXJzIGEgY2hhbmdlIHRvIGluZmx1ZW5jZSBhXG4gIC8vIHNlbGVjdGlvbiB1cGRhdGUuXG4gIGZ1bmN0aW9uIGZpbHRlclNlbGVjdGlvbkNoYW5nZShkb2MsIHNlbCwgb3B0aW9ucykge1xuICAgIHZhciBvYmogPSB7XG4gICAgICByYW5nZXM6IHNlbC5yYW5nZXMsXG4gICAgICB1cGRhdGU6IGZ1bmN0aW9uKHJhbmdlcykge1xuICAgICAgICB0aGlzLnJhbmdlcyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJhbmdlcy5sZW5ndGg7IGkrKylcbiAgICAgICAgICB7IHRoaXMucmFuZ2VzW2ldID0gbmV3IFJhbmdlKGNsaXBQb3MoZG9jLCByYW5nZXNbaV0uYW5jaG9yKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGlwUG9zKGRvYywgcmFuZ2VzW2ldLmhlYWQpKTsgfVxuICAgICAgfSxcbiAgICAgIG9yaWdpbjogb3B0aW9ucyAmJiBvcHRpb25zLm9yaWdpblxuICAgIH07XG4gICAgc2lnbmFsKGRvYywgXCJiZWZvcmVTZWxlY3Rpb25DaGFuZ2VcIiwgZG9jLCBvYmopO1xuICAgIGlmIChkb2MuY20pIHsgc2lnbmFsKGRvYy5jbSwgXCJiZWZvcmVTZWxlY3Rpb25DaGFuZ2VcIiwgZG9jLmNtLCBvYmopOyB9XG4gICAgaWYgKG9iai5yYW5nZXMgIT0gc2VsLnJhbmdlcykgeyByZXR1cm4gbm9ybWFsaXplU2VsZWN0aW9uKGRvYy5jbSwgb2JqLnJhbmdlcywgb2JqLnJhbmdlcy5sZW5ndGggLSAxKSB9XG4gICAgZWxzZSB7IHJldHVybiBzZWwgfVxuICB9XG5cbiAgZnVuY3Rpb24gc2V0U2VsZWN0aW9uUmVwbGFjZUhpc3RvcnkoZG9jLCBzZWwsIG9wdGlvbnMpIHtcbiAgICB2YXIgZG9uZSA9IGRvYy5oaXN0b3J5LmRvbmUsIGxhc3QgPSBsc3QoZG9uZSk7XG4gICAgaWYgKGxhc3QgJiYgbGFzdC5yYW5nZXMpIHtcbiAgICAgIGRvbmVbZG9uZS5sZW5ndGggLSAxXSA9IHNlbDtcbiAgICAgIHNldFNlbGVjdGlvbk5vVW5kbyhkb2MsIHNlbCwgb3B0aW9ucyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNldFNlbGVjdGlvbihkb2MsIHNlbCwgb3B0aW9ucyk7XG4gICAgfVxuICB9XG5cbiAgLy8gU2V0IGEgbmV3IHNlbGVjdGlvbi5cbiAgZnVuY3Rpb24gc2V0U2VsZWN0aW9uKGRvYywgc2VsLCBvcHRpb25zKSB7XG4gICAgc2V0U2VsZWN0aW9uTm9VbmRvKGRvYywgc2VsLCBvcHRpb25zKTtcbiAgICBhZGRTZWxlY3Rpb25Ub0hpc3RvcnkoZG9jLCBkb2Muc2VsLCBkb2MuY20gPyBkb2MuY20uY3VyT3AuaWQgOiBOYU4sIG9wdGlvbnMpO1xuICB9XG5cbiAgZnVuY3Rpb24gc2V0U2VsZWN0aW9uTm9VbmRvKGRvYywgc2VsLCBvcHRpb25zKSB7XG4gICAgaWYgKGhhc0hhbmRsZXIoZG9jLCBcImJlZm9yZVNlbGVjdGlvbkNoYW5nZVwiKSB8fCBkb2MuY20gJiYgaGFzSGFuZGxlcihkb2MuY20sIFwiYmVmb3JlU2VsZWN0aW9uQ2hhbmdlXCIpKVxuICAgICAgeyBzZWwgPSBmaWx0ZXJTZWxlY3Rpb25DaGFuZ2UoZG9jLCBzZWwsIG9wdGlvbnMpOyB9XG5cbiAgICB2YXIgYmlhcyA9IG9wdGlvbnMgJiYgb3B0aW9ucy5iaWFzIHx8XG4gICAgICAoY21wKHNlbC5wcmltYXJ5KCkuaGVhZCwgZG9jLnNlbC5wcmltYXJ5KCkuaGVhZCkgPCAwID8gLTEgOiAxKTtcbiAgICBzZXRTZWxlY3Rpb25Jbm5lcihkb2MsIHNraXBBdG9taWNJblNlbGVjdGlvbihkb2MsIHNlbCwgYmlhcywgdHJ1ZSkpO1xuXG4gICAgaWYgKCEob3B0aW9ucyAmJiBvcHRpb25zLnNjcm9sbCA9PT0gZmFsc2UpICYmIGRvYy5jbSAmJiBkb2MuY20uZ2V0T3B0aW9uKFwicmVhZE9ubHlcIikgIT0gXCJub2N1cnNvclwiKVxuICAgICAgeyBlbnN1cmVDdXJzb3JWaXNpYmxlKGRvYy5jbSk7IH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHNldFNlbGVjdGlvbklubmVyKGRvYywgc2VsKSB7XG4gICAgaWYgKHNlbC5lcXVhbHMoZG9jLnNlbCkpIHsgcmV0dXJuIH1cblxuICAgIGRvYy5zZWwgPSBzZWw7XG5cbiAgICBpZiAoZG9jLmNtKSB7XG4gICAgICBkb2MuY20uY3VyT3AudXBkYXRlSW5wdXQgPSAxO1xuICAgICAgZG9jLmNtLmN1ck9wLnNlbGVjdGlvbkNoYW5nZWQgPSB0cnVlO1xuICAgICAgc2lnbmFsQ3Vyc29yQWN0aXZpdHkoZG9jLmNtKTtcbiAgICB9XG4gICAgc2lnbmFsTGF0ZXIoZG9jLCBcImN1cnNvckFjdGl2aXR5XCIsIGRvYyk7XG4gIH1cblxuICAvLyBWZXJpZnkgdGhhdCB0aGUgc2VsZWN0aW9uIGRvZXMgbm90IHBhcnRpYWxseSBzZWxlY3QgYW55IGF0b21pY1xuICAvLyBtYXJrZWQgcmFuZ2VzLlxuICBmdW5jdGlvbiByZUNoZWNrU2VsZWN0aW9uKGRvYykge1xuICAgIHNldFNlbGVjdGlvbklubmVyKGRvYywgc2tpcEF0b21pY0luU2VsZWN0aW9uKGRvYywgZG9jLnNlbCwgbnVsbCwgZmFsc2UpKTtcbiAgfVxuXG4gIC8vIFJldHVybiBhIHNlbGVjdGlvbiB0aGF0IGRvZXMgbm90IHBhcnRpYWxseSBzZWxlY3QgYW55IGF0b21pY1xuICAvLyByYW5nZXMuXG4gIGZ1bmN0aW9uIHNraXBBdG9taWNJblNlbGVjdGlvbihkb2MsIHNlbCwgYmlhcywgbWF5Q2xlYXIpIHtcbiAgICB2YXIgb3V0O1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2VsLnJhbmdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIHJhbmdlID0gc2VsLnJhbmdlc1tpXTtcbiAgICAgIHZhciBvbGQgPSBzZWwucmFuZ2VzLmxlbmd0aCA9PSBkb2Muc2VsLnJhbmdlcy5sZW5ndGggJiYgZG9jLnNlbC5yYW5nZXNbaV07XG4gICAgICB2YXIgbmV3QW5jaG9yID0gc2tpcEF0b21pYyhkb2MsIHJhbmdlLmFuY2hvciwgb2xkICYmIG9sZC5hbmNob3IsIGJpYXMsIG1heUNsZWFyKTtcbiAgICAgIHZhciBuZXdIZWFkID0gcmFuZ2UuaGVhZCA9PSByYW5nZS5hbmNob3IgPyBuZXdBbmNob3IgOiBza2lwQXRvbWljKGRvYywgcmFuZ2UuaGVhZCwgb2xkICYmIG9sZC5oZWFkLCBiaWFzLCBtYXlDbGVhcik7XG4gICAgICBpZiAob3V0IHx8IG5ld0FuY2hvciAhPSByYW5nZS5hbmNob3IgfHwgbmV3SGVhZCAhPSByYW5nZS5oZWFkKSB7XG4gICAgICAgIGlmICghb3V0KSB7IG91dCA9IHNlbC5yYW5nZXMuc2xpY2UoMCwgaSk7IH1cbiAgICAgICAgb3V0W2ldID0gbmV3IFJhbmdlKG5ld0FuY2hvciwgbmV3SGVhZCk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBvdXQgPyBub3JtYWxpemVTZWxlY3Rpb24oZG9jLmNtLCBvdXQsIHNlbC5wcmltSW5kZXgpIDogc2VsXG4gIH1cblxuICBmdW5jdGlvbiBza2lwQXRvbWljSW5uZXIoZG9jLCBwb3MsIG9sZFBvcywgZGlyLCBtYXlDbGVhcikge1xuICAgIHZhciBsaW5lID0gZ2V0TGluZShkb2MsIHBvcy5saW5lKTtcbiAgICBpZiAobGluZS5tYXJrZWRTcGFucykgeyBmb3IgKHZhciBpID0gMDsgaSA8IGxpbmUubWFya2VkU3BhbnMubGVuZ3RoOyArK2kpIHtcbiAgICAgIHZhciBzcCA9IGxpbmUubWFya2VkU3BhbnNbaV0sIG0gPSBzcC5tYXJrZXI7XG5cbiAgICAgIC8vIERldGVybWluZSBpZiB3ZSBzaG91bGQgcHJldmVudCB0aGUgY3Vyc29yIGJlaW5nIHBsYWNlZCB0byB0aGUgbGVmdC9yaWdodCBvZiBhbiBhdG9taWMgbWFya2VyXG4gICAgICAvLyBIaXN0b3JpY2FsbHkgdGhpcyB3YXMgZGV0ZXJtaW5lZCB1c2luZyB0aGUgaW5jbHVzaXZlTGVmdC9SaWdodCBvcHRpb24sIGJ1dCB0aGUgbmV3IHdheSB0byBjb250cm9sIGl0XG4gICAgICAvLyBpcyB3aXRoIHNlbGVjdExlZnQvUmlnaHRcbiAgICAgIHZhciBwcmV2ZW50Q3Vyc29yTGVmdCA9IChcInNlbGVjdExlZnRcIiBpbiBtKSA/ICFtLnNlbGVjdExlZnQgOiBtLmluY2x1c2l2ZUxlZnQ7XG4gICAgICB2YXIgcHJldmVudEN1cnNvclJpZ2h0ID0gKFwic2VsZWN0UmlnaHRcIiBpbiBtKSA/ICFtLnNlbGVjdFJpZ2h0IDogbS5pbmNsdXNpdmVSaWdodDtcblxuICAgICAgaWYgKChzcC5mcm9tID09IG51bGwgfHwgKHByZXZlbnRDdXJzb3JMZWZ0ID8gc3AuZnJvbSA8PSBwb3MuY2ggOiBzcC5mcm9tIDwgcG9zLmNoKSkgJiZcbiAgICAgICAgICAoc3AudG8gPT0gbnVsbCB8fCAocHJldmVudEN1cnNvclJpZ2h0ID8gc3AudG8gPj0gcG9zLmNoIDogc3AudG8gPiBwb3MuY2gpKSkge1xuICAgICAgICBpZiAobWF5Q2xlYXIpIHtcbiAgICAgICAgICBzaWduYWwobSwgXCJiZWZvcmVDdXJzb3JFbnRlclwiKTtcbiAgICAgICAgICBpZiAobS5leHBsaWNpdGx5Q2xlYXJlZCkge1xuICAgICAgICAgICAgaWYgKCFsaW5lLm1hcmtlZFNwYW5zKSB7IGJyZWFrIH1cbiAgICAgICAgICAgIGVsc2Ugey0taTsgY29udGludWV9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghbS5hdG9taWMpIHsgY29udGludWUgfVxuXG4gICAgICAgIGlmIChvbGRQb3MpIHtcbiAgICAgICAgICB2YXIgbmVhciA9IG0uZmluZChkaXIgPCAwID8gMSA6IC0xKSwgZGlmZiA9ICh2b2lkIDApO1xuICAgICAgICAgIGlmIChkaXIgPCAwID8gcHJldmVudEN1cnNvclJpZ2h0IDogcHJldmVudEN1cnNvckxlZnQpXG4gICAgICAgICAgICB7IG5lYXIgPSBtb3ZlUG9zKGRvYywgbmVhciwgLWRpciwgbmVhciAmJiBuZWFyLmxpbmUgPT0gcG9zLmxpbmUgPyBsaW5lIDogbnVsbCk7IH1cbiAgICAgICAgICBpZiAobmVhciAmJiBuZWFyLmxpbmUgPT0gcG9zLmxpbmUgJiYgKGRpZmYgPSBjbXAobmVhciwgb2xkUG9zKSkgJiYgKGRpciA8IDAgPyBkaWZmIDwgMCA6IGRpZmYgPiAwKSlcbiAgICAgICAgICAgIHsgcmV0dXJuIHNraXBBdG9taWNJbm5lcihkb2MsIG5lYXIsIHBvcywgZGlyLCBtYXlDbGVhcikgfVxuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGZhciA9IG0uZmluZChkaXIgPCAwID8gLTEgOiAxKTtcbiAgICAgICAgaWYgKGRpciA8IDAgPyBwcmV2ZW50Q3Vyc29yTGVmdCA6IHByZXZlbnRDdXJzb3JSaWdodClcbiAgICAgICAgICB7IGZhciA9IG1vdmVQb3MoZG9jLCBmYXIsIGRpciwgZmFyLmxpbmUgPT0gcG9zLmxpbmUgPyBsaW5lIDogbnVsbCk7IH1cbiAgICAgICAgcmV0dXJuIGZhciA/IHNraXBBdG9taWNJbm5lcihkb2MsIGZhciwgcG9zLCBkaXIsIG1heUNsZWFyKSA6IG51bGxcbiAgICAgIH1cbiAgICB9IH1cbiAgICByZXR1cm4gcG9zXG4gIH1cblxuICAvLyBFbnN1cmUgYSBnaXZlbiBwb3NpdGlvbiBpcyBub3QgaW5zaWRlIGFuIGF0b21pYyByYW5nZS5cbiAgZnVuY3Rpb24gc2tpcEF0b21pYyhkb2MsIHBvcywgb2xkUG9zLCBiaWFzLCBtYXlDbGVhcikge1xuICAgIHZhciBkaXIgPSBiaWFzIHx8IDE7XG4gICAgdmFyIGZvdW5kID0gc2tpcEF0b21pY0lubmVyKGRvYywgcG9zLCBvbGRQb3MsIGRpciwgbWF5Q2xlYXIpIHx8XG4gICAgICAgICghbWF5Q2xlYXIgJiYgc2tpcEF0b21pY0lubmVyKGRvYywgcG9zLCBvbGRQb3MsIGRpciwgdHJ1ZSkpIHx8XG4gICAgICAgIHNraXBBdG9taWNJbm5lcihkb2MsIHBvcywgb2xkUG9zLCAtZGlyLCBtYXlDbGVhcikgfHxcbiAgICAgICAgKCFtYXlDbGVhciAmJiBza2lwQXRvbWljSW5uZXIoZG9jLCBwb3MsIG9sZFBvcywgLWRpciwgdHJ1ZSkpO1xuICAgIGlmICghZm91bmQpIHtcbiAgICAgIGRvYy5jYW50RWRpdCA9IHRydWU7XG4gICAgICByZXR1cm4gUG9zKGRvYy5maXJzdCwgMClcbiAgICB9XG4gICAgcmV0dXJuIGZvdW5kXG4gIH1cblxuICBmdW5jdGlvbiBtb3ZlUG9zKGRvYywgcG9zLCBkaXIsIGxpbmUpIHtcbiAgICBpZiAoZGlyIDwgMCAmJiBwb3MuY2ggPT0gMCkge1xuICAgICAgaWYgKHBvcy5saW5lID4gZG9jLmZpcnN0KSB7IHJldHVybiBjbGlwUG9zKGRvYywgUG9zKHBvcy5saW5lIC0gMSkpIH1cbiAgICAgIGVsc2UgeyByZXR1cm4gbnVsbCB9XG4gICAgfSBlbHNlIGlmIChkaXIgPiAwICYmIHBvcy5jaCA9PSAobGluZSB8fCBnZXRMaW5lKGRvYywgcG9zLmxpbmUpKS50ZXh0Lmxlbmd0aCkge1xuICAgICAgaWYgKHBvcy5saW5lIDwgZG9jLmZpcnN0ICsgZG9jLnNpemUgLSAxKSB7IHJldHVybiBQb3MocG9zLmxpbmUgKyAxLCAwKSB9XG4gICAgICBlbHNlIHsgcmV0dXJuIG51bGwgfVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbmV3IFBvcyhwb3MubGluZSwgcG9zLmNoICsgZGlyKVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHNlbGVjdEFsbChjbSkge1xuICAgIGNtLnNldFNlbGVjdGlvbihQb3MoY20uZmlyc3RMaW5lKCksIDApLCBQb3MoY20ubGFzdExpbmUoKSksIHNlbF9kb250U2Nyb2xsKTtcbiAgfVxuXG4gIC8vIFVQREFUSU5HXG5cbiAgLy8gQWxsb3cgXCJiZWZvcmVDaGFuZ2VcIiBldmVudCBoYW5kbGVycyB0byBpbmZsdWVuY2UgYSBjaGFuZ2VcbiAgZnVuY3Rpb24gZmlsdGVyQ2hhbmdlKGRvYywgY2hhbmdlLCB1cGRhdGUpIHtcbiAgICB2YXIgb2JqID0ge1xuICAgICAgY2FuY2VsZWQ6IGZhbHNlLFxuICAgICAgZnJvbTogY2hhbmdlLmZyb20sXG4gICAgICB0bzogY2hhbmdlLnRvLFxuICAgICAgdGV4dDogY2hhbmdlLnRleHQsXG4gICAgICBvcmlnaW46IGNoYW5nZS5vcmlnaW4sXG4gICAgICBjYW5jZWw6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIG9iai5jYW5jZWxlZCA9IHRydWU7IH1cbiAgICB9O1xuICAgIGlmICh1cGRhdGUpIHsgb2JqLnVwZGF0ZSA9IGZ1bmN0aW9uIChmcm9tLCB0bywgdGV4dCwgb3JpZ2luKSB7XG4gICAgICBpZiAoZnJvbSkgeyBvYmouZnJvbSA9IGNsaXBQb3MoZG9jLCBmcm9tKTsgfVxuICAgICAgaWYgKHRvKSB7IG9iai50byA9IGNsaXBQb3MoZG9jLCB0byk7IH1cbiAgICAgIGlmICh0ZXh0KSB7IG9iai50ZXh0ID0gdGV4dDsgfVxuICAgICAgaWYgKG9yaWdpbiAhPT0gdW5kZWZpbmVkKSB7IG9iai5vcmlnaW4gPSBvcmlnaW47IH1cbiAgICB9OyB9XG4gICAgc2lnbmFsKGRvYywgXCJiZWZvcmVDaGFuZ2VcIiwgZG9jLCBvYmopO1xuICAgIGlmIChkb2MuY20pIHsgc2lnbmFsKGRvYy5jbSwgXCJiZWZvcmVDaGFuZ2VcIiwgZG9jLmNtLCBvYmopOyB9XG5cbiAgICBpZiAob2JqLmNhbmNlbGVkKSB7XG4gICAgICBpZiAoZG9jLmNtKSB7IGRvYy5jbS5jdXJPcC51cGRhdGVJbnB1dCA9IDI7IH1cbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuICAgIHJldHVybiB7ZnJvbTogb2JqLmZyb20sIHRvOiBvYmoudG8sIHRleHQ6IG9iai50ZXh0LCBvcmlnaW46IG9iai5vcmlnaW59XG4gIH1cblxuICAvLyBBcHBseSBhIGNoYW5nZSB0byBhIGRvY3VtZW50LCBhbmQgYWRkIGl0IHRvIHRoZSBkb2N1bWVudCdzXG4gIC8vIGhpc3RvcnksIGFuZCBwcm9wYWdhdGluZyBpdCB0byBhbGwgbGlua2VkIGRvY3VtZW50cy5cbiAgZnVuY3Rpb24gbWFrZUNoYW5nZShkb2MsIGNoYW5nZSwgaWdub3JlUmVhZE9ubHkpIHtcbiAgICBpZiAoZG9jLmNtKSB7XG4gICAgICBpZiAoIWRvYy5jbS5jdXJPcCkgeyByZXR1cm4gb3BlcmF0aW9uKGRvYy5jbSwgbWFrZUNoYW5nZSkoZG9jLCBjaGFuZ2UsIGlnbm9yZVJlYWRPbmx5KSB9XG4gICAgICBpZiAoZG9jLmNtLnN0YXRlLnN1cHByZXNzRWRpdHMpIHsgcmV0dXJuIH1cbiAgICB9XG5cbiAgICBpZiAoaGFzSGFuZGxlcihkb2MsIFwiYmVmb3JlQ2hhbmdlXCIpIHx8IGRvYy5jbSAmJiBoYXNIYW5kbGVyKGRvYy5jbSwgXCJiZWZvcmVDaGFuZ2VcIikpIHtcbiAgICAgIGNoYW5nZSA9IGZpbHRlckNoYW5nZShkb2MsIGNoYW5nZSwgdHJ1ZSk7XG4gICAgICBpZiAoIWNoYW5nZSkgeyByZXR1cm4gfVxuICAgIH1cblxuICAgIC8vIFBvc3NpYmx5IHNwbGl0IG9yIHN1cHByZXNzIHRoZSB1cGRhdGUgYmFzZWQgb24gdGhlIHByZXNlbmNlXG4gICAgLy8gb2YgcmVhZC1vbmx5IHNwYW5zIGluIGl0cyByYW5nZS5cbiAgICB2YXIgc3BsaXQgPSBzYXdSZWFkT25seVNwYW5zICYmICFpZ25vcmVSZWFkT25seSAmJiByZW1vdmVSZWFkT25seVJhbmdlcyhkb2MsIGNoYW5nZS5mcm9tLCBjaGFuZ2UudG8pO1xuICAgIGlmIChzcGxpdCkge1xuICAgICAgZm9yICh2YXIgaSA9IHNwbGl0Lmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKVxuICAgICAgICB7IG1ha2VDaGFuZ2VJbm5lcihkb2MsIHtmcm9tOiBzcGxpdFtpXS5mcm9tLCB0bzogc3BsaXRbaV0udG8sIHRleHQ6IGkgPyBbXCJcIl0gOiBjaGFuZ2UudGV4dCwgb3JpZ2luOiBjaGFuZ2Uub3JpZ2lufSk7IH1cbiAgICB9IGVsc2Uge1xuICAgICAgbWFrZUNoYW5nZUlubmVyKGRvYywgY2hhbmdlKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBtYWtlQ2hhbmdlSW5uZXIoZG9jLCBjaGFuZ2UpIHtcbiAgICBpZiAoY2hhbmdlLnRleHQubGVuZ3RoID09IDEgJiYgY2hhbmdlLnRleHRbMF0gPT0gXCJcIiAmJiBjbXAoY2hhbmdlLmZyb20sIGNoYW5nZS50bykgPT0gMCkgeyByZXR1cm4gfVxuICAgIHZhciBzZWxBZnRlciA9IGNvbXB1dGVTZWxBZnRlckNoYW5nZShkb2MsIGNoYW5nZSk7XG4gICAgYWRkQ2hhbmdlVG9IaXN0b3J5KGRvYywgY2hhbmdlLCBzZWxBZnRlciwgZG9jLmNtID8gZG9jLmNtLmN1ck9wLmlkIDogTmFOKTtcblxuICAgIG1ha2VDaGFuZ2VTaW5nbGVEb2MoZG9jLCBjaGFuZ2UsIHNlbEFmdGVyLCBzdHJldGNoU3BhbnNPdmVyQ2hhbmdlKGRvYywgY2hhbmdlKSk7XG4gICAgdmFyIHJlYmFzZWQgPSBbXTtcblxuICAgIGxpbmtlZERvY3MoZG9jLCBmdW5jdGlvbiAoZG9jLCBzaGFyZWRIaXN0KSB7XG4gICAgICBpZiAoIXNoYXJlZEhpc3QgJiYgaW5kZXhPZihyZWJhc2VkLCBkb2MuaGlzdG9yeSkgPT0gLTEpIHtcbiAgICAgICAgcmViYXNlSGlzdChkb2MuaGlzdG9yeSwgY2hhbmdlKTtcbiAgICAgICAgcmViYXNlZC5wdXNoKGRvYy5oaXN0b3J5KTtcbiAgICAgIH1cbiAgICAgIG1ha2VDaGFuZ2VTaW5nbGVEb2MoZG9jLCBjaGFuZ2UsIG51bGwsIHN0cmV0Y2hTcGFuc092ZXJDaGFuZ2UoZG9jLCBjaGFuZ2UpKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8vIFJldmVydCBhIGNoYW5nZSBzdG9yZWQgaW4gYSBkb2N1bWVudCdzIGhpc3RvcnkuXG4gIGZ1bmN0aW9uIG1ha2VDaGFuZ2VGcm9tSGlzdG9yeShkb2MsIHR5cGUsIGFsbG93U2VsZWN0aW9uT25seSkge1xuICAgIHZhciBzdXBwcmVzcyA9IGRvYy5jbSAmJiBkb2MuY20uc3RhdGUuc3VwcHJlc3NFZGl0cztcbiAgICBpZiAoc3VwcHJlc3MgJiYgIWFsbG93U2VsZWN0aW9uT25seSkgeyByZXR1cm4gfVxuXG4gICAgdmFyIGhpc3QgPSBkb2MuaGlzdG9yeSwgZXZlbnQsIHNlbEFmdGVyID0gZG9jLnNlbDtcbiAgICB2YXIgc291cmNlID0gdHlwZSA9PSBcInVuZG9cIiA/IGhpc3QuZG9uZSA6IGhpc3QudW5kb25lLCBkZXN0ID0gdHlwZSA9PSBcInVuZG9cIiA/IGhpc3QudW5kb25lIDogaGlzdC5kb25lO1xuXG4gICAgLy8gVmVyaWZ5IHRoYXQgdGhlcmUgaXMgYSB1c2VhYmxlIGV2ZW50IChzbyB0aGF0IGN0cmwteiB3b24ndFxuICAgIC8vIG5lZWRsZXNzbHkgY2xlYXIgc2VsZWN0aW9uIGV2ZW50cylcbiAgICB2YXIgaSA9IDA7XG4gICAgZm9yICg7IGkgPCBzb3VyY2UubGVuZ3RoOyBpKyspIHtcbiAgICAgIGV2ZW50ID0gc291cmNlW2ldO1xuICAgICAgaWYgKGFsbG93U2VsZWN0aW9uT25seSA/IGV2ZW50LnJhbmdlcyAmJiAhZXZlbnQuZXF1YWxzKGRvYy5zZWwpIDogIWV2ZW50LnJhbmdlcylcbiAgICAgICAgeyBicmVhayB9XG4gICAgfVxuICAgIGlmIChpID09IHNvdXJjZS5sZW5ndGgpIHsgcmV0dXJuIH1cbiAgICBoaXN0Lmxhc3RPcmlnaW4gPSBoaXN0Lmxhc3RTZWxPcmlnaW4gPSBudWxsO1xuXG4gICAgZm9yICg7Oykge1xuICAgICAgZXZlbnQgPSBzb3VyY2UucG9wKCk7XG4gICAgICBpZiAoZXZlbnQucmFuZ2VzKSB7XG4gICAgICAgIHB1c2hTZWxlY3Rpb25Ub0hpc3RvcnkoZXZlbnQsIGRlc3QpO1xuICAgICAgICBpZiAoYWxsb3dTZWxlY3Rpb25Pbmx5ICYmICFldmVudC5lcXVhbHMoZG9jLnNlbCkpIHtcbiAgICAgICAgICBzZXRTZWxlY3Rpb24oZG9jLCBldmVudCwge2NsZWFyUmVkbzogZmFsc2V9KTtcbiAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgICAgICBzZWxBZnRlciA9IGV2ZW50O1xuICAgICAgfSBlbHNlIGlmIChzdXBwcmVzcykge1xuICAgICAgICBzb3VyY2UucHVzaChldmVudCk7XG4gICAgICAgIHJldHVyblxuICAgICAgfSBlbHNlIHsgYnJlYWsgfVxuICAgIH1cblxuICAgIC8vIEJ1aWxkIHVwIGEgcmV2ZXJzZSBjaGFuZ2Ugb2JqZWN0IHRvIGFkZCB0byB0aGUgb3Bwb3NpdGUgaGlzdG9yeVxuICAgIC8vIHN0YWNrIChyZWRvIHdoZW4gdW5kb2luZywgYW5kIHZpY2UgdmVyc2EpLlxuICAgIHZhciBhbnRpQ2hhbmdlcyA9IFtdO1xuICAgIHB1c2hTZWxlY3Rpb25Ub0hpc3Rvcnkoc2VsQWZ0ZXIsIGRlc3QpO1xuICAgIGRlc3QucHVzaCh7Y2hhbmdlczogYW50aUNoYW5nZXMsIGdlbmVyYXRpb246IGhpc3QuZ2VuZXJhdGlvbn0pO1xuICAgIGhpc3QuZ2VuZXJhdGlvbiA9IGV2ZW50LmdlbmVyYXRpb24gfHwgKytoaXN0Lm1heEdlbmVyYXRpb247XG5cbiAgICB2YXIgZmlsdGVyID0gaGFzSGFuZGxlcihkb2MsIFwiYmVmb3JlQ2hhbmdlXCIpIHx8IGRvYy5jbSAmJiBoYXNIYW5kbGVyKGRvYy5jbSwgXCJiZWZvcmVDaGFuZ2VcIik7XG5cbiAgICB2YXIgbG9vcCA9IGZ1bmN0aW9uICggaSApIHtcbiAgICAgIHZhciBjaGFuZ2UgPSBldmVudC5jaGFuZ2VzW2ldO1xuICAgICAgY2hhbmdlLm9yaWdpbiA9IHR5cGU7XG4gICAgICBpZiAoZmlsdGVyICYmICFmaWx0ZXJDaGFuZ2UoZG9jLCBjaGFuZ2UsIGZhbHNlKSkge1xuICAgICAgICBzb3VyY2UubGVuZ3RoID0gMDtcbiAgICAgICAgcmV0dXJuIHt9XG4gICAgICB9XG5cbiAgICAgIGFudGlDaGFuZ2VzLnB1c2goaGlzdG9yeUNoYW5nZUZyb21DaGFuZ2UoZG9jLCBjaGFuZ2UpKTtcblxuICAgICAgdmFyIGFmdGVyID0gaSA/IGNvbXB1dGVTZWxBZnRlckNoYW5nZShkb2MsIGNoYW5nZSkgOiBsc3Qoc291cmNlKTtcbiAgICAgIG1ha2VDaGFuZ2VTaW5nbGVEb2MoZG9jLCBjaGFuZ2UsIGFmdGVyLCBtZXJnZU9sZFNwYW5zKGRvYywgY2hhbmdlKSk7XG4gICAgICBpZiAoIWkgJiYgZG9jLmNtKSB7IGRvYy5jbS5zY3JvbGxJbnRvVmlldyh7ZnJvbTogY2hhbmdlLmZyb20sIHRvOiBjaGFuZ2VFbmQoY2hhbmdlKX0pOyB9XG4gICAgICB2YXIgcmViYXNlZCA9IFtdO1xuXG4gICAgICAvLyBQcm9wYWdhdGUgdG8gdGhlIGxpbmtlZCBkb2N1bWVudHNcbiAgICAgIGxpbmtlZERvY3MoZG9jLCBmdW5jdGlvbiAoZG9jLCBzaGFyZWRIaXN0KSB7XG4gICAgICAgIGlmICghc2hhcmVkSGlzdCAmJiBpbmRleE9mKHJlYmFzZWQsIGRvYy5oaXN0b3J5KSA9PSAtMSkge1xuICAgICAgICAgIHJlYmFzZUhpc3QoZG9jLmhpc3RvcnksIGNoYW5nZSk7XG4gICAgICAgICAgcmViYXNlZC5wdXNoKGRvYy5oaXN0b3J5KTtcbiAgICAgICAgfVxuICAgICAgICBtYWtlQ2hhbmdlU2luZ2xlRG9jKGRvYywgY2hhbmdlLCBudWxsLCBtZXJnZU9sZFNwYW5zKGRvYywgY2hhbmdlKSk7XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgZm9yICh2YXIgaSQxID0gZXZlbnQuY2hhbmdlcy5sZW5ndGggLSAxOyBpJDEgPj0gMDsgLS1pJDEpIHtcbiAgICAgIHZhciByZXR1cm5lZCA9IGxvb3AoIGkkMSApO1xuXG4gICAgICBpZiAoIHJldHVybmVkICkgcmV0dXJuIHJldHVybmVkLnY7XG4gICAgfVxuICB9XG5cbiAgLy8gU3ViLXZpZXdzIG5lZWQgdGhlaXIgbGluZSBudW1iZXJzIHNoaWZ0ZWQgd2hlbiB0ZXh0IGlzIGFkZGVkXG4gIC8vIGFib3ZlIG9yIGJlbG93IHRoZW0gaW4gdGhlIHBhcmVudCBkb2N1bWVudC5cbiAgZnVuY3Rpb24gc2hpZnREb2MoZG9jLCBkaXN0YW5jZSkge1xuICAgIGlmIChkaXN0YW5jZSA9PSAwKSB7IHJldHVybiB9XG4gICAgZG9jLmZpcnN0ICs9IGRpc3RhbmNlO1xuICAgIGRvYy5zZWwgPSBuZXcgU2VsZWN0aW9uKG1hcChkb2Muc2VsLnJhbmdlcywgZnVuY3Rpb24gKHJhbmdlKSB7IHJldHVybiBuZXcgUmFuZ2UoXG4gICAgICBQb3MocmFuZ2UuYW5jaG9yLmxpbmUgKyBkaXN0YW5jZSwgcmFuZ2UuYW5jaG9yLmNoKSxcbiAgICAgIFBvcyhyYW5nZS5oZWFkLmxpbmUgKyBkaXN0YW5jZSwgcmFuZ2UuaGVhZC5jaClcbiAgICApOyB9KSwgZG9jLnNlbC5wcmltSW5kZXgpO1xuICAgIGlmIChkb2MuY20pIHtcbiAgICAgIHJlZ0NoYW5nZShkb2MuY20sIGRvYy5maXJzdCwgZG9jLmZpcnN0IC0gZGlzdGFuY2UsIGRpc3RhbmNlKTtcbiAgICAgIGZvciAodmFyIGQgPSBkb2MuY20uZGlzcGxheSwgbCA9IGQudmlld0Zyb207IGwgPCBkLnZpZXdUbzsgbCsrKVxuICAgICAgICB7IHJlZ0xpbmVDaGFuZ2UoZG9jLmNtLCBsLCBcImd1dHRlclwiKTsgfVxuICAgIH1cbiAgfVxuXG4gIC8vIE1vcmUgbG93ZXItbGV2ZWwgY2hhbmdlIGZ1bmN0aW9uLCBoYW5kbGluZyBvbmx5IGEgc2luZ2xlIGRvY3VtZW50XG4gIC8vIChub3QgbGlua2VkIG9uZXMpLlxuICBmdW5jdGlvbiBtYWtlQ2hhbmdlU2luZ2xlRG9jKGRvYywgY2hhbmdlLCBzZWxBZnRlciwgc3BhbnMpIHtcbiAgICBpZiAoZG9jLmNtICYmICFkb2MuY20uY3VyT3ApXG4gICAgICB7IHJldHVybiBvcGVyYXRpb24oZG9jLmNtLCBtYWtlQ2hhbmdlU2luZ2xlRG9jKShkb2MsIGNoYW5nZSwgc2VsQWZ0ZXIsIHNwYW5zKSB9XG5cbiAgICBpZiAoY2hhbmdlLnRvLmxpbmUgPCBkb2MuZmlyc3QpIHtcbiAgICAgIHNoaWZ0RG9jKGRvYywgY2hhbmdlLnRleHQubGVuZ3RoIC0gMSAtIChjaGFuZ2UudG8ubGluZSAtIGNoYW5nZS5mcm9tLmxpbmUpKTtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBpZiAoY2hhbmdlLmZyb20ubGluZSA+IGRvYy5sYXN0TGluZSgpKSB7IHJldHVybiB9XG5cbiAgICAvLyBDbGlwIHRoZSBjaGFuZ2UgdG8gdGhlIHNpemUgb2YgdGhpcyBkb2NcbiAgICBpZiAoY2hhbmdlLmZyb20ubGluZSA8IGRvYy5maXJzdCkge1xuICAgICAgdmFyIHNoaWZ0ID0gY2hhbmdlLnRleHQubGVuZ3RoIC0gMSAtIChkb2MuZmlyc3QgLSBjaGFuZ2UuZnJvbS5saW5lKTtcbiAgICAgIHNoaWZ0RG9jKGRvYywgc2hpZnQpO1xuICAgICAgY2hhbmdlID0ge2Zyb206IFBvcyhkb2MuZmlyc3QsIDApLCB0bzogUG9zKGNoYW5nZS50by5saW5lICsgc2hpZnQsIGNoYW5nZS50by5jaCksXG4gICAgICAgICAgICAgICAgdGV4dDogW2xzdChjaGFuZ2UudGV4dCldLCBvcmlnaW46IGNoYW5nZS5vcmlnaW59O1xuICAgIH1cbiAgICB2YXIgbGFzdCA9IGRvYy5sYXN0TGluZSgpO1xuICAgIGlmIChjaGFuZ2UudG8ubGluZSA+IGxhc3QpIHtcbiAgICAgIGNoYW5nZSA9IHtmcm9tOiBjaGFuZ2UuZnJvbSwgdG86IFBvcyhsYXN0LCBnZXRMaW5lKGRvYywgbGFzdCkudGV4dC5sZW5ndGgpLFxuICAgICAgICAgICAgICAgIHRleHQ6IFtjaGFuZ2UudGV4dFswXV0sIG9yaWdpbjogY2hhbmdlLm9yaWdpbn07XG4gICAgfVxuXG4gICAgY2hhbmdlLnJlbW92ZWQgPSBnZXRCZXR3ZWVuKGRvYywgY2hhbmdlLmZyb20sIGNoYW5nZS50byk7XG5cbiAgICBpZiAoIXNlbEFmdGVyKSB7IHNlbEFmdGVyID0gY29tcHV0ZVNlbEFmdGVyQ2hhbmdlKGRvYywgY2hhbmdlKTsgfVxuICAgIGlmIChkb2MuY20pIHsgbWFrZUNoYW5nZVNpbmdsZURvY0luRWRpdG9yKGRvYy5jbSwgY2hhbmdlLCBzcGFucyk7IH1cbiAgICBlbHNlIHsgdXBkYXRlRG9jKGRvYywgY2hhbmdlLCBzcGFucyk7IH1cbiAgICBzZXRTZWxlY3Rpb25Ob1VuZG8oZG9jLCBzZWxBZnRlciwgc2VsX2RvbnRTY3JvbGwpO1xuXG4gICAgaWYgKGRvYy5jYW50RWRpdCAmJiBza2lwQXRvbWljKGRvYywgUG9zKGRvYy5maXJzdExpbmUoKSwgMCkpKVxuICAgICAgeyBkb2MuY2FudEVkaXQgPSBmYWxzZTsgfVxuICB9XG5cbiAgLy8gSGFuZGxlIHRoZSBpbnRlcmFjdGlvbiBvZiBhIGNoYW5nZSB0byBhIGRvY3VtZW50IHdpdGggdGhlIGVkaXRvclxuICAvLyB0aGF0IHRoaXMgZG9jdW1lbnQgaXMgcGFydCBvZi5cbiAgZnVuY3Rpb24gbWFrZUNoYW5nZVNpbmdsZURvY0luRWRpdG9yKGNtLCBjaGFuZ2UsIHNwYW5zKSB7XG4gICAgdmFyIGRvYyA9IGNtLmRvYywgZGlzcGxheSA9IGNtLmRpc3BsYXksIGZyb20gPSBjaGFuZ2UuZnJvbSwgdG8gPSBjaGFuZ2UudG87XG5cbiAgICB2YXIgcmVjb21wdXRlTWF4TGVuZ3RoID0gZmFsc2UsIGNoZWNrV2lkdGhTdGFydCA9IGZyb20ubGluZTtcbiAgICBpZiAoIWNtLm9wdGlvbnMubGluZVdyYXBwaW5nKSB7XG4gICAgICBjaGVja1dpZHRoU3RhcnQgPSBsaW5lTm8odmlzdWFsTGluZShnZXRMaW5lKGRvYywgZnJvbS5saW5lKSkpO1xuICAgICAgZG9jLml0ZXIoY2hlY2tXaWR0aFN0YXJ0LCB0by5saW5lICsgMSwgZnVuY3Rpb24gKGxpbmUpIHtcbiAgICAgICAgaWYgKGxpbmUgPT0gZGlzcGxheS5tYXhMaW5lKSB7XG4gICAgICAgICAgcmVjb21wdXRlTWF4TGVuZ3RoID0gdHJ1ZTtcbiAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAoZG9jLnNlbC5jb250YWlucyhjaGFuZ2UuZnJvbSwgY2hhbmdlLnRvKSA+IC0xKVxuICAgICAgeyBzaWduYWxDdXJzb3JBY3Rpdml0eShjbSk7IH1cblxuICAgIHVwZGF0ZURvYyhkb2MsIGNoYW5nZSwgc3BhbnMsIGVzdGltYXRlSGVpZ2h0KGNtKSk7XG5cbiAgICBpZiAoIWNtLm9wdGlvbnMubGluZVdyYXBwaW5nKSB7XG4gICAgICBkb2MuaXRlcihjaGVja1dpZHRoU3RhcnQsIGZyb20ubGluZSArIGNoYW5nZS50ZXh0Lmxlbmd0aCwgZnVuY3Rpb24gKGxpbmUpIHtcbiAgICAgICAgdmFyIGxlbiA9IGxpbmVMZW5ndGgobGluZSk7XG4gICAgICAgIGlmIChsZW4gPiBkaXNwbGF5Lm1heExpbmVMZW5ndGgpIHtcbiAgICAgICAgICBkaXNwbGF5Lm1heExpbmUgPSBsaW5lO1xuICAgICAgICAgIGRpc3BsYXkubWF4TGluZUxlbmd0aCA9IGxlbjtcbiAgICAgICAgICBkaXNwbGF5Lm1heExpbmVDaGFuZ2VkID0gdHJ1ZTtcbiAgICAgICAgICByZWNvbXB1dGVNYXhMZW5ndGggPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBpZiAocmVjb21wdXRlTWF4TGVuZ3RoKSB7IGNtLmN1ck9wLnVwZGF0ZU1heExpbmUgPSB0cnVlOyB9XG4gICAgfVxuXG4gICAgcmV0cmVhdEZyb250aWVyKGRvYywgZnJvbS5saW5lKTtcbiAgICBzdGFydFdvcmtlcihjbSwgNDAwKTtcblxuICAgIHZhciBsZW5kaWZmID0gY2hhbmdlLnRleHQubGVuZ3RoIC0gKHRvLmxpbmUgLSBmcm9tLmxpbmUpIC0gMTtcbiAgICAvLyBSZW1lbWJlciB0aGF0IHRoZXNlIGxpbmVzIGNoYW5nZWQsIGZvciB1cGRhdGluZyB0aGUgZGlzcGxheVxuICAgIGlmIChjaGFuZ2UuZnVsbClcbiAgICAgIHsgcmVnQ2hhbmdlKGNtKTsgfVxuICAgIGVsc2UgaWYgKGZyb20ubGluZSA9PSB0by5saW5lICYmIGNoYW5nZS50ZXh0Lmxlbmd0aCA9PSAxICYmICFpc1dob2xlTGluZVVwZGF0ZShjbS5kb2MsIGNoYW5nZSkpXG4gICAgICB7IHJlZ0xpbmVDaGFuZ2UoY20sIGZyb20ubGluZSwgXCJ0ZXh0XCIpOyB9XG4gICAgZWxzZVxuICAgICAgeyByZWdDaGFuZ2UoY20sIGZyb20ubGluZSwgdG8ubGluZSArIDEsIGxlbmRpZmYpOyB9XG5cbiAgICB2YXIgY2hhbmdlc0hhbmRsZXIgPSBoYXNIYW5kbGVyKGNtLCBcImNoYW5nZXNcIiksIGNoYW5nZUhhbmRsZXIgPSBoYXNIYW5kbGVyKGNtLCBcImNoYW5nZVwiKTtcbiAgICBpZiAoY2hhbmdlSGFuZGxlciB8fCBjaGFuZ2VzSGFuZGxlcikge1xuICAgICAgdmFyIG9iaiA9IHtcbiAgICAgICAgZnJvbTogZnJvbSwgdG86IHRvLFxuICAgICAgICB0ZXh0OiBjaGFuZ2UudGV4dCxcbiAgICAgICAgcmVtb3ZlZDogY2hhbmdlLnJlbW92ZWQsXG4gICAgICAgIG9yaWdpbjogY2hhbmdlLm9yaWdpblxuICAgICAgfTtcbiAgICAgIGlmIChjaGFuZ2VIYW5kbGVyKSB7IHNpZ25hbExhdGVyKGNtLCBcImNoYW5nZVwiLCBjbSwgb2JqKTsgfVxuICAgICAgaWYgKGNoYW5nZXNIYW5kbGVyKSB7IChjbS5jdXJPcC5jaGFuZ2VPYmpzIHx8IChjbS5jdXJPcC5jaGFuZ2VPYmpzID0gW10pKS5wdXNoKG9iaik7IH1cbiAgICB9XG4gICAgY20uZGlzcGxheS5zZWxGb3JDb250ZXh0TWVudSA9IG51bGw7XG4gIH1cblxuICBmdW5jdGlvbiByZXBsYWNlUmFuZ2UoZG9jLCBjb2RlLCBmcm9tLCB0bywgb3JpZ2luKSB7XG4gICAgdmFyIGFzc2lnbjtcblxuICAgIGlmICghdG8pIHsgdG8gPSBmcm9tOyB9XG4gICAgaWYgKGNtcCh0bywgZnJvbSkgPCAwKSB7IChhc3NpZ24gPSBbdG8sIGZyb21dLCBmcm9tID0gYXNzaWduWzBdLCB0byA9IGFzc2lnblsxXSk7IH1cbiAgICBpZiAodHlwZW9mIGNvZGUgPT0gXCJzdHJpbmdcIikgeyBjb2RlID0gZG9jLnNwbGl0TGluZXMoY29kZSk7IH1cbiAgICBtYWtlQ2hhbmdlKGRvYywge2Zyb206IGZyb20sIHRvOiB0bywgdGV4dDogY29kZSwgb3JpZ2luOiBvcmlnaW59KTtcbiAgfVxuXG4gIC8vIFJlYmFzaW5nL3Jlc2V0dGluZyBoaXN0b3J5IHRvIGRlYWwgd2l0aCBleHRlcm5hbGx5LXNvdXJjZWQgY2hhbmdlc1xuXG4gIGZ1bmN0aW9uIHJlYmFzZUhpc3RTZWxTaW5nbGUocG9zLCBmcm9tLCB0bywgZGlmZikge1xuICAgIGlmICh0byA8IHBvcy5saW5lKSB7XG4gICAgICBwb3MubGluZSArPSBkaWZmO1xuICAgIH0gZWxzZSBpZiAoZnJvbSA8IHBvcy5saW5lKSB7XG4gICAgICBwb3MubGluZSA9IGZyb207XG4gICAgICBwb3MuY2ggPSAwO1xuICAgIH1cbiAgfVxuXG4gIC8vIFRyaWVzIHRvIHJlYmFzZSBhbiBhcnJheSBvZiBoaXN0b3J5IGV2ZW50cyBnaXZlbiBhIGNoYW5nZSBpbiB0aGVcbiAgLy8gZG9jdW1lbnQuIElmIHRoZSBjaGFuZ2UgdG91Y2hlcyB0aGUgc2FtZSBsaW5lcyBhcyB0aGUgZXZlbnQsIHRoZVxuICAvLyBldmVudCwgYW5kIGV2ZXJ5dGhpbmcgJ2JlaGluZCcgaXQsIGlzIGRpc2NhcmRlZC4gSWYgdGhlIGNoYW5nZSBpc1xuICAvLyBiZWZvcmUgdGhlIGV2ZW50LCB0aGUgZXZlbnQncyBwb3NpdGlvbnMgYXJlIHVwZGF0ZWQuIFVzZXMgYVxuICAvLyBjb3B5LW9uLXdyaXRlIHNjaGVtZSBmb3IgdGhlIHBvc2l0aW9ucywgdG8gYXZvaWQgaGF2aW5nIHRvXG4gIC8vIHJlYWxsb2NhdGUgdGhlbSBhbGwgb24gZXZlcnkgcmViYXNlLCBidXQgYWxzbyBhdm9pZCBwcm9ibGVtcyB3aXRoXG4gIC8vIHNoYXJlZCBwb3NpdGlvbiBvYmplY3RzIGJlaW5nIHVuc2FmZWx5IHVwZGF0ZWQuXG4gIGZ1bmN0aW9uIHJlYmFzZUhpc3RBcnJheShhcnJheSwgZnJvbSwgdG8sIGRpZmYpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFycmF5Lmxlbmd0aDsgKytpKSB7XG4gICAgICB2YXIgc3ViID0gYXJyYXlbaV0sIG9rID0gdHJ1ZTtcbiAgICAgIGlmIChzdWIucmFuZ2VzKSB7XG4gICAgICAgIGlmICghc3ViLmNvcGllZCkgeyBzdWIgPSBhcnJheVtpXSA9IHN1Yi5kZWVwQ29weSgpOyBzdWIuY29waWVkID0gdHJ1ZTsgfVxuICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHN1Yi5yYW5nZXMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICByZWJhc2VIaXN0U2VsU2luZ2xlKHN1Yi5yYW5nZXNbal0uYW5jaG9yLCBmcm9tLCB0bywgZGlmZik7XG4gICAgICAgICAgcmViYXNlSGlzdFNlbFNpbmdsZShzdWIucmFuZ2VzW2pdLmhlYWQsIGZyb20sIHRvLCBkaWZmKTtcbiAgICAgICAgfVxuICAgICAgICBjb250aW51ZVxuICAgICAgfVxuICAgICAgZm9yICh2YXIgaiQxID0gMDsgaiQxIDwgc3ViLmNoYW5nZXMubGVuZ3RoOyArK2okMSkge1xuICAgICAgICB2YXIgY3VyID0gc3ViLmNoYW5nZXNbaiQxXTtcbiAgICAgICAgaWYgKHRvIDwgY3VyLmZyb20ubGluZSkge1xuICAgICAgICAgIGN1ci5mcm9tID0gUG9zKGN1ci5mcm9tLmxpbmUgKyBkaWZmLCBjdXIuZnJvbS5jaCk7XG4gICAgICAgICAgY3VyLnRvID0gUG9zKGN1ci50by5saW5lICsgZGlmZiwgY3VyLnRvLmNoKTtcbiAgICAgICAgfSBlbHNlIGlmIChmcm9tIDw9IGN1ci50by5saW5lKSB7XG4gICAgICAgICAgb2sgPSBmYWxzZTtcbiAgICAgICAgICBicmVha1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoIW9rKSB7XG4gICAgICAgIGFycmF5LnNwbGljZSgwLCBpICsgMSk7XG4gICAgICAgIGkgPSAwO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHJlYmFzZUhpc3QoaGlzdCwgY2hhbmdlKSB7XG4gICAgdmFyIGZyb20gPSBjaGFuZ2UuZnJvbS5saW5lLCB0byA9IGNoYW5nZS50by5saW5lLCBkaWZmID0gY2hhbmdlLnRleHQubGVuZ3RoIC0gKHRvIC0gZnJvbSkgLSAxO1xuICAgIHJlYmFzZUhpc3RBcnJheShoaXN0LmRvbmUsIGZyb20sIHRvLCBkaWZmKTtcbiAgICByZWJhc2VIaXN0QXJyYXkoaGlzdC51bmRvbmUsIGZyb20sIHRvLCBkaWZmKTtcbiAgfVxuXG4gIC8vIFV0aWxpdHkgZm9yIGFwcGx5aW5nIGEgY2hhbmdlIHRvIGEgbGluZSBieSBoYW5kbGUgb3IgbnVtYmVyLFxuICAvLyByZXR1cm5pbmcgdGhlIG51bWJlciBhbmQgb3B0aW9uYWxseSByZWdpc3RlcmluZyB0aGUgbGluZSBhc1xuICAvLyBjaGFuZ2VkLlxuICBmdW5jdGlvbiBjaGFuZ2VMaW5lKGRvYywgaGFuZGxlLCBjaGFuZ2VUeXBlLCBvcCkge1xuICAgIHZhciBubyA9IGhhbmRsZSwgbGluZSA9IGhhbmRsZTtcbiAgICBpZiAodHlwZW9mIGhhbmRsZSA9PSBcIm51bWJlclwiKSB7IGxpbmUgPSBnZXRMaW5lKGRvYywgY2xpcExpbmUoZG9jLCBoYW5kbGUpKTsgfVxuICAgIGVsc2UgeyBubyA9IGxpbmVObyhoYW5kbGUpOyB9XG4gICAgaWYgKG5vID09IG51bGwpIHsgcmV0dXJuIG51bGwgfVxuICAgIGlmIChvcChsaW5lLCBubykgJiYgZG9jLmNtKSB7IHJlZ0xpbmVDaGFuZ2UoZG9jLmNtLCBubywgY2hhbmdlVHlwZSk7IH1cbiAgICByZXR1cm4gbGluZVxuICB9XG5cbiAgLy8gVGhlIGRvY3VtZW50IGlzIHJlcHJlc2VudGVkIGFzIGEgQlRyZWUgY29uc2lzdGluZyBvZiBsZWF2ZXMsIHdpdGhcbiAgLy8gY2h1bmsgb2YgbGluZXMgaW4gdGhlbSwgYW5kIGJyYW5jaGVzLCB3aXRoIHVwIHRvIHRlbiBsZWF2ZXMgb3JcbiAgLy8gb3RoZXIgYnJhbmNoIG5vZGVzIGJlbG93IHRoZW0uIFRoZSB0b3Agbm9kZSBpcyBhbHdheXMgYSBicmFuY2hcbiAgLy8gbm9kZSwgYW5kIGlzIHRoZSBkb2N1bWVudCBvYmplY3QgaXRzZWxmIChtZWFuaW5nIGl0IGhhc1xuICAvLyBhZGRpdGlvbmFsIG1ldGhvZHMgYW5kIHByb3BlcnRpZXMpLlxuICAvL1xuICAvLyBBbGwgbm9kZXMgaGF2ZSBwYXJlbnQgbGlua3MuIFRoZSB0cmVlIGlzIHVzZWQgYm90aCB0byBnbyBmcm9tXG4gIC8vIGxpbmUgbnVtYmVycyB0byBsaW5lIG9iamVjdHMsIGFuZCB0byBnbyBmcm9tIG9iamVjdHMgdG8gbnVtYmVycy5cbiAgLy8gSXQgYWxzbyBpbmRleGVzIGJ5IGhlaWdodCwgYW5kIGlzIHVzZWQgdG8gY29udmVydCBiZXR3ZWVuIGhlaWdodFxuICAvLyBhbmQgbGluZSBvYmplY3QsIGFuZCB0byBmaW5kIHRoZSB0b3RhbCBoZWlnaHQgb2YgdGhlIGRvY3VtZW50LlxuICAvL1xuICAvLyBTZWUgYWxzbyBodHRwOi8vbWFyaWpuaGF2ZXJiZWtlLm5sL2Jsb2cvY29kZW1pcnJvci1saW5lLXRyZWUuaHRtbFxuXG4gIGZ1bmN0aW9uIExlYWZDaHVuayhsaW5lcykge1xuICAgIHRoaXMubGluZXMgPSBsaW5lcztcbiAgICB0aGlzLnBhcmVudCA9IG51bGw7XG4gICAgdmFyIGhlaWdodCA9IDA7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaW5lcy5sZW5ndGg7ICsraSkge1xuICAgICAgbGluZXNbaV0ucGFyZW50ID0gdGhpcztcbiAgICAgIGhlaWdodCArPSBsaW5lc1tpXS5oZWlnaHQ7XG4gICAgfVxuICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0O1xuICB9XG5cbiAgTGVhZkNodW5rLnByb3RvdHlwZSA9IHtcbiAgICBjaHVua1NpemU6IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpcy5saW5lcy5sZW5ndGggfSxcblxuICAgIC8vIFJlbW92ZSB0aGUgbiBsaW5lcyBhdCBvZmZzZXQgJ2F0Jy5cbiAgICByZW1vdmVJbm5lcjogZnVuY3Rpb24oYXQsIG4pIHtcbiAgICAgIGZvciAodmFyIGkgPSBhdCwgZSA9IGF0ICsgbjsgaSA8IGU7ICsraSkge1xuICAgICAgICB2YXIgbGluZSA9IHRoaXMubGluZXNbaV07XG4gICAgICAgIHRoaXMuaGVpZ2h0IC09IGxpbmUuaGVpZ2h0O1xuICAgICAgICBjbGVhblVwTGluZShsaW5lKTtcbiAgICAgICAgc2lnbmFsTGF0ZXIobGluZSwgXCJkZWxldGVcIik7XG4gICAgICB9XG4gICAgICB0aGlzLmxpbmVzLnNwbGljZShhdCwgbik7XG4gICAgfSxcblxuICAgIC8vIEhlbHBlciB1c2VkIHRvIGNvbGxhcHNlIGEgc21hbGwgYnJhbmNoIGludG8gYSBzaW5nbGUgbGVhZi5cbiAgICBjb2xsYXBzZTogZnVuY3Rpb24obGluZXMpIHtcbiAgICAgIGxpbmVzLnB1c2guYXBwbHkobGluZXMsIHRoaXMubGluZXMpO1xuICAgIH0sXG5cbiAgICAvLyBJbnNlcnQgdGhlIGdpdmVuIGFycmF5IG9mIGxpbmVzIGF0IG9mZnNldCAnYXQnLCBjb3VudCB0aGVtIGFzXG4gICAgLy8gaGF2aW5nIHRoZSBnaXZlbiBoZWlnaHQuXG4gICAgaW5zZXJ0SW5uZXI6IGZ1bmN0aW9uKGF0LCBsaW5lcywgaGVpZ2h0KSB7XG4gICAgICB0aGlzLmhlaWdodCArPSBoZWlnaHQ7XG4gICAgICB0aGlzLmxpbmVzID0gdGhpcy5saW5lcy5zbGljZSgwLCBhdCkuY29uY2F0KGxpbmVzKS5jb25jYXQodGhpcy5saW5lcy5zbGljZShhdCkpO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaW5lcy5sZW5ndGg7ICsraSkgeyBsaW5lc1tpXS5wYXJlbnQgPSB0aGlzOyB9XG4gICAgfSxcblxuICAgIC8vIFVzZWQgdG8gaXRlcmF0ZSBvdmVyIGEgcGFydCBvZiB0aGUgdHJlZS5cbiAgICBpdGVyTjogZnVuY3Rpb24oYXQsIG4sIG9wKSB7XG4gICAgICBmb3IgKHZhciBlID0gYXQgKyBuOyBhdCA8IGU7ICsrYXQpXG4gICAgICAgIHsgaWYgKG9wKHRoaXMubGluZXNbYXRdKSkgeyByZXR1cm4gdHJ1ZSB9IH1cbiAgICB9XG4gIH07XG5cbiAgZnVuY3Rpb24gQnJhbmNoQ2h1bmsoY2hpbGRyZW4pIHtcbiAgICB0aGlzLmNoaWxkcmVuID0gY2hpbGRyZW47XG4gICAgdmFyIHNpemUgPSAwLCBoZWlnaHQgPSAwO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyArK2kpIHtcbiAgICAgIHZhciBjaCA9IGNoaWxkcmVuW2ldO1xuICAgICAgc2l6ZSArPSBjaC5jaHVua1NpemUoKTsgaGVpZ2h0ICs9IGNoLmhlaWdodDtcbiAgICAgIGNoLnBhcmVudCA9IHRoaXM7XG4gICAgfVxuICAgIHRoaXMuc2l6ZSA9IHNpemU7XG4gICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgdGhpcy5wYXJlbnQgPSBudWxsO1xuICB9XG5cbiAgQnJhbmNoQ2h1bmsucHJvdG90eXBlID0ge1xuICAgIGNodW5rU2l6ZTogZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzLnNpemUgfSxcblxuICAgIHJlbW92ZUlubmVyOiBmdW5jdGlvbihhdCwgbikge1xuICAgICAgdGhpcy5zaXplIC09IG47XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuY2hpbGRyZW4ubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgdmFyIGNoaWxkID0gdGhpcy5jaGlsZHJlbltpXSwgc3ogPSBjaGlsZC5jaHVua1NpemUoKTtcbiAgICAgICAgaWYgKGF0IDwgc3opIHtcbiAgICAgICAgICB2YXIgcm0gPSBNYXRoLm1pbihuLCBzeiAtIGF0KSwgb2xkSGVpZ2h0ID0gY2hpbGQuaGVpZ2h0O1xuICAgICAgICAgIGNoaWxkLnJlbW92ZUlubmVyKGF0LCBybSk7XG4gICAgICAgICAgdGhpcy5oZWlnaHQgLT0gb2xkSGVpZ2h0IC0gY2hpbGQuaGVpZ2h0O1xuICAgICAgICAgIGlmIChzeiA9PSBybSkgeyB0aGlzLmNoaWxkcmVuLnNwbGljZShpLS0sIDEpOyBjaGlsZC5wYXJlbnQgPSBudWxsOyB9XG4gICAgICAgICAgaWYgKChuIC09IHJtKSA9PSAwKSB7IGJyZWFrIH1cbiAgICAgICAgICBhdCA9IDA7XG4gICAgICAgIH0gZWxzZSB7IGF0IC09IHN6OyB9XG4gICAgICB9XG4gICAgICAvLyBJZiB0aGUgcmVzdWx0IGlzIHNtYWxsZXIgdGhhbiAyNSBsaW5lcywgZW5zdXJlIHRoYXQgaXQgaXMgYVxuICAgICAgLy8gc2luZ2xlIGxlYWYgbm9kZS5cbiAgICAgIGlmICh0aGlzLnNpemUgLSBuIDwgMjUgJiZcbiAgICAgICAgICAodGhpcy5jaGlsZHJlbi5sZW5ndGggPiAxIHx8ICEodGhpcy5jaGlsZHJlblswXSBpbnN0YW5jZW9mIExlYWZDaHVuaykpKSB7XG4gICAgICAgIHZhciBsaW5lcyA9IFtdO1xuICAgICAgICB0aGlzLmNvbGxhcHNlKGxpbmVzKTtcbiAgICAgICAgdGhpcy5jaGlsZHJlbiA9IFtuZXcgTGVhZkNodW5rKGxpbmVzKV07XG4gICAgICAgIHRoaXMuY2hpbGRyZW5bMF0ucGFyZW50ID0gdGhpcztcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgY29sbGFwc2U6IGZ1bmN0aW9uKGxpbmVzKSB7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuY2hpbGRyZW4ubGVuZ3RoOyArK2kpIHsgdGhpcy5jaGlsZHJlbltpXS5jb2xsYXBzZShsaW5lcyk7IH1cbiAgICB9LFxuXG4gICAgaW5zZXJ0SW5uZXI6IGZ1bmN0aW9uKGF0LCBsaW5lcywgaGVpZ2h0KSB7XG4gICAgICB0aGlzLnNpemUgKz0gbGluZXMubGVuZ3RoO1xuICAgICAgdGhpcy5oZWlnaHQgKz0gaGVpZ2h0O1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmNoaWxkcmVuLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIHZhciBjaGlsZCA9IHRoaXMuY2hpbGRyZW5baV0sIHN6ID0gY2hpbGQuY2h1bmtTaXplKCk7XG4gICAgICAgIGlmIChhdCA8PSBzeikge1xuICAgICAgICAgIGNoaWxkLmluc2VydElubmVyKGF0LCBsaW5lcywgaGVpZ2h0KTtcbiAgICAgICAgICBpZiAoY2hpbGQubGluZXMgJiYgY2hpbGQubGluZXMubGVuZ3RoID4gNTApIHtcbiAgICAgICAgICAgIC8vIFRvIGF2b2lkIG1lbW9yeSB0aHJhc2hpbmcgd2hlbiBjaGlsZC5saW5lcyBpcyBodWdlIChlLmcuIGZpcnN0IHZpZXcgb2YgYSBsYXJnZSBmaWxlKSwgaXQncyBuZXZlciBzcGxpY2VkLlxuICAgICAgICAgICAgLy8gSW5zdGVhZCwgc21hbGwgc2xpY2VzIGFyZSB0YWtlbi4gVGhleSdyZSB0YWtlbiBpbiBvcmRlciBiZWNhdXNlIHNlcXVlbnRpYWwgbWVtb3J5IGFjY2Vzc2VzIGFyZSBmYXN0ZXN0LlxuICAgICAgICAgICAgdmFyIHJlbWFpbmluZyA9IGNoaWxkLmxpbmVzLmxlbmd0aCAlIDI1ICsgMjU7XG4gICAgICAgICAgICBmb3IgKHZhciBwb3MgPSByZW1haW5pbmc7IHBvcyA8IGNoaWxkLmxpbmVzLmxlbmd0aDspIHtcbiAgICAgICAgICAgICAgdmFyIGxlYWYgPSBuZXcgTGVhZkNodW5rKGNoaWxkLmxpbmVzLnNsaWNlKHBvcywgcG9zICs9IDI1KSk7XG4gICAgICAgICAgICAgIGNoaWxkLmhlaWdodCAtPSBsZWFmLmhlaWdodDtcbiAgICAgICAgICAgICAgdGhpcy5jaGlsZHJlbi5zcGxpY2UoKytpLCAwLCBsZWFmKTtcbiAgICAgICAgICAgICAgbGVhZi5wYXJlbnQgPSB0aGlzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2hpbGQubGluZXMgPSBjaGlsZC5saW5lcy5zbGljZSgwLCByZW1haW5pbmcpO1xuICAgICAgICAgICAgdGhpcy5tYXliZVNwaWxsKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cbiAgICAgICAgYXQgLT0gc3o7XG4gICAgICB9XG4gICAgfSxcblxuICAgIC8vIFdoZW4gYSBub2RlIGhhcyBncm93biwgY2hlY2sgd2hldGhlciBpdCBzaG91bGQgYmUgc3BsaXQuXG4gICAgbWF5YmVTcGlsbDogZnVuY3Rpb24oKSB7XG4gICAgICBpZiAodGhpcy5jaGlsZHJlbi5sZW5ndGggPD0gMTApIHsgcmV0dXJuIH1cbiAgICAgIHZhciBtZSA9IHRoaXM7XG4gICAgICBkbyB7XG4gICAgICAgIHZhciBzcGlsbGVkID0gbWUuY2hpbGRyZW4uc3BsaWNlKG1lLmNoaWxkcmVuLmxlbmd0aCAtIDUsIDUpO1xuICAgICAgICB2YXIgc2libGluZyA9IG5ldyBCcmFuY2hDaHVuayhzcGlsbGVkKTtcbiAgICAgICAgaWYgKCFtZS5wYXJlbnQpIHsgLy8gQmVjb21lIHRoZSBwYXJlbnQgbm9kZVxuICAgICAgICAgIHZhciBjb3B5ID0gbmV3IEJyYW5jaENodW5rKG1lLmNoaWxkcmVuKTtcbiAgICAgICAgICBjb3B5LnBhcmVudCA9IG1lO1xuICAgICAgICAgIG1lLmNoaWxkcmVuID0gW2NvcHksIHNpYmxpbmddO1xuICAgICAgICAgIG1lID0gY29weTtcbiAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG1lLnNpemUgLT0gc2libGluZy5zaXplO1xuICAgICAgICAgIG1lLmhlaWdodCAtPSBzaWJsaW5nLmhlaWdodDtcbiAgICAgICAgICB2YXIgbXlJbmRleCA9IGluZGV4T2YobWUucGFyZW50LmNoaWxkcmVuLCBtZSk7XG4gICAgICAgICAgbWUucGFyZW50LmNoaWxkcmVuLnNwbGljZShteUluZGV4ICsgMSwgMCwgc2libGluZyk7XG4gICAgICAgIH1cbiAgICAgICAgc2libGluZy5wYXJlbnQgPSBtZS5wYXJlbnQ7XG4gICAgICB9IHdoaWxlIChtZS5jaGlsZHJlbi5sZW5ndGggPiAxMClcbiAgICAgIG1lLnBhcmVudC5tYXliZVNwaWxsKCk7XG4gICAgfSxcblxuICAgIGl0ZXJOOiBmdW5jdGlvbihhdCwgbiwgb3ApIHtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5jaGlsZHJlbi5sZW5ndGg7ICsraSkge1xuICAgICAgICB2YXIgY2hpbGQgPSB0aGlzLmNoaWxkcmVuW2ldLCBzeiA9IGNoaWxkLmNodW5rU2l6ZSgpO1xuICAgICAgICBpZiAoYXQgPCBzeikge1xuICAgICAgICAgIHZhciB1c2VkID0gTWF0aC5taW4obiwgc3ogLSBhdCk7XG4gICAgICAgICAgaWYgKGNoaWxkLml0ZXJOKGF0LCB1c2VkLCBvcCkpIHsgcmV0dXJuIHRydWUgfVxuICAgICAgICAgIGlmICgobiAtPSB1c2VkKSA9PSAwKSB7IGJyZWFrIH1cbiAgICAgICAgICBhdCA9IDA7XG4gICAgICAgIH0gZWxzZSB7IGF0IC09IHN6OyB9XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIC8vIExpbmUgd2lkZ2V0cyBhcmUgYmxvY2sgZWxlbWVudHMgZGlzcGxheWVkIGFib3ZlIG9yIGJlbG93IGEgbGluZS5cblxuICB2YXIgTGluZVdpZGdldCA9IGZ1bmN0aW9uKGRvYywgbm9kZSwgb3B0aW9ucykge1xuICAgIGlmIChvcHRpb25zKSB7IGZvciAodmFyIG9wdCBpbiBvcHRpb25zKSB7IGlmIChvcHRpb25zLmhhc093blByb3BlcnR5KG9wdCkpXG4gICAgICB7IHRoaXNbb3B0XSA9IG9wdGlvbnNbb3B0XTsgfSB9IH1cbiAgICB0aGlzLmRvYyA9IGRvYztcbiAgICB0aGlzLm5vZGUgPSBub2RlO1xuICB9O1xuXG4gIExpbmVXaWRnZXQucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBjbSA9IHRoaXMuZG9jLmNtLCB3cyA9IHRoaXMubGluZS53aWRnZXRzLCBsaW5lID0gdGhpcy5saW5lLCBubyA9IGxpbmVObyhsaW5lKTtcbiAgICBpZiAobm8gPT0gbnVsbCB8fCAhd3MpIHsgcmV0dXJuIH1cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHdzLmxlbmd0aDsgKytpKSB7IGlmICh3c1tpXSA9PSB0aGlzKSB7IHdzLnNwbGljZShpLS0sIDEpOyB9IH1cbiAgICBpZiAoIXdzLmxlbmd0aCkgeyBsaW5lLndpZGdldHMgPSBudWxsOyB9XG4gICAgdmFyIGhlaWdodCA9IHdpZGdldEhlaWdodCh0aGlzKTtcbiAgICB1cGRhdGVMaW5lSGVpZ2h0KGxpbmUsIE1hdGgubWF4KDAsIGxpbmUuaGVpZ2h0IC0gaGVpZ2h0KSk7XG4gICAgaWYgKGNtKSB7XG4gICAgICBydW5Jbk9wKGNtLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGFkanVzdFNjcm9sbFdoZW5BYm92ZVZpc2libGUoY20sIGxpbmUsIC1oZWlnaHQpO1xuICAgICAgICByZWdMaW5lQ2hhbmdlKGNtLCBubywgXCJ3aWRnZXRcIik7XG4gICAgICB9KTtcbiAgICAgIHNpZ25hbExhdGVyKGNtLCBcImxpbmVXaWRnZXRDbGVhcmVkXCIsIGNtLCB0aGlzLCBubyk7XG4gICAgfVxuICB9O1xuXG4gIExpbmVXaWRnZXQucHJvdG90eXBlLmNoYW5nZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgdGhpcyQxID0gdGhpcztcblxuICAgIHZhciBvbGRIID0gdGhpcy5oZWlnaHQsIGNtID0gdGhpcy5kb2MuY20sIGxpbmUgPSB0aGlzLmxpbmU7XG4gICAgdGhpcy5oZWlnaHQgPSBudWxsO1xuICAgIHZhciBkaWZmID0gd2lkZ2V0SGVpZ2h0KHRoaXMpIC0gb2xkSDtcbiAgICBpZiAoIWRpZmYpIHsgcmV0dXJuIH1cbiAgICBpZiAoIWxpbmVJc0hpZGRlbih0aGlzLmRvYywgbGluZSkpIHsgdXBkYXRlTGluZUhlaWdodChsaW5lLCBsaW5lLmhlaWdodCArIGRpZmYpOyB9XG4gICAgaWYgKGNtKSB7XG4gICAgICBydW5Jbk9wKGNtLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNtLmN1ck9wLmZvcmNlVXBkYXRlID0gdHJ1ZTtcbiAgICAgICAgYWRqdXN0U2Nyb2xsV2hlbkFib3ZlVmlzaWJsZShjbSwgbGluZSwgZGlmZik7XG4gICAgICAgIHNpZ25hbExhdGVyKGNtLCBcImxpbmVXaWRnZXRDaGFuZ2VkXCIsIGNtLCB0aGlzJDEsIGxpbmVObyhsaW5lKSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG4gIGV2ZW50TWl4aW4oTGluZVdpZGdldCk7XG5cbiAgZnVuY3Rpb24gYWRqdXN0U2Nyb2xsV2hlbkFib3ZlVmlzaWJsZShjbSwgbGluZSwgZGlmZikge1xuICAgIGlmIChoZWlnaHRBdExpbmUobGluZSkgPCAoKGNtLmN1ck9wICYmIGNtLmN1ck9wLnNjcm9sbFRvcCkgfHwgY20uZG9jLnNjcm9sbFRvcCkpXG4gICAgICB7IGFkZFRvU2Nyb2xsVG9wKGNtLCBkaWZmKTsgfVxuICB9XG5cbiAgZnVuY3Rpb24gYWRkTGluZVdpZGdldChkb2MsIGhhbmRsZSwgbm9kZSwgb3B0aW9ucykge1xuICAgIHZhciB3aWRnZXQgPSBuZXcgTGluZVdpZGdldChkb2MsIG5vZGUsIG9wdGlvbnMpO1xuICAgIHZhciBjbSA9IGRvYy5jbTtcbiAgICBpZiAoY20gJiYgd2lkZ2V0Lm5vSFNjcm9sbCkgeyBjbS5kaXNwbGF5LmFsaWduV2lkZ2V0cyA9IHRydWU7IH1cbiAgICBjaGFuZ2VMaW5lKGRvYywgaGFuZGxlLCBcIndpZGdldFwiLCBmdW5jdGlvbiAobGluZSkge1xuICAgICAgdmFyIHdpZGdldHMgPSBsaW5lLndpZGdldHMgfHwgKGxpbmUud2lkZ2V0cyA9IFtdKTtcbiAgICAgIGlmICh3aWRnZXQuaW5zZXJ0QXQgPT0gbnVsbCkgeyB3aWRnZXRzLnB1c2god2lkZ2V0KTsgfVxuICAgICAgZWxzZSB7IHdpZGdldHMuc3BsaWNlKE1hdGgubWluKHdpZGdldHMubGVuZ3RoLCBNYXRoLm1heCgwLCB3aWRnZXQuaW5zZXJ0QXQpKSwgMCwgd2lkZ2V0KTsgfVxuICAgICAgd2lkZ2V0LmxpbmUgPSBsaW5lO1xuICAgICAgaWYgKGNtICYmICFsaW5lSXNIaWRkZW4oZG9jLCBsaW5lKSkge1xuICAgICAgICB2YXIgYWJvdmVWaXNpYmxlID0gaGVpZ2h0QXRMaW5lKGxpbmUpIDwgZG9jLnNjcm9sbFRvcDtcbiAgICAgICAgdXBkYXRlTGluZUhlaWdodChsaW5lLCBsaW5lLmhlaWdodCArIHdpZGdldEhlaWdodCh3aWRnZXQpKTtcbiAgICAgICAgaWYgKGFib3ZlVmlzaWJsZSkgeyBhZGRUb1Njcm9sbFRvcChjbSwgd2lkZ2V0LmhlaWdodCk7IH1cbiAgICAgICAgY20uY3VyT3AuZm9yY2VVcGRhdGUgPSB0cnVlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRydWVcbiAgICB9KTtcbiAgICBpZiAoY20pIHsgc2lnbmFsTGF0ZXIoY20sIFwibGluZVdpZGdldEFkZGVkXCIsIGNtLCB3aWRnZXQsIHR5cGVvZiBoYW5kbGUgPT0gXCJudW1iZXJcIiA/IGhhbmRsZSA6IGxpbmVObyhoYW5kbGUpKTsgfVxuICAgIHJldHVybiB3aWRnZXRcbiAgfVxuXG4gIC8vIFRFWFRNQVJLRVJTXG5cbiAgLy8gQ3JlYXRlZCB3aXRoIG1hcmtUZXh0IGFuZCBzZXRCb29rbWFyayBtZXRob2RzLiBBIFRleHRNYXJrZXIgaXMgYVxuICAvLyBoYW5kbGUgdGhhdCBjYW4gYmUgdXNlZCB0byBjbGVhciBvciBmaW5kIGEgbWFya2VkIHBvc2l0aW9uIGluIHRoZVxuICAvLyBkb2N1bWVudC4gTGluZSBvYmplY3RzIGhvbGQgYXJyYXlzIChtYXJrZWRTcGFucykgY29udGFpbmluZ1xuICAvLyB7ZnJvbSwgdG8sIG1hcmtlcn0gb2JqZWN0IHBvaW50aW5nIHRvIHN1Y2ggbWFya2VyIG9iamVjdHMsIGFuZFxuICAvLyBpbmRpY2F0aW5nIHRoYXQgc3VjaCBhIG1hcmtlciBpcyBwcmVzZW50IG9uIHRoYXQgbGluZS4gTXVsdGlwbGVcbiAgLy8gbGluZXMgbWF5IHBvaW50IHRvIHRoZSBzYW1lIG1hcmtlciB3aGVuIGl0IHNwYW5zIGFjcm9zcyBsaW5lcy5cbiAgLy8gVGhlIHNwYW5zIHdpbGwgaGF2ZSBudWxsIGZvciB0aGVpciBmcm9tL3RvIHByb3BlcnRpZXMgd2hlbiB0aGVcbiAgLy8gbWFya2VyIGNvbnRpbnVlcyBiZXlvbmQgdGhlIHN0YXJ0L2VuZCBvZiB0aGUgbGluZS4gTWFya2VycyBoYXZlXG4gIC8vIGxpbmtzIGJhY2sgdG8gdGhlIGxpbmVzIHRoZXkgY3VycmVudGx5IHRvdWNoLlxuXG4gIC8vIENvbGxhcHNlZCBtYXJrZXJzIGhhdmUgdW5pcXVlIGlkcywgaW4gb3JkZXIgdG8gYmUgYWJsZSB0byBvcmRlclxuICAvLyB0aGVtLCB3aGljaCBpcyBuZWVkZWQgZm9yIHVuaXF1ZWx5IGRldGVybWluaW5nIGFuIG91dGVyIG1hcmtlclxuICAvLyB3aGVuIHRoZXkgb3ZlcmxhcCAodGhleSBtYXkgbmVzdCwgYnV0IG5vdCBwYXJ0aWFsbHkgb3ZlcmxhcCkuXG4gIHZhciBuZXh0TWFya2VySWQgPSAwO1xuXG4gIHZhciBUZXh0TWFya2VyID0gZnVuY3Rpb24oZG9jLCB0eXBlKSB7XG4gICAgdGhpcy5saW5lcyA9IFtdO1xuICAgIHRoaXMudHlwZSA9IHR5cGU7XG4gICAgdGhpcy5kb2MgPSBkb2M7XG4gICAgdGhpcy5pZCA9ICsrbmV4dE1hcmtlcklkO1xuICB9O1xuXG4gIC8vIENsZWFyIHRoZSBtYXJrZXIuXG4gIFRleHRNYXJrZXIucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICh0aGlzLmV4cGxpY2l0bHlDbGVhcmVkKSB7IHJldHVybiB9XG4gICAgdmFyIGNtID0gdGhpcy5kb2MuY20sIHdpdGhPcCA9IGNtICYmICFjbS5jdXJPcDtcbiAgICBpZiAod2l0aE9wKSB7IHN0YXJ0T3BlcmF0aW9uKGNtKTsgfVxuICAgIGlmIChoYXNIYW5kbGVyKHRoaXMsIFwiY2xlYXJcIikpIHtcbiAgICAgIHZhciBmb3VuZCA9IHRoaXMuZmluZCgpO1xuICAgICAgaWYgKGZvdW5kKSB7IHNpZ25hbExhdGVyKHRoaXMsIFwiY2xlYXJcIiwgZm91bmQuZnJvbSwgZm91bmQudG8pOyB9XG4gICAgfVxuICAgIHZhciBtaW4gPSBudWxsLCBtYXggPSBudWxsO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5saW5lcy5sZW5ndGg7ICsraSkge1xuICAgICAgdmFyIGxpbmUgPSB0aGlzLmxpbmVzW2ldO1xuICAgICAgdmFyIHNwYW4gPSBnZXRNYXJrZWRTcGFuRm9yKGxpbmUubWFya2VkU3BhbnMsIHRoaXMpO1xuICAgICAgaWYgKGNtICYmICF0aGlzLmNvbGxhcHNlZCkgeyByZWdMaW5lQ2hhbmdlKGNtLCBsaW5lTm8obGluZSksIFwidGV4dFwiKTsgfVxuICAgICAgZWxzZSBpZiAoY20pIHtcbiAgICAgICAgaWYgKHNwYW4udG8gIT0gbnVsbCkgeyBtYXggPSBsaW5lTm8obGluZSk7IH1cbiAgICAgICAgaWYgKHNwYW4uZnJvbSAhPSBudWxsKSB7IG1pbiA9IGxpbmVObyhsaW5lKTsgfVxuICAgICAgfVxuICAgICAgbGluZS5tYXJrZWRTcGFucyA9IHJlbW92ZU1hcmtlZFNwYW4obGluZS5tYXJrZWRTcGFucywgc3Bhbik7XG4gICAgICBpZiAoc3Bhbi5mcm9tID09IG51bGwgJiYgdGhpcy5jb2xsYXBzZWQgJiYgIWxpbmVJc0hpZGRlbih0aGlzLmRvYywgbGluZSkgJiYgY20pXG4gICAgICAgIHsgdXBkYXRlTGluZUhlaWdodChsaW5lLCB0ZXh0SGVpZ2h0KGNtLmRpc3BsYXkpKTsgfVxuICAgIH1cbiAgICBpZiAoY20gJiYgdGhpcy5jb2xsYXBzZWQgJiYgIWNtLm9wdGlvbnMubGluZVdyYXBwaW5nKSB7IGZvciAodmFyIGkkMSA9IDA7IGkkMSA8IHRoaXMubGluZXMubGVuZ3RoOyArK2kkMSkge1xuICAgICAgdmFyIHZpc3VhbCA9IHZpc3VhbExpbmUodGhpcy5saW5lc1tpJDFdKSwgbGVuID0gbGluZUxlbmd0aCh2aXN1YWwpO1xuICAgICAgaWYgKGxlbiA+IGNtLmRpc3BsYXkubWF4TGluZUxlbmd0aCkge1xuICAgICAgICBjbS5kaXNwbGF5Lm1heExpbmUgPSB2aXN1YWw7XG4gICAgICAgIGNtLmRpc3BsYXkubWF4TGluZUxlbmd0aCA9IGxlbjtcbiAgICAgICAgY20uZGlzcGxheS5tYXhMaW5lQ2hhbmdlZCA9IHRydWU7XG4gICAgICB9XG4gICAgfSB9XG5cbiAgICBpZiAobWluICE9IG51bGwgJiYgY20gJiYgdGhpcy5jb2xsYXBzZWQpIHsgcmVnQ2hhbmdlKGNtLCBtaW4sIG1heCArIDEpOyB9XG4gICAgdGhpcy5saW5lcy5sZW5ndGggPSAwO1xuICAgIHRoaXMuZXhwbGljaXRseUNsZWFyZWQgPSB0cnVlO1xuICAgIGlmICh0aGlzLmF0b21pYyAmJiB0aGlzLmRvYy5jYW50RWRpdCkge1xuICAgICAgdGhpcy5kb2MuY2FudEVkaXQgPSBmYWxzZTtcbiAgICAgIGlmIChjbSkgeyByZUNoZWNrU2VsZWN0aW9uKGNtLmRvYyk7IH1cbiAgICB9XG4gICAgaWYgKGNtKSB7IHNpZ25hbExhdGVyKGNtLCBcIm1hcmtlckNsZWFyZWRcIiwgY20sIHRoaXMsIG1pbiwgbWF4KTsgfVxuICAgIGlmICh3aXRoT3ApIHsgZW5kT3BlcmF0aW9uKGNtKTsgfVxuICAgIGlmICh0aGlzLnBhcmVudCkgeyB0aGlzLnBhcmVudC5jbGVhcigpOyB9XG4gIH07XG5cbiAgLy8gRmluZCB0aGUgcG9zaXRpb24gb2YgdGhlIG1hcmtlciBpbiB0aGUgZG9jdW1lbnQuIFJldHVybnMgYSB7ZnJvbSxcbiAgLy8gdG99IG9iamVjdCBieSBkZWZhdWx0LiBTaWRlIGNhbiBiZSBwYXNzZWQgdG8gZ2V0IGEgc3BlY2lmaWMgc2lkZVxuICAvLyAtLSAwIChib3RoKSwgLTEgKGxlZnQpLCBvciAxIChyaWdodCkuIFdoZW4gbGluZU9iaiBpcyB0cnVlLCB0aGVcbiAgLy8gUG9zIG9iamVjdHMgcmV0dXJuZWQgY29udGFpbiBhIGxpbmUgb2JqZWN0LCByYXRoZXIgdGhhbiBhIGxpbmVcbiAgLy8gbnVtYmVyICh1c2VkIHRvIHByZXZlbnQgbG9va2luZyB1cCB0aGUgc2FtZSBsaW5lIHR3aWNlKS5cbiAgVGV4dE1hcmtlci5wcm90b3R5cGUuZmluZCA9IGZ1bmN0aW9uIChzaWRlLCBsaW5lT2JqKSB7XG4gICAgaWYgKHNpZGUgPT0gbnVsbCAmJiB0aGlzLnR5cGUgPT0gXCJib29rbWFya1wiKSB7IHNpZGUgPSAxOyB9XG4gICAgdmFyIGZyb20sIHRvO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5saW5lcy5sZW5ndGg7ICsraSkge1xuICAgICAgdmFyIGxpbmUgPSB0aGlzLmxpbmVzW2ldO1xuICAgICAgdmFyIHNwYW4gPSBnZXRNYXJrZWRTcGFuRm9yKGxpbmUubWFya2VkU3BhbnMsIHRoaXMpO1xuICAgICAgaWYgKHNwYW4uZnJvbSAhPSBudWxsKSB7XG4gICAgICAgIGZyb20gPSBQb3MobGluZU9iaiA/IGxpbmUgOiBsaW5lTm8obGluZSksIHNwYW4uZnJvbSk7XG4gICAgICAgIGlmIChzaWRlID09IC0xKSB7IHJldHVybiBmcm9tIH1cbiAgICAgIH1cbiAgICAgIGlmIChzcGFuLnRvICE9IG51bGwpIHtcbiAgICAgICAgdG8gPSBQb3MobGluZU9iaiA/IGxpbmUgOiBsaW5lTm8obGluZSksIHNwYW4udG8pO1xuICAgICAgICBpZiAoc2lkZSA9PSAxKSB7IHJldHVybiB0byB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmcm9tICYmIHtmcm9tOiBmcm9tLCB0bzogdG99XG4gIH07XG5cbiAgLy8gU2lnbmFscyB0aGF0IHRoZSBtYXJrZXIncyB3aWRnZXQgY2hhbmdlZCwgYW5kIHN1cnJvdW5kaW5nIGxheW91dFxuICAvLyBzaG91bGQgYmUgcmVjb21wdXRlZC5cbiAgVGV4dE1hcmtlci5wcm90b3R5cGUuY2hhbmdlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciB0aGlzJDEgPSB0aGlzO1xuXG4gICAgdmFyIHBvcyA9IHRoaXMuZmluZCgtMSwgdHJ1ZSksIHdpZGdldCA9IHRoaXMsIGNtID0gdGhpcy5kb2MuY207XG4gICAgaWYgKCFwb3MgfHwgIWNtKSB7IHJldHVybiB9XG4gICAgcnVuSW5PcChjbSwgZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGxpbmUgPSBwb3MubGluZSwgbGluZU4gPSBsaW5lTm8ocG9zLmxpbmUpO1xuICAgICAgdmFyIHZpZXcgPSBmaW5kVmlld0ZvckxpbmUoY20sIGxpbmVOKTtcbiAgICAgIGlmICh2aWV3KSB7XG4gICAgICAgIGNsZWFyTGluZU1lYXN1cmVtZW50Q2FjaGVGb3Iodmlldyk7XG4gICAgICAgIGNtLmN1ck9wLnNlbGVjdGlvbkNoYW5nZWQgPSBjbS5jdXJPcC5mb3JjZVVwZGF0ZSA9IHRydWU7XG4gICAgICB9XG4gICAgICBjbS5jdXJPcC51cGRhdGVNYXhMaW5lID0gdHJ1ZTtcbiAgICAgIGlmICghbGluZUlzSGlkZGVuKHdpZGdldC5kb2MsIGxpbmUpICYmIHdpZGdldC5oZWlnaHQgIT0gbnVsbCkge1xuICAgICAgICB2YXIgb2xkSGVpZ2h0ID0gd2lkZ2V0LmhlaWdodDtcbiAgICAgICAgd2lkZ2V0LmhlaWdodCA9IG51bGw7XG4gICAgICAgIHZhciBkSGVpZ2h0ID0gd2lkZ2V0SGVpZ2h0KHdpZGdldCkgLSBvbGRIZWlnaHQ7XG4gICAgICAgIGlmIChkSGVpZ2h0KVxuICAgICAgICAgIHsgdXBkYXRlTGluZUhlaWdodChsaW5lLCBsaW5lLmhlaWdodCArIGRIZWlnaHQpOyB9XG4gICAgICB9XG4gICAgICBzaWduYWxMYXRlcihjbSwgXCJtYXJrZXJDaGFuZ2VkXCIsIGNtLCB0aGlzJDEpO1xuICAgIH0pO1xuICB9O1xuXG4gIFRleHRNYXJrZXIucHJvdG90eXBlLmF0dGFjaExpbmUgPSBmdW5jdGlvbiAobGluZSkge1xuICAgIGlmICghdGhpcy5saW5lcy5sZW5ndGggJiYgdGhpcy5kb2MuY20pIHtcbiAgICAgIHZhciBvcCA9IHRoaXMuZG9jLmNtLmN1ck9wO1xuICAgICAgaWYgKCFvcC5tYXliZUhpZGRlbk1hcmtlcnMgfHwgaW5kZXhPZihvcC5tYXliZUhpZGRlbk1hcmtlcnMsIHRoaXMpID09IC0xKVxuICAgICAgICB7IChvcC5tYXliZVVuaGlkZGVuTWFya2VycyB8fCAob3AubWF5YmVVbmhpZGRlbk1hcmtlcnMgPSBbXSkpLnB1c2godGhpcyk7IH1cbiAgICB9XG4gICAgdGhpcy5saW5lcy5wdXNoKGxpbmUpO1xuICB9O1xuXG4gIFRleHRNYXJrZXIucHJvdG90eXBlLmRldGFjaExpbmUgPSBmdW5jdGlvbiAobGluZSkge1xuICAgIHRoaXMubGluZXMuc3BsaWNlKGluZGV4T2YodGhpcy5saW5lcywgbGluZSksIDEpO1xuICAgIGlmICghdGhpcy5saW5lcy5sZW5ndGggJiYgdGhpcy5kb2MuY20pIHtcbiAgICAgIHZhciBvcCA9IHRoaXMuZG9jLmNtLmN1ck9wXG4gICAgICA7KG9wLm1heWJlSGlkZGVuTWFya2VycyB8fCAob3AubWF5YmVIaWRkZW5NYXJrZXJzID0gW10pKS5wdXNoKHRoaXMpO1xuICAgIH1cbiAgfTtcbiAgZXZlbnRNaXhpbihUZXh0TWFya2VyKTtcblxuICAvLyBDcmVhdGUgYSBtYXJrZXIsIHdpcmUgaXQgdXAgdG8gdGhlIHJpZ2h0IGxpbmVzLCBhbmRcbiAgZnVuY3Rpb24gbWFya1RleHQoZG9jLCBmcm9tLCB0bywgb3B0aW9ucywgdHlwZSkge1xuICAgIC8vIFNoYXJlZCBtYXJrZXJzIChhY3Jvc3MgbGlua2VkIGRvY3VtZW50cykgYXJlIGhhbmRsZWQgc2VwYXJhdGVseVxuICAgIC8vIChtYXJrVGV4dFNoYXJlZCB3aWxsIGNhbGwgb3V0IHRvIHRoaXMgYWdhaW4sIG9uY2UgcGVyXG4gICAgLy8gZG9jdW1lbnQpLlxuICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMuc2hhcmVkKSB7IHJldHVybiBtYXJrVGV4dFNoYXJlZChkb2MsIGZyb20sIHRvLCBvcHRpb25zLCB0eXBlKSB9XG4gICAgLy8gRW5zdXJlIHdlIGFyZSBpbiBhbiBvcGVyYXRpb24uXG4gICAgaWYgKGRvYy5jbSAmJiAhZG9jLmNtLmN1ck9wKSB7IHJldHVybiBvcGVyYXRpb24oZG9jLmNtLCBtYXJrVGV4dCkoZG9jLCBmcm9tLCB0bywgb3B0aW9ucywgdHlwZSkgfVxuXG4gICAgdmFyIG1hcmtlciA9IG5ldyBUZXh0TWFya2VyKGRvYywgdHlwZSksIGRpZmYgPSBjbXAoZnJvbSwgdG8pO1xuICAgIGlmIChvcHRpb25zKSB7IGNvcHlPYmoob3B0aW9ucywgbWFya2VyLCBmYWxzZSk7IH1cbiAgICAvLyBEb24ndCBjb25uZWN0IGVtcHR5IG1hcmtlcnMgdW5sZXNzIGNsZWFyV2hlbkVtcHR5IGlzIGZhbHNlXG4gICAgaWYgKGRpZmYgPiAwIHx8IGRpZmYgPT0gMCAmJiBtYXJrZXIuY2xlYXJXaGVuRW1wdHkgIT09IGZhbHNlKVxuICAgICAgeyByZXR1cm4gbWFya2VyIH1cbiAgICBpZiAobWFya2VyLnJlcGxhY2VkV2l0aCkge1xuICAgICAgLy8gU2hvd2luZyB1cCBhcyBhIHdpZGdldCBpbXBsaWVzIGNvbGxhcHNlZCAod2lkZ2V0IHJlcGxhY2VzIHRleHQpXG4gICAgICBtYXJrZXIuY29sbGFwc2VkID0gdHJ1ZTtcbiAgICAgIG1hcmtlci53aWRnZXROb2RlID0gZWx0UChcInNwYW5cIiwgW21hcmtlci5yZXBsYWNlZFdpdGhdLCBcIkNvZGVNaXJyb3Itd2lkZ2V0XCIpO1xuICAgICAgaWYgKCFvcHRpb25zLmhhbmRsZU1vdXNlRXZlbnRzKSB7IG1hcmtlci53aWRnZXROb2RlLnNldEF0dHJpYnV0ZShcImNtLWlnbm9yZS1ldmVudHNcIiwgXCJ0cnVlXCIpOyB9XG4gICAgICBpZiAob3B0aW9ucy5pbnNlcnRMZWZ0KSB7IG1hcmtlci53aWRnZXROb2RlLmluc2VydExlZnQgPSB0cnVlOyB9XG4gICAgfVxuICAgIGlmIChtYXJrZXIuY29sbGFwc2VkKSB7XG4gICAgICBpZiAoY29uZmxpY3RpbmdDb2xsYXBzZWRSYW5nZShkb2MsIGZyb20ubGluZSwgZnJvbSwgdG8sIG1hcmtlcikgfHxcbiAgICAgICAgICBmcm9tLmxpbmUgIT0gdG8ubGluZSAmJiBjb25mbGljdGluZ0NvbGxhcHNlZFJhbmdlKGRvYywgdG8ubGluZSwgZnJvbSwgdG8sIG1hcmtlcikpXG4gICAgICAgIHsgdGhyb3cgbmV3IEVycm9yKFwiSW5zZXJ0aW5nIGNvbGxhcHNlZCBtYXJrZXIgcGFydGlhbGx5IG92ZXJsYXBwaW5nIGFuIGV4aXN0aW5nIG9uZVwiKSB9XG4gICAgICBzZWVDb2xsYXBzZWRTcGFucygpO1xuICAgIH1cblxuICAgIGlmIChtYXJrZXIuYWRkVG9IaXN0b3J5KVxuICAgICAgeyBhZGRDaGFuZ2VUb0hpc3RvcnkoZG9jLCB7ZnJvbTogZnJvbSwgdG86IHRvLCBvcmlnaW46IFwibWFya1RleHRcIn0sIGRvYy5zZWwsIE5hTik7IH1cblxuICAgIHZhciBjdXJMaW5lID0gZnJvbS5saW5lLCBjbSA9IGRvYy5jbSwgdXBkYXRlTWF4TGluZTtcbiAgICBkb2MuaXRlcihjdXJMaW5lLCB0by5saW5lICsgMSwgZnVuY3Rpb24gKGxpbmUpIHtcbiAgICAgIGlmIChjbSAmJiBtYXJrZXIuY29sbGFwc2VkICYmICFjbS5vcHRpb25zLmxpbmVXcmFwcGluZyAmJiB2aXN1YWxMaW5lKGxpbmUpID09IGNtLmRpc3BsYXkubWF4TGluZSlcbiAgICAgICAgeyB1cGRhdGVNYXhMaW5lID0gdHJ1ZTsgfVxuICAgICAgaWYgKG1hcmtlci5jb2xsYXBzZWQgJiYgY3VyTGluZSAhPSBmcm9tLmxpbmUpIHsgdXBkYXRlTGluZUhlaWdodChsaW5lLCAwKTsgfVxuICAgICAgYWRkTWFya2VkU3BhbihsaW5lLCBuZXcgTWFya2VkU3BhbihtYXJrZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1ckxpbmUgPT0gZnJvbS5saW5lID8gZnJvbS5jaCA6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1ckxpbmUgPT0gdG8ubGluZSA/IHRvLmNoIDogbnVsbCksIGRvYy5jbSAmJiBkb2MuY20uY3VyT3ApO1xuICAgICAgKytjdXJMaW5lO1xuICAgIH0pO1xuICAgIC8vIGxpbmVJc0hpZGRlbiBkZXBlbmRzIG9uIHRoZSBwcmVzZW5jZSBvZiB0aGUgc3BhbnMsIHNvIG5lZWRzIGEgc2Vjb25kIHBhc3NcbiAgICBpZiAobWFya2VyLmNvbGxhcHNlZCkgeyBkb2MuaXRlcihmcm9tLmxpbmUsIHRvLmxpbmUgKyAxLCBmdW5jdGlvbiAobGluZSkge1xuICAgICAgaWYgKGxpbmVJc0hpZGRlbihkb2MsIGxpbmUpKSB7IHVwZGF0ZUxpbmVIZWlnaHQobGluZSwgMCk7IH1cbiAgICB9KTsgfVxuXG4gICAgaWYgKG1hcmtlci5jbGVhck9uRW50ZXIpIHsgb24obWFya2VyLCBcImJlZm9yZUN1cnNvckVudGVyXCIsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIG1hcmtlci5jbGVhcigpOyB9KTsgfVxuXG4gICAgaWYgKG1hcmtlci5yZWFkT25seSkge1xuICAgICAgc2VlUmVhZE9ubHlTcGFucygpO1xuICAgICAgaWYgKGRvYy5oaXN0b3J5LmRvbmUubGVuZ3RoIHx8IGRvYy5oaXN0b3J5LnVuZG9uZS5sZW5ndGgpXG4gICAgICAgIHsgZG9jLmNsZWFySGlzdG9yeSgpOyB9XG4gICAgfVxuICAgIGlmIChtYXJrZXIuY29sbGFwc2VkKSB7XG4gICAgICBtYXJrZXIuaWQgPSArK25leHRNYXJrZXJJZDtcbiAgICAgIG1hcmtlci5hdG9taWMgPSB0cnVlO1xuICAgIH1cbiAgICBpZiAoY20pIHtcbiAgICAgIC8vIFN5bmMgZWRpdG9yIHN0YXRlXG4gICAgICBpZiAodXBkYXRlTWF4TGluZSkgeyBjbS5jdXJPcC51cGRhdGVNYXhMaW5lID0gdHJ1ZTsgfVxuICAgICAgaWYgKG1hcmtlci5jb2xsYXBzZWQpXG4gICAgICAgIHsgcmVnQ2hhbmdlKGNtLCBmcm9tLmxpbmUsIHRvLmxpbmUgKyAxKTsgfVxuICAgICAgZWxzZSBpZiAobWFya2VyLmNsYXNzTmFtZSB8fCBtYXJrZXIuc3RhcnRTdHlsZSB8fCBtYXJrZXIuZW5kU3R5bGUgfHwgbWFya2VyLmNzcyB8fFxuICAgICAgICAgICAgICAgbWFya2VyLmF0dHJpYnV0ZXMgfHwgbWFya2VyLnRpdGxlKVxuICAgICAgICB7IGZvciAodmFyIGkgPSBmcm9tLmxpbmU7IGkgPD0gdG8ubGluZTsgaSsrKSB7IHJlZ0xpbmVDaGFuZ2UoY20sIGksIFwidGV4dFwiKTsgfSB9XG4gICAgICBpZiAobWFya2VyLmF0b21pYykgeyByZUNoZWNrU2VsZWN0aW9uKGNtLmRvYyk7IH1cbiAgICAgIHNpZ25hbExhdGVyKGNtLCBcIm1hcmtlckFkZGVkXCIsIGNtLCBtYXJrZXIpO1xuICAgIH1cbiAgICByZXR1cm4gbWFya2VyXG4gIH1cblxuICAvLyBTSEFSRUQgVEVYVE1BUktFUlNcblxuICAvLyBBIHNoYXJlZCBtYXJrZXIgc3BhbnMgbXVsdGlwbGUgbGlua2VkIGRvY3VtZW50cy4gSXQgaXNcbiAgLy8gaW1wbGVtZW50ZWQgYXMgYSBtZXRhLW1hcmtlci1vYmplY3QgY29udHJvbGxpbmcgbXVsdGlwbGUgbm9ybWFsXG4gIC8vIG1hcmtlcnMuXG4gIHZhciBTaGFyZWRUZXh0TWFya2VyID0gZnVuY3Rpb24obWFya2VycywgcHJpbWFyeSkge1xuICAgIHRoaXMubWFya2VycyA9IG1hcmtlcnM7XG4gICAgdGhpcy5wcmltYXJ5ID0gcHJpbWFyeTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1hcmtlcnMubGVuZ3RoOyArK2kpXG4gICAgICB7IG1hcmtlcnNbaV0ucGFyZW50ID0gdGhpczsgfVxuICB9O1xuXG4gIFNoYXJlZFRleHRNYXJrZXIucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICh0aGlzLmV4cGxpY2l0bHlDbGVhcmVkKSB7IHJldHVybiB9XG4gICAgdGhpcy5leHBsaWNpdGx5Q2xlYXJlZCA9IHRydWU7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLm1hcmtlcnMubGVuZ3RoOyArK2kpXG4gICAgICB7IHRoaXMubWFya2Vyc1tpXS5jbGVhcigpOyB9XG4gICAgc2lnbmFsTGF0ZXIodGhpcywgXCJjbGVhclwiKTtcbiAgfTtcblxuICBTaGFyZWRUZXh0TWFya2VyLnByb3RvdHlwZS5maW5kID0gZnVuY3Rpb24gKHNpZGUsIGxpbmVPYmopIHtcbiAgICByZXR1cm4gdGhpcy5wcmltYXJ5LmZpbmQoc2lkZSwgbGluZU9iailcbiAgfTtcbiAgZXZlbnRNaXhpbihTaGFyZWRUZXh0TWFya2VyKTtcblxuICBmdW5jdGlvbiBtYXJrVGV4dFNoYXJlZChkb2MsIGZyb20sIHRvLCBvcHRpb25zLCB0eXBlKSB7XG4gICAgb3B0aW9ucyA9IGNvcHlPYmoob3B0aW9ucyk7XG4gICAgb3B0aW9ucy5zaGFyZWQgPSBmYWxzZTtcbiAgICB2YXIgbWFya2VycyA9IFttYXJrVGV4dChkb2MsIGZyb20sIHRvLCBvcHRpb25zLCB0eXBlKV0sIHByaW1hcnkgPSBtYXJrZXJzWzBdO1xuICAgIHZhciB3aWRnZXQgPSBvcHRpb25zLndpZGdldE5vZGU7XG4gICAgbGlua2VkRG9jcyhkb2MsIGZ1bmN0aW9uIChkb2MpIHtcbiAgICAgIGlmICh3aWRnZXQpIHsgb3B0aW9ucy53aWRnZXROb2RlID0gd2lkZ2V0LmNsb25lTm9kZSh0cnVlKTsgfVxuICAgICAgbWFya2Vycy5wdXNoKG1hcmtUZXh0KGRvYywgY2xpcFBvcyhkb2MsIGZyb20pLCBjbGlwUG9zKGRvYywgdG8pLCBvcHRpb25zLCB0eXBlKSk7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRvYy5saW5rZWQubGVuZ3RoOyArK2kpXG4gICAgICAgIHsgaWYgKGRvYy5saW5rZWRbaV0uaXNQYXJlbnQpIHsgcmV0dXJuIH0gfVxuICAgICAgcHJpbWFyeSA9IGxzdChtYXJrZXJzKTtcbiAgICB9KTtcbiAgICByZXR1cm4gbmV3IFNoYXJlZFRleHRNYXJrZXIobWFya2VycywgcHJpbWFyeSlcbiAgfVxuXG4gIGZ1bmN0aW9uIGZpbmRTaGFyZWRNYXJrZXJzKGRvYykge1xuICAgIHJldHVybiBkb2MuZmluZE1hcmtzKFBvcyhkb2MuZmlyc3QsIDApLCBkb2MuY2xpcFBvcyhQb3MoZG9jLmxhc3RMaW5lKCkpKSwgZnVuY3Rpb24gKG0pIHsgcmV0dXJuIG0ucGFyZW50OyB9KVxuICB9XG5cbiAgZnVuY3Rpb24gY29weVNoYXJlZE1hcmtlcnMoZG9jLCBtYXJrZXJzKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXJrZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgbWFya2VyID0gbWFya2Vyc1tpXSwgcG9zID0gbWFya2VyLmZpbmQoKTtcbiAgICAgIHZhciBtRnJvbSA9IGRvYy5jbGlwUG9zKHBvcy5mcm9tKSwgbVRvID0gZG9jLmNsaXBQb3MocG9zLnRvKTtcbiAgICAgIGlmIChjbXAobUZyb20sIG1UbykpIHtcbiAgICAgICAgdmFyIHN1Yk1hcmsgPSBtYXJrVGV4dChkb2MsIG1Gcm9tLCBtVG8sIG1hcmtlci5wcmltYXJ5LCBtYXJrZXIucHJpbWFyeS50eXBlKTtcbiAgICAgICAgbWFya2VyLm1hcmtlcnMucHVzaChzdWJNYXJrKTtcbiAgICAgICAgc3ViTWFyay5wYXJlbnQgPSBtYXJrZXI7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZGV0YWNoU2hhcmVkTWFya2VycyhtYXJrZXJzKSB7XG4gICAgdmFyIGxvb3AgPSBmdW5jdGlvbiAoIGkgKSB7XG4gICAgICB2YXIgbWFya2VyID0gbWFya2Vyc1tpXSwgbGlua2VkID0gW21hcmtlci5wcmltYXJ5LmRvY107XG4gICAgICBsaW5rZWREb2NzKG1hcmtlci5wcmltYXJ5LmRvYywgZnVuY3Rpb24gKGQpIHsgcmV0dXJuIGxpbmtlZC5wdXNoKGQpOyB9KTtcbiAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbWFya2VyLm1hcmtlcnMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgdmFyIHN1Yk1hcmtlciA9IG1hcmtlci5tYXJrZXJzW2pdO1xuICAgICAgICBpZiAoaW5kZXhPZihsaW5rZWQsIHN1Yk1hcmtlci5kb2MpID09IC0xKSB7XG4gICAgICAgICAgc3ViTWFya2VyLnBhcmVudCA9IG51bGw7XG4gICAgICAgICAgbWFya2VyLm1hcmtlcnMuc3BsaWNlKGotLSwgMSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXJrZXJzLmxlbmd0aDsgaSsrKSBsb29wKCBpICk7XG4gIH1cblxuICB2YXIgbmV4dERvY0lkID0gMDtcbiAgdmFyIERvYyA9IGZ1bmN0aW9uKHRleHQsIG1vZGUsIGZpcnN0TGluZSwgbGluZVNlcCwgZGlyZWN0aW9uKSB7XG4gICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIERvYykpIHsgcmV0dXJuIG5ldyBEb2ModGV4dCwgbW9kZSwgZmlyc3RMaW5lLCBsaW5lU2VwLCBkaXJlY3Rpb24pIH1cbiAgICBpZiAoZmlyc3RMaW5lID09IG51bGwpIHsgZmlyc3RMaW5lID0gMDsgfVxuXG4gICAgQnJhbmNoQ2h1bmsuY2FsbCh0aGlzLCBbbmV3IExlYWZDaHVuayhbbmV3IExpbmUoXCJcIiwgbnVsbCldKV0pO1xuICAgIHRoaXMuZmlyc3QgPSBmaXJzdExpbmU7XG4gICAgdGhpcy5zY3JvbGxUb3AgPSB0aGlzLnNjcm9sbExlZnQgPSAwO1xuICAgIHRoaXMuY2FudEVkaXQgPSBmYWxzZTtcbiAgICB0aGlzLmNsZWFuR2VuZXJhdGlvbiA9IDE7XG4gICAgdGhpcy5tb2RlRnJvbnRpZXIgPSB0aGlzLmhpZ2hsaWdodEZyb250aWVyID0gZmlyc3RMaW5lO1xuICAgIHZhciBzdGFydCA9IFBvcyhmaXJzdExpbmUsIDApO1xuICAgIHRoaXMuc2VsID0gc2ltcGxlU2VsZWN0aW9uKHN0YXJ0KTtcbiAgICB0aGlzLmhpc3RvcnkgPSBuZXcgSGlzdG9yeShudWxsKTtcbiAgICB0aGlzLmlkID0gKytuZXh0RG9jSWQ7XG4gICAgdGhpcy5tb2RlT3B0aW9uID0gbW9kZTtcbiAgICB0aGlzLmxpbmVTZXAgPSBsaW5lU2VwO1xuICAgIHRoaXMuZGlyZWN0aW9uID0gKGRpcmVjdGlvbiA9PSBcInJ0bFwiKSA/IFwicnRsXCIgOiBcImx0clwiO1xuICAgIHRoaXMuZXh0ZW5kID0gZmFsc2U7XG5cbiAgICBpZiAodHlwZW9mIHRleHQgPT0gXCJzdHJpbmdcIikgeyB0ZXh0ID0gdGhpcy5zcGxpdExpbmVzKHRleHQpOyB9XG4gICAgdXBkYXRlRG9jKHRoaXMsIHtmcm9tOiBzdGFydCwgdG86IHN0YXJ0LCB0ZXh0OiB0ZXh0fSk7XG4gICAgc2V0U2VsZWN0aW9uKHRoaXMsIHNpbXBsZVNlbGVjdGlvbihzdGFydCksIHNlbF9kb250U2Nyb2xsKTtcbiAgfTtcblxuICBEb2MucHJvdG90eXBlID0gY3JlYXRlT2JqKEJyYW5jaENodW5rLnByb3RvdHlwZSwge1xuICAgIGNvbnN0cnVjdG9yOiBEb2MsXG4gICAgLy8gSXRlcmF0ZSBvdmVyIHRoZSBkb2N1bWVudC4gU3VwcG9ydHMgdHdvIGZvcm1zIC0tIHdpdGggb25seSBvbmVcbiAgICAvLyBhcmd1bWVudCwgaXQgY2FsbHMgdGhhdCBmb3IgZWFjaCBsaW5lIGluIHRoZSBkb2N1bWVudC4gV2l0aFxuICAgIC8vIHRocmVlLCBpdCBpdGVyYXRlcyBvdmVyIHRoZSByYW5nZSBnaXZlbiBieSB0aGUgZmlyc3QgdHdvICh3aXRoXG4gICAgLy8gdGhlIHNlY29uZCBiZWluZyBub24taW5jbHVzaXZlKS5cbiAgICBpdGVyOiBmdW5jdGlvbihmcm9tLCB0bywgb3ApIHtcbiAgICAgIGlmIChvcCkgeyB0aGlzLml0ZXJOKGZyb20gLSB0aGlzLmZpcnN0LCB0byAtIGZyb20sIG9wKTsgfVxuICAgICAgZWxzZSB7IHRoaXMuaXRlck4odGhpcy5maXJzdCwgdGhpcy5maXJzdCArIHRoaXMuc2l6ZSwgZnJvbSk7IH1cbiAgICB9LFxuXG4gICAgLy8gTm9uLXB1YmxpYyBpbnRlcmZhY2UgZm9yIGFkZGluZyBhbmQgcmVtb3ZpbmcgbGluZXMuXG4gICAgaW5zZXJ0OiBmdW5jdGlvbihhdCwgbGluZXMpIHtcbiAgICAgIHZhciBoZWlnaHQgPSAwO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaW5lcy5sZW5ndGg7ICsraSkgeyBoZWlnaHQgKz0gbGluZXNbaV0uaGVpZ2h0OyB9XG4gICAgICB0aGlzLmluc2VydElubmVyKGF0IC0gdGhpcy5maXJzdCwgbGluZXMsIGhlaWdodCk7XG4gICAgfSxcbiAgICByZW1vdmU6IGZ1bmN0aW9uKGF0LCBuKSB7IHRoaXMucmVtb3ZlSW5uZXIoYXQgLSB0aGlzLmZpcnN0LCBuKTsgfSxcblxuICAgIC8vIEZyb20gaGVyZSwgdGhlIG1ldGhvZHMgYXJlIHBhcnQgb2YgdGhlIHB1YmxpYyBpbnRlcmZhY2UuIE1vc3RcbiAgICAvLyBhcmUgYWxzbyBhdmFpbGFibGUgZnJvbSBDb2RlTWlycm9yIChlZGl0b3IpIGluc3RhbmNlcy5cblxuICAgIGdldFZhbHVlOiBmdW5jdGlvbihsaW5lU2VwKSB7XG4gICAgICB2YXIgbGluZXMgPSBnZXRMaW5lcyh0aGlzLCB0aGlzLmZpcnN0LCB0aGlzLmZpcnN0ICsgdGhpcy5zaXplKTtcbiAgICAgIGlmIChsaW5lU2VwID09PSBmYWxzZSkgeyByZXR1cm4gbGluZXMgfVxuICAgICAgcmV0dXJuIGxpbmVzLmpvaW4obGluZVNlcCB8fCB0aGlzLmxpbmVTZXBhcmF0b3IoKSlcbiAgICB9LFxuICAgIHNldFZhbHVlOiBkb2NNZXRob2RPcChmdW5jdGlvbihjb2RlKSB7XG4gICAgICB2YXIgdG9wID0gUG9zKHRoaXMuZmlyc3QsIDApLCBsYXN0ID0gdGhpcy5maXJzdCArIHRoaXMuc2l6ZSAtIDE7XG4gICAgICBtYWtlQ2hhbmdlKHRoaXMsIHtmcm9tOiB0b3AsIHRvOiBQb3MobGFzdCwgZ2V0TGluZSh0aGlzLCBsYXN0KS50ZXh0Lmxlbmd0aCksXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiB0aGlzLnNwbGl0TGluZXMoY29kZSksIG9yaWdpbjogXCJzZXRWYWx1ZVwiLCBmdWxsOiB0cnVlfSwgdHJ1ZSk7XG4gICAgICBpZiAodGhpcy5jbSkgeyBzY3JvbGxUb0Nvb3Jkcyh0aGlzLmNtLCAwLCAwKTsgfVxuICAgICAgc2V0U2VsZWN0aW9uKHRoaXMsIHNpbXBsZVNlbGVjdGlvbih0b3ApLCBzZWxfZG9udFNjcm9sbCk7XG4gICAgfSksXG4gICAgcmVwbGFjZVJhbmdlOiBmdW5jdGlvbihjb2RlLCBmcm9tLCB0bywgb3JpZ2luKSB7XG4gICAgICBmcm9tID0gY2xpcFBvcyh0aGlzLCBmcm9tKTtcbiAgICAgIHRvID0gdG8gPyBjbGlwUG9zKHRoaXMsIHRvKSA6IGZyb207XG4gICAgICByZXBsYWNlUmFuZ2UodGhpcywgY29kZSwgZnJvbSwgdG8sIG9yaWdpbik7XG4gICAgfSxcbiAgICBnZXRSYW5nZTogZnVuY3Rpb24oZnJvbSwgdG8sIGxpbmVTZXApIHtcbiAgICAgIHZhciBsaW5lcyA9IGdldEJldHdlZW4odGhpcywgY2xpcFBvcyh0aGlzLCBmcm9tKSwgY2xpcFBvcyh0aGlzLCB0bykpO1xuICAgICAgaWYgKGxpbmVTZXAgPT09IGZhbHNlKSB7IHJldHVybiBsaW5lcyB9XG4gICAgICBpZiAobGluZVNlcCA9PT0gJycpIHsgcmV0dXJuIGxpbmVzLmpvaW4oJycpIH1cbiAgICAgIHJldHVybiBsaW5lcy5qb2luKGxpbmVTZXAgfHwgdGhpcy5saW5lU2VwYXJhdG9yKCkpXG4gICAgfSxcblxuICAgIGdldExpbmU6IGZ1bmN0aW9uKGxpbmUpIHt2YXIgbCA9IHRoaXMuZ2V0TGluZUhhbmRsZShsaW5lKTsgcmV0dXJuIGwgJiYgbC50ZXh0fSxcblxuICAgIGdldExpbmVIYW5kbGU6IGZ1bmN0aW9uKGxpbmUpIHtpZiAoaXNMaW5lKHRoaXMsIGxpbmUpKSB7IHJldHVybiBnZXRMaW5lKHRoaXMsIGxpbmUpIH19LFxuICAgIGdldExpbmVOdW1iZXI6IGZ1bmN0aW9uKGxpbmUpIHtyZXR1cm4gbGluZU5vKGxpbmUpfSxcblxuICAgIGdldExpbmVIYW5kbGVWaXN1YWxTdGFydDogZnVuY3Rpb24obGluZSkge1xuICAgICAgaWYgKHR5cGVvZiBsaW5lID09IFwibnVtYmVyXCIpIHsgbGluZSA9IGdldExpbmUodGhpcywgbGluZSk7IH1cbiAgICAgIHJldHVybiB2aXN1YWxMaW5lKGxpbmUpXG4gICAgfSxcblxuICAgIGxpbmVDb3VudDogZnVuY3Rpb24oKSB7cmV0dXJuIHRoaXMuc2l6ZX0sXG4gICAgZmlyc3RMaW5lOiBmdW5jdGlvbigpIHtyZXR1cm4gdGhpcy5maXJzdH0sXG4gICAgbGFzdExpbmU6IGZ1bmN0aW9uKCkge3JldHVybiB0aGlzLmZpcnN0ICsgdGhpcy5zaXplIC0gMX0sXG5cbiAgICBjbGlwUG9zOiBmdW5jdGlvbihwb3MpIHtyZXR1cm4gY2xpcFBvcyh0aGlzLCBwb3MpfSxcblxuICAgIGdldEN1cnNvcjogZnVuY3Rpb24oc3RhcnQpIHtcbiAgICAgIHZhciByYW5nZSA9IHRoaXMuc2VsLnByaW1hcnkoKSwgcG9zO1xuICAgICAgaWYgKHN0YXJ0ID09IG51bGwgfHwgc3RhcnQgPT0gXCJoZWFkXCIpIHsgcG9zID0gcmFuZ2UuaGVhZDsgfVxuICAgICAgZWxzZSBpZiAoc3RhcnQgPT0gXCJhbmNob3JcIikgeyBwb3MgPSByYW5nZS5hbmNob3I7IH1cbiAgICAgIGVsc2UgaWYgKHN0YXJ0ID09IFwiZW5kXCIgfHwgc3RhcnQgPT0gXCJ0b1wiIHx8IHN0YXJ0ID09PSBmYWxzZSkgeyBwb3MgPSByYW5nZS50bygpOyB9XG4gICAgICBlbHNlIHsgcG9zID0gcmFuZ2UuZnJvbSgpOyB9XG4gICAgICByZXR1cm4gcG9zXG4gICAgfSxcbiAgICBsaXN0U2VsZWN0aW9uczogZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzLnNlbC5yYW5nZXMgfSxcbiAgICBzb21ldGhpbmdTZWxlY3RlZDogZnVuY3Rpb24oKSB7cmV0dXJuIHRoaXMuc2VsLnNvbWV0aGluZ1NlbGVjdGVkKCl9LFxuXG4gICAgc2V0Q3Vyc29yOiBkb2NNZXRob2RPcChmdW5jdGlvbihsaW5lLCBjaCwgb3B0aW9ucykge1xuICAgICAgc2V0U2ltcGxlU2VsZWN0aW9uKHRoaXMsIGNsaXBQb3ModGhpcywgdHlwZW9mIGxpbmUgPT0gXCJudW1iZXJcIiA/IFBvcyhsaW5lLCBjaCB8fCAwKSA6IGxpbmUpLCBudWxsLCBvcHRpb25zKTtcbiAgICB9KSxcbiAgICBzZXRTZWxlY3Rpb246IGRvY01ldGhvZE9wKGZ1bmN0aW9uKGFuY2hvciwgaGVhZCwgb3B0aW9ucykge1xuICAgICAgc2V0U2ltcGxlU2VsZWN0aW9uKHRoaXMsIGNsaXBQb3ModGhpcywgYW5jaG9yKSwgY2xpcFBvcyh0aGlzLCBoZWFkIHx8IGFuY2hvciksIG9wdGlvbnMpO1xuICAgIH0pLFxuICAgIGV4dGVuZFNlbGVjdGlvbjogZG9jTWV0aG9kT3AoZnVuY3Rpb24oaGVhZCwgb3RoZXIsIG9wdGlvbnMpIHtcbiAgICAgIGV4dGVuZFNlbGVjdGlvbih0aGlzLCBjbGlwUG9zKHRoaXMsIGhlYWQpLCBvdGhlciAmJiBjbGlwUG9zKHRoaXMsIG90aGVyKSwgb3B0aW9ucyk7XG4gICAgfSksXG4gICAgZXh0ZW5kU2VsZWN0aW9uczogZG9jTWV0aG9kT3AoZnVuY3Rpb24oaGVhZHMsIG9wdGlvbnMpIHtcbiAgICAgIGV4dGVuZFNlbGVjdGlvbnModGhpcywgY2xpcFBvc0FycmF5KHRoaXMsIGhlYWRzKSwgb3B0aW9ucyk7XG4gICAgfSksXG4gICAgZXh0ZW5kU2VsZWN0aW9uc0J5OiBkb2NNZXRob2RPcChmdW5jdGlvbihmLCBvcHRpb25zKSB7XG4gICAgICB2YXIgaGVhZHMgPSBtYXAodGhpcy5zZWwucmFuZ2VzLCBmKTtcbiAgICAgIGV4dGVuZFNlbGVjdGlvbnModGhpcywgY2xpcFBvc0FycmF5KHRoaXMsIGhlYWRzKSwgb3B0aW9ucyk7XG4gICAgfSksXG4gICAgc2V0U2VsZWN0aW9uczogZG9jTWV0aG9kT3AoZnVuY3Rpb24ocmFuZ2VzLCBwcmltYXJ5LCBvcHRpb25zKSB7XG4gICAgICBpZiAoIXJhbmdlcy5sZW5ndGgpIHsgcmV0dXJuIH1cbiAgICAgIHZhciBvdXQgPSBbXTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmFuZ2VzLmxlbmd0aDsgaSsrKVxuICAgICAgICB7IG91dFtpXSA9IG5ldyBSYW5nZShjbGlwUG9zKHRoaXMsIHJhbmdlc1tpXS5hbmNob3IpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpcFBvcyh0aGlzLCByYW5nZXNbaV0uaGVhZCB8fCByYW5nZXNbaV0uYW5jaG9yKSk7IH1cbiAgICAgIGlmIChwcmltYXJ5ID09IG51bGwpIHsgcHJpbWFyeSA9IE1hdGgubWluKHJhbmdlcy5sZW5ndGggLSAxLCB0aGlzLnNlbC5wcmltSW5kZXgpOyB9XG4gICAgICBzZXRTZWxlY3Rpb24odGhpcywgbm9ybWFsaXplU2VsZWN0aW9uKHRoaXMuY20sIG91dCwgcHJpbWFyeSksIG9wdGlvbnMpO1xuICAgIH0pLFxuICAgIGFkZFNlbGVjdGlvbjogZG9jTWV0aG9kT3AoZnVuY3Rpb24oYW5jaG9yLCBoZWFkLCBvcHRpb25zKSB7XG4gICAgICB2YXIgcmFuZ2VzID0gdGhpcy5zZWwucmFuZ2VzLnNsaWNlKDApO1xuICAgICAgcmFuZ2VzLnB1c2gobmV3IFJhbmdlKGNsaXBQb3ModGhpcywgYW5jaG9yKSwgY2xpcFBvcyh0aGlzLCBoZWFkIHx8IGFuY2hvcikpKTtcbiAgICAgIHNldFNlbGVjdGlvbih0aGlzLCBub3JtYWxpemVTZWxlY3Rpb24odGhpcy5jbSwgcmFuZ2VzLCByYW5nZXMubGVuZ3RoIC0gMSksIG9wdGlvbnMpO1xuICAgIH0pLFxuXG4gICAgZ2V0U2VsZWN0aW9uOiBmdW5jdGlvbihsaW5lU2VwKSB7XG4gICAgICB2YXIgcmFuZ2VzID0gdGhpcy5zZWwucmFuZ2VzLCBsaW5lcztcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmFuZ2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBzZWwgPSBnZXRCZXR3ZWVuKHRoaXMsIHJhbmdlc1tpXS5mcm9tKCksIHJhbmdlc1tpXS50bygpKTtcbiAgICAgICAgbGluZXMgPSBsaW5lcyA/IGxpbmVzLmNvbmNhdChzZWwpIDogc2VsO1xuICAgICAgfVxuICAgICAgaWYgKGxpbmVTZXAgPT09IGZhbHNlKSB7IHJldHVybiBsaW5lcyB9XG4gICAgICBlbHNlIHsgcmV0dXJuIGxpbmVzLmpvaW4obGluZVNlcCB8fCB0aGlzLmxpbmVTZXBhcmF0b3IoKSkgfVxuICAgIH0sXG4gICAgZ2V0U2VsZWN0aW9uczogZnVuY3Rpb24obGluZVNlcCkge1xuICAgICAgdmFyIHBhcnRzID0gW10sIHJhbmdlcyA9IHRoaXMuc2VsLnJhbmdlcztcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmFuZ2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBzZWwgPSBnZXRCZXR3ZWVuKHRoaXMsIHJhbmdlc1tpXS5mcm9tKCksIHJhbmdlc1tpXS50bygpKTtcbiAgICAgICAgaWYgKGxpbmVTZXAgIT09IGZhbHNlKSB7IHNlbCA9IHNlbC5qb2luKGxpbmVTZXAgfHwgdGhpcy5saW5lU2VwYXJhdG9yKCkpOyB9XG4gICAgICAgIHBhcnRzW2ldID0gc2VsO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHBhcnRzXG4gICAgfSxcbiAgICByZXBsYWNlU2VsZWN0aW9uOiBmdW5jdGlvbihjb2RlLCBjb2xsYXBzZSwgb3JpZ2luKSB7XG4gICAgICB2YXIgZHVwID0gW107XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuc2VsLnJhbmdlcy5sZW5ndGg7IGkrKylcbiAgICAgICAgeyBkdXBbaV0gPSBjb2RlOyB9XG4gICAgICB0aGlzLnJlcGxhY2VTZWxlY3Rpb25zKGR1cCwgY29sbGFwc2UsIG9yaWdpbiB8fCBcIitpbnB1dFwiKTtcbiAgICB9LFxuICAgIHJlcGxhY2VTZWxlY3Rpb25zOiBkb2NNZXRob2RPcChmdW5jdGlvbihjb2RlLCBjb2xsYXBzZSwgb3JpZ2luKSB7XG4gICAgICB2YXIgY2hhbmdlcyA9IFtdLCBzZWwgPSB0aGlzLnNlbDtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2VsLnJhbmdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgcmFuZ2UgPSBzZWwucmFuZ2VzW2ldO1xuICAgICAgICBjaGFuZ2VzW2ldID0ge2Zyb206IHJhbmdlLmZyb20oKSwgdG86IHJhbmdlLnRvKCksIHRleHQ6IHRoaXMuc3BsaXRMaW5lcyhjb2RlW2ldKSwgb3JpZ2luOiBvcmlnaW59O1xuICAgICAgfVxuICAgICAgdmFyIG5ld1NlbCA9IGNvbGxhcHNlICYmIGNvbGxhcHNlICE9IFwiZW5kXCIgJiYgY29tcHV0ZVJlcGxhY2VkU2VsKHRoaXMsIGNoYW5nZXMsIGNvbGxhcHNlKTtcbiAgICAgIGZvciAodmFyIGkkMSA9IGNoYW5nZXMubGVuZ3RoIC0gMTsgaSQxID49IDA7IGkkMS0tKVxuICAgICAgICB7IG1ha2VDaGFuZ2UodGhpcywgY2hhbmdlc1tpJDFdKTsgfVxuICAgICAgaWYgKG5ld1NlbCkgeyBzZXRTZWxlY3Rpb25SZXBsYWNlSGlzdG9yeSh0aGlzLCBuZXdTZWwpOyB9XG4gICAgICBlbHNlIGlmICh0aGlzLmNtKSB7IGVuc3VyZUN1cnNvclZpc2libGUodGhpcy5jbSk7IH1cbiAgICB9KSxcbiAgICB1bmRvOiBkb2NNZXRob2RPcChmdW5jdGlvbigpIHttYWtlQ2hhbmdlRnJvbUhpc3RvcnkodGhpcywgXCJ1bmRvXCIpO30pLFxuICAgIHJlZG86IGRvY01ldGhvZE9wKGZ1bmN0aW9uKCkge21ha2VDaGFuZ2VGcm9tSGlzdG9yeSh0aGlzLCBcInJlZG9cIik7fSksXG4gICAgdW5kb1NlbGVjdGlvbjogZG9jTWV0aG9kT3AoZnVuY3Rpb24oKSB7bWFrZUNoYW5nZUZyb21IaXN0b3J5KHRoaXMsIFwidW5kb1wiLCB0cnVlKTt9KSxcbiAgICByZWRvU2VsZWN0aW9uOiBkb2NNZXRob2RPcChmdW5jdGlvbigpIHttYWtlQ2hhbmdlRnJvbUhpc3RvcnkodGhpcywgXCJyZWRvXCIsIHRydWUpO30pLFxuXG4gICAgc2V0RXh0ZW5kaW5nOiBmdW5jdGlvbih2YWwpIHt0aGlzLmV4dGVuZCA9IHZhbDt9LFxuICAgIGdldEV4dGVuZGluZzogZnVuY3Rpb24oKSB7cmV0dXJuIHRoaXMuZXh0ZW5kfSxcblxuICAgIGhpc3RvcnlTaXplOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBoaXN0ID0gdGhpcy5oaXN0b3J5LCBkb25lID0gMCwgdW5kb25lID0gMDtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaGlzdC5kb25lLmxlbmd0aDsgaSsrKSB7IGlmICghaGlzdC5kb25lW2ldLnJhbmdlcykgeyArK2RvbmU7IH0gfVxuICAgICAgZm9yICh2YXIgaSQxID0gMDsgaSQxIDwgaGlzdC51bmRvbmUubGVuZ3RoOyBpJDErKykgeyBpZiAoIWhpc3QudW5kb25lW2kkMV0ucmFuZ2VzKSB7ICsrdW5kb25lOyB9IH1cbiAgICAgIHJldHVybiB7dW5kbzogZG9uZSwgcmVkbzogdW5kb25lfVxuICAgIH0sXG4gICAgY2xlYXJIaXN0b3J5OiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciB0aGlzJDEgPSB0aGlzO1xuXG4gICAgICB0aGlzLmhpc3RvcnkgPSBuZXcgSGlzdG9yeSh0aGlzLmhpc3RvcnkpO1xuICAgICAgbGlua2VkRG9jcyh0aGlzLCBmdW5jdGlvbiAoZG9jKSB7IHJldHVybiBkb2MuaGlzdG9yeSA9IHRoaXMkMS5oaXN0b3J5OyB9LCB0cnVlKTtcbiAgICB9LFxuXG4gICAgbWFya0NsZWFuOiBmdW5jdGlvbigpIHtcbiAgICAgIHRoaXMuY2xlYW5HZW5lcmF0aW9uID0gdGhpcy5jaGFuZ2VHZW5lcmF0aW9uKHRydWUpO1xuICAgIH0sXG4gICAgY2hhbmdlR2VuZXJhdGlvbjogZnVuY3Rpb24oZm9yY2VTcGxpdCkge1xuICAgICAgaWYgKGZvcmNlU3BsaXQpXG4gICAgICAgIHsgdGhpcy5oaXN0b3J5Lmxhc3RPcCA9IHRoaXMuaGlzdG9yeS5sYXN0U2VsT3AgPSB0aGlzLmhpc3RvcnkubGFzdE9yaWdpbiA9IG51bGw7IH1cbiAgICAgIHJldHVybiB0aGlzLmhpc3RvcnkuZ2VuZXJhdGlvblxuICAgIH0sXG4gICAgaXNDbGVhbjogZnVuY3Rpb24gKGdlbikge1xuICAgICAgcmV0dXJuIHRoaXMuaGlzdG9yeS5nZW5lcmF0aW9uID09IChnZW4gfHwgdGhpcy5jbGVhbkdlbmVyYXRpb24pXG4gICAgfSxcblxuICAgIGdldEhpc3Rvcnk6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHtkb25lOiBjb3B5SGlzdG9yeUFycmF5KHRoaXMuaGlzdG9yeS5kb25lKSxcbiAgICAgICAgICAgICAgdW5kb25lOiBjb3B5SGlzdG9yeUFycmF5KHRoaXMuaGlzdG9yeS51bmRvbmUpfVxuICAgIH0sXG4gICAgc2V0SGlzdG9yeTogZnVuY3Rpb24oaGlzdERhdGEpIHtcbiAgICAgIHZhciBoaXN0ID0gdGhpcy5oaXN0b3J5ID0gbmV3IEhpc3RvcnkodGhpcy5oaXN0b3J5KTtcbiAgICAgIGhpc3QuZG9uZSA9IGNvcHlIaXN0b3J5QXJyYXkoaGlzdERhdGEuZG9uZS5zbGljZSgwKSwgbnVsbCwgdHJ1ZSk7XG4gICAgICBoaXN0LnVuZG9uZSA9IGNvcHlIaXN0b3J5QXJyYXkoaGlzdERhdGEudW5kb25lLnNsaWNlKDApLCBudWxsLCB0cnVlKTtcbiAgICB9LFxuXG4gICAgc2V0R3V0dGVyTWFya2VyOiBkb2NNZXRob2RPcChmdW5jdGlvbihsaW5lLCBndXR0ZXJJRCwgdmFsdWUpIHtcbiAgICAgIHJldHVybiBjaGFuZ2VMaW5lKHRoaXMsIGxpbmUsIFwiZ3V0dGVyXCIsIGZ1bmN0aW9uIChsaW5lKSB7XG4gICAgICAgIHZhciBtYXJrZXJzID0gbGluZS5ndXR0ZXJNYXJrZXJzIHx8IChsaW5lLmd1dHRlck1hcmtlcnMgPSB7fSk7XG4gICAgICAgIG1hcmtlcnNbZ3V0dGVySURdID0gdmFsdWU7XG4gICAgICAgIGlmICghdmFsdWUgJiYgaXNFbXB0eShtYXJrZXJzKSkgeyBsaW5lLmd1dHRlck1hcmtlcnMgPSBudWxsOyB9XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgICB9KVxuICAgIH0pLFxuXG4gICAgY2xlYXJHdXR0ZXI6IGRvY01ldGhvZE9wKGZ1bmN0aW9uKGd1dHRlcklEKSB7XG4gICAgICB2YXIgdGhpcyQxID0gdGhpcztcblxuICAgICAgdGhpcy5pdGVyKGZ1bmN0aW9uIChsaW5lKSB7XG4gICAgICAgIGlmIChsaW5lLmd1dHRlck1hcmtlcnMgJiYgbGluZS5ndXR0ZXJNYXJrZXJzW2d1dHRlcklEXSkge1xuICAgICAgICAgIGNoYW5nZUxpbmUodGhpcyQxLCBsaW5lLCBcImd1dHRlclwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBsaW5lLmd1dHRlck1hcmtlcnNbZ3V0dGVySURdID0gbnVsbDtcbiAgICAgICAgICAgIGlmIChpc0VtcHR5KGxpbmUuZ3V0dGVyTWFya2VycykpIHsgbGluZS5ndXR0ZXJNYXJrZXJzID0gbnVsbDsgfVxuICAgICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSksXG5cbiAgICBsaW5lSW5mbzogZnVuY3Rpb24obGluZSkge1xuICAgICAgdmFyIG47XG4gICAgICBpZiAodHlwZW9mIGxpbmUgPT0gXCJudW1iZXJcIikge1xuICAgICAgICBpZiAoIWlzTGluZSh0aGlzLCBsaW5lKSkgeyByZXR1cm4gbnVsbCB9XG4gICAgICAgIG4gPSBsaW5lO1xuICAgICAgICBsaW5lID0gZ2V0TGluZSh0aGlzLCBsaW5lKTtcbiAgICAgICAgaWYgKCFsaW5lKSB7IHJldHVybiBudWxsIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG4gPSBsaW5lTm8obGluZSk7XG4gICAgICAgIGlmIChuID09IG51bGwpIHsgcmV0dXJuIG51bGwgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHtsaW5lOiBuLCBoYW5kbGU6IGxpbmUsIHRleHQ6IGxpbmUudGV4dCwgZ3V0dGVyTWFya2VyczogbGluZS5ndXR0ZXJNYXJrZXJzLFxuICAgICAgICAgICAgICB0ZXh0Q2xhc3M6IGxpbmUudGV4dENsYXNzLCBiZ0NsYXNzOiBsaW5lLmJnQ2xhc3MsIHdyYXBDbGFzczogbGluZS53cmFwQ2xhc3MsXG4gICAgICAgICAgICAgIHdpZGdldHM6IGxpbmUud2lkZ2V0c31cbiAgICB9LFxuXG4gICAgYWRkTGluZUNsYXNzOiBkb2NNZXRob2RPcChmdW5jdGlvbihoYW5kbGUsIHdoZXJlLCBjbHMpIHtcbiAgICAgIHJldHVybiBjaGFuZ2VMaW5lKHRoaXMsIGhhbmRsZSwgd2hlcmUgPT0gXCJndXR0ZXJcIiA/IFwiZ3V0dGVyXCIgOiBcImNsYXNzXCIsIGZ1bmN0aW9uIChsaW5lKSB7XG4gICAgICAgIHZhciBwcm9wID0gd2hlcmUgPT0gXCJ0ZXh0XCIgPyBcInRleHRDbGFzc1wiXG4gICAgICAgICAgICAgICAgIDogd2hlcmUgPT0gXCJiYWNrZ3JvdW5kXCIgPyBcImJnQ2xhc3NcIlxuICAgICAgICAgICAgICAgICA6IHdoZXJlID09IFwiZ3V0dGVyXCIgPyBcImd1dHRlckNsYXNzXCIgOiBcIndyYXBDbGFzc1wiO1xuICAgICAgICBpZiAoIWxpbmVbcHJvcF0pIHsgbGluZVtwcm9wXSA9IGNsczsgfVxuICAgICAgICBlbHNlIGlmIChjbGFzc1Rlc3QoY2xzKS50ZXN0KGxpbmVbcHJvcF0pKSB7IHJldHVybiBmYWxzZSB9XG4gICAgICAgIGVsc2UgeyBsaW5lW3Byb3BdICs9IFwiIFwiICsgY2xzOyB9XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgICB9KVxuICAgIH0pLFxuICAgIHJlbW92ZUxpbmVDbGFzczogZG9jTWV0aG9kT3AoZnVuY3Rpb24oaGFuZGxlLCB3aGVyZSwgY2xzKSB7XG4gICAgICByZXR1cm4gY2hhbmdlTGluZSh0aGlzLCBoYW5kbGUsIHdoZXJlID09IFwiZ3V0dGVyXCIgPyBcImd1dHRlclwiIDogXCJjbGFzc1wiLCBmdW5jdGlvbiAobGluZSkge1xuICAgICAgICB2YXIgcHJvcCA9IHdoZXJlID09IFwidGV4dFwiID8gXCJ0ZXh0Q2xhc3NcIlxuICAgICAgICAgICAgICAgICA6IHdoZXJlID09IFwiYmFja2dyb3VuZFwiID8gXCJiZ0NsYXNzXCJcbiAgICAgICAgICAgICAgICAgOiB3aGVyZSA9PSBcImd1dHRlclwiID8gXCJndXR0ZXJDbGFzc1wiIDogXCJ3cmFwQ2xhc3NcIjtcbiAgICAgICAgdmFyIGN1ciA9IGxpbmVbcHJvcF07XG4gICAgICAgIGlmICghY3VyKSB7IHJldHVybiBmYWxzZSB9XG4gICAgICAgIGVsc2UgaWYgKGNscyA9PSBudWxsKSB7IGxpbmVbcHJvcF0gPSBudWxsOyB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIHZhciBmb3VuZCA9IGN1ci5tYXRjaChjbGFzc1Rlc3QoY2xzKSk7XG4gICAgICAgICAgaWYgKCFmb3VuZCkgeyByZXR1cm4gZmFsc2UgfVxuICAgICAgICAgIHZhciBlbmQgPSBmb3VuZC5pbmRleCArIGZvdW5kWzBdLmxlbmd0aDtcbiAgICAgICAgICBsaW5lW3Byb3BdID0gY3VyLnNsaWNlKDAsIGZvdW5kLmluZGV4KSArICghZm91bmQuaW5kZXggfHwgZW5kID09IGN1ci5sZW5ndGggPyBcIlwiIDogXCIgXCIpICsgY3VyLnNsaWNlKGVuZCkgfHwgbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgfSlcbiAgICB9KSxcblxuICAgIGFkZExpbmVXaWRnZXQ6IGRvY01ldGhvZE9wKGZ1bmN0aW9uKGhhbmRsZSwgbm9kZSwgb3B0aW9ucykge1xuICAgICAgcmV0dXJuIGFkZExpbmVXaWRnZXQodGhpcywgaGFuZGxlLCBub2RlLCBvcHRpb25zKVxuICAgIH0pLFxuICAgIHJlbW92ZUxpbmVXaWRnZXQ6IGZ1bmN0aW9uKHdpZGdldCkgeyB3aWRnZXQuY2xlYXIoKTsgfSxcblxuICAgIG1hcmtUZXh0OiBmdW5jdGlvbihmcm9tLCB0bywgb3B0aW9ucykge1xuICAgICAgcmV0dXJuIG1hcmtUZXh0KHRoaXMsIGNsaXBQb3ModGhpcywgZnJvbSksIGNsaXBQb3ModGhpcywgdG8pLCBvcHRpb25zLCBvcHRpb25zICYmIG9wdGlvbnMudHlwZSB8fCBcInJhbmdlXCIpXG4gICAgfSxcbiAgICBzZXRCb29rbWFyazogZnVuY3Rpb24ocG9zLCBvcHRpb25zKSB7XG4gICAgICB2YXIgcmVhbE9wdHMgPSB7cmVwbGFjZWRXaXRoOiBvcHRpb25zICYmIChvcHRpb25zLm5vZGVUeXBlID09IG51bGwgPyBvcHRpb25zLndpZGdldCA6IG9wdGlvbnMpLFxuICAgICAgICAgICAgICAgICAgICAgIGluc2VydExlZnQ6IG9wdGlvbnMgJiYgb3B0aW9ucy5pbnNlcnRMZWZ0LFxuICAgICAgICAgICAgICAgICAgICAgIGNsZWFyV2hlbkVtcHR5OiBmYWxzZSwgc2hhcmVkOiBvcHRpb25zICYmIG9wdGlvbnMuc2hhcmVkLFxuICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZU1vdXNlRXZlbnRzOiBvcHRpb25zICYmIG9wdGlvbnMuaGFuZGxlTW91c2VFdmVudHN9O1xuICAgICAgcG9zID0gY2xpcFBvcyh0aGlzLCBwb3MpO1xuICAgICAgcmV0dXJuIG1hcmtUZXh0KHRoaXMsIHBvcywgcG9zLCByZWFsT3B0cywgXCJib29rbWFya1wiKVxuICAgIH0sXG4gICAgZmluZE1hcmtzQXQ6IGZ1bmN0aW9uKHBvcykge1xuICAgICAgcG9zID0gY2xpcFBvcyh0aGlzLCBwb3MpO1xuICAgICAgdmFyIG1hcmtlcnMgPSBbXSwgc3BhbnMgPSBnZXRMaW5lKHRoaXMsIHBvcy5saW5lKS5tYXJrZWRTcGFucztcbiAgICAgIGlmIChzcGFucykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHNwYW5zLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIHZhciBzcGFuID0gc3BhbnNbaV07XG4gICAgICAgIGlmICgoc3Bhbi5mcm9tID09IG51bGwgfHwgc3Bhbi5mcm9tIDw9IHBvcy5jaCkgJiZcbiAgICAgICAgICAgIChzcGFuLnRvID09IG51bGwgfHwgc3Bhbi50byA+PSBwb3MuY2gpKVxuICAgICAgICAgIHsgbWFya2Vycy5wdXNoKHNwYW4ubWFya2VyLnBhcmVudCB8fCBzcGFuLm1hcmtlcik7IH1cbiAgICAgIH0gfVxuICAgICAgcmV0dXJuIG1hcmtlcnNcbiAgICB9LFxuICAgIGZpbmRNYXJrczogZnVuY3Rpb24oZnJvbSwgdG8sIGZpbHRlcikge1xuICAgICAgZnJvbSA9IGNsaXBQb3ModGhpcywgZnJvbSk7IHRvID0gY2xpcFBvcyh0aGlzLCB0byk7XG4gICAgICB2YXIgZm91bmQgPSBbXSwgbGluZU5vID0gZnJvbS5saW5lO1xuICAgICAgdGhpcy5pdGVyKGZyb20ubGluZSwgdG8ubGluZSArIDEsIGZ1bmN0aW9uIChsaW5lKSB7XG4gICAgICAgIHZhciBzcGFucyA9IGxpbmUubWFya2VkU3BhbnM7XG4gICAgICAgIGlmIChzcGFucykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHNwYW5zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgdmFyIHNwYW4gPSBzcGFuc1tpXTtcbiAgICAgICAgICBpZiAoIShzcGFuLnRvICE9IG51bGwgJiYgbGluZU5vID09IGZyb20ubGluZSAmJiBmcm9tLmNoID49IHNwYW4udG8gfHxcbiAgICAgICAgICAgICAgICBzcGFuLmZyb20gPT0gbnVsbCAmJiBsaW5lTm8gIT0gZnJvbS5saW5lIHx8XG4gICAgICAgICAgICAgICAgc3Bhbi5mcm9tICE9IG51bGwgJiYgbGluZU5vID09IHRvLmxpbmUgJiYgc3Bhbi5mcm9tID49IHRvLmNoKSAmJlxuICAgICAgICAgICAgICAoIWZpbHRlciB8fCBmaWx0ZXIoc3Bhbi5tYXJrZXIpKSlcbiAgICAgICAgICAgIHsgZm91bmQucHVzaChzcGFuLm1hcmtlci5wYXJlbnQgfHwgc3Bhbi5tYXJrZXIpOyB9XG4gICAgICAgIH0gfVxuICAgICAgICArK2xpbmVObztcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGZvdW5kXG4gICAgfSxcbiAgICBnZXRBbGxNYXJrczogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgbWFya2VycyA9IFtdO1xuICAgICAgdGhpcy5pdGVyKGZ1bmN0aW9uIChsaW5lKSB7XG4gICAgICAgIHZhciBzcHMgPSBsaW5lLm1hcmtlZFNwYW5zO1xuICAgICAgICBpZiAoc3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgc3BzLmxlbmd0aDsgKytpKVxuICAgICAgICAgIHsgaWYgKHNwc1tpXS5mcm9tICE9IG51bGwpIHsgbWFya2Vycy5wdXNoKHNwc1tpXS5tYXJrZXIpOyB9IH0gfVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gbWFya2Vyc1xuICAgIH0sXG5cbiAgICBwb3NGcm9tSW5kZXg6IGZ1bmN0aW9uKG9mZikge1xuICAgICAgdmFyIGNoLCBsaW5lTm8gPSB0aGlzLmZpcnN0LCBzZXBTaXplID0gdGhpcy5saW5lU2VwYXJhdG9yKCkubGVuZ3RoO1xuICAgICAgdGhpcy5pdGVyKGZ1bmN0aW9uIChsaW5lKSB7XG4gICAgICAgIHZhciBzeiA9IGxpbmUudGV4dC5sZW5ndGggKyBzZXBTaXplO1xuICAgICAgICBpZiAoc3ogPiBvZmYpIHsgY2ggPSBvZmY7IHJldHVybiB0cnVlIH1cbiAgICAgICAgb2ZmIC09IHN6O1xuICAgICAgICArK2xpbmVObztcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGNsaXBQb3ModGhpcywgUG9zKGxpbmVObywgY2gpKVxuICAgIH0sXG4gICAgaW5kZXhGcm9tUG9zOiBmdW5jdGlvbiAoY29vcmRzKSB7XG4gICAgICBjb29yZHMgPSBjbGlwUG9zKHRoaXMsIGNvb3Jkcyk7XG4gICAgICB2YXIgaW5kZXggPSBjb29yZHMuY2g7XG4gICAgICBpZiAoY29vcmRzLmxpbmUgPCB0aGlzLmZpcnN0IHx8IGNvb3Jkcy5jaCA8IDApIHsgcmV0dXJuIDAgfVxuICAgICAgdmFyIHNlcFNpemUgPSB0aGlzLmxpbmVTZXBhcmF0b3IoKS5sZW5ndGg7XG4gICAgICB0aGlzLml0ZXIodGhpcy5maXJzdCwgY29vcmRzLmxpbmUsIGZ1bmN0aW9uIChsaW5lKSB7IC8vIGl0ZXIgYWJvcnRzIHdoZW4gY2FsbGJhY2sgcmV0dXJucyBhIHRydXRoeSB2YWx1ZVxuICAgICAgICBpbmRleCArPSBsaW5lLnRleHQubGVuZ3RoICsgc2VwU2l6ZTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGluZGV4XG4gICAgfSxcblxuICAgIGNvcHk6IGZ1bmN0aW9uKGNvcHlIaXN0b3J5KSB7XG4gICAgICB2YXIgZG9jID0gbmV3IERvYyhnZXRMaW5lcyh0aGlzLCB0aGlzLmZpcnN0LCB0aGlzLmZpcnN0ICsgdGhpcy5zaXplKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubW9kZU9wdGlvbiwgdGhpcy5maXJzdCwgdGhpcy5saW5lU2VwLCB0aGlzLmRpcmVjdGlvbik7XG4gICAgICBkb2Muc2Nyb2xsVG9wID0gdGhpcy5zY3JvbGxUb3A7IGRvYy5zY3JvbGxMZWZ0ID0gdGhpcy5zY3JvbGxMZWZ0O1xuICAgICAgZG9jLnNlbCA9IHRoaXMuc2VsO1xuICAgICAgZG9jLmV4dGVuZCA9IGZhbHNlO1xuICAgICAgaWYgKGNvcHlIaXN0b3J5KSB7XG4gICAgICAgIGRvYy5oaXN0b3J5LnVuZG9EZXB0aCA9IHRoaXMuaGlzdG9yeS51bmRvRGVwdGg7XG4gICAgICAgIGRvYy5zZXRIaXN0b3J5KHRoaXMuZ2V0SGlzdG9yeSgpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBkb2NcbiAgICB9LFxuXG4gICAgbGlua2VkRG9jOiBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICBpZiAoIW9wdGlvbnMpIHsgb3B0aW9ucyA9IHt9OyB9XG4gICAgICB2YXIgZnJvbSA9IHRoaXMuZmlyc3QsIHRvID0gdGhpcy5maXJzdCArIHRoaXMuc2l6ZTtcbiAgICAgIGlmIChvcHRpb25zLmZyb20gIT0gbnVsbCAmJiBvcHRpb25zLmZyb20gPiBmcm9tKSB7IGZyb20gPSBvcHRpb25zLmZyb207IH1cbiAgICAgIGlmIChvcHRpb25zLnRvICE9IG51bGwgJiYgb3B0aW9ucy50byA8IHRvKSB7IHRvID0gb3B0aW9ucy50bzsgfVxuICAgICAgdmFyIGNvcHkgPSBuZXcgRG9jKGdldExpbmVzKHRoaXMsIGZyb20sIHRvKSwgb3B0aW9ucy5tb2RlIHx8IHRoaXMubW9kZU9wdGlvbiwgZnJvbSwgdGhpcy5saW5lU2VwLCB0aGlzLmRpcmVjdGlvbik7XG4gICAgICBpZiAob3B0aW9ucy5zaGFyZWRIaXN0KSB7IGNvcHkuaGlzdG9yeSA9IHRoaXMuaGlzdG9yeVxuICAgICAgOyB9KHRoaXMubGlua2VkIHx8ICh0aGlzLmxpbmtlZCA9IFtdKSkucHVzaCh7ZG9jOiBjb3B5LCBzaGFyZWRIaXN0OiBvcHRpb25zLnNoYXJlZEhpc3R9KTtcbiAgICAgIGNvcHkubGlua2VkID0gW3tkb2M6IHRoaXMsIGlzUGFyZW50OiB0cnVlLCBzaGFyZWRIaXN0OiBvcHRpb25zLnNoYXJlZEhpc3R9XTtcbiAgICAgIGNvcHlTaGFyZWRNYXJrZXJzKGNvcHksIGZpbmRTaGFyZWRNYXJrZXJzKHRoaXMpKTtcbiAgICAgIHJldHVybiBjb3B5XG4gICAgfSxcbiAgICB1bmxpbmtEb2M6IGZ1bmN0aW9uKG90aGVyKSB7XG4gICAgICBpZiAob3RoZXIgaW5zdGFuY2VvZiBDb2RlTWlycm9yKSB7IG90aGVyID0gb3RoZXIuZG9jOyB9XG4gICAgICBpZiAodGhpcy5saW5rZWQpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxpbmtlZC5sZW5ndGg7ICsraSkge1xuICAgICAgICB2YXIgbGluayA9IHRoaXMubGlua2VkW2ldO1xuICAgICAgICBpZiAobGluay5kb2MgIT0gb3RoZXIpIHsgY29udGludWUgfVxuICAgICAgICB0aGlzLmxpbmtlZC5zcGxpY2UoaSwgMSk7XG4gICAgICAgIG90aGVyLnVubGlua0RvYyh0aGlzKTtcbiAgICAgICAgZGV0YWNoU2hhcmVkTWFya2VycyhmaW5kU2hhcmVkTWFya2Vycyh0aGlzKSk7XG4gICAgICAgIGJyZWFrXG4gICAgICB9IH1cbiAgICAgIC8vIElmIHRoZSBoaXN0b3JpZXMgd2VyZSBzaGFyZWQsIHNwbGl0IHRoZW0gYWdhaW5cbiAgICAgIGlmIChvdGhlci5oaXN0b3J5ID09IHRoaXMuaGlzdG9yeSkge1xuICAgICAgICB2YXIgc3BsaXRJZHMgPSBbb3RoZXIuaWRdO1xuICAgICAgICBsaW5rZWREb2NzKG90aGVyLCBmdW5jdGlvbiAoZG9jKSB7IHJldHVybiBzcGxpdElkcy5wdXNoKGRvYy5pZCk7IH0sIHRydWUpO1xuICAgICAgICBvdGhlci5oaXN0b3J5ID0gbmV3IEhpc3RvcnkobnVsbCk7XG4gICAgICAgIG90aGVyLmhpc3RvcnkuZG9uZSA9IGNvcHlIaXN0b3J5QXJyYXkodGhpcy5oaXN0b3J5LmRvbmUsIHNwbGl0SWRzKTtcbiAgICAgICAgb3RoZXIuaGlzdG9yeS51bmRvbmUgPSBjb3B5SGlzdG9yeUFycmF5KHRoaXMuaGlzdG9yeS51bmRvbmUsIHNwbGl0SWRzKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIGl0ZXJMaW5rZWREb2NzOiBmdW5jdGlvbihmKSB7bGlua2VkRG9jcyh0aGlzLCBmKTt9LFxuXG4gICAgZ2V0TW9kZTogZnVuY3Rpb24oKSB7cmV0dXJuIHRoaXMubW9kZX0sXG4gICAgZ2V0RWRpdG9yOiBmdW5jdGlvbigpIHtyZXR1cm4gdGhpcy5jbX0sXG5cbiAgICBzcGxpdExpbmVzOiBmdW5jdGlvbihzdHIpIHtcbiAgICAgIGlmICh0aGlzLmxpbmVTZXApIHsgcmV0dXJuIHN0ci5zcGxpdCh0aGlzLmxpbmVTZXApIH1cbiAgICAgIHJldHVybiBzcGxpdExpbmVzQXV0byhzdHIpXG4gICAgfSxcbiAgICBsaW5lU2VwYXJhdG9yOiBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXMubGluZVNlcCB8fCBcIlxcblwiIH0sXG5cbiAgICBzZXREaXJlY3Rpb246IGRvY01ldGhvZE9wKGZ1bmN0aW9uIChkaXIpIHtcbiAgICAgIGlmIChkaXIgIT0gXCJydGxcIikgeyBkaXIgPSBcImx0clwiOyB9XG4gICAgICBpZiAoZGlyID09IHRoaXMuZGlyZWN0aW9uKSB7IHJldHVybiB9XG4gICAgICB0aGlzLmRpcmVjdGlvbiA9IGRpcjtcbiAgICAgIHRoaXMuaXRlcihmdW5jdGlvbiAobGluZSkgeyByZXR1cm4gbGluZS5vcmRlciA9IG51bGw7IH0pO1xuICAgICAgaWYgKHRoaXMuY20pIHsgZGlyZWN0aW9uQ2hhbmdlZCh0aGlzLmNtKTsgfVxuICAgIH0pXG4gIH0pO1xuXG4gIC8vIFB1YmxpYyBhbGlhcy5cbiAgRG9jLnByb3RvdHlwZS5lYWNoTGluZSA9IERvYy5wcm90b3R5cGUuaXRlcjtcblxuICAvLyBLbHVkZ2UgdG8gd29yayBhcm91bmQgc3RyYW5nZSBJRSBiZWhhdmlvciB3aGVyZSBpdCdsbCBzb21ldGltZXNcbiAgLy8gcmUtZmlyZSBhIHNlcmllcyBvZiBkcmFnLXJlbGF0ZWQgZXZlbnRzIHJpZ2h0IGFmdGVyIHRoZSBkcm9wICgjMTU1MSlcbiAgdmFyIGxhc3REcm9wID0gMDtcblxuICBmdW5jdGlvbiBvbkRyb3AoZSkge1xuICAgIHZhciBjbSA9IHRoaXM7XG4gICAgY2xlYXJEcmFnQ3Vyc29yKGNtKTtcbiAgICBpZiAoc2lnbmFsRE9NRXZlbnQoY20sIGUpIHx8IGV2ZW50SW5XaWRnZXQoY20uZGlzcGxheSwgZSkpXG4gICAgICB7IHJldHVybiB9XG4gICAgZV9wcmV2ZW50RGVmYXVsdChlKTtcbiAgICBpZiAoaWUpIHsgbGFzdERyb3AgPSArbmV3IERhdGU7IH1cbiAgICB2YXIgcG9zID0gcG9zRnJvbU1vdXNlKGNtLCBlLCB0cnVlKSwgZmlsZXMgPSBlLmRhdGFUcmFuc2Zlci5maWxlcztcbiAgICBpZiAoIXBvcyB8fCBjbS5pc1JlYWRPbmx5KCkpIHsgcmV0dXJuIH1cbiAgICAvLyBNaWdodCBiZSBhIGZpbGUgZHJvcCwgaW4gd2hpY2ggY2FzZSB3ZSBzaW1wbHkgZXh0cmFjdCB0aGUgdGV4dFxuICAgIC8vIGFuZCBpbnNlcnQgaXQuXG4gICAgaWYgKGZpbGVzICYmIGZpbGVzLmxlbmd0aCAmJiB3aW5kb3cuRmlsZVJlYWRlciAmJiB3aW5kb3cuRmlsZSkge1xuICAgICAgdmFyIG4gPSBmaWxlcy5sZW5ndGgsIHRleHQgPSBBcnJheShuKSwgcmVhZCA9IDA7XG4gICAgICB2YXIgbWFya0FzUmVhZEFuZFBhc3RlSWZBbGxGaWxlc0FyZVJlYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICgrK3JlYWQgPT0gbikge1xuICAgICAgICAgIG9wZXJhdGlvbihjbSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcG9zID0gY2xpcFBvcyhjbS5kb2MsIHBvcyk7XG4gICAgICAgICAgICB2YXIgY2hhbmdlID0ge2Zyb206IHBvcywgdG86IHBvcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogY20uZG9jLnNwbGl0TGluZXMoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0LmZpbHRlcihmdW5jdGlvbiAodCkgeyByZXR1cm4gdCAhPSBudWxsOyB9KS5qb2luKGNtLmRvYy5saW5lU2VwYXJhdG9yKCkpKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ2luOiBcInBhc3RlXCJ9O1xuICAgICAgICAgICAgbWFrZUNoYW5nZShjbS5kb2MsIGNoYW5nZSk7XG4gICAgICAgICAgICBzZXRTZWxlY3Rpb25SZXBsYWNlSGlzdG9yeShjbS5kb2MsIHNpbXBsZVNlbGVjdGlvbihjbGlwUG9zKGNtLmRvYywgcG9zKSwgY2xpcFBvcyhjbS5kb2MsIGNoYW5nZUVuZChjaGFuZ2UpKSkpO1xuICAgICAgICAgIH0pKCk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICB2YXIgcmVhZFRleHRGcm9tRmlsZSA9IGZ1bmN0aW9uIChmaWxlLCBpKSB7XG4gICAgICAgIGlmIChjbS5vcHRpb25zLmFsbG93RHJvcEZpbGVUeXBlcyAmJlxuICAgICAgICAgICAgaW5kZXhPZihjbS5vcHRpb25zLmFsbG93RHJvcEZpbGVUeXBlcywgZmlsZS50eXBlKSA9PSAtMSkge1xuICAgICAgICAgIG1hcmtBc1JlYWRBbmRQYXN0ZUlmQWxsRmlsZXNBcmVSZWFkKCk7XG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgICAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyO1xuICAgICAgICByZWFkZXIub25lcnJvciA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIG1hcmtBc1JlYWRBbmRQYXN0ZUlmQWxsRmlsZXNBcmVSZWFkKCk7IH07XG4gICAgICAgIHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdmFyIGNvbnRlbnQgPSByZWFkZXIucmVzdWx0O1xuICAgICAgICAgIGlmICgvW1xceDAwLVxceDA4XFx4MGUtXFx4MWZdezJ9Ly50ZXN0KGNvbnRlbnQpKSB7XG4gICAgICAgICAgICBtYXJrQXNSZWFkQW5kUGFzdGVJZkFsbEZpbGVzQXJlUmVhZCgpO1xuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgfVxuICAgICAgICAgIHRleHRbaV0gPSBjb250ZW50O1xuICAgICAgICAgIG1hcmtBc1JlYWRBbmRQYXN0ZUlmQWxsRmlsZXNBcmVSZWFkKCk7XG4gICAgICAgIH07XG4gICAgICAgIHJlYWRlci5yZWFkQXNUZXh0KGZpbGUpO1xuICAgICAgfTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZmlsZXMubGVuZ3RoOyBpKyspIHsgcmVhZFRleHRGcm9tRmlsZShmaWxlc1tpXSwgaSk7IH1cbiAgICB9IGVsc2UgeyAvLyBOb3JtYWwgZHJvcFxuICAgICAgLy8gRG9uJ3QgZG8gYSByZXBsYWNlIGlmIHRoZSBkcm9wIGhhcHBlbmVkIGluc2lkZSBvZiB0aGUgc2VsZWN0ZWQgdGV4dC5cbiAgICAgIGlmIChjbS5zdGF0ZS5kcmFnZ2luZ1RleHQgJiYgY20uZG9jLnNlbC5jb250YWlucyhwb3MpID4gLTEpIHtcbiAgICAgICAgY20uc3RhdGUuZHJhZ2dpbmdUZXh0KGUpO1xuICAgICAgICAvLyBFbnN1cmUgdGhlIGVkaXRvciBpcyByZS1mb2N1c2VkXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgeyByZXR1cm4gY20uZGlzcGxheS5pbnB1dC5mb2N1cygpOyB9LCAyMCk7XG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgdHJ5IHtcbiAgICAgICAgdmFyIHRleHQkMSA9IGUuZGF0YVRyYW5zZmVyLmdldERhdGEoXCJUZXh0XCIpO1xuICAgICAgICBpZiAodGV4dCQxKSB7XG4gICAgICAgICAgdmFyIHNlbGVjdGVkO1xuICAgICAgICAgIGlmIChjbS5zdGF0ZS5kcmFnZ2luZ1RleHQgJiYgIWNtLnN0YXRlLmRyYWdnaW5nVGV4dC5jb3B5KVxuICAgICAgICAgICAgeyBzZWxlY3RlZCA9IGNtLmxpc3RTZWxlY3Rpb25zKCk7IH1cbiAgICAgICAgICBzZXRTZWxlY3Rpb25Ob1VuZG8oY20uZG9jLCBzaW1wbGVTZWxlY3Rpb24ocG9zLCBwb3MpKTtcbiAgICAgICAgICBpZiAoc2VsZWN0ZWQpIHsgZm9yICh2YXIgaSQxID0gMDsgaSQxIDwgc2VsZWN0ZWQubGVuZ3RoOyArK2kkMSlcbiAgICAgICAgICAgIHsgcmVwbGFjZVJhbmdlKGNtLmRvYywgXCJcIiwgc2VsZWN0ZWRbaSQxXS5hbmNob3IsIHNlbGVjdGVkW2kkMV0uaGVhZCwgXCJkcmFnXCIpOyB9IH1cbiAgICAgICAgICBjbS5yZXBsYWNlU2VsZWN0aW9uKHRleHQkMSwgXCJhcm91bmRcIiwgXCJwYXN0ZVwiKTtcbiAgICAgICAgICBjbS5kaXNwbGF5LmlucHV0LmZvY3VzKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNhdGNoKGUkMSl7fVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIG9uRHJhZ1N0YXJ0KGNtLCBlKSB7XG4gICAgaWYgKGllICYmICghY20uc3RhdGUuZHJhZ2dpbmdUZXh0IHx8ICtuZXcgRGF0ZSAtIGxhc3REcm9wIDwgMTAwKSkgeyBlX3N0b3AoZSk7IHJldHVybiB9XG4gICAgaWYgKHNpZ25hbERPTUV2ZW50KGNtLCBlKSB8fCBldmVudEluV2lkZ2V0KGNtLmRpc3BsYXksIGUpKSB7IHJldHVybiB9XG5cbiAgICBlLmRhdGFUcmFuc2Zlci5zZXREYXRhKFwiVGV4dFwiLCBjbS5nZXRTZWxlY3Rpb24oKSk7XG4gICAgZS5kYXRhVHJhbnNmZXIuZWZmZWN0QWxsb3dlZCA9IFwiY29weU1vdmVcIjtcblxuICAgIC8vIFVzZSBkdW1teSBpbWFnZSBpbnN0ZWFkIG9mIGRlZmF1bHQgYnJvd3NlcnMgaW1hZ2UuXG4gICAgLy8gUmVjZW50IFNhZmFyaSAofjYuMC4yKSBoYXZlIGEgdGVuZGVuY3kgdG8gc2VnZmF1bHQgd2hlbiB0aGlzIGhhcHBlbnMsIHNvIHdlIGRvbid0IGRvIGl0IHRoZXJlLlxuICAgIGlmIChlLmRhdGFUcmFuc2Zlci5zZXREcmFnSW1hZ2UgJiYgIXNhZmFyaSkge1xuICAgICAgdmFyIGltZyA9IGVsdChcImltZ1wiLCBudWxsLCBudWxsLCBcInBvc2l0aW9uOiBmaXhlZDsgbGVmdDogMDsgdG9wOiAwO1wiKTtcbiAgICAgIGltZy5zcmMgPSBcImRhdGE6aW1hZ2UvZ2lmO2Jhc2U2NCxSMGxHT0RsaEFRQUJBQUFBQUNINUJBRUtBQUVBTEFBQUFBQUJBQUVBQUFJQ1RBRUFPdz09XCI7XG4gICAgICBpZiAocHJlc3RvKSB7XG4gICAgICAgIGltZy53aWR0aCA9IGltZy5oZWlnaHQgPSAxO1xuICAgICAgICBjbS5kaXNwbGF5LndyYXBwZXIuYXBwZW5kQ2hpbGQoaW1nKTtcbiAgICAgICAgLy8gRm9yY2UgYSByZWxheW91dCwgb3IgT3BlcmEgd29uJ3QgdXNlIG91ciBpbWFnZSBmb3Igc29tZSBvYnNjdXJlIHJlYXNvblxuICAgICAgICBpbWcuX3RvcCA9IGltZy5vZmZzZXRUb3A7XG4gICAgICB9XG4gICAgICBlLmRhdGFUcmFuc2Zlci5zZXREcmFnSW1hZ2UoaW1nLCAwLCAwKTtcbiAgICAgIGlmIChwcmVzdG8pIHsgaW1nLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoaW1nKTsgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIG9uRHJhZ092ZXIoY20sIGUpIHtcbiAgICB2YXIgcG9zID0gcG9zRnJvbU1vdXNlKGNtLCBlKTtcbiAgICBpZiAoIXBvcykgeyByZXR1cm4gfVxuICAgIHZhciBmcmFnID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICAgIGRyYXdTZWxlY3Rpb25DdXJzb3IoY20sIHBvcywgZnJhZyk7XG4gICAgaWYgKCFjbS5kaXNwbGF5LmRyYWdDdXJzb3IpIHtcbiAgICAgIGNtLmRpc3BsYXkuZHJhZ0N1cnNvciA9IGVsdChcImRpdlwiLCBudWxsLCBcIkNvZGVNaXJyb3ItY3Vyc29ycyBDb2RlTWlycm9yLWRyYWdjdXJzb3JzXCIpO1xuICAgICAgY20uZGlzcGxheS5saW5lU3BhY2UuaW5zZXJ0QmVmb3JlKGNtLmRpc3BsYXkuZHJhZ0N1cnNvciwgY20uZGlzcGxheS5jdXJzb3JEaXYpO1xuICAgIH1cbiAgICByZW1vdmVDaGlsZHJlbkFuZEFkZChjbS5kaXNwbGF5LmRyYWdDdXJzb3IsIGZyYWcpO1xuICB9XG5cbiAgZnVuY3Rpb24gY2xlYXJEcmFnQ3Vyc29yKGNtKSB7XG4gICAgaWYgKGNtLmRpc3BsYXkuZHJhZ0N1cnNvcikge1xuICAgICAgY20uZGlzcGxheS5saW5lU3BhY2UucmVtb3ZlQ2hpbGQoY20uZGlzcGxheS5kcmFnQ3Vyc29yKTtcbiAgICAgIGNtLmRpc3BsYXkuZHJhZ0N1cnNvciA9IG51bGw7XG4gICAgfVxuICB9XG5cbiAgLy8gVGhlc2UgbXVzdCBiZSBoYW5kbGVkIGNhcmVmdWxseSwgYmVjYXVzZSBuYWl2ZWx5IHJlZ2lzdGVyaW5nIGFcbiAgLy8gaGFuZGxlciBmb3IgZWFjaCBlZGl0b3Igd2lsbCBjYXVzZSB0aGUgZWRpdG9ycyB0byBuZXZlciBiZVxuICAvLyBnYXJiYWdlIGNvbGxlY3RlZC5cblxuICBmdW5jdGlvbiBmb3JFYWNoQ29kZU1pcnJvcihmKSB7XG4gICAgaWYgKCFkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKSB7IHJldHVybiB9XG4gICAgdmFyIGJ5Q2xhc3MgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiQ29kZU1pcnJvclwiKSwgZWRpdG9ycyA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYnlDbGFzcy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGNtID0gYnlDbGFzc1tpXS5Db2RlTWlycm9yO1xuICAgICAgaWYgKGNtKSB7IGVkaXRvcnMucHVzaChjbSk7IH1cbiAgICB9XG4gICAgaWYgKGVkaXRvcnMubGVuZ3RoKSB7IGVkaXRvcnNbMF0ub3BlcmF0aW9uKGZ1bmN0aW9uICgpIHtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWRpdG9ycy5sZW5ndGg7IGkrKykgeyBmKGVkaXRvcnNbaV0pOyB9XG4gICAgfSk7IH1cbiAgfVxuXG4gIHZhciBnbG9iYWxzUmVnaXN0ZXJlZCA9IGZhbHNlO1xuICBmdW5jdGlvbiBlbnN1cmVHbG9iYWxIYW5kbGVycygpIHtcbiAgICBpZiAoZ2xvYmFsc1JlZ2lzdGVyZWQpIHsgcmV0dXJuIH1cbiAgICByZWdpc3Rlckdsb2JhbEhhbmRsZXJzKCk7XG4gICAgZ2xvYmFsc1JlZ2lzdGVyZWQgPSB0cnVlO1xuICB9XG4gIGZ1bmN0aW9uIHJlZ2lzdGVyR2xvYmFsSGFuZGxlcnMoKSB7XG4gICAgLy8gV2hlbiB0aGUgd2luZG93IHJlc2l6ZXMsIHdlIG5lZWQgdG8gcmVmcmVzaCBhY3RpdmUgZWRpdG9ycy5cbiAgICB2YXIgcmVzaXplVGltZXI7XG4gICAgb24od2luZG93LCBcInJlc2l6ZVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAocmVzaXplVGltZXIgPT0gbnVsbCkgeyByZXNpemVUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICByZXNpemVUaW1lciA9IG51bGw7XG4gICAgICAgIGZvckVhY2hDb2RlTWlycm9yKG9uUmVzaXplKTtcbiAgICAgIH0sIDEwMCk7IH1cbiAgICB9KTtcbiAgICAvLyBXaGVuIHRoZSB3aW5kb3cgbG9zZXMgZm9jdXMsIHdlIHdhbnQgdG8gc2hvdyB0aGUgZWRpdG9yIGFzIGJsdXJyZWRcbiAgICBvbih3aW5kb3csIFwiYmx1clwiLCBmdW5jdGlvbiAoKSB7IHJldHVybiBmb3JFYWNoQ29kZU1pcnJvcihvbkJsdXIpOyB9KTtcbiAgfVxuICAvLyBDYWxsZWQgd2hlbiB0aGUgd2luZG93IHJlc2l6ZXNcbiAgZnVuY3Rpb24gb25SZXNpemUoY20pIHtcbiAgICB2YXIgZCA9IGNtLmRpc3BsYXk7XG4gICAgLy8gTWlnaHQgYmUgYSB0ZXh0IHNjYWxpbmcgb3BlcmF0aW9uLCBjbGVhciBzaXplIGNhY2hlcy5cbiAgICBkLmNhY2hlZENoYXJXaWR0aCA9IGQuY2FjaGVkVGV4dEhlaWdodCA9IGQuY2FjaGVkUGFkZGluZ0ggPSBudWxsO1xuICAgIGQuc2Nyb2xsYmFyc0NsaXBwZWQgPSBmYWxzZTtcbiAgICBjbS5zZXRTaXplKCk7XG4gIH1cblxuICB2YXIga2V5TmFtZXMgPSB7XG4gICAgMzogXCJQYXVzZVwiLCA4OiBcIkJhY2tzcGFjZVwiLCA5OiBcIlRhYlwiLCAxMzogXCJFbnRlclwiLCAxNjogXCJTaGlmdFwiLCAxNzogXCJDdHJsXCIsIDE4OiBcIkFsdFwiLFxuICAgIDE5OiBcIlBhdXNlXCIsIDIwOiBcIkNhcHNMb2NrXCIsIDI3OiBcIkVzY1wiLCAzMjogXCJTcGFjZVwiLCAzMzogXCJQYWdlVXBcIiwgMzQ6IFwiUGFnZURvd25cIiwgMzU6IFwiRW5kXCIsXG4gICAgMzY6IFwiSG9tZVwiLCAzNzogXCJMZWZ0XCIsIDM4OiBcIlVwXCIsIDM5OiBcIlJpZ2h0XCIsIDQwOiBcIkRvd25cIiwgNDQ6IFwiUHJpbnRTY3JuXCIsIDQ1OiBcIkluc2VydFwiLFxuICAgIDQ2OiBcIkRlbGV0ZVwiLCA1OTogXCI7XCIsIDYxOiBcIj1cIiwgOTE6IFwiTW9kXCIsIDkyOiBcIk1vZFwiLCA5MzogXCJNb2RcIixcbiAgICAxMDY6IFwiKlwiLCAxMDc6IFwiPVwiLCAxMDk6IFwiLVwiLCAxMTA6IFwiLlwiLCAxMTE6IFwiL1wiLCAxNDU6IFwiU2Nyb2xsTG9ja1wiLFxuICAgIDE3MzogXCItXCIsIDE4NjogXCI7XCIsIDE4NzogXCI9XCIsIDE4ODogXCIsXCIsIDE4OTogXCItXCIsIDE5MDogXCIuXCIsIDE5MTogXCIvXCIsIDE5MjogXCJgXCIsIDIxOTogXCJbXCIsIDIyMDogXCJcXFxcXCIsXG4gICAgMjIxOiBcIl1cIiwgMjIyOiBcIidcIiwgMjI0OiBcIk1vZFwiLCA2MzIzMjogXCJVcFwiLCA2MzIzMzogXCJEb3duXCIsIDYzMjM0OiBcIkxlZnRcIiwgNjMyMzU6IFwiUmlnaHRcIiwgNjMyNzI6IFwiRGVsZXRlXCIsXG4gICAgNjMyNzM6IFwiSG9tZVwiLCA2MzI3NTogXCJFbmRcIiwgNjMyNzY6IFwiUGFnZVVwXCIsIDYzMjc3OiBcIlBhZ2VEb3duXCIsIDYzMzAyOiBcIkluc2VydFwiXG4gIH07XG5cbiAgLy8gTnVtYmVyIGtleXNcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCAxMDsgaSsrKSB7IGtleU5hbWVzW2kgKyA0OF0gPSBrZXlOYW1lc1tpICsgOTZdID0gU3RyaW5nKGkpOyB9XG4gIC8vIEFscGhhYmV0aWMga2V5c1xuICBmb3IgKHZhciBpJDEgPSA2NTsgaSQxIDw9IDkwOyBpJDErKykgeyBrZXlOYW1lc1tpJDFdID0gU3RyaW5nLmZyb21DaGFyQ29kZShpJDEpOyB9XG4gIC8vIEZ1bmN0aW9uIGtleXNcbiAgZm9yICh2YXIgaSQyID0gMTsgaSQyIDw9IDEyOyBpJDIrKykgeyBrZXlOYW1lc1tpJDIgKyAxMTFdID0ga2V5TmFtZXNbaSQyICsgNjMyMzVdID0gXCJGXCIgKyBpJDI7IH1cblxuICB2YXIga2V5TWFwID0ge307XG5cbiAga2V5TWFwLmJhc2ljID0ge1xuICAgIFwiTGVmdFwiOiBcImdvQ2hhckxlZnRcIiwgXCJSaWdodFwiOiBcImdvQ2hhclJpZ2h0XCIsIFwiVXBcIjogXCJnb0xpbmVVcFwiLCBcIkRvd25cIjogXCJnb0xpbmVEb3duXCIsXG4gICAgXCJFbmRcIjogXCJnb0xpbmVFbmRcIiwgXCJIb21lXCI6IFwiZ29MaW5lU3RhcnRTbWFydFwiLCBcIlBhZ2VVcFwiOiBcImdvUGFnZVVwXCIsIFwiUGFnZURvd25cIjogXCJnb1BhZ2VEb3duXCIsXG4gICAgXCJEZWxldGVcIjogXCJkZWxDaGFyQWZ0ZXJcIiwgXCJCYWNrc3BhY2VcIjogXCJkZWxDaGFyQmVmb3JlXCIsIFwiU2hpZnQtQmFja3NwYWNlXCI6IFwiZGVsQ2hhckJlZm9yZVwiLFxuICAgIFwiVGFiXCI6IFwiZGVmYXVsdFRhYlwiLCBcIlNoaWZ0LVRhYlwiOiBcImluZGVudEF1dG9cIixcbiAgICBcIkVudGVyXCI6IFwibmV3bGluZUFuZEluZGVudFwiLCBcIkluc2VydFwiOiBcInRvZ2dsZU92ZXJ3cml0ZVwiLFxuICAgIFwiRXNjXCI6IFwic2luZ2xlU2VsZWN0aW9uXCJcbiAgfTtcbiAgLy8gTm90ZSB0aGF0IHRoZSBzYXZlIGFuZCBmaW5kLXJlbGF0ZWQgY29tbWFuZHMgYXJlbid0IGRlZmluZWQgYnlcbiAgLy8gZGVmYXVsdC4gVXNlciBjb2RlIG9yIGFkZG9ucyBjYW4gZGVmaW5lIHRoZW0uIFVua25vd24gY29tbWFuZHNcbiAgLy8gYXJlIHNpbXBseSBpZ25vcmVkLlxuICBrZXlNYXAucGNEZWZhdWx0ID0ge1xuICAgIFwiQ3RybC1BXCI6IFwic2VsZWN0QWxsXCIsIFwiQ3RybC1EXCI6IFwiZGVsZXRlTGluZVwiLCBcIkN0cmwtWlwiOiBcInVuZG9cIiwgXCJTaGlmdC1DdHJsLVpcIjogXCJyZWRvXCIsIFwiQ3RybC1ZXCI6IFwicmVkb1wiLFxuICAgIFwiQ3RybC1Ib21lXCI6IFwiZ29Eb2NTdGFydFwiLCBcIkN0cmwtRW5kXCI6IFwiZ29Eb2NFbmRcIiwgXCJDdHJsLVVwXCI6IFwiZ29MaW5lVXBcIiwgXCJDdHJsLURvd25cIjogXCJnb0xpbmVEb3duXCIsXG4gICAgXCJDdHJsLUxlZnRcIjogXCJnb0dyb3VwTGVmdFwiLCBcIkN0cmwtUmlnaHRcIjogXCJnb0dyb3VwUmlnaHRcIiwgXCJBbHQtTGVmdFwiOiBcImdvTGluZVN0YXJ0XCIsIFwiQWx0LVJpZ2h0XCI6IFwiZ29MaW5lRW5kXCIsXG4gICAgXCJDdHJsLUJhY2tzcGFjZVwiOiBcImRlbEdyb3VwQmVmb3JlXCIsIFwiQ3RybC1EZWxldGVcIjogXCJkZWxHcm91cEFmdGVyXCIsIFwiQ3RybC1TXCI6IFwic2F2ZVwiLCBcIkN0cmwtRlwiOiBcImZpbmRcIixcbiAgICBcIkN0cmwtR1wiOiBcImZpbmROZXh0XCIsIFwiU2hpZnQtQ3RybC1HXCI6IFwiZmluZFByZXZcIiwgXCJTaGlmdC1DdHJsLUZcIjogXCJyZXBsYWNlXCIsIFwiU2hpZnQtQ3RybC1SXCI6IFwicmVwbGFjZUFsbFwiLFxuICAgIFwiQ3RybC1bXCI6IFwiaW5kZW50TGVzc1wiLCBcIkN0cmwtXVwiOiBcImluZGVudE1vcmVcIixcbiAgICBcIkN0cmwtVVwiOiBcInVuZG9TZWxlY3Rpb25cIiwgXCJTaGlmdC1DdHJsLVVcIjogXCJyZWRvU2VsZWN0aW9uXCIsIFwiQWx0LVVcIjogXCJyZWRvU2VsZWN0aW9uXCIsXG4gICAgXCJmYWxsdGhyb3VnaFwiOiBcImJhc2ljXCJcbiAgfTtcbiAgLy8gVmVyeSBiYXNpYyByZWFkbGluZS9lbWFjcy1zdHlsZSBiaW5kaW5ncywgd2hpY2ggYXJlIHN0YW5kYXJkIG9uIE1hYy5cbiAga2V5TWFwLmVtYWNzeSA9IHtcbiAgICBcIkN0cmwtRlwiOiBcImdvQ2hhclJpZ2h0XCIsIFwiQ3RybC1CXCI6IFwiZ29DaGFyTGVmdFwiLCBcIkN0cmwtUFwiOiBcImdvTGluZVVwXCIsIFwiQ3RybC1OXCI6IFwiZ29MaW5lRG93blwiLFxuICAgIFwiQ3RybC1BXCI6IFwiZ29MaW5lU3RhcnRcIiwgXCJDdHJsLUVcIjogXCJnb0xpbmVFbmRcIiwgXCJDdHJsLVZcIjogXCJnb1BhZ2VEb3duXCIsIFwiU2hpZnQtQ3RybC1WXCI6IFwiZ29QYWdlVXBcIixcbiAgICBcIkN0cmwtRFwiOiBcImRlbENoYXJBZnRlclwiLCBcIkN0cmwtSFwiOiBcImRlbENoYXJCZWZvcmVcIiwgXCJBbHQtQmFja3NwYWNlXCI6IFwiZGVsV29yZEJlZm9yZVwiLCBcIkN0cmwtS1wiOiBcImtpbGxMaW5lXCIsXG4gICAgXCJDdHJsLVRcIjogXCJ0cmFuc3Bvc2VDaGFyc1wiLCBcIkN0cmwtT1wiOiBcIm9wZW5MaW5lXCJcbiAgfTtcbiAga2V5TWFwLm1hY0RlZmF1bHQgPSB7XG4gICAgXCJDbWQtQVwiOiBcInNlbGVjdEFsbFwiLCBcIkNtZC1EXCI6IFwiZGVsZXRlTGluZVwiLCBcIkNtZC1aXCI6IFwidW5kb1wiLCBcIlNoaWZ0LUNtZC1aXCI6IFwicmVkb1wiLCBcIkNtZC1ZXCI6IFwicmVkb1wiLFxuICAgIFwiQ21kLUhvbWVcIjogXCJnb0RvY1N0YXJ0XCIsIFwiQ21kLVVwXCI6IFwiZ29Eb2NTdGFydFwiLCBcIkNtZC1FbmRcIjogXCJnb0RvY0VuZFwiLCBcIkNtZC1Eb3duXCI6IFwiZ29Eb2NFbmRcIiwgXCJBbHQtTGVmdFwiOiBcImdvR3JvdXBMZWZ0XCIsXG4gICAgXCJBbHQtUmlnaHRcIjogXCJnb0dyb3VwUmlnaHRcIiwgXCJDbWQtTGVmdFwiOiBcImdvTGluZUxlZnRcIiwgXCJDbWQtUmlnaHRcIjogXCJnb0xpbmVSaWdodFwiLCBcIkFsdC1CYWNrc3BhY2VcIjogXCJkZWxHcm91cEJlZm9yZVwiLFxuICAgIFwiQ3RybC1BbHQtQmFja3NwYWNlXCI6IFwiZGVsR3JvdXBBZnRlclwiLCBcIkFsdC1EZWxldGVcIjogXCJkZWxHcm91cEFmdGVyXCIsIFwiQ21kLVNcIjogXCJzYXZlXCIsIFwiQ21kLUZcIjogXCJmaW5kXCIsXG4gICAgXCJDbWQtR1wiOiBcImZpbmROZXh0XCIsIFwiU2hpZnQtQ21kLUdcIjogXCJmaW5kUHJldlwiLCBcIkNtZC1BbHQtRlwiOiBcInJlcGxhY2VcIiwgXCJTaGlmdC1DbWQtQWx0LUZcIjogXCJyZXBsYWNlQWxsXCIsXG4gICAgXCJDbWQtW1wiOiBcImluZGVudExlc3NcIiwgXCJDbWQtXVwiOiBcImluZGVudE1vcmVcIiwgXCJDbWQtQmFja3NwYWNlXCI6IFwiZGVsV3JhcHBlZExpbmVMZWZ0XCIsIFwiQ21kLURlbGV0ZVwiOiBcImRlbFdyYXBwZWRMaW5lUmlnaHRcIixcbiAgICBcIkNtZC1VXCI6IFwidW5kb1NlbGVjdGlvblwiLCBcIlNoaWZ0LUNtZC1VXCI6IFwicmVkb1NlbGVjdGlvblwiLCBcIkN0cmwtVXBcIjogXCJnb0RvY1N0YXJ0XCIsIFwiQ3RybC1Eb3duXCI6IFwiZ29Eb2NFbmRcIixcbiAgICBcImZhbGx0aHJvdWdoXCI6IFtcImJhc2ljXCIsIFwiZW1hY3N5XCJdXG4gIH07XG4gIGtleU1hcFtcImRlZmF1bHRcIl0gPSBtYWMgPyBrZXlNYXAubWFjRGVmYXVsdCA6IGtleU1hcC5wY0RlZmF1bHQ7XG5cbiAgLy8gS0VZTUFQIERJU1BBVENIXG5cbiAgZnVuY3Rpb24gbm9ybWFsaXplS2V5TmFtZShuYW1lKSB7XG4gICAgdmFyIHBhcnRzID0gbmFtZS5zcGxpdCgvLSg/ISQpLyk7XG4gICAgbmFtZSA9IHBhcnRzW3BhcnRzLmxlbmd0aCAtIDFdO1xuICAgIHZhciBhbHQsIGN0cmwsIHNoaWZ0LCBjbWQ7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYXJ0cy5sZW5ndGggLSAxOyBpKyspIHtcbiAgICAgIHZhciBtb2QgPSBwYXJ0c1tpXTtcbiAgICAgIGlmICgvXihjbWR8bWV0YXxtKSQvaS50ZXN0KG1vZCkpIHsgY21kID0gdHJ1ZTsgfVxuICAgICAgZWxzZSBpZiAoL15hKGx0KT8kL2kudGVzdChtb2QpKSB7IGFsdCA9IHRydWU7IH1cbiAgICAgIGVsc2UgaWYgKC9eKGN8Y3RybHxjb250cm9sKSQvaS50ZXN0KG1vZCkpIHsgY3RybCA9IHRydWU7IH1cbiAgICAgIGVsc2UgaWYgKC9ecyhoaWZ0KT8kL2kudGVzdChtb2QpKSB7IHNoaWZ0ID0gdHJ1ZTsgfVxuICAgICAgZWxzZSB7IHRocm93IG5ldyBFcnJvcihcIlVucmVjb2duaXplZCBtb2RpZmllciBuYW1lOiBcIiArIG1vZCkgfVxuICAgIH1cbiAgICBpZiAoYWx0KSB7IG5hbWUgPSBcIkFsdC1cIiArIG5hbWU7IH1cbiAgICBpZiAoY3RybCkgeyBuYW1lID0gXCJDdHJsLVwiICsgbmFtZTsgfVxuICAgIGlmIChjbWQpIHsgbmFtZSA9IFwiQ21kLVwiICsgbmFtZTsgfVxuICAgIGlmIChzaGlmdCkgeyBuYW1lID0gXCJTaGlmdC1cIiArIG5hbWU7IH1cbiAgICByZXR1cm4gbmFtZVxuICB9XG5cbiAgLy8gVGhpcyBpcyBhIGtsdWRnZSB0byBrZWVwIGtleW1hcHMgbW9zdGx5IHdvcmtpbmcgYXMgcmF3IG9iamVjdHNcbiAgLy8gKGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5KSB3aGlsZSBhdCB0aGUgc2FtZSB0aW1lIHN1cHBvcnQgZmVhdHVyZXNcbiAgLy8gbGlrZSBub3JtYWxpemF0aW9uIGFuZCBtdWx0aS1zdHJva2Uga2V5IGJpbmRpbmdzLiBJdCBjb21waWxlcyBhXG4gIC8vIG5ldyBub3JtYWxpemVkIGtleW1hcCwgYW5kIHRoZW4gdXBkYXRlcyB0aGUgb2xkIG9iamVjdCB0byByZWZsZWN0XG4gIC8vIHRoaXMuXG4gIGZ1bmN0aW9uIG5vcm1hbGl6ZUtleU1hcChrZXltYXApIHtcbiAgICB2YXIgY29weSA9IHt9O1xuICAgIGZvciAodmFyIGtleW5hbWUgaW4ga2V5bWFwKSB7IGlmIChrZXltYXAuaGFzT3duUHJvcGVydHkoa2V5bmFtZSkpIHtcbiAgICAgIHZhciB2YWx1ZSA9IGtleW1hcFtrZXluYW1lXTtcbiAgICAgIGlmICgvXihuYW1lfGZhbGx0aHJvdWdofChkZXxhdCl0YWNoKSQvLnRlc3Qoa2V5bmFtZSkpIHsgY29udGludWUgfVxuICAgICAgaWYgKHZhbHVlID09IFwiLi4uXCIpIHsgZGVsZXRlIGtleW1hcFtrZXluYW1lXTsgY29udGludWUgfVxuXG4gICAgICB2YXIga2V5cyA9IG1hcChrZXluYW1lLnNwbGl0KFwiIFwiKSwgbm9ybWFsaXplS2V5TmFtZSk7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIHZhbCA9ICh2b2lkIDApLCBuYW1lID0gKHZvaWQgMCk7XG4gICAgICAgIGlmIChpID09IGtleXMubGVuZ3RoIC0gMSkge1xuICAgICAgICAgIG5hbWUgPSBrZXlzLmpvaW4oXCIgXCIpO1xuICAgICAgICAgIHZhbCA9IHZhbHVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5hbWUgPSBrZXlzLnNsaWNlKDAsIGkgKyAxKS5qb2luKFwiIFwiKTtcbiAgICAgICAgICB2YWwgPSBcIi4uLlwiO1xuICAgICAgICB9XG4gICAgICAgIHZhciBwcmV2ID0gY29weVtuYW1lXTtcbiAgICAgICAgaWYgKCFwcmV2KSB7IGNvcHlbbmFtZV0gPSB2YWw7IH1cbiAgICAgICAgZWxzZSBpZiAocHJldiAhPSB2YWwpIHsgdGhyb3cgbmV3IEVycm9yKFwiSW5jb25zaXN0ZW50IGJpbmRpbmdzIGZvciBcIiArIG5hbWUpIH1cbiAgICAgIH1cbiAgICAgIGRlbGV0ZSBrZXltYXBba2V5bmFtZV07XG4gICAgfSB9XG4gICAgZm9yICh2YXIgcHJvcCBpbiBjb3B5KSB7IGtleW1hcFtwcm9wXSA9IGNvcHlbcHJvcF07IH1cbiAgICByZXR1cm4ga2V5bWFwXG4gIH1cblxuICBmdW5jdGlvbiBsb29rdXBLZXkoa2V5LCBtYXAsIGhhbmRsZSwgY29udGV4dCkge1xuICAgIG1hcCA9IGdldEtleU1hcChtYXApO1xuICAgIHZhciBmb3VuZCA9IG1hcC5jYWxsID8gbWFwLmNhbGwoa2V5LCBjb250ZXh0KSA6IG1hcFtrZXldO1xuICAgIGlmIChmb3VuZCA9PT0gZmFsc2UpIHsgcmV0dXJuIFwibm90aGluZ1wiIH1cbiAgICBpZiAoZm91bmQgPT09IFwiLi4uXCIpIHsgcmV0dXJuIFwibXVsdGlcIiB9XG4gICAgaWYgKGZvdW5kICE9IG51bGwgJiYgaGFuZGxlKGZvdW5kKSkgeyByZXR1cm4gXCJoYW5kbGVkXCIgfVxuXG4gICAgaWYgKG1hcC5mYWxsdGhyb3VnaCkge1xuICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChtYXAuZmFsbHRocm91Z2gpICE9IFwiW29iamVjdCBBcnJheV1cIilcbiAgICAgICAgeyByZXR1cm4gbG9va3VwS2V5KGtleSwgbWFwLmZhbGx0aHJvdWdoLCBoYW5kbGUsIGNvbnRleHQpIH1cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWFwLmZhbGx0aHJvdWdoLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSBsb29rdXBLZXkoa2V5LCBtYXAuZmFsbHRocm91Z2hbaV0sIGhhbmRsZSwgY29udGV4dCk7XG4gICAgICAgIGlmIChyZXN1bHQpIHsgcmV0dXJuIHJlc3VsdCB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gTW9kaWZpZXIga2V5IHByZXNzZXMgZG9uJ3QgY291bnQgYXMgJ3JlYWwnIGtleSBwcmVzc2VzIGZvciB0aGVcbiAgLy8gcHVycG9zZSBvZiBrZXltYXAgZmFsbHRocm91Z2guXG4gIGZ1bmN0aW9uIGlzTW9kaWZpZXJLZXkodmFsdWUpIHtcbiAgICB2YXIgbmFtZSA9IHR5cGVvZiB2YWx1ZSA9PSBcInN0cmluZ1wiID8gdmFsdWUgOiBrZXlOYW1lc1t2YWx1ZS5rZXlDb2RlXTtcbiAgICByZXR1cm4gbmFtZSA9PSBcIkN0cmxcIiB8fCBuYW1lID09IFwiQWx0XCIgfHwgbmFtZSA9PSBcIlNoaWZ0XCIgfHwgbmFtZSA9PSBcIk1vZFwiXG4gIH1cblxuICBmdW5jdGlvbiBhZGRNb2RpZmllck5hbWVzKG5hbWUsIGV2ZW50LCBub1NoaWZ0KSB7XG4gICAgdmFyIGJhc2UgPSBuYW1lO1xuICAgIGlmIChldmVudC5hbHRLZXkgJiYgYmFzZSAhPSBcIkFsdFwiKSB7IG5hbWUgPSBcIkFsdC1cIiArIG5hbWU7IH1cbiAgICBpZiAoKGZsaXBDdHJsQ21kID8gZXZlbnQubWV0YUtleSA6IGV2ZW50LmN0cmxLZXkpICYmIGJhc2UgIT0gXCJDdHJsXCIpIHsgbmFtZSA9IFwiQ3RybC1cIiArIG5hbWU7IH1cbiAgICBpZiAoKGZsaXBDdHJsQ21kID8gZXZlbnQuY3RybEtleSA6IGV2ZW50Lm1ldGFLZXkpICYmIGJhc2UgIT0gXCJNb2RcIikgeyBuYW1lID0gXCJDbWQtXCIgKyBuYW1lOyB9XG4gICAgaWYgKCFub1NoaWZ0ICYmIGV2ZW50LnNoaWZ0S2V5ICYmIGJhc2UgIT0gXCJTaGlmdFwiKSB7IG5hbWUgPSBcIlNoaWZ0LVwiICsgbmFtZTsgfVxuICAgIHJldHVybiBuYW1lXG4gIH1cblxuICAvLyBMb29rIHVwIHRoZSBuYW1lIG9mIGEga2V5IGFzIGluZGljYXRlZCBieSBhbiBldmVudCBvYmplY3QuXG4gIGZ1bmN0aW9uIGtleU5hbWUoZXZlbnQsIG5vU2hpZnQpIHtcbiAgICBpZiAocHJlc3RvICYmIGV2ZW50LmtleUNvZGUgPT0gMzQgJiYgZXZlbnRbXCJjaGFyXCJdKSB7IHJldHVybiBmYWxzZSB9XG4gICAgdmFyIG5hbWUgPSBrZXlOYW1lc1tldmVudC5rZXlDb2RlXTtcbiAgICBpZiAobmFtZSA9PSBudWxsIHx8IGV2ZW50LmFsdEdyYXBoS2V5KSB7IHJldHVybiBmYWxzZSB9XG4gICAgLy8gQ3RybC1TY3JvbGxMb2NrIGhhcyBrZXlDb2RlIDMsIHNhbWUgYXMgQ3RybC1QYXVzZSxcbiAgICAvLyBzbyB3ZSdsbCB1c2UgZXZlbnQuY29kZSB3aGVuIGF2YWlsYWJsZSAoQ2hyb21lIDQ4KywgRkYgMzgrLCBTYWZhcmkgMTAuMSspXG4gICAgaWYgKGV2ZW50LmtleUNvZGUgPT0gMyAmJiBldmVudC5jb2RlKSB7IG5hbWUgPSBldmVudC5jb2RlOyB9XG4gICAgcmV0dXJuIGFkZE1vZGlmaWVyTmFtZXMobmFtZSwgZXZlbnQsIG5vU2hpZnQpXG4gIH1cblxuICBmdW5jdGlvbiBnZXRLZXlNYXAodmFsKSB7XG4gICAgcmV0dXJuIHR5cGVvZiB2YWwgPT0gXCJzdHJpbmdcIiA/IGtleU1hcFt2YWxdIDogdmFsXG4gIH1cblxuICAvLyBIZWxwZXIgZm9yIGRlbGV0aW5nIHRleHQgbmVhciB0aGUgc2VsZWN0aW9uKHMpLCB1c2VkIHRvIGltcGxlbWVudFxuICAvLyBiYWNrc3BhY2UsIGRlbGV0ZSwgYW5kIHNpbWlsYXIgZnVuY3Rpb25hbGl0eS5cbiAgZnVuY3Rpb24gZGVsZXRlTmVhclNlbGVjdGlvbihjbSwgY29tcHV0ZSkge1xuICAgIHZhciByYW5nZXMgPSBjbS5kb2Muc2VsLnJhbmdlcywga2lsbCA9IFtdO1xuICAgIC8vIEJ1aWxkIHVwIGEgc2V0IG9mIHJhbmdlcyB0byBraWxsIGZpcnN0LCBtZXJnaW5nIG92ZXJsYXBwaW5nXG4gICAgLy8gcmFuZ2VzLlxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmFuZ2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgdG9LaWxsID0gY29tcHV0ZShyYW5nZXNbaV0pO1xuICAgICAgd2hpbGUgKGtpbGwubGVuZ3RoICYmIGNtcCh0b0tpbGwuZnJvbSwgbHN0KGtpbGwpLnRvKSA8PSAwKSB7XG4gICAgICAgIHZhciByZXBsYWNlZCA9IGtpbGwucG9wKCk7XG4gICAgICAgIGlmIChjbXAocmVwbGFjZWQuZnJvbSwgdG9LaWxsLmZyb20pIDwgMCkge1xuICAgICAgICAgIHRvS2lsbC5mcm9tID0gcmVwbGFjZWQuZnJvbTtcbiAgICAgICAgICBicmVha1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBraWxsLnB1c2godG9LaWxsKTtcbiAgICB9XG4gICAgLy8gTmV4dCwgcmVtb3ZlIHRob3NlIGFjdHVhbCByYW5nZXMuXG4gICAgcnVuSW5PcChjbSwgZnVuY3Rpb24gKCkge1xuICAgICAgZm9yICh2YXIgaSA9IGtpbGwubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pXG4gICAgICAgIHsgcmVwbGFjZVJhbmdlKGNtLmRvYywgXCJcIiwga2lsbFtpXS5mcm9tLCBraWxsW2ldLnRvLCBcIitkZWxldGVcIik7IH1cbiAgICAgIGVuc3VyZUN1cnNvclZpc2libGUoY20pO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gbW92ZUNoYXJMb2dpY2FsbHkobGluZSwgY2gsIGRpcikge1xuICAgIHZhciB0YXJnZXQgPSBza2lwRXh0ZW5kaW5nQ2hhcnMobGluZS50ZXh0LCBjaCArIGRpciwgZGlyKTtcbiAgICByZXR1cm4gdGFyZ2V0IDwgMCB8fCB0YXJnZXQgPiBsaW5lLnRleHQubGVuZ3RoID8gbnVsbCA6IHRhcmdldFxuICB9XG5cbiAgZnVuY3Rpb24gbW92ZUxvZ2ljYWxseShsaW5lLCBzdGFydCwgZGlyKSB7XG4gICAgdmFyIGNoID0gbW92ZUNoYXJMb2dpY2FsbHkobGluZSwgc3RhcnQuY2gsIGRpcik7XG4gICAgcmV0dXJuIGNoID09IG51bGwgPyBudWxsIDogbmV3IFBvcyhzdGFydC5saW5lLCBjaCwgZGlyIDwgMCA/IFwiYWZ0ZXJcIiA6IFwiYmVmb3JlXCIpXG4gIH1cblxuICBmdW5jdGlvbiBlbmRPZkxpbmUodmlzdWFsbHksIGNtLCBsaW5lT2JqLCBsaW5lTm8sIGRpcikge1xuICAgIGlmICh2aXN1YWxseSkge1xuICAgICAgaWYgKGNtLmRvYy5kaXJlY3Rpb24gPT0gXCJydGxcIikgeyBkaXIgPSAtZGlyOyB9XG4gICAgICB2YXIgb3JkZXIgPSBnZXRPcmRlcihsaW5lT2JqLCBjbS5kb2MuZGlyZWN0aW9uKTtcbiAgICAgIGlmIChvcmRlcikge1xuICAgICAgICB2YXIgcGFydCA9IGRpciA8IDAgPyBsc3Qob3JkZXIpIDogb3JkZXJbMF07XG4gICAgICAgIHZhciBtb3ZlSW5TdG9yYWdlT3JkZXIgPSAoZGlyIDwgMCkgPT0gKHBhcnQubGV2ZWwgPT0gMSk7XG4gICAgICAgIHZhciBzdGlja3kgPSBtb3ZlSW5TdG9yYWdlT3JkZXIgPyBcImFmdGVyXCIgOiBcImJlZm9yZVwiO1xuICAgICAgICB2YXIgY2g7XG4gICAgICAgIC8vIFdpdGggYSB3cmFwcGVkIHJ0bCBjaHVuayAocG9zc2libHkgc3Bhbm5pbmcgbXVsdGlwbGUgYmlkaSBwYXJ0cyksXG4gICAgICAgIC8vIGl0IGNvdWxkIGJlIHRoYXQgdGhlIGxhc3QgYmlkaSBwYXJ0IGlzIG5vdCBvbiB0aGUgbGFzdCB2aXN1YWwgbGluZSxcbiAgICAgICAgLy8gc2luY2UgdmlzdWFsIGxpbmVzIGNvbnRhaW4gY29udGVudCBvcmRlci1jb25zZWN1dGl2ZSBjaHVua3MuXG4gICAgICAgIC8vIFRodXMsIGluIHJ0bCwgd2UgYXJlIGxvb2tpbmcgZm9yIHRoZSBmaXJzdCAoY29udGVudC1vcmRlcikgY2hhcmFjdGVyXG4gICAgICAgIC8vIGluIHRoZSBydGwgY2h1bmsgdGhhdCBpcyBvbiB0aGUgbGFzdCBsaW5lICh0aGF0IGlzLCB0aGUgc2FtZSBsaW5lXG4gICAgICAgIC8vIGFzIHRoZSBsYXN0IChjb250ZW50LW9yZGVyKSBjaGFyYWN0ZXIpLlxuICAgICAgICBpZiAocGFydC5sZXZlbCA+IDAgfHwgY20uZG9jLmRpcmVjdGlvbiA9PSBcInJ0bFwiKSB7XG4gICAgICAgICAgdmFyIHByZXAgPSBwcmVwYXJlTWVhc3VyZUZvckxpbmUoY20sIGxpbmVPYmopO1xuICAgICAgICAgIGNoID0gZGlyIDwgMCA/IGxpbmVPYmoudGV4dC5sZW5ndGggLSAxIDogMDtcbiAgICAgICAgICB2YXIgdGFyZ2V0VG9wID0gbWVhc3VyZUNoYXJQcmVwYXJlZChjbSwgcHJlcCwgY2gpLnRvcDtcbiAgICAgICAgICBjaCA9IGZpbmRGaXJzdChmdW5jdGlvbiAoY2gpIHsgcmV0dXJuIG1lYXN1cmVDaGFyUHJlcGFyZWQoY20sIHByZXAsIGNoKS50b3AgPT0gdGFyZ2V0VG9wOyB9LCAoZGlyIDwgMCkgPT0gKHBhcnQubGV2ZWwgPT0gMSkgPyBwYXJ0LmZyb20gOiBwYXJ0LnRvIC0gMSwgY2gpO1xuICAgICAgICAgIGlmIChzdGlja3kgPT0gXCJiZWZvcmVcIikgeyBjaCA9IG1vdmVDaGFyTG9naWNhbGx5KGxpbmVPYmosIGNoLCAxKTsgfVxuICAgICAgICB9IGVsc2UgeyBjaCA9IGRpciA8IDAgPyBwYXJ0LnRvIDogcGFydC5mcm9tOyB9XG4gICAgICAgIHJldHVybiBuZXcgUG9zKGxpbmVObywgY2gsIHN0aWNreSlcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG5ldyBQb3MobGluZU5vLCBkaXIgPCAwID8gbGluZU9iai50ZXh0Lmxlbmd0aCA6IDAsIGRpciA8IDAgPyBcImJlZm9yZVwiIDogXCJhZnRlclwiKVxuICB9XG5cbiAgZnVuY3Rpb24gbW92ZVZpc3VhbGx5KGNtLCBsaW5lLCBzdGFydCwgZGlyKSB7XG4gICAgdmFyIGJpZGkgPSBnZXRPcmRlcihsaW5lLCBjbS5kb2MuZGlyZWN0aW9uKTtcbiAgICBpZiAoIWJpZGkpIHsgcmV0dXJuIG1vdmVMb2dpY2FsbHkobGluZSwgc3RhcnQsIGRpcikgfVxuICAgIGlmIChzdGFydC5jaCA+PSBsaW5lLnRleHQubGVuZ3RoKSB7XG4gICAgICBzdGFydC5jaCA9IGxpbmUudGV4dC5sZW5ndGg7XG4gICAgICBzdGFydC5zdGlja3kgPSBcImJlZm9yZVwiO1xuICAgIH0gZWxzZSBpZiAoc3RhcnQuY2ggPD0gMCkge1xuICAgICAgc3RhcnQuY2ggPSAwO1xuICAgICAgc3RhcnQuc3RpY2t5ID0gXCJhZnRlclwiO1xuICAgIH1cbiAgICB2YXIgcGFydFBvcyA9IGdldEJpZGlQYXJ0QXQoYmlkaSwgc3RhcnQuY2gsIHN0YXJ0LnN0aWNreSksIHBhcnQgPSBiaWRpW3BhcnRQb3NdO1xuICAgIGlmIChjbS5kb2MuZGlyZWN0aW9uID09IFwibHRyXCIgJiYgcGFydC5sZXZlbCAlIDIgPT0gMCAmJiAoZGlyID4gMCA/IHBhcnQudG8gPiBzdGFydC5jaCA6IHBhcnQuZnJvbSA8IHN0YXJ0LmNoKSkge1xuICAgICAgLy8gQ2FzZSAxOiBXZSBtb3ZlIHdpdGhpbiBhbiBsdHIgcGFydCBpbiBhbiBsdHIgZWRpdG9yLiBFdmVuIHdpdGggd3JhcHBlZCBsaW5lcyxcbiAgICAgIC8vIG5vdGhpbmcgaW50ZXJlc3RpbmcgaGFwcGVucy5cbiAgICAgIHJldHVybiBtb3ZlTG9naWNhbGx5KGxpbmUsIHN0YXJ0LCBkaXIpXG4gICAgfVxuXG4gICAgdmFyIG12ID0gZnVuY3Rpb24gKHBvcywgZGlyKSB7IHJldHVybiBtb3ZlQ2hhckxvZ2ljYWxseShsaW5lLCBwb3MgaW5zdGFuY2VvZiBQb3MgPyBwb3MuY2ggOiBwb3MsIGRpcik7IH07XG4gICAgdmFyIHByZXA7XG4gICAgdmFyIGdldFdyYXBwZWRMaW5lRXh0ZW50ID0gZnVuY3Rpb24gKGNoKSB7XG4gICAgICBpZiAoIWNtLm9wdGlvbnMubGluZVdyYXBwaW5nKSB7IHJldHVybiB7YmVnaW46IDAsIGVuZDogbGluZS50ZXh0Lmxlbmd0aH0gfVxuICAgICAgcHJlcCA9IHByZXAgfHwgcHJlcGFyZU1lYXN1cmVGb3JMaW5lKGNtLCBsaW5lKTtcbiAgICAgIHJldHVybiB3cmFwcGVkTGluZUV4dGVudENoYXIoY20sIGxpbmUsIHByZXAsIGNoKVxuICAgIH07XG4gICAgdmFyIHdyYXBwZWRMaW5lRXh0ZW50ID0gZ2V0V3JhcHBlZExpbmVFeHRlbnQoc3RhcnQuc3RpY2t5ID09IFwiYmVmb3JlXCIgPyBtdihzdGFydCwgLTEpIDogc3RhcnQuY2gpO1xuXG4gICAgaWYgKGNtLmRvYy5kaXJlY3Rpb24gPT0gXCJydGxcIiB8fCBwYXJ0LmxldmVsID09IDEpIHtcbiAgICAgIHZhciBtb3ZlSW5TdG9yYWdlT3JkZXIgPSAocGFydC5sZXZlbCA9PSAxKSA9PSAoZGlyIDwgMCk7XG4gICAgICB2YXIgY2ggPSBtdihzdGFydCwgbW92ZUluU3RvcmFnZU9yZGVyID8gMSA6IC0xKTtcbiAgICAgIGlmIChjaCAhPSBudWxsICYmICghbW92ZUluU3RvcmFnZU9yZGVyID8gY2ggPj0gcGFydC5mcm9tICYmIGNoID49IHdyYXBwZWRMaW5lRXh0ZW50LmJlZ2luIDogY2ggPD0gcGFydC50byAmJiBjaCA8PSB3cmFwcGVkTGluZUV4dGVudC5lbmQpKSB7XG4gICAgICAgIC8vIENhc2UgMjogV2UgbW92ZSB3aXRoaW4gYW4gcnRsIHBhcnQgb3IgaW4gYW4gcnRsIGVkaXRvciBvbiB0aGUgc2FtZSB2aXN1YWwgbGluZVxuICAgICAgICB2YXIgc3RpY2t5ID0gbW92ZUluU3RvcmFnZU9yZGVyID8gXCJiZWZvcmVcIiA6IFwiYWZ0ZXJcIjtcbiAgICAgICAgcmV0dXJuIG5ldyBQb3Moc3RhcnQubGluZSwgY2gsIHN0aWNreSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBDYXNlIDM6IENvdWxkIG5vdCBtb3ZlIHdpdGhpbiB0aGlzIGJpZGkgcGFydCBpbiB0aGlzIHZpc3VhbCBsaW5lLCBzbyBsZWF2ZVxuICAgIC8vIHRoZSBjdXJyZW50IGJpZGkgcGFydFxuXG4gICAgdmFyIHNlYXJjaEluVmlzdWFsTGluZSA9IGZ1bmN0aW9uIChwYXJ0UG9zLCBkaXIsIHdyYXBwZWRMaW5lRXh0ZW50KSB7XG4gICAgICB2YXIgZ2V0UmVzID0gZnVuY3Rpb24gKGNoLCBtb3ZlSW5TdG9yYWdlT3JkZXIpIHsgcmV0dXJuIG1vdmVJblN0b3JhZ2VPcmRlclxuICAgICAgICA/IG5ldyBQb3Moc3RhcnQubGluZSwgbXYoY2gsIDEpLCBcImJlZm9yZVwiKVxuICAgICAgICA6IG5ldyBQb3Moc3RhcnQubGluZSwgY2gsIFwiYWZ0ZXJcIik7IH07XG5cbiAgICAgIGZvciAoOyBwYXJ0UG9zID49IDAgJiYgcGFydFBvcyA8IGJpZGkubGVuZ3RoOyBwYXJ0UG9zICs9IGRpcikge1xuICAgICAgICB2YXIgcGFydCA9IGJpZGlbcGFydFBvc107XG4gICAgICAgIHZhciBtb3ZlSW5TdG9yYWdlT3JkZXIgPSAoZGlyID4gMCkgPT0gKHBhcnQubGV2ZWwgIT0gMSk7XG4gICAgICAgIHZhciBjaCA9IG1vdmVJblN0b3JhZ2VPcmRlciA/IHdyYXBwZWRMaW5lRXh0ZW50LmJlZ2luIDogbXYod3JhcHBlZExpbmVFeHRlbnQuZW5kLCAtMSk7XG4gICAgICAgIGlmIChwYXJ0LmZyb20gPD0gY2ggJiYgY2ggPCBwYXJ0LnRvKSB7IHJldHVybiBnZXRSZXMoY2gsIG1vdmVJblN0b3JhZ2VPcmRlcikgfVxuICAgICAgICBjaCA9IG1vdmVJblN0b3JhZ2VPcmRlciA/IHBhcnQuZnJvbSA6IG12KHBhcnQudG8sIC0xKTtcbiAgICAgICAgaWYgKHdyYXBwZWRMaW5lRXh0ZW50LmJlZ2luIDw9IGNoICYmIGNoIDwgd3JhcHBlZExpbmVFeHRlbnQuZW5kKSB7IHJldHVybiBnZXRSZXMoY2gsIG1vdmVJblN0b3JhZ2VPcmRlcikgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBDYXNlIDNhOiBMb29rIGZvciBvdGhlciBiaWRpIHBhcnRzIG9uIHRoZSBzYW1lIHZpc3VhbCBsaW5lXG4gICAgdmFyIHJlcyA9IHNlYXJjaEluVmlzdWFsTGluZShwYXJ0UG9zICsgZGlyLCBkaXIsIHdyYXBwZWRMaW5lRXh0ZW50KTtcbiAgICBpZiAocmVzKSB7IHJldHVybiByZXMgfVxuXG4gICAgLy8gQ2FzZSAzYjogTG9vayBmb3Igb3RoZXIgYmlkaSBwYXJ0cyBvbiB0aGUgbmV4dCB2aXN1YWwgbGluZVxuICAgIHZhciBuZXh0Q2ggPSBkaXIgPiAwID8gd3JhcHBlZExpbmVFeHRlbnQuZW5kIDogbXYod3JhcHBlZExpbmVFeHRlbnQuYmVnaW4sIC0xKTtcbiAgICBpZiAobmV4dENoICE9IG51bGwgJiYgIShkaXIgPiAwICYmIG5leHRDaCA9PSBsaW5lLnRleHQubGVuZ3RoKSkge1xuICAgICAgcmVzID0gc2VhcmNoSW5WaXN1YWxMaW5lKGRpciA+IDAgPyAwIDogYmlkaS5sZW5ndGggLSAxLCBkaXIsIGdldFdyYXBwZWRMaW5lRXh0ZW50KG5leHRDaCkpO1xuICAgICAgaWYgKHJlcykgeyByZXR1cm4gcmVzIH1cbiAgICB9XG5cbiAgICAvLyBDYXNlIDQ6IE5vd2hlcmUgdG8gbW92ZVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICAvLyBDb21tYW5kcyBhcmUgcGFyYW1ldGVyLWxlc3MgYWN0aW9ucyB0aGF0IGNhbiBiZSBwZXJmb3JtZWQgb24gYW5cbiAgLy8gZWRpdG9yLCBtb3N0bHkgdXNlZCBmb3Iga2V5YmluZGluZ3MuXG4gIHZhciBjb21tYW5kcyA9IHtcbiAgICBzZWxlY3RBbGw6IHNlbGVjdEFsbCxcbiAgICBzaW5nbGVTZWxlY3Rpb246IGZ1bmN0aW9uIChjbSkgeyByZXR1cm4gY20uc2V0U2VsZWN0aW9uKGNtLmdldEN1cnNvcihcImFuY2hvclwiKSwgY20uZ2V0Q3Vyc29yKFwiaGVhZFwiKSwgc2VsX2RvbnRTY3JvbGwpOyB9LFxuICAgIGtpbGxMaW5lOiBmdW5jdGlvbiAoY20pIHsgcmV0dXJuIGRlbGV0ZU5lYXJTZWxlY3Rpb24oY20sIGZ1bmN0aW9uIChyYW5nZSkge1xuICAgICAgaWYgKHJhbmdlLmVtcHR5KCkpIHtcbiAgICAgICAgdmFyIGxlbiA9IGdldExpbmUoY20uZG9jLCByYW5nZS5oZWFkLmxpbmUpLnRleHQubGVuZ3RoO1xuICAgICAgICBpZiAocmFuZ2UuaGVhZC5jaCA9PSBsZW4gJiYgcmFuZ2UuaGVhZC5saW5lIDwgY20ubGFzdExpbmUoKSlcbiAgICAgICAgICB7IHJldHVybiB7ZnJvbTogcmFuZ2UuaGVhZCwgdG86IFBvcyhyYW5nZS5oZWFkLmxpbmUgKyAxLCAwKX0gfVxuICAgICAgICBlbHNlXG4gICAgICAgICAgeyByZXR1cm4ge2Zyb206IHJhbmdlLmhlYWQsIHRvOiBQb3MocmFuZ2UuaGVhZC5saW5lLCBsZW4pfSB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4ge2Zyb206IHJhbmdlLmZyb20oKSwgdG86IHJhbmdlLnRvKCl9XG4gICAgICB9XG4gICAgfSk7IH0sXG4gICAgZGVsZXRlTGluZTogZnVuY3Rpb24gKGNtKSB7IHJldHVybiBkZWxldGVOZWFyU2VsZWN0aW9uKGNtLCBmdW5jdGlvbiAocmFuZ2UpIHsgcmV0dXJuICh7XG4gICAgICBmcm9tOiBQb3MocmFuZ2UuZnJvbSgpLmxpbmUsIDApLFxuICAgICAgdG86IGNsaXBQb3MoY20uZG9jLCBQb3MocmFuZ2UudG8oKS5saW5lICsgMSwgMCkpXG4gICAgfSk7IH0pOyB9LFxuICAgIGRlbExpbmVMZWZ0OiBmdW5jdGlvbiAoY20pIHsgcmV0dXJuIGRlbGV0ZU5lYXJTZWxlY3Rpb24oY20sIGZ1bmN0aW9uIChyYW5nZSkgeyByZXR1cm4gKHtcbiAgICAgIGZyb206IFBvcyhyYW5nZS5mcm9tKCkubGluZSwgMCksIHRvOiByYW5nZS5mcm9tKClcbiAgICB9KTsgfSk7IH0sXG4gICAgZGVsV3JhcHBlZExpbmVMZWZ0OiBmdW5jdGlvbiAoY20pIHsgcmV0dXJuIGRlbGV0ZU5lYXJTZWxlY3Rpb24oY20sIGZ1bmN0aW9uIChyYW5nZSkge1xuICAgICAgdmFyIHRvcCA9IGNtLmNoYXJDb29yZHMocmFuZ2UuaGVhZCwgXCJkaXZcIikudG9wICsgNTtcbiAgICAgIHZhciBsZWZ0UG9zID0gY20uY29vcmRzQ2hhcih7bGVmdDogMCwgdG9wOiB0b3B9LCBcImRpdlwiKTtcbiAgICAgIHJldHVybiB7ZnJvbTogbGVmdFBvcywgdG86IHJhbmdlLmZyb20oKX1cbiAgICB9KTsgfSxcbiAgICBkZWxXcmFwcGVkTGluZVJpZ2h0OiBmdW5jdGlvbiAoY20pIHsgcmV0dXJuIGRlbGV0ZU5lYXJTZWxlY3Rpb24oY20sIGZ1bmN0aW9uIChyYW5nZSkge1xuICAgICAgdmFyIHRvcCA9IGNtLmNoYXJDb29yZHMocmFuZ2UuaGVhZCwgXCJkaXZcIikudG9wICsgNTtcbiAgICAgIHZhciByaWdodFBvcyA9IGNtLmNvb3Jkc0NoYXIoe2xlZnQ6IGNtLmRpc3BsYXkubGluZURpdi5vZmZzZXRXaWR0aCArIDEwMCwgdG9wOiB0b3B9LCBcImRpdlwiKTtcbiAgICAgIHJldHVybiB7ZnJvbTogcmFuZ2UuZnJvbSgpLCB0bzogcmlnaHRQb3MgfVxuICAgIH0pOyB9LFxuICAgIHVuZG86IGZ1bmN0aW9uIChjbSkgeyByZXR1cm4gY20udW5kbygpOyB9LFxuICAgIHJlZG86IGZ1bmN0aW9uIChjbSkgeyByZXR1cm4gY20ucmVkbygpOyB9LFxuICAgIHVuZG9TZWxlY3Rpb246IGZ1bmN0aW9uIChjbSkgeyByZXR1cm4gY20udW5kb1NlbGVjdGlvbigpOyB9LFxuICAgIHJlZG9TZWxlY3Rpb246IGZ1bmN0aW9uIChjbSkgeyByZXR1cm4gY20ucmVkb1NlbGVjdGlvbigpOyB9LFxuICAgIGdvRG9jU3RhcnQ6IGZ1bmN0aW9uIChjbSkgeyByZXR1cm4gY20uZXh0ZW5kU2VsZWN0aW9uKFBvcyhjbS5maXJzdExpbmUoKSwgMCkpOyB9LFxuICAgIGdvRG9jRW5kOiBmdW5jdGlvbiAoY20pIHsgcmV0dXJuIGNtLmV4dGVuZFNlbGVjdGlvbihQb3MoY20ubGFzdExpbmUoKSkpOyB9LFxuICAgIGdvTGluZVN0YXJ0OiBmdW5jdGlvbiAoY20pIHsgcmV0dXJuIGNtLmV4dGVuZFNlbGVjdGlvbnNCeShmdW5jdGlvbiAocmFuZ2UpIHsgcmV0dXJuIGxpbmVTdGFydChjbSwgcmFuZ2UuaGVhZC5saW5lKTsgfSxcbiAgICAgIHtvcmlnaW46IFwiK21vdmVcIiwgYmlhczogMX1cbiAgICApOyB9LFxuICAgIGdvTGluZVN0YXJ0U21hcnQ6IGZ1bmN0aW9uIChjbSkgeyByZXR1cm4gY20uZXh0ZW5kU2VsZWN0aW9uc0J5KGZ1bmN0aW9uIChyYW5nZSkgeyByZXR1cm4gbGluZVN0YXJ0U21hcnQoY20sIHJhbmdlLmhlYWQpOyB9LFxuICAgICAge29yaWdpbjogXCIrbW92ZVwiLCBiaWFzOiAxfVxuICAgICk7IH0sXG4gICAgZ29MaW5lRW5kOiBmdW5jdGlvbiAoY20pIHsgcmV0dXJuIGNtLmV4dGVuZFNlbGVjdGlvbnNCeShmdW5jdGlvbiAocmFuZ2UpIHsgcmV0dXJuIGxpbmVFbmQoY20sIHJhbmdlLmhlYWQubGluZSk7IH0sXG4gICAgICB7b3JpZ2luOiBcIittb3ZlXCIsIGJpYXM6IC0xfVxuICAgICk7IH0sXG4gICAgZ29MaW5lUmlnaHQ6IGZ1bmN0aW9uIChjbSkgeyByZXR1cm4gY20uZXh0ZW5kU2VsZWN0aW9uc0J5KGZ1bmN0aW9uIChyYW5nZSkge1xuICAgICAgdmFyIHRvcCA9IGNtLmN1cnNvckNvb3JkcyhyYW5nZS5oZWFkLCBcImRpdlwiKS50b3AgKyA1O1xuICAgICAgcmV0dXJuIGNtLmNvb3Jkc0NoYXIoe2xlZnQ6IGNtLmRpc3BsYXkubGluZURpdi5vZmZzZXRXaWR0aCArIDEwMCwgdG9wOiB0b3B9LCBcImRpdlwiKVxuICAgIH0sIHNlbF9tb3ZlKTsgfSxcbiAgICBnb0xpbmVMZWZ0OiBmdW5jdGlvbiAoY20pIHsgcmV0dXJuIGNtLmV4dGVuZFNlbGVjdGlvbnNCeShmdW5jdGlvbiAocmFuZ2UpIHtcbiAgICAgIHZhciB0b3AgPSBjbS5jdXJzb3JDb29yZHMocmFuZ2UuaGVhZCwgXCJkaXZcIikudG9wICsgNTtcbiAgICAgIHJldHVybiBjbS5jb29yZHNDaGFyKHtsZWZ0OiAwLCB0b3A6IHRvcH0sIFwiZGl2XCIpXG4gICAgfSwgc2VsX21vdmUpOyB9LFxuICAgIGdvTGluZUxlZnRTbWFydDogZnVuY3Rpb24gKGNtKSB7IHJldHVybiBjbS5leHRlbmRTZWxlY3Rpb25zQnkoZnVuY3Rpb24gKHJhbmdlKSB7XG4gICAgICB2YXIgdG9wID0gY20uY3Vyc29yQ29vcmRzKHJhbmdlLmhlYWQsIFwiZGl2XCIpLnRvcCArIDU7XG4gICAgICB2YXIgcG9zID0gY20uY29vcmRzQ2hhcih7bGVmdDogMCwgdG9wOiB0b3B9LCBcImRpdlwiKTtcbiAgICAgIGlmIChwb3MuY2ggPCBjbS5nZXRMaW5lKHBvcy5saW5lKS5zZWFyY2goL1xcUy8pKSB7IHJldHVybiBsaW5lU3RhcnRTbWFydChjbSwgcmFuZ2UuaGVhZCkgfVxuICAgICAgcmV0dXJuIHBvc1xuICAgIH0sIHNlbF9tb3ZlKTsgfSxcbiAgICBnb0xpbmVVcDogZnVuY3Rpb24gKGNtKSB7IHJldHVybiBjbS5tb3ZlVigtMSwgXCJsaW5lXCIpOyB9LFxuICAgIGdvTGluZURvd246IGZ1bmN0aW9uIChjbSkgeyByZXR1cm4gY20ubW92ZVYoMSwgXCJsaW5lXCIpOyB9LFxuICAgIGdvUGFnZVVwOiBmdW5jdGlvbiAoY20pIHsgcmV0dXJuIGNtLm1vdmVWKC0xLCBcInBhZ2VcIik7IH0sXG4gICAgZ29QYWdlRG93bjogZnVuY3Rpb24gKGNtKSB7IHJldHVybiBjbS5tb3ZlVigxLCBcInBhZ2VcIik7IH0sXG4gICAgZ29DaGFyTGVmdDogZnVuY3Rpb24gKGNtKSB7IHJldHVybiBjbS5tb3ZlSCgtMSwgXCJjaGFyXCIpOyB9LFxuICAgIGdvQ2hhclJpZ2h0OiBmdW5jdGlvbiAoY20pIHsgcmV0dXJuIGNtLm1vdmVIKDEsIFwiY2hhclwiKTsgfSxcbiAgICBnb0NvbHVtbkxlZnQ6IGZ1bmN0aW9uIChjbSkgeyByZXR1cm4gY20ubW92ZUgoLTEsIFwiY29sdW1uXCIpOyB9LFxuICAgIGdvQ29sdW1uUmlnaHQ6IGZ1bmN0aW9uIChjbSkgeyByZXR1cm4gY20ubW92ZUgoMSwgXCJjb2x1bW5cIik7IH0sXG4gICAgZ29Xb3JkTGVmdDogZnVuY3Rpb24gKGNtKSB7IHJldHVybiBjbS5tb3ZlSCgtMSwgXCJ3b3JkXCIpOyB9LFxuICAgIGdvR3JvdXBSaWdodDogZnVuY3Rpb24gKGNtKSB7IHJldHVybiBjbS5tb3ZlSCgxLCBcImdyb3VwXCIpOyB9LFxuICAgIGdvR3JvdXBMZWZ0OiBmdW5jdGlvbiAoY20pIHsgcmV0dXJuIGNtLm1vdmVIKC0xLCBcImdyb3VwXCIpOyB9LFxuICAgIGdvV29yZFJpZ2h0OiBmdW5jdGlvbiAoY20pIHsgcmV0dXJuIGNtLm1vdmVIKDEsIFwid29yZFwiKTsgfSxcbiAgICBkZWxDaGFyQmVmb3JlOiBmdW5jdGlvbiAoY20pIHsgcmV0dXJuIGNtLmRlbGV0ZUgoLTEsIFwiY29kZXBvaW50XCIpOyB9LFxuICAgIGRlbENoYXJBZnRlcjogZnVuY3Rpb24gKGNtKSB7IHJldHVybiBjbS5kZWxldGVIKDEsIFwiY2hhclwiKTsgfSxcbiAgICBkZWxXb3JkQmVmb3JlOiBmdW5jdGlvbiAoY20pIHsgcmV0dXJuIGNtLmRlbGV0ZUgoLTEsIFwid29yZFwiKTsgfSxcbiAgICBkZWxXb3JkQWZ0ZXI6IGZ1bmN0aW9uIChjbSkgeyByZXR1cm4gY20uZGVsZXRlSCgxLCBcIndvcmRcIik7IH0sXG4gICAgZGVsR3JvdXBCZWZvcmU6IGZ1bmN0aW9uIChjbSkgeyByZXR1cm4gY20uZGVsZXRlSCgtMSwgXCJncm91cFwiKTsgfSxcbiAgICBkZWxHcm91cEFmdGVyOiBmdW5jdGlvbiAoY20pIHsgcmV0dXJuIGNtLmRlbGV0ZUgoMSwgXCJncm91cFwiKTsgfSxcbiAgICBpbmRlbnRBdXRvOiBmdW5jdGlvbiAoY20pIHsgcmV0dXJuIGNtLmluZGVudFNlbGVjdGlvbihcInNtYXJ0XCIpOyB9LFxuICAgIGluZGVudE1vcmU6IGZ1bmN0aW9uIChjbSkgeyByZXR1cm4gY20uaW5kZW50U2VsZWN0aW9uKFwiYWRkXCIpOyB9LFxuICAgIGluZGVudExlc3M6IGZ1bmN0aW9uIChjbSkgeyByZXR1cm4gY20uaW5kZW50U2VsZWN0aW9uKFwic3VidHJhY3RcIik7IH0sXG4gICAgaW5zZXJ0VGFiOiBmdW5jdGlvbiAoY20pIHsgcmV0dXJuIGNtLnJlcGxhY2VTZWxlY3Rpb24oXCJcXHRcIik7IH0sXG4gICAgaW5zZXJ0U29mdFRhYjogZnVuY3Rpb24gKGNtKSB7XG4gICAgICB2YXIgc3BhY2VzID0gW10sIHJhbmdlcyA9IGNtLmxpc3RTZWxlY3Rpb25zKCksIHRhYlNpemUgPSBjbS5vcHRpb25zLnRhYlNpemU7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJhbmdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgcG9zID0gcmFuZ2VzW2ldLmZyb20oKTtcbiAgICAgICAgdmFyIGNvbCA9IGNvdW50Q29sdW1uKGNtLmdldExpbmUocG9zLmxpbmUpLCBwb3MuY2gsIHRhYlNpemUpO1xuICAgICAgICBzcGFjZXMucHVzaChzcGFjZVN0cih0YWJTaXplIC0gY29sICUgdGFiU2l6ZSkpO1xuICAgICAgfVxuICAgICAgY20ucmVwbGFjZVNlbGVjdGlvbnMoc3BhY2VzKTtcbiAgICB9LFxuICAgIGRlZmF1bHRUYWI6IGZ1bmN0aW9uIChjbSkge1xuICAgICAgaWYgKGNtLnNvbWV0aGluZ1NlbGVjdGVkKCkpIHsgY20uaW5kZW50U2VsZWN0aW9uKFwiYWRkXCIpOyB9XG4gICAgICBlbHNlIHsgY20uZXhlY0NvbW1hbmQoXCJpbnNlcnRUYWJcIik7IH1cbiAgICB9LFxuICAgIC8vIFN3YXAgdGhlIHR3byBjaGFycyBsZWZ0IGFuZCByaWdodCBvZiBlYWNoIHNlbGVjdGlvbidzIGhlYWQuXG4gICAgLy8gTW92ZSBjdXJzb3IgYmVoaW5kIHRoZSB0d28gc3dhcHBlZCBjaGFyYWN0ZXJzIGFmdGVyd2FyZHMuXG4gICAgLy9cbiAgICAvLyBEb2Vzbid0IGNvbnNpZGVyIGxpbmUgZmVlZHMgYSBjaGFyYWN0ZXIuXG4gICAgLy8gRG9lc24ndCBzY2FuIG1vcmUgdGhhbiBvbmUgbGluZSBhYm92ZSB0byBmaW5kIGEgY2hhcmFjdGVyLlxuICAgIC8vIERvZXNuJ3QgZG8gYW55dGhpbmcgb24gYW4gZW1wdHkgbGluZS5cbiAgICAvLyBEb2Vzbid0IGRvIGFueXRoaW5nIHdpdGggbm9uLWVtcHR5IHNlbGVjdGlvbnMuXG4gICAgdHJhbnNwb3NlQ2hhcnM6IGZ1bmN0aW9uIChjbSkgeyByZXR1cm4gcnVuSW5PcChjbSwgZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIHJhbmdlcyA9IGNtLmxpc3RTZWxlY3Rpb25zKCksIG5ld1NlbCA9IFtdO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByYW5nZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKCFyYW5nZXNbaV0uZW1wdHkoKSkgeyBjb250aW51ZSB9XG4gICAgICAgIHZhciBjdXIgPSByYW5nZXNbaV0uaGVhZCwgbGluZSA9IGdldExpbmUoY20uZG9jLCBjdXIubGluZSkudGV4dDtcbiAgICAgICAgaWYgKGxpbmUpIHtcbiAgICAgICAgICBpZiAoY3VyLmNoID09IGxpbmUubGVuZ3RoKSB7IGN1ciA9IG5ldyBQb3MoY3VyLmxpbmUsIGN1ci5jaCAtIDEpOyB9XG4gICAgICAgICAgaWYgKGN1ci5jaCA+IDApIHtcbiAgICAgICAgICAgIGN1ciA9IG5ldyBQb3MoY3VyLmxpbmUsIGN1ci5jaCArIDEpO1xuICAgICAgICAgICAgY20ucmVwbGFjZVJhbmdlKGxpbmUuY2hhckF0KGN1ci5jaCAtIDEpICsgbGluZS5jaGFyQXQoY3VyLmNoIC0gMiksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUG9zKGN1ci5saW5lLCBjdXIuY2ggLSAyKSwgY3VyLCBcIit0cmFuc3Bvc2VcIik7XG4gICAgICAgICAgfSBlbHNlIGlmIChjdXIubGluZSA+IGNtLmRvYy5maXJzdCkge1xuICAgICAgICAgICAgdmFyIHByZXYgPSBnZXRMaW5lKGNtLmRvYywgY3VyLmxpbmUgLSAxKS50ZXh0O1xuICAgICAgICAgICAgaWYgKHByZXYpIHtcbiAgICAgICAgICAgICAgY3VyID0gbmV3IFBvcyhjdXIubGluZSwgMSk7XG4gICAgICAgICAgICAgIGNtLnJlcGxhY2VSYW5nZShsaW5lLmNoYXJBdCgwKSArIGNtLmRvYy5saW5lU2VwYXJhdG9yKCkgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldi5jaGFyQXQocHJldi5sZW5ndGggLSAxKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBvcyhjdXIubGluZSAtIDEsIHByZXYubGVuZ3RoIC0gMSksIGN1ciwgXCIrdHJhbnNwb3NlXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBuZXdTZWwucHVzaChuZXcgUmFuZ2UoY3VyLCBjdXIpKTtcbiAgICAgIH1cbiAgICAgIGNtLnNldFNlbGVjdGlvbnMobmV3U2VsKTtcbiAgICB9KTsgfSxcbiAgICBuZXdsaW5lQW5kSW5kZW50OiBmdW5jdGlvbiAoY20pIHsgcmV0dXJuIHJ1bkluT3AoY20sIGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBzZWxzID0gY20ubGlzdFNlbGVjdGlvbnMoKTtcbiAgICAgIGZvciAodmFyIGkgPSBzZWxzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKVxuICAgICAgICB7IGNtLnJlcGxhY2VSYW5nZShjbS5kb2MubGluZVNlcGFyYXRvcigpLCBzZWxzW2ldLmFuY2hvciwgc2Vsc1tpXS5oZWFkLCBcIitpbnB1dFwiKTsgfVxuICAgICAgc2VscyA9IGNtLmxpc3RTZWxlY3Rpb25zKCk7XG4gICAgICBmb3IgKHZhciBpJDEgPSAwOyBpJDEgPCBzZWxzLmxlbmd0aDsgaSQxKyspXG4gICAgICAgIHsgY20uaW5kZW50TGluZShzZWxzW2kkMV0uZnJvbSgpLmxpbmUsIG51bGwsIHRydWUpOyB9XG4gICAgICBlbnN1cmVDdXJzb3JWaXNpYmxlKGNtKTtcbiAgICB9KTsgfSxcbiAgICBvcGVuTGluZTogZnVuY3Rpb24gKGNtKSB7IHJldHVybiBjbS5yZXBsYWNlU2VsZWN0aW9uKFwiXFxuXCIsIFwic3RhcnRcIik7IH0sXG4gICAgdG9nZ2xlT3ZlcndyaXRlOiBmdW5jdGlvbiAoY20pIHsgcmV0dXJuIGNtLnRvZ2dsZU92ZXJ3cml0ZSgpOyB9XG4gIH07XG5cblxuICBmdW5jdGlvbiBsaW5lU3RhcnQoY20sIGxpbmVOKSB7XG4gICAgdmFyIGxpbmUgPSBnZXRMaW5lKGNtLmRvYywgbGluZU4pO1xuICAgIHZhciB2aXN1YWwgPSB2aXN1YWxMaW5lKGxpbmUpO1xuICAgIGlmICh2aXN1YWwgIT0gbGluZSkgeyBsaW5lTiA9IGxpbmVObyh2aXN1YWwpOyB9XG4gICAgcmV0dXJuIGVuZE9mTGluZSh0cnVlLCBjbSwgdmlzdWFsLCBsaW5lTiwgMSlcbiAgfVxuICBmdW5jdGlvbiBsaW5lRW5kKGNtLCBsaW5lTikge1xuICAgIHZhciBsaW5lID0gZ2V0TGluZShjbS5kb2MsIGxpbmVOKTtcbiAgICB2YXIgdmlzdWFsID0gdmlzdWFsTGluZUVuZChsaW5lKTtcbiAgICBpZiAodmlzdWFsICE9IGxpbmUpIHsgbGluZU4gPSBsaW5lTm8odmlzdWFsKTsgfVxuICAgIHJldHVybiBlbmRPZkxpbmUodHJ1ZSwgY20sIGxpbmUsIGxpbmVOLCAtMSlcbiAgfVxuICBmdW5jdGlvbiBsaW5lU3RhcnRTbWFydChjbSwgcG9zKSB7XG4gICAgdmFyIHN0YXJ0ID0gbGluZVN0YXJ0KGNtLCBwb3MubGluZSk7XG4gICAgdmFyIGxpbmUgPSBnZXRMaW5lKGNtLmRvYywgc3RhcnQubGluZSk7XG4gICAgdmFyIG9yZGVyID0gZ2V0T3JkZXIobGluZSwgY20uZG9jLmRpcmVjdGlvbik7XG4gICAgaWYgKCFvcmRlciB8fCBvcmRlclswXS5sZXZlbCA9PSAwKSB7XG4gICAgICB2YXIgZmlyc3ROb25XUyA9IE1hdGgubWF4KHN0YXJ0LmNoLCBsaW5lLnRleHQuc2VhcmNoKC9cXFMvKSk7XG4gICAgICB2YXIgaW5XUyA9IHBvcy5saW5lID09IHN0YXJ0LmxpbmUgJiYgcG9zLmNoIDw9IGZpcnN0Tm9uV1MgJiYgcG9zLmNoO1xuICAgICAgcmV0dXJuIFBvcyhzdGFydC5saW5lLCBpbldTID8gMCA6IGZpcnN0Tm9uV1MsIHN0YXJ0LnN0aWNreSlcbiAgICB9XG4gICAgcmV0dXJuIHN0YXJ0XG4gIH1cblxuICAvLyBSdW4gYSBoYW5kbGVyIHRoYXQgd2FzIGJvdW5kIHRvIGEga2V5LlxuICBmdW5jdGlvbiBkb0hhbmRsZUJpbmRpbmcoY20sIGJvdW5kLCBkcm9wU2hpZnQpIHtcbiAgICBpZiAodHlwZW9mIGJvdW5kID09IFwic3RyaW5nXCIpIHtcbiAgICAgIGJvdW5kID0gY29tbWFuZHNbYm91bmRdO1xuICAgICAgaWYgKCFib3VuZCkgeyByZXR1cm4gZmFsc2UgfVxuICAgIH1cbiAgICAvLyBFbnN1cmUgcHJldmlvdXMgaW5wdXQgaGFzIGJlZW4gcmVhZCwgc28gdGhhdCB0aGUgaGFuZGxlciBzZWVzIGFcbiAgICAvLyBjb25zaXN0ZW50IHZpZXcgb2YgdGhlIGRvY3VtZW50XG4gICAgY20uZGlzcGxheS5pbnB1dC5lbnN1cmVQb2xsZWQoKTtcbiAgICB2YXIgcHJldlNoaWZ0ID0gY20uZGlzcGxheS5zaGlmdCwgZG9uZSA9IGZhbHNlO1xuICAgIHRyeSB7XG4gICAgICBpZiAoY20uaXNSZWFkT25seSgpKSB7IGNtLnN0YXRlLnN1cHByZXNzRWRpdHMgPSB0cnVlOyB9XG4gICAgICBpZiAoZHJvcFNoaWZ0KSB7IGNtLmRpc3BsYXkuc2hpZnQgPSBmYWxzZTsgfVxuICAgICAgZG9uZSA9IGJvdW5kKGNtKSAhPSBQYXNzO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBjbS5kaXNwbGF5LnNoaWZ0ID0gcHJldlNoaWZ0O1xuICAgICAgY20uc3RhdGUuc3VwcHJlc3NFZGl0cyA9IGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gZG9uZVxuICB9XG5cbiAgZnVuY3Rpb24gbG9va3VwS2V5Rm9yRWRpdG9yKGNtLCBuYW1lLCBoYW5kbGUpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNtLnN0YXRlLmtleU1hcHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciByZXN1bHQgPSBsb29rdXBLZXkobmFtZSwgY20uc3RhdGUua2V5TWFwc1tpXSwgaGFuZGxlLCBjbSk7XG4gICAgICBpZiAocmVzdWx0KSB7IHJldHVybiByZXN1bHQgfVxuICAgIH1cbiAgICByZXR1cm4gKGNtLm9wdGlvbnMuZXh0cmFLZXlzICYmIGxvb2t1cEtleShuYW1lLCBjbS5vcHRpb25zLmV4dHJhS2V5cywgaGFuZGxlLCBjbSkpXG4gICAgICB8fCBsb29rdXBLZXkobmFtZSwgY20ub3B0aW9ucy5rZXlNYXAsIGhhbmRsZSwgY20pXG4gIH1cblxuICAvLyBOb3RlIHRoYXQsIGRlc3BpdGUgdGhlIG5hbWUsIHRoaXMgZnVuY3Rpb24gaXMgYWxzbyB1c2VkIHRvIGNoZWNrXG4gIC8vIGZvciBib3VuZCBtb3VzZSBjbGlja3MuXG5cbiAgdmFyIHN0b3BTZXEgPSBuZXcgRGVsYXllZDtcblxuICBmdW5jdGlvbiBkaXNwYXRjaEtleShjbSwgbmFtZSwgZSwgaGFuZGxlKSB7XG4gICAgdmFyIHNlcSA9IGNtLnN0YXRlLmtleVNlcTtcbiAgICBpZiAoc2VxKSB7XG4gICAgICBpZiAoaXNNb2RpZmllcktleShuYW1lKSkgeyByZXR1cm4gXCJoYW5kbGVkXCIgfVxuICAgICAgaWYgKC9cXCckLy50ZXN0KG5hbWUpKVxuICAgICAgICB7IGNtLnN0YXRlLmtleVNlcSA9IG51bGw7IH1cbiAgICAgIGVsc2VcbiAgICAgICAgeyBzdG9wU2VxLnNldCg1MCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGlmIChjbS5zdGF0ZS5rZXlTZXEgPT0gc2VxKSB7XG4gICAgICAgICAgICBjbS5zdGF0ZS5rZXlTZXEgPSBudWxsO1xuICAgICAgICAgICAgY20uZGlzcGxheS5pbnB1dC5yZXNldCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7IH1cbiAgICAgIGlmIChkaXNwYXRjaEtleUlubmVyKGNtLCBzZXEgKyBcIiBcIiArIG5hbWUsIGUsIGhhbmRsZSkpIHsgcmV0dXJuIHRydWUgfVxuICAgIH1cbiAgICByZXR1cm4gZGlzcGF0Y2hLZXlJbm5lcihjbSwgbmFtZSwgZSwgaGFuZGxlKVxuICB9XG5cbiAgZnVuY3Rpb24gZGlzcGF0Y2hLZXlJbm5lcihjbSwgbmFtZSwgZSwgaGFuZGxlKSB7XG4gICAgdmFyIHJlc3VsdCA9IGxvb2t1cEtleUZvckVkaXRvcihjbSwgbmFtZSwgaGFuZGxlKTtcblxuICAgIGlmIChyZXN1bHQgPT0gXCJtdWx0aVwiKVxuICAgICAgeyBjbS5zdGF0ZS5rZXlTZXEgPSBuYW1lOyB9XG4gICAgaWYgKHJlc3VsdCA9PSBcImhhbmRsZWRcIilcbiAgICAgIHsgc2lnbmFsTGF0ZXIoY20sIFwia2V5SGFuZGxlZFwiLCBjbSwgbmFtZSwgZSk7IH1cblxuICAgIGlmIChyZXN1bHQgPT0gXCJoYW5kbGVkXCIgfHwgcmVzdWx0ID09IFwibXVsdGlcIikge1xuICAgICAgZV9wcmV2ZW50RGVmYXVsdChlKTtcbiAgICAgIHJlc3RhcnRCbGluayhjbSk7XG4gICAgfVxuXG4gICAgcmV0dXJuICEhcmVzdWx0XG4gIH1cblxuICAvLyBIYW5kbGUgYSBrZXkgZnJvbSB0aGUga2V5ZG93biBldmVudC5cbiAgZnVuY3Rpb24gaGFuZGxlS2V5QmluZGluZyhjbSwgZSkge1xuICAgIHZhciBuYW1lID0ga2V5TmFtZShlLCB0cnVlKTtcbiAgICBpZiAoIW5hbWUpIHsgcmV0dXJuIGZhbHNlIH1cblxuICAgIGlmIChlLnNoaWZ0S2V5ICYmICFjbS5zdGF0ZS5rZXlTZXEpIHtcbiAgICAgIC8vIEZpcnN0IHRyeSB0byByZXNvbHZlIGZ1bGwgbmFtZSAoaW5jbHVkaW5nICdTaGlmdC0nKS4gRmFpbGluZ1xuICAgICAgLy8gdGhhdCwgc2VlIGlmIHRoZXJlIGlzIGEgY3Vyc29yLW1vdGlvbiBjb21tYW5kIChzdGFydGluZyB3aXRoXG4gICAgICAvLyAnZ28nKSBib3VuZCB0byB0aGUga2V5bmFtZSB3aXRob3V0ICdTaGlmdC0nLlxuICAgICAgcmV0dXJuIGRpc3BhdGNoS2V5KGNtLCBcIlNoaWZ0LVwiICsgbmFtZSwgZSwgZnVuY3Rpb24gKGIpIHsgcmV0dXJuIGRvSGFuZGxlQmluZGluZyhjbSwgYiwgdHJ1ZSk7IH0pXG4gICAgICAgICAgfHwgZGlzcGF0Y2hLZXkoY20sIG5hbWUsIGUsIGZ1bmN0aW9uIChiKSB7XG4gICAgICAgICAgICAgICBpZiAodHlwZW9mIGIgPT0gXCJzdHJpbmdcIiA/IC9eZ29bQS1aXS8udGVzdChiKSA6IGIubW90aW9uKVxuICAgICAgICAgICAgICAgICB7IHJldHVybiBkb0hhbmRsZUJpbmRpbmcoY20sIGIpIH1cbiAgICAgICAgICAgICB9KVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZGlzcGF0Y2hLZXkoY20sIG5hbWUsIGUsIGZ1bmN0aW9uIChiKSB7IHJldHVybiBkb0hhbmRsZUJpbmRpbmcoY20sIGIpOyB9KVxuICAgIH1cbiAgfVxuXG4gIC8vIEhhbmRsZSBhIGtleSBmcm9tIHRoZSBrZXlwcmVzcyBldmVudFxuICBmdW5jdGlvbiBoYW5kbGVDaGFyQmluZGluZyhjbSwgZSwgY2gpIHtcbiAgICByZXR1cm4gZGlzcGF0Y2hLZXkoY20sIFwiJ1wiICsgY2ggKyBcIidcIiwgZSwgZnVuY3Rpb24gKGIpIHsgcmV0dXJuIGRvSGFuZGxlQmluZGluZyhjbSwgYiwgdHJ1ZSk7IH0pXG4gIH1cblxuICB2YXIgbGFzdFN0b3BwZWRLZXkgPSBudWxsO1xuICBmdW5jdGlvbiBvbktleURvd24oZSkge1xuICAgIHZhciBjbSA9IHRoaXM7XG4gICAgaWYgKGUudGFyZ2V0ICYmIGUudGFyZ2V0ICE9IGNtLmRpc3BsYXkuaW5wdXQuZ2V0RmllbGQoKSkgeyByZXR1cm4gfVxuICAgIGNtLmN1ck9wLmZvY3VzID0gYWN0aXZlRWx0KHJvb3QoY20pKTtcbiAgICBpZiAoc2lnbmFsRE9NRXZlbnQoY20sIGUpKSB7IHJldHVybiB9XG4gICAgLy8gSUUgZG9lcyBzdHJhbmdlIHRoaW5ncyB3aXRoIGVzY2FwZS5cbiAgICBpZiAoaWUgJiYgaWVfdmVyc2lvbiA8IDExICYmIGUua2V5Q29kZSA9PSAyNykgeyBlLnJldHVyblZhbHVlID0gZmFsc2U7IH1cbiAgICB2YXIgY29kZSA9IGUua2V5Q29kZTtcbiAgICBjbS5kaXNwbGF5LnNoaWZ0ID0gY29kZSA9PSAxNiB8fCBlLnNoaWZ0S2V5O1xuICAgIHZhciBoYW5kbGVkID0gaGFuZGxlS2V5QmluZGluZyhjbSwgZSk7XG4gICAgaWYgKHByZXN0bykge1xuICAgICAgbGFzdFN0b3BwZWRLZXkgPSBoYW5kbGVkID8gY29kZSA6IG51bGw7XG4gICAgICAvLyBPcGVyYSBoYXMgbm8gY3V0IGV2ZW50Li4uIHdlIHRyeSB0byBhdCBsZWFzdCBjYXRjaCB0aGUga2V5IGNvbWJvXG4gICAgICBpZiAoIWhhbmRsZWQgJiYgY29kZSA9PSA4OCAmJiAhaGFzQ29weUV2ZW50ICYmIChtYWMgPyBlLm1ldGFLZXkgOiBlLmN0cmxLZXkpKVxuICAgICAgICB7IGNtLnJlcGxhY2VTZWxlY3Rpb24oXCJcIiwgbnVsbCwgXCJjdXRcIik7IH1cbiAgICB9XG4gICAgaWYgKGdlY2tvICYmICFtYWMgJiYgIWhhbmRsZWQgJiYgY29kZSA9PSA0NiAmJiBlLnNoaWZ0S2V5ICYmICFlLmN0cmxLZXkgJiYgZG9jdW1lbnQuZXhlY0NvbW1hbmQpXG4gICAgICB7IGRvY3VtZW50LmV4ZWNDb21tYW5kKFwiY3V0XCIpOyB9XG5cbiAgICAvLyBUdXJuIG1vdXNlIGludG8gY3Jvc3NoYWlyIHdoZW4gQWx0IGlzIGhlbGQgb24gTWFjLlxuICAgIGlmIChjb2RlID09IDE4ICYmICEvXFxiQ29kZU1pcnJvci1jcm9zc2hhaXJcXGIvLnRlc3QoY20uZGlzcGxheS5saW5lRGl2LmNsYXNzTmFtZSkpXG4gICAgICB7IHNob3dDcm9zc0hhaXIoY20pOyB9XG4gIH1cblxuICBmdW5jdGlvbiBzaG93Q3Jvc3NIYWlyKGNtKSB7XG4gICAgdmFyIGxpbmVEaXYgPSBjbS5kaXNwbGF5LmxpbmVEaXY7XG4gICAgYWRkQ2xhc3MobGluZURpdiwgXCJDb2RlTWlycm9yLWNyb3NzaGFpclwiKTtcblxuICAgIGZ1bmN0aW9uIHVwKGUpIHtcbiAgICAgIGlmIChlLmtleUNvZGUgPT0gMTggfHwgIWUuYWx0S2V5KSB7XG4gICAgICAgIHJtQ2xhc3MobGluZURpdiwgXCJDb2RlTWlycm9yLWNyb3NzaGFpclwiKTtcbiAgICAgICAgb2ZmKGRvY3VtZW50LCBcImtleXVwXCIsIHVwKTtcbiAgICAgICAgb2ZmKGRvY3VtZW50LCBcIm1vdXNlb3ZlclwiLCB1cCk7XG4gICAgICB9XG4gICAgfVxuICAgIG9uKGRvY3VtZW50LCBcImtleXVwXCIsIHVwKTtcbiAgICBvbihkb2N1bWVudCwgXCJtb3VzZW92ZXJcIiwgdXApO1xuICB9XG5cbiAgZnVuY3Rpb24gb25LZXlVcChlKSB7XG4gICAgaWYgKGUua2V5Q29kZSA9PSAxNikgeyB0aGlzLmRvYy5zZWwuc2hpZnQgPSBmYWxzZTsgfVxuICAgIHNpZ25hbERPTUV2ZW50KHRoaXMsIGUpO1xuICB9XG5cbiAgZnVuY3Rpb24gb25LZXlQcmVzcyhlKSB7XG4gICAgdmFyIGNtID0gdGhpcztcbiAgICBpZiAoZS50YXJnZXQgJiYgZS50YXJnZXQgIT0gY20uZGlzcGxheS5pbnB1dC5nZXRGaWVsZCgpKSB7IHJldHVybiB9XG4gICAgaWYgKGV2ZW50SW5XaWRnZXQoY20uZGlzcGxheSwgZSkgfHwgc2lnbmFsRE9NRXZlbnQoY20sIGUpIHx8IGUuY3RybEtleSAmJiAhZS5hbHRLZXkgfHwgbWFjICYmIGUubWV0YUtleSkgeyByZXR1cm4gfVxuICAgIHZhciBrZXlDb2RlID0gZS5rZXlDb2RlLCBjaGFyQ29kZSA9IGUuY2hhckNvZGU7XG4gICAgaWYgKHByZXN0byAmJiBrZXlDb2RlID09IGxhc3RTdG9wcGVkS2V5KSB7bGFzdFN0b3BwZWRLZXkgPSBudWxsOyBlX3ByZXZlbnREZWZhdWx0KGUpOyByZXR1cm59XG4gICAgaWYgKChwcmVzdG8gJiYgKCFlLndoaWNoIHx8IGUud2hpY2ggPCAxMCkpICYmIGhhbmRsZUtleUJpbmRpbmcoY20sIGUpKSB7IHJldHVybiB9XG4gICAgdmFyIGNoID0gU3RyaW5nLmZyb21DaGFyQ29kZShjaGFyQ29kZSA9PSBudWxsID8ga2V5Q29kZSA6IGNoYXJDb2RlKTtcbiAgICAvLyBTb21lIGJyb3dzZXJzIGZpcmUga2V5cHJlc3MgZXZlbnRzIGZvciBiYWNrc3BhY2VcbiAgICBpZiAoY2ggPT0gXCJcXHgwOFwiKSB7IHJldHVybiB9XG4gICAgaWYgKGhhbmRsZUNoYXJCaW5kaW5nKGNtLCBlLCBjaCkpIHsgcmV0dXJuIH1cbiAgICBjbS5kaXNwbGF5LmlucHV0Lm9uS2V5UHJlc3MoZSk7XG4gIH1cblxuICB2YXIgRE9VQkxFQ0xJQ0tfREVMQVkgPSA0MDA7XG5cbiAgdmFyIFBhc3RDbGljayA9IGZ1bmN0aW9uKHRpbWUsIHBvcywgYnV0dG9uKSB7XG4gICAgdGhpcy50aW1lID0gdGltZTtcbiAgICB0aGlzLnBvcyA9IHBvcztcbiAgICB0aGlzLmJ1dHRvbiA9IGJ1dHRvbjtcbiAgfTtcblxuICBQYXN0Q2xpY2sucHJvdG90eXBlLmNvbXBhcmUgPSBmdW5jdGlvbiAodGltZSwgcG9zLCBidXR0b24pIHtcbiAgICByZXR1cm4gdGhpcy50aW1lICsgRE9VQkxFQ0xJQ0tfREVMQVkgPiB0aW1lICYmXG4gICAgICBjbXAocG9zLCB0aGlzLnBvcykgPT0gMCAmJiBidXR0b24gPT0gdGhpcy5idXR0b25cbiAgfTtcblxuICB2YXIgbGFzdENsaWNrLCBsYXN0RG91YmxlQ2xpY2s7XG4gIGZ1bmN0aW9uIGNsaWNrUmVwZWF0KHBvcywgYnV0dG9uKSB7XG4gICAgdmFyIG5vdyA9ICtuZXcgRGF0ZTtcbiAgICBpZiAobGFzdERvdWJsZUNsaWNrICYmIGxhc3REb3VibGVDbGljay5jb21wYXJlKG5vdywgcG9zLCBidXR0b24pKSB7XG4gICAgICBsYXN0Q2xpY2sgPSBsYXN0RG91YmxlQ2xpY2sgPSBudWxsO1xuICAgICAgcmV0dXJuIFwidHJpcGxlXCJcbiAgICB9IGVsc2UgaWYgKGxhc3RDbGljayAmJiBsYXN0Q2xpY2suY29tcGFyZShub3csIHBvcywgYnV0dG9uKSkge1xuICAgICAgbGFzdERvdWJsZUNsaWNrID0gbmV3IFBhc3RDbGljayhub3csIHBvcywgYnV0dG9uKTtcbiAgICAgIGxhc3RDbGljayA9IG51bGw7XG4gICAgICByZXR1cm4gXCJkb3VibGVcIlxuICAgIH0gZWxzZSB7XG4gICAgICBsYXN0Q2xpY2sgPSBuZXcgUGFzdENsaWNrKG5vdywgcG9zLCBidXR0b24pO1xuICAgICAgbGFzdERvdWJsZUNsaWNrID0gbnVsbDtcbiAgICAgIHJldHVybiBcInNpbmdsZVwiXG4gICAgfVxuICB9XG5cbiAgLy8gQSBtb3VzZSBkb3duIGNhbiBiZSBhIHNpbmdsZSBjbGljaywgZG91YmxlIGNsaWNrLCB0cmlwbGUgY2xpY2ssXG4gIC8vIHN0YXJ0IG9mIHNlbGVjdGlvbiBkcmFnLCBzdGFydCBvZiB0ZXh0IGRyYWcsIG5ldyBjdXJzb3JcbiAgLy8gKGN0cmwtY2xpY2spLCByZWN0YW5nbGUgZHJhZyAoYWx0LWRyYWcpLCBvciB4d2luXG4gIC8vIG1pZGRsZS1jbGljay1wYXN0ZS4gT3IgaXQgbWlnaHQgYmUgYSBjbGljayBvbiBzb21ldGhpbmcgd2Ugc2hvdWxkXG4gIC8vIG5vdCBpbnRlcmZlcmUgd2l0aCwgc3VjaCBhcyBhIHNjcm9sbGJhciBvciB3aWRnZXQuXG4gIGZ1bmN0aW9uIG9uTW91c2VEb3duKGUpIHtcbiAgICB2YXIgY20gPSB0aGlzLCBkaXNwbGF5ID0gY20uZGlzcGxheTtcbiAgICBpZiAoc2lnbmFsRE9NRXZlbnQoY20sIGUpIHx8IGRpc3BsYXkuYWN0aXZlVG91Y2ggJiYgZGlzcGxheS5pbnB1dC5zdXBwb3J0c1RvdWNoKCkpIHsgcmV0dXJuIH1cbiAgICBkaXNwbGF5LmlucHV0LmVuc3VyZVBvbGxlZCgpO1xuICAgIGRpc3BsYXkuc2hpZnQgPSBlLnNoaWZ0S2V5O1xuXG4gICAgaWYgKGV2ZW50SW5XaWRnZXQoZGlzcGxheSwgZSkpIHtcbiAgICAgIGlmICghd2Via2l0KSB7XG4gICAgICAgIC8vIEJyaWVmbHkgdHVybiBvZmYgZHJhZ2dhYmlsaXR5LCB0byBhbGxvdyB3aWRnZXRzIHRvIGRvXG4gICAgICAgIC8vIG5vcm1hbCBkcmFnZ2luZyB0aGluZ3MuXG4gICAgICAgIGRpc3BsYXkuc2Nyb2xsZXIuZHJhZ2dhYmxlID0gZmFsc2U7XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgeyByZXR1cm4gZGlzcGxheS5zY3JvbGxlci5kcmFnZ2FibGUgPSB0cnVlOyB9LCAxMDApO1xuICAgICAgfVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGlmIChjbGlja0luR3V0dGVyKGNtLCBlKSkgeyByZXR1cm4gfVxuICAgIHZhciBwb3MgPSBwb3NGcm9tTW91c2UoY20sIGUpLCBidXR0b24gPSBlX2J1dHRvbihlKSwgcmVwZWF0ID0gcG9zID8gY2xpY2tSZXBlYXQocG9zLCBidXR0b24pIDogXCJzaW5nbGVcIjtcbiAgICB3aW4oY20pLmZvY3VzKCk7XG5cbiAgICAvLyAjMzI2MTogbWFrZSBzdXJlLCB0aGF0IHdlJ3JlIG5vdCBzdGFydGluZyBhIHNlY29uZCBzZWxlY3Rpb25cbiAgICBpZiAoYnV0dG9uID09IDEgJiYgY20uc3RhdGUuc2VsZWN0aW5nVGV4dClcbiAgICAgIHsgY20uc3RhdGUuc2VsZWN0aW5nVGV4dChlKTsgfVxuXG4gICAgaWYgKHBvcyAmJiBoYW5kbGVNYXBwZWRCdXR0b24oY20sIGJ1dHRvbiwgcG9zLCByZXBlYXQsIGUpKSB7IHJldHVybiB9XG5cbiAgICBpZiAoYnV0dG9uID09IDEpIHtcbiAgICAgIGlmIChwb3MpIHsgbGVmdEJ1dHRvbkRvd24oY20sIHBvcywgcmVwZWF0LCBlKTsgfVxuICAgICAgZWxzZSBpZiAoZV90YXJnZXQoZSkgPT0gZGlzcGxheS5zY3JvbGxlcikgeyBlX3ByZXZlbnREZWZhdWx0KGUpOyB9XG4gICAgfSBlbHNlIGlmIChidXR0b24gPT0gMikge1xuICAgICAgaWYgKHBvcykgeyBleHRlbmRTZWxlY3Rpb24oY20uZG9jLCBwb3MpOyB9XG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIGRpc3BsYXkuaW5wdXQuZm9jdXMoKTsgfSwgMjApO1xuICAgIH0gZWxzZSBpZiAoYnV0dG9uID09IDMpIHtcbiAgICAgIGlmIChjYXB0dXJlUmlnaHRDbGljaykgeyBjbS5kaXNwbGF5LmlucHV0Lm9uQ29udGV4dE1lbnUoZSk7IH1cbiAgICAgIGVsc2UgeyBkZWxheUJsdXJFdmVudChjbSk7IH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBoYW5kbGVNYXBwZWRCdXR0b24oY20sIGJ1dHRvbiwgcG9zLCByZXBlYXQsIGV2ZW50KSB7XG4gICAgdmFyIG5hbWUgPSBcIkNsaWNrXCI7XG4gICAgaWYgKHJlcGVhdCA9PSBcImRvdWJsZVwiKSB7IG5hbWUgPSBcIkRvdWJsZVwiICsgbmFtZTsgfVxuICAgIGVsc2UgaWYgKHJlcGVhdCA9PSBcInRyaXBsZVwiKSB7IG5hbWUgPSBcIlRyaXBsZVwiICsgbmFtZTsgfVxuICAgIG5hbWUgPSAoYnV0dG9uID09IDEgPyBcIkxlZnRcIiA6IGJ1dHRvbiA9PSAyID8gXCJNaWRkbGVcIiA6IFwiUmlnaHRcIikgKyBuYW1lO1xuXG4gICAgcmV0dXJuIGRpc3BhdGNoS2V5KGNtLCAgYWRkTW9kaWZpZXJOYW1lcyhuYW1lLCBldmVudCksIGV2ZW50LCBmdW5jdGlvbiAoYm91bmQpIHtcbiAgICAgIGlmICh0eXBlb2YgYm91bmQgPT0gXCJzdHJpbmdcIikgeyBib3VuZCA9IGNvbW1hbmRzW2JvdW5kXTsgfVxuICAgICAgaWYgKCFib3VuZCkgeyByZXR1cm4gZmFsc2UgfVxuICAgICAgdmFyIGRvbmUgPSBmYWxzZTtcbiAgICAgIHRyeSB7XG4gICAgICAgIGlmIChjbS5pc1JlYWRPbmx5KCkpIHsgY20uc3RhdGUuc3VwcHJlc3NFZGl0cyA9IHRydWU7IH1cbiAgICAgICAgZG9uZSA9IGJvdW5kKGNtLCBwb3MpICE9IFBhc3M7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBjbS5zdGF0ZS5zdXBwcmVzc0VkaXRzID0gZmFsc2U7XG4gICAgICB9XG4gICAgICByZXR1cm4gZG9uZVxuICAgIH0pXG4gIH1cblxuICBmdW5jdGlvbiBjb25maWd1cmVNb3VzZShjbSwgcmVwZWF0LCBldmVudCkge1xuICAgIHZhciBvcHRpb24gPSBjbS5nZXRPcHRpb24oXCJjb25maWd1cmVNb3VzZVwiKTtcbiAgICB2YXIgdmFsdWUgPSBvcHRpb24gPyBvcHRpb24oY20sIHJlcGVhdCwgZXZlbnQpIDoge307XG4gICAgaWYgKHZhbHVlLnVuaXQgPT0gbnVsbCkge1xuICAgICAgdmFyIHJlY3QgPSBjaHJvbWVPUyA/IGV2ZW50LnNoaWZ0S2V5ICYmIGV2ZW50Lm1ldGFLZXkgOiBldmVudC5hbHRLZXk7XG4gICAgICB2YWx1ZS51bml0ID0gcmVjdCA/IFwicmVjdGFuZ2xlXCIgOiByZXBlYXQgPT0gXCJzaW5nbGVcIiA/IFwiY2hhclwiIDogcmVwZWF0ID09IFwiZG91YmxlXCIgPyBcIndvcmRcIiA6IFwibGluZVwiO1xuICAgIH1cbiAgICBpZiAodmFsdWUuZXh0ZW5kID09IG51bGwgfHwgY20uZG9jLmV4dGVuZCkgeyB2YWx1ZS5leHRlbmQgPSBjbS5kb2MuZXh0ZW5kIHx8IGV2ZW50LnNoaWZ0S2V5OyB9XG4gICAgaWYgKHZhbHVlLmFkZE5ldyA9PSBudWxsKSB7IHZhbHVlLmFkZE5ldyA9IG1hYyA/IGV2ZW50Lm1ldGFLZXkgOiBldmVudC5jdHJsS2V5OyB9XG4gICAgaWYgKHZhbHVlLm1vdmVPbkRyYWcgPT0gbnVsbCkgeyB2YWx1ZS5tb3ZlT25EcmFnID0gIShtYWMgPyBldmVudC5hbHRLZXkgOiBldmVudC5jdHJsS2V5KTsgfVxuICAgIHJldHVybiB2YWx1ZVxuICB9XG5cbiAgZnVuY3Rpb24gbGVmdEJ1dHRvbkRvd24oY20sIHBvcywgcmVwZWF0LCBldmVudCkge1xuICAgIGlmIChpZSkgeyBzZXRUaW1lb3V0KGJpbmQoZW5zdXJlRm9jdXMsIGNtKSwgMCk7IH1cbiAgICBlbHNlIHsgY20uY3VyT3AuZm9jdXMgPSBhY3RpdmVFbHQocm9vdChjbSkpOyB9XG5cbiAgICB2YXIgYmVoYXZpb3IgPSBjb25maWd1cmVNb3VzZShjbSwgcmVwZWF0LCBldmVudCk7XG5cbiAgICB2YXIgc2VsID0gY20uZG9jLnNlbCwgY29udGFpbmVkO1xuICAgIGlmIChjbS5vcHRpb25zLmRyYWdEcm9wICYmIGRyYWdBbmREcm9wICYmICFjbS5pc1JlYWRPbmx5KCkgJiZcbiAgICAgICAgcmVwZWF0ID09IFwic2luZ2xlXCIgJiYgKGNvbnRhaW5lZCA9IHNlbC5jb250YWlucyhwb3MpKSA+IC0xICYmXG4gICAgICAgIChjbXAoKGNvbnRhaW5lZCA9IHNlbC5yYW5nZXNbY29udGFpbmVkXSkuZnJvbSgpLCBwb3MpIDwgMCB8fCBwb3MueFJlbCA+IDApICYmXG4gICAgICAgIChjbXAoY29udGFpbmVkLnRvKCksIHBvcykgPiAwIHx8IHBvcy54UmVsIDwgMCkpXG4gICAgICB7IGxlZnRCdXR0b25TdGFydERyYWcoY20sIGV2ZW50LCBwb3MsIGJlaGF2aW9yKTsgfVxuICAgIGVsc2VcbiAgICAgIHsgbGVmdEJ1dHRvblNlbGVjdChjbSwgZXZlbnQsIHBvcywgYmVoYXZpb3IpOyB9XG4gIH1cblxuICAvLyBTdGFydCBhIHRleHQgZHJhZy4gV2hlbiBpdCBlbmRzLCBzZWUgaWYgYW55IGRyYWdnaW5nIGFjdHVhbGx5XG4gIC8vIGhhcHBlbiwgYW5kIHRyZWF0IGFzIGEgY2xpY2sgaWYgaXQgZGlkbid0LlxuICBmdW5jdGlvbiBsZWZ0QnV0dG9uU3RhcnREcmFnKGNtLCBldmVudCwgcG9zLCBiZWhhdmlvcikge1xuICAgIHZhciBkaXNwbGF5ID0gY20uZGlzcGxheSwgbW92ZWQgPSBmYWxzZTtcbiAgICB2YXIgZHJhZ0VuZCA9IG9wZXJhdGlvbihjbSwgZnVuY3Rpb24gKGUpIHtcbiAgICAgIGlmICh3ZWJraXQpIHsgZGlzcGxheS5zY3JvbGxlci5kcmFnZ2FibGUgPSBmYWxzZTsgfVxuICAgICAgY20uc3RhdGUuZHJhZ2dpbmdUZXh0ID0gZmFsc2U7XG4gICAgICBpZiAoY20uc3RhdGUuZGVsYXlpbmdCbHVyRXZlbnQpIHtcbiAgICAgICAgaWYgKGNtLmhhc0ZvY3VzKCkpIHsgY20uc3RhdGUuZGVsYXlpbmdCbHVyRXZlbnQgPSBmYWxzZTsgfVxuICAgICAgICBlbHNlIHsgZGVsYXlCbHVyRXZlbnQoY20pOyB9XG4gICAgICB9XG4gICAgICBvZmYoZGlzcGxheS53cmFwcGVyLm93bmVyRG9jdW1lbnQsIFwibW91c2V1cFwiLCBkcmFnRW5kKTtcbiAgICAgIG9mZihkaXNwbGF5LndyYXBwZXIub3duZXJEb2N1bWVudCwgXCJtb3VzZW1vdmVcIiwgbW91c2VNb3ZlKTtcbiAgICAgIG9mZihkaXNwbGF5LnNjcm9sbGVyLCBcImRyYWdzdGFydFwiLCBkcmFnU3RhcnQpO1xuICAgICAgb2ZmKGRpc3BsYXkuc2Nyb2xsZXIsIFwiZHJvcFwiLCBkcmFnRW5kKTtcbiAgICAgIGlmICghbW92ZWQpIHtcbiAgICAgICAgZV9wcmV2ZW50RGVmYXVsdChlKTtcbiAgICAgICAgaWYgKCFiZWhhdmlvci5hZGROZXcpXG4gICAgICAgICAgeyBleHRlbmRTZWxlY3Rpb24oY20uZG9jLCBwb3MsIG51bGwsIG51bGwsIGJlaGF2aW9yLmV4dGVuZCk7IH1cbiAgICAgICAgLy8gV29yayBhcm91bmQgdW5leHBsYWluYWJsZSBmb2N1cyBwcm9ibGVtIGluIElFOSAoIzIxMjcpIGFuZCBDaHJvbWUgKCMzMDgxKVxuICAgICAgICBpZiAoKHdlYmtpdCAmJiAhc2FmYXJpKSB8fCBpZSAmJiBpZV92ZXJzaW9uID09IDkpXG4gICAgICAgICAgeyBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtkaXNwbGF5LndyYXBwZXIub3duZXJEb2N1bWVudC5ib2R5LmZvY3VzKHtwcmV2ZW50U2Nyb2xsOiB0cnVlfSk7IGRpc3BsYXkuaW5wdXQuZm9jdXMoKTt9LCAyMCk7IH1cbiAgICAgICAgZWxzZVxuICAgICAgICAgIHsgZGlzcGxheS5pbnB1dC5mb2N1cygpOyB9XG4gICAgICB9XG4gICAgfSk7XG4gICAgdmFyIG1vdXNlTW92ZSA9IGZ1bmN0aW9uKGUyKSB7XG4gICAgICBtb3ZlZCA9IG1vdmVkIHx8IE1hdGguYWJzKGV2ZW50LmNsaWVudFggLSBlMi5jbGllbnRYKSArIE1hdGguYWJzKGV2ZW50LmNsaWVudFkgLSBlMi5jbGllbnRZKSA+PSAxMDtcbiAgICB9O1xuICAgIHZhciBkcmFnU3RhcnQgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBtb3ZlZCA9IHRydWU7IH07XG4gICAgLy8gTGV0IHRoZSBkcmFnIGhhbmRsZXIgaGFuZGxlIHRoaXMuXG4gICAgaWYgKHdlYmtpdCkgeyBkaXNwbGF5LnNjcm9sbGVyLmRyYWdnYWJsZSA9IHRydWU7IH1cbiAgICBjbS5zdGF0ZS5kcmFnZ2luZ1RleHQgPSBkcmFnRW5kO1xuICAgIGRyYWdFbmQuY29weSA9ICFiZWhhdmlvci5tb3ZlT25EcmFnO1xuICAgIG9uKGRpc3BsYXkud3JhcHBlci5vd25lckRvY3VtZW50LCBcIm1vdXNldXBcIiwgZHJhZ0VuZCk7XG4gICAgb24oZGlzcGxheS53cmFwcGVyLm93bmVyRG9jdW1lbnQsIFwibW91c2Vtb3ZlXCIsIG1vdXNlTW92ZSk7XG4gICAgb24oZGlzcGxheS5zY3JvbGxlciwgXCJkcmFnc3RhcnRcIiwgZHJhZ1N0YXJ0KTtcbiAgICBvbihkaXNwbGF5LnNjcm9sbGVyLCBcImRyb3BcIiwgZHJhZ0VuZCk7XG5cbiAgICBjbS5zdGF0ZS5kZWxheWluZ0JsdXJFdmVudCA9IHRydWU7XG4gICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7IHJldHVybiBkaXNwbGF5LmlucHV0LmZvY3VzKCk7IH0sIDIwKTtcbiAgICAvLyBJRSdzIGFwcHJvYWNoIHRvIGRyYWdnYWJsZVxuICAgIGlmIChkaXNwbGF5LnNjcm9sbGVyLmRyYWdEcm9wKSB7IGRpc3BsYXkuc2Nyb2xsZXIuZHJhZ0Ryb3AoKTsgfVxuICB9XG5cbiAgZnVuY3Rpb24gcmFuZ2VGb3JVbml0KGNtLCBwb3MsIHVuaXQpIHtcbiAgICBpZiAodW5pdCA9PSBcImNoYXJcIikgeyByZXR1cm4gbmV3IFJhbmdlKHBvcywgcG9zKSB9XG4gICAgaWYgKHVuaXQgPT0gXCJ3b3JkXCIpIHsgcmV0dXJuIGNtLmZpbmRXb3JkQXQocG9zKSB9XG4gICAgaWYgKHVuaXQgPT0gXCJsaW5lXCIpIHsgcmV0dXJuIG5ldyBSYW5nZShQb3MocG9zLmxpbmUsIDApLCBjbGlwUG9zKGNtLmRvYywgUG9zKHBvcy5saW5lICsgMSwgMCkpKSB9XG4gICAgdmFyIHJlc3VsdCA9IHVuaXQoY20sIHBvcyk7XG4gICAgcmV0dXJuIG5ldyBSYW5nZShyZXN1bHQuZnJvbSwgcmVzdWx0LnRvKVxuICB9XG5cbiAgLy8gTm9ybWFsIHNlbGVjdGlvbiwgYXMgb3Bwb3NlZCB0byB0ZXh0IGRyYWdnaW5nLlxuICBmdW5jdGlvbiBsZWZ0QnV0dG9uU2VsZWN0KGNtLCBldmVudCwgc3RhcnQsIGJlaGF2aW9yKSB7XG4gICAgaWYgKGllKSB7IGRlbGF5Qmx1ckV2ZW50KGNtKTsgfVxuICAgIHZhciBkaXNwbGF5ID0gY20uZGlzcGxheSwgZG9jID0gY20uZG9jO1xuICAgIGVfcHJldmVudERlZmF1bHQoZXZlbnQpO1xuXG4gICAgdmFyIG91clJhbmdlLCBvdXJJbmRleCwgc3RhcnRTZWwgPSBkb2Muc2VsLCByYW5nZXMgPSBzdGFydFNlbC5yYW5nZXM7XG4gICAgaWYgKGJlaGF2aW9yLmFkZE5ldyAmJiAhYmVoYXZpb3IuZXh0ZW5kKSB7XG4gICAgICBvdXJJbmRleCA9IGRvYy5zZWwuY29udGFpbnMoc3RhcnQpO1xuICAgICAgaWYgKG91ckluZGV4ID4gLTEpXG4gICAgICAgIHsgb3VyUmFuZ2UgPSByYW5nZXNbb3VySW5kZXhdOyB9XG4gICAgICBlbHNlXG4gICAgICAgIHsgb3VyUmFuZ2UgPSBuZXcgUmFuZ2Uoc3RhcnQsIHN0YXJ0KTsgfVxuICAgIH0gZWxzZSB7XG4gICAgICBvdXJSYW5nZSA9IGRvYy5zZWwucHJpbWFyeSgpO1xuICAgICAgb3VySW5kZXggPSBkb2Muc2VsLnByaW1JbmRleDtcbiAgICB9XG5cbiAgICBpZiAoYmVoYXZpb3IudW5pdCA9PSBcInJlY3RhbmdsZVwiKSB7XG4gICAgICBpZiAoIWJlaGF2aW9yLmFkZE5ldykgeyBvdXJSYW5nZSA9IG5ldyBSYW5nZShzdGFydCwgc3RhcnQpOyB9XG4gICAgICBzdGFydCA9IHBvc0Zyb21Nb3VzZShjbSwgZXZlbnQsIHRydWUsIHRydWUpO1xuICAgICAgb3VySW5kZXggPSAtMTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIHJhbmdlID0gcmFuZ2VGb3JVbml0KGNtLCBzdGFydCwgYmVoYXZpb3IudW5pdCk7XG4gICAgICBpZiAoYmVoYXZpb3IuZXh0ZW5kKVxuICAgICAgICB7IG91clJhbmdlID0gZXh0ZW5kUmFuZ2Uob3VyUmFuZ2UsIHJhbmdlLmFuY2hvciwgcmFuZ2UuaGVhZCwgYmVoYXZpb3IuZXh0ZW5kKTsgfVxuICAgICAgZWxzZVxuICAgICAgICB7IG91clJhbmdlID0gcmFuZ2U7IH1cbiAgICB9XG5cbiAgICBpZiAoIWJlaGF2aW9yLmFkZE5ldykge1xuICAgICAgb3VySW5kZXggPSAwO1xuICAgICAgc2V0U2VsZWN0aW9uKGRvYywgbmV3IFNlbGVjdGlvbihbb3VyUmFuZ2VdLCAwKSwgc2VsX21vdXNlKTtcbiAgICAgIHN0YXJ0U2VsID0gZG9jLnNlbDtcbiAgICB9IGVsc2UgaWYgKG91ckluZGV4ID09IC0xKSB7XG4gICAgICBvdXJJbmRleCA9IHJhbmdlcy5sZW5ndGg7XG4gICAgICBzZXRTZWxlY3Rpb24oZG9jLCBub3JtYWxpemVTZWxlY3Rpb24oY20sIHJhbmdlcy5jb25jYXQoW291clJhbmdlXSksIG91ckluZGV4KSxcbiAgICAgICAgICAgICAgICAgICB7c2Nyb2xsOiBmYWxzZSwgb3JpZ2luOiBcIiptb3VzZVwifSk7XG4gICAgfSBlbHNlIGlmIChyYW5nZXMubGVuZ3RoID4gMSAmJiByYW5nZXNbb3VySW5kZXhdLmVtcHR5KCkgJiYgYmVoYXZpb3IudW5pdCA9PSBcImNoYXJcIiAmJiAhYmVoYXZpb3IuZXh0ZW5kKSB7XG4gICAgICBzZXRTZWxlY3Rpb24oZG9jLCBub3JtYWxpemVTZWxlY3Rpb24oY20sIHJhbmdlcy5zbGljZSgwLCBvdXJJbmRleCkuY29uY2F0KHJhbmdlcy5zbGljZShvdXJJbmRleCArIDEpKSwgMCksXG4gICAgICAgICAgICAgICAgICAge3Njcm9sbDogZmFsc2UsIG9yaWdpbjogXCIqbW91c2VcIn0pO1xuICAgICAgc3RhcnRTZWwgPSBkb2Muc2VsO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXBsYWNlT25lU2VsZWN0aW9uKGRvYywgb3VySW5kZXgsIG91clJhbmdlLCBzZWxfbW91c2UpO1xuICAgIH1cblxuICAgIHZhciBsYXN0UG9zID0gc3RhcnQ7XG4gICAgZnVuY3Rpb24gZXh0ZW5kVG8ocG9zKSB7XG4gICAgICBpZiAoY21wKGxhc3RQb3MsIHBvcykgPT0gMCkgeyByZXR1cm4gfVxuICAgICAgbGFzdFBvcyA9IHBvcztcblxuICAgICAgaWYgKGJlaGF2aW9yLnVuaXQgPT0gXCJyZWN0YW5nbGVcIikge1xuICAgICAgICB2YXIgcmFuZ2VzID0gW10sIHRhYlNpemUgPSBjbS5vcHRpb25zLnRhYlNpemU7XG4gICAgICAgIHZhciBzdGFydENvbCA9IGNvdW50Q29sdW1uKGdldExpbmUoZG9jLCBzdGFydC5saW5lKS50ZXh0LCBzdGFydC5jaCwgdGFiU2l6ZSk7XG4gICAgICAgIHZhciBwb3NDb2wgPSBjb3VudENvbHVtbihnZXRMaW5lKGRvYywgcG9zLmxpbmUpLnRleHQsIHBvcy5jaCwgdGFiU2l6ZSk7XG4gICAgICAgIHZhciBsZWZ0ID0gTWF0aC5taW4oc3RhcnRDb2wsIHBvc0NvbCksIHJpZ2h0ID0gTWF0aC5tYXgoc3RhcnRDb2wsIHBvc0NvbCk7XG4gICAgICAgIGZvciAodmFyIGxpbmUgPSBNYXRoLm1pbihzdGFydC5saW5lLCBwb3MubGluZSksIGVuZCA9IE1hdGgubWluKGNtLmxhc3RMaW5lKCksIE1hdGgubWF4KHN0YXJ0LmxpbmUsIHBvcy5saW5lKSk7XG4gICAgICAgICAgICAgbGluZSA8PSBlbmQ7IGxpbmUrKykge1xuICAgICAgICAgIHZhciB0ZXh0ID0gZ2V0TGluZShkb2MsIGxpbmUpLnRleHQsIGxlZnRQb3MgPSBmaW5kQ29sdW1uKHRleHQsIGxlZnQsIHRhYlNpemUpO1xuICAgICAgICAgIGlmIChsZWZ0ID09IHJpZ2h0KVxuICAgICAgICAgICAgeyByYW5nZXMucHVzaChuZXcgUmFuZ2UoUG9zKGxpbmUsIGxlZnRQb3MpLCBQb3MobGluZSwgbGVmdFBvcykpKTsgfVxuICAgICAgICAgIGVsc2UgaWYgKHRleHQubGVuZ3RoID4gbGVmdFBvcylcbiAgICAgICAgICAgIHsgcmFuZ2VzLnB1c2gobmV3IFJhbmdlKFBvcyhsaW5lLCBsZWZ0UG9zKSwgUG9zKGxpbmUsIGZpbmRDb2x1bW4odGV4dCwgcmlnaHQsIHRhYlNpemUpKSkpOyB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFyYW5nZXMubGVuZ3RoKSB7IHJhbmdlcy5wdXNoKG5ldyBSYW5nZShzdGFydCwgc3RhcnQpKTsgfVxuICAgICAgICBzZXRTZWxlY3Rpb24oZG9jLCBub3JtYWxpemVTZWxlY3Rpb24oY20sIHN0YXJ0U2VsLnJhbmdlcy5zbGljZSgwLCBvdXJJbmRleCkuY29uY2F0KHJhbmdlcyksIG91ckluZGV4KSxcbiAgICAgICAgICAgICAgICAgICAgIHtvcmlnaW46IFwiKm1vdXNlXCIsIHNjcm9sbDogZmFsc2V9KTtcbiAgICAgICAgY20uc2Nyb2xsSW50b1ZpZXcocG9zKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBvbGRSYW5nZSA9IG91clJhbmdlO1xuICAgICAgICB2YXIgcmFuZ2UgPSByYW5nZUZvclVuaXQoY20sIHBvcywgYmVoYXZpb3IudW5pdCk7XG4gICAgICAgIHZhciBhbmNob3IgPSBvbGRSYW5nZS5hbmNob3IsIGhlYWQ7XG4gICAgICAgIGlmIChjbXAocmFuZ2UuYW5jaG9yLCBhbmNob3IpID4gMCkge1xuICAgICAgICAgIGhlYWQgPSByYW5nZS5oZWFkO1xuICAgICAgICAgIGFuY2hvciA9IG1pblBvcyhvbGRSYW5nZS5mcm9tKCksIHJhbmdlLmFuY2hvcik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaGVhZCA9IHJhbmdlLmFuY2hvcjtcbiAgICAgICAgICBhbmNob3IgPSBtYXhQb3Mob2xkUmFuZ2UudG8oKSwgcmFuZ2UuaGVhZCk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHJhbmdlcyQxID0gc3RhcnRTZWwucmFuZ2VzLnNsaWNlKDApO1xuICAgICAgICByYW5nZXMkMVtvdXJJbmRleF0gPSBiaWRpU2ltcGxpZnkoY20sIG5ldyBSYW5nZShjbGlwUG9zKGRvYywgYW5jaG9yKSwgaGVhZCkpO1xuICAgICAgICBzZXRTZWxlY3Rpb24oZG9jLCBub3JtYWxpemVTZWxlY3Rpb24oY20sIHJhbmdlcyQxLCBvdXJJbmRleCksIHNlbF9tb3VzZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIGVkaXRvclNpemUgPSBkaXNwbGF5LndyYXBwZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgLy8gVXNlZCB0byBlbnN1cmUgdGltZW91dCByZS10cmllcyBkb24ndCBmaXJlIHdoZW4gYW5vdGhlciBleHRlbmRcbiAgICAvLyBoYXBwZW5lZCBpbiB0aGUgbWVhbnRpbWUgKGNsZWFyVGltZW91dCBpc24ndCByZWxpYWJsZSAtLSBhdFxuICAgIC8vIGxlYXN0IG9uIENocm9tZSwgdGhlIHRpbWVvdXRzIHN0aWxsIGhhcHBlbiBldmVuIHdoZW4gY2xlYXJlZCxcbiAgICAvLyBpZiB0aGUgY2xlYXIgaGFwcGVucyBhZnRlciB0aGVpciBzY2hlZHVsZWQgZmlyaW5nIHRpbWUpLlxuICAgIHZhciBjb3VudGVyID0gMDtcblxuICAgIGZ1bmN0aW9uIGV4dGVuZChlKSB7XG4gICAgICB2YXIgY3VyQ291bnQgPSArK2NvdW50ZXI7XG4gICAgICB2YXIgY3VyID0gcG9zRnJvbU1vdXNlKGNtLCBlLCB0cnVlLCBiZWhhdmlvci51bml0ID09IFwicmVjdGFuZ2xlXCIpO1xuICAgICAgaWYgKCFjdXIpIHsgcmV0dXJuIH1cbiAgICAgIGlmIChjbXAoY3VyLCBsYXN0UG9zKSAhPSAwKSB7XG4gICAgICAgIGNtLmN1ck9wLmZvY3VzID0gYWN0aXZlRWx0KHJvb3QoY20pKTtcbiAgICAgICAgZXh0ZW5kVG8oY3VyKTtcbiAgICAgICAgdmFyIHZpc2libGUgPSB2aXNpYmxlTGluZXMoZGlzcGxheSwgZG9jKTtcbiAgICAgICAgaWYgKGN1ci5saW5lID49IHZpc2libGUudG8gfHwgY3VyLmxpbmUgPCB2aXNpYmxlLmZyb20pXG4gICAgICAgICAgeyBzZXRUaW1lb3V0KG9wZXJhdGlvbihjbSwgZnVuY3Rpb24gKCkge2lmIChjb3VudGVyID09IGN1ckNvdW50KSB7IGV4dGVuZChlKTsgfX0pLCAxNTApOyB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgb3V0c2lkZSA9IGUuY2xpZW50WSA8IGVkaXRvclNpemUudG9wID8gLTIwIDogZS5jbGllbnRZID4gZWRpdG9yU2l6ZS5ib3R0b20gPyAyMCA6IDA7XG4gICAgICAgIGlmIChvdXRzaWRlKSB7IHNldFRpbWVvdXQob3BlcmF0aW9uKGNtLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgaWYgKGNvdW50ZXIgIT0gY3VyQ291bnQpIHsgcmV0dXJuIH1cbiAgICAgICAgICBkaXNwbGF5LnNjcm9sbGVyLnNjcm9sbFRvcCArPSBvdXRzaWRlO1xuICAgICAgICAgIGV4dGVuZChlKTtcbiAgICAgICAgfSksIDUwKTsgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGRvbmUoZSkge1xuICAgICAgY20uc3RhdGUuc2VsZWN0aW5nVGV4dCA9IGZhbHNlO1xuICAgICAgY291bnRlciA9IEluZmluaXR5O1xuICAgICAgLy8gSWYgZSBpcyBudWxsIG9yIHVuZGVmaW5lZCB3ZSBpbnRlcnByZXQgdGhpcyBhcyBzb21lb25lIHRyeWluZ1xuICAgICAgLy8gdG8gZXhwbGljaXRseSBjYW5jZWwgdGhlIHNlbGVjdGlvbiByYXRoZXIgdGhhbiB0aGUgdXNlclxuICAgICAgLy8gbGV0dGluZyBnbyBvZiB0aGUgbW91c2UgYnV0dG9uLlxuICAgICAgaWYgKGUpIHtcbiAgICAgICAgZV9wcmV2ZW50RGVmYXVsdChlKTtcbiAgICAgICAgZGlzcGxheS5pbnB1dC5mb2N1cygpO1xuICAgICAgfVxuICAgICAgb2ZmKGRpc3BsYXkud3JhcHBlci5vd25lckRvY3VtZW50LCBcIm1vdXNlbW92ZVwiLCBtb3ZlKTtcbiAgICAgIG9mZihkaXNwbGF5LndyYXBwZXIub3duZXJEb2N1bWVudCwgXCJtb3VzZXVwXCIsIHVwKTtcbiAgICAgIGRvYy5oaXN0b3J5Lmxhc3RTZWxPcmlnaW4gPSBudWxsO1xuICAgIH1cblxuICAgIHZhciBtb3ZlID0gb3BlcmF0aW9uKGNtLCBmdW5jdGlvbiAoZSkge1xuICAgICAgaWYgKGUuYnV0dG9ucyA9PT0gMCB8fCAhZV9idXR0b24oZSkpIHsgZG9uZShlKTsgfVxuICAgICAgZWxzZSB7IGV4dGVuZChlKTsgfVxuICAgIH0pO1xuICAgIHZhciB1cCA9IG9wZXJhdGlvbihjbSwgZG9uZSk7XG4gICAgY20uc3RhdGUuc2VsZWN0aW5nVGV4dCA9IHVwO1xuICAgIG9uKGRpc3BsYXkud3JhcHBlci5vd25lckRvY3VtZW50LCBcIm1vdXNlbW92ZVwiLCBtb3ZlKTtcbiAgICBvbihkaXNwbGF5LndyYXBwZXIub3duZXJEb2N1bWVudCwgXCJtb3VzZXVwXCIsIHVwKTtcbiAgfVxuXG4gIC8vIFVzZWQgd2hlbiBtb3VzZS1zZWxlY3RpbmcgdG8gYWRqdXN0IHRoZSBhbmNob3IgdG8gdGhlIHByb3BlciBzaWRlXG4gIC8vIG9mIGEgYmlkaSBqdW1wIGRlcGVuZGluZyBvbiB0aGUgdmlzdWFsIHBvc2l0aW9uIG9mIHRoZSBoZWFkLlxuICBmdW5jdGlvbiBiaWRpU2ltcGxpZnkoY20sIHJhbmdlKSB7XG4gICAgdmFyIGFuY2hvciA9IHJhbmdlLmFuY2hvcjtcbiAgICB2YXIgaGVhZCA9IHJhbmdlLmhlYWQ7XG4gICAgdmFyIGFuY2hvckxpbmUgPSBnZXRMaW5lKGNtLmRvYywgYW5jaG9yLmxpbmUpO1xuICAgIGlmIChjbXAoYW5jaG9yLCBoZWFkKSA9PSAwICYmIGFuY2hvci5zdGlja3kgPT0gaGVhZC5zdGlja3kpIHsgcmV0dXJuIHJhbmdlIH1cbiAgICB2YXIgb3JkZXIgPSBnZXRPcmRlcihhbmNob3JMaW5lKTtcbiAgICBpZiAoIW9yZGVyKSB7IHJldHVybiByYW5nZSB9XG4gICAgdmFyIGluZGV4ID0gZ2V0QmlkaVBhcnRBdChvcmRlciwgYW5jaG9yLmNoLCBhbmNob3Iuc3RpY2t5KSwgcGFydCA9IG9yZGVyW2luZGV4XTtcbiAgICBpZiAocGFydC5mcm9tICE9IGFuY2hvci5jaCAmJiBwYXJ0LnRvICE9IGFuY2hvci5jaCkgeyByZXR1cm4gcmFuZ2UgfVxuICAgIHZhciBib3VuZGFyeSA9IGluZGV4ICsgKChwYXJ0LmZyb20gPT0gYW5jaG9yLmNoKSA9PSAocGFydC5sZXZlbCAhPSAxKSA/IDAgOiAxKTtcbiAgICBpZiAoYm91bmRhcnkgPT0gMCB8fCBib3VuZGFyeSA9PSBvcmRlci5sZW5ndGgpIHsgcmV0dXJuIHJhbmdlIH1cblxuICAgIC8vIENvbXB1dGUgdGhlIHJlbGF0aXZlIHZpc3VhbCBwb3NpdGlvbiBvZiB0aGUgaGVhZCBjb21wYXJlZCB0byB0aGVcbiAgICAvLyBhbmNob3IgKDwwIGlzIHRvIHRoZSBsZWZ0LCA+MCB0byB0aGUgcmlnaHQpXG4gICAgdmFyIGxlZnRTaWRlO1xuICAgIGlmIChoZWFkLmxpbmUgIT0gYW5jaG9yLmxpbmUpIHtcbiAgICAgIGxlZnRTaWRlID0gKGhlYWQubGluZSAtIGFuY2hvci5saW5lKSAqIChjbS5kb2MuZGlyZWN0aW9uID09IFwibHRyXCIgPyAxIDogLTEpID4gMDtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGhlYWRJbmRleCA9IGdldEJpZGlQYXJ0QXQob3JkZXIsIGhlYWQuY2gsIGhlYWQuc3RpY2t5KTtcbiAgICAgIHZhciBkaXIgPSBoZWFkSW5kZXggLSBpbmRleCB8fCAoaGVhZC5jaCAtIGFuY2hvci5jaCkgKiAocGFydC5sZXZlbCA9PSAxID8gLTEgOiAxKTtcbiAgICAgIGlmIChoZWFkSW5kZXggPT0gYm91bmRhcnkgLSAxIHx8IGhlYWRJbmRleCA9PSBib3VuZGFyeSlcbiAgICAgICAgeyBsZWZ0U2lkZSA9IGRpciA8IDA7IH1cbiAgICAgIGVsc2VcbiAgICAgICAgeyBsZWZ0U2lkZSA9IGRpciA+IDA7IH1cbiAgICB9XG5cbiAgICB2YXIgdXNlUGFydCA9IG9yZGVyW2JvdW5kYXJ5ICsgKGxlZnRTaWRlID8gLTEgOiAwKV07XG4gICAgdmFyIGZyb20gPSBsZWZ0U2lkZSA9PSAodXNlUGFydC5sZXZlbCA9PSAxKTtcbiAgICB2YXIgY2ggPSBmcm9tID8gdXNlUGFydC5mcm9tIDogdXNlUGFydC50bywgc3RpY2t5ID0gZnJvbSA/IFwiYWZ0ZXJcIiA6IFwiYmVmb3JlXCI7XG4gICAgcmV0dXJuIGFuY2hvci5jaCA9PSBjaCAmJiBhbmNob3Iuc3RpY2t5ID09IHN0aWNreSA/IHJhbmdlIDogbmV3IFJhbmdlKG5ldyBQb3MoYW5jaG9yLmxpbmUsIGNoLCBzdGlja3kpLCBoZWFkKVxuICB9XG5cblxuICAvLyBEZXRlcm1pbmVzIHdoZXRoZXIgYW4gZXZlbnQgaGFwcGVuZWQgaW4gdGhlIGd1dHRlciwgYW5kIGZpcmVzIHRoZVxuICAvLyBoYW5kbGVycyBmb3IgdGhlIGNvcnJlc3BvbmRpbmcgZXZlbnQuXG4gIGZ1bmN0aW9uIGd1dHRlckV2ZW50KGNtLCBlLCB0eXBlLCBwcmV2ZW50KSB7XG4gICAgdmFyIG1YLCBtWTtcbiAgICBpZiAoZS50b3VjaGVzKSB7XG4gICAgICBtWCA9IGUudG91Y2hlc1swXS5jbGllbnRYO1xuICAgICAgbVkgPSBlLnRvdWNoZXNbMF0uY2xpZW50WTtcbiAgICB9IGVsc2Uge1xuICAgICAgdHJ5IHsgbVggPSBlLmNsaWVudFg7IG1ZID0gZS5jbGllbnRZOyB9XG4gICAgICBjYXRjaChlJDEpIHsgcmV0dXJuIGZhbHNlIH1cbiAgICB9XG4gICAgaWYgKG1YID49IE1hdGguZmxvb3IoY20uZGlzcGxheS5ndXR0ZXJzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnJpZ2h0KSkgeyByZXR1cm4gZmFsc2UgfVxuICAgIGlmIChwcmV2ZW50KSB7IGVfcHJldmVudERlZmF1bHQoZSk7IH1cblxuICAgIHZhciBkaXNwbGF5ID0gY20uZGlzcGxheTtcbiAgICB2YXIgbGluZUJveCA9IGRpc3BsYXkubGluZURpdi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblxuICAgIGlmIChtWSA+IGxpbmVCb3guYm90dG9tIHx8ICFoYXNIYW5kbGVyKGNtLCB0eXBlKSkgeyByZXR1cm4gZV9kZWZhdWx0UHJldmVudGVkKGUpIH1cbiAgICBtWSAtPSBsaW5lQm94LnRvcCAtIGRpc3BsYXkudmlld09mZnNldDtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY20uZGlzcGxheS5ndXR0ZXJTcGVjcy5sZW5ndGg7ICsraSkge1xuICAgICAgdmFyIGcgPSBkaXNwbGF5Lmd1dHRlcnMuY2hpbGROb2Rlc1tpXTtcbiAgICAgIGlmIChnICYmIGcuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkucmlnaHQgPj0gbVgpIHtcbiAgICAgICAgdmFyIGxpbmUgPSBsaW5lQXRIZWlnaHQoY20uZG9jLCBtWSk7XG4gICAgICAgIHZhciBndXR0ZXIgPSBjbS5kaXNwbGF5Lmd1dHRlclNwZWNzW2ldO1xuICAgICAgICBzaWduYWwoY20sIHR5cGUsIGNtLCBsaW5lLCBndXR0ZXIuY2xhc3NOYW1lLCBlKTtcbiAgICAgICAgcmV0dXJuIGVfZGVmYXVsdFByZXZlbnRlZChlKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGNsaWNrSW5HdXR0ZXIoY20sIGUpIHtcbiAgICByZXR1cm4gZ3V0dGVyRXZlbnQoY20sIGUsIFwiZ3V0dGVyQ2xpY2tcIiwgdHJ1ZSlcbiAgfVxuXG4gIC8vIENPTlRFWFQgTUVOVSBIQU5ETElOR1xuXG4gIC8vIFRvIG1ha2UgdGhlIGNvbnRleHQgbWVudSB3b3JrLCB3ZSBuZWVkIHRvIGJyaWVmbHkgdW5oaWRlIHRoZVxuICAvLyB0ZXh0YXJlYSAobWFraW5nIGl0IGFzIHVub2J0cnVzaXZlIGFzIHBvc3NpYmxlKSB0byBsZXQgdGhlXG4gIC8vIHJpZ2h0LWNsaWNrIHRha2UgZWZmZWN0IG9uIGl0LlxuICBmdW5jdGlvbiBvbkNvbnRleHRNZW51KGNtLCBlKSB7XG4gICAgaWYgKGV2ZW50SW5XaWRnZXQoY20uZGlzcGxheSwgZSkgfHwgY29udGV4dE1lbnVJbkd1dHRlcihjbSwgZSkpIHsgcmV0dXJuIH1cbiAgICBpZiAoc2lnbmFsRE9NRXZlbnQoY20sIGUsIFwiY29udGV4dG1lbnVcIikpIHsgcmV0dXJuIH1cbiAgICBpZiAoIWNhcHR1cmVSaWdodENsaWNrKSB7IGNtLmRpc3BsYXkuaW5wdXQub25Db250ZXh0TWVudShlKTsgfVxuICB9XG5cbiAgZnVuY3Rpb24gY29udGV4dE1lbnVJbkd1dHRlcihjbSwgZSkge1xuICAgIGlmICghaGFzSGFuZGxlcihjbSwgXCJndXR0ZXJDb250ZXh0TWVudVwiKSkgeyByZXR1cm4gZmFsc2UgfVxuICAgIHJldHVybiBndXR0ZXJFdmVudChjbSwgZSwgXCJndXR0ZXJDb250ZXh0TWVudVwiLCBmYWxzZSlcbiAgfVxuXG4gIGZ1bmN0aW9uIHRoZW1lQ2hhbmdlZChjbSkge1xuICAgIGNtLmRpc3BsYXkud3JhcHBlci5jbGFzc05hbWUgPSBjbS5kaXNwbGF5LndyYXBwZXIuY2xhc3NOYW1lLnJlcGxhY2UoL1xccypjbS1zLVxcUysvZywgXCJcIikgK1xuICAgICAgY20ub3B0aW9ucy50aGVtZS5yZXBsYWNlKC8oXnxcXHMpXFxzKi9nLCBcIiBjbS1zLVwiKTtcbiAgICBjbGVhckNhY2hlcyhjbSk7XG4gIH1cblxuICB2YXIgSW5pdCA9IHt0b1N0cmluZzogZnVuY3Rpb24oKXtyZXR1cm4gXCJDb2RlTWlycm9yLkluaXRcIn19O1xuXG4gIHZhciBkZWZhdWx0cyA9IHt9O1xuICB2YXIgb3B0aW9uSGFuZGxlcnMgPSB7fTtcblxuICBmdW5jdGlvbiBkZWZpbmVPcHRpb25zKENvZGVNaXJyb3IpIHtcbiAgICB2YXIgb3B0aW9uSGFuZGxlcnMgPSBDb2RlTWlycm9yLm9wdGlvbkhhbmRsZXJzO1xuXG4gICAgZnVuY3Rpb24gb3B0aW9uKG5hbWUsIGRlZmx0LCBoYW5kbGUsIG5vdE9uSW5pdCkge1xuICAgICAgQ29kZU1pcnJvci5kZWZhdWx0c1tuYW1lXSA9IGRlZmx0O1xuICAgICAgaWYgKGhhbmRsZSkgeyBvcHRpb25IYW5kbGVyc1tuYW1lXSA9XG4gICAgICAgIG5vdE9uSW5pdCA/IGZ1bmN0aW9uIChjbSwgdmFsLCBvbGQpIHtpZiAob2xkICE9IEluaXQpIHsgaGFuZGxlKGNtLCB2YWwsIG9sZCk7IH19IDogaGFuZGxlOyB9XG4gICAgfVxuXG4gICAgQ29kZU1pcnJvci5kZWZpbmVPcHRpb24gPSBvcHRpb247XG5cbiAgICAvLyBQYXNzZWQgdG8gb3B0aW9uIGhhbmRsZXJzIHdoZW4gdGhlcmUgaXMgbm8gb2xkIHZhbHVlLlxuICAgIENvZGVNaXJyb3IuSW5pdCA9IEluaXQ7XG5cbiAgICAvLyBUaGVzZSB0d28gYXJlLCBvbiBpbml0LCBjYWxsZWQgZnJvbSB0aGUgY29uc3RydWN0b3IgYmVjYXVzZSB0aGV5XG4gICAgLy8gaGF2ZSB0byBiZSBpbml0aWFsaXplZCBiZWZvcmUgdGhlIGVkaXRvciBjYW4gc3RhcnQgYXQgYWxsLlxuICAgIG9wdGlvbihcInZhbHVlXCIsIFwiXCIsIGZ1bmN0aW9uIChjbSwgdmFsKSB7IHJldHVybiBjbS5zZXRWYWx1ZSh2YWwpOyB9LCB0cnVlKTtcbiAgICBvcHRpb24oXCJtb2RlXCIsIG51bGwsIGZ1bmN0aW9uIChjbSwgdmFsKSB7XG4gICAgICBjbS5kb2MubW9kZU9wdGlvbiA9IHZhbDtcbiAgICAgIGxvYWRNb2RlKGNtKTtcbiAgICB9LCB0cnVlKTtcblxuICAgIG9wdGlvbihcImluZGVudFVuaXRcIiwgMiwgbG9hZE1vZGUsIHRydWUpO1xuICAgIG9wdGlvbihcImluZGVudFdpdGhUYWJzXCIsIGZhbHNlKTtcbiAgICBvcHRpb24oXCJzbWFydEluZGVudFwiLCB0cnVlKTtcbiAgICBvcHRpb24oXCJ0YWJTaXplXCIsIDQsIGZ1bmN0aW9uIChjbSkge1xuICAgICAgcmVzZXRNb2RlU3RhdGUoY20pO1xuICAgICAgY2xlYXJDYWNoZXMoY20pO1xuICAgICAgcmVnQ2hhbmdlKGNtKTtcbiAgICB9LCB0cnVlKTtcblxuICAgIG9wdGlvbihcImxpbmVTZXBhcmF0b3JcIiwgbnVsbCwgZnVuY3Rpb24gKGNtLCB2YWwpIHtcbiAgICAgIGNtLmRvYy5saW5lU2VwID0gdmFsO1xuICAgICAgaWYgKCF2YWwpIHsgcmV0dXJuIH1cbiAgICAgIHZhciBuZXdCcmVha3MgPSBbXSwgbGluZU5vID0gY20uZG9jLmZpcnN0O1xuICAgICAgY20uZG9jLml0ZXIoZnVuY3Rpb24gKGxpbmUpIHtcbiAgICAgICAgZm9yICh2YXIgcG9zID0gMDs7KSB7XG4gICAgICAgICAgdmFyIGZvdW5kID0gbGluZS50ZXh0LmluZGV4T2YodmFsLCBwb3MpO1xuICAgICAgICAgIGlmIChmb3VuZCA9PSAtMSkgeyBicmVhayB9XG4gICAgICAgICAgcG9zID0gZm91bmQgKyB2YWwubGVuZ3RoO1xuICAgICAgICAgIG5ld0JyZWFrcy5wdXNoKFBvcyhsaW5lTm8sIGZvdW5kKSk7XG4gICAgICAgIH1cbiAgICAgICAgbGluZU5vKys7XG4gICAgICB9KTtcbiAgICAgIGZvciAodmFyIGkgPSBuZXdCcmVha3MubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pXG4gICAgICAgIHsgcmVwbGFjZVJhbmdlKGNtLmRvYywgdmFsLCBuZXdCcmVha3NbaV0sIFBvcyhuZXdCcmVha3NbaV0ubGluZSwgbmV3QnJlYWtzW2ldLmNoICsgdmFsLmxlbmd0aCkpOyB9XG4gICAgfSk7XG4gICAgb3B0aW9uKFwic3BlY2lhbENoYXJzXCIsIC9bXFx1MDAwMC1cXHUwMDFmXFx1MDA3Zi1cXHUwMDlmXFx1MDBhZFxcdTA2MWNcXHUyMDBiXFx1MjAwZVxcdTIwMGZcXHUyMDI4XFx1MjAyOVxcdTIwMmRcXHUyMDJlXFx1MjA2NlxcdTIwNjdcXHUyMDY5XFx1ZmVmZlxcdWZmZjktXFx1ZmZmY10vZywgZnVuY3Rpb24gKGNtLCB2YWwsIG9sZCkge1xuICAgICAgY20uc3RhdGUuc3BlY2lhbENoYXJzID0gbmV3IFJlZ0V4cCh2YWwuc291cmNlICsgKHZhbC50ZXN0KFwiXFx0XCIpID8gXCJcIiA6IFwifFxcdFwiKSwgXCJnXCIpO1xuICAgICAgaWYgKG9sZCAhPSBJbml0KSB7IGNtLnJlZnJlc2goKTsgfVxuICAgIH0pO1xuICAgIG9wdGlvbihcInNwZWNpYWxDaGFyUGxhY2Vob2xkZXJcIiwgZGVmYXVsdFNwZWNpYWxDaGFyUGxhY2Vob2xkZXIsIGZ1bmN0aW9uIChjbSkgeyByZXR1cm4gY20ucmVmcmVzaCgpOyB9LCB0cnVlKTtcbiAgICBvcHRpb24oXCJlbGVjdHJpY0NoYXJzXCIsIHRydWUpO1xuICAgIG9wdGlvbihcImlucHV0U3R5bGVcIiwgbW9iaWxlID8gXCJjb250ZW50ZWRpdGFibGVcIiA6IFwidGV4dGFyZWFcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiaW5wdXRTdHlsZSBjYW4gbm90ICh5ZXQpIGJlIGNoYW5nZWQgaW4gYSBydW5uaW5nIGVkaXRvclwiKSAvLyBGSVhNRVxuICAgIH0sIHRydWUpO1xuICAgIG9wdGlvbihcInNwZWxsY2hlY2tcIiwgZmFsc2UsIGZ1bmN0aW9uIChjbSwgdmFsKSB7IHJldHVybiBjbS5nZXRJbnB1dEZpZWxkKCkuc3BlbGxjaGVjayA9IHZhbDsgfSwgdHJ1ZSk7XG4gICAgb3B0aW9uKFwiYXV0b2NvcnJlY3RcIiwgZmFsc2UsIGZ1bmN0aW9uIChjbSwgdmFsKSB7IHJldHVybiBjbS5nZXRJbnB1dEZpZWxkKCkuYXV0b2NvcnJlY3QgPSB2YWw7IH0sIHRydWUpO1xuICAgIG9wdGlvbihcImF1dG9jYXBpdGFsaXplXCIsIGZhbHNlLCBmdW5jdGlvbiAoY20sIHZhbCkgeyByZXR1cm4gY20uZ2V0SW5wdXRGaWVsZCgpLmF1dG9jYXBpdGFsaXplID0gdmFsOyB9LCB0cnVlKTtcbiAgICBvcHRpb24oXCJydGxNb3ZlVmlzdWFsbHlcIiwgIXdpbmRvd3MpO1xuICAgIG9wdGlvbihcIndob2xlTGluZVVwZGF0ZUJlZm9yZVwiLCB0cnVlKTtcblxuICAgIG9wdGlvbihcInRoZW1lXCIsIFwiZGVmYXVsdFwiLCBmdW5jdGlvbiAoY20pIHtcbiAgICAgIHRoZW1lQ2hhbmdlZChjbSk7XG4gICAgICB1cGRhdGVHdXR0ZXJzKGNtKTtcbiAgICB9LCB0cnVlKTtcbiAgICBvcHRpb24oXCJrZXlNYXBcIiwgXCJkZWZhdWx0XCIsIGZ1bmN0aW9uIChjbSwgdmFsLCBvbGQpIHtcbiAgICAgIHZhciBuZXh0ID0gZ2V0S2V5TWFwKHZhbCk7XG4gICAgICB2YXIgcHJldiA9IG9sZCAhPSBJbml0ICYmIGdldEtleU1hcChvbGQpO1xuICAgICAgaWYgKHByZXYgJiYgcHJldi5kZXRhY2gpIHsgcHJldi5kZXRhY2goY20sIG5leHQpOyB9XG4gICAgICBpZiAobmV4dC5hdHRhY2gpIHsgbmV4dC5hdHRhY2goY20sIHByZXYgfHwgbnVsbCk7IH1cbiAgICB9KTtcbiAgICBvcHRpb24oXCJleHRyYUtleXNcIiwgbnVsbCk7XG4gICAgb3B0aW9uKFwiY29uZmlndXJlTW91c2VcIiwgbnVsbCk7XG5cbiAgICBvcHRpb24oXCJsaW5lV3JhcHBpbmdcIiwgZmFsc2UsIHdyYXBwaW5nQ2hhbmdlZCwgdHJ1ZSk7XG4gICAgb3B0aW9uKFwiZ3V0dGVyc1wiLCBbXSwgZnVuY3Rpb24gKGNtLCB2YWwpIHtcbiAgICAgIGNtLmRpc3BsYXkuZ3V0dGVyU3BlY3MgPSBnZXRHdXR0ZXJzKHZhbCwgY20ub3B0aW9ucy5saW5lTnVtYmVycyk7XG4gICAgICB1cGRhdGVHdXR0ZXJzKGNtKTtcbiAgICB9LCB0cnVlKTtcbiAgICBvcHRpb24oXCJmaXhlZEd1dHRlclwiLCB0cnVlLCBmdW5jdGlvbiAoY20sIHZhbCkge1xuICAgICAgY20uZGlzcGxheS5ndXR0ZXJzLnN0eWxlLmxlZnQgPSB2YWwgPyBjb21wZW5zYXRlRm9ySFNjcm9sbChjbS5kaXNwbGF5KSArIFwicHhcIiA6IFwiMFwiO1xuICAgICAgY20ucmVmcmVzaCgpO1xuICAgIH0sIHRydWUpO1xuICAgIG9wdGlvbihcImNvdmVyR3V0dGVyTmV4dFRvU2Nyb2xsYmFyXCIsIGZhbHNlLCBmdW5jdGlvbiAoY20pIHsgcmV0dXJuIHVwZGF0ZVNjcm9sbGJhcnMoY20pOyB9LCB0cnVlKTtcbiAgICBvcHRpb24oXCJzY3JvbGxiYXJTdHlsZVwiLCBcIm5hdGl2ZVwiLCBmdW5jdGlvbiAoY20pIHtcbiAgICAgIGluaXRTY3JvbGxiYXJzKGNtKTtcbiAgICAgIHVwZGF0ZVNjcm9sbGJhcnMoY20pO1xuICAgICAgY20uZGlzcGxheS5zY3JvbGxiYXJzLnNldFNjcm9sbFRvcChjbS5kb2Muc2Nyb2xsVG9wKTtcbiAgICAgIGNtLmRpc3BsYXkuc2Nyb2xsYmFycy5zZXRTY3JvbGxMZWZ0KGNtLmRvYy5zY3JvbGxMZWZ0KTtcbiAgICB9LCB0cnVlKTtcbiAgICBvcHRpb24oXCJsaW5lTnVtYmVyc1wiLCBmYWxzZSwgZnVuY3Rpb24gKGNtLCB2YWwpIHtcbiAgICAgIGNtLmRpc3BsYXkuZ3V0dGVyU3BlY3MgPSBnZXRHdXR0ZXJzKGNtLm9wdGlvbnMuZ3V0dGVycywgdmFsKTtcbiAgICAgIHVwZGF0ZUd1dHRlcnMoY20pO1xuICAgIH0sIHRydWUpO1xuICAgIG9wdGlvbihcImZpcnN0TGluZU51bWJlclwiLCAxLCB1cGRhdGVHdXR0ZXJzLCB0cnVlKTtcbiAgICBvcHRpb24oXCJsaW5lTnVtYmVyRm9ybWF0dGVyXCIsIGZ1bmN0aW9uIChpbnRlZ2VyKSB7IHJldHVybiBpbnRlZ2VyOyB9LCB1cGRhdGVHdXR0ZXJzLCB0cnVlKTtcbiAgICBvcHRpb24oXCJzaG93Q3Vyc29yV2hlblNlbGVjdGluZ1wiLCBmYWxzZSwgdXBkYXRlU2VsZWN0aW9uLCB0cnVlKTtcblxuICAgIG9wdGlvbihcInJlc2V0U2VsZWN0aW9uT25Db250ZXh0TWVudVwiLCB0cnVlKTtcbiAgICBvcHRpb24oXCJsaW5lV2lzZUNvcHlDdXRcIiwgdHJ1ZSk7XG4gICAgb3B0aW9uKFwicGFzdGVMaW5lc1BlclNlbGVjdGlvblwiLCB0cnVlKTtcbiAgICBvcHRpb24oXCJzZWxlY3Rpb25zTWF5VG91Y2hcIiwgZmFsc2UpO1xuXG4gICAgb3B0aW9uKFwicmVhZE9ubHlcIiwgZmFsc2UsIGZ1bmN0aW9uIChjbSwgdmFsKSB7XG4gICAgICBpZiAodmFsID09IFwibm9jdXJzb3JcIikge1xuICAgICAgICBvbkJsdXIoY20pO1xuICAgICAgICBjbS5kaXNwbGF5LmlucHV0LmJsdXIoKTtcbiAgICAgIH1cbiAgICAgIGNtLmRpc3BsYXkuaW5wdXQucmVhZE9ubHlDaGFuZ2VkKHZhbCk7XG4gICAgfSk7XG5cbiAgICBvcHRpb24oXCJzY3JlZW5SZWFkZXJMYWJlbFwiLCBudWxsLCBmdW5jdGlvbiAoY20sIHZhbCkge1xuICAgICAgdmFsID0gKHZhbCA9PT0gJycpID8gbnVsbCA6IHZhbDtcbiAgICAgIGNtLmRpc3BsYXkuaW5wdXQuc2NyZWVuUmVhZGVyTGFiZWxDaGFuZ2VkKHZhbCk7XG4gICAgfSk7XG5cbiAgICBvcHRpb24oXCJkaXNhYmxlSW5wdXRcIiwgZmFsc2UsIGZ1bmN0aW9uIChjbSwgdmFsKSB7aWYgKCF2YWwpIHsgY20uZGlzcGxheS5pbnB1dC5yZXNldCgpOyB9fSwgdHJ1ZSk7XG4gICAgb3B0aW9uKFwiZHJhZ0Ryb3BcIiwgdHJ1ZSwgZHJhZ0Ryb3BDaGFuZ2VkKTtcbiAgICBvcHRpb24oXCJhbGxvd0Ryb3BGaWxlVHlwZXNcIiwgbnVsbCk7XG5cbiAgICBvcHRpb24oXCJjdXJzb3JCbGlua1JhdGVcIiwgNTMwKTtcbiAgICBvcHRpb24oXCJjdXJzb3JTY3JvbGxNYXJnaW5cIiwgMCk7XG4gICAgb3B0aW9uKFwiY3Vyc29ySGVpZ2h0XCIsIDEsIHVwZGF0ZVNlbGVjdGlvbiwgdHJ1ZSk7XG4gICAgb3B0aW9uKFwic2luZ2xlQ3Vyc29ySGVpZ2h0UGVyTGluZVwiLCB0cnVlLCB1cGRhdGVTZWxlY3Rpb24sIHRydWUpO1xuICAgIG9wdGlvbihcIndvcmtUaW1lXCIsIDEwMCk7XG4gICAgb3B0aW9uKFwid29ya0RlbGF5XCIsIDEwMCk7XG4gICAgb3B0aW9uKFwiZmxhdHRlblNwYW5zXCIsIHRydWUsIHJlc2V0TW9kZVN0YXRlLCB0cnVlKTtcbiAgICBvcHRpb24oXCJhZGRNb2RlQ2xhc3NcIiwgZmFsc2UsIHJlc2V0TW9kZVN0YXRlLCB0cnVlKTtcbiAgICBvcHRpb24oXCJwb2xsSW50ZXJ2YWxcIiwgMTAwKTtcbiAgICBvcHRpb24oXCJ1bmRvRGVwdGhcIiwgMjAwLCBmdW5jdGlvbiAoY20sIHZhbCkgeyByZXR1cm4gY20uZG9jLmhpc3RvcnkudW5kb0RlcHRoID0gdmFsOyB9KTtcbiAgICBvcHRpb24oXCJoaXN0b3J5RXZlbnREZWxheVwiLCAxMjUwKTtcbiAgICBvcHRpb24oXCJ2aWV3cG9ydE1hcmdpblwiLCAxMCwgZnVuY3Rpb24gKGNtKSB7IHJldHVybiBjbS5yZWZyZXNoKCk7IH0sIHRydWUpO1xuICAgIG9wdGlvbihcIm1heEhpZ2hsaWdodExlbmd0aFwiLCAxMDAwMCwgcmVzZXRNb2RlU3RhdGUsIHRydWUpO1xuICAgIG9wdGlvbihcIm1vdmVJbnB1dFdpdGhDdXJzb3JcIiwgdHJ1ZSwgZnVuY3Rpb24gKGNtLCB2YWwpIHtcbiAgICAgIGlmICghdmFsKSB7IGNtLmRpc3BsYXkuaW5wdXQucmVzZXRQb3NpdGlvbigpOyB9XG4gICAgfSk7XG5cbiAgICBvcHRpb24oXCJ0YWJpbmRleFwiLCBudWxsLCBmdW5jdGlvbiAoY20sIHZhbCkgeyByZXR1cm4gY20uZGlzcGxheS5pbnB1dC5nZXRGaWVsZCgpLnRhYkluZGV4ID0gdmFsIHx8IFwiXCI7IH0pO1xuICAgIG9wdGlvbihcImF1dG9mb2N1c1wiLCBudWxsKTtcbiAgICBvcHRpb24oXCJkaXJlY3Rpb25cIiwgXCJsdHJcIiwgZnVuY3Rpb24gKGNtLCB2YWwpIHsgcmV0dXJuIGNtLmRvYy5zZXREaXJlY3Rpb24odmFsKTsgfSwgdHJ1ZSk7XG4gICAgb3B0aW9uKFwicGhyYXNlc1wiLCBudWxsKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGRyYWdEcm9wQ2hhbmdlZChjbSwgdmFsdWUsIG9sZCkge1xuICAgIHZhciB3YXNPbiA9IG9sZCAmJiBvbGQgIT0gSW5pdDtcbiAgICBpZiAoIXZhbHVlICE9ICF3YXNPbikge1xuICAgICAgdmFyIGZ1bmNzID0gY20uZGlzcGxheS5kcmFnRnVuY3Rpb25zO1xuICAgICAgdmFyIHRvZ2dsZSA9IHZhbHVlID8gb24gOiBvZmY7XG4gICAgICB0b2dnbGUoY20uZGlzcGxheS5zY3JvbGxlciwgXCJkcmFnc3RhcnRcIiwgZnVuY3Muc3RhcnQpO1xuICAgICAgdG9nZ2xlKGNtLmRpc3BsYXkuc2Nyb2xsZXIsIFwiZHJhZ2VudGVyXCIsIGZ1bmNzLmVudGVyKTtcbiAgICAgIHRvZ2dsZShjbS5kaXNwbGF5LnNjcm9sbGVyLCBcImRyYWdvdmVyXCIsIGZ1bmNzLm92ZXIpO1xuICAgICAgdG9nZ2xlKGNtLmRpc3BsYXkuc2Nyb2xsZXIsIFwiZHJhZ2xlYXZlXCIsIGZ1bmNzLmxlYXZlKTtcbiAgICAgIHRvZ2dsZShjbS5kaXNwbGF5LnNjcm9sbGVyLCBcImRyb3BcIiwgZnVuY3MuZHJvcCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gd3JhcHBpbmdDaGFuZ2VkKGNtKSB7XG4gICAgaWYgKGNtLm9wdGlvbnMubGluZVdyYXBwaW5nKSB7XG4gICAgICBhZGRDbGFzcyhjbS5kaXNwbGF5LndyYXBwZXIsIFwiQ29kZU1pcnJvci13cmFwXCIpO1xuICAgICAgY20uZGlzcGxheS5zaXplci5zdHlsZS5taW5XaWR0aCA9IFwiXCI7XG4gICAgICBjbS5kaXNwbGF5LnNpemVyV2lkdGggPSBudWxsO1xuICAgIH0gZWxzZSB7XG4gICAgICBybUNsYXNzKGNtLmRpc3BsYXkud3JhcHBlciwgXCJDb2RlTWlycm9yLXdyYXBcIik7XG4gICAgICBmaW5kTWF4TGluZShjbSk7XG4gICAgfVxuICAgIGVzdGltYXRlTGluZUhlaWdodHMoY20pO1xuICAgIHJlZ0NoYW5nZShjbSk7XG4gICAgY2xlYXJDYWNoZXMoY20pO1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgeyByZXR1cm4gdXBkYXRlU2Nyb2xsYmFycyhjbSk7IH0sIDEwMCk7XG4gIH1cblxuICAvLyBBIENvZGVNaXJyb3IgaW5zdGFuY2UgcmVwcmVzZW50cyBhbiBlZGl0b3IuIFRoaXMgaXMgdGhlIG9iamVjdFxuICAvLyB0aGF0IHVzZXIgY29kZSBpcyB1c3VhbGx5IGRlYWxpbmcgd2l0aC5cblxuICBmdW5jdGlvbiBDb2RlTWlycm9yKHBsYWNlLCBvcHRpb25zKSB7XG4gICAgdmFyIHRoaXMkMSA9IHRoaXM7XG5cbiAgICBpZiAoISh0aGlzIGluc3RhbmNlb2YgQ29kZU1pcnJvcikpIHsgcmV0dXJuIG5ldyBDb2RlTWlycm9yKHBsYWNlLCBvcHRpb25zKSB9XG5cbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zID0gb3B0aW9ucyA/IGNvcHlPYmoob3B0aW9ucykgOiB7fTtcbiAgICAvLyBEZXRlcm1pbmUgZWZmZWN0aXZlIG9wdGlvbnMgYmFzZWQgb24gZ2l2ZW4gdmFsdWVzIGFuZCBkZWZhdWx0cy5cbiAgICBjb3B5T2JqKGRlZmF1bHRzLCBvcHRpb25zLCBmYWxzZSk7XG5cbiAgICB2YXIgZG9jID0gb3B0aW9ucy52YWx1ZTtcbiAgICBpZiAodHlwZW9mIGRvYyA9PSBcInN0cmluZ1wiKSB7IGRvYyA9IG5ldyBEb2MoZG9jLCBvcHRpb25zLm1vZGUsIG51bGwsIG9wdGlvbnMubGluZVNlcGFyYXRvciwgb3B0aW9ucy5kaXJlY3Rpb24pOyB9XG4gICAgZWxzZSBpZiAob3B0aW9ucy5tb2RlKSB7IGRvYy5tb2RlT3B0aW9uID0gb3B0aW9ucy5tb2RlOyB9XG4gICAgdGhpcy5kb2MgPSBkb2M7XG5cbiAgICB2YXIgaW5wdXQgPSBuZXcgQ29kZU1pcnJvci5pbnB1dFN0eWxlc1tvcHRpb25zLmlucHV0U3R5bGVdKHRoaXMpO1xuICAgIHZhciBkaXNwbGF5ID0gdGhpcy5kaXNwbGF5ID0gbmV3IERpc3BsYXkocGxhY2UsIGRvYywgaW5wdXQsIG9wdGlvbnMpO1xuICAgIGRpc3BsYXkud3JhcHBlci5Db2RlTWlycm9yID0gdGhpcztcbiAgICB0aGVtZUNoYW5nZWQodGhpcyk7XG4gICAgaWYgKG9wdGlvbnMubGluZVdyYXBwaW5nKVxuICAgICAgeyB0aGlzLmRpc3BsYXkud3JhcHBlci5jbGFzc05hbWUgKz0gXCIgQ29kZU1pcnJvci13cmFwXCI7IH1cbiAgICBpbml0U2Nyb2xsYmFycyh0aGlzKTtcblxuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICBrZXlNYXBzOiBbXSwgIC8vIHN0b3JlcyBtYXBzIGFkZGVkIGJ5IGFkZEtleU1hcFxuICAgICAgb3ZlcmxheXM6IFtdLCAvLyBoaWdobGlnaHRpbmcgb3ZlcmxheXMsIGFzIGFkZGVkIGJ5IGFkZE92ZXJsYXlcbiAgICAgIG1vZGVHZW46IDAsICAgLy8gYnVtcGVkIHdoZW4gbW9kZS9vdmVybGF5IGNoYW5nZXMsIHVzZWQgdG8gaW52YWxpZGF0ZSBoaWdobGlnaHRpbmcgaW5mb1xuICAgICAgb3ZlcndyaXRlOiBmYWxzZSxcbiAgICAgIGRlbGF5aW5nQmx1ckV2ZW50OiBmYWxzZSxcbiAgICAgIGZvY3VzZWQ6IGZhbHNlLFxuICAgICAgc3VwcHJlc3NFZGl0czogZmFsc2UsIC8vIHVzZWQgdG8gZGlzYWJsZSBlZGl0aW5nIGR1cmluZyBrZXkgaGFuZGxlcnMgd2hlbiBpbiByZWFkT25seSBtb2RlXG4gICAgICBwYXN0ZUluY29taW5nOiAtMSwgY3V0SW5jb21pbmc6IC0xLCAvLyBoZWxwIHJlY29nbml6ZSBwYXN0ZS9jdXQgZWRpdHMgaW4gaW5wdXQucG9sbFxuICAgICAgc2VsZWN0aW5nVGV4dDogZmFsc2UsXG4gICAgICBkcmFnZ2luZ1RleHQ6IGZhbHNlLFxuICAgICAgaGlnaGxpZ2h0OiBuZXcgRGVsYXllZCgpLCAvLyBzdG9yZXMgaGlnaGxpZ2h0IHdvcmtlciB0aW1lb3V0XG4gICAgICBrZXlTZXE6IG51bGwsICAvLyBVbmZpbmlzaGVkIGtleSBzZXF1ZW5jZVxuICAgICAgc3BlY2lhbENoYXJzOiBudWxsXG4gICAgfTtcblxuICAgIGlmIChvcHRpb25zLmF1dG9mb2N1cyAmJiAhbW9iaWxlKSB7IGRpc3BsYXkuaW5wdXQuZm9jdXMoKTsgfVxuXG4gICAgLy8gT3ZlcnJpZGUgbWFnaWMgdGV4dGFyZWEgY29udGVudCByZXN0b3JlIHRoYXQgSUUgc29tZXRpbWVzIGRvZXNcbiAgICAvLyBvbiBvdXIgaGlkZGVuIHRleHRhcmVhIG9uIHJlbG9hZFxuICAgIGlmIChpZSAmJiBpZV92ZXJzaW9uIDwgMTEpIHsgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzJDEuZGlzcGxheS5pbnB1dC5yZXNldCh0cnVlKTsgfSwgMjApOyB9XG5cbiAgICByZWdpc3RlckV2ZW50SGFuZGxlcnModGhpcyk7XG4gICAgZW5zdXJlR2xvYmFsSGFuZGxlcnMoKTtcblxuICAgIHN0YXJ0T3BlcmF0aW9uKHRoaXMpO1xuICAgIHRoaXMuY3VyT3AuZm9yY2VVcGRhdGUgPSB0cnVlO1xuICAgIGF0dGFjaERvYyh0aGlzLCBkb2MpO1xuXG4gICAgaWYgKChvcHRpb25zLmF1dG9mb2N1cyAmJiAhbW9iaWxlKSB8fCB0aGlzLmhhc0ZvY3VzKCkpXG4gICAgICB7IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcyQxLmhhc0ZvY3VzKCkgJiYgIXRoaXMkMS5zdGF0ZS5mb2N1c2VkKSB7IG9uRm9jdXModGhpcyQxKTsgfVxuICAgICAgfSwgMjApOyB9XG4gICAgZWxzZVxuICAgICAgeyBvbkJsdXIodGhpcyk7IH1cblxuICAgIGZvciAodmFyIG9wdCBpbiBvcHRpb25IYW5kbGVycykgeyBpZiAob3B0aW9uSGFuZGxlcnMuaGFzT3duUHJvcGVydHkob3B0KSlcbiAgICAgIHsgb3B0aW9uSGFuZGxlcnNbb3B0XSh0aGlzLCBvcHRpb25zW29wdF0sIEluaXQpOyB9IH1cbiAgICBtYXliZVVwZGF0ZUxpbmVOdW1iZXJXaWR0aCh0aGlzKTtcbiAgICBpZiAob3B0aW9ucy5maW5pc2hJbml0KSB7IG9wdGlvbnMuZmluaXNoSW5pdCh0aGlzKTsgfVxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaW5pdEhvb2tzLmxlbmd0aDsgKytpKSB7IGluaXRIb29rc1tpXSh0aGlzKTsgfVxuICAgIGVuZE9wZXJhdGlvbih0aGlzKTtcbiAgICAvLyBTdXBwcmVzcyBvcHRpbWl6ZWxlZ2liaWxpdHkgaW4gV2Via2l0LCBzaW5jZSBpdCBicmVha3MgdGV4dFxuICAgIC8vIG1lYXN1cmluZyBvbiBsaW5lIHdyYXBwaW5nIGJvdW5kYXJpZXMuXG4gICAgaWYgKHdlYmtpdCAmJiBvcHRpb25zLmxpbmVXcmFwcGluZyAmJlxuICAgICAgICBnZXRDb21wdXRlZFN0eWxlKGRpc3BsYXkubGluZURpdikudGV4dFJlbmRlcmluZyA9PSBcIm9wdGltaXplbGVnaWJpbGl0eVwiKVxuICAgICAgeyBkaXNwbGF5LmxpbmVEaXYuc3R5bGUudGV4dFJlbmRlcmluZyA9IFwiYXV0b1wiOyB9XG4gIH1cblxuICAvLyBUaGUgZGVmYXVsdCBjb25maWd1cmF0aW9uIG9wdGlvbnMuXG4gIENvZGVNaXJyb3IuZGVmYXVsdHMgPSBkZWZhdWx0cztcbiAgLy8gRnVuY3Rpb25zIHRvIHJ1biB3aGVuIG9wdGlvbnMgYXJlIGNoYW5nZWQuXG4gIENvZGVNaXJyb3Iub3B0aW9uSGFuZGxlcnMgPSBvcHRpb25IYW5kbGVycztcblxuICAvLyBBdHRhY2ggdGhlIG5lY2Vzc2FyeSBldmVudCBoYW5kbGVycyB3aGVuIGluaXRpYWxpemluZyB0aGUgZWRpdG9yXG4gIGZ1bmN0aW9uIHJlZ2lzdGVyRXZlbnRIYW5kbGVycyhjbSkge1xuICAgIHZhciBkID0gY20uZGlzcGxheTtcbiAgICBvbihkLnNjcm9sbGVyLCBcIm1vdXNlZG93blwiLCBvcGVyYXRpb24oY20sIG9uTW91c2VEb3duKSk7XG4gICAgLy8gT2xkZXIgSUUncyB3aWxsIG5vdCBmaXJlIGEgc2Vjb25kIG1vdXNlZG93biBmb3IgYSBkb3VibGUgY2xpY2tcbiAgICBpZiAoaWUgJiYgaWVfdmVyc2lvbiA8IDExKVxuICAgICAgeyBvbihkLnNjcm9sbGVyLCBcImRibGNsaWNrXCIsIG9wZXJhdGlvbihjbSwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgaWYgKHNpZ25hbERPTUV2ZW50KGNtLCBlKSkgeyByZXR1cm4gfVxuICAgICAgICB2YXIgcG9zID0gcG9zRnJvbU1vdXNlKGNtLCBlKTtcbiAgICAgICAgaWYgKCFwb3MgfHwgY2xpY2tJbkd1dHRlcihjbSwgZSkgfHwgZXZlbnRJbldpZGdldChjbS5kaXNwbGF5LCBlKSkgeyByZXR1cm4gfVxuICAgICAgICBlX3ByZXZlbnREZWZhdWx0KGUpO1xuICAgICAgICB2YXIgd29yZCA9IGNtLmZpbmRXb3JkQXQocG9zKTtcbiAgICAgICAgZXh0ZW5kU2VsZWN0aW9uKGNtLmRvYywgd29yZC5hbmNob3IsIHdvcmQuaGVhZCk7XG4gICAgICB9KSk7IH1cbiAgICBlbHNlXG4gICAgICB7IG9uKGQuc2Nyb2xsZXIsIFwiZGJsY2xpY2tcIiwgZnVuY3Rpb24gKGUpIHsgcmV0dXJuIHNpZ25hbERPTUV2ZW50KGNtLCBlKSB8fCBlX3ByZXZlbnREZWZhdWx0KGUpOyB9KTsgfVxuICAgIC8vIFNvbWUgYnJvd3NlcnMgZmlyZSBjb250ZXh0bWVudSAqYWZ0ZXIqIG9wZW5pbmcgdGhlIG1lbnUsIGF0XG4gICAgLy8gd2hpY2ggcG9pbnQgd2UgY2FuJ3QgbWVzcyB3aXRoIGl0IGFueW1vcmUuIENvbnRleHQgbWVudSBpc1xuICAgIC8vIGhhbmRsZWQgaW4gb25Nb3VzZURvd24gZm9yIHRoZXNlIGJyb3dzZXJzLlxuICAgIG9uKGQuc2Nyb2xsZXIsIFwiY29udGV4dG1lbnVcIiwgZnVuY3Rpb24gKGUpIHsgcmV0dXJuIG9uQ29udGV4dE1lbnUoY20sIGUpOyB9KTtcbiAgICBvbihkLmlucHV0LmdldEZpZWxkKCksIFwiY29udGV4dG1lbnVcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgIGlmICghZC5zY3JvbGxlci5jb250YWlucyhlLnRhcmdldCkpIHsgb25Db250ZXh0TWVudShjbSwgZSk7IH1cbiAgICB9KTtcblxuICAgIC8vIFVzZWQgdG8gc3VwcHJlc3MgbW91c2UgZXZlbnQgaGFuZGxpbmcgd2hlbiBhIHRvdWNoIGhhcHBlbnNcbiAgICB2YXIgdG91Y2hGaW5pc2hlZCwgcHJldlRvdWNoID0ge2VuZDogMH07XG4gICAgZnVuY3Rpb24gZmluaXNoVG91Y2goKSB7XG4gICAgICBpZiAoZC5hY3RpdmVUb3VjaCkge1xuICAgICAgICB0b3VjaEZpbmlzaGVkID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7IHJldHVybiBkLmFjdGl2ZVRvdWNoID0gbnVsbDsgfSwgMTAwMCk7XG4gICAgICAgIHByZXZUb3VjaCA9IGQuYWN0aXZlVG91Y2g7XG4gICAgICAgIHByZXZUb3VjaC5lbmQgPSArbmV3IERhdGU7XG4gICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGlzTW91c2VMaWtlVG91Y2hFdmVudChlKSB7XG4gICAgICBpZiAoZS50b3VjaGVzLmxlbmd0aCAhPSAxKSB7IHJldHVybiBmYWxzZSB9XG4gICAgICB2YXIgdG91Y2ggPSBlLnRvdWNoZXNbMF07XG4gICAgICByZXR1cm4gdG91Y2gucmFkaXVzWCA8PSAxICYmIHRvdWNoLnJhZGl1c1kgPD0gMVxuICAgIH1cbiAgICBmdW5jdGlvbiBmYXJBd2F5KHRvdWNoLCBvdGhlcikge1xuICAgICAgaWYgKG90aGVyLmxlZnQgPT0gbnVsbCkgeyByZXR1cm4gdHJ1ZSB9XG4gICAgICB2YXIgZHggPSBvdGhlci5sZWZ0IC0gdG91Y2gubGVmdCwgZHkgPSBvdGhlci50b3AgLSB0b3VjaC50b3A7XG4gICAgICByZXR1cm4gZHggKiBkeCArIGR5ICogZHkgPiAyMCAqIDIwXG4gICAgfVxuICAgIG9uKGQuc2Nyb2xsZXIsIFwidG91Y2hzdGFydFwiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgaWYgKCFzaWduYWxET01FdmVudChjbSwgZSkgJiYgIWlzTW91c2VMaWtlVG91Y2hFdmVudChlKSAmJiAhY2xpY2tJbkd1dHRlcihjbSwgZSkpIHtcbiAgICAgICAgZC5pbnB1dC5lbnN1cmVQb2xsZWQoKTtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRvdWNoRmluaXNoZWQpO1xuICAgICAgICB2YXIgbm93ID0gK25ldyBEYXRlO1xuICAgICAgICBkLmFjdGl2ZVRvdWNoID0ge3N0YXJ0OiBub3csIG1vdmVkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2OiBub3cgLSBwcmV2VG91Y2guZW5kIDw9IDMwMCA/IHByZXZUb3VjaCA6IG51bGx9O1xuICAgICAgICBpZiAoZS50b3VjaGVzLmxlbmd0aCA9PSAxKSB7XG4gICAgICAgICAgZC5hY3RpdmVUb3VjaC5sZWZ0ID0gZS50b3VjaGVzWzBdLnBhZ2VYO1xuICAgICAgICAgIGQuYWN0aXZlVG91Y2gudG9wID0gZS50b3VjaGVzWzBdLnBhZ2VZO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gICAgb24oZC5zY3JvbGxlciwgXCJ0b3VjaG1vdmVcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKGQuYWN0aXZlVG91Y2gpIHsgZC5hY3RpdmVUb3VjaC5tb3ZlZCA9IHRydWU7IH1cbiAgICB9KTtcbiAgICBvbihkLnNjcm9sbGVyLCBcInRvdWNoZW5kXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICB2YXIgdG91Y2ggPSBkLmFjdGl2ZVRvdWNoO1xuICAgICAgaWYgKHRvdWNoICYmICFldmVudEluV2lkZ2V0KGQsIGUpICYmIHRvdWNoLmxlZnQgIT0gbnVsbCAmJlxuICAgICAgICAgICF0b3VjaC5tb3ZlZCAmJiBuZXcgRGF0ZSAtIHRvdWNoLnN0YXJ0IDwgMzAwKSB7XG4gICAgICAgIHZhciBwb3MgPSBjbS5jb29yZHNDaGFyKGQuYWN0aXZlVG91Y2gsIFwicGFnZVwiKSwgcmFuZ2U7XG4gICAgICAgIGlmICghdG91Y2gucHJldiB8fCBmYXJBd2F5KHRvdWNoLCB0b3VjaC5wcmV2KSkgLy8gU2luZ2xlIHRhcFxuICAgICAgICAgIHsgcmFuZ2UgPSBuZXcgUmFuZ2UocG9zLCBwb3MpOyB9XG4gICAgICAgIGVsc2UgaWYgKCF0b3VjaC5wcmV2LnByZXYgfHwgZmFyQXdheSh0b3VjaCwgdG91Y2gucHJldi5wcmV2KSkgLy8gRG91YmxlIHRhcFxuICAgICAgICAgIHsgcmFuZ2UgPSBjbS5maW5kV29yZEF0KHBvcyk7IH1cbiAgICAgICAgZWxzZSAvLyBUcmlwbGUgdGFwXG4gICAgICAgICAgeyByYW5nZSA9IG5ldyBSYW5nZShQb3MocG9zLmxpbmUsIDApLCBjbGlwUG9zKGNtLmRvYywgUG9zKHBvcy5saW5lICsgMSwgMCkpKTsgfVxuICAgICAgICBjbS5zZXRTZWxlY3Rpb24ocmFuZ2UuYW5jaG9yLCByYW5nZS5oZWFkKTtcbiAgICAgICAgY20uZm9jdXMoKTtcbiAgICAgICAgZV9wcmV2ZW50RGVmYXVsdChlKTtcbiAgICAgIH1cbiAgICAgIGZpbmlzaFRvdWNoKCk7XG4gICAgfSk7XG4gICAgb24oZC5zY3JvbGxlciwgXCJ0b3VjaGNhbmNlbFwiLCBmaW5pc2hUb3VjaCk7XG5cbiAgICAvLyBTeW5jIHNjcm9sbGluZyBiZXR3ZWVuIGZha2Ugc2Nyb2xsYmFycyBhbmQgcmVhbCBzY3JvbGxhYmxlXG4gICAgLy8gYXJlYSwgZW5zdXJlIHZpZXdwb3J0IGlzIHVwZGF0ZWQgd2hlbiBzY3JvbGxpbmcuXG4gICAgb24oZC5zY3JvbGxlciwgXCJzY3JvbGxcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKGQuc2Nyb2xsZXIuY2xpZW50SGVpZ2h0KSB7XG4gICAgICAgIHVwZGF0ZVNjcm9sbFRvcChjbSwgZC5zY3JvbGxlci5zY3JvbGxUb3ApO1xuICAgICAgICBzZXRTY3JvbGxMZWZ0KGNtLCBkLnNjcm9sbGVyLnNjcm9sbExlZnQsIHRydWUpO1xuICAgICAgICBzaWduYWwoY20sIFwic2Nyb2xsXCIsIGNtKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIExpc3RlbiB0byB3aGVlbCBldmVudHMgaW4gb3JkZXIgdG8gdHJ5IGFuZCB1cGRhdGUgdGhlIHZpZXdwb3J0IG9uIHRpbWUuXG4gICAgb24oZC5zY3JvbGxlciwgXCJtb3VzZXdoZWVsXCIsIGZ1bmN0aW9uIChlKSB7IHJldHVybiBvblNjcm9sbFdoZWVsKGNtLCBlKTsgfSk7XG4gICAgb24oZC5zY3JvbGxlciwgXCJET01Nb3VzZVNjcm9sbFwiLCBmdW5jdGlvbiAoZSkgeyByZXR1cm4gb25TY3JvbGxXaGVlbChjbSwgZSk7IH0pO1xuXG4gICAgLy8gUHJldmVudCB3cmFwcGVyIGZyb20gZXZlciBzY3JvbGxpbmdcbiAgICBvbihkLndyYXBwZXIsIFwic2Nyb2xsXCIsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIGQud3JhcHBlci5zY3JvbGxUb3AgPSBkLndyYXBwZXIuc2Nyb2xsTGVmdCA9IDA7IH0pO1xuXG4gICAgZC5kcmFnRnVuY3Rpb25zID0ge1xuICAgICAgZW50ZXI6IGZ1bmN0aW9uIChlKSB7aWYgKCFzaWduYWxET01FdmVudChjbSwgZSkpIHsgZV9zdG9wKGUpOyB9fSxcbiAgICAgIG92ZXI6IGZ1bmN0aW9uIChlKSB7aWYgKCFzaWduYWxET01FdmVudChjbSwgZSkpIHsgb25EcmFnT3ZlcihjbSwgZSk7IGVfc3RvcChlKTsgfX0sXG4gICAgICBzdGFydDogZnVuY3Rpb24gKGUpIHsgcmV0dXJuIG9uRHJhZ1N0YXJ0KGNtLCBlKTsgfSxcbiAgICAgIGRyb3A6IG9wZXJhdGlvbihjbSwgb25Ecm9wKSxcbiAgICAgIGxlYXZlOiBmdW5jdGlvbiAoZSkge2lmICghc2lnbmFsRE9NRXZlbnQoY20sIGUpKSB7IGNsZWFyRHJhZ0N1cnNvcihjbSk7IH19XG4gICAgfTtcblxuICAgIHZhciBpbnAgPSBkLmlucHV0LmdldEZpZWxkKCk7XG4gICAgb24oaW5wLCBcImtleXVwXCIsIGZ1bmN0aW9uIChlKSB7IHJldHVybiBvbktleVVwLmNhbGwoY20sIGUpOyB9KTtcbiAgICBvbihpbnAsIFwia2V5ZG93blwiLCBvcGVyYXRpb24oY20sIG9uS2V5RG93bikpO1xuICAgIG9uKGlucCwgXCJrZXlwcmVzc1wiLCBvcGVyYXRpb24oY20sIG9uS2V5UHJlc3MpKTtcbiAgICBvbihpbnAsIFwiZm9jdXNcIiwgZnVuY3Rpb24gKGUpIHsgcmV0dXJuIG9uRm9jdXMoY20sIGUpOyB9KTtcbiAgICBvbihpbnAsIFwiYmx1clwiLCBmdW5jdGlvbiAoZSkgeyByZXR1cm4gb25CbHVyKGNtLCBlKTsgfSk7XG4gIH1cblxuICB2YXIgaW5pdEhvb2tzID0gW107XG4gIENvZGVNaXJyb3IuZGVmaW5lSW5pdEhvb2sgPSBmdW5jdGlvbiAoZikgeyByZXR1cm4gaW5pdEhvb2tzLnB1c2goZik7IH07XG5cbiAgLy8gSW5kZW50IHRoZSBnaXZlbiBsaW5lLiBUaGUgaG93IHBhcmFtZXRlciBjYW4gYmUgXCJzbWFydFwiLFxuICAvLyBcImFkZFwiL251bGwsIFwic3VidHJhY3RcIiwgb3IgXCJwcmV2XCIuIFdoZW4gYWdncmVzc2l2ZSBpcyBmYWxzZVxuICAvLyAodHlwaWNhbGx5IHNldCB0byB0cnVlIGZvciBmb3JjZWQgc2luZ2xlLWxpbmUgaW5kZW50cyksIGVtcHR5XG4gIC8vIGxpbmVzIGFyZSBub3QgaW5kZW50ZWQsIGFuZCBwbGFjZXMgd2hlcmUgdGhlIG1vZGUgcmV0dXJucyBQYXNzXG4gIC8vIGFyZSBsZWZ0IGFsb25lLlxuICBmdW5jdGlvbiBpbmRlbnRMaW5lKGNtLCBuLCBob3csIGFnZ3Jlc3NpdmUpIHtcbiAgICB2YXIgZG9jID0gY20uZG9jLCBzdGF0ZTtcbiAgICBpZiAoaG93ID09IG51bGwpIHsgaG93ID0gXCJhZGRcIjsgfVxuICAgIGlmIChob3cgPT0gXCJzbWFydFwiKSB7XG4gICAgICAvLyBGYWxsIGJhY2sgdG8gXCJwcmV2XCIgd2hlbiB0aGUgbW9kZSBkb2Vzbid0IGhhdmUgYW4gaW5kZW50YXRpb25cbiAgICAgIC8vIG1ldGhvZC5cbiAgICAgIGlmICghZG9jLm1vZGUuaW5kZW50KSB7IGhvdyA9IFwicHJldlwiOyB9XG4gICAgICBlbHNlIHsgc3RhdGUgPSBnZXRDb250ZXh0QmVmb3JlKGNtLCBuKS5zdGF0ZTsgfVxuICAgIH1cblxuICAgIHZhciB0YWJTaXplID0gY20ub3B0aW9ucy50YWJTaXplO1xuICAgIHZhciBsaW5lID0gZ2V0TGluZShkb2MsIG4pLCBjdXJTcGFjZSA9IGNvdW50Q29sdW1uKGxpbmUudGV4dCwgbnVsbCwgdGFiU2l6ZSk7XG4gICAgaWYgKGxpbmUuc3RhdGVBZnRlcikgeyBsaW5lLnN0YXRlQWZ0ZXIgPSBudWxsOyB9XG4gICAgdmFyIGN1clNwYWNlU3RyaW5nID0gbGluZS50ZXh0Lm1hdGNoKC9eXFxzKi8pWzBdLCBpbmRlbnRhdGlvbjtcbiAgICBpZiAoIWFnZ3Jlc3NpdmUgJiYgIS9cXFMvLnRlc3QobGluZS50ZXh0KSkge1xuICAgICAgaW5kZW50YXRpb24gPSAwO1xuICAgICAgaG93ID0gXCJub3RcIjtcbiAgICB9IGVsc2UgaWYgKGhvdyA9PSBcInNtYXJ0XCIpIHtcbiAgICAgIGluZGVudGF0aW9uID0gZG9jLm1vZGUuaW5kZW50KHN0YXRlLCBsaW5lLnRleHQuc2xpY2UoY3VyU3BhY2VTdHJpbmcubGVuZ3RoKSwgbGluZS50ZXh0KTtcbiAgICAgIGlmIChpbmRlbnRhdGlvbiA9PSBQYXNzIHx8IGluZGVudGF0aW9uID4gMTUwKSB7XG4gICAgICAgIGlmICghYWdncmVzc2l2ZSkgeyByZXR1cm4gfVxuICAgICAgICBob3cgPSBcInByZXZcIjtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGhvdyA9PSBcInByZXZcIikge1xuICAgICAgaWYgKG4gPiBkb2MuZmlyc3QpIHsgaW5kZW50YXRpb24gPSBjb3VudENvbHVtbihnZXRMaW5lKGRvYywgbi0xKS50ZXh0LCBudWxsLCB0YWJTaXplKTsgfVxuICAgICAgZWxzZSB7IGluZGVudGF0aW9uID0gMDsgfVxuICAgIH0gZWxzZSBpZiAoaG93ID09IFwiYWRkXCIpIHtcbiAgICAgIGluZGVudGF0aW9uID0gY3VyU3BhY2UgKyBjbS5vcHRpb25zLmluZGVudFVuaXQ7XG4gICAgfSBlbHNlIGlmIChob3cgPT0gXCJzdWJ0cmFjdFwiKSB7XG4gICAgICBpbmRlbnRhdGlvbiA9IGN1clNwYWNlIC0gY20ub3B0aW9ucy5pbmRlbnRVbml0O1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIGhvdyA9PSBcIm51bWJlclwiKSB7XG4gICAgICBpbmRlbnRhdGlvbiA9IGN1clNwYWNlICsgaG93O1xuICAgIH1cbiAgICBpbmRlbnRhdGlvbiA9IE1hdGgubWF4KDAsIGluZGVudGF0aW9uKTtcblxuICAgIHZhciBpbmRlbnRTdHJpbmcgPSBcIlwiLCBwb3MgPSAwO1xuICAgIGlmIChjbS5vcHRpb25zLmluZGVudFdpdGhUYWJzKVxuICAgICAgeyBmb3IgKHZhciBpID0gTWF0aC5mbG9vcihpbmRlbnRhdGlvbiAvIHRhYlNpemUpOyBpOyAtLWkpIHtwb3MgKz0gdGFiU2l6ZTsgaW5kZW50U3RyaW5nICs9IFwiXFx0XCI7fSB9XG4gICAgaWYgKHBvcyA8IGluZGVudGF0aW9uKSB7IGluZGVudFN0cmluZyArPSBzcGFjZVN0cihpbmRlbnRhdGlvbiAtIHBvcyk7IH1cblxuICAgIGlmIChpbmRlbnRTdHJpbmcgIT0gY3VyU3BhY2VTdHJpbmcpIHtcbiAgICAgIHJlcGxhY2VSYW5nZShkb2MsIGluZGVudFN0cmluZywgUG9zKG4sIDApLCBQb3MobiwgY3VyU3BhY2VTdHJpbmcubGVuZ3RoKSwgXCIraW5wdXRcIik7XG4gICAgICBsaW5lLnN0YXRlQWZ0ZXIgPSBudWxsO1xuICAgICAgcmV0dXJuIHRydWVcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gRW5zdXJlIHRoYXQsIGlmIHRoZSBjdXJzb3Igd2FzIGluIHRoZSB3aGl0ZXNwYWNlIGF0IHRoZSBzdGFydFxuICAgICAgLy8gb2YgdGhlIGxpbmUsIGl0IGlzIG1vdmVkIHRvIHRoZSBlbmQgb2YgdGhhdCBzcGFjZS5cbiAgICAgIGZvciAodmFyIGkkMSA9IDA7IGkkMSA8IGRvYy5zZWwucmFuZ2VzLmxlbmd0aDsgaSQxKyspIHtcbiAgICAgICAgdmFyIHJhbmdlID0gZG9jLnNlbC5yYW5nZXNbaSQxXTtcbiAgICAgICAgaWYgKHJhbmdlLmhlYWQubGluZSA9PSBuICYmIHJhbmdlLmhlYWQuY2ggPCBjdXJTcGFjZVN0cmluZy5sZW5ndGgpIHtcbiAgICAgICAgICB2YXIgcG9zJDEgPSBQb3MobiwgY3VyU3BhY2VTdHJpbmcubGVuZ3RoKTtcbiAgICAgICAgICByZXBsYWNlT25lU2VsZWN0aW9uKGRvYywgaSQxLCBuZXcgUmFuZ2UocG9zJDEsIHBvcyQxKSk7XG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIFRoaXMgd2lsbCBiZSBzZXQgdG8gYSB7bGluZVdpc2U6IGJvb2wsIHRleHQ6IFtzdHJpbmddfSBvYmplY3QsIHNvXG4gIC8vIHRoYXQsIHdoZW4gcGFzdGluZywgd2Uga25vdyB3aGF0IGtpbmQgb2Ygc2VsZWN0aW9ucyB0aGUgY29waWVkXG4gIC8vIHRleHQgd2FzIG1hZGUgb3V0IG9mLlxuICB2YXIgbGFzdENvcGllZCA9IG51bGw7XG5cbiAgZnVuY3Rpb24gc2V0TGFzdENvcGllZChuZXdMYXN0Q29waWVkKSB7XG4gICAgbGFzdENvcGllZCA9IG5ld0xhc3RDb3BpZWQ7XG4gIH1cblxuICBmdW5jdGlvbiBhcHBseVRleHRJbnB1dChjbSwgaW5zZXJ0ZWQsIGRlbGV0ZWQsIHNlbCwgb3JpZ2luKSB7XG4gICAgdmFyIGRvYyA9IGNtLmRvYztcbiAgICBjbS5kaXNwbGF5LnNoaWZ0ID0gZmFsc2U7XG4gICAgaWYgKCFzZWwpIHsgc2VsID0gZG9jLnNlbDsgfVxuXG4gICAgdmFyIHJlY2VudCA9ICtuZXcgRGF0ZSAtIDIwMDtcbiAgICB2YXIgcGFzdGUgPSBvcmlnaW4gPT0gXCJwYXN0ZVwiIHx8IGNtLnN0YXRlLnBhc3RlSW5jb21pbmcgPiByZWNlbnQ7XG4gICAgdmFyIHRleHRMaW5lcyA9IHNwbGl0TGluZXNBdXRvKGluc2VydGVkKSwgbXVsdGlQYXN0ZSA9IG51bGw7XG4gICAgLy8gV2hlbiBwYXN0aW5nIE4gbGluZXMgaW50byBOIHNlbGVjdGlvbnMsIGluc2VydCBvbmUgbGluZSBwZXIgc2VsZWN0aW9uXG4gICAgaWYgKHBhc3RlICYmIHNlbC5yYW5nZXMubGVuZ3RoID4gMSkge1xuICAgICAgaWYgKGxhc3RDb3BpZWQgJiYgbGFzdENvcGllZC50ZXh0LmpvaW4oXCJcXG5cIikgPT0gaW5zZXJ0ZWQpIHtcbiAgICAgICAgaWYgKHNlbC5yYW5nZXMubGVuZ3RoICUgbGFzdENvcGllZC50ZXh0Lmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgbXVsdGlQYXN0ZSA9IFtdO1xuICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGFzdENvcGllZC50ZXh0Lmxlbmd0aDsgaSsrKVxuICAgICAgICAgICAgeyBtdWx0aVBhc3RlLnB1c2goZG9jLnNwbGl0TGluZXMobGFzdENvcGllZC50ZXh0W2ldKSk7IH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh0ZXh0TGluZXMubGVuZ3RoID09IHNlbC5yYW5nZXMubGVuZ3RoICYmIGNtLm9wdGlvbnMucGFzdGVMaW5lc1BlclNlbGVjdGlvbikge1xuICAgICAgICBtdWx0aVBhc3RlID0gbWFwKHRleHRMaW5lcywgZnVuY3Rpb24gKGwpIHsgcmV0dXJuIFtsXTsgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIHVwZGF0ZUlucHV0ID0gY20uY3VyT3AudXBkYXRlSW5wdXQ7XG4gICAgLy8gTm9ybWFsIGJlaGF2aW9yIGlzIHRvIGluc2VydCB0aGUgbmV3IHRleHQgaW50byBldmVyeSBzZWxlY3Rpb25cbiAgICBmb3IgKHZhciBpJDEgPSBzZWwucmFuZ2VzLmxlbmd0aCAtIDE7IGkkMSA+PSAwOyBpJDEtLSkge1xuICAgICAgdmFyIHJhbmdlID0gc2VsLnJhbmdlc1tpJDFdO1xuICAgICAgdmFyIGZyb20gPSByYW5nZS5mcm9tKCksIHRvID0gcmFuZ2UudG8oKTtcbiAgICAgIGlmIChyYW5nZS5lbXB0eSgpKSB7XG4gICAgICAgIGlmIChkZWxldGVkICYmIGRlbGV0ZWQgPiAwKSAvLyBIYW5kbGUgZGVsZXRpb25cbiAgICAgICAgICB7IGZyb20gPSBQb3MoZnJvbS5saW5lLCBmcm9tLmNoIC0gZGVsZXRlZCk7IH1cbiAgICAgICAgZWxzZSBpZiAoY20uc3RhdGUub3ZlcndyaXRlICYmICFwYXN0ZSkgLy8gSGFuZGxlIG92ZXJ3cml0ZVxuICAgICAgICAgIHsgdG8gPSBQb3ModG8ubGluZSwgTWF0aC5taW4oZ2V0TGluZShkb2MsIHRvLmxpbmUpLnRleHQubGVuZ3RoLCB0by5jaCArIGxzdCh0ZXh0TGluZXMpLmxlbmd0aCkpOyB9XG4gICAgICAgIGVsc2UgaWYgKHBhc3RlICYmIGxhc3RDb3BpZWQgJiYgbGFzdENvcGllZC5saW5lV2lzZSAmJiBsYXN0Q29waWVkLnRleHQuam9pbihcIlxcblwiKSA9PSB0ZXh0TGluZXMuam9pbihcIlxcblwiKSlcbiAgICAgICAgICB7IGZyb20gPSB0byA9IFBvcyhmcm9tLmxpbmUsIDApOyB9XG4gICAgICB9XG4gICAgICB2YXIgY2hhbmdlRXZlbnQgPSB7ZnJvbTogZnJvbSwgdG86IHRvLCB0ZXh0OiBtdWx0aVBhc3RlID8gbXVsdGlQYXN0ZVtpJDEgJSBtdWx0aVBhc3RlLmxlbmd0aF0gOiB0ZXh0TGluZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ2luOiBvcmlnaW4gfHwgKHBhc3RlID8gXCJwYXN0ZVwiIDogY20uc3RhdGUuY3V0SW5jb21pbmcgPiByZWNlbnQgPyBcImN1dFwiIDogXCIraW5wdXRcIil9O1xuICAgICAgbWFrZUNoYW5nZShjbS5kb2MsIGNoYW5nZUV2ZW50KTtcbiAgICAgIHNpZ25hbExhdGVyKGNtLCBcImlucHV0UmVhZFwiLCBjbSwgY2hhbmdlRXZlbnQpO1xuICAgIH1cbiAgICBpZiAoaW5zZXJ0ZWQgJiYgIXBhc3RlKVxuICAgICAgeyB0cmlnZ2VyRWxlY3RyaWMoY20sIGluc2VydGVkKTsgfVxuXG4gICAgZW5zdXJlQ3Vyc29yVmlzaWJsZShjbSk7XG4gICAgaWYgKGNtLmN1ck9wLnVwZGF0ZUlucHV0IDwgMikgeyBjbS5jdXJPcC51cGRhdGVJbnB1dCA9IHVwZGF0ZUlucHV0OyB9XG4gICAgY20uY3VyT3AudHlwaW5nID0gdHJ1ZTtcbiAgICBjbS5zdGF0ZS5wYXN0ZUluY29taW5nID0gY20uc3RhdGUuY3V0SW5jb21pbmcgPSAtMTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGhhbmRsZVBhc3RlKGUsIGNtKSB7XG4gICAgdmFyIHBhc3RlZCA9IGUuY2xpcGJvYXJkRGF0YSAmJiBlLmNsaXBib2FyZERhdGEuZ2V0RGF0YShcIlRleHRcIik7XG4gICAgaWYgKHBhc3RlZCkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgaWYgKCFjbS5pc1JlYWRPbmx5KCkgJiYgIWNtLm9wdGlvbnMuZGlzYWJsZUlucHV0ICYmIGNtLmhhc0ZvY3VzKCkpXG4gICAgICAgIHsgcnVuSW5PcChjbSwgZnVuY3Rpb24gKCkgeyByZXR1cm4gYXBwbHlUZXh0SW5wdXQoY20sIHBhc3RlZCwgMCwgbnVsbCwgXCJwYXN0ZVwiKTsgfSk7IH1cbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gdHJpZ2dlckVsZWN0cmljKGNtLCBpbnNlcnRlZCkge1xuICAgIC8vIFdoZW4gYW4gJ2VsZWN0cmljJyBjaGFyYWN0ZXIgaXMgaW5zZXJ0ZWQsIGltbWVkaWF0ZWx5IHRyaWdnZXIgYSByZWluZGVudFxuICAgIGlmICghY20ub3B0aW9ucy5lbGVjdHJpY0NoYXJzIHx8ICFjbS5vcHRpb25zLnNtYXJ0SW5kZW50KSB7IHJldHVybiB9XG4gICAgdmFyIHNlbCA9IGNtLmRvYy5zZWw7XG5cbiAgICBmb3IgKHZhciBpID0gc2VsLnJhbmdlcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgdmFyIHJhbmdlID0gc2VsLnJhbmdlc1tpXTtcbiAgICAgIGlmIChyYW5nZS5oZWFkLmNoID4gMTAwIHx8IChpICYmIHNlbC5yYW5nZXNbaSAtIDFdLmhlYWQubGluZSA9PSByYW5nZS5oZWFkLmxpbmUpKSB7IGNvbnRpbnVlIH1cbiAgICAgIHZhciBtb2RlID0gY20uZ2V0TW9kZUF0KHJhbmdlLmhlYWQpO1xuICAgICAgdmFyIGluZGVudGVkID0gZmFsc2U7XG4gICAgICBpZiAobW9kZS5lbGVjdHJpY0NoYXJzKSB7XG4gICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbW9kZS5lbGVjdHJpY0NoYXJzLmxlbmd0aDsgaisrKVxuICAgICAgICAgIHsgaWYgKGluc2VydGVkLmluZGV4T2YobW9kZS5lbGVjdHJpY0NoYXJzLmNoYXJBdChqKSkgPiAtMSkge1xuICAgICAgICAgICAgaW5kZW50ZWQgPSBpbmRlbnRMaW5lKGNtLCByYW5nZS5oZWFkLmxpbmUsIFwic21hcnRcIik7XG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIH0gfVxuICAgICAgfSBlbHNlIGlmIChtb2RlLmVsZWN0cmljSW5wdXQpIHtcbiAgICAgICAgaWYgKG1vZGUuZWxlY3RyaWNJbnB1dC50ZXN0KGdldExpbmUoY20uZG9jLCByYW5nZS5oZWFkLmxpbmUpLnRleHQuc2xpY2UoMCwgcmFuZ2UuaGVhZC5jaCkpKVxuICAgICAgICAgIHsgaW5kZW50ZWQgPSBpbmRlbnRMaW5lKGNtLCByYW5nZS5oZWFkLmxpbmUsIFwic21hcnRcIik7IH1cbiAgICAgIH1cbiAgICAgIGlmIChpbmRlbnRlZCkgeyBzaWduYWxMYXRlcihjbSwgXCJlbGVjdHJpY0lucHV0XCIsIGNtLCByYW5nZS5oZWFkLmxpbmUpOyB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gY29weWFibGVSYW5nZXMoY20pIHtcbiAgICB2YXIgdGV4dCA9IFtdLCByYW5nZXMgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNtLmRvYy5zZWwucmFuZ2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgbGluZSA9IGNtLmRvYy5zZWwucmFuZ2VzW2ldLmhlYWQubGluZTtcbiAgICAgIHZhciBsaW5lUmFuZ2UgPSB7YW5jaG9yOiBQb3MobGluZSwgMCksIGhlYWQ6IFBvcyhsaW5lICsgMSwgMCl9O1xuICAgICAgcmFuZ2VzLnB1c2gobGluZVJhbmdlKTtcbiAgICAgIHRleHQucHVzaChjbS5nZXRSYW5nZShsaW5lUmFuZ2UuYW5jaG9yLCBsaW5lUmFuZ2UuaGVhZCkpO1xuICAgIH1cbiAgICByZXR1cm4ge3RleHQ6IHRleHQsIHJhbmdlczogcmFuZ2VzfVxuICB9XG5cbiAgZnVuY3Rpb24gZGlzYWJsZUJyb3dzZXJNYWdpYyhmaWVsZCwgc3BlbGxjaGVjaywgYXV0b2NvcnJlY3QsIGF1dG9jYXBpdGFsaXplKSB7XG4gICAgZmllbGQuc2V0QXR0cmlidXRlKFwiYXV0b2NvcnJlY3RcIiwgYXV0b2NvcnJlY3QgPyBcIm9uXCIgOiBcIm9mZlwiKTtcbiAgICBmaWVsZC5zZXRBdHRyaWJ1dGUoXCJhdXRvY2FwaXRhbGl6ZVwiLCBhdXRvY2FwaXRhbGl6ZSA/IFwib25cIiA6IFwib2ZmXCIpO1xuICAgIGZpZWxkLnNldEF0dHJpYnV0ZShcInNwZWxsY2hlY2tcIiwgISFzcGVsbGNoZWNrKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGhpZGRlblRleHRhcmVhKCkge1xuICAgIHZhciB0ZSA9IGVsdChcInRleHRhcmVhXCIsIG51bGwsIG51bGwsIFwicG9zaXRpb246IGFic29sdXRlOyBib3R0b206IC0xZW07IHBhZGRpbmc6IDA7IHdpZHRoOiAxcHg7IGhlaWdodDogMWVtOyBtaW4taGVpZ2h0OiAxZW07IG91dGxpbmU6IG5vbmVcIik7XG4gICAgdmFyIGRpdiA9IGVsdChcImRpdlwiLCBbdGVdLCBudWxsLCBcIm92ZXJmbG93OiBoaWRkZW47IHBvc2l0aW9uOiByZWxhdGl2ZTsgd2lkdGg6IDNweDsgaGVpZ2h0OiAwcHg7XCIpO1xuICAgIC8vIFRoZSB0ZXh0YXJlYSBpcyBrZXB0IHBvc2l0aW9uZWQgbmVhciB0aGUgY3Vyc29yIHRvIHByZXZlbnQgdGhlXG4gICAgLy8gZmFjdCB0aGF0IGl0J2xsIGJlIHNjcm9sbGVkIGludG8gdmlldyBvbiBpbnB1dCBmcm9tIHNjcm9sbGluZ1xuICAgIC8vIG91ciBmYWtlIGN1cnNvciBvdXQgb2Ygdmlldy4gT24gd2Via2l0LCB3aGVuIHdyYXA9b2ZmLCBwYXN0ZSBpc1xuICAgIC8vIHZlcnkgc2xvdy4gU28gbWFrZSB0aGUgYXJlYSB3aWRlIGluc3RlYWQuXG4gICAgaWYgKHdlYmtpdCkgeyB0ZS5zdHlsZS53aWR0aCA9IFwiMTAwMHB4XCI7IH1cbiAgICBlbHNlIHsgdGUuc2V0QXR0cmlidXRlKFwid3JhcFwiLCBcIm9mZlwiKTsgfVxuICAgIC8vIElmIGJvcmRlcjogMDsgLS0gaU9TIGZhaWxzIHRvIG9wZW4ga2V5Ym9hcmQgKGlzc3VlICMxMjg3KVxuICAgIGlmIChpb3MpIHsgdGUuc3R5bGUuYm9yZGVyID0gXCIxcHggc29saWQgYmxhY2tcIjsgfVxuICAgIHJldHVybiBkaXZcbiAgfVxuXG4gIC8vIFRoZSBwdWJsaWNseSB2aXNpYmxlIEFQSS4gTm90ZSB0aGF0IG1ldGhvZE9wKGYpIG1lYW5zXG4gIC8vICd3cmFwIGYgaW4gYW4gb3BlcmF0aW9uLCBwZXJmb3JtZWQgb24gaXRzIGB0aGlzYCBwYXJhbWV0ZXInLlxuXG4gIC8vIFRoaXMgaXMgbm90IHRoZSBjb21wbGV0ZSBzZXQgb2YgZWRpdG9yIG1ldGhvZHMuIE1vc3Qgb2YgdGhlXG4gIC8vIG1ldGhvZHMgZGVmaW5lZCBvbiB0aGUgRG9jIHR5cGUgYXJlIGFsc28gaW5qZWN0ZWQgaW50b1xuICAvLyBDb2RlTWlycm9yLnByb3RvdHlwZSwgZm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5IGFuZFxuICAvLyBjb252ZW5pZW5jZS5cblxuICBmdW5jdGlvbiBhZGRFZGl0b3JNZXRob2RzKENvZGVNaXJyb3IpIHtcbiAgICB2YXIgb3B0aW9uSGFuZGxlcnMgPSBDb2RlTWlycm9yLm9wdGlvbkhhbmRsZXJzO1xuXG4gICAgdmFyIGhlbHBlcnMgPSBDb2RlTWlycm9yLmhlbHBlcnMgPSB7fTtcblxuICAgIENvZGVNaXJyb3IucHJvdG90eXBlID0ge1xuICAgICAgY29uc3RydWN0b3I6IENvZGVNaXJyb3IsXG4gICAgICBmb2N1czogZnVuY3Rpb24oKXt3aW4odGhpcykuZm9jdXMoKTsgdGhpcy5kaXNwbGF5LmlucHV0LmZvY3VzKCk7fSxcblxuICAgICAgc2V0T3B0aW9uOiBmdW5jdGlvbihvcHRpb24sIHZhbHVlKSB7XG4gICAgICAgIHZhciBvcHRpb25zID0gdGhpcy5vcHRpb25zLCBvbGQgPSBvcHRpb25zW29wdGlvbl07XG4gICAgICAgIGlmIChvcHRpb25zW29wdGlvbl0gPT0gdmFsdWUgJiYgb3B0aW9uICE9IFwibW9kZVwiKSB7IHJldHVybiB9XG4gICAgICAgIG9wdGlvbnNbb3B0aW9uXSA9IHZhbHVlO1xuICAgICAgICBpZiAob3B0aW9uSGFuZGxlcnMuaGFzT3duUHJvcGVydHkob3B0aW9uKSlcbiAgICAgICAgICB7IG9wZXJhdGlvbih0aGlzLCBvcHRpb25IYW5kbGVyc1tvcHRpb25dKSh0aGlzLCB2YWx1ZSwgb2xkKTsgfVxuICAgICAgICBzaWduYWwodGhpcywgXCJvcHRpb25DaGFuZ2VcIiwgdGhpcywgb3B0aW9uKTtcbiAgICAgIH0sXG5cbiAgICAgIGdldE9wdGlvbjogZnVuY3Rpb24ob3B0aW9uKSB7cmV0dXJuIHRoaXMub3B0aW9uc1tvcHRpb25dfSxcbiAgICAgIGdldERvYzogZnVuY3Rpb24oKSB7cmV0dXJuIHRoaXMuZG9jfSxcblxuICAgICAgYWRkS2V5TWFwOiBmdW5jdGlvbihtYXAsIGJvdHRvbSkge1xuICAgICAgICB0aGlzLnN0YXRlLmtleU1hcHNbYm90dG9tID8gXCJwdXNoXCIgOiBcInVuc2hpZnRcIl0oZ2V0S2V5TWFwKG1hcCkpO1xuICAgICAgfSxcbiAgICAgIHJlbW92ZUtleU1hcDogZnVuY3Rpb24obWFwKSB7XG4gICAgICAgIHZhciBtYXBzID0gdGhpcy5zdGF0ZS5rZXlNYXBzO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1hcHMubGVuZ3RoOyArK2kpXG4gICAgICAgICAgeyBpZiAobWFwc1tpXSA9PSBtYXAgfHwgbWFwc1tpXS5uYW1lID09IG1hcCkge1xuICAgICAgICAgICAgbWFwcy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICAgIH0gfVxuICAgICAgfSxcblxuICAgICAgYWRkT3ZlcmxheTogbWV0aG9kT3AoZnVuY3Rpb24oc3BlYywgb3B0aW9ucykge1xuICAgICAgICB2YXIgbW9kZSA9IHNwZWMudG9rZW4gPyBzcGVjIDogQ29kZU1pcnJvci5nZXRNb2RlKHRoaXMub3B0aW9ucywgc3BlYyk7XG4gICAgICAgIGlmIChtb2RlLnN0YXJ0U3RhdGUpIHsgdGhyb3cgbmV3IEVycm9yKFwiT3ZlcmxheXMgbWF5IG5vdCBiZSBzdGF0ZWZ1bC5cIikgfVxuICAgICAgICBpbnNlcnRTb3J0ZWQodGhpcy5zdGF0ZS5vdmVybGF5cyxcbiAgICAgICAgICAgICAgICAgICAgIHttb2RlOiBtb2RlLCBtb2RlU3BlYzogc3BlYywgb3BhcXVlOiBvcHRpb25zICYmIG9wdGlvbnMub3BhcXVlLFxuICAgICAgICAgICAgICAgICAgICAgIHByaW9yaXR5OiAob3B0aW9ucyAmJiBvcHRpb25zLnByaW9yaXR5KSB8fCAwfSxcbiAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChvdmVybGF5KSB7IHJldHVybiBvdmVybGF5LnByaW9yaXR5OyB9KTtcbiAgICAgICAgdGhpcy5zdGF0ZS5tb2RlR2VuKys7XG4gICAgICAgIHJlZ0NoYW5nZSh0aGlzKTtcbiAgICAgIH0pLFxuICAgICAgcmVtb3ZlT3ZlcmxheTogbWV0aG9kT3AoZnVuY3Rpb24oc3BlYykge1xuICAgICAgICB2YXIgb3ZlcmxheXMgPSB0aGlzLnN0YXRlLm92ZXJsYXlzO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG92ZXJsYXlzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgdmFyIGN1ciA9IG92ZXJsYXlzW2ldLm1vZGVTcGVjO1xuICAgICAgICAgIGlmIChjdXIgPT0gc3BlYyB8fCB0eXBlb2Ygc3BlYyA9PSBcInN0cmluZ1wiICYmIGN1ci5uYW1lID09IHNwZWMpIHtcbiAgICAgICAgICAgIG92ZXJsYXlzLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUubW9kZUdlbisrO1xuICAgICAgICAgICAgcmVnQ2hhbmdlKHRoaXMpO1xuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KSxcblxuICAgICAgaW5kZW50TGluZTogbWV0aG9kT3AoZnVuY3Rpb24obiwgZGlyLCBhZ2dyZXNzaXZlKSB7XG4gICAgICAgIGlmICh0eXBlb2YgZGlyICE9IFwic3RyaW5nXCIgJiYgdHlwZW9mIGRpciAhPSBcIm51bWJlclwiKSB7XG4gICAgICAgICAgaWYgKGRpciA9PSBudWxsKSB7IGRpciA9IHRoaXMub3B0aW9ucy5zbWFydEluZGVudCA/IFwic21hcnRcIiA6IFwicHJldlwiOyB9XG4gICAgICAgICAgZWxzZSB7IGRpciA9IGRpciA/IFwiYWRkXCIgOiBcInN1YnRyYWN0XCI7IH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNMaW5lKHRoaXMuZG9jLCBuKSkgeyBpbmRlbnRMaW5lKHRoaXMsIG4sIGRpciwgYWdncmVzc2l2ZSk7IH1cbiAgICAgIH0pLFxuICAgICAgaW5kZW50U2VsZWN0aW9uOiBtZXRob2RPcChmdW5jdGlvbihob3cpIHtcbiAgICAgICAgdmFyIHJhbmdlcyA9IHRoaXMuZG9jLnNlbC5yYW5nZXMsIGVuZCA9IC0xO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJhbmdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHZhciByYW5nZSA9IHJhbmdlc1tpXTtcbiAgICAgICAgICBpZiAoIXJhbmdlLmVtcHR5KCkpIHtcbiAgICAgICAgICAgIHZhciBmcm9tID0gcmFuZ2UuZnJvbSgpLCB0byA9IHJhbmdlLnRvKCk7XG4gICAgICAgICAgICB2YXIgc3RhcnQgPSBNYXRoLm1heChlbmQsIGZyb20ubGluZSk7XG4gICAgICAgICAgICBlbmQgPSBNYXRoLm1pbih0aGlzLmxhc3RMaW5lKCksIHRvLmxpbmUgLSAodG8uY2ggPyAwIDogMSkpICsgMTtcbiAgICAgICAgICAgIGZvciAodmFyIGogPSBzdGFydDsgaiA8IGVuZDsgKytqKVxuICAgICAgICAgICAgICB7IGluZGVudExpbmUodGhpcywgaiwgaG93KTsgfVxuICAgICAgICAgICAgdmFyIG5ld1JhbmdlcyA9IHRoaXMuZG9jLnNlbC5yYW5nZXM7XG4gICAgICAgICAgICBpZiAoZnJvbS5jaCA9PSAwICYmIHJhbmdlcy5sZW5ndGggPT0gbmV3UmFuZ2VzLmxlbmd0aCAmJiBuZXdSYW5nZXNbaV0uZnJvbSgpLmNoID4gMClcbiAgICAgICAgICAgICAgeyByZXBsYWNlT25lU2VsZWN0aW9uKHRoaXMuZG9jLCBpLCBuZXcgUmFuZ2UoZnJvbSwgbmV3UmFuZ2VzW2ldLnRvKCkpLCBzZWxfZG9udFNjcm9sbCk7IH1cbiAgICAgICAgICB9IGVsc2UgaWYgKHJhbmdlLmhlYWQubGluZSA+IGVuZCkge1xuICAgICAgICAgICAgaW5kZW50TGluZSh0aGlzLCByYW5nZS5oZWFkLmxpbmUsIGhvdywgdHJ1ZSk7XG4gICAgICAgICAgICBlbmQgPSByYW5nZS5oZWFkLmxpbmU7XG4gICAgICAgICAgICBpZiAoaSA9PSB0aGlzLmRvYy5zZWwucHJpbUluZGV4KSB7IGVuc3VyZUN1cnNvclZpc2libGUodGhpcyk7IH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pLFxuXG4gICAgICAvLyBGZXRjaCB0aGUgcGFyc2VyIHRva2VuIGZvciBhIGdpdmVuIGNoYXJhY3Rlci4gVXNlZnVsIGZvciBoYWNrc1xuICAgICAgLy8gdGhhdCB3YW50IHRvIGluc3BlY3QgdGhlIG1vZGUgc3RhdGUgKHNheSwgZm9yIGNvbXBsZXRpb24pLlxuICAgICAgZ2V0VG9rZW5BdDogZnVuY3Rpb24ocG9zLCBwcmVjaXNlKSB7XG4gICAgICAgIHJldHVybiB0YWtlVG9rZW4odGhpcywgcG9zLCBwcmVjaXNlKVxuICAgICAgfSxcblxuICAgICAgZ2V0TGluZVRva2VuczogZnVuY3Rpb24obGluZSwgcHJlY2lzZSkge1xuICAgICAgICByZXR1cm4gdGFrZVRva2VuKHRoaXMsIFBvcyhsaW5lKSwgcHJlY2lzZSwgdHJ1ZSlcbiAgICAgIH0sXG5cbiAgICAgIGdldFRva2VuVHlwZUF0OiBmdW5jdGlvbihwb3MpIHtcbiAgICAgICAgcG9zID0gY2xpcFBvcyh0aGlzLmRvYywgcG9zKTtcbiAgICAgICAgdmFyIHN0eWxlcyA9IGdldExpbmVTdHlsZXModGhpcywgZ2V0TGluZSh0aGlzLmRvYywgcG9zLmxpbmUpKTtcbiAgICAgICAgdmFyIGJlZm9yZSA9IDAsIGFmdGVyID0gKHN0eWxlcy5sZW5ndGggLSAxKSAvIDIsIGNoID0gcG9zLmNoO1xuICAgICAgICB2YXIgdHlwZTtcbiAgICAgICAgaWYgKGNoID09IDApIHsgdHlwZSA9IHN0eWxlc1syXTsgfVxuICAgICAgICBlbHNlIHsgZm9yICg7Oykge1xuICAgICAgICAgIHZhciBtaWQgPSAoYmVmb3JlICsgYWZ0ZXIpID4+IDE7XG4gICAgICAgICAgaWYgKChtaWQgPyBzdHlsZXNbbWlkICogMiAtIDFdIDogMCkgPj0gY2gpIHsgYWZ0ZXIgPSBtaWQ7IH1cbiAgICAgICAgICBlbHNlIGlmIChzdHlsZXNbbWlkICogMiArIDFdIDwgY2gpIHsgYmVmb3JlID0gbWlkICsgMTsgfVxuICAgICAgICAgIGVsc2UgeyB0eXBlID0gc3R5bGVzW21pZCAqIDIgKyAyXTsgYnJlYWsgfVxuICAgICAgICB9IH1cbiAgICAgICAgdmFyIGN1dCA9IHR5cGUgPyB0eXBlLmluZGV4T2YoXCJvdmVybGF5IFwiKSA6IC0xO1xuICAgICAgICByZXR1cm4gY3V0IDwgMCA/IHR5cGUgOiBjdXQgPT0gMCA/IG51bGwgOiB0eXBlLnNsaWNlKDAsIGN1dCAtIDEpXG4gICAgICB9LFxuXG4gICAgICBnZXRNb2RlQXQ6IGZ1bmN0aW9uKHBvcykge1xuICAgICAgICB2YXIgbW9kZSA9IHRoaXMuZG9jLm1vZGU7XG4gICAgICAgIGlmICghbW9kZS5pbm5lck1vZGUpIHsgcmV0dXJuIG1vZGUgfVxuICAgICAgICByZXR1cm4gQ29kZU1pcnJvci5pbm5lck1vZGUobW9kZSwgdGhpcy5nZXRUb2tlbkF0KHBvcykuc3RhdGUpLm1vZGVcbiAgICAgIH0sXG5cbiAgICAgIGdldEhlbHBlcjogZnVuY3Rpb24ocG9zLCB0eXBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldEhlbHBlcnMocG9zLCB0eXBlKVswXVxuICAgICAgfSxcblxuICAgICAgZ2V0SGVscGVyczogZnVuY3Rpb24ocG9zLCB0eXBlKSB7XG4gICAgICAgIHZhciBmb3VuZCA9IFtdO1xuICAgICAgICBpZiAoIWhlbHBlcnMuaGFzT3duUHJvcGVydHkodHlwZSkpIHsgcmV0dXJuIGZvdW5kIH1cbiAgICAgICAgdmFyIGhlbHAgPSBoZWxwZXJzW3R5cGVdLCBtb2RlID0gdGhpcy5nZXRNb2RlQXQocG9zKTtcbiAgICAgICAgaWYgKHR5cGVvZiBtb2RlW3R5cGVdID09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICBpZiAoaGVscFttb2RlW3R5cGVdXSkgeyBmb3VuZC5wdXNoKGhlbHBbbW9kZVt0eXBlXV0pOyB9XG4gICAgICAgIH0gZWxzZSBpZiAobW9kZVt0eXBlXSkge1xuICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbW9kZVt0eXBlXS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIHZhbCA9IGhlbHBbbW9kZVt0eXBlXVtpXV07XG4gICAgICAgICAgICBpZiAodmFsKSB7IGZvdW5kLnB1c2godmFsKTsgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChtb2RlLmhlbHBlclR5cGUgJiYgaGVscFttb2RlLmhlbHBlclR5cGVdKSB7XG4gICAgICAgICAgZm91bmQucHVzaChoZWxwW21vZGUuaGVscGVyVHlwZV0pO1xuICAgICAgICB9IGVsc2UgaWYgKGhlbHBbbW9kZS5uYW1lXSkge1xuICAgICAgICAgIGZvdW5kLnB1c2goaGVscFttb2RlLm5hbWVdKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBpJDEgPSAwOyBpJDEgPCBoZWxwLl9nbG9iYWwubGVuZ3RoOyBpJDErKykge1xuICAgICAgICAgIHZhciBjdXIgPSBoZWxwLl9nbG9iYWxbaSQxXTtcbiAgICAgICAgICBpZiAoY3VyLnByZWQobW9kZSwgdGhpcykgJiYgaW5kZXhPZihmb3VuZCwgY3VyLnZhbCkgPT0gLTEpXG4gICAgICAgICAgICB7IGZvdW5kLnB1c2goY3VyLnZhbCk7IH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZm91bmRcbiAgICAgIH0sXG5cbiAgICAgIGdldFN0YXRlQWZ0ZXI6IGZ1bmN0aW9uKGxpbmUsIHByZWNpc2UpIHtcbiAgICAgICAgdmFyIGRvYyA9IHRoaXMuZG9jO1xuICAgICAgICBsaW5lID0gY2xpcExpbmUoZG9jLCBsaW5lID09IG51bGwgPyBkb2MuZmlyc3QgKyBkb2Muc2l6ZSAtIDE6IGxpbmUpO1xuICAgICAgICByZXR1cm4gZ2V0Q29udGV4dEJlZm9yZSh0aGlzLCBsaW5lICsgMSwgcHJlY2lzZSkuc3RhdGVcbiAgICAgIH0sXG5cbiAgICAgIGN1cnNvckNvb3JkczogZnVuY3Rpb24oc3RhcnQsIG1vZGUpIHtcbiAgICAgICAgdmFyIHBvcywgcmFuZ2UgPSB0aGlzLmRvYy5zZWwucHJpbWFyeSgpO1xuICAgICAgICBpZiAoc3RhcnQgPT0gbnVsbCkgeyBwb3MgPSByYW5nZS5oZWFkOyB9XG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiBzdGFydCA9PSBcIm9iamVjdFwiKSB7IHBvcyA9IGNsaXBQb3ModGhpcy5kb2MsIHN0YXJ0KTsgfVxuICAgICAgICBlbHNlIHsgcG9zID0gc3RhcnQgPyByYW5nZS5mcm9tKCkgOiByYW5nZS50bygpOyB9XG4gICAgICAgIHJldHVybiBjdXJzb3JDb29yZHModGhpcywgcG9zLCBtb2RlIHx8IFwicGFnZVwiKVxuICAgICAgfSxcblxuICAgICAgY2hhckNvb3JkczogZnVuY3Rpb24ocG9zLCBtb2RlKSB7XG4gICAgICAgIHJldHVybiBjaGFyQ29vcmRzKHRoaXMsIGNsaXBQb3ModGhpcy5kb2MsIHBvcyksIG1vZGUgfHwgXCJwYWdlXCIpXG4gICAgICB9LFxuXG4gICAgICBjb29yZHNDaGFyOiBmdW5jdGlvbihjb29yZHMsIG1vZGUpIHtcbiAgICAgICAgY29vcmRzID0gZnJvbUNvb3JkU3lzdGVtKHRoaXMsIGNvb3JkcywgbW9kZSB8fCBcInBhZ2VcIik7XG4gICAgICAgIHJldHVybiBjb29yZHNDaGFyKHRoaXMsIGNvb3Jkcy5sZWZ0LCBjb29yZHMudG9wKVxuICAgICAgfSxcblxuICAgICAgbGluZUF0SGVpZ2h0OiBmdW5jdGlvbihoZWlnaHQsIG1vZGUpIHtcbiAgICAgICAgaGVpZ2h0ID0gZnJvbUNvb3JkU3lzdGVtKHRoaXMsIHt0b3A6IGhlaWdodCwgbGVmdDogMH0sIG1vZGUgfHwgXCJwYWdlXCIpLnRvcDtcbiAgICAgICAgcmV0dXJuIGxpbmVBdEhlaWdodCh0aGlzLmRvYywgaGVpZ2h0ICsgdGhpcy5kaXNwbGF5LnZpZXdPZmZzZXQpXG4gICAgICB9LFxuICAgICAgaGVpZ2h0QXRMaW5lOiBmdW5jdGlvbihsaW5lLCBtb2RlLCBpbmNsdWRlV2lkZ2V0cykge1xuICAgICAgICB2YXIgZW5kID0gZmFsc2UsIGxpbmVPYmo7XG4gICAgICAgIGlmICh0eXBlb2YgbGluZSA9PSBcIm51bWJlclwiKSB7XG4gICAgICAgICAgdmFyIGxhc3QgPSB0aGlzLmRvYy5maXJzdCArIHRoaXMuZG9jLnNpemUgLSAxO1xuICAgICAgICAgIGlmIChsaW5lIDwgdGhpcy5kb2MuZmlyc3QpIHsgbGluZSA9IHRoaXMuZG9jLmZpcnN0OyB9XG4gICAgICAgICAgZWxzZSBpZiAobGluZSA+IGxhc3QpIHsgbGluZSA9IGxhc3Q7IGVuZCA9IHRydWU7IH1cbiAgICAgICAgICBsaW5lT2JqID0gZ2V0TGluZSh0aGlzLmRvYywgbGluZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbGluZU9iaiA9IGxpbmU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGludG9Db29yZFN5c3RlbSh0aGlzLCBsaW5lT2JqLCB7dG9wOiAwLCBsZWZ0OiAwfSwgbW9kZSB8fCBcInBhZ2VcIiwgaW5jbHVkZVdpZGdldHMgfHwgZW5kKS50b3AgK1xuICAgICAgICAgIChlbmQgPyB0aGlzLmRvYy5oZWlnaHQgLSBoZWlnaHRBdExpbmUobGluZU9iaikgOiAwKVxuICAgICAgfSxcblxuICAgICAgZGVmYXVsdFRleHRIZWlnaHQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGV4dEhlaWdodCh0aGlzLmRpc3BsYXkpIH0sXG4gICAgICBkZWZhdWx0Q2hhcldpZHRoOiBmdW5jdGlvbigpIHsgcmV0dXJuIGNoYXJXaWR0aCh0aGlzLmRpc3BsYXkpIH0sXG5cbiAgICAgIGdldFZpZXdwb3J0OiBmdW5jdGlvbigpIHsgcmV0dXJuIHtmcm9tOiB0aGlzLmRpc3BsYXkudmlld0Zyb20sIHRvOiB0aGlzLmRpc3BsYXkudmlld1RvfX0sXG5cbiAgICAgIGFkZFdpZGdldDogZnVuY3Rpb24ocG9zLCBub2RlLCBzY3JvbGwsIHZlcnQsIGhvcml6KSB7XG4gICAgICAgIHZhciBkaXNwbGF5ID0gdGhpcy5kaXNwbGF5O1xuICAgICAgICBwb3MgPSBjdXJzb3JDb29yZHModGhpcywgY2xpcFBvcyh0aGlzLmRvYywgcG9zKSk7XG4gICAgICAgIHZhciB0b3AgPSBwb3MuYm90dG9tLCBsZWZ0ID0gcG9zLmxlZnQ7XG4gICAgICAgIG5vZGUuc3R5bGUucG9zaXRpb24gPSBcImFic29sdXRlXCI7XG4gICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKFwiY20taWdub3JlLWV2ZW50c1wiLCBcInRydWVcIik7XG4gICAgICAgIHRoaXMuZGlzcGxheS5pbnB1dC5zZXRVbmVkaXRhYmxlKG5vZGUpO1xuICAgICAgICBkaXNwbGF5LnNpemVyLmFwcGVuZENoaWxkKG5vZGUpO1xuICAgICAgICBpZiAodmVydCA9PSBcIm92ZXJcIikge1xuICAgICAgICAgIHRvcCA9IHBvcy50b3A7XG4gICAgICAgIH0gZWxzZSBpZiAodmVydCA9PSBcImFib3ZlXCIgfHwgdmVydCA9PSBcIm5lYXJcIikge1xuICAgICAgICAgIHZhciB2c3BhY2UgPSBNYXRoLm1heChkaXNwbGF5LndyYXBwZXIuY2xpZW50SGVpZ2h0LCB0aGlzLmRvYy5oZWlnaHQpLFxuICAgICAgICAgIGhzcGFjZSA9IE1hdGgubWF4KGRpc3BsYXkuc2l6ZXIuY2xpZW50V2lkdGgsIGRpc3BsYXkubGluZVNwYWNlLmNsaWVudFdpZHRoKTtcbiAgICAgICAgICAvLyBEZWZhdWx0IHRvIHBvc2l0aW9uaW5nIGFib3ZlIChpZiBzcGVjaWZpZWQgYW5kIHBvc3NpYmxlKTsgb3RoZXJ3aXNlIGRlZmF1bHQgdG8gcG9zaXRpb25pbmcgYmVsb3dcbiAgICAgICAgICBpZiAoKHZlcnQgPT0gJ2Fib3ZlJyB8fCBwb3MuYm90dG9tICsgbm9kZS5vZmZzZXRIZWlnaHQgPiB2c3BhY2UpICYmIHBvcy50b3AgPiBub2RlLm9mZnNldEhlaWdodClcbiAgICAgICAgICAgIHsgdG9wID0gcG9zLnRvcCAtIG5vZGUub2Zmc2V0SGVpZ2h0OyB9XG4gICAgICAgICAgZWxzZSBpZiAocG9zLmJvdHRvbSArIG5vZGUub2Zmc2V0SGVpZ2h0IDw9IHZzcGFjZSlcbiAgICAgICAgICAgIHsgdG9wID0gcG9zLmJvdHRvbTsgfVxuICAgICAgICAgIGlmIChsZWZ0ICsgbm9kZS5vZmZzZXRXaWR0aCA+IGhzcGFjZSlcbiAgICAgICAgICAgIHsgbGVmdCA9IGhzcGFjZSAtIG5vZGUub2Zmc2V0V2lkdGg7IH1cbiAgICAgICAgfVxuICAgICAgICBub2RlLnN0eWxlLnRvcCA9IHRvcCArIFwicHhcIjtcbiAgICAgICAgbm9kZS5zdHlsZS5sZWZ0ID0gbm9kZS5zdHlsZS5yaWdodCA9IFwiXCI7XG4gICAgICAgIGlmIChob3JpeiA9PSBcInJpZ2h0XCIpIHtcbiAgICAgICAgICBsZWZ0ID0gZGlzcGxheS5zaXplci5jbGllbnRXaWR0aCAtIG5vZGUub2Zmc2V0V2lkdGg7XG4gICAgICAgICAgbm9kZS5zdHlsZS5yaWdodCA9IFwiMHB4XCI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKGhvcml6ID09IFwibGVmdFwiKSB7IGxlZnQgPSAwOyB9XG4gICAgICAgICAgZWxzZSBpZiAoaG9yaXogPT0gXCJtaWRkbGVcIikgeyBsZWZ0ID0gKGRpc3BsYXkuc2l6ZXIuY2xpZW50V2lkdGggLSBub2RlLm9mZnNldFdpZHRoKSAvIDI7IH1cbiAgICAgICAgICBub2RlLnN0eWxlLmxlZnQgPSBsZWZ0ICsgXCJweFwiO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzY3JvbGwpXG4gICAgICAgICAgeyBzY3JvbGxJbnRvVmlldyh0aGlzLCB7bGVmdDogbGVmdCwgdG9wOiB0b3AsIHJpZ2h0OiBsZWZ0ICsgbm9kZS5vZmZzZXRXaWR0aCwgYm90dG9tOiB0b3AgKyBub2RlLm9mZnNldEhlaWdodH0pOyB9XG4gICAgICB9LFxuXG4gICAgICB0cmlnZ2VyT25LZXlEb3duOiBtZXRob2RPcChvbktleURvd24pLFxuICAgICAgdHJpZ2dlck9uS2V5UHJlc3M6IG1ldGhvZE9wKG9uS2V5UHJlc3MpLFxuICAgICAgdHJpZ2dlck9uS2V5VXA6IG9uS2V5VXAsXG4gICAgICB0cmlnZ2VyT25Nb3VzZURvd246IG1ldGhvZE9wKG9uTW91c2VEb3duKSxcblxuICAgICAgZXhlY0NvbW1hbmQ6IGZ1bmN0aW9uKGNtZCkge1xuICAgICAgICBpZiAoY29tbWFuZHMuaGFzT3duUHJvcGVydHkoY21kKSlcbiAgICAgICAgICB7IHJldHVybiBjb21tYW5kc1tjbWRdLmNhbGwobnVsbCwgdGhpcykgfVxuICAgICAgfSxcblxuICAgICAgdHJpZ2dlckVsZWN0cmljOiBtZXRob2RPcChmdW5jdGlvbih0ZXh0KSB7IHRyaWdnZXJFbGVjdHJpYyh0aGlzLCB0ZXh0KTsgfSksXG5cbiAgICAgIGZpbmRQb3NIOiBmdW5jdGlvbihmcm9tLCBhbW91bnQsIHVuaXQsIHZpc3VhbGx5KSB7XG4gICAgICAgIHZhciBkaXIgPSAxO1xuICAgICAgICBpZiAoYW1vdW50IDwgMCkgeyBkaXIgPSAtMTsgYW1vdW50ID0gLWFtb3VudDsgfVxuICAgICAgICB2YXIgY3VyID0gY2xpcFBvcyh0aGlzLmRvYywgZnJvbSk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYW1vdW50OyArK2kpIHtcbiAgICAgICAgICBjdXIgPSBmaW5kUG9zSCh0aGlzLmRvYywgY3VyLCBkaXIsIHVuaXQsIHZpc3VhbGx5KTtcbiAgICAgICAgICBpZiAoY3VyLmhpdFNpZGUpIHsgYnJlYWsgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjdXJcbiAgICAgIH0sXG5cbiAgICAgIG1vdmVIOiBtZXRob2RPcChmdW5jdGlvbihkaXIsIHVuaXQpIHtcbiAgICAgICAgdmFyIHRoaXMkMSA9IHRoaXM7XG5cbiAgICAgICAgdGhpcy5leHRlbmRTZWxlY3Rpb25zQnkoZnVuY3Rpb24gKHJhbmdlKSB7XG4gICAgICAgICAgaWYgKHRoaXMkMS5kaXNwbGF5LnNoaWZ0IHx8IHRoaXMkMS5kb2MuZXh0ZW5kIHx8IHJhbmdlLmVtcHR5KCkpXG4gICAgICAgICAgICB7IHJldHVybiBmaW5kUG9zSCh0aGlzJDEuZG9jLCByYW5nZS5oZWFkLCBkaXIsIHVuaXQsIHRoaXMkMS5vcHRpb25zLnJ0bE1vdmVWaXN1YWxseSkgfVxuICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgIHsgcmV0dXJuIGRpciA8IDAgPyByYW5nZS5mcm9tKCkgOiByYW5nZS50bygpIH1cbiAgICAgICAgfSwgc2VsX21vdmUpO1xuICAgICAgfSksXG5cbiAgICAgIGRlbGV0ZUg6IG1ldGhvZE9wKGZ1bmN0aW9uKGRpciwgdW5pdCkge1xuICAgICAgICB2YXIgc2VsID0gdGhpcy5kb2Muc2VsLCBkb2MgPSB0aGlzLmRvYztcbiAgICAgICAgaWYgKHNlbC5zb21ldGhpbmdTZWxlY3RlZCgpKVxuICAgICAgICAgIHsgZG9jLnJlcGxhY2VTZWxlY3Rpb24oXCJcIiwgbnVsbCwgXCIrZGVsZXRlXCIpOyB9XG4gICAgICAgIGVsc2VcbiAgICAgICAgICB7IGRlbGV0ZU5lYXJTZWxlY3Rpb24odGhpcywgZnVuY3Rpb24gKHJhbmdlKSB7XG4gICAgICAgICAgICB2YXIgb3RoZXIgPSBmaW5kUG9zSChkb2MsIHJhbmdlLmhlYWQsIGRpciwgdW5pdCwgZmFsc2UpO1xuICAgICAgICAgICAgcmV0dXJuIGRpciA8IDAgPyB7ZnJvbTogb3RoZXIsIHRvOiByYW5nZS5oZWFkfSA6IHtmcm9tOiByYW5nZS5oZWFkLCB0bzogb3RoZXJ9XG4gICAgICAgICAgfSk7IH1cbiAgICAgIH0pLFxuXG4gICAgICBmaW5kUG9zVjogZnVuY3Rpb24oZnJvbSwgYW1vdW50LCB1bml0LCBnb2FsQ29sdW1uKSB7XG4gICAgICAgIHZhciBkaXIgPSAxLCB4ID0gZ29hbENvbHVtbjtcbiAgICAgICAgaWYgKGFtb3VudCA8IDApIHsgZGlyID0gLTE7IGFtb3VudCA9IC1hbW91bnQ7IH1cbiAgICAgICAgdmFyIGN1ciA9IGNsaXBQb3ModGhpcy5kb2MsIGZyb20pO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFtb3VudDsgKytpKSB7XG4gICAgICAgICAgdmFyIGNvb3JkcyA9IGN1cnNvckNvb3Jkcyh0aGlzLCBjdXIsIFwiZGl2XCIpO1xuICAgICAgICAgIGlmICh4ID09IG51bGwpIHsgeCA9IGNvb3Jkcy5sZWZ0OyB9XG4gICAgICAgICAgZWxzZSB7IGNvb3Jkcy5sZWZ0ID0geDsgfVxuICAgICAgICAgIGN1ciA9IGZpbmRQb3NWKHRoaXMsIGNvb3JkcywgZGlyLCB1bml0KTtcbiAgICAgICAgICBpZiAoY3VyLmhpdFNpZGUpIHsgYnJlYWsgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjdXJcbiAgICAgIH0sXG5cbiAgICAgIG1vdmVWOiBtZXRob2RPcChmdW5jdGlvbihkaXIsIHVuaXQpIHtcbiAgICAgICAgdmFyIHRoaXMkMSA9IHRoaXM7XG5cbiAgICAgICAgdmFyIGRvYyA9IHRoaXMuZG9jLCBnb2FscyA9IFtdO1xuICAgICAgICB2YXIgY29sbGFwc2UgPSAhdGhpcy5kaXNwbGF5LnNoaWZ0ICYmICFkb2MuZXh0ZW5kICYmIGRvYy5zZWwuc29tZXRoaW5nU2VsZWN0ZWQoKTtcbiAgICAgICAgZG9jLmV4dGVuZFNlbGVjdGlvbnNCeShmdW5jdGlvbiAocmFuZ2UpIHtcbiAgICAgICAgICBpZiAoY29sbGFwc2UpXG4gICAgICAgICAgICB7IHJldHVybiBkaXIgPCAwID8gcmFuZ2UuZnJvbSgpIDogcmFuZ2UudG8oKSB9XG4gICAgICAgICAgdmFyIGhlYWRQb3MgPSBjdXJzb3JDb29yZHModGhpcyQxLCByYW5nZS5oZWFkLCBcImRpdlwiKTtcbiAgICAgICAgICBpZiAocmFuZ2UuZ29hbENvbHVtbiAhPSBudWxsKSB7IGhlYWRQb3MubGVmdCA9IHJhbmdlLmdvYWxDb2x1bW47IH1cbiAgICAgICAgICBnb2Fscy5wdXNoKGhlYWRQb3MubGVmdCk7XG4gICAgICAgICAgdmFyIHBvcyA9IGZpbmRQb3NWKHRoaXMkMSwgaGVhZFBvcywgZGlyLCB1bml0KTtcbiAgICAgICAgICBpZiAodW5pdCA9PSBcInBhZ2VcIiAmJiByYW5nZSA9PSBkb2Muc2VsLnByaW1hcnkoKSlcbiAgICAgICAgICAgIHsgYWRkVG9TY3JvbGxUb3AodGhpcyQxLCBjaGFyQ29vcmRzKHRoaXMkMSwgcG9zLCBcImRpdlwiKS50b3AgLSBoZWFkUG9zLnRvcCk7IH1cbiAgICAgICAgICByZXR1cm4gcG9zXG4gICAgICAgIH0sIHNlbF9tb3ZlKTtcbiAgICAgICAgaWYgKGdvYWxzLmxlbmd0aCkgeyBmb3IgKHZhciBpID0gMDsgaSA8IGRvYy5zZWwucmFuZ2VzLmxlbmd0aDsgaSsrKVxuICAgICAgICAgIHsgZG9jLnNlbC5yYW5nZXNbaV0uZ29hbENvbHVtbiA9IGdvYWxzW2ldOyB9IH1cbiAgICAgIH0pLFxuXG4gICAgICAvLyBGaW5kIHRoZSB3b3JkIGF0IHRoZSBnaXZlbiBwb3NpdGlvbiAoYXMgcmV0dXJuZWQgYnkgY29vcmRzQ2hhcikuXG4gICAgICBmaW5kV29yZEF0OiBmdW5jdGlvbihwb3MpIHtcbiAgICAgICAgdmFyIGRvYyA9IHRoaXMuZG9jLCBsaW5lID0gZ2V0TGluZShkb2MsIHBvcy5saW5lKS50ZXh0O1xuICAgICAgICB2YXIgc3RhcnQgPSBwb3MuY2gsIGVuZCA9IHBvcy5jaDtcbiAgICAgICAgaWYgKGxpbmUpIHtcbiAgICAgICAgICB2YXIgaGVscGVyID0gdGhpcy5nZXRIZWxwZXIocG9zLCBcIndvcmRDaGFyc1wiKTtcbiAgICAgICAgICBpZiAoKHBvcy5zdGlja3kgPT0gXCJiZWZvcmVcIiB8fCBlbmQgPT0gbGluZS5sZW5ndGgpICYmIHN0YXJ0KSB7IC0tc3RhcnQ7IH0gZWxzZSB7ICsrZW5kOyB9XG4gICAgICAgICAgdmFyIHN0YXJ0Q2hhciA9IGxpbmUuY2hhckF0KHN0YXJ0KTtcbiAgICAgICAgICB2YXIgY2hlY2sgPSBpc1dvcmRDaGFyKHN0YXJ0Q2hhciwgaGVscGVyKVxuICAgICAgICAgICAgPyBmdW5jdGlvbiAoY2gpIHsgcmV0dXJuIGlzV29yZENoYXIoY2gsIGhlbHBlcik7IH1cbiAgICAgICAgICAgIDogL1xccy8udGVzdChzdGFydENoYXIpID8gZnVuY3Rpb24gKGNoKSB7IHJldHVybiAvXFxzLy50ZXN0KGNoKTsgfVxuICAgICAgICAgICAgOiBmdW5jdGlvbiAoY2gpIHsgcmV0dXJuICghL1xccy8udGVzdChjaCkgJiYgIWlzV29yZENoYXIoY2gpKTsgfTtcbiAgICAgICAgICB3aGlsZSAoc3RhcnQgPiAwICYmIGNoZWNrKGxpbmUuY2hhckF0KHN0YXJ0IC0gMSkpKSB7IC0tc3RhcnQ7IH1cbiAgICAgICAgICB3aGlsZSAoZW5kIDwgbGluZS5sZW5ndGggJiYgY2hlY2sobGluZS5jaGFyQXQoZW5kKSkpIHsgKytlbmQ7IH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IFJhbmdlKFBvcyhwb3MubGluZSwgc3RhcnQpLCBQb3MocG9zLmxpbmUsIGVuZCkpXG4gICAgICB9LFxuXG4gICAgICB0b2dnbGVPdmVyd3JpdGU6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgIGlmICh2YWx1ZSAhPSBudWxsICYmIHZhbHVlID09IHRoaXMuc3RhdGUub3ZlcndyaXRlKSB7IHJldHVybiB9XG4gICAgICAgIGlmICh0aGlzLnN0YXRlLm92ZXJ3cml0ZSA9ICF0aGlzLnN0YXRlLm92ZXJ3cml0ZSlcbiAgICAgICAgICB7IGFkZENsYXNzKHRoaXMuZGlzcGxheS5jdXJzb3JEaXYsIFwiQ29kZU1pcnJvci1vdmVyd3JpdGVcIik7IH1cbiAgICAgICAgZWxzZVxuICAgICAgICAgIHsgcm1DbGFzcyh0aGlzLmRpc3BsYXkuY3Vyc29yRGl2LCBcIkNvZGVNaXJyb3Itb3ZlcndyaXRlXCIpOyB9XG5cbiAgICAgICAgc2lnbmFsKHRoaXMsIFwib3ZlcndyaXRlVG9nZ2xlXCIsIHRoaXMsIHRoaXMuc3RhdGUub3ZlcndyaXRlKTtcbiAgICAgIH0sXG4gICAgICBoYXNGb2N1czogZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzLmRpc3BsYXkuaW5wdXQuZ2V0RmllbGQoKSA9PSBhY3RpdmVFbHQocm9vdCh0aGlzKSkgfSxcbiAgICAgIGlzUmVhZE9ubHk6IGZ1bmN0aW9uKCkgeyByZXR1cm4gISEodGhpcy5vcHRpb25zLnJlYWRPbmx5IHx8IHRoaXMuZG9jLmNhbnRFZGl0KSB9LFxuXG4gICAgICBzY3JvbGxUbzogbWV0aG9kT3AoZnVuY3Rpb24gKHgsIHkpIHsgc2Nyb2xsVG9Db29yZHModGhpcywgeCwgeSk7IH0pLFxuICAgICAgZ2V0U2Nyb2xsSW5mbzogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBzY3JvbGxlciA9IHRoaXMuZGlzcGxheS5zY3JvbGxlcjtcbiAgICAgICAgcmV0dXJuIHtsZWZ0OiBzY3JvbGxlci5zY3JvbGxMZWZ0LCB0b3A6IHNjcm9sbGVyLnNjcm9sbFRvcCxcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IHNjcm9sbGVyLnNjcm9sbEhlaWdodCAtIHNjcm9sbEdhcCh0aGlzKSAtIHRoaXMuZGlzcGxheS5iYXJIZWlnaHQsXG4gICAgICAgICAgICAgICAgd2lkdGg6IHNjcm9sbGVyLnNjcm9sbFdpZHRoIC0gc2Nyb2xsR2FwKHRoaXMpIC0gdGhpcy5kaXNwbGF5LmJhcldpZHRoLFxuICAgICAgICAgICAgICAgIGNsaWVudEhlaWdodDogZGlzcGxheUhlaWdodCh0aGlzKSwgY2xpZW50V2lkdGg6IGRpc3BsYXlXaWR0aCh0aGlzKX1cbiAgICAgIH0sXG5cbiAgICAgIHNjcm9sbEludG9WaWV3OiBtZXRob2RPcChmdW5jdGlvbihyYW5nZSwgbWFyZ2luKSB7XG4gICAgICAgIGlmIChyYW5nZSA9PSBudWxsKSB7XG4gICAgICAgICAgcmFuZ2UgPSB7ZnJvbTogdGhpcy5kb2Muc2VsLnByaW1hcnkoKS5oZWFkLCB0bzogbnVsbH07XG4gICAgICAgICAgaWYgKG1hcmdpbiA9PSBudWxsKSB7IG1hcmdpbiA9IHRoaXMub3B0aW9ucy5jdXJzb3JTY3JvbGxNYXJnaW47IH1cbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgcmFuZ2UgPT0gXCJudW1iZXJcIikge1xuICAgICAgICAgIHJhbmdlID0ge2Zyb206IFBvcyhyYW5nZSwgMCksIHRvOiBudWxsfTtcbiAgICAgICAgfSBlbHNlIGlmIChyYW5nZS5mcm9tID09IG51bGwpIHtcbiAgICAgICAgICByYW5nZSA9IHtmcm9tOiByYW5nZSwgdG86IG51bGx9O1xuICAgICAgICB9XG4gICAgICAgIGlmICghcmFuZ2UudG8pIHsgcmFuZ2UudG8gPSByYW5nZS5mcm9tOyB9XG4gICAgICAgIHJhbmdlLm1hcmdpbiA9IG1hcmdpbiB8fCAwO1xuXG4gICAgICAgIGlmIChyYW5nZS5mcm9tLmxpbmUgIT0gbnVsbCkge1xuICAgICAgICAgIHNjcm9sbFRvUmFuZ2UodGhpcywgcmFuZ2UpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNjcm9sbFRvQ29vcmRzUmFuZ2UodGhpcywgcmFuZ2UuZnJvbSwgcmFuZ2UudG8sIHJhbmdlLm1hcmdpbik7XG4gICAgICAgIH1cbiAgICAgIH0pLFxuXG4gICAgICBzZXRTaXplOiBtZXRob2RPcChmdW5jdGlvbih3aWR0aCwgaGVpZ2h0KSB7XG4gICAgICAgIHZhciB0aGlzJDEgPSB0aGlzO1xuXG4gICAgICAgIHZhciBpbnRlcnByZXQgPSBmdW5jdGlvbiAodmFsKSB7IHJldHVybiB0eXBlb2YgdmFsID09IFwibnVtYmVyXCIgfHwgL15cXGQrJC8udGVzdChTdHJpbmcodmFsKSkgPyB2YWwgKyBcInB4XCIgOiB2YWw7IH07XG4gICAgICAgIGlmICh3aWR0aCAhPSBudWxsKSB7IHRoaXMuZGlzcGxheS53cmFwcGVyLnN0eWxlLndpZHRoID0gaW50ZXJwcmV0KHdpZHRoKTsgfVxuICAgICAgICBpZiAoaGVpZ2h0ICE9IG51bGwpIHsgdGhpcy5kaXNwbGF5LndyYXBwZXIuc3R5bGUuaGVpZ2h0ID0gaW50ZXJwcmV0KGhlaWdodCk7IH1cbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5saW5lV3JhcHBpbmcpIHsgY2xlYXJMaW5lTWVhc3VyZW1lbnRDYWNoZSh0aGlzKTsgfVxuICAgICAgICB2YXIgbGluZU5vID0gdGhpcy5kaXNwbGF5LnZpZXdGcm9tO1xuICAgICAgICB0aGlzLmRvYy5pdGVyKGxpbmVObywgdGhpcy5kaXNwbGF5LnZpZXdUbywgZnVuY3Rpb24gKGxpbmUpIHtcbiAgICAgICAgICBpZiAobGluZS53aWRnZXRzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgbGluZS53aWRnZXRzLmxlbmd0aDsgaSsrKVxuICAgICAgICAgICAgeyBpZiAobGluZS53aWRnZXRzW2ldLm5vSFNjcm9sbCkgeyByZWdMaW5lQ2hhbmdlKHRoaXMkMSwgbGluZU5vLCBcIndpZGdldFwiKTsgYnJlYWsgfSB9IH1cbiAgICAgICAgICArK2xpbmVObztcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuY3VyT3AuZm9yY2VVcGRhdGUgPSB0cnVlO1xuICAgICAgICBzaWduYWwodGhpcywgXCJyZWZyZXNoXCIsIHRoaXMpO1xuICAgICAgfSksXG5cbiAgICAgIG9wZXJhdGlvbjogZnVuY3Rpb24oZil7cmV0dXJuIHJ1bkluT3AodGhpcywgZil9LFxuICAgICAgc3RhcnRPcGVyYXRpb246IGZ1bmN0aW9uKCl7cmV0dXJuIHN0YXJ0T3BlcmF0aW9uKHRoaXMpfSxcbiAgICAgIGVuZE9wZXJhdGlvbjogZnVuY3Rpb24oKXtyZXR1cm4gZW5kT3BlcmF0aW9uKHRoaXMpfSxcblxuICAgICAgcmVmcmVzaDogbWV0aG9kT3AoZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBvbGRIZWlnaHQgPSB0aGlzLmRpc3BsYXkuY2FjaGVkVGV4dEhlaWdodDtcbiAgICAgICAgcmVnQ2hhbmdlKHRoaXMpO1xuICAgICAgICB0aGlzLmN1ck9wLmZvcmNlVXBkYXRlID0gdHJ1ZTtcbiAgICAgICAgY2xlYXJDYWNoZXModGhpcyk7XG4gICAgICAgIHNjcm9sbFRvQ29vcmRzKHRoaXMsIHRoaXMuZG9jLnNjcm9sbExlZnQsIHRoaXMuZG9jLnNjcm9sbFRvcCk7XG4gICAgICAgIHVwZGF0ZUd1dHRlclNwYWNlKHRoaXMuZGlzcGxheSk7XG4gICAgICAgIGlmIChvbGRIZWlnaHQgPT0gbnVsbCB8fCBNYXRoLmFicyhvbGRIZWlnaHQgLSB0ZXh0SGVpZ2h0KHRoaXMuZGlzcGxheSkpID4gLjUgfHwgdGhpcy5vcHRpb25zLmxpbmVXcmFwcGluZylcbiAgICAgICAgICB7IGVzdGltYXRlTGluZUhlaWdodHModGhpcyk7IH1cbiAgICAgICAgc2lnbmFsKHRoaXMsIFwicmVmcmVzaFwiLCB0aGlzKTtcbiAgICAgIH0pLFxuXG4gICAgICBzd2FwRG9jOiBtZXRob2RPcChmdW5jdGlvbihkb2MpIHtcbiAgICAgICAgdmFyIG9sZCA9IHRoaXMuZG9jO1xuICAgICAgICBvbGQuY20gPSBudWxsO1xuICAgICAgICAvLyBDYW5jZWwgdGhlIGN1cnJlbnQgdGV4dCBzZWxlY3Rpb24gaWYgYW55ICgjNTgyMSlcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuc2VsZWN0aW5nVGV4dCkgeyB0aGlzLnN0YXRlLnNlbGVjdGluZ1RleHQoKTsgfVxuICAgICAgICBhdHRhY2hEb2ModGhpcywgZG9jKTtcbiAgICAgICAgY2xlYXJDYWNoZXModGhpcyk7XG4gICAgICAgIHRoaXMuZGlzcGxheS5pbnB1dC5yZXNldCgpO1xuICAgICAgICBzY3JvbGxUb0Nvb3Jkcyh0aGlzLCBkb2Muc2Nyb2xsTGVmdCwgZG9jLnNjcm9sbFRvcCk7XG4gICAgICAgIHRoaXMuY3VyT3AuZm9yY2VTY3JvbGwgPSB0cnVlO1xuICAgICAgICBzaWduYWxMYXRlcih0aGlzLCBcInN3YXBEb2NcIiwgdGhpcywgb2xkKTtcbiAgICAgICAgcmV0dXJuIG9sZFxuICAgICAgfSksXG5cbiAgICAgIHBocmFzZTogZnVuY3Rpb24ocGhyYXNlVGV4dCkge1xuICAgICAgICB2YXIgcGhyYXNlcyA9IHRoaXMub3B0aW9ucy5waHJhc2VzO1xuICAgICAgICByZXR1cm4gcGhyYXNlcyAmJiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocGhyYXNlcywgcGhyYXNlVGV4dCkgPyBwaHJhc2VzW3BocmFzZVRleHRdIDogcGhyYXNlVGV4dFxuICAgICAgfSxcblxuICAgICAgZ2V0SW5wdXRGaWVsZDogZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kaXNwbGF5LmlucHV0LmdldEZpZWxkKCl9LFxuICAgICAgZ2V0V3JhcHBlckVsZW1lbnQ6IGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGlzcGxheS53cmFwcGVyfSxcbiAgICAgIGdldFNjcm9sbGVyRWxlbWVudDogZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kaXNwbGF5LnNjcm9sbGVyfSxcbiAgICAgIGdldEd1dHRlckVsZW1lbnQ6IGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGlzcGxheS5ndXR0ZXJzfVxuICAgIH07XG4gICAgZXZlbnRNaXhpbihDb2RlTWlycm9yKTtcblxuICAgIENvZGVNaXJyb3IucmVnaXN0ZXJIZWxwZXIgPSBmdW5jdGlvbih0eXBlLCBuYW1lLCB2YWx1ZSkge1xuICAgICAgaWYgKCFoZWxwZXJzLmhhc093blByb3BlcnR5KHR5cGUpKSB7IGhlbHBlcnNbdHlwZV0gPSBDb2RlTWlycm9yW3R5cGVdID0ge19nbG9iYWw6IFtdfTsgfVxuICAgICAgaGVscGVyc1t0eXBlXVtuYW1lXSA9IHZhbHVlO1xuICAgIH07XG4gICAgQ29kZU1pcnJvci5yZWdpc3Rlckdsb2JhbEhlbHBlciA9IGZ1bmN0aW9uKHR5cGUsIG5hbWUsIHByZWRpY2F0ZSwgdmFsdWUpIHtcbiAgICAgIENvZGVNaXJyb3IucmVnaXN0ZXJIZWxwZXIodHlwZSwgbmFtZSwgdmFsdWUpO1xuICAgICAgaGVscGVyc1t0eXBlXS5fZ2xvYmFsLnB1c2goe3ByZWQ6IHByZWRpY2F0ZSwgdmFsOiB2YWx1ZX0pO1xuICAgIH07XG4gIH1cblxuICAvLyBVc2VkIGZvciBob3Jpem9udGFsIHJlbGF0aXZlIG1vdGlvbi4gRGlyIGlzIC0xIG9yIDEgKGxlZnQgb3JcbiAgLy8gcmlnaHQpLCB1bml0IGNhbiBiZSBcImNvZGVwb2ludFwiLCBcImNoYXJcIiwgXCJjb2x1bW5cIiAobGlrZSBjaGFyLCBidXRcbiAgLy8gZG9lc24ndCBjcm9zcyBsaW5lIGJvdW5kYXJpZXMpLCBcIndvcmRcIiAoYWNyb3NzIG5leHQgd29yZCksIG9yXG4gIC8vIFwiZ3JvdXBcIiAodG8gdGhlIHN0YXJ0IG9mIG5leHQgZ3JvdXAgb2Ygd29yZCBvclxuICAvLyBub24td29yZC1ub24td2hpdGVzcGFjZSBjaGFycykuIFRoZSB2aXN1YWxseSBwYXJhbSBjb250cm9sc1xuICAvLyB3aGV0aGVyLCBpbiByaWdodC10by1sZWZ0IHRleHQsIGRpcmVjdGlvbiAxIG1lYW5zIHRvIG1vdmUgdG93YXJkc1xuICAvLyB0aGUgbmV4dCBpbmRleCBpbiB0aGUgc3RyaW5nLCBvciB0b3dhcmRzIHRoZSBjaGFyYWN0ZXIgdG8gdGhlIHJpZ2h0XG4gIC8vIG9mIHRoZSBjdXJyZW50IHBvc2l0aW9uLiBUaGUgcmVzdWx0aW5nIHBvc2l0aW9uIHdpbGwgaGF2ZSBhXG4gIC8vIGhpdFNpZGU9dHJ1ZSBwcm9wZXJ0eSBpZiBpdCByZWFjaGVkIHRoZSBlbmQgb2YgdGhlIGRvY3VtZW50LlxuICBmdW5jdGlvbiBmaW5kUG9zSChkb2MsIHBvcywgZGlyLCB1bml0LCB2aXN1YWxseSkge1xuICAgIHZhciBvbGRQb3MgPSBwb3M7XG4gICAgdmFyIG9yaWdEaXIgPSBkaXI7XG4gICAgdmFyIGxpbmVPYmogPSBnZXRMaW5lKGRvYywgcG9zLmxpbmUpO1xuICAgIHZhciBsaW5lRGlyID0gdmlzdWFsbHkgJiYgZG9jLmRpcmVjdGlvbiA9PSBcInJ0bFwiID8gLWRpciA6IGRpcjtcbiAgICBmdW5jdGlvbiBmaW5kTmV4dExpbmUoKSB7XG4gICAgICB2YXIgbCA9IHBvcy5saW5lICsgbGluZURpcjtcbiAgICAgIGlmIChsIDwgZG9jLmZpcnN0IHx8IGwgPj0gZG9jLmZpcnN0ICsgZG9jLnNpemUpIHsgcmV0dXJuIGZhbHNlIH1cbiAgICAgIHBvcyA9IG5ldyBQb3MobCwgcG9zLmNoLCBwb3Muc3RpY2t5KTtcbiAgICAgIHJldHVybiBsaW5lT2JqID0gZ2V0TGluZShkb2MsIGwpXG4gICAgfVxuICAgIGZ1bmN0aW9uIG1vdmVPbmNlKGJvdW5kVG9MaW5lKSB7XG4gICAgICB2YXIgbmV4dDtcbiAgICAgIGlmICh1bml0ID09IFwiY29kZXBvaW50XCIpIHtcbiAgICAgICAgdmFyIGNoID0gbGluZU9iai50ZXh0LmNoYXJDb2RlQXQocG9zLmNoICsgKGRpciA+IDAgPyAwIDogLTEpKTtcbiAgICAgICAgaWYgKGlzTmFOKGNoKSkge1xuICAgICAgICAgIG5leHQgPSBudWxsO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhciBhc3RyYWwgPSBkaXIgPiAwID8gY2ggPj0gMHhEODAwICYmIGNoIDwgMHhEQzAwIDogY2ggPj0gMHhEQzAwICYmIGNoIDwgMHhERkZGO1xuICAgICAgICAgIG5leHQgPSBuZXcgUG9zKHBvcy5saW5lLCBNYXRoLm1heCgwLCBNYXRoLm1pbihsaW5lT2JqLnRleHQubGVuZ3RoLCBwb3MuY2ggKyBkaXIgKiAoYXN0cmFsID8gMiA6IDEpKSksIC1kaXIpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHZpc3VhbGx5KSB7XG4gICAgICAgIG5leHQgPSBtb3ZlVmlzdWFsbHkoZG9jLmNtLCBsaW5lT2JqLCBwb3MsIGRpcik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuZXh0ID0gbW92ZUxvZ2ljYWxseShsaW5lT2JqLCBwb3MsIGRpcik7XG4gICAgICB9XG4gICAgICBpZiAobmV4dCA9PSBudWxsKSB7XG4gICAgICAgIGlmICghYm91bmRUb0xpbmUgJiYgZmluZE5leHRMaW5lKCkpXG4gICAgICAgICAgeyBwb3MgPSBlbmRPZkxpbmUodmlzdWFsbHksIGRvYy5jbSwgbGluZU9iaiwgcG9zLmxpbmUsIGxpbmVEaXIpOyB9XG4gICAgICAgIGVsc2VcbiAgICAgICAgICB7IHJldHVybiBmYWxzZSB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwb3MgPSBuZXh0O1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG5cbiAgICBpZiAodW5pdCA9PSBcImNoYXJcIiB8fCB1bml0ID09IFwiY29kZXBvaW50XCIpIHtcbiAgICAgIG1vdmVPbmNlKCk7XG4gICAgfSBlbHNlIGlmICh1bml0ID09IFwiY29sdW1uXCIpIHtcbiAgICAgIG1vdmVPbmNlKHRydWUpO1xuICAgIH0gZWxzZSBpZiAodW5pdCA9PSBcIndvcmRcIiB8fCB1bml0ID09IFwiZ3JvdXBcIikge1xuICAgICAgdmFyIHNhd1R5cGUgPSBudWxsLCBncm91cCA9IHVuaXQgPT0gXCJncm91cFwiO1xuICAgICAgdmFyIGhlbHBlciA9IGRvYy5jbSAmJiBkb2MuY20uZ2V0SGVscGVyKHBvcywgXCJ3b3JkQ2hhcnNcIik7XG4gICAgICBmb3IgKHZhciBmaXJzdCA9IHRydWU7OyBmaXJzdCA9IGZhbHNlKSB7XG4gICAgICAgIGlmIChkaXIgPCAwICYmICFtb3ZlT25jZSghZmlyc3QpKSB7IGJyZWFrIH1cbiAgICAgICAgdmFyIGN1ciA9IGxpbmVPYmoudGV4dC5jaGFyQXQocG9zLmNoKSB8fCBcIlxcblwiO1xuICAgICAgICB2YXIgdHlwZSA9IGlzV29yZENoYXIoY3VyLCBoZWxwZXIpID8gXCJ3XCJcbiAgICAgICAgICA6IGdyb3VwICYmIGN1ciA9PSBcIlxcblwiID8gXCJuXCJcbiAgICAgICAgICA6ICFncm91cCB8fCAvXFxzLy50ZXN0KGN1cikgPyBudWxsXG4gICAgICAgICAgOiBcInBcIjtcbiAgICAgICAgaWYgKGdyb3VwICYmICFmaXJzdCAmJiAhdHlwZSkgeyB0eXBlID0gXCJzXCI7IH1cbiAgICAgICAgaWYgKHNhd1R5cGUgJiYgc2F3VHlwZSAhPSB0eXBlKSB7XG4gICAgICAgICAgaWYgKGRpciA8IDApIHtkaXIgPSAxOyBtb3ZlT25jZSgpOyBwb3Muc3RpY2t5ID0gXCJhZnRlclwiO31cbiAgICAgICAgICBicmVha1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHR5cGUpIHsgc2F3VHlwZSA9IHR5cGU7IH1cbiAgICAgICAgaWYgKGRpciA+IDAgJiYgIW1vdmVPbmNlKCFmaXJzdCkpIHsgYnJlYWsgfVxuICAgICAgfVxuICAgIH1cbiAgICB2YXIgcmVzdWx0ID0gc2tpcEF0b21pYyhkb2MsIHBvcywgb2xkUG9zLCBvcmlnRGlyLCB0cnVlKTtcbiAgICBpZiAoZXF1YWxDdXJzb3JQb3Mob2xkUG9zLCByZXN1bHQpKSB7IHJlc3VsdC5oaXRTaWRlID0gdHJ1ZTsgfVxuICAgIHJldHVybiByZXN1bHRcbiAgfVxuXG4gIC8vIEZvciByZWxhdGl2ZSB2ZXJ0aWNhbCBtb3ZlbWVudC4gRGlyIG1heSBiZSAtMSBvciAxLiBVbml0IGNhbiBiZVxuICAvLyBcInBhZ2VcIiBvciBcImxpbmVcIi4gVGhlIHJlc3VsdGluZyBwb3NpdGlvbiB3aWxsIGhhdmUgYSBoaXRTaWRlPXRydWVcbiAgLy8gcHJvcGVydHkgaWYgaXQgcmVhY2hlZCB0aGUgZW5kIG9mIHRoZSBkb2N1bWVudC5cbiAgZnVuY3Rpb24gZmluZFBvc1YoY20sIHBvcywgZGlyLCB1bml0KSB7XG4gICAgdmFyIGRvYyA9IGNtLmRvYywgeCA9IHBvcy5sZWZ0LCB5O1xuICAgIGlmICh1bml0ID09IFwicGFnZVwiKSB7XG4gICAgICB2YXIgcGFnZVNpemUgPSBNYXRoLm1pbihjbS5kaXNwbGF5LndyYXBwZXIuY2xpZW50SGVpZ2h0LCB3aW4oY20pLmlubmVySGVpZ2h0IHx8IGRvYyhjbSkuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCk7XG4gICAgICB2YXIgbW92ZUFtb3VudCA9IE1hdGgubWF4KHBhZ2VTaXplIC0gLjUgKiB0ZXh0SGVpZ2h0KGNtLmRpc3BsYXkpLCAzKTtcbiAgICAgIHkgPSAoZGlyID4gMCA/IHBvcy5ib3R0b20gOiBwb3MudG9wKSArIGRpciAqIG1vdmVBbW91bnQ7XG5cbiAgICB9IGVsc2UgaWYgKHVuaXQgPT0gXCJsaW5lXCIpIHtcbiAgICAgIHkgPSBkaXIgPiAwID8gcG9zLmJvdHRvbSArIDMgOiBwb3MudG9wIC0gMztcbiAgICB9XG4gICAgdmFyIHRhcmdldDtcbiAgICBmb3IgKDs7KSB7XG4gICAgICB0YXJnZXQgPSBjb29yZHNDaGFyKGNtLCB4LCB5KTtcbiAgICAgIGlmICghdGFyZ2V0Lm91dHNpZGUpIHsgYnJlYWsgfVxuICAgICAgaWYgKGRpciA8IDAgPyB5IDw9IDAgOiB5ID49IGRvYy5oZWlnaHQpIHsgdGFyZ2V0LmhpdFNpZGUgPSB0cnVlOyBicmVhayB9XG4gICAgICB5ICs9IGRpciAqIDU7XG4gICAgfVxuICAgIHJldHVybiB0YXJnZXRcbiAgfVxuXG4gIC8vIENPTlRFTlRFRElUQUJMRSBJTlBVVCBTVFlMRVxuXG4gIHZhciBDb250ZW50RWRpdGFibGVJbnB1dCA9IGZ1bmN0aW9uKGNtKSB7XG4gICAgdGhpcy5jbSA9IGNtO1xuICAgIHRoaXMubGFzdEFuY2hvck5vZGUgPSB0aGlzLmxhc3RBbmNob3JPZmZzZXQgPSB0aGlzLmxhc3RGb2N1c05vZGUgPSB0aGlzLmxhc3RGb2N1c09mZnNldCA9IG51bGw7XG4gICAgdGhpcy5wb2xsaW5nID0gbmV3IERlbGF5ZWQoKTtcbiAgICB0aGlzLmNvbXBvc2luZyA9IG51bGw7XG4gICAgdGhpcy5ncmFjZVBlcmlvZCA9IGZhbHNlO1xuICAgIHRoaXMucmVhZERPTVRpbWVvdXQgPSBudWxsO1xuICB9O1xuXG4gIENvbnRlbnRFZGl0YWJsZUlucHV0LnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gKGRpc3BsYXkpIHtcbiAgICAgIHZhciB0aGlzJDEgPSB0aGlzO1xuXG4gICAgdmFyIGlucHV0ID0gdGhpcywgY20gPSBpbnB1dC5jbTtcbiAgICB2YXIgZGl2ID0gaW5wdXQuZGl2ID0gZGlzcGxheS5saW5lRGl2O1xuICAgIGRpdi5jb250ZW50RWRpdGFibGUgPSB0cnVlO1xuICAgIGRpc2FibGVCcm93c2VyTWFnaWMoZGl2LCBjbS5vcHRpb25zLnNwZWxsY2hlY2ssIGNtLm9wdGlvbnMuYXV0b2NvcnJlY3QsIGNtLm9wdGlvbnMuYXV0b2NhcGl0YWxpemUpO1xuXG4gICAgZnVuY3Rpb24gYmVsb25nc1RvSW5wdXQoZSkge1xuICAgICAgZm9yICh2YXIgdCA9IGUudGFyZ2V0OyB0OyB0ID0gdC5wYXJlbnROb2RlKSB7XG4gICAgICAgIGlmICh0ID09IGRpdikgeyByZXR1cm4gdHJ1ZSB9XG4gICAgICAgIGlmICgvXFxiQ29kZU1pcnJvci0oPzpsaW5lKT93aWRnZXRcXGIvLnRlc3QodC5jbGFzc05hbWUpKSB7IGJyZWFrIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cblxuICAgIG9uKGRpdiwgXCJwYXN0ZVwiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgaWYgKCFiZWxvbmdzVG9JbnB1dChlKSB8fCBzaWduYWxET01FdmVudChjbSwgZSkgfHwgaGFuZGxlUGFzdGUoZSwgY20pKSB7IHJldHVybiB9XG4gICAgICAvLyBJRSBkb2Vzbid0IGZpcmUgaW5wdXQgZXZlbnRzLCBzbyB3ZSBzY2hlZHVsZSBhIHJlYWQgZm9yIHRoZSBwYXN0ZWQgY29udGVudCBpbiB0aGlzIHdheVxuICAgICAgaWYgKGllX3ZlcnNpb24gPD0gMTEpIHsgc2V0VGltZW91dChvcGVyYXRpb24oY20sIGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMkMS51cGRhdGVGcm9tRE9NKCk7IH0pLCAyMCk7IH1cbiAgICB9KTtcblxuICAgIG9uKGRpdiwgXCJjb21wb3NpdGlvbnN0YXJ0XCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICB0aGlzJDEuY29tcG9zaW5nID0ge2RhdGE6IGUuZGF0YSwgZG9uZTogZmFsc2V9O1xuICAgIH0pO1xuICAgIG9uKGRpdiwgXCJjb21wb3NpdGlvbnVwZGF0ZVwiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgaWYgKCF0aGlzJDEuY29tcG9zaW5nKSB7IHRoaXMkMS5jb21wb3NpbmcgPSB7ZGF0YTogZS5kYXRhLCBkb25lOiBmYWxzZX07IH1cbiAgICB9KTtcbiAgICBvbihkaXYsIFwiY29tcG9zaXRpb25lbmRcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgIGlmICh0aGlzJDEuY29tcG9zaW5nKSB7XG4gICAgICAgIGlmIChlLmRhdGEgIT0gdGhpcyQxLmNvbXBvc2luZy5kYXRhKSB7IHRoaXMkMS5yZWFkRnJvbURPTVNvb24oKTsgfVxuICAgICAgICB0aGlzJDEuY29tcG9zaW5nLmRvbmUgPSB0cnVlO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgb24oZGl2LCBcInRvdWNoc3RhcnRcIiwgZnVuY3Rpb24gKCkgeyByZXR1cm4gaW5wdXQuZm9yY2VDb21wb3NpdGlvbkVuZCgpOyB9KTtcblxuICAgIG9uKGRpdiwgXCJpbnB1dFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoIXRoaXMkMS5jb21wb3NpbmcpIHsgdGhpcyQxLnJlYWRGcm9tRE9NU29vbigpOyB9XG4gICAgfSk7XG5cbiAgICBmdW5jdGlvbiBvbkNvcHlDdXQoZSkge1xuICAgICAgaWYgKCFiZWxvbmdzVG9JbnB1dChlKSB8fCBzaWduYWxET01FdmVudChjbSwgZSkpIHsgcmV0dXJuIH1cbiAgICAgIGlmIChjbS5zb21ldGhpbmdTZWxlY3RlZCgpKSB7XG4gICAgICAgIHNldExhc3RDb3BpZWQoe2xpbmVXaXNlOiBmYWxzZSwgdGV4dDogY20uZ2V0U2VsZWN0aW9ucygpfSk7XG4gICAgICAgIGlmIChlLnR5cGUgPT0gXCJjdXRcIikgeyBjbS5yZXBsYWNlU2VsZWN0aW9uKFwiXCIsIG51bGwsIFwiY3V0XCIpOyB9XG4gICAgICB9IGVsc2UgaWYgKCFjbS5vcHRpb25zLmxpbmVXaXNlQ29weUN1dCkge1xuICAgICAgICByZXR1cm5cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciByYW5nZXMgPSBjb3B5YWJsZVJhbmdlcyhjbSk7XG4gICAgICAgIHNldExhc3RDb3BpZWQoe2xpbmVXaXNlOiB0cnVlLCB0ZXh0OiByYW5nZXMudGV4dH0pO1xuICAgICAgICBpZiAoZS50eXBlID09IFwiY3V0XCIpIHtcbiAgICAgICAgICBjbS5vcGVyYXRpb24oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgY20uc2V0U2VsZWN0aW9ucyhyYW5nZXMucmFuZ2VzLCAwLCBzZWxfZG9udFNjcm9sbCk7XG4gICAgICAgICAgICBjbS5yZXBsYWNlU2VsZWN0aW9uKFwiXCIsIG51bGwsIFwiY3V0XCIpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoZS5jbGlwYm9hcmREYXRhKSB7XG4gICAgICAgIGUuY2xpcGJvYXJkRGF0YS5jbGVhckRhdGEoKTtcbiAgICAgICAgdmFyIGNvbnRlbnQgPSBsYXN0Q29waWVkLnRleHQuam9pbihcIlxcblwiKTtcbiAgICAgICAgLy8gaU9TIGV4cG9zZXMgdGhlIGNsaXBib2FyZCBBUEksIGJ1dCBzZWVtcyB0byBkaXNjYXJkIGNvbnRlbnQgaW5zZXJ0ZWQgaW50byBpdFxuICAgICAgICBlLmNsaXBib2FyZERhdGEuc2V0RGF0YShcIlRleHRcIiwgY29udGVudCk7XG4gICAgICAgIGlmIChlLmNsaXBib2FyZERhdGEuZ2V0RGF0YShcIlRleHRcIikgPT0gY29udGVudCkge1xuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgLy8gT2xkLWZhc2hpb25lZCBicmllZmx5LWZvY3VzLWEtdGV4dGFyZWEgaGFja1xuICAgICAgdmFyIGtsdWRnZSA9IGhpZGRlblRleHRhcmVhKCksIHRlID0ga2x1ZGdlLmZpcnN0Q2hpbGQ7XG4gICAgICBkaXNhYmxlQnJvd3Nlck1hZ2ljKHRlKTtcbiAgICAgIGNtLmRpc3BsYXkubGluZVNwYWNlLmluc2VydEJlZm9yZShrbHVkZ2UsIGNtLmRpc3BsYXkubGluZVNwYWNlLmZpcnN0Q2hpbGQpO1xuICAgICAgdGUudmFsdWUgPSBsYXN0Q29waWVkLnRleHQuam9pbihcIlxcblwiKTtcbiAgICAgIHZhciBoYWRGb2N1cyA9IGFjdGl2ZUVsdChyb290Tm9kZShkaXYpKTtcbiAgICAgIHNlbGVjdElucHV0KHRlKTtcbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICBjbS5kaXNwbGF5LmxpbmVTcGFjZS5yZW1vdmVDaGlsZChrbHVkZ2UpO1xuICAgICAgICBoYWRGb2N1cy5mb2N1cygpO1xuICAgICAgICBpZiAoaGFkRm9jdXMgPT0gZGl2KSB7IGlucHV0LnNob3dQcmltYXJ5U2VsZWN0aW9uKCk7IH1cbiAgICAgIH0sIDUwKTtcbiAgICB9XG4gICAgb24oZGl2LCBcImNvcHlcIiwgb25Db3B5Q3V0KTtcbiAgICBvbihkaXYsIFwiY3V0XCIsIG9uQ29weUN1dCk7XG4gIH07XG5cbiAgQ29udGVudEVkaXRhYmxlSW5wdXQucHJvdG90eXBlLnNjcmVlblJlYWRlckxhYmVsQ2hhbmdlZCA9IGZ1bmN0aW9uIChsYWJlbCkge1xuICAgIC8vIExhYmVsIGZvciBzY3JlZW5yZWFkZXJzLCBhY2Nlc3NpYmlsaXR5XG4gICAgaWYobGFiZWwpIHtcbiAgICAgIHRoaXMuZGl2LnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsIGxhYmVsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5kaXYucmVtb3ZlQXR0cmlidXRlKCdhcmlhLWxhYmVsJyk7XG4gICAgfVxuICB9O1xuXG4gIENvbnRlbnRFZGl0YWJsZUlucHV0LnByb3RvdHlwZS5wcmVwYXJlU2VsZWN0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciByZXN1bHQgPSBwcmVwYXJlU2VsZWN0aW9uKHRoaXMuY20sIGZhbHNlKTtcbiAgICByZXN1bHQuZm9jdXMgPSBhY3RpdmVFbHQocm9vdE5vZGUodGhpcy5kaXYpKSA9PSB0aGlzLmRpdjtcbiAgICByZXR1cm4gcmVzdWx0XG4gIH07XG5cbiAgQ29udGVudEVkaXRhYmxlSW5wdXQucHJvdG90eXBlLnNob3dTZWxlY3Rpb24gPSBmdW5jdGlvbiAoaW5mbywgdGFrZUZvY3VzKSB7XG4gICAgaWYgKCFpbmZvIHx8ICF0aGlzLmNtLmRpc3BsYXkudmlldy5sZW5ndGgpIHsgcmV0dXJuIH1cbiAgICBpZiAoaW5mby5mb2N1cyB8fCB0YWtlRm9jdXMpIHsgdGhpcy5zaG93UHJpbWFyeVNlbGVjdGlvbigpOyB9XG4gICAgdGhpcy5zaG93TXVsdGlwbGVTZWxlY3Rpb25zKGluZm8pO1xuICB9O1xuXG4gIENvbnRlbnRFZGl0YWJsZUlucHV0LnByb3RvdHlwZS5nZXRTZWxlY3Rpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuY20uZGlzcGxheS53cmFwcGVyLm93bmVyRG9jdW1lbnQuZ2V0U2VsZWN0aW9uKClcbiAgfTtcblxuICBDb250ZW50RWRpdGFibGVJbnB1dC5wcm90b3R5cGUuc2hvd1ByaW1hcnlTZWxlY3Rpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNlbCA9IHRoaXMuZ2V0U2VsZWN0aW9uKCksIGNtID0gdGhpcy5jbSwgcHJpbSA9IGNtLmRvYy5zZWwucHJpbWFyeSgpO1xuICAgIHZhciBmcm9tID0gcHJpbS5mcm9tKCksIHRvID0gcHJpbS50bygpO1xuXG4gICAgaWYgKGNtLmRpc3BsYXkudmlld1RvID09IGNtLmRpc3BsYXkudmlld0Zyb20gfHwgZnJvbS5saW5lID49IGNtLmRpc3BsYXkudmlld1RvIHx8IHRvLmxpbmUgPCBjbS5kaXNwbGF5LnZpZXdGcm9tKSB7XG4gICAgICBzZWwucmVtb3ZlQWxsUmFuZ2VzKCk7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICB2YXIgY3VyQW5jaG9yID0gZG9tVG9Qb3MoY20sIHNlbC5hbmNob3JOb2RlLCBzZWwuYW5jaG9yT2Zmc2V0KTtcbiAgICB2YXIgY3VyRm9jdXMgPSBkb21Ub1BvcyhjbSwgc2VsLmZvY3VzTm9kZSwgc2VsLmZvY3VzT2Zmc2V0KTtcbiAgICBpZiAoY3VyQW5jaG9yICYmICFjdXJBbmNob3IuYmFkICYmIGN1ckZvY3VzICYmICFjdXJGb2N1cy5iYWQgJiZcbiAgICAgICAgY21wKG1pblBvcyhjdXJBbmNob3IsIGN1ckZvY3VzKSwgZnJvbSkgPT0gMCAmJlxuICAgICAgICBjbXAobWF4UG9zKGN1ckFuY2hvciwgY3VyRm9jdXMpLCB0bykgPT0gMClcbiAgICAgIHsgcmV0dXJuIH1cblxuICAgIHZhciB2aWV3ID0gY20uZGlzcGxheS52aWV3O1xuICAgIHZhciBzdGFydCA9IChmcm9tLmxpbmUgPj0gY20uZGlzcGxheS52aWV3RnJvbSAmJiBwb3NUb0RPTShjbSwgZnJvbSkpIHx8XG4gICAgICAgIHtub2RlOiB2aWV3WzBdLm1lYXN1cmUubWFwWzJdLCBvZmZzZXQ6IDB9O1xuICAgIHZhciBlbmQgPSB0by5saW5lIDwgY20uZGlzcGxheS52aWV3VG8gJiYgcG9zVG9ET00oY20sIHRvKTtcbiAgICBpZiAoIWVuZCkge1xuICAgICAgdmFyIG1lYXN1cmUgPSB2aWV3W3ZpZXcubGVuZ3RoIC0gMV0ubWVhc3VyZTtcbiAgICAgIHZhciBtYXAgPSBtZWFzdXJlLm1hcHMgPyBtZWFzdXJlLm1hcHNbbWVhc3VyZS5tYXBzLmxlbmd0aCAtIDFdIDogbWVhc3VyZS5tYXA7XG4gICAgICBlbmQgPSB7bm9kZTogbWFwW21hcC5sZW5ndGggLSAxXSwgb2Zmc2V0OiBtYXBbbWFwLmxlbmd0aCAtIDJdIC0gbWFwW21hcC5sZW5ndGggLSAzXX07XG4gICAgfVxuXG4gICAgaWYgKCFzdGFydCB8fCAhZW5kKSB7XG4gICAgICBzZWwucmVtb3ZlQWxsUmFuZ2VzKCk7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICB2YXIgb2xkID0gc2VsLnJhbmdlQ291bnQgJiYgc2VsLmdldFJhbmdlQXQoMCksIHJuZztcbiAgICB0cnkgeyBybmcgPSByYW5nZShzdGFydC5ub2RlLCBzdGFydC5vZmZzZXQsIGVuZC5vZmZzZXQsIGVuZC5ub2RlKTsgfVxuICAgIGNhdGNoKGUpIHt9IC8vIE91ciBtb2RlbCBvZiB0aGUgRE9NIG1pZ2h0IGJlIG91dGRhdGVkLCBpbiB3aGljaCBjYXNlIHRoZSByYW5nZSB3ZSB0cnkgdG8gc2V0IGNhbiBiZSBpbXBvc3NpYmxlXG4gICAgaWYgKHJuZykge1xuICAgICAgaWYgKCFnZWNrbyAmJiBjbS5zdGF0ZS5mb2N1c2VkKSB7XG4gICAgICAgIHNlbC5jb2xsYXBzZShzdGFydC5ub2RlLCBzdGFydC5vZmZzZXQpO1xuICAgICAgICBpZiAoIXJuZy5jb2xsYXBzZWQpIHtcbiAgICAgICAgICBzZWwucmVtb3ZlQWxsUmFuZ2VzKCk7XG4gICAgICAgICAgc2VsLmFkZFJhbmdlKHJuZyk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNlbC5yZW1vdmVBbGxSYW5nZXMoKTtcbiAgICAgICAgc2VsLmFkZFJhbmdlKHJuZyk7XG4gICAgICB9XG4gICAgICBpZiAob2xkICYmIHNlbC5hbmNob3JOb2RlID09IG51bGwpIHsgc2VsLmFkZFJhbmdlKG9sZCk7IH1cbiAgICAgIGVsc2UgaWYgKGdlY2tvKSB7IHRoaXMuc3RhcnRHcmFjZVBlcmlvZCgpOyB9XG4gICAgfVxuICAgIHRoaXMucmVtZW1iZXJTZWxlY3Rpb24oKTtcbiAgfTtcblxuICBDb250ZW50RWRpdGFibGVJbnB1dC5wcm90b3R5cGUuc3RhcnRHcmFjZVBlcmlvZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciB0aGlzJDEgPSB0aGlzO1xuXG4gICAgY2xlYXJUaW1lb3V0KHRoaXMuZ3JhY2VQZXJpb2QpO1xuICAgIHRoaXMuZ3JhY2VQZXJpb2QgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMkMS5ncmFjZVBlcmlvZCA9IGZhbHNlO1xuICAgICAgaWYgKHRoaXMkMS5zZWxlY3Rpb25DaGFuZ2VkKCkpXG4gICAgICAgIHsgdGhpcyQxLmNtLm9wZXJhdGlvbihmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzJDEuY20uY3VyT3Auc2VsZWN0aW9uQ2hhbmdlZCA9IHRydWU7IH0pOyB9XG4gICAgfSwgMjApO1xuICB9O1xuXG4gIENvbnRlbnRFZGl0YWJsZUlucHV0LnByb3RvdHlwZS5zaG93TXVsdGlwbGVTZWxlY3Rpb25zID0gZnVuY3Rpb24gKGluZm8pIHtcbiAgICByZW1vdmVDaGlsZHJlbkFuZEFkZCh0aGlzLmNtLmRpc3BsYXkuY3Vyc29yRGl2LCBpbmZvLmN1cnNvcnMpO1xuICAgIHJlbW92ZUNoaWxkcmVuQW5kQWRkKHRoaXMuY20uZGlzcGxheS5zZWxlY3Rpb25EaXYsIGluZm8uc2VsZWN0aW9uKTtcbiAgfTtcblxuICBDb250ZW50RWRpdGFibGVJbnB1dC5wcm90b3R5cGUucmVtZW1iZXJTZWxlY3Rpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNlbCA9IHRoaXMuZ2V0U2VsZWN0aW9uKCk7XG4gICAgdGhpcy5sYXN0QW5jaG9yTm9kZSA9IHNlbC5hbmNob3JOb2RlOyB0aGlzLmxhc3RBbmNob3JPZmZzZXQgPSBzZWwuYW5jaG9yT2Zmc2V0O1xuICAgIHRoaXMubGFzdEZvY3VzTm9kZSA9IHNlbC5mb2N1c05vZGU7IHRoaXMubGFzdEZvY3VzT2Zmc2V0ID0gc2VsLmZvY3VzT2Zmc2V0O1xuICB9O1xuXG4gIENvbnRlbnRFZGl0YWJsZUlucHV0LnByb3RvdHlwZS5zZWxlY3Rpb25JbkVkaXRvciA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc2VsID0gdGhpcy5nZXRTZWxlY3Rpb24oKTtcbiAgICBpZiAoIXNlbC5yYW5nZUNvdW50KSB7IHJldHVybiBmYWxzZSB9XG4gICAgdmFyIG5vZGUgPSBzZWwuZ2V0UmFuZ2VBdCgwKS5jb21tb25BbmNlc3RvckNvbnRhaW5lcjtcbiAgICByZXR1cm4gY29udGFpbnModGhpcy5kaXYsIG5vZGUpXG4gIH07XG5cbiAgQ29udGVudEVkaXRhYmxlSW5wdXQucHJvdG90eXBlLmZvY3VzID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICh0aGlzLmNtLm9wdGlvbnMucmVhZE9ubHkgIT0gXCJub2N1cnNvclwiKSB7XG4gICAgICBpZiAoIXRoaXMuc2VsZWN0aW9uSW5FZGl0b3IoKSB8fCBhY3RpdmVFbHQocm9vdE5vZGUodGhpcy5kaXYpKSAhPSB0aGlzLmRpdilcbiAgICAgICAgeyB0aGlzLnNob3dTZWxlY3Rpb24odGhpcy5wcmVwYXJlU2VsZWN0aW9uKCksIHRydWUpOyB9XG4gICAgICB0aGlzLmRpdi5mb2N1cygpO1xuICAgIH1cbiAgfTtcbiAgQ29udGVudEVkaXRhYmxlSW5wdXQucHJvdG90eXBlLmJsdXIgPSBmdW5jdGlvbiAoKSB7IHRoaXMuZGl2LmJsdXIoKTsgfTtcbiAgQ29udGVudEVkaXRhYmxlSW5wdXQucHJvdG90eXBlLmdldEZpZWxkID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy5kaXYgfTtcblxuICBDb250ZW50RWRpdGFibGVJbnB1dC5wcm90b3R5cGUuc3VwcG9ydHNUb3VjaCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRydWUgfTtcblxuICBDb250ZW50RWRpdGFibGVJbnB1dC5wcm90b3R5cGUucmVjZWl2ZWRGb2N1cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciB0aGlzJDEgPSB0aGlzO1xuXG4gICAgdmFyIGlucHV0ID0gdGhpcztcbiAgICBpZiAodGhpcy5zZWxlY3Rpb25JbkVkaXRvcigpKVxuICAgICAgeyBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMkMS5wb2xsU2VsZWN0aW9uKCk7IH0sIDIwKTsgfVxuICAgIGVsc2VcbiAgICAgIHsgcnVuSW5PcCh0aGlzLmNtLCBmdW5jdGlvbiAoKSB7IHJldHVybiBpbnB1dC5jbS5jdXJPcC5zZWxlY3Rpb25DaGFuZ2VkID0gdHJ1ZTsgfSk7IH1cblxuICAgIGZ1bmN0aW9uIHBvbGwoKSB7XG4gICAgICBpZiAoaW5wdXQuY20uc3RhdGUuZm9jdXNlZCkge1xuICAgICAgICBpbnB1dC5wb2xsU2VsZWN0aW9uKCk7XG4gICAgICAgIGlucHV0LnBvbGxpbmcuc2V0KGlucHV0LmNtLm9wdGlvbnMucG9sbEludGVydmFsLCBwb2xsKTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5wb2xsaW5nLnNldCh0aGlzLmNtLm9wdGlvbnMucG9sbEludGVydmFsLCBwb2xsKTtcbiAgfTtcblxuICBDb250ZW50RWRpdGFibGVJbnB1dC5wcm90b3R5cGUuc2VsZWN0aW9uQ2hhbmdlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc2VsID0gdGhpcy5nZXRTZWxlY3Rpb24oKTtcbiAgICByZXR1cm4gc2VsLmFuY2hvck5vZGUgIT0gdGhpcy5sYXN0QW5jaG9yTm9kZSB8fCBzZWwuYW5jaG9yT2Zmc2V0ICE9IHRoaXMubGFzdEFuY2hvck9mZnNldCB8fFxuICAgICAgc2VsLmZvY3VzTm9kZSAhPSB0aGlzLmxhc3RGb2N1c05vZGUgfHwgc2VsLmZvY3VzT2Zmc2V0ICE9IHRoaXMubGFzdEZvY3VzT2Zmc2V0XG4gIH07XG5cbiAgQ29udGVudEVkaXRhYmxlSW5wdXQucHJvdG90eXBlLnBvbGxTZWxlY3Rpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHRoaXMucmVhZERPTVRpbWVvdXQgIT0gbnVsbCB8fCB0aGlzLmdyYWNlUGVyaW9kIHx8ICF0aGlzLnNlbGVjdGlvbkNoYW5nZWQoKSkgeyByZXR1cm4gfVxuICAgIHZhciBzZWwgPSB0aGlzLmdldFNlbGVjdGlvbigpLCBjbSA9IHRoaXMuY207XG4gICAgLy8gT24gQW5kcm9pZCBDaHJvbWUgKHZlcnNpb24gNTYsIGF0IGxlYXN0KSwgYmFja3NwYWNpbmcgaW50byBhblxuICAgIC8vIHVuZWRpdGFibGUgYmxvY2sgZWxlbWVudCB3aWxsIHB1dCB0aGUgY3Vyc29yIGluIHRoYXQgZWxlbWVudCxcbiAgICAvLyBhbmQgdGhlbiwgYmVjYXVzZSBpdCdzIG5vdCBlZGl0YWJsZSwgaGlkZSB0aGUgdmlydHVhbCBrZXlib2FyZC5cbiAgICAvLyBCZWNhdXNlIEFuZHJvaWQgZG9lc24ndCBhbGxvdyB1cyB0byBhY3R1YWxseSBkZXRlY3QgYmFja3NwYWNlXG4gICAgLy8gcHJlc3NlcyBpbiBhIHNhbmUgd2F5LCB0aGlzIGNvZGUgY2hlY2tzIGZvciB3aGVuIHRoYXQgaGFwcGVuc1xuICAgIC8vIGFuZCBzaW11bGF0ZXMgYSBiYWNrc3BhY2UgcHJlc3MgaW4gdGhpcyBjYXNlLlxuICAgIGlmIChhbmRyb2lkICYmIGNocm9tZSAmJiB0aGlzLmNtLmRpc3BsYXkuZ3V0dGVyU3BlY3MubGVuZ3RoICYmIGlzSW5HdXR0ZXIoc2VsLmFuY2hvck5vZGUpKSB7XG4gICAgICB0aGlzLmNtLnRyaWdnZXJPbktleURvd24oe3R5cGU6IFwia2V5ZG93blwiLCBrZXlDb2RlOiA4LCBwcmV2ZW50RGVmYXVsdDogTWF0aC5hYnN9KTtcbiAgICAgIHRoaXMuYmx1cigpO1xuICAgICAgdGhpcy5mb2N1cygpO1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGlmICh0aGlzLmNvbXBvc2luZykgeyByZXR1cm4gfVxuICAgIHRoaXMucmVtZW1iZXJTZWxlY3Rpb24oKTtcbiAgICB2YXIgYW5jaG9yID0gZG9tVG9Qb3MoY20sIHNlbC5hbmNob3JOb2RlLCBzZWwuYW5jaG9yT2Zmc2V0KTtcbiAgICB2YXIgaGVhZCA9IGRvbVRvUG9zKGNtLCBzZWwuZm9jdXNOb2RlLCBzZWwuZm9jdXNPZmZzZXQpO1xuICAgIGlmIChhbmNob3IgJiYgaGVhZCkgeyBydW5Jbk9wKGNtLCBmdW5jdGlvbiAoKSB7XG4gICAgICBzZXRTZWxlY3Rpb24oY20uZG9jLCBzaW1wbGVTZWxlY3Rpb24oYW5jaG9yLCBoZWFkKSwgc2VsX2RvbnRTY3JvbGwpO1xuICAgICAgaWYgKGFuY2hvci5iYWQgfHwgaGVhZC5iYWQpIHsgY20uY3VyT3Auc2VsZWN0aW9uQ2hhbmdlZCA9IHRydWU7IH1cbiAgICB9KTsgfVxuICB9O1xuXG4gIENvbnRlbnRFZGl0YWJsZUlucHV0LnByb3RvdHlwZS5wb2xsQ29udGVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodGhpcy5yZWFkRE9NVGltZW91dCAhPSBudWxsKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5yZWFkRE9NVGltZW91dCk7XG4gICAgICB0aGlzLnJlYWRET01UaW1lb3V0ID0gbnVsbDtcbiAgICB9XG5cbiAgICB2YXIgY20gPSB0aGlzLmNtLCBkaXNwbGF5ID0gY20uZGlzcGxheSwgc2VsID0gY20uZG9jLnNlbC5wcmltYXJ5KCk7XG4gICAgdmFyIGZyb20gPSBzZWwuZnJvbSgpLCB0byA9IHNlbC50bygpO1xuICAgIGlmIChmcm9tLmNoID09IDAgJiYgZnJvbS5saW5lID4gY20uZmlyc3RMaW5lKCkpXG4gICAgICB7IGZyb20gPSBQb3MoZnJvbS5saW5lIC0gMSwgZ2V0TGluZShjbS5kb2MsIGZyb20ubGluZSAtIDEpLmxlbmd0aCk7IH1cbiAgICBpZiAodG8uY2ggPT0gZ2V0TGluZShjbS5kb2MsIHRvLmxpbmUpLnRleHQubGVuZ3RoICYmIHRvLmxpbmUgPCBjbS5sYXN0TGluZSgpKVxuICAgICAgeyB0byA9IFBvcyh0by5saW5lICsgMSwgMCk7IH1cbiAgICBpZiAoZnJvbS5saW5lIDwgZGlzcGxheS52aWV3RnJvbSB8fCB0by5saW5lID4gZGlzcGxheS52aWV3VG8gLSAxKSB7IHJldHVybiBmYWxzZSB9XG5cbiAgICB2YXIgZnJvbUluZGV4LCBmcm9tTGluZSwgZnJvbU5vZGU7XG4gICAgaWYgKGZyb20ubGluZSA9PSBkaXNwbGF5LnZpZXdGcm9tIHx8IChmcm9tSW5kZXggPSBmaW5kVmlld0luZGV4KGNtLCBmcm9tLmxpbmUpKSA9PSAwKSB7XG4gICAgICBmcm9tTGluZSA9IGxpbmVObyhkaXNwbGF5LnZpZXdbMF0ubGluZSk7XG4gICAgICBmcm9tTm9kZSA9IGRpc3BsYXkudmlld1swXS5ub2RlO1xuICAgIH0gZWxzZSB7XG4gICAgICBmcm9tTGluZSA9IGxpbmVObyhkaXNwbGF5LnZpZXdbZnJvbUluZGV4XS5saW5lKTtcbiAgICAgIGZyb21Ob2RlID0gZGlzcGxheS52aWV3W2Zyb21JbmRleCAtIDFdLm5vZGUubmV4dFNpYmxpbmc7XG4gICAgfVxuICAgIHZhciB0b0luZGV4ID0gZmluZFZpZXdJbmRleChjbSwgdG8ubGluZSk7XG4gICAgdmFyIHRvTGluZSwgdG9Ob2RlO1xuICAgIGlmICh0b0luZGV4ID09IGRpc3BsYXkudmlldy5sZW5ndGggLSAxKSB7XG4gICAgICB0b0xpbmUgPSBkaXNwbGF5LnZpZXdUbyAtIDE7XG4gICAgICB0b05vZGUgPSBkaXNwbGF5LmxpbmVEaXYubGFzdENoaWxkO1xuICAgIH0gZWxzZSB7XG4gICAgICB0b0xpbmUgPSBsaW5lTm8oZGlzcGxheS52aWV3W3RvSW5kZXggKyAxXS5saW5lKSAtIDE7XG4gICAgICB0b05vZGUgPSBkaXNwbGF5LnZpZXdbdG9JbmRleCArIDFdLm5vZGUucHJldmlvdXNTaWJsaW5nO1xuICAgIH1cblxuICAgIGlmICghZnJvbU5vZGUpIHsgcmV0dXJuIGZhbHNlIH1cbiAgICB2YXIgbmV3VGV4dCA9IGNtLmRvYy5zcGxpdExpbmVzKGRvbVRleHRCZXR3ZWVuKGNtLCBmcm9tTm9kZSwgdG9Ob2RlLCBmcm9tTGluZSwgdG9MaW5lKSk7XG4gICAgdmFyIG9sZFRleHQgPSBnZXRCZXR3ZWVuKGNtLmRvYywgUG9zKGZyb21MaW5lLCAwKSwgUG9zKHRvTGluZSwgZ2V0TGluZShjbS5kb2MsIHRvTGluZSkudGV4dC5sZW5ndGgpKTtcbiAgICB3aGlsZSAobmV3VGV4dC5sZW5ndGggPiAxICYmIG9sZFRleHQubGVuZ3RoID4gMSkge1xuICAgICAgaWYgKGxzdChuZXdUZXh0KSA9PSBsc3Qob2xkVGV4dCkpIHsgbmV3VGV4dC5wb3AoKTsgb2xkVGV4dC5wb3AoKTsgdG9MaW5lLS07IH1cbiAgICAgIGVsc2UgaWYgKG5ld1RleHRbMF0gPT0gb2xkVGV4dFswXSkgeyBuZXdUZXh0LnNoaWZ0KCk7IG9sZFRleHQuc2hpZnQoKTsgZnJvbUxpbmUrKzsgfVxuICAgICAgZWxzZSB7IGJyZWFrIH1cbiAgICB9XG5cbiAgICB2YXIgY3V0RnJvbnQgPSAwLCBjdXRFbmQgPSAwO1xuICAgIHZhciBuZXdUb3AgPSBuZXdUZXh0WzBdLCBvbGRUb3AgPSBvbGRUZXh0WzBdLCBtYXhDdXRGcm9udCA9IE1hdGgubWluKG5ld1RvcC5sZW5ndGgsIG9sZFRvcC5sZW5ndGgpO1xuICAgIHdoaWxlIChjdXRGcm9udCA8IG1heEN1dEZyb250ICYmIG5ld1RvcC5jaGFyQ29kZUF0KGN1dEZyb250KSA9PSBvbGRUb3AuY2hhckNvZGVBdChjdXRGcm9udCkpXG4gICAgICB7ICsrY3V0RnJvbnQ7IH1cbiAgICB2YXIgbmV3Qm90ID0gbHN0KG5ld1RleHQpLCBvbGRCb3QgPSBsc3Qob2xkVGV4dCk7XG4gICAgdmFyIG1heEN1dEVuZCA9IE1hdGgubWluKG5ld0JvdC5sZW5ndGggLSAobmV3VGV4dC5sZW5ndGggPT0gMSA/IGN1dEZyb250IDogMCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9sZEJvdC5sZW5ndGggLSAob2xkVGV4dC5sZW5ndGggPT0gMSA/IGN1dEZyb250IDogMCkpO1xuICAgIHdoaWxlIChjdXRFbmQgPCBtYXhDdXRFbmQgJiZcbiAgICAgICAgICAgbmV3Qm90LmNoYXJDb2RlQXQobmV3Qm90Lmxlbmd0aCAtIGN1dEVuZCAtIDEpID09IG9sZEJvdC5jaGFyQ29kZUF0KG9sZEJvdC5sZW5ndGggLSBjdXRFbmQgLSAxKSlcbiAgICAgIHsgKytjdXRFbmQ7IH1cbiAgICAvLyBUcnkgdG8gbW92ZSBzdGFydCBvZiBjaGFuZ2UgdG8gc3RhcnQgb2Ygc2VsZWN0aW9uIGlmIGFtYmlndW91c1xuICAgIGlmIChuZXdUZXh0Lmxlbmd0aCA9PSAxICYmIG9sZFRleHQubGVuZ3RoID09IDEgJiYgZnJvbUxpbmUgPT0gZnJvbS5saW5lKSB7XG4gICAgICB3aGlsZSAoY3V0RnJvbnQgJiYgY3V0RnJvbnQgPiBmcm9tLmNoICYmXG4gICAgICAgICAgICAgbmV3Qm90LmNoYXJDb2RlQXQobmV3Qm90Lmxlbmd0aCAtIGN1dEVuZCAtIDEpID09IG9sZEJvdC5jaGFyQ29kZUF0KG9sZEJvdC5sZW5ndGggLSBjdXRFbmQgLSAxKSkge1xuICAgICAgICBjdXRGcm9udC0tO1xuICAgICAgICBjdXRFbmQrKztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBuZXdUZXh0W25ld1RleHQubGVuZ3RoIC0gMV0gPSBuZXdCb3Quc2xpY2UoMCwgbmV3Qm90Lmxlbmd0aCAtIGN1dEVuZCkucmVwbGFjZSgvXlxcdTIwMGIrLywgXCJcIik7XG4gICAgbmV3VGV4dFswXSA9IG5ld1RleHRbMF0uc2xpY2UoY3V0RnJvbnQpLnJlcGxhY2UoL1xcdTIwMGIrJC8sIFwiXCIpO1xuXG4gICAgdmFyIGNoRnJvbSA9IFBvcyhmcm9tTGluZSwgY3V0RnJvbnQpO1xuICAgIHZhciBjaFRvID0gUG9zKHRvTGluZSwgb2xkVGV4dC5sZW5ndGggPyBsc3Qob2xkVGV4dCkubGVuZ3RoIC0gY3V0RW5kIDogMCk7XG4gICAgaWYgKG5ld1RleHQubGVuZ3RoID4gMSB8fCBuZXdUZXh0WzBdIHx8IGNtcChjaEZyb20sIGNoVG8pKSB7XG4gICAgICByZXBsYWNlUmFuZ2UoY20uZG9jLCBuZXdUZXh0LCBjaEZyb20sIGNoVG8sIFwiK2lucHV0XCIpO1xuICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG4gIH07XG5cbiAgQ29udGVudEVkaXRhYmxlSW5wdXQucHJvdG90eXBlLmVuc3VyZVBvbGxlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmZvcmNlQ29tcG9zaXRpb25FbmQoKTtcbiAgfTtcbiAgQ29udGVudEVkaXRhYmxlSW5wdXQucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZm9yY2VDb21wb3NpdGlvbkVuZCgpO1xuICB9O1xuICBDb250ZW50RWRpdGFibGVJbnB1dC5wcm90b3R5cGUuZm9yY2VDb21wb3NpdGlvbkVuZCA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIXRoaXMuY29tcG9zaW5nKSB7IHJldHVybiB9XG4gICAgY2xlYXJUaW1lb3V0KHRoaXMucmVhZERPTVRpbWVvdXQpO1xuICAgIHRoaXMuY29tcG9zaW5nID0gbnVsbDtcbiAgICB0aGlzLnVwZGF0ZUZyb21ET00oKTtcbiAgICB0aGlzLmRpdi5ibHVyKCk7XG4gICAgdGhpcy5kaXYuZm9jdXMoKTtcbiAgfTtcbiAgQ29udGVudEVkaXRhYmxlSW5wdXQucHJvdG90eXBlLnJlYWRGcm9tRE9NU29vbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciB0aGlzJDEgPSB0aGlzO1xuXG4gICAgaWYgKHRoaXMucmVhZERPTVRpbWVvdXQgIT0gbnVsbCkgeyByZXR1cm4gfVxuICAgIHRoaXMucmVhZERPTVRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMkMS5yZWFkRE9NVGltZW91dCA9IG51bGw7XG4gICAgICBpZiAodGhpcyQxLmNvbXBvc2luZykge1xuICAgICAgICBpZiAodGhpcyQxLmNvbXBvc2luZy5kb25lKSB7IHRoaXMkMS5jb21wb3NpbmcgPSBudWxsOyB9XG4gICAgICAgIGVsc2UgeyByZXR1cm4gfVxuICAgICAgfVxuICAgICAgdGhpcyQxLnVwZGF0ZUZyb21ET00oKTtcbiAgICB9LCA4MCk7XG4gIH07XG5cbiAgQ29udGVudEVkaXRhYmxlSW5wdXQucHJvdG90eXBlLnVwZGF0ZUZyb21ET00gPSBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgdGhpcyQxID0gdGhpcztcblxuICAgIGlmICh0aGlzLmNtLmlzUmVhZE9ubHkoKSB8fCAhdGhpcy5wb2xsQ29udGVudCgpKVxuICAgICAgeyBydW5Jbk9wKHRoaXMuY20sIGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJlZ0NoYW5nZSh0aGlzJDEuY20pOyB9KTsgfVxuICB9O1xuXG4gIENvbnRlbnRFZGl0YWJsZUlucHV0LnByb3RvdHlwZS5zZXRVbmVkaXRhYmxlID0gZnVuY3Rpb24gKG5vZGUpIHtcbiAgICBub2RlLmNvbnRlbnRFZGl0YWJsZSA9IFwiZmFsc2VcIjtcbiAgfTtcblxuICBDb250ZW50RWRpdGFibGVJbnB1dC5wcm90b3R5cGUub25LZXlQcmVzcyA9IGZ1bmN0aW9uIChlKSB7XG4gICAgaWYgKGUuY2hhckNvZGUgPT0gMCB8fCB0aGlzLmNvbXBvc2luZykgeyByZXR1cm4gfVxuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBpZiAoIXRoaXMuY20uaXNSZWFkT25seSgpKVxuICAgICAgeyBvcGVyYXRpb24odGhpcy5jbSwgYXBwbHlUZXh0SW5wdXQpKHRoaXMuY20sIFN0cmluZy5mcm9tQ2hhckNvZGUoZS5jaGFyQ29kZSA9PSBudWxsID8gZS5rZXlDb2RlIDogZS5jaGFyQ29kZSksIDApOyB9XG4gIH07XG5cbiAgQ29udGVudEVkaXRhYmxlSW5wdXQucHJvdG90eXBlLnJlYWRPbmx5Q2hhbmdlZCA9IGZ1bmN0aW9uICh2YWwpIHtcbiAgICB0aGlzLmRpdi5jb250ZW50RWRpdGFibGUgPSBTdHJpbmcodmFsICE9IFwibm9jdXJzb3JcIik7XG4gIH07XG5cbiAgQ29udGVudEVkaXRhYmxlSW5wdXQucHJvdG90eXBlLm9uQ29udGV4dE1lbnUgPSBmdW5jdGlvbiAoKSB7fTtcbiAgQ29udGVudEVkaXRhYmxlSW5wdXQucHJvdG90eXBlLnJlc2V0UG9zaXRpb24gPSBmdW5jdGlvbiAoKSB7fTtcblxuICBDb250ZW50RWRpdGFibGVJbnB1dC5wcm90b3R5cGUubmVlZHNDb250ZW50QXR0cmlidXRlID0gdHJ1ZTtcblxuICBmdW5jdGlvbiBwb3NUb0RPTShjbSwgcG9zKSB7XG4gICAgdmFyIHZpZXcgPSBmaW5kVmlld0ZvckxpbmUoY20sIHBvcy5saW5lKTtcbiAgICBpZiAoIXZpZXcgfHwgdmlldy5oaWRkZW4pIHsgcmV0dXJuIG51bGwgfVxuICAgIHZhciBsaW5lID0gZ2V0TGluZShjbS5kb2MsIHBvcy5saW5lKTtcbiAgICB2YXIgaW5mbyA9IG1hcEZyb21MaW5lVmlldyh2aWV3LCBsaW5lLCBwb3MubGluZSk7XG5cbiAgICB2YXIgb3JkZXIgPSBnZXRPcmRlcihsaW5lLCBjbS5kb2MuZGlyZWN0aW9uKSwgc2lkZSA9IFwibGVmdFwiO1xuICAgIGlmIChvcmRlcikge1xuICAgICAgdmFyIHBhcnRQb3MgPSBnZXRCaWRpUGFydEF0KG9yZGVyLCBwb3MuY2gpO1xuICAgICAgc2lkZSA9IHBhcnRQb3MgJSAyID8gXCJyaWdodFwiIDogXCJsZWZ0XCI7XG4gICAgfVxuICAgIHZhciByZXN1bHQgPSBub2RlQW5kT2Zmc2V0SW5MaW5lTWFwKGluZm8ubWFwLCBwb3MuY2gsIHNpZGUpO1xuICAgIHJlc3VsdC5vZmZzZXQgPSByZXN1bHQuY29sbGFwc2UgPT0gXCJyaWdodFwiID8gcmVzdWx0LmVuZCA6IHJlc3VsdC5zdGFydDtcbiAgICByZXR1cm4gcmVzdWx0XG4gIH1cblxuICBmdW5jdGlvbiBpc0luR3V0dGVyKG5vZGUpIHtcbiAgICBmb3IgKHZhciBzY2FuID0gbm9kZTsgc2Nhbjsgc2NhbiA9IHNjYW4ucGFyZW50Tm9kZSlcbiAgICAgIHsgaWYgKC9Db2RlTWlycm9yLWd1dHRlci13cmFwcGVyLy50ZXN0KHNjYW4uY2xhc3NOYW1lKSkgeyByZXR1cm4gdHJ1ZSB9IH1cbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGZ1bmN0aW9uIGJhZFBvcyhwb3MsIGJhZCkgeyBpZiAoYmFkKSB7IHBvcy5iYWQgPSB0cnVlOyB9IHJldHVybiBwb3MgfVxuXG4gIGZ1bmN0aW9uIGRvbVRleHRCZXR3ZWVuKGNtLCBmcm9tLCB0bywgZnJvbUxpbmUsIHRvTGluZSkge1xuICAgIHZhciB0ZXh0ID0gXCJcIiwgY2xvc2luZyA9IGZhbHNlLCBsaW5lU2VwID0gY20uZG9jLmxpbmVTZXBhcmF0b3IoKSwgZXh0cmFMaW5lYnJlYWsgPSBmYWxzZTtcbiAgICBmdW5jdGlvbiByZWNvZ25pemVNYXJrZXIoaWQpIHsgcmV0dXJuIGZ1bmN0aW9uIChtYXJrZXIpIHsgcmV0dXJuIG1hcmtlci5pZCA9PSBpZDsgfSB9XG4gICAgZnVuY3Rpb24gY2xvc2UoKSB7XG4gICAgICBpZiAoY2xvc2luZykge1xuICAgICAgICB0ZXh0ICs9IGxpbmVTZXA7XG4gICAgICAgIGlmIChleHRyYUxpbmVicmVhaykgeyB0ZXh0ICs9IGxpbmVTZXA7IH1cbiAgICAgICAgY2xvc2luZyA9IGV4dHJhTGluZWJyZWFrID0gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGFkZFRleHQoc3RyKSB7XG4gICAgICBpZiAoc3RyKSB7XG4gICAgICAgIGNsb3NlKCk7XG4gICAgICAgIHRleHQgKz0gc3RyO1xuICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiB3YWxrKG5vZGUpIHtcbiAgICAgIGlmIChub2RlLm5vZGVUeXBlID09IDEpIHtcbiAgICAgICAgdmFyIGNtVGV4dCA9IG5vZGUuZ2V0QXR0cmlidXRlKFwiY20tdGV4dFwiKTtcbiAgICAgICAgaWYgKGNtVGV4dCkge1xuICAgICAgICAgIGFkZFRleHQoY21UZXh0KTtcbiAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgICAgICB2YXIgbWFya2VySUQgPSBub2RlLmdldEF0dHJpYnV0ZShcImNtLW1hcmtlclwiKSwgcmFuZ2U7XG4gICAgICAgIGlmIChtYXJrZXJJRCkge1xuICAgICAgICAgIHZhciBmb3VuZCA9IGNtLmZpbmRNYXJrcyhQb3MoZnJvbUxpbmUsIDApLCBQb3ModG9MaW5lICsgMSwgMCksIHJlY29nbml6ZU1hcmtlcigrbWFya2VySUQpKTtcbiAgICAgICAgICBpZiAoZm91bmQubGVuZ3RoICYmIChyYW5nZSA9IGZvdW5kWzBdLmZpbmQoMCkpKVxuICAgICAgICAgICAgeyBhZGRUZXh0KGdldEJldHdlZW4oY20uZG9jLCByYW5nZS5mcm9tLCByYW5nZS50bykuam9pbihsaW5lU2VwKSk7IH1cbiAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgICAgICBpZiAobm9kZS5nZXRBdHRyaWJ1dGUoXCJjb250ZW50ZWRpdGFibGVcIikgPT0gXCJmYWxzZVwiKSB7IHJldHVybiB9XG4gICAgICAgIHZhciBpc0Jsb2NrID0gL14ocHJlfGRpdnxwfGxpfHRhYmxlfGJyKSQvaS50ZXN0KG5vZGUubm9kZU5hbWUpO1xuICAgICAgICBpZiAoIS9eYnIkL2kudGVzdChub2RlLm5vZGVOYW1lKSAmJiBub2RlLnRleHRDb250ZW50Lmxlbmd0aCA9PSAwKSB7IHJldHVybiB9XG5cbiAgICAgICAgaWYgKGlzQmxvY2spIHsgY2xvc2UoKTsgfVxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5vZGUuY2hpbGROb2Rlcy5sZW5ndGg7IGkrKylcbiAgICAgICAgICB7IHdhbGsobm9kZS5jaGlsZE5vZGVzW2ldKTsgfVxuXG4gICAgICAgIGlmICgvXihwcmV8cCkkL2kudGVzdChub2RlLm5vZGVOYW1lKSkgeyBleHRyYUxpbmVicmVhayA9IHRydWU7IH1cbiAgICAgICAgaWYgKGlzQmxvY2spIHsgY2xvc2luZyA9IHRydWU7IH1cbiAgICAgIH0gZWxzZSBpZiAobm9kZS5ub2RlVHlwZSA9PSAzKSB7XG4gICAgICAgIGFkZFRleHQobm9kZS5ub2RlVmFsdWUucmVwbGFjZSgvXFx1MjAwYi9nLCBcIlwiKS5yZXBsYWNlKC9cXHUwMGEwL2csIFwiIFwiKSk7XG4gICAgICB9XG4gICAgfVxuICAgIGZvciAoOzspIHtcbiAgICAgIHdhbGsoZnJvbSk7XG4gICAgICBpZiAoZnJvbSA9PSB0bykgeyBicmVhayB9XG4gICAgICBmcm9tID0gZnJvbS5uZXh0U2libGluZztcbiAgICAgIGV4dHJhTGluZWJyZWFrID0gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0ZXh0XG4gIH1cblxuICBmdW5jdGlvbiBkb21Ub1BvcyhjbSwgbm9kZSwgb2Zmc2V0KSB7XG4gICAgdmFyIGxpbmVOb2RlO1xuICAgIGlmIChub2RlID09IGNtLmRpc3BsYXkubGluZURpdikge1xuICAgICAgbGluZU5vZGUgPSBjbS5kaXNwbGF5LmxpbmVEaXYuY2hpbGROb2Rlc1tvZmZzZXRdO1xuICAgICAgaWYgKCFsaW5lTm9kZSkgeyByZXR1cm4gYmFkUG9zKGNtLmNsaXBQb3MoUG9zKGNtLmRpc3BsYXkudmlld1RvIC0gMSkpLCB0cnVlKSB9XG4gICAgICBub2RlID0gbnVsbDsgb2Zmc2V0ID0gMDtcbiAgICB9IGVsc2Uge1xuICAgICAgZm9yIChsaW5lTm9kZSA9IG5vZGU7OyBsaW5lTm9kZSA9IGxpbmVOb2RlLnBhcmVudE5vZGUpIHtcbiAgICAgICAgaWYgKCFsaW5lTm9kZSB8fCBsaW5lTm9kZSA9PSBjbS5kaXNwbGF5LmxpbmVEaXYpIHsgcmV0dXJuIG51bGwgfVxuICAgICAgICBpZiAobGluZU5vZGUucGFyZW50Tm9kZSAmJiBsaW5lTm9kZS5wYXJlbnROb2RlID09IGNtLmRpc3BsYXkubGluZURpdikgeyBicmVhayB9XG4gICAgICB9XG4gICAgfVxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY20uZGlzcGxheS52aWV3Lmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgbGluZVZpZXcgPSBjbS5kaXNwbGF5LnZpZXdbaV07XG4gICAgICBpZiAobGluZVZpZXcubm9kZSA9PSBsaW5lTm9kZSlcbiAgICAgICAgeyByZXR1cm4gbG9jYXRlTm9kZUluTGluZVZpZXcobGluZVZpZXcsIG5vZGUsIG9mZnNldCkgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGxvY2F0ZU5vZGVJbkxpbmVWaWV3KGxpbmVWaWV3LCBub2RlLCBvZmZzZXQpIHtcbiAgICB2YXIgd3JhcHBlciA9IGxpbmVWaWV3LnRleHQuZmlyc3RDaGlsZCwgYmFkID0gZmFsc2U7XG4gICAgaWYgKCFub2RlIHx8ICFjb250YWlucyh3cmFwcGVyLCBub2RlKSkgeyByZXR1cm4gYmFkUG9zKFBvcyhsaW5lTm8obGluZVZpZXcubGluZSksIDApLCB0cnVlKSB9XG4gICAgaWYgKG5vZGUgPT0gd3JhcHBlcikge1xuICAgICAgYmFkID0gdHJ1ZTtcbiAgICAgIG5vZGUgPSB3cmFwcGVyLmNoaWxkTm9kZXNbb2Zmc2V0XTtcbiAgICAgIG9mZnNldCA9IDA7XG4gICAgICBpZiAoIW5vZGUpIHtcbiAgICAgICAgdmFyIGxpbmUgPSBsaW5lVmlldy5yZXN0ID8gbHN0KGxpbmVWaWV3LnJlc3QpIDogbGluZVZpZXcubGluZTtcbiAgICAgICAgcmV0dXJuIGJhZFBvcyhQb3MobGluZU5vKGxpbmUpLCBsaW5lLnRleHQubGVuZ3RoKSwgYmFkKVxuICAgICAgfVxuICAgIH1cblxuICAgIHZhciB0ZXh0Tm9kZSA9IG5vZGUubm9kZVR5cGUgPT0gMyA/IG5vZGUgOiBudWxsLCB0b3BOb2RlID0gbm9kZTtcbiAgICBpZiAoIXRleHROb2RlICYmIG5vZGUuY2hpbGROb2Rlcy5sZW5ndGggPT0gMSAmJiBub2RlLmZpcnN0Q2hpbGQubm9kZVR5cGUgPT0gMykge1xuICAgICAgdGV4dE5vZGUgPSBub2RlLmZpcnN0Q2hpbGQ7XG4gICAgICBpZiAob2Zmc2V0KSB7IG9mZnNldCA9IHRleHROb2RlLm5vZGVWYWx1ZS5sZW5ndGg7IH1cbiAgICB9XG4gICAgd2hpbGUgKHRvcE5vZGUucGFyZW50Tm9kZSAhPSB3cmFwcGVyKSB7IHRvcE5vZGUgPSB0b3BOb2RlLnBhcmVudE5vZGU7IH1cbiAgICB2YXIgbWVhc3VyZSA9IGxpbmVWaWV3Lm1lYXN1cmUsIG1hcHMgPSBtZWFzdXJlLm1hcHM7XG5cbiAgICBmdW5jdGlvbiBmaW5kKHRleHROb2RlLCB0b3BOb2RlLCBvZmZzZXQpIHtcbiAgICAgIGZvciAodmFyIGkgPSAtMTsgaSA8IChtYXBzID8gbWFwcy5sZW5ndGggOiAwKTsgaSsrKSB7XG4gICAgICAgIHZhciBtYXAgPSBpIDwgMCA/IG1lYXN1cmUubWFwIDogbWFwc1tpXTtcbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBtYXAubGVuZ3RoOyBqICs9IDMpIHtcbiAgICAgICAgICB2YXIgY3VyTm9kZSA9IG1hcFtqICsgMl07XG4gICAgICAgICAgaWYgKGN1ck5vZGUgPT0gdGV4dE5vZGUgfHwgY3VyTm9kZSA9PSB0b3BOb2RlKSB7XG4gICAgICAgICAgICB2YXIgbGluZSA9IGxpbmVObyhpIDwgMCA/IGxpbmVWaWV3LmxpbmUgOiBsaW5lVmlldy5yZXN0W2ldKTtcbiAgICAgICAgICAgIHZhciBjaCA9IG1hcFtqXSArIG9mZnNldDtcbiAgICAgICAgICAgIGlmIChvZmZzZXQgPCAwIHx8IGN1ck5vZGUgIT0gdGV4dE5vZGUpIHsgY2ggPSBtYXBbaiArIChvZmZzZXQgPyAxIDogMCldOyB9XG4gICAgICAgICAgICByZXR1cm4gUG9zKGxpbmUsIGNoKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICB2YXIgZm91bmQgPSBmaW5kKHRleHROb2RlLCB0b3BOb2RlLCBvZmZzZXQpO1xuICAgIGlmIChmb3VuZCkgeyByZXR1cm4gYmFkUG9zKGZvdW5kLCBiYWQpIH1cblxuICAgIC8vIEZJWE1FIHRoaXMgaXMgYWxsIHJlYWxseSBzaGFreS4gbWlnaHQgaGFuZGxlIHRoZSBmZXcgY2FzZXMgaXQgbmVlZHMgdG8gaGFuZGxlLCBidXQgbGlrZWx5IHRvIGNhdXNlIHByb2JsZW1zXG4gICAgZm9yICh2YXIgYWZ0ZXIgPSB0b3BOb2RlLm5leHRTaWJsaW5nLCBkaXN0ID0gdGV4dE5vZGUgPyB0ZXh0Tm9kZS5ub2RlVmFsdWUubGVuZ3RoIC0gb2Zmc2V0IDogMDsgYWZ0ZXI7IGFmdGVyID0gYWZ0ZXIubmV4dFNpYmxpbmcpIHtcbiAgICAgIGZvdW5kID0gZmluZChhZnRlciwgYWZ0ZXIuZmlyc3RDaGlsZCwgMCk7XG4gICAgICBpZiAoZm91bmQpXG4gICAgICAgIHsgcmV0dXJuIGJhZFBvcyhQb3MoZm91bmQubGluZSwgZm91bmQuY2ggLSBkaXN0KSwgYmFkKSB9XG4gICAgICBlbHNlXG4gICAgICAgIHsgZGlzdCArPSBhZnRlci50ZXh0Q29udGVudC5sZW5ndGg7IH1cbiAgICB9XG4gICAgZm9yICh2YXIgYmVmb3JlID0gdG9wTm9kZS5wcmV2aW91c1NpYmxpbmcsIGRpc3QkMSA9IG9mZnNldDsgYmVmb3JlOyBiZWZvcmUgPSBiZWZvcmUucHJldmlvdXNTaWJsaW5nKSB7XG4gICAgICBmb3VuZCA9IGZpbmQoYmVmb3JlLCBiZWZvcmUuZmlyc3RDaGlsZCwgLTEpO1xuICAgICAgaWYgKGZvdW5kKVxuICAgICAgICB7IHJldHVybiBiYWRQb3MoUG9zKGZvdW5kLmxpbmUsIGZvdW5kLmNoICsgZGlzdCQxKSwgYmFkKSB9XG4gICAgICBlbHNlXG4gICAgICAgIHsgZGlzdCQxICs9IGJlZm9yZS50ZXh0Q29udGVudC5sZW5ndGg7IH1cbiAgICB9XG4gIH1cblxuICAvLyBURVhUQVJFQSBJTlBVVCBTVFlMRVxuXG4gIHZhciBUZXh0YXJlYUlucHV0ID0gZnVuY3Rpb24oY20pIHtcbiAgICB0aGlzLmNtID0gY207XG4gICAgLy8gU2VlIGlucHV0LnBvbGwgYW5kIGlucHV0LnJlc2V0XG4gICAgdGhpcy5wcmV2SW5wdXQgPSBcIlwiO1xuXG4gICAgLy8gRmxhZyB0aGF0IGluZGljYXRlcyB3aGV0aGVyIHdlIGV4cGVjdCBpbnB1dCB0byBhcHBlYXIgcmVhbCBzb29uXG4gICAgLy8gbm93IChhZnRlciBzb21lIGV2ZW50IGxpa2UgJ2tleXByZXNzJyBvciAnaW5wdXQnKSBhbmQgYXJlXG4gICAgLy8gcG9sbGluZyBpbnRlbnNpdmVseS5cbiAgICB0aGlzLnBvbGxpbmdGYXN0ID0gZmFsc2U7XG4gICAgLy8gU2VsZi1yZXNldHRpbmcgdGltZW91dCBmb3IgdGhlIHBvbGxlclxuICAgIHRoaXMucG9sbGluZyA9IG5ldyBEZWxheWVkKCk7XG4gICAgLy8gVXNlZCB0byB3b3JrIGFyb3VuZCBJRSBpc3N1ZSB3aXRoIHNlbGVjdGlvbiBiZWluZyBmb3Jnb3R0ZW4gd2hlbiBmb2N1cyBtb3ZlcyBhd2F5IGZyb20gdGV4dGFyZWFcbiAgICB0aGlzLmhhc1NlbGVjdGlvbiA9IGZhbHNlO1xuICAgIHRoaXMuY29tcG9zaW5nID0gbnVsbDtcbiAgICB0aGlzLnJlc2V0dGluZyA9IGZhbHNlO1xuICB9O1xuXG4gIFRleHRhcmVhSW5wdXQucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbiAoZGlzcGxheSkge1xuICAgICAgdmFyIHRoaXMkMSA9IHRoaXM7XG5cbiAgICB2YXIgaW5wdXQgPSB0aGlzLCBjbSA9IHRoaXMuY207XG4gICAgdGhpcy5jcmVhdGVGaWVsZChkaXNwbGF5KTtcbiAgICB2YXIgdGUgPSB0aGlzLnRleHRhcmVhO1xuXG4gICAgZGlzcGxheS53cmFwcGVyLmluc2VydEJlZm9yZSh0aGlzLndyYXBwZXIsIGRpc3BsYXkud3JhcHBlci5maXJzdENoaWxkKTtcblxuICAgIC8vIE5lZWRlZCB0byBoaWRlIGJpZyBibHVlIGJsaW5raW5nIGN1cnNvciBvbiBNb2JpbGUgU2FmYXJpIChkb2Vzbid0IHNlZW0gdG8gd29yayBpbiBpT1MgOCBhbnltb3JlKVxuICAgIGlmIChpb3MpIHsgdGUuc3R5bGUud2lkdGggPSBcIjBweFwiOyB9XG5cbiAgICBvbih0ZSwgXCJpbnB1dFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoaWUgJiYgaWVfdmVyc2lvbiA+PSA5ICYmIHRoaXMkMS5oYXNTZWxlY3Rpb24pIHsgdGhpcyQxLmhhc1NlbGVjdGlvbiA9IG51bGw7IH1cbiAgICAgIGlucHV0LnBvbGwoKTtcbiAgICB9KTtcblxuICAgIG9uKHRlLCBcInBhc3RlXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICBpZiAoc2lnbmFsRE9NRXZlbnQoY20sIGUpIHx8IGhhbmRsZVBhc3RlKGUsIGNtKSkgeyByZXR1cm4gfVxuXG4gICAgICBjbS5zdGF0ZS5wYXN0ZUluY29taW5nID0gK25ldyBEYXRlO1xuICAgICAgaW5wdXQuZmFzdFBvbGwoKTtcbiAgICB9KTtcblxuICAgIGZ1bmN0aW9uIHByZXBhcmVDb3B5Q3V0KGUpIHtcbiAgICAgIGlmIChzaWduYWxET01FdmVudChjbSwgZSkpIHsgcmV0dXJuIH1cbiAgICAgIGlmIChjbS5zb21ldGhpbmdTZWxlY3RlZCgpKSB7XG4gICAgICAgIHNldExhc3RDb3BpZWQoe2xpbmVXaXNlOiBmYWxzZSwgdGV4dDogY20uZ2V0U2VsZWN0aW9ucygpfSk7XG4gICAgICB9IGVsc2UgaWYgKCFjbS5vcHRpb25zLmxpbmVXaXNlQ29weUN1dCkge1xuICAgICAgICByZXR1cm5cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciByYW5nZXMgPSBjb3B5YWJsZVJhbmdlcyhjbSk7XG4gICAgICAgIHNldExhc3RDb3BpZWQoe2xpbmVXaXNlOiB0cnVlLCB0ZXh0OiByYW5nZXMudGV4dH0pO1xuICAgICAgICBpZiAoZS50eXBlID09IFwiY3V0XCIpIHtcbiAgICAgICAgICBjbS5zZXRTZWxlY3Rpb25zKHJhbmdlcy5yYW5nZXMsIG51bGwsIHNlbF9kb250U2Nyb2xsKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpbnB1dC5wcmV2SW5wdXQgPSBcIlwiO1xuICAgICAgICAgIHRlLnZhbHVlID0gcmFuZ2VzLnRleHQuam9pbihcIlxcblwiKTtcbiAgICAgICAgICBzZWxlY3RJbnB1dCh0ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChlLnR5cGUgPT0gXCJjdXRcIikgeyBjbS5zdGF0ZS5jdXRJbmNvbWluZyA9ICtuZXcgRGF0ZTsgfVxuICAgIH1cbiAgICBvbih0ZSwgXCJjdXRcIiwgcHJlcGFyZUNvcHlDdXQpO1xuICAgIG9uKHRlLCBcImNvcHlcIiwgcHJlcGFyZUNvcHlDdXQpO1xuXG4gICAgb24oZGlzcGxheS5zY3JvbGxlciwgXCJwYXN0ZVwiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgaWYgKGV2ZW50SW5XaWRnZXQoZGlzcGxheSwgZSkgfHwgc2lnbmFsRE9NRXZlbnQoY20sIGUpKSB7IHJldHVybiB9XG4gICAgICBpZiAoIXRlLmRpc3BhdGNoRXZlbnQpIHtcbiAgICAgICAgY20uc3RhdGUucGFzdGVJbmNvbWluZyA9ICtuZXcgRGF0ZTtcbiAgICAgICAgaW5wdXQuZm9jdXMoKTtcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIC8vIFBhc3MgdGhlIGBwYXN0ZWAgZXZlbnQgdG8gdGhlIHRleHRhcmVhIHNvIGl0J3MgaGFuZGxlZCBieSBpdHMgZXZlbnQgbGlzdGVuZXIuXG4gICAgICB2YXIgZXZlbnQgPSBuZXcgRXZlbnQoXCJwYXN0ZVwiKTtcbiAgICAgIGV2ZW50LmNsaXBib2FyZERhdGEgPSBlLmNsaXBib2FyZERhdGE7XG4gICAgICB0ZS5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbiAgICB9KTtcblxuICAgIC8vIFByZXZlbnQgbm9ybWFsIHNlbGVjdGlvbiBpbiB0aGUgZWRpdG9yICh3ZSBoYW5kbGUgb3VyIG93bilcbiAgICBvbihkaXNwbGF5LmxpbmVTcGFjZSwgXCJzZWxlY3RzdGFydFwiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgaWYgKCFldmVudEluV2lkZ2V0KGRpc3BsYXksIGUpKSB7IGVfcHJldmVudERlZmF1bHQoZSk7IH1cbiAgICB9KTtcblxuICAgIG9uKHRlLCBcImNvbXBvc2l0aW9uc3RhcnRcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIHN0YXJ0ID0gY20uZ2V0Q3Vyc29yKFwiZnJvbVwiKTtcbiAgICAgIGlmIChpbnB1dC5jb21wb3NpbmcpIHsgaW5wdXQuY29tcG9zaW5nLnJhbmdlLmNsZWFyKCk7IH1cbiAgICAgIGlucHV0LmNvbXBvc2luZyA9IHtcbiAgICAgICAgc3RhcnQ6IHN0YXJ0LFxuICAgICAgICByYW5nZTogY20ubWFya1RleHQoc3RhcnQsIGNtLmdldEN1cnNvcihcInRvXCIpLCB7Y2xhc3NOYW1lOiBcIkNvZGVNaXJyb3ItY29tcG9zaW5nXCJ9KVxuICAgICAgfTtcbiAgICB9KTtcbiAgICBvbih0ZSwgXCJjb21wb3NpdGlvbmVuZFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoaW5wdXQuY29tcG9zaW5nKSB7XG4gICAgICAgIGlucHV0LnBvbGwoKTtcbiAgICAgICAgaW5wdXQuY29tcG9zaW5nLnJhbmdlLmNsZWFyKCk7XG4gICAgICAgIGlucHV0LmNvbXBvc2luZyA9IG51bGw7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG5cbiAgVGV4dGFyZWFJbnB1dC5wcm90b3R5cGUuY3JlYXRlRmllbGQgPSBmdW5jdGlvbiAoX2Rpc3BsYXkpIHtcbiAgICAvLyBXcmFwcyBhbmQgaGlkZXMgaW5wdXQgdGV4dGFyZWFcbiAgICB0aGlzLndyYXBwZXIgPSBoaWRkZW5UZXh0YXJlYSgpO1xuICAgIC8vIFRoZSBzZW1paGlkZGVuIHRleHRhcmVhIHRoYXQgaXMgZm9jdXNlZCB3aGVuIHRoZSBlZGl0b3IgaXNcbiAgICAvLyBmb2N1c2VkLCBhbmQgcmVjZWl2ZXMgaW5wdXQuXG4gICAgdGhpcy50ZXh0YXJlYSA9IHRoaXMud3JhcHBlci5maXJzdENoaWxkO1xuICAgIHZhciBvcHRzID0gdGhpcy5jbS5vcHRpb25zO1xuICAgIGRpc2FibGVCcm93c2VyTWFnaWModGhpcy50ZXh0YXJlYSwgb3B0cy5zcGVsbGNoZWNrLCBvcHRzLmF1dG9jb3JyZWN0LCBvcHRzLmF1dG9jYXBpdGFsaXplKTtcbiAgfTtcblxuICBUZXh0YXJlYUlucHV0LnByb3RvdHlwZS5zY3JlZW5SZWFkZXJMYWJlbENoYW5nZWQgPSBmdW5jdGlvbiAobGFiZWwpIHtcbiAgICAvLyBMYWJlbCBmb3Igc2NyZWVucmVhZGVycywgYWNjZXNzaWJpbGl0eVxuICAgIGlmKGxhYmVsKSB7XG4gICAgICB0aGlzLnRleHRhcmVhLnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsIGxhYmVsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy50ZXh0YXJlYS5yZW1vdmVBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnKTtcbiAgICB9XG4gIH07XG5cbiAgVGV4dGFyZWFJbnB1dC5wcm90b3R5cGUucHJlcGFyZVNlbGVjdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAvLyBSZWRyYXcgdGhlIHNlbGVjdGlvbiBhbmQvb3IgY3Vyc29yXG4gICAgdmFyIGNtID0gdGhpcy5jbSwgZGlzcGxheSA9IGNtLmRpc3BsYXksIGRvYyA9IGNtLmRvYztcbiAgICB2YXIgcmVzdWx0ID0gcHJlcGFyZVNlbGVjdGlvbihjbSk7XG5cbiAgICAvLyBNb3ZlIHRoZSBoaWRkZW4gdGV4dGFyZWEgbmVhciB0aGUgY3Vyc29yIHRvIHByZXZlbnQgc2Nyb2xsaW5nIGFydGlmYWN0c1xuICAgIGlmIChjbS5vcHRpb25zLm1vdmVJbnB1dFdpdGhDdXJzb3IpIHtcbiAgICAgIHZhciBoZWFkUG9zID0gY3Vyc29yQ29vcmRzKGNtLCBkb2Muc2VsLnByaW1hcnkoKS5oZWFkLCBcImRpdlwiKTtcbiAgICAgIHZhciB3cmFwT2ZmID0gZGlzcGxheS53cmFwcGVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLCBsaW5lT2ZmID0gZGlzcGxheS5saW5lRGl2LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgcmVzdWx0LnRlVG9wID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oZGlzcGxheS53cmFwcGVyLmNsaWVudEhlaWdodCAtIDEwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZFBvcy50b3AgKyBsaW5lT2ZmLnRvcCAtIHdyYXBPZmYudG9wKSk7XG4gICAgICByZXN1bHQudGVMZWZ0ID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oZGlzcGxheS53cmFwcGVyLmNsaWVudFdpZHRoIC0gMTAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZFBvcy5sZWZ0ICsgbGluZU9mZi5sZWZ0IC0gd3JhcE9mZi5sZWZ0KSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdFxuICB9O1xuXG4gIFRleHRhcmVhSW5wdXQucHJvdG90eXBlLnNob3dTZWxlY3Rpb24gPSBmdW5jdGlvbiAoZHJhd24pIHtcbiAgICB2YXIgY20gPSB0aGlzLmNtLCBkaXNwbGF5ID0gY20uZGlzcGxheTtcbiAgICByZW1vdmVDaGlsZHJlbkFuZEFkZChkaXNwbGF5LmN1cnNvckRpdiwgZHJhd24uY3Vyc29ycyk7XG4gICAgcmVtb3ZlQ2hpbGRyZW5BbmRBZGQoZGlzcGxheS5zZWxlY3Rpb25EaXYsIGRyYXduLnNlbGVjdGlvbik7XG4gICAgaWYgKGRyYXduLnRlVG9wICE9IG51bGwpIHtcbiAgICAgIHRoaXMud3JhcHBlci5zdHlsZS50b3AgPSBkcmF3bi50ZVRvcCArIFwicHhcIjtcbiAgICAgIHRoaXMud3JhcHBlci5zdHlsZS5sZWZ0ID0gZHJhd24udGVMZWZ0ICsgXCJweFwiO1xuICAgIH1cbiAgfTtcblxuICAvLyBSZXNldCB0aGUgaW5wdXQgdG8gY29ycmVzcG9uZCB0byB0aGUgc2VsZWN0aW9uIChvciB0byBiZSBlbXB0eSxcbiAgLy8gd2hlbiBub3QgdHlwaW5nIGFuZCBub3RoaW5nIGlzIHNlbGVjdGVkKVxuICBUZXh0YXJlYUlucHV0LnByb3RvdHlwZS5yZXNldCA9IGZ1bmN0aW9uICh0eXBpbmcpIHtcbiAgICBpZiAodGhpcy5jb250ZXh0TWVudVBlbmRpbmcgfHwgdGhpcy5jb21wb3NpbmcgJiYgdHlwaW5nKSB7IHJldHVybiB9XG4gICAgdmFyIGNtID0gdGhpcy5jbTtcbiAgICB0aGlzLnJlc2V0dGluZyA9IHRydWU7XG4gICAgaWYgKGNtLnNvbWV0aGluZ1NlbGVjdGVkKCkpIHtcbiAgICAgIHRoaXMucHJldklucHV0ID0gXCJcIjtcbiAgICAgIHZhciBjb250ZW50ID0gY20uZ2V0U2VsZWN0aW9uKCk7XG4gICAgICB0aGlzLnRleHRhcmVhLnZhbHVlID0gY29udGVudDtcbiAgICAgIGlmIChjbS5zdGF0ZS5mb2N1c2VkKSB7IHNlbGVjdElucHV0KHRoaXMudGV4dGFyZWEpOyB9XG4gICAgICBpZiAoaWUgJiYgaWVfdmVyc2lvbiA+PSA5KSB7IHRoaXMuaGFzU2VsZWN0aW9uID0gY29udGVudDsgfVxuICAgIH0gZWxzZSBpZiAoIXR5cGluZykge1xuICAgICAgdGhpcy5wcmV2SW5wdXQgPSB0aGlzLnRleHRhcmVhLnZhbHVlID0gXCJcIjtcbiAgICAgIGlmIChpZSAmJiBpZV92ZXJzaW9uID49IDkpIHsgdGhpcy5oYXNTZWxlY3Rpb24gPSBudWxsOyB9XG4gICAgfVxuICAgIHRoaXMucmVzZXR0aW5nID0gZmFsc2U7XG4gIH07XG5cbiAgVGV4dGFyZWFJbnB1dC5wcm90b3R5cGUuZ2V0RmllbGQgPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLnRleHRhcmVhIH07XG5cbiAgVGV4dGFyZWFJbnB1dC5wcm90b3R5cGUuc3VwcG9ydHNUb3VjaCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGZhbHNlIH07XG5cbiAgVGV4dGFyZWFJbnB1dC5wcm90b3R5cGUuZm9jdXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHRoaXMuY20ub3B0aW9ucy5yZWFkT25seSAhPSBcIm5vY3Vyc29yXCIgJiYgKCFtb2JpbGUgfHwgYWN0aXZlRWx0KHJvb3ROb2RlKHRoaXMudGV4dGFyZWEpKSAhPSB0aGlzLnRleHRhcmVhKSkge1xuICAgICAgdHJ5IHsgdGhpcy50ZXh0YXJlYS5mb2N1cygpOyB9XG4gICAgICBjYXRjaCAoZSkge30gLy8gSUU4IHdpbGwgdGhyb3cgaWYgdGhlIHRleHRhcmVhIGlzIGRpc3BsYXk6IG5vbmUgb3Igbm90IGluIERPTVxuICAgIH1cbiAgfTtcblxuICBUZXh0YXJlYUlucHV0LnByb3RvdHlwZS5ibHVyID0gZnVuY3Rpb24gKCkgeyB0aGlzLnRleHRhcmVhLmJsdXIoKTsgfTtcblxuICBUZXh0YXJlYUlucHV0LnByb3RvdHlwZS5yZXNldFBvc2l0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMud3JhcHBlci5zdHlsZS50b3AgPSB0aGlzLndyYXBwZXIuc3R5bGUubGVmdCA9IDA7XG4gIH07XG5cbiAgVGV4dGFyZWFJbnB1dC5wcm90b3R5cGUucmVjZWl2ZWRGb2N1cyA9IGZ1bmN0aW9uICgpIHsgdGhpcy5zbG93UG9sbCgpOyB9O1xuXG4gIC8vIFBvbGwgZm9yIGlucHV0IGNoYW5nZXMsIHVzaW5nIHRoZSBub3JtYWwgcmF0ZSBvZiBwb2xsaW5nLiBUaGlzXG4gIC8vIHJ1bnMgYXMgbG9uZyBhcyB0aGUgZWRpdG9yIGlzIGZvY3VzZWQuXG4gIFRleHRhcmVhSW5wdXQucHJvdG90eXBlLnNsb3dQb2xsID0gZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIHRoaXMkMSA9IHRoaXM7XG5cbiAgICBpZiAodGhpcy5wb2xsaW5nRmFzdCkgeyByZXR1cm4gfVxuICAgIHRoaXMucG9sbGluZy5zZXQodGhpcy5jbS5vcHRpb25zLnBvbGxJbnRlcnZhbCwgZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcyQxLnBvbGwoKTtcbiAgICAgIGlmICh0aGlzJDEuY20uc3RhdGUuZm9jdXNlZCkgeyB0aGlzJDEuc2xvd1BvbGwoKTsgfVxuICAgIH0pO1xuICB9O1xuXG4gIC8vIFdoZW4gYW4gZXZlbnQgaGFzIGp1c3QgY29tZSBpbiB0aGF0IGlzIGxpa2VseSB0byBhZGQgb3IgY2hhbmdlXG4gIC8vIHNvbWV0aGluZyBpbiB0aGUgaW5wdXQgdGV4dGFyZWEsIHdlIHBvbGwgZmFzdGVyLCB0byBlbnN1cmUgdGhhdFxuICAvLyB0aGUgY2hhbmdlIGFwcGVhcnMgb24gdGhlIHNjcmVlbiBxdWlja2x5LlxuICBUZXh0YXJlYUlucHV0LnByb3RvdHlwZS5mYXN0UG9sbCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgbWlzc2VkID0gZmFsc2UsIGlucHV0ID0gdGhpcztcbiAgICBpbnB1dC5wb2xsaW5nRmFzdCA9IHRydWU7XG4gICAgZnVuY3Rpb24gcCgpIHtcbiAgICAgIHZhciBjaGFuZ2VkID0gaW5wdXQucG9sbCgpO1xuICAgICAgaWYgKCFjaGFuZ2VkICYmICFtaXNzZWQpIHttaXNzZWQgPSB0cnVlOyBpbnB1dC5wb2xsaW5nLnNldCg2MCwgcCk7fVxuICAgICAgZWxzZSB7aW5wdXQucG9sbGluZ0Zhc3QgPSBmYWxzZTsgaW5wdXQuc2xvd1BvbGwoKTt9XG4gICAgfVxuICAgIGlucHV0LnBvbGxpbmcuc2V0KDIwLCBwKTtcbiAgfTtcblxuICAvLyBSZWFkIGlucHV0IGZyb20gdGhlIHRleHRhcmVhLCBhbmQgdXBkYXRlIHRoZSBkb2N1bWVudCB0byBtYXRjaC5cbiAgLy8gV2hlbiBzb21ldGhpbmcgaXMgc2VsZWN0ZWQsIGl0IGlzIHByZXNlbnQgaW4gdGhlIHRleHRhcmVhLCBhbmRcbiAgLy8gc2VsZWN0ZWQgKHVubGVzcyBpdCBpcyBodWdlLCBpbiB3aGljaCBjYXNlIGEgcGxhY2Vob2xkZXIgaXNcbiAgLy8gdXNlZCkuIFdoZW4gbm90aGluZyBpcyBzZWxlY3RlZCwgdGhlIGN1cnNvciBzaXRzIGFmdGVyIHByZXZpb3VzbHlcbiAgLy8gc2VlbiB0ZXh0IChjYW4gYmUgZW1wdHkpLCB3aGljaCBpcyBzdG9yZWQgaW4gcHJldklucHV0ICh3ZSBtdXN0XG4gIC8vIG5vdCByZXNldCB0aGUgdGV4dGFyZWEgd2hlbiB0eXBpbmcsIGJlY2F1c2UgdGhhdCBicmVha3MgSU1FKS5cbiAgVGV4dGFyZWFJbnB1dC5wcm90b3R5cGUucG9sbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciB0aGlzJDEgPSB0aGlzO1xuXG4gICAgdmFyIGNtID0gdGhpcy5jbSwgaW5wdXQgPSB0aGlzLnRleHRhcmVhLCBwcmV2SW5wdXQgPSB0aGlzLnByZXZJbnB1dDtcbiAgICAvLyBTaW5jZSB0aGlzIGlzIGNhbGxlZCBhICpsb3QqLCB0cnkgdG8gYmFpbCBvdXQgYXMgY2hlYXBseSBhc1xuICAgIC8vIHBvc3NpYmxlIHdoZW4gaXQgaXMgY2xlYXIgdGhhdCBub3RoaW5nIGhhcHBlbmVkLiBoYXNTZWxlY3Rpb25cbiAgICAvLyB3aWxsIGJlIHRoZSBjYXNlIHdoZW4gdGhlcmUgaXMgYSBsb3Qgb2YgdGV4dCBpbiB0aGUgdGV4dGFyZWEsXG4gICAgLy8gaW4gd2hpY2ggY2FzZSByZWFkaW5nIGl0cyB2YWx1ZSB3b3VsZCBiZSBleHBlbnNpdmUuXG4gICAgaWYgKHRoaXMuY29udGV4dE1lbnVQZW5kaW5nIHx8IHRoaXMucmVzZXR0aW5nIHx8ICFjbS5zdGF0ZS5mb2N1c2VkIHx8XG4gICAgICAgIChoYXNTZWxlY3Rpb24oaW5wdXQpICYmICFwcmV2SW5wdXQgJiYgIXRoaXMuY29tcG9zaW5nKSB8fFxuICAgICAgICBjbS5pc1JlYWRPbmx5KCkgfHwgY20ub3B0aW9ucy5kaXNhYmxlSW5wdXQgfHwgY20uc3RhdGUua2V5U2VxKVxuICAgICAgeyByZXR1cm4gZmFsc2UgfVxuXG4gICAgdmFyIHRleHQgPSBpbnB1dC52YWx1ZTtcbiAgICAvLyBJZiBub3RoaW5nIGNoYW5nZWQsIGJhaWwuXG4gICAgaWYgKHRleHQgPT0gcHJldklucHV0ICYmICFjbS5zb21ldGhpbmdTZWxlY3RlZCgpKSB7IHJldHVybiBmYWxzZSB9XG4gICAgLy8gV29yayBhcm91bmQgbm9uc2Vuc2ljYWwgc2VsZWN0aW9uIHJlc2V0dGluZyBpbiBJRTkvMTAsIGFuZFxuICAgIC8vIGluZXhwbGljYWJsZSBhcHBlYXJhbmNlIG9mIHByaXZhdGUgYXJlYSB1bmljb2RlIGNoYXJhY3RlcnMgb25cbiAgICAvLyBzb21lIGtleSBjb21ib3MgaW4gTWFjICgjMjY4OSkuXG4gICAgaWYgKGllICYmIGllX3ZlcnNpb24gPj0gOSAmJiB0aGlzLmhhc1NlbGVjdGlvbiA9PT0gdGV4dCB8fFxuICAgICAgICBtYWMgJiYgL1tcXHVmNzAwLVxcdWY3ZmZdLy50ZXN0KHRleHQpKSB7XG4gICAgICBjbS5kaXNwbGF5LmlucHV0LnJlc2V0KCk7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG5cbiAgICBpZiAoY20uZG9jLnNlbCA9PSBjbS5kaXNwbGF5LnNlbEZvckNvbnRleHRNZW51KSB7XG4gICAgICB2YXIgZmlyc3QgPSB0ZXh0LmNoYXJDb2RlQXQoMCk7XG4gICAgICBpZiAoZmlyc3QgPT0gMHgyMDBiICYmICFwcmV2SW5wdXQpIHsgcHJldklucHV0ID0gXCJcXHUyMDBiXCI7IH1cbiAgICAgIGlmIChmaXJzdCA9PSAweDIxZGEpIHsgdGhpcy5yZXNldCgpOyByZXR1cm4gdGhpcy5jbS5leGVjQ29tbWFuZChcInVuZG9cIikgfVxuICAgIH1cbiAgICAvLyBGaW5kIHRoZSBwYXJ0IG9mIHRoZSBpbnB1dCB0aGF0IGlzIGFjdHVhbGx5IG5ld1xuICAgIHZhciBzYW1lID0gMCwgbCA9IE1hdGgubWluKHByZXZJbnB1dC5sZW5ndGgsIHRleHQubGVuZ3RoKTtcbiAgICB3aGlsZSAoc2FtZSA8IGwgJiYgcHJldklucHV0LmNoYXJDb2RlQXQoc2FtZSkgPT0gdGV4dC5jaGFyQ29kZUF0KHNhbWUpKSB7ICsrc2FtZTsgfVxuXG4gICAgcnVuSW5PcChjbSwgZnVuY3Rpb24gKCkge1xuICAgICAgYXBwbHlUZXh0SW5wdXQoY20sIHRleHQuc2xpY2Uoc2FtZSksIHByZXZJbnB1dC5sZW5ndGggLSBzYW1lLFxuICAgICAgICAgICAgICAgICAgICAgbnVsbCwgdGhpcyQxLmNvbXBvc2luZyA/IFwiKmNvbXBvc2VcIiA6IG51bGwpO1xuXG4gICAgICAvLyBEb24ndCBsZWF2ZSBsb25nIHRleHQgaW4gdGhlIHRleHRhcmVhLCBzaW5jZSBpdCBtYWtlcyBmdXJ0aGVyIHBvbGxpbmcgc2xvd1xuICAgICAgaWYgKHRleHQubGVuZ3RoID4gMTAwMCB8fCB0ZXh0LmluZGV4T2YoXCJcXG5cIikgPiAtMSkgeyBpbnB1dC52YWx1ZSA9IHRoaXMkMS5wcmV2SW5wdXQgPSBcIlwiOyB9XG4gICAgICBlbHNlIHsgdGhpcyQxLnByZXZJbnB1dCA9IHRleHQ7IH1cblxuICAgICAgaWYgKHRoaXMkMS5jb21wb3NpbmcpIHtcbiAgICAgICAgdGhpcyQxLmNvbXBvc2luZy5yYW5nZS5jbGVhcigpO1xuICAgICAgICB0aGlzJDEuY29tcG9zaW5nLnJhbmdlID0gY20ubWFya1RleHQodGhpcyQxLmNvbXBvc2luZy5zdGFydCwgY20uZ2V0Q3Vyc29yKFwidG9cIiksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2NsYXNzTmFtZTogXCJDb2RlTWlycm9yLWNvbXBvc2luZ1wifSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHRydWVcbiAgfTtcblxuICBUZXh0YXJlYUlucHV0LnByb3RvdHlwZS5lbnN1cmVQb2xsZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHRoaXMucG9sbGluZ0Zhc3QgJiYgdGhpcy5wb2xsKCkpIHsgdGhpcy5wb2xsaW5nRmFzdCA9IGZhbHNlOyB9XG4gIH07XG5cbiAgVGV4dGFyZWFJbnB1dC5wcm90b3R5cGUub25LZXlQcmVzcyA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoaWUgJiYgaWVfdmVyc2lvbiA+PSA5KSB7IHRoaXMuaGFzU2VsZWN0aW9uID0gbnVsbDsgfVxuICAgIHRoaXMuZmFzdFBvbGwoKTtcbiAgfTtcblxuICBUZXh0YXJlYUlucHV0LnByb3RvdHlwZS5vbkNvbnRleHRNZW51ID0gZnVuY3Rpb24gKGUpIHtcbiAgICB2YXIgaW5wdXQgPSB0aGlzLCBjbSA9IGlucHV0LmNtLCBkaXNwbGF5ID0gY20uZGlzcGxheSwgdGUgPSBpbnB1dC50ZXh0YXJlYTtcbiAgICBpZiAoaW5wdXQuY29udGV4dE1lbnVQZW5kaW5nKSB7IGlucHV0LmNvbnRleHRNZW51UGVuZGluZygpOyB9XG4gICAgdmFyIHBvcyA9IHBvc0Zyb21Nb3VzZShjbSwgZSksIHNjcm9sbFBvcyA9IGRpc3BsYXkuc2Nyb2xsZXIuc2Nyb2xsVG9wO1xuICAgIGlmICghcG9zIHx8IHByZXN0bykgeyByZXR1cm4gfSAvLyBPcGVyYSBpcyBkaWZmaWN1bHQuXG5cbiAgICAvLyBSZXNldCB0aGUgY3VycmVudCB0ZXh0IHNlbGVjdGlvbiBvbmx5IGlmIHRoZSBjbGljayBpcyBkb25lIG91dHNpZGUgb2YgdGhlIHNlbGVjdGlvblxuICAgIC8vIGFuZCAncmVzZXRTZWxlY3Rpb25PbkNvbnRleHRNZW51JyBvcHRpb24gaXMgdHJ1ZS5cbiAgICB2YXIgcmVzZXQgPSBjbS5vcHRpb25zLnJlc2V0U2VsZWN0aW9uT25Db250ZXh0TWVudTtcbiAgICBpZiAocmVzZXQgJiYgY20uZG9jLnNlbC5jb250YWlucyhwb3MpID09IC0xKVxuICAgICAgeyBvcGVyYXRpb24oY20sIHNldFNlbGVjdGlvbikoY20uZG9jLCBzaW1wbGVTZWxlY3Rpb24ocG9zKSwgc2VsX2RvbnRTY3JvbGwpOyB9XG5cbiAgICB2YXIgb2xkQ1NTID0gdGUuc3R5bGUuY3NzVGV4dCwgb2xkV3JhcHBlckNTUyA9IGlucHV0LndyYXBwZXIuc3R5bGUuY3NzVGV4dDtcbiAgICB2YXIgd3JhcHBlckJveCA9IGlucHV0LndyYXBwZXIub2Zmc2V0UGFyZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIGlucHV0LndyYXBwZXIuc3R5bGUuY3NzVGV4dCA9IFwicG9zaXRpb246IHN0YXRpY1wiO1xuICAgIHRlLnN0eWxlLmNzc1RleHQgPSBcInBvc2l0aW9uOiBhYnNvbHV0ZTsgd2lkdGg6IDMwcHg7IGhlaWdodDogMzBweDtcXG4gICAgICB0b3A6IFwiICsgKGUuY2xpZW50WSAtIHdyYXBwZXJCb3gudG9wIC0gNSkgKyBcInB4OyBsZWZ0OiBcIiArIChlLmNsaWVudFggLSB3cmFwcGVyQm94LmxlZnQgLSA1KSArIFwicHg7XFxuICAgICAgei1pbmRleDogMTAwMDsgYmFja2dyb3VuZDogXCIgKyAoaWUgPyBcInJnYmEoMjU1LCAyNTUsIDI1NSwgLjA1KVwiIDogXCJ0cmFuc3BhcmVudFwiKSArIFwiO1xcbiAgICAgIG91dGxpbmU6IG5vbmU7IGJvcmRlci13aWR0aDogMDsgb3V0bGluZTogbm9uZTsgb3ZlcmZsb3c6IGhpZGRlbjsgb3BhY2l0eTogLjA1OyBmaWx0ZXI6IGFscGhhKG9wYWNpdHk9NSk7XCI7XG4gICAgdmFyIG9sZFNjcm9sbFk7XG4gICAgaWYgKHdlYmtpdCkgeyBvbGRTY3JvbGxZID0gdGUub3duZXJEb2N1bWVudC5kZWZhdWx0Vmlldy5zY3JvbGxZOyB9IC8vIFdvcmsgYXJvdW5kIENocm9tZSBpc3N1ZSAoIzI3MTIpXG4gICAgZGlzcGxheS5pbnB1dC5mb2N1cygpO1xuICAgIGlmICh3ZWJraXQpIHsgdGUub3duZXJEb2N1bWVudC5kZWZhdWx0Vmlldy5zY3JvbGxUbyhudWxsLCBvbGRTY3JvbGxZKTsgfVxuICAgIGRpc3BsYXkuaW5wdXQucmVzZXQoKTtcbiAgICAvLyBBZGRzIFwiU2VsZWN0IGFsbFwiIHRvIGNvbnRleHQgbWVudSBpbiBGRlxuICAgIGlmICghY20uc29tZXRoaW5nU2VsZWN0ZWQoKSkgeyB0ZS52YWx1ZSA9IGlucHV0LnByZXZJbnB1dCA9IFwiIFwiOyB9XG4gICAgaW5wdXQuY29udGV4dE1lbnVQZW5kaW5nID0gcmVoaWRlO1xuICAgIGRpc3BsYXkuc2VsRm9yQ29udGV4dE1lbnUgPSBjbS5kb2Muc2VsO1xuICAgIGNsZWFyVGltZW91dChkaXNwbGF5LmRldGVjdGluZ1NlbGVjdEFsbCk7XG5cbiAgICAvLyBTZWxlY3QtYWxsIHdpbGwgYmUgZ3JleWVkIG91dCBpZiB0aGVyZSdzIG5vdGhpbmcgdG8gc2VsZWN0LCBzb1xuICAgIC8vIHRoaXMgYWRkcyBhIHplcm8td2lkdGggc3BhY2Ugc28gdGhhdCB3ZSBjYW4gbGF0ZXIgY2hlY2sgd2hldGhlclxuICAgIC8vIGl0IGdvdCBzZWxlY3RlZC5cbiAgICBmdW5jdGlvbiBwcmVwYXJlU2VsZWN0QWxsSGFjaygpIHtcbiAgICAgIGlmICh0ZS5zZWxlY3Rpb25TdGFydCAhPSBudWxsKSB7XG4gICAgICAgIHZhciBzZWxlY3RlZCA9IGNtLnNvbWV0aGluZ1NlbGVjdGVkKCk7XG4gICAgICAgIHZhciBleHR2YWwgPSBcIlxcdTIwMGJcIiArIChzZWxlY3RlZCA/IHRlLnZhbHVlIDogXCJcIik7XG4gICAgICAgIHRlLnZhbHVlID0gXCJcXHUyMWRhXCI7IC8vIFVzZWQgdG8gY2F0Y2ggY29udGV4dC1tZW51IHVuZG9cbiAgICAgICAgdGUudmFsdWUgPSBleHR2YWw7XG4gICAgICAgIGlucHV0LnByZXZJbnB1dCA9IHNlbGVjdGVkID8gXCJcIiA6IFwiXFx1MjAwYlwiO1xuICAgICAgICB0ZS5zZWxlY3Rpb25TdGFydCA9IDE7IHRlLnNlbGVjdGlvbkVuZCA9IGV4dHZhbC5sZW5ndGg7XG4gICAgICAgIC8vIFJlLXNldCB0aGlzLCBpbiBjYXNlIHNvbWUgb3RoZXIgaGFuZGxlciB0b3VjaGVkIHRoZVxuICAgICAgICAvLyBzZWxlY3Rpb24gaW4gdGhlIG1lYW50aW1lLlxuICAgICAgICBkaXNwbGF5LnNlbEZvckNvbnRleHRNZW51ID0gY20uZG9jLnNlbDtcbiAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gcmVoaWRlKCkge1xuICAgICAgaWYgKGlucHV0LmNvbnRleHRNZW51UGVuZGluZyAhPSByZWhpZGUpIHsgcmV0dXJuIH1cbiAgICAgIGlucHV0LmNvbnRleHRNZW51UGVuZGluZyA9IGZhbHNlO1xuICAgICAgaW5wdXQud3JhcHBlci5zdHlsZS5jc3NUZXh0ID0gb2xkV3JhcHBlckNTUztcbiAgICAgIHRlLnN0eWxlLmNzc1RleHQgPSBvbGRDU1M7XG4gICAgICBpZiAoaWUgJiYgaWVfdmVyc2lvbiA8IDkpIHsgZGlzcGxheS5zY3JvbGxiYXJzLnNldFNjcm9sbFRvcChkaXNwbGF5LnNjcm9sbGVyLnNjcm9sbFRvcCA9IHNjcm9sbFBvcyk7IH1cblxuICAgICAgLy8gVHJ5IHRvIGRldGVjdCB0aGUgdXNlciBjaG9vc2luZyBzZWxlY3QtYWxsXG4gICAgICBpZiAodGUuc2VsZWN0aW9uU3RhcnQgIT0gbnVsbCkge1xuICAgICAgICBpZiAoIWllIHx8IChpZSAmJiBpZV92ZXJzaW9uIDwgOSkpIHsgcHJlcGFyZVNlbGVjdEFsbEhhY2soKTsgfVxuICAgICAgICB2YXIgaSA9IDAsIHBvbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgaWYgKGRpc3BsYXkuc2VsRm9yQ29udGV4dE1lbnUgPT0gY20uZG9jLnNlbCAmJiB0ZS5zZWxlY3Rpb25TdGFydCA9PSAwICYmXG4gICAgICAgICAgICAgIHRlLnNlbGVjdGlvbkVuZCA+IDAgJiYgaW5wdXQucHJldklucHV0ID09IFwiXFx1MjAwYlwiKSB7XG4gICAgICAgICAgICBvcGVyYXRpb24oY20sIHNlbGVjdEFsbCkoY20pO1xuICAgICAgICAgIH0gZWxzZSBpZiAoaSsrIDwgMTApIHtcbiAgICAgICAgICAgIGRpc3BsYXkuZGV0ZWN0aW5nU2VsZWN0QWxsID0gc2V0VGltZW91dChwb2xsLCA1MDApO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBkaXNwbGF5LnNlbEZvckNvbnRleHRNZW51ID0gbnVsbDtcbiAgICAgICAgICAgIGRpc3BsYXkuaW5wdXQucmVzZXQoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGRpc3BsYXkuZGV0ZWN0aW5nU2VsZWN0QWxsID0gc2V0VGltZW91dChwb2xsLCAyMDApO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChpZSAmJiBpZV92ZXJzaW9uID49IDkpIHsgcHJlcGFyZVNlbGVjdEFsbEhhY2soKTsgfVxuICAgIGlmIChjYXB0dXJlUmlnaHRDbGljaykge1xuICAgICAgZV9zdG9wKGUpO1xuICAgICAgdmFyIG1vdXNldXAgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIG9mZih3aW5kb3csIFwibW91c2V1cFwiLCBtb3VzZXVwKTtcbiAgICAgICAgc2V0VGltZW91dChyZWhpZGUsIDIwKTtcbiAgICAgIH07XG4gICAgICBvbih3aW5kb3csIFwibW91c2V1cFwiLCBtb3VzZXVwKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2V0VGltZW91dChyZWhpZGUsIDUwKTtcbiAgICB9XG4gIH07XG5cbiAgVGV4dGFyZWFJbnB1dC5wcm90b3R5cGUucmVhZE9ubHlDaGFuZ2VkID0gZnVuY3Rpb24gKHZhbCkge1xuICAgIGlmICghdmFsKSB7IHRoaXMucmVzZXQoKTsgfVxuICAgIHRoaXMudGV4dGFyZWEuZGlzYWJsZWQgPSB2YWwgPT0gXCJub2N1cnNvclwiO1xuICAgIHRoaXMudGV4dGFyZWEucmVhZE9ubHkgPSAhIXZhbDtcbiAgfTtcblxuICBUZXh0YXJlYUlucHV0LnByb3RvdHlwZS5zZXRVbmVkaXRhYmxlID0gZnVuY3Rpb24gKCkge307XG5cbiAgVGV4dGFyZWFJbnB1dC5wcm90b3R5cGUubmVlZHNDb250ZW50QXR0cmlidXRlID0gZmFsc2U7XG5cbiAgZnVuY3Rpb24gZnJvbVRleHRBcmVhKHRleHRhcmVhLCBvcHRpb25zKSB7XG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgPyBjb3B5T2JqKG9wdGlvbnMpIDoge307XG4gICAgb3B0aW9ucy52YWx1ZSA9IHRleHRhcmVhLnZhbHVlO1xuICAgIGlmICghb3B0aW9ucy50YWJpbmRleCAmJiB0ZXh0YXJlYS50YWJJbmRleClcbiAgICAgIHsgb3B0aW9ucy50YWJpbmRleCA9IHRleHRhcmVhLnRhYkluZGV4OyB9XG4gICAgaWYgKCFvcHRpb25zLnBsYWNlaG9sZGVyICYmIHRleHRhcmVhLnBsYWNlaG9sZGVyKVxuICAgICAgeyBvcHRpb25zLnBsYWNlaG9sZGVyID0gdGV4dGFyZWEucGxhY2Vob2xkZXI7IH1cbiAgICAvLyBTZXQgYXV0b2ZvY3VzIHRvIHRydWUgaWYgdGhpcyB0ZXh0YXJlYSBpcyBmb2N1c2VkLCBvciBpZiBpdCBoYXNcbiAgICAvLyBhdXRvZm9jdXMgYW5kIG5vIG90aGVyIGVsZW1lbnQgaXMgZm9jdXNlZC5cbiAgICBpZiAob3B0aW9ucy5hdXRvZm9jdXMgPT0gbnVsbCkge1xuICAgICAgdmFyIGhhc0ZvY3VzID0gYWN0aXZlRWx0KHJvb3ROb2RlKHRleHRhcmVhKSk7XG4gICAgICBvcHRpb25zLmF1dG9mb2N1cyA9IGhhc0ZvY3VzID09IHRleHRhcmVhIHx8XG4gICAgICAgIHRleHRhcmVhLmdldEF0dHJpYnV0ZShcImF1dG9mb2N1c1wiKSAhPSBudWxsICYmIGhhc0ZvY3VzID09IGRvY3VtZW50LmJvZHk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2F2ZSgpIHt0ZXh0YXJlYS52YWx1ZSA9IGNtLmdldFZhbHVlKCk7fVxuXG4gICAgdmFyIHJlYWxTdWJtaXQ7XG4gICAgaWYgKHRleHRhcmVhLmZvcm0pIHtcbiAgICAgIG9uKHRleHRhcmVhLmZvcm0sIFwic3VibWl0XCIsIHNhdmUpO1xuICAgICAgLy8gRGVwbG9yYWJsZSBoYWNrIHRvIG1ha2UgdGhlIHN1Ym1pdCBtZXRob2QgZG8gdGhlIHJpZ2h0IHRoaW5nLlxuICAgICAgaWYgKCFvcHRpb25zLmxlYXZlU3VibWl0TWV0aG9kQWxvbmUpIHtcbiAgICAgICAgdmFyIGZvcm0gPSB0ZXh0YXJlYS5mb3JtO1xuICAgICAgICByZWFsU3VibWl0ID0gZm9ybS5zdWJtaXQ7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgdmFyIHdyYXBwZWRTdWJtaXQgPSBmb3JtLnN1Ym1pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHNhdmUoKTtcbiAgICAgICAgICAgIGZvcm0uc3VibWl0ID0gcmVhbFN1Ym1pdDtcbiAgICAgICAgICAgIGZvcm0uc3VibWl0KCk7XG4gICAgICAgICAgICBmb3JtLnN1Ym1pdCA9IHdyYXBwZWRTdWJtaXQ7XG4gICAgICAgICAgfTtcbiAgICAgICAgfSBjYXRjaChlKSB7fVxuICAgICAgfVxuICAgIH1cblxuICAgIG9wdGlvbnMuZmluaXNoSW5pdCA9IGZ1bmN0aW9uIChjbSkge1xuICAgICAgY20uc2F2ZSA9IHNhdmU7XG4gICAgICBjbS5nZXRUZXh0QXJlYSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRleHRhcmVhOyB9O1xuICAgICAgY20udG9UZXh0QXJlYSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY20udG9UZXh0QXJlYSA9IGlzTmFOOyAvLyBQcmV2ZW50IHRoaXMgZnJvbSBiZWluZyByYW4gdHdpY2VcbiAgICAgICAgc2F2ZSgpO1xuICAgICAgICB0ZXh0YXJlYS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGNtLmdldFdyYXBwZXJFbGVtZW50KCkpO1xuICAgICAgICB0ZXh0YXJlYS5zdHlsZS5kaXNwbGF5ID0gXCJcIjtcbiAgICAgICAgaWYgKHRleHRhcmVhLmZvcm0pIHtcbiAgICAgICAgICBvZmYodGV4dGFyZWEuZm9ybSwgXCJzdWJtaXRcIiwgc2F2ZSk7XG4gICAgICAgICAgaWYgKCFvcHRpb25zLmxlYXZlU3VibWl0TWV0aG9kQWxvbmUgJiYgdHlwZW9mIHRleHRhcmVhLmZvcm0uc3VibWl0ID09IFwiZnVuY3Rpb25cIilcbiAgICAgICAgICAgIHsgdGV4dGFyZWEuZm9ybS5zdWJtaXQgPSByZWFsU3VibWl0OyB9XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfTtcblxuICAgIHRleHRhcmVhLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICB2YXIgY20gPSBDb2RlTWlycm9yKGZ1bmN0aW9uIChub2RlKSB7IHJldHVybiB0ZXh0YXJlYS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShub2RlLCB0ZXh0YXJlYS5uZXh0U2libGluZyk7IH0sXG4gICAgICBvcHRpb25zKTtcbiAgICByZXR1cm4gY21cbiAgfVxuXG4gIGZ1bmN0aW9uIGFkZExlZ2FjeVByb3BzKENvZGVNaXJyb3IpIHtcbiAgICBDb2RlTWlycm9yLm9mZiA9IG9mZjtcbiAgICBDb2RlTWlycm9yLm9uID0gb247XG4gICAgQ29kZU1pcnJvci53aGVlbEV2ZW50UGl4ZWxzID0gd2hlZWxFdmVudFBpeGVscztcbiAgICBDb2RlTWlycm9yLkRvYyA9IERvYztcbiAgICBDb2RlTWlycm9yLnNwbGl0TGluZXMgPSBzcGxpdExpbmVzQXV0bztcbiAgICBDb2RlTWlycm9yLmNvdW50Q29sdW1uID0gY291bnRDb2x1bW47XG4gICAgQ29kZU1pcnJvci5maW5kQ29sdW1uID0gZmluZENvbHVtbjtcbiAgICBDb2RlTWlycm9yLmlzV29yZENoYXIgPSBpc1dvcmRDaGFyQmFzaWM7XG4gICAgQ29kZU1pcnJvci5QYXNzID0gUGFzcztcbiAgICBDb2RlTWlycm9yLnNpZ25hbCA9IHNpZ25hbDtcbiAgICBDb2RlTWlycm9yLkxpbmUgPSBMaW5lO1xuICAgIENvZGVNaXJyb3IuY2hhbmdlRW5kID0gY2hhbmdlRW5kO1xuICAgIENvZGVNaXJyb3Iuc2Nyb2xsYmFyTW9kZWwgPSBzY3JvbGxiYXJNb2RlbDtcbiAgICBDb2RlTWlycm9yLlBvcyA9IFBvcztcbiAgICBDb2RlTWlycm9yLmNtcFBvcyA9IGNtcDtcbiAgICBDb2RlTWlycm9yLm1vZGVzID0gbW9kZXM7XG4gICAgQ29kZU1pcnJvci5taW1lTW9kZXMgPSBtaW1lTW9kZXM7XG4gICAgQ29kZU1pcnJvci5yZXNvbHZlTW9kZSA9IHJlc29sdmVNb2RlO1xuICAgIENvZGVNaXJyb3IuZ2V0TW9kZSA9IGdldE1vZGU7XG4gICAgQ29kZU1pcnJvci5tb2RlRXh0ZW5zaW9ucyA9IG1vZGVFeHRlbnNpb25zO1xuICAgIENvZGVNaXJyb3IuZXh0ZW5kTW9kZSA9IGV4dGVuZE1vZGU7XG4gICAgQ29kZU1pcnJvci5jb3B5U3RhdGUgPSBjb3B5U3RhdGU7XG4gICAgQ29kZU1pcnJvci5zdGFydFN0YXRlID0gc3RhcnRTdGF0ZTtcbiAgICBDb2RlTWlycm9yLmlubmVyTW9kZSA9IGlubmVyTW9kZTtcbiAgICBDb2RlTWlycm9yLmNvbW1hbmRzID0gY29tbWFuZHM7XG4gICAgQ29kZU1pcnJvci5rZXlNYXAgPSBrZXlNYXA7XG4gICAgQ29kZU1pcnJvci5rZXlOYW1lID0ga2V5TmFtZTtcbiAgICBDb2RlTWlycm9yLmlzTW9kaWZpZXJLZXkgPSBpc01vZGlmaWVyS2V5O1xuICAgIENvZGVNaXJyb3IubG9va3VwS2V5ID0gbG9va3VwS2V5O1xuICAgIENvZGVNaXJyb3Iubm9ybWFsaXplS2V5TWFwID0gbm9ybWFsaXplS2V5TWFwO1xuICAgIENvZGVNaXJyb3IuU3RyaW5nU3RyZWFtID0gU3RyaW5nU3RyZWFtO1xuICAgIENvZGVNaXJyb3IuU2hhcmVkVGV4dE1hcmtlciA9IFNoYXJlZFRleHRNYXJrZXI7XG4gICAgQ29kZU1pcnJvci5UZXh0TWFya2VyID0gVGV4dE1hcmtlcjtcbiAgICBDb2RlTWlycm9yLkxpbmVXaWRnZXQgPSBMaW5lV2lkZ2V0O1xuICAgIENvZGVNaXJyb3IuZV9wcmV2ZW50RGVmYXVsdCA9IGVfcHJldmVudERlZmF1bHQ7XG4gICAgQ29kZU1pcnJvci5lX3N0b3BQcm9wYWdhdGlvbiA9IGVfc3RvcFByb3BhZ2F0aW9uO1xuICAgIENvZGVNaXJyb3IuZV9zdG9wID0gZV9zdG9wO1xuICAgIENvZGVNaXJyb3IuYWRkQ2xhc3MgPSBhZGRDbGFzcztcbiAgICBDb2RlTWlycm9yLmNvbnRhaW5zID0gY29udGFpbnM7XG4gICAgQ29kZU1pcnJvci5ybUNsYXNzID0gcm1DbGFzcztcbiAgICBDb2RlTWlycm9yLmtleU5hbWVzID0ga2V5TmFtZXM7XG4gIH1cblxuICAvLyBFRElUT1IgQ09OU1RSVUNUT1JcblxuICBkZWZpbmVPcHRpb25zKENvZGVNaXJyb3IpO1xuXG4gIGFkZEVkaXRvck1ldGhvZHMoQ29kZU1pcnJvcik7XG5cbiAgLy8gU2V0IHVwIG1ldGhvZHMgb24gQ29kZU1pcnJvcidzIHByb3RvdHlwZSB0byByZWRpcmVjdCB0byB0aGUgZWRpdG9yJ3MgZG9jdW1lbnQuXG4gIHZhciBkb250RGVsZWdhdGUgPSBcIml0ZXIgaW5zZXJ0IHJlbW92ZSBjb3B5IGdldEVkaXRvciBjb25zdHJ1Y3RvclwiLnNwbGl0KFwiIFwiKTtcbiAgZm9yICh2YXIgcHJvcCBpbiBEb2MucHJvdG90eXBlKSB7IGlmIChEb2MucHJvdG90eXBlLmhhc093blByb3BlcnR5KHByb3ApICYmIGluZGV4T2YoZG9udERlbGVnYXRlLCBwcm9wKSA8IDApXG4gICAgeyBDb2RlTWlycm9yLnByb3RvdHlwZVtwcm9wXSA9IChmdW5jdGlvbihtZXRob2QpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbigpIHtyZXR1cm4gbWV0aG9kLmFwcGx5KHRoaXMuZG9jLCBhcmd1bWVudHMpfVxuICAgIH0pKERvYy5wcm90b3R5cGVbcHJvcF0pOyB9IH1cblxuICBldmVudE1peGluKERvYyk7XG4gIENvZGVNaXJyb3IuaW5wdXRTdHlsZXMgPSB7XCJ0ZXh0YXJlYVwiOiBUZXh0YXJlYUlucHV0LCBcImNvbnRlbnRlZGl0YWJsZVwiOiBDb250ZW50RWRpdGFibGVJbnB1dH07XG5cbiAgLy8gRXh0cmEgYXJndW1lbnRzIGFyZSBzdG9yZWQgYXMgdGhlIG1vZGUncyBkZXBlbmRlbmNpZXMsIHdoaWNoIGlzXG4gIC8vIHVzZWQgYnkgKGxlZ2FjeSkgbWVjaGFuaXNtcyBsaWtlIGxvYWRtb2RlLmpzIHRvIGF1dG9tYXRpY2FsbHlcbiAgLy8gbG9hZCBhIG1vZGUuIChQcmVmZXJyZWQgbWVjaGFuaXNtIGlzIHRoZSByZXF1aXJlL2RlZmluZSBjYWxscy4pXG4gIENvZGVNaXJyb3IuZGVmaW5lTW9kZSA9IGZ1bmN0aW9uKG5hbWUvKiwgbW9kZSwg4oCmKi8pIHtcbiAgICBpZiAoIUNvZGVNaXJyb3IuZGVmYXVsdHMubW9kZSAmJiBuYW1lICE9IFwibnVsbFwiKSB7IENvZGVNaXJyb3IuZGVmYXVsdHMubW9kZSA9IG5hbWU7IH1cbiAgICBkZWZpbmVNb2RlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH07XG5cbiAgQ29kZU1pcnJvci5kZWZpbmVNSU1FID0gZGVmaW5lTUlNRTtcblxuICAvLyBNaW5pbWFsIGRlZmF1bHQgbW9kZS5cbiAgQ29kZU1pcnJvci5kZWZpbmVNb2RlKFwibnVsbFwiLCBmdW5jdGlvbiAoKSB7IHJldHVybiAoe3Rva2VuOiBmdW5jdGlvbiAoc3RyZWFtKSB7IHJldHVybiBzdHJlYW0uc2tpcFRvRW5kKCk7IH19KTsgfSk7XG4gIENvZGVNaXJyb3IuZGVmaW5lTUlNRShcInRleHQvcGxhaW5cIiwgXCJudWxsXCIpO1xuXG4gIC8vIEVYVEVOU0lPTlNcblxuICBDb2RlTWlycm9yLmRlZmluZUV4dGVuc2lvbiA9IGZ1bmN0aW9uIChuYW1lLCBmdW5jKSB7XG4gICAgQ29kZU1pcnJvci5wcm90b3R5cGVbbmFtZV0gPSBmdW5jO1xuICB9O1xuICBDb2RlTWlycm9yLmRlZmluZURvY0V4dGVuc2lvbiA9IGZ1bmN0aW9uIChuYW1lLCBmdW5jKSB7XG4gICAgRG9jLnByb3RvdHlwZVtuYW1lXSA9IGZ1bmM7XG4gIH07XG5cbiAgQ29kZU1pcnJvci5mcm9tVGV4dEFyZWEgPSBmcm9tVGV4dEFyZWE7XG5cbiAgYWRkTGVnYWN5UHJvcHMoQ29kZU1pcnJvcik7XG5cbiAgQ29kZU1pcnJvci52ZXJzaW9uID0gXCI1LjY1LjIwXCI7XG5cbiAgcmV0dXJuIENvZGVNaXJyb3I7XG5cbn0pKSk7XG4iXSwibmFtZXMiOlsidGhpcyIsImkiLCJyb290Tm9kZSIsImRvYyIsInByb3AiLCJlbHQiLCJpJDEiLCJpJDIiLCJtYXAiLCJyYW5nZSIsIm8iLCJsaW5lTm8iLCJlc3RpbWF0ZUhlaWdodCIsImNoIiwicGFydFBvcyIsIndpZGdldEhlaWdodCIsInBhcnQiLCJsdHIiLCJvbiIsInNjcmVlbiIsIm5vZGUiLCJ0ZXh0IiwidGhpcyQxIiwibGluZSIsIm9mZiIsImRpciIsIndyYXBwZWRMaW5lRXh0ZW50IiwibW92ZUluU3RvcmFnZU9yZGVyIiwicmFuZ2VzIiwiQ29kZU1pcnJvciIsIm9wdGlvbkhhbmRsZXJzIiwidGV4dE5vZGUiLCJ0b3BOb2RlIiwib2Zmc2V0IiwiY20iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFTQSxLQUFDLFNBQVUsUUFBUSxTQUFTO0FBQ3FDLGFBQUEsVUFBaUI7SUFHbEYsR0FBRUEsYUFBTyxXQUFZO0FBSW5CLFVBQUksWUFBWSxVQUFVO0FBQzFCLFVBQUksV0FBVyxVQUFVO0FBRXpCLFVBQUksUUFBUSxhQUFhLEtBQUssU0FBUztBQUN2QyxVQUFJLFlBQVksVUFBVSxLQUFLLFNBQVM7QUFDeEMsVUFBSSxVQUFVLHdDQUF3QyxLQUFLLFNBQVM7QUFDcEUsVUFBSSxPQUFPLGNBQWMsS0FBSyxTQUFTO0FBQ3ZDLFVBQUksS0FBSyxhQUFhLFdBQVc7QUFDakMsVUFBSSxhQUFhLE9BQU8sWUFBWSxTQUFTLGdCQUFnQixJQUFJLEVBQUUsUUFBUSxTQUFTLENBQUM7QUFDckYsVUFBSSxTQUFTLENBQUMsUUFBUSxXQUFXLEtBQUssU0FBUztBQUMvQyxVQUFJLFdBQVcsVUFBVSxlQUFlLEtBQUssU0FBUztBQUN0RCxVQUFJLFNBQVMsQ0FBQyxRQUFRLGdCQUFnQixLQUFLLFNBQVM7QUFDcEQsVUFBSSxpQkFBaUIsVUFBVSxDQUFDLE9BQU8sQ0FBQztBQUN4QyxVQUFJLFNBQVMsVUFBVSxLQUFLLFNBQVM7QUFDckMsVUFBSSxTQUFTLGlCQUFpQixLQUFLLFVBQVUsTUFBTTtBQUNuRCxVQUFJLHFCQUFxQiwrQkFBK0IsS0FBSyxTQUFTO0FBQ3RFLFVBQUksVUFBVSxZQUFZLEtBQUssU0FBUztBQUV4QyxVQUFJLE1BQU0sV0FBVyxjQUFjLEtBQUssU0FBUyxLQUFLLFVBQVUsaUJBQWlCO0FBQ2pGLFVBQUksVUFBVSxVQUFVLEtBQUssU0FBUztBQUV0QyxVQUFJLFNBQVMsT0FBTyxXQUFXLG1EQUFtRCxLQUFLLFNBQVM7QUFDaEcsVUFBSSxNQUFNLE9BQU8sTUFBTSxLQUFLLFFBQVE7QUFDcEMsVUFBSSxXQUFXLFdBQVcsS0FBSyxTQUFTO0FBQ3hDLFVBQUksVUFBVSxPQUFPLEtBQUssUUFBUTtBQUVsQyxVQUFJLGlCQUFpQixVQUFVLFVBQVUsTUFBTSxxQkFBcUI7QUFDcEUsVUFBSSxnQkFBZ0I7QUFBRSx5QkFBaUIsT0FBTyxlQUFlLENBQUMsQ0FBQztBQUFBLE1BQUU7QUFDakUsVUFBSSxrQkFBa0Isa0JBQWtCLElBQUk7QUFBRSxpQkFBUztBQUFPLGlCQUFTO0FBQUEsTUFBSztBQUU1RSxVQUFJLGNBQWMsUUFBUSxZQUFZLFdBQVcsa0JBQWtCLFFBQVEsaUJBQWlCO0FBQzVGLFVBQUksb0JBQW9CLFNBQVUsTUFBTSxjQUFjO0FBRXRELGVBQVMsVUFBVSxLQUFLO0FBQUUsZUFBTyxJQUFJLE9BQU8sWUFBWSxNQUFNLGVBQWU7QUFBQSxNQUFDO0FBRTlFLFVBQUksVUFBVSxTQUFTLE1BQU0sS0FBSztBQUNoQyxZQUFJLFVBQVUsS0FBSztBQUNuQixZQUFJLFFBQVEsVUFBVSxHQUFHLEVBQUUsS0FBSyxPQUFPO0FBQ3ZDLFlBQUksT0FBTztBQUNULGNBQUksUUFBUSxRQUFRLE1BQU0sTUFBTSxRQUFRLE1BQU0sQ0FBQyxFQUFFLE1BQU07QUFDdkQsZUFBSyxZQUFZLFFBQVEsTUFBTSxHQUFHLE1BQU0sS0FBSyxLQUFLLFFBQVEsTUFBTSxDQUFDLElBQUksUUFBUTtBQUFBLFFBQ25GO0FBQUEsTUFDQTtBQUVFLGVBQVMsZUFBZSxHQUFHO0FBQ3pCLGlCQUFTLFFBQVEsRUFBRSxXQUFXLFFBQVEsUUFBUSxHQUFHLEVBQUUsT0FDakQ7QUFBRSxZQUFFLFlBQVksRUFBRSxVQUFVO0FBQUEsUUFBRTtBQUNoQyxlQUFPO0FBQUEsTUFDWDtBQUVFLGVBQVMscUJBQXFCLFFBQVEsR0FBRztBQUN2QyxlQUFPLGVBQWUsTUFBTSxFQUFFLFlBQVksQ0FBQztBQUFBLE1BQy9DO0FBRUUsZUFBUyxJQUFJLEtBQUssU0FBUyxXQUFXLE9BQU87QUFDM0MsWUFBSSxJQUFJLFNBQVMsY0FBYyxHQUFHO0FBQ2xDLFlBQUksV0FBVztBQUFFLFlBQUUsWUFBWTtBQUFBLFFBQVU7QUFDekMsWUFBSSxPQUFPO0FBQUUsWUFBRSxNQUFNLFVBQVU7QUFBQSxRQUFNO0FBQ3JDLFlBQUksT0FBTyxXQUFXLFVBQVU7QUFBRSxZQUFFLFlBQVksU0FBUyxlQUFlLE9BQU8sQ0FBQztBQUFBLFFBQUUsV0FDekUsU0FBUztBQUFFLG1CQUFTQyxLQUFJLEdBQUdBLEtBQUksUUFBUSxRQUFRLEVBQUVBLElBQUc7QUFBRSxjQUFFLFlBQVksUUFBUUEsRUFBQyxDQUFDO0FBQUEsVUFBRTtBQUFBLFFBQUU7QUFDM0YsZUFBTztBQUFBLE1BQ1g7QUFFRSxlQUFTLEtBQUssS0FBSyxTQUFTLFdBQVcsT0FBTztBQUM1QyxZQUFJLElBQUksSUFBSSxLQUFLLFNBQVMsV0FBVyxLQUFLO0FBQzFDLFVBQUUsYUFBYSxRQUFRLGNBQWM7QUFDckMsZUFBTztBQUFBLE1BQ1g7QUFFRSxVQUFJO0FBQ0osVUFBSSxTQUFTLGFBQWE7QUFBRSxnQkFBUSxTQUFTLE1BQU0sT0FBTyxLQUFLLFNBQVM7QUFDdEUsY0FBSSxJQUFJLFNBQVMsWUFBVztBQUM1QixZQUFFLE9BQU8sV0FBVyxNQUFNLEdBQUc7QUFDN0IsWUFBRSxTQUFTLE1BQU0sS0FBSztBQUN0QixpQkFBTztBQUFBLFFBQ1g7QUFBQSxNQUFJLE9BQ0c7QUFBRSxnQkFBUSxTQUFTLE1BQU0sT0FBTyxLQUFLO0FBQ3hDLGNBQUksSUFBSSxTQUFTLEtBQUssZ0JBQWU7QUFDckMsY0FBSTtBQUFFLGNBQUUsa0JBQWtCLEtBQUssVUFBVTtBQUFBLFVBQUUsU0FDckMsR0FBRztBQUFFLG1CQUFPO0FBQUEsVUFBQztBQUNuQixZQUFFLFNBQVMsSUFBSTtBQUNmLFlBQUUsUUFBUSxhQUFhLEdBQUc7QUFDMUIsWUFBRSxVQUFVLGFBQWEsS0FBSztBQUM5QixpQkFBTztBQUFBLFFBQ1g7QUFBQSxNQUFJO0FBRUYsZUFBUyxTQUFTLFFBQVEsT0FBTztBQUMvQixZQUFJLE1BQU0sWUFBWSxHQUNwQjtBQUFFLGtCQUFRLE1BQU07QUFBQSxRQUFXO0FBQzdCLFlBQUksT0FBTyxVQUNUO0FBQUUsaUJBQU8sT0FBTyxTQUFTLEtBQUs7QUFBQSxRQUFDO0FBQ2pDLFdBQUc7QUFDRCxjQUFJLE1BQU0sWUFBWSxJQUFJO0FBQUUsb0JBQVEsTUFBTTtBQUFBLFVBQUs7QUFDL0MsY0FBSSxTQUFTLFFBQVE7QUFBRSxtQkFBTztBQUFBLFVBQUk7QUFBQSxRQUN4QyxTQUFhLFFBQVEsTUFBTTtBQUFBLE1BQzNCO0FBRUUsZUFBUyxVQUFVQyxXQUFVO0FBSTNCLFlBQUlDLE9BQU1ELFVBQVMsaUJBQWlCQTtBQUNwQyxZQUFJO0FBQ0osWUFBSTtBQUNGLDBCQUFnQkEsVUFBUztBQUFBLFFBQy9CLFNBQVksR0FBRztBQUNULDBCQUFnQkMsS0FBSSxRQUFRO0FBQUEsUUFDbEM7QUFDSSxlQUFPLGlCQUFpQixjQUFjLGNBQWMsY0FBYyxXQUFXLGVBQzNFO0FBQUUsMEJBQWdCLGNBQWMsV0FBVztBQUFBLFFBQWM7QUFDM0QsZUFBTztBQUFBLE1BQ1g7QUFFRSxlQUFTLFNBQVMsTUFBTSxLQUFLO0FBQzNCLFlBQUksVUFBVSxLQUFLO0FBQ25CLFlBQUksQ0FBQyxVQUFVLEdBQUcsRUFBRSxLQUFLLE9BQU8sR0FBRztBQUFFLGVBQUssY0FBYyxVQUFVLE1BQU0sTUFBTTtBQUFBLFFBQUk7QUFBQSxNQUN0RjtBQUNFLGVBQVMsWUFBWSxHQUFHLEdBQUc7QUFDekIsWUFBSSxLQUFLLEVBQUUsTUFBTSxHQUFHO0FBQ3BCLGlCQUFTRixLQUFJLEdBQUdBLEtBQUksR0FBRyxRQUFRQSxNQUM3QjtBQUFFLGNBQUksR0FBR0EsRUFBQyxLQUFLLENBQUMsVUFBVSxHQUFHQSxFQUFDLENBQUMsRUFBRSxLQUFLLENBQUMsR0FBRztBQUFFLGlCQUFLLE1BQU0sR0FBR0EsRUFBQztBQUFBLFVBQUU7QUFBQSxRQUFFO0FBQ2pFLGVBQU87QUFBQSxNQUNYO0FBRUUsVUFBSSxjQUFjLFNBQVMsTUFBTTtBQUFFLGFBQUssT0FBTTtBQUFBLE1BQUc7QUFDakQsVUFBSSxLQUNGO0FBQUUsc0JBQWMsU0FBUyxNQUFNO0FBQUUsZUFBSyxpQkFBaUI7QUFBRyxlQUFLLGVBQWUsS0FBSyxNQUFNO0FBQUEsUUFBTztBQUFBLE1BQUcsV0FDNUYsSUFDUDtBQUFFLHNCQUFjLFNBQVMsTUFBTTtBQUFFLGNBQUk7QUFBRSxpQkFBSztVQUFTLFNBQVMsSUFBSTtBQUFBLFVBQUE7QUFBQSxRQUFFO0FBQUEsTUFBRztBQUV6RSxlQUFTLElBQUksSUFBSTtBQUFFLGVBQU8sR0FBRyxRQUFRLFFBQVE7QUFBQSxNQUFhO0FBRTFELGVBQVMsS0FBSyxJQUFJO0FBQ2hCLGVBQU8sU0FBUyxHQUFHLFFBQVEsT0FBTztBQUFBLE1BQ3RDO0FBRUUsZUFBUyxTQUFTLFNBQVM7QUFFekIsZUFBTyxRQUFRLGNBQWMsUUFBUSxZQUFXLElBQUssUUFBUTtBQUFBLE1BQ2pFO0FBRUUsZUFBUyxJQUFJLElBQUk7QUFBRSxlQUFPLElBQUksRUFBRSxFQUFFO0FBQUEsTUFBVztBQUU3QyxlQUFTLEtBQUssR0FBRztBQUNmLFlBQUksT0FBTyxNQUFNLFVBQVUsTUFBTSxLQUFLLFdBQVcsQ0FBQztBQUNsRCxlQUFPLFdBQVU7QUFBQyxpQkFBTyxFQUFFLE1BQU0sTUFBTSxJQUFJO0FBQUEsUUFBQztBQUFBLE1BQ2hEO0FBRUUsZUFBUyxRQUFRLEtBQUssUUFBUSxXQUFXO0FBQ3ZDLFlBQUksQ0FBQyxRQUFRO0FBQUUsbUJBQVMsQ0FBQTtBQUFBLFFBQUc7QUFDM0IsaUJBQVNHLFNBQVEsS0FDZjtBQUFFLGNBQUksSUFBSSxlQUFlQSxLQUFJLE1BQU0sY0FBYyxTQUFTLENBQUMsT0FBTyxlQUFlQSxLQUFJLElBQ25GO0FBQUUsbUJBQU9BLEtBQUksSUFBSSxJQUFJQSxLQUFJO0FBQUEsVUFBRTtBQUFBLFFBQUU7QUFDakMsZUFBTztBQUFBLE1BQ1g7QUFJRSxlQUFTLFlBQVksUUFBUSxLQUFLLFNBQVMsWUFBWSxZQUFZO0FBQ2pFLFlBQUksT0FBTyxNQUFNO0FBQ2YsZ0JBQU0sT0FBTyxPQUFPLGFBQWE7QUFDakMsY0FBSSxPQUFPLElBQUk7QUFBRSxrQkFBTSxPQUFPO0FBQUEsVUFBTztBQUFBLFFBQzNDO0FBQ0ksaUJBQVNILEtBQUksY0FBYyxHQUFHLElBQUksY0FBYyxPQUFLO0FBQ25ELGNBQUksVUFBVSxPQUFPLFFBQVEsS0FBTUEsRUFBQztBQUNwQyxjQUFJLFVBQVUsS0FBSyxXQUFXLEtBQzVCO0FBQUUsbUJBQU8sS0FBSyxNQUFNQTtBQUFBLFVBQUU7QUFDeEIsZUFBSyxVQUFVQTtBQUNmLGVBQUssVUFBVyxJQUFJO0FBQ3BCLFVBQUFBLEtBQUksVUFBVTtBQUFBLFFBQ3BCO0FBQUEsTUFDQTtBQUVFLFVBQUksVUFBVSxXQUFXO0FBQ3ZCLGFBQUssS0FBSztBQUNWLGFBQUssSUFBSTtBQUNULGFBQUssT0FBTztBQUNaLGFBQUssVUFBVSxLQUFLLEtBQUssV0FBVyxJQUFJO0FBQUEsTUFDNUM7QUFDRSxjQUFRLFVBQVUsWUFBWSxTQUFVLE1BQU07QUFDNUMsYUFBSyxLQUFLO0FBQ1YsWUFBSSxLQUFLLFFBQVEsQ0FBQyxvQkFBSSxRQUFNO0FBQzFCLGVBQUssRUFBQztBQUFBLFFBQ1osT0FBVztBQUNMLHFCQUFXLEtBQUssU0FBUyxLQUFLLE9BQU8sQ0FBQyxvQkFBSSxNQUFJO0FBQUEsUUFDcEQ7QUFBQSxNQUNBO0FBQ0UsY0FBUSxVQUFVLE1BQU0sU0FBVSxJQUFJLEdBQUc7QUFDdkMsYUFBSyxJQUFJO0FBQ1QsWUFBSSxPQUFPLENBQUMsb0JBQUksU0FBTztBQUN2QixZQUFJLENBQUMsS0FBSyxNQUFNLE9BQU8sS0FBSyxNQUFNO0FBQ2hDLHVCQUFhLEtBQUssRUFBRTtBQUNwQixlQUFLLEtBQUssV0FBVyxLQUFLLFNBQVMsRUFBRTtBQUNyQyxlQUFLLE9BQU87QUFBQSxRQUNsQjtBQUFBLE1BQ0E7QUFFRSxlQUFTLFFBQVEsT0FBT0ksTUFBSztBQUMzQixpQkFBU0osS0FBSSxHQUFHQSxLQUFJLE1BQU0sUUFBUSxFQUFFQSxJQUNsQztBQUFFLGNBQUksTUFBTUEsRUFBQyxLQUFLSSxNQUFLO0FBQUUsbUJBQU9KO0FBQUEsVUFBQztBQUFBLFFBQUU7QUFDckMsZUFBTztBQUFBLE1BQ1g7QUFHRSxVQUFJLGNBQWM7QUFJbEIsVUFBSSxPQUFPLEVBQUMsVUFBVSxXQUFVO0FBQUMsZUFBTztBQUFBLE1BQWlCLEVBQUM7QUFHMUQsVUFBSSxpQkFBaUIsRUFBQyxRQUFRLE1BQUssR0FBRyxZQUFZLEVBQUMsUUFBUSxTQUFRLEdBQUcsV0FBVyxFQUFDLFFBQVEsUUFBTztBQUlqRyxlQUFTLFdBQVcsUUFBUSxNQUFNLFNBQVM7QUFDekMsaUJBQVMsTUFBTSxHQUFHLE1BQU0sT0FBSztBQUMzQixjQUFJLFVBQVUsT0FBTyxRQUFRLEtBQU0sR0FBRztBQUN0QyxjQUFJLFdBQVcsSUFBSTtBQUFFLHNCQUFVLE9BQU87QUFBQSxVQUFPO0FBQzdDLGNBQUksVUFBVSxVQUFVO0FBQ3hCLGNBQUksV0FBVyxPQUFPLFVBQVUsTUFBTSxXQUFXLE1BQy9DO0FBQUUsbUJBQU8sTUFBTSxLQUFLLElBQUksU0FBUyxPQUFPLEdBQUc7QUFBQSxVQUFDO0FBQzlDLGlCQUFPLFVBQVU7QUFDakIsaUJBQU8sVUFBVyxNQUFNO0FBQ3hCLGdCQUFNLFVBQVU7QUFDaEIsY0FBSSxPQUFPLE1BQU07QUFBRSxtQkFBTztBQUFBLFVBQUc7QUFBQSxRQUNuQztBQUFBLE1BQ0E7QUFFRSxVQUFJLFlBQVksQ0FBQyxFQUFFO0FBQ25CLGVBQVMsU0FBUyxHQUFHO0FBQ25CLGVBQU8sVUFBVSxVQUFVLEdBQ3pCO0FBQUUsb0JBQVUsS0FBSyxJQUFJLFNBQVMsSUFBSSxHQUFHO0FBQUEsUUFBRTtBQUN6QyxlQUFPLFVBQVUsQ0FBQztBQUFBLE1BQ3RCO0FBRUUsZUFBUyxJQUFJLEtBQUs7QUFBRSxlQUFPLElBQUksSUFBSSxTQUFPLENBQUM7QUFBQSxNQUFDO0FBRTVDLGVBQVMsSUFBSSxPQUFPLEdBQUc7QUFDckIsWUFBSSxNQUFNLENBQUE7QUFDVixpQkFBU0EsS0FBSSxHQUFHQSxLQUFJLE1BQU0sUUFBUUEsTUFBSztBQUFFLGNBQUlBLEVBQUMsSUFBSSxFQUFFLE1BQU1BLEVBQUMsR0FBR0EsRUFBQztBQUFBLFFBQUU7QUFDakUsZUFBTztBQUFBLE1BQ1g7QUFFRSxlQUFTLGFBQWEsT0FBTyxPQUFPLE9BQU87QUFDekMsWUFBSSxNQUFNLEdBQUcsV0FBVyxNQUFNLEtBQUs7QUFDbkMsZUFBTyxNQUFNLE1BQU0sVUFBVSxNQUFNLE1BQU0sR0FBRyxDQUFDLEtBQUssVUFBVTtBQUFFO0FBQUEsUUFBTTtBQUNwRSxjQUFNLE9BQU8sS0FBSyxHQUFHLEtBQUs7QUFBQSxNQUM5QjtBQUVFLGVBQVMsVUFBVTtBQUFBLE1BQUE7QUFFbkIsZUFBUyxVQUFVLE1BQU0sT0FBTztBQUM5QixZQUFJO0FBQ0osWUFBSSxPQUFPLFFBQVE7QUFDakIsaUJBQU8sT0FBTyxPQUFPLElBQUk7QUFBQSxRQUMvQixPQUFXO0FBQ0wsa0JBQVEsWUFBWTtBQUNwQixpQkFBTyxJQUFJLFFBQU87QUFBQSxRQUN4QjtBQUNJLFlBQUksT0FBTztBQUFFLGtCQUFRLE9BQU8sSUFBSTtBQUFBLFFBQUU7QUFDbEMsZUFBTztBQUFBLE1BQ1g7QUFFRSxVQUFJLDZCQUE2QjtBQUNqQyxlQUFTLGdCQUFnQixJQUFJO0FBQzNCLGVBQU8sS0FBSyxLQUFLLEVBQUUsS0FBSyxLQUFLLFFBQzFCLEdBQUcsWUFBVyxLQUFNLEdBQUcsWUFBVyxLQUFNLDJCQUEyQixLQUFLLEVBQUU7QUFBQSxNQUNqRjtBQUNFLGVBQVMsV0FBVyxJQUFJLFFBQVE7QUFDOUIsWUFBSSxDQUFDLFFBQVE7QUFBRSxpQkFBTyxnQkFBZ0IsRUFBRTtBQUFBLFFBQUM7QUFDekMsWUFBSSxPQUFPLE9BQU8sUUFBUSxLQUFLLElBQUksTUFBTSxnQkFBZ0IsRUFBRSxHQUFHO0FBQUUsaUJBQU87QUFBQSxRQUFJO0FBQzNFLGVBQU8sT0FBTyxLQUFLLEVBQUU7QUFBQSxNQUN6QjtBQUVFLGVBQVMsUUFBUSxLQUFLO0FBQ3BCLGlCQUFTLEtBQUssS0FBSztBQUFFLGNBQUksSUFBSSxlQUFlLENBQUMsS0FBSyxJQUFJLENBQUMsR0FBRztBQUFFLG1CQUFPO0FBQUEsVUFBSztBQUFBLFFBQUU7QUFDMUUsZUFBTztBQUFBLE1BQ1g7QUFPRSxVQUFJLGlCQUFpQjtBQUNyQixlQUFTLGdCQUFnQixJQUFJO0FBQUUsZUFBTyxHQUFHLFdBQVcsQ0FBQyxLQUFLLE9BQU8sZUFBZSxLQUFLLEVBQUU7QUFBQSxNQUFDO0FBR3hGLGVBQVMsbUJBQW1CLEtBQUssS0FBSyxLQUFLO0FBQ3pDLGdCQUFRLE1BQU0sSUFBSSxNQUFNLElBQUksTUFBTSxJQUFJLFdBQVcsZ0JBQWdCLElBQUksT0FBTyxHQUFHLENBQUMsR0FBRztBQUFFLGlCQUFPO0FBQUEsUUFBSTtBQUNoRyxlQUFPO0FBQUEsTUFDWDtBQUtFLGVBQVMsVUFBVSxNQUFNLE1BQU0sSUFBSTtBQUdqQyxZQUFJLE1BQU0sT0FBTyxLQUFLLEtBQUs7QUFDM0IsbUJBQVM7QUFDUCxjQUFJLFFBQVEsSUFBSTtBQUFFLG1CQUFPO0FBQUEsVUFBSTtBQUM3QixjQUFJLFFBQVEsT0FBTyxNQUFNLEdBQUcsTUFBTSxNQUFNLElBQUksS0FBSyxLQUFLLElBQUksSUFBSSxLQUFLLE1BQU0sSUFBSTtBQUM3RSxjQUFJLE9BQU8sTUFBTTtBQUFFLG1CQUFPLEtBQUssR0FBRyxJQUFJLE9BQU87QUFBQSxVQUFFO0FBQy9DLGNBQUksS0FBSyxHQUFHLEdBQUc7QUFBRSxpQkFBSztBQUFBLFVBQUksT0FDckI7QUFBRSxtQkFBTyxNQUFNO0FBQUEsVUFBSTtBQUFBLFFBQzlCO0FBQUEsTUFDQTtBQUlFLGVBQVMsb0JBQW9CLE9BQU8sTUFBTSxJQUFJLEdBQUc7QUFDL0MsWUFBSSxDQUFDLE9BQU87QUFBRSxpQkFBTyxFQUFFLE1BQU0sSUFBSSxPQUFPLENBQUM7QUFBQSxRQUFDO0FBQzFDLFlBQUksUUFBUTtBQUNaLGlCQUFTQSxLQUFJLEdBQUdBLEtBQUksTUFBTSxRQUFRLEVBQUVBLElBQUc7QUFDckMsY0FBSSxPQUFPLE1BQU1BLEVBQUM7QUFDbEIsY0FBSSxLQUFLLE9BQU8sTUFBTSxLQUFLLEtBQUssUUFBUSxRQUFRLE1BQU0sS0FBSyxNQUFNLE1BQU07QUFDckUsY0FBRSxLQUFLLElBQUksS0FBSyxNQUFNLElBQUksR0FBRyxLQUFLLElBQUksS0FBSyxJQUFJLEVBQUUsR0FBRyxLQUFLLFNBQVMsSUFBSSxRQUFRLE9BQU9BLEVBQUM7QUFDdEYsb0JBQVE7QUFBQSxVQUNoQjtBQUFBLFFBQ0E7QUFDSSxZQUFJLENBQUMsT0FBTztBQUFFLFlBQUUsTUFBTSxJQUFJLEtBQUs7QUFBQSxRQUFFO0FBQUEsTUFDckM7QUFFRSxVQUFJLFlBQVk7QUFDaEIsZUFBUyxjQUFjLE9BQU8sSUFBSSxRQUFRO0FBQ3hDLFlBQUk7QUFDSixvQkFBWTtBQUNaLGlCQUFTQSxLQUFJLEdBQUdBLEtBQUksTUFBTSxRQUFRLEVBQUVBLElBQUc7QUFDckMsY0FBSSxNQUFNLE1BQU1BLEVBQUM7QUFDakIsY0FBSSxJQUFJLE9BQU8sTUFBTSxJQUFJLEtBQUssSUFBSTtBQUFFLG1CQUFPQTtBQUFBLFVBQUM7QUFDNUMsY0FBSSxJQUFJLE1BQU0sSUFBSTtBQUNoQixnQkFBSSxJQUFJLFFBQVEsSUFBSSxNQUFNLFVBQVUsVUFBVTtBQUFFLHNCQUFRQTtBQUFBLFlBQUUsT0FDckQ7QUFBRSwwQkFBWUE7QUFBQSxZQUFFO0FBQUEsVUFDN0I7QUFDTSxjQUFJLElBQUksUUFBUSxJQUFJO0FBQ2xCLGdCQUFJLElBQUksUUFBUSxJQUFJLE1BQU0sVUFBVSxVQUFVO0FBQUUsc0JBQVFBO0FBQUEsWUFBRSxPQUNyRDtBQUFFLDBCQUFZQTtBQUFBLFlBQUU7QUFBQSxVQUM3QjtBQUFBLFFBQ0E7QUFDSSxlQUFPLFNBQVMsT0FBTyxRQUFRO0FBQUEsTUFDbkM7QUF5QkUsVUFBSSxlQUFnQiw0QkFBVztBQUU3QixZQUFJLFdBQVc7QUFFZixZQUFJLGNBQWM7QUFDbEIsaUJBQVMsU0FBUyxNQUFNO0FBQ3RCLGNBQUksUUFBUSxLQUFNO0FBQUUsbUJBQU8sU0FBUyxPQUFPLElBQUk7QUFBQSxVQUFDLFdBQ3ZDLFFBQVMsUUFBUSxRQUFRLE1BQU87QUFBRSxtQkFBTztBQUFBLFVBQUcsV0FDNUMsUUFBUyxRQUFRLFFBQVEsTUFBTztBQUFFLG1CQUFPLFlBQVksT0FBTyxPQUFPLElBQUs7QUFBQSxVQUFDLFdBQ3pFLFFBQVMsUUFBUSxRQUFRLE1BQU87QUFBRSxtQkFBTztBQUFBLFVBQUcsV0FDNUMsUUFBVSxRQUFRLFFBQVEsTUFBUTtBQUFFLG1CQUFPO0FBQUEsVUFBRyxXQUM5QyxRQUFRLE1BQVE7QUFBRSxtQkFBTztBQUFBLFVBQUcsT0FDaEM7QUFBRSxtQkFBTztBQUFBLFVBQUc7QUFBQSxRQUN2QjtBQUVJLFlBQUksU0FBUztBQUNiLFlBQUksWUFBWSxVQUFVLFdBQVcsU0FBUyxlQUFlLFVBQVUsY0FBYztBQUVyRixpQkFBUyxTQUFTLE9BQU8sTUFBTSxJQUFJO0FBQ2pDLGVBQUssUUFBUTtBQUNiLGVBQUssT0FBTztBQUFNLGVBQUssS0FBSztBQUFBLFFBQ2xDO0FBRUksZUFBTyxTQUFTLEtBQUssV0FBVztBQUM5QixjQUFJLFlBQVksYUFBYSxRQUFRLE1BQU07QUFFM0MsY0FBSSxJQUFJLFVBQVUsS0FBSyxhQUFhLFNBQVMsQ0FBQyxPQUFPLEtBQUssR0FBRyxHQUFHO0FBQUUsbUJBQU87QUFBQSxVQUFLO0FBQzlFLGNBQUksTUFBTSxJQUFJLFFBQVEsUUFBUSxDQUFBO0FBQzlCLG1CQUFTQSxLQUFJLEdBQUdBLEtBQUksS0FBSyxFQUFFQSxJQUN6QjtBQUFFLGtCQUFNLEtBQUssU0FBUyxJQUFJLFdBQVdBLEVBQUMsQ0FBQyxDQUFDO0FBQUEsVUFBRTtBQU01QyxtQkFBU0ssT0FBTSxHQUFHLE9BQU8sV0FBV0EsT0FBTSxLQUFLLEVBQUVBLE1BQUs7QUFDcEQsZ0JBQUksT0FBTyxNQUFNQSxJQUFHO0FBQ3BCLGdCQUFJLFFBQVEsS0FBSztBQUFFLG9CQUFNQSxJQUFHLElBQUk7QUFBQSxZQUFLLE9BQ2hDO0FBQUUscUJBQU87QUFBQSxZQUFLO0FBQUEsVUFDM0I7QUFPTSxtQkFBU0MsT0FBTSxHQUFHLE1BQU0sV0FBV0EsT0FBTSxLQUFLLEVBQUVBLE1BQUs7QUFDbkQsZ0JBQUksU0FBUyxNQUFNQSxJQUFHO0FBQ3RCLGdCQUFJLFVBQVUsT0FBTyxPQUFPLEtBQUs7QUFBRSxvQkFBTUEsSUFBRyxJQUFJO0FBQUEsWUFBSSxXQUMzQyxTQUFTLEtBQUssTUFBTSxHQUFHO0FBQUUsb0JBQU07QUFBUSxrQkFBSSxVQUFVLEtBQUs7QUFBRSxzQkFBTUEsSUFBRyxJQUFJO0FBQUEsY0FBSTtBQUFBLFlBQUU7QUFBQSxVQUNoRztBQUtNLG1CQUFTLE1BQU0sR0FBRyxTQUFTLE1BQU0sQ0FBQyxHQUFHLE1BQU0sTUFBTSxHQUFHLEVBQUUsS0FBSztBQUN6RCxnQkFBSSxTQUFTLE1BQU0sR0FBRztBQUN0QixnQkFBSSxVQUFVLE9BQU8sVUFBVSxPQUFPLE1BQU0sTUFBSSxDQUFDLEtBQUssS0FBSztBQUFFLG9CQUFNLEdBQUcsSUFBSTtBQUFBLFlBQUksV0FDckUsVUFBVSxPQUFPLFVBQVUsTUFBTSxNQUFJLENBQUMsTUFDckMsVUFBVSxPQUFPLFVBQVUsTUFBTTtBQUFFLG9CQUFNLEdBQUcsSUFBSTtBQUFBLFlBQU87QUFDakUscUJBQVM7QUFBQSxVQUNqQjtBQU1NLG1CQUFTLE1BQU0sR0FBRyxNQUFNLEtBQUssRUFBRSxLQUFLO0FBQ2xDLGdCQUFJLFNBQVMsTUFBTSxHQUFHO0FBQ3RCLGdCQUFJLFVBQVUsS0FBSztBQUFFLG9CQUFNLEdBQUcsSUFBSTtBQUFBLFlBQUksV0FDN0IsVUFBVSxLQUFLO0FBQ3RCLGtCQUFJLE1BQU87QUFDWCxtQkFBSyxNQUFNLE1BQU0sR0FBRyxNQUFNLE9BQU8sTUFBTSxHQUFHLEtBQUssS0FBSyxFQUFFLEtBQUs7QUFBQSxjQUFBO0FBQzNELGtCQUFJLFVBQVcsT0FBTyxNQUFNLE1BQUksQ0FBQyxLQUFLLE9BQVMsTUFBTSxPQUFPLE1BQU0sR0FBRyxLQUFLLE1BQU8sTUFBTTtBQUN2Rix1QkFBUyxJQUFJLEtBQUssSUFBSSxLQUFLLEVBQUUsR0FBRztBQUFFLHNCQUFNLENBQUMsSUFBSTtBQUFBLGNBQVE7QUFDckQsb0JBQU0sTUFBTTtBQUFBLFlBQ3RCO0FBQUEsVUFDQTtBQUtNLG1CQUFTLE1BQU0sR0FBRyxRQUFRLFdBQVcsTUFBTSxLQUFLLEVBQUUsS0FBSztBQUNyRCxnQkFBSSxTQUFTLE1BQU0sR0FBRztBQUN0QixnQkFBSSxTQUFTLE9BQU8sVUFBVSxLQUFLO0FBQUUsb0JBQU0sR0FBRyxJQUFJO0FBQUEsWUFBSSxXQUM3QyxTQUFTLEtBQUssTUFBTSxHQUFHO0FBQUUsc0JBQVE7QUFBQSxZQUFPO0FBQUEsVUFDekQ7QUFRTSxtQkFBUyxNQUFNLEdBQUcsTUFBTSxLQUFLLEVBQUUsS0FBSztBQUNsQyxnQkFBSSxVQUFVLEtBQUssTUFBTSxHQUFHLENBQUMsR0FBRztBQUM5QixrQkFBSSxRQUFTO0FBQ2IsbUJBQUssUUFBUSxNQUFNLEdBQUcsUUFBUSxPQUFPLFVBQVUsS0FBSyxNQUFNLEtBQUssQ0FBQyxHQUFHLEVBQUUsT0FBTztBQUFBLGNBQUE7QUFDNUUsa0JBQUksVUFBVSxNQUFNLE1BQU0sTUFBSSxDQUFDLElBQUksY0FBYztBQUNqRCxrQkFBSSxTQUFTLFFBQVEsTUFBTSxNQUFNLEtBQUssSUFBSSxjQUFjO0FBQ3hELGtCQUFJLFlBQVksVUFBVSxRQUFTLFNBQVMsTUFBTSxNQUFPO0FBQ3pELHVCQUFTLE1BQU0sS0FBSyxNQUFNLE9BQU8sRUFBRSxLQUFLO0FBQUUsc0JBQU0sR0FBRyxJQUFJO0FBQUEsY0FBVTtBQUNqRSxvQkFBTSxRQUFRO0FBQUEsWUFDeEI7QUFBQSxVQUNBO0FBT00sY0FBSSxRQUFRLENBQUEsR0FBSTtBQUNoQixtQkFBUyxNQUFNLEdBQUcsTUFBTSxPQUFNO0FBQzVCLGdCQUFJLGFBQWEsS0FBSyxNQUFNLEdBQUcsQ0FBQyxHQUFHO0FBQ2pDLGtCQUFJLFFBQVE7QUFDWixtQkFBSyxFQUFFLEtBQUssTUFBTSxPQUFPLGFBQWEsS0FBSyxNQUFNLEdBQUcsQ0FBQyxHQUFHLEVBQUUsS0FBSztBQUFBLGNBQUE7QUFDL0Qsb0JBQU0sS0FBSyxJQUFJLFNBQVMsR0FBRyxPQUFPLEdBQUcsQ0FBQztBQUFBLFlBQ2hELE9BQWU7QUFDTCxrQkFBSSxNQUFNLEtBQUssS0FBSyxNQUFNLFFBQVEsUUFBUSxhQUFhLFFBQVEsSUFBSTtBQUNuRSxtQkFBSyxFQUFFLEtBQUssTUFBTSxPQUFPLE1BQU0sR0FBRyxLQUFLLEtBQUssRUFBRSxLQUFLO0FBQUEsY0FBQTtBQUNuRCx1QkFBUyxNQUFNLEtBQUssTUFBTSxPQUFNO0FBQzlCLG9CQUFJLFlBQVksS0FBSyxNQUFNLEdBQUcsQ0FBQyxHQUFHO0FBQ2hDLHNCQUFJLE1BQU0sS0FBSztBQUFFLDBCQUFNLE9BQU8sSUFBSSxHQUFHLElBQUksU0FBUyxHQUFHLEtBQUssR0FBRyxDQUFDO0FBQUcsMEJBQU07QUFBQSxrQkFBTTtBQUM3RSxzQkFBSSxTQUFTO0FBQ2IsdUJBQUssRUFBRSxLQUFLLE1BQU0sT0FBTyxZQUFZLEtBQUssTUFBTSxHQUFHLENBQUMsR0FBRyxFQUFFLEtBQUs7QUFBQSxrQkFBQTtBQUM5RCx3QkFBTSxPQUFPLElBQUksR0FBRyxJQUFJLFNBQVMsR0FBRyxRQUFRLEdBQUcsQ0FBQztBQUNoRCx3QkFBTTtBQUNOLHdCQUFNO0FBQUEsZ0JBQ3BCLE9BQW1CO0FBQUUsb0JBQUU7QUFBQSxnQkFBSTtBQUFBLGNBQzNCO0FBQ1Usa0JBQUksTUFBTSxLQUFLO0FBQUUsc0JBQU0sT0FBTyxJQUFJLEdBQUcsSUFBSSxTQUFTLEdBQUcsS0FBSyxHQUFHLENBQUM7QUFBQSxjQUFFO0FBQUEsWUFDMUU7QUFBQSxVQUNBO0FBQ00sY0FBSSxhQUFhLE9BQU87QUFDdEIsZ0JBQUksTUFBTSxDQUFDLEVBQUUsU0FBUyxNQUFNLElBQUksSUFBSSxNQUFNLE1BQU0sSUFBSTtBQUNsRCxvQkFBTSxDQUFDLEVBQUUsT0FBTyxFQUFFLENBQUMsRUFBRTtBQUNyQixvQkFBTSxRQUFRLElBQUksU0FBUyxHQUFHLEdBQUcsRUFBRSxDQUFDLEVBQUUsTUFBTSxDQUFDO0FBQUEsWUFDdkQ7QUFDUSxnQkFBSSxJQUFJLEtBQUssRUFBRSxTQUFTLE1BQU0sSUFBSSxJQUFJLE1BQU0sTUFBTSxJQUFJO0FBQ3BELGtCQUFJLEtBQUssRUFBRSxNQUFNLEVBQUUsQ0FBQyxFQUFFO0FBQ3RCLG9CQUFNLEtBQUssSUFBSSxTQUFTLEdBQUcsTUFBTSxFQUFFLENBQUMsRUFBRSxRQUFRLEdBQUcsQ0FBQztBQUFBLFlBQzVEO0FBQUEsVUFDQTtBQUVNLGlCQUFPLGFBQWEsUUFBUSxNQUFNLFFBQU8sSUFBSztBQUFBLFFBQ3BEO0FBQUEsTUFDQSxHQUFHO0FBS0QsZUFBUyxTQUFTLE1BQU0sV0FBVztBQUNqQyxZQUFJLFFBQVEsS0FBSztBQUNqQixZQUFJLFNBQVMsTUFBTTtBQUFFLGtCQUFRLEtBQUssUUFBUSxhQUFhLEtBQUssTUFBTSxTQUFTO0FBQUEsUUFBRTtBQUM3RSxlQUFPO0FBQUEsTUFDWDtBQU9FLFVBQUksYUFBYSxDQUFBO0FBRWpCLFVBQUksS0FBSyxTQUFTLFNBQVMsTUFBTSxHQUFHO0FBQ2xDLFlBQUksUUFBUSxrQkFBa0I7QUFDNUIsa0JBQVEsaUJBQWlCLE1BQU0sR0FBRyxLQUFLO0FBQUEsUUFDN0MsV0FBZSxRQUFRLGFBQWE7QUFDOUIsa0JBQVEsWUFBWSxPQUFPLE1BQU0sQ0FBQztBQUFBLFFBQ3hDLE9BQVc7QUFDTCxjQUFJQyxPQUFNLFFBQVEsY0FBYyxRQUFRLFlBQVksQ0FBQTtBQUNwRCxVQUFBQSxLQUFJLElBQUksS0FBS0EsS0FBSSxJQUFJLEtBQUssWUFBWSxPQUFPLENBQUM7QUFBQSxRQUNwRDtBQUFBLE1BQ0E7QUFFRSxlQUFTLFlBQVksU0FBUyxNQUFNO0FBQ2xDLGVBQU8sUUFBUSxhQUFhLFFBQVEsVUFBVSxJQUFJLEtBQUs7QUFBQSxNQUMzRDtBQUVFLGVBQVMsSUFBSSxTQUFTLE1BQU0sR0FBRztBQUM3QixZQUFJLFFBQVEscUJBQXFCO0FBQy9CLGtCQUFRLG9CQUFvQixNQUFNLEdBQUcsS0FBSztBQUFBLFFBQ2hELFdBQWUsUUFBUSxhQUFhO0FBQzlCLGtCQUFRLFlBQVksT0FBTyxNQUFNLENBQUM7QUFBQSxRQUN4QyxPQUFXO0FBQ0wsY0FBSUEsT0FBTSxRQUFRLFdBQVcsTUFBTUEsUUFBT0EsS0FBSSxJQUFJO0FBQ2xELGNBQUksS0FBSztBQUNQLGdCQUFJLFFBQVEsUUFBUSxLQUFLLENBQUM7QUFDMUIsZ0JBQUksUUFBUSxJQUNWO0FBQUUsY0FBQUEsS0FBSSxJQUFJLElBQUksSUFBSSxNQUFNLEdBQUcsS0FBSyxFQUFFLE9BQU8sSUFBSSxNQUFNLFFBQVEsQ0FBQyxDQUFDO0FBQUEsWUFBRTtBQUFBLFVBQ3pFO0FBQUEsUUFDQTtBQUFBLE1BQ0E7QUFFRSxlQUFTLE9BQU8sU0FBUyxNQUFzQjtBQUM3QyxZQUFJLFdBQVcsWUFBWSxTQUFTLElBQUk7QUFDeEMsWUFBSSxDQUFDLFNBQVMsUUFBUTtBQUFFO0FBQUEsUUFBTTtBQUM5QixZQUFJLE9BQU8sTUFBTSxVQUFVLE1BQU0sS0FBSyxXQUFXLENBQUM7QUFDbEQsaUJBQVNQLEtBQUksR0FBR0EsS0FBSSxTQUFTLFFBQVEsRUFBRUEsSUFBRztBQUFFLG1CQUFTQSxFQUFDLEVBQUUsTUFBTSxNQUFNLElBQUk7QUFBQSxRQUFFO0FBQUEsTUFDOUU7QUFLRSxlQUFTLGVBQWUsSUFBSSxHQUFHLFVBQVU7QUFDdkMsWUFBSSxPQUFPLEtBQUssVUFDZDtBQUFFLGNBQUksRUFBQyxNQUFNLEdBQUcsZ0JBQWdCLFdBQVc7QUFBRSxpQkFBSyxtQkFBbUI7QUFBQSxVQUFLLEVBQUU7QUFBQSxRQUFFO0FBQ2hGLGVBQU8sSUFBSSxZQUFZLEVBQUUsTUFBTSxJQUFJLENBQUM7QUFDcEMsZUFBTyxtQkFBbUIsQ0FBQyxLQUFLLEVBQUU7QUFBQSxNQUN0QztBQUVFLGVBQVMscUJBQXFCLElBQUk7QUFDaEMsWUFBSSxNQUFNLEdBQUcsYUFBYSxHQUFHLFVBQVU7QUFDdkMsWUFBSSxDQUFDLEtBQUs7QUFBRTtBQUFBLFFBQU07QUFDbEIsWUFBSSxNQUFNLEdBQUcsTUFBTSwyQkFBMkIsR0FBRyxNQUFNLHlCQUF5QjtBQUNoRixpQkFBU0EsS0FBSSxHQUFHQSxLQUFJLElBQUksUUFBUSxFQUFFQSxJQUFHO0FBQUUsY0FBSSxRQUFRLEtBQUssSUFBSUEsRUFBQyxDQUFDLEtBQUssSUFDakU7QUFBRSxnQkFBSSxLQUFLLElBQUlBLEVBQUMsQ0FBQztBQUFBLFVBQUU7QUFBQSxRQUFFO0FBQUEsTUFDM0I7QUFFRSxlQUFTLFdBQVcsU0FBUyxNQUFNO0FBQ2pDLGVBQU8sWUFBWSxTQUFTLElBQUksRUFBRSxTQUFTO0FBQUEsTUFDL0M7QUFJRSxlQUFTLFdBQVcsTUFBTTtBQUN4QixhQUFLLFVBQVUsS0FBSyxTQUFTLE1BQU0sR0FBRztBQUFDLGFBQUcsTUFBTSxNQUFNLENBQUM7QUFBQSxRQUFFO0FBQ3pELGFBQUssVUFBVSxNQUFNLFNBQVMsTUFBTSxHQUFHO0FBQUMsY0FBSSxNQUFNLE1BQU0sQ0FBQztBQUFBLFFBQUU7QUFBQSxNQUMvRDtBQUtFLGVBQVMsaUJBQWlCLEdBQUc7QUFDM0IsWUFBSSxFQUFFLGdCQUFnQjtBQUFFLFlBQUUsZUFBYztBQUFBLFFBQUcsT0FDdEM7QUFBRSxZQUFFLGNBQWM7QUFBQSxRQUFNO0FBQUEsTUFDakM7QUFDRSxlQUFTLGtCQUFrQixHQUFHO0FBQzVCLFlBQUksRUFBRSxpQkFBaUI7QUFBRSxZQUFFLGdCQUFlO0FBQUEsUUFBRyxPQUN4QztBQUFFLFlBQUUsZUFBZTtBQUFBLFFBQUs7QUFBQSxNQUNqQztBQUNFLGVBQVMsbUJBQW1CLEdBQUc7QUFDN0IsZUFBTyxFQUFFLG9CQUFvQixPQUFPLEVBQUUsbUJBQW1CLEVBQUUsZUFBZTtBQUFBLE1BQzlFO0FBQ0UsZUFBUyxPQUFPLEdBQUc7QUFBQyx5QkFBaUIsQ0FBQztBQUFHLDBCQUFrQixDQUFDO0FBQUEsTUFBRTtBQUU5RCxlQUFTLFNBQVMsR0FBRztBQUFDLGVBQU8sRUFBRSxVQUFVLEVBQUU7QUFBQSxNQUFVO0FBQ3JELGVBQVMsU0FBUyxHQUFHO0FBQ25CLFlBQUksSUFBSSxFQUFFO0FBQ1YsWUFBSSxLQUFLLE1BQU07QUFDYixjQUFJLEVBQUUsU0FBUyxHQUFHO0FBQUUsZ0JBQUk7QUFBQSxVQUFFLFdBQ2pCLEVBQUUsU0FBUyxHQUFHO0FBQUUsZ0JBQUk7QUFBQSxVQUFFLFdBQ3RCLEVBQUUsU0FBUyxHQUFHO0FBQUUsZ0JBQUk7QUFBQSxVQUFFO0FBQUEsUUFDckM7QUFDSSxZQUFJLE9BQU8sRUFBRSxXQUFXLEtBQUssR0FBRztBQUFFLGNBQUk7QUFBQSxRQUFFO0FBQ3hDLGVBQU87QUFBQSxNQUNYO0FBR0UsVUFBSSxlQUFjLFdBQVc7QUFHM0IsWUFBSSxNQUFNLGFBQWEsR0FBRztBQUFFLGlCQUFPO0FBQUEsUUFBSztBQUN4QyxZQUFJLE1BQU0sSUFBSSxLQUFLO0FBQ25CLGVBQU8sZUFBZSxPQUFPLGNBQWM7QUFBQSxNQUMvQyxHQUFHO0FBRUQsVUFBSTtBQUNKLGVBQVMsaUJBQWlCLFNBQVM7QUFDakMsWUFBSSxpQkFBaUIsTUFBTTtBQUN6QixjQUFJLE9BQU8sSUFBSSxRQUFRLEdBQVE7QUFDL0IsK0JBQXFCLFNBQVMsSUFBSSxRQUFRLENBQUMsTUFBTSxTQUFTLGVBQWUsR0FBRyxDQUFDLENBQUMsQ0FBQztBQUMvRSxjQUFJLFFBQVEsV0FBVyxnQkFBZ0IsR0FDckM7QUFBRSw0QkFBZ0IsS0FBSyxlQUFlLEtBQUssS0FBSyxlQUFlLEtBQUssRUFBRSxNQUFNLGFBQWE7QUFBQSxVQUFHO0FBQUEsUUFDcEc7QUFDSSxZQUFJLE9BQU8sZ0JBQWdCLElBQUksUUFBUSxHQUFRLElBQzdDLElBQUksUUFBUSxLQUFVLE1BQU0sdURBQXVEO0FBQ3JGLGFBQUssYUFBYSxXQUFXLEVBQUU7QUFDL0IsZUFBTztBQUFBLE1BQ1g7QUFHRSxVQUFJO0FBQ0osZUFBUyxnQkFBZ0IsU0FBUztBQUNoQyxZQUFJLGdCQUFnQixNQUFNO0FBQUUsaUJBQU87QUFBQSxRQUFZO0FBQy9DLFlBQUksTUFBTSxxQkFBcUIsU0FBUyxTQUFTLGVBQWUsS0FBVSxDQUFDO0FBQzNFLFlBQUksS0FBSyxNQUFNLEtBQUssR0FBRyxDQUFDLEVBQUUsc0JBQXFCO0FBQy9DLFlBQUksS0FBSyxNQUFNLEtBQUssR0FBRyxDQUFDLEVBQUUsc0JBQXFCO0FBQy9DLHVCQUFlLE9BQU87QUFDdEIsWUFBSSxDQUFDLE1BQU0sR0FBRyxRQUFRLEdBQUcsT0FBTztBQUFFLGlCQUFPO0FBQUEsUUFBSztBQUM5QyxlQUFPLGVBQWdCLEdBQUcsUUFBUSxHQUFHLFFBQVE7QUFBQSxNQUNqRDtBQUlFLFVBQUksaUJBQWlCLFFBQVEsTUFBTSxJQUFJLEVBQUUsVUFBVSxJQUFJLFNBQVUsUUFBUTtBQUN2RSxZQUFJLE1BQU0sR0FBRyxTQUFTLENBQUEsR0FBSSxJQUFJLE9BQU87QUFDckMsZUFBTyxPQUFPLEdBQUc7QUFDZixjQUFJLEtBQUssT0FBTyxRQUFRLE1BQU0sR0FBRztBQUNqQyxjQUFJLE1BQU0sSUFBSTtBQUFFLGlCQUFLLE9BQU87QUFBQSxVQUFPO0FBQ25DLGNBQUksT0FBTyxPQUFPLE1BQU0sS0FBSyxPQUFPLE9BQU8sS0FBSyxDQUFDLEtBQUssT0FBTyxLQUFLLElBQUksRUFBRTtBQUN4RSxjQUFJLEtBQUssS0FBSyxRQUFRLElBQUk7QUFDMUIsY0FBSSxNQUFNLElBQUk7QUFDWixtQkFBTyxLQUFLLEtBQUssTUFBTSxHQUFHLEVBQUUsQ0FBQztBQUM3QixtQkFBTyxLQUFLO0FBQUEsVUFDcEIsT0FBYTtBQUNMLG1CQUFPLEtBQUssSUFBSTtBQUNoQixrQkFBTSxLQUFLO0FBQUEsVUFDbkI7QUFBQSxRQUNBO0FBQ0ksZUFBTztBQUFBLE1BQ1gsSUFBTSxTQUFVLFFBQVE7QUFBRSxlQUFPLE9BQU8sTUFBTSxVQUFVO0FBQUEsTUFBRTtBQUV4RCxVQUFJLGVBQWUsT0FBTyxlQUFlLFNBQVUsSUFBSTtBQUNyRCxZQUFJO0FBQUUsaUJBQU8sR0FBRyxrQkFBa0IsR0FBRztBQUFBLFFBQVksU0FDM0MsR0FBRztBQUFFLGlCQUFPO0FBQUEsUUFBSztBQUFBLE1BQzNCLElBQU0sU0FBVSxJQUFJO0FBQ2hCLFlBQUlRO0FBQ0osWUFBSTtBQUFDLFVBQUFBLFNBQVEsR0FBRyxjQUFjLFVBQVUsWUFBVztBQUFBLFFBQUcsU0FDaEQsR0FBRztBQUFBLFFBQUE7QUFDVCxZQUFJLENBQUNBLFVBQVNBLE9BQU0sY0FBYSxLQUFNLElBQUk7QUFBRSxpQkFBTztBQUFBLFFBQUs7QUFDekQsZUFBT0EsT0FBTSxpQkFBaUIsY0FBY0EsTUFBSyxLQUFLO0FBQUEsTUFDMUQ7QUFFRSxVQUFJLGdCQUFnQixXQUFZO0FBQzlCLFlBQUksSUFBSSxJQUFJLEtBQUs7QUFDakIsWUFBSSxZQUFZLEdBQUc7QUFBRSxpQkFBTztBQUFBLFFBQUk7QUFDaEMsVUFBRSxhQUFhLFVBQVUsU0FBUztBQUNsQyxlQUFPLE9BQU8sRUFBRSxVQUFVO0FBQUEsTUFDOUIsR0FBRztBQUVELFVBQUksaUJBQWlCO0FBQ3JCLGVBQVMsa0JBQWtCLFNBQVM7QUFDbEMsWUFBSSxrQkFBa0IsTUFBTTtBQUFFLGlCQUFPO0FBQUEsUUFBYztBQUNuRCxZQUFJLE9BQU8scUJBQXFCLFNBQVMsSUFBSSxRQUFRLEdBQUcsQ0FBQztBQUN6RCxZQUFJLFNBQVMsS0FBSyxzQkFBcUI7QUFDdkMsWUFBSSxZQUFZLE1BQU0sTUFBTSxHQUFHLENBQUMsRUFBRSxzQkFBcUI7QUFDdkQsZUFBTyxpQkFBaUIsS0FBSyxJQUFJLE9BQU8sT0FBTyxVQUFVLElBQUksSUFBSTtBQUFBLE1BQ3JFO0FBR0UsVUFBSSxRQUFRLElBQUksWUFBWSxDQUFBO0FBSzVCLGVBQVMsV0FBVyxNQUFNLE1BQU07QUFDOUIsWUFBSSxVQUFVLFNBQVMsR0FDckI7QUFBRSxlQUFLLGVBQWUsTUFBTSxVQUFVLE1BQU0sS0FBSyxXQUFXLENBQUM7QUFBQSxRQUFFO0FBQ2pFLGNBQU0sSUFBSSxJQUFJO0FBQUEsTUFDbEI7QUFFRSxlQUFTLFdBQVcsTUFBTSxNQUFNO0FBQzlCLGtCQUFVLElBQUksSUFBSTtBQUFBLE1BQ3RCO0FBSUUsZUFBUyxZQUFZLE1BQU07QUFDekIsWUFBSSxPQUFPLFFBQVEsWUFBWSxVQUFVLGVBQWUsSUFBSSxHQUFHO0FBQzdELGlCQUFPLFVBQVUsSUFBSTtBQUFBLFFBQzNCLFdBQWUsUUFBUSxPQUFPLEtBQUssUUFBUSxZQUFZLFVBQVUsZUFBZSxLQUFLLElBQUksR0FBRztBQUN0RixjQUFJLFFBQVEsVUFBVSxLQUFLLElBQUk7QUFDL0IsY0FBSSxPQUFPLFNBQVMsVUFBVTtBQUFFLG9CQUFRLEVBQUMsTUFBTSxNQUFLO0FBQUEsVUFBRTtBQUN0RCxpQkFBTyxVQUFVLE9BQU8sSUFBSTtBQUM1QixlQUFLLE9BQU8sTUFBTTtBQUFBLFFBQ3hCLFdBQWUsT0FBTyxRQUFRLFlBQVksMEJBQTBCLEtBQUssSUFBSSxHQUFHO0FBQzFFLGlCQUFPLFlBQVksaUJBQWlCO0FBQUEsUUFDMUMsV0FBZSxPQUFPLFFBQVEsWUFBWSwyQkFBMkIsS0FBSyxJQUFJLEdBQUc7QUFDM0UsaUJBQU8sWUFBWSxrQkFBa0I7QUFBQSxRQUMzQztBQUNJLFlBQUksT0FBTyxRQUFRLFVBQVU7QUFBRSxpQkFBTyxFQUFDLE1BQU0sS0FBSTtBQUFBLFFBQUMsT0FDN0M7QUFBRSxpQkFBTyxRQUFRLEVBQUMsTUFBTSxPQUFNO0FBQUEsUUFBQztBQUFBLE1BQ3hDO0FBSUUsZUFBUyxRQUFRLFNBQVMsTUFBTTtBQUM5QixlQUFPLFlBQVksSUFBSTtBQUN2QixZQUFJLFdBQVcsTUFBTSxLQUFLLElBQUk7QUFDOUIsWUFBSSxDQUFDLFVBQVU7QUFBRSxpQkFBTyxRQUFRLFNBQVMsWUFBWTtBQUFBLFFBQUM7QUFDdEQsWUFBSSxVQUFVLFNBQVMsU0FBUyxJQUFJO0FBQ3BDLFlBQUksZUFBZSxlQUFlLEtBQUssSUFBSSxHQUFHO0FBQzVDLGNBQUksT0FBTyxlQUFlLEtBQUssSUFBSTtBQUNuQyxtQkFBU0wsU0FBUSxNQUFNO0FBQ3JCLGdCQUFJLENBQUMsS0FBSyxlQUFlQSxLQUFJLEdBQUc7QUFBRTtBQUFBLFlBQVE7QUFDMUMsZ0JBQUksUUFBUSxlQUFlQSxLQUFJLEdBQUc7QUFBRSxzQkFBUSxNQUFNQSxLQUFJLElBQUksUUFBUUEsS0FBSTtBQUFBLFlBQUU7QUFDeEUsb0JBQVFBLEtBQUksSUFBSSxLQUFLQSxLQUFJO0FBQUEsVUFDakM7QUFBQSxRQUNBO0FBQ0ksZ0JBQVEsT0FBTyxLQUFLO0FBQ3BCLFlBQUksS0FBSyxZQUFZO0FBQUUsa0JBQVEsYUFBYSxLQUFLO0FBQUEsUUFBVztBQUM1RCxZQUFJLEtBQUssV0FBVztBQUFFLG1CQUFTLFVBQVUsS0FBSyxXQUM1QztBQUFFLG9CQUFRLE1BQU0sSUFBSSxLQUFLLFVBQVUsTUFBTTtBQUFBLFVBQUU7QUFBQSxRQUFFO0FBRS9DLGVBQU87QUFBQSxNQUNYO0FBSUUsVUFBSSxpQkFBaUIsQ0FBQTtBQUNyQixlQUFTLFdBQVcsTUFBTSxZQUFZO0FBQ3BDLFlBQUksT0FBTyxlQUFlLGVBQWUsSUFBSSxJQUFJLGVBQWUsSUFBSSxJQUFLLGVBQWUsSUFBSSxJQUFJLENBQUE7QUFDaEcsZ0JBQVEsWUFBWSxJQUFJO0FBQUEsTUFDNUI7QUFFRSxlQUFTLFVBQVUsTUFBTSxPQUFPO0FBQzlCLFlBQUksVUFBVSxNQUFNO0FBQUUsaUJBQU87QUFBQSxRQUFLO0FBQ2xDLFlBQUksS0FBSyxXQUFXO0FBQUUsaUJBQU8sS0FBSyxVQUFVLEtBQUs7QUFBQSxRQUFDO0FBQ2xELFlBQUksU0FBUyxDQUFBO0FBQ2IsaUJBQVMsS0FBSyxPQUFPO0FBQ25CLGNBQUksTUFBTSxNQUFNLENBQUM7QUFDakIsY0FBSSxlQUFlLE9BQU87QUFBRSxrQkFBTSxJQUFJLE9BQU8sQ0FBQSxDQUFFO0FBQUEsVUFBRTtBQUNqRCxpQkFBTyxDQUFDLElBQUk7QUFBQSxRQUNsQjtBQUNJLGVBQU87QUFBQSxNQUNYO0FBSUUsZUFBUyxVQUFVLE1BQU0sT0FBTztBQUM5QixZQUFJO0FBQ0osZUFBTyxLQUFLLFdBQVc7QUFDckIsaUJBQU8sS0FBSyxVQUFVLEtBQUs7QUFDM0IsY0FBSSxDQUFDLFFBQVEsS0FBSyxRQUFRLE1BQU07QUFBRTtBQUFBLFVBQUs7QUFDdkMsa0JBQVEsS0FBSztBQUNiLGlCQUFPLEtBQUs7QUFBQSxRQUNsQjtBQUNJLGVBQU8sUUFBUSxFQUFDLE1BQVksTUFBWTtBQUFBLE1BQzVDO0FBRUUsZUFBUyxXQUFXLE1BQU0sSUFBSSxJQUFJO0FBQ2hDLGVBQU8sS0FBSyxhQUFhLEtBQUssV0FBVyxJQUFJLEVBQUUsSUFBSTtBQUFBLE1BQ3ZEO0FBT0UsVUFBSSxlQUFlLFNBQVMsUUFBUSxTQUFTLFlBQVk7QUFDdkQsYUFBSyxNQUFNLEtBQUssUUFBUTtBQUN4QixhQUFLLFNBQVM7QUFDZCxhQUFLLFVBQVUsV0FBVztBQUMxQixhQUFLLGdCQUFnQixLQUFLLGtCQUFrQjtBQUM1QyxhQUFLLFlBQVk7QUFDakIsYUFBSyxhQUFhO0FBQUEsTUFDdEI7QUFFRSxtQkFBYSxVQUFVLE1BQU0sV0FBWTtBQUFDLGVBQU8sS0FBSyxPQUFPLEtBQUssT0FBTztBQUFBLE1BQU07QUFDL0UsbUJBQWEsVUFBVSxNQUFNLFdBQVk7QUFBQyxlQUFPLEtBQUssT0FBTyxLQUFLO0FBQUEsTUFBUztBQUMzRSxtQkFBYSxVQUFVLE9BQU8sV0FBWTtBQUFDLGVBQU8sS0FBSyxPQUFPLE9BQU8sS0FBSyxHQUFHLEtBQUs7QUFBQSxNQUFTO0FBQzNGLG1CQUFhLFVBQVUsT0FBTyxXQUFZO0FBQ3hDLFlBQUksS0FBSyxNQUFNLEtBQUssT0FBTyxRQUN6QjtBQUFFLGlCQUFPLEtBQUssT0FBTyxPQUFPLEtBQUssS0FBSztBQUFBLFFBQUM7QUFBQSxNQUM3QztBQUNFLG1CQUFhLFVBQVUsTUFBTSxTQUFVLE9BQU87QUFDNUMsWUFBSSxLQUFLLEtBQUssT0FBTyxPQUFPLEtBQUssR0FBRztBQUNwQyxZQUFJO0FBQ0osWUFBSSxPQUFPLFNBQVMsVUFBVTtBQUFFLGVBQUssTUFBTTtBQUFBLFFBQU0sT0FDNUM7QUFBRSxlQUFLLE9BQU8sTUFBTSxPQUFPLE1BQU0sS0FBSyxFQUFFLElBQUksTUFBTSxFQUFFO0FBQUEsUUFBRztBQUM1RCxZQUFJLElBQUk7QUFBQyxZQUFFLEtBQUs7QUFBSyxpQkFBTztBQUFBLFFBQUU7QUFBQSxNQUNsQztBQUNFLG1CQUFhLFVBQVUsV0FBVyxTQUFVLE9BQU87QUFDakQsWUFBSSxRQUFRLEtBQUs7QUFDakIsZUFBTyxLQUFLLElBQUksS0FBSyxHQUFFO0FBQUEsUUFBQTtBQUN2QixlQUFPLEtBQUssTUFBTTtBQUFBLE1BQ3RCO0FBQ0UsbUJBQWEsVUFBVSxXQUFXLFdBQVk7QUFDNUMsWUFBSSxRQUFRLEtBQUs7QUFDakIsZUFBTyxhQUFhLEtBQUssS0FBSyxPQUFPLE9BQU8sS0FBSyxHQUFHLENBQUMsR0FBRztBQUFFLFlBQUUsS0FBSztBQUFBLFFBQUk7QUFDckUsZUFBTyxLQUFLLE1BQU07QUFBQSxNQUN0QjtBQUNFLG1CQUFhLFVBQVUsWUFBWSxXQUFZO0FBQUMsYUFBSyxNQUFNLEtBQUssT0FBTztBQUFBLE1BQU87QUFDOUUsbUJBQWEsVUFBVSxTQUFTLFNBQVUsSUFBSTtBQUM1QyxZQUFJLFFBQVEsS0FBSyxPQUFPLFFBQVEsSUFBSSxLQUFLLEdBQUc7QUFDNUMsWUFBSSxRQUFRLElBQUk7QUFBQyxlQUFLLE1BQU07QUFBTyxpQkFBTztBQUFBLFFBQUk7QUFBQSxNQUNsRDtBQUNFLG1CQUFhLFVBQVUsU0FBUyxTQUFVLEdBQUc7QUFBQyxhQUFLLE9BQU87QUFBQSxNQUFFO0FBQzVELG1CQUFhLFVBQVUsU0FBUyxXQUFZO0FBQzFDLFlBQUksS0FBSyxnQkFBZ0IsS0FBSyxPQUFPO0FBQ25DLGVBQUssa0JBQWtCLFlBQVksS0FBSyxRQUFRLEtBQUssT0FBTyxLQUFLLFNBQVMsS0FBSyxlQUFlLEtBQUssZUFBZTtBQUNsSCxlQUFLLGdCQUFnQixLQUFLO0FBQUEsUUFDaEM7QUFDSSxlQUFPLEtBQUssbUJBQW1CLEtBQUssWUFBWSxZQUFZLEtBQUssUUFBUSxLQUFLLFdBQVcsS0FBSyxPQUFPLElBQUk7QUFBQSxNQUM3RztBQUNFLG1CQUFhLFVBQVUsY0FBYyxXQUFZO0FBQy9DLGVBQU8sWUFBWSxLQUFLLFFBQVEsTUFBTSxLQUFLLE9BQU8sS0FDL0MsS0FBSyxZQUFZLFlBQVksS0FBSyxRQUFRLEtBQUssV0FBVyxLQUFLLE9BQU8sSUFBSTtBQUFBLE1BQ2pGO0FBQ0UsbUJBQWEsVUFBVSxRQUFRLFNBQVUsU0FBUyxTQUFTLGlCQUFpQjtBQUMxRSxZQUFJLE9BQU8sV0FBVyxVQUFVO0FBQzlCLGNBQUksUUFBUSxTQUFVLEtBQUs7QUFBRSxtQkFBTyxrQkFBa0IsSUFBSSxZQUFXLElBQUs7QUFBQSxVQUFJO0FBQzlFLGNBQUksU0FBUyxLQUFLLE9BQU8sT0FBTyxLQUFLLEtBQUssUUFBUSxNQUFNO0FBQ3hELGNBQUksTUFBTSxNQUFNLEtBQUssTUFBTSxPQUFPLEdBQUc7QUFDbkMsZ0JBQUksWUFBWSxPQUFPO0FBQUUsbUJBQUssT0FBTyxRQUFRO0FBQUEsWUFBTztBQUNwRCxtQkFBTztBQUFBLFVBQ2Y7QUFBQSxRQUNBLE9BQVc7QUFDTCxjQUFJLFFBQVEsS0FBSyxPQUFPLE1BQU0sS0FBSyxHQUFHLEVBQUUsTUFBTSxPQUFPO0FBQ3JELGNBQUksU0FBUyxNQUFNLFFBQVEsR0FBRztBQUFFLG1CQUFPO0FBQUEsVUFBSTtBQUMzQyxjQUFJLFNBQVMsWUFBWSxPQUFPO0FBQUUsaUJBQUssT0FBTyxNQUFNLENBQUMsRUFBRTtBQUFBLFVBQU87QUFDOUQsaUJBQU87QUFBQSxRQUNiO0FBQUEsTUFDQTtBQUNFLG1CQUFhLFVBQVUsVUFBVSxXQUFXO0FBQUMsZUFBTyxLQUFLLE9BQU8sTUFBTSxLQUFLLE9BQU8sS0FBSyxHQUFHO0FBQUEsTUFBQztBQUMzRixtQkFBYSxVQUFVLGlCQUFpQixTQUFVLEdBQUcsT0FBTztBQUMxRCxhQUFLLGFBQWE7QUFDbEIsWUFBSTtBQUFFLGlCQUFPO1FBQU8sVUFDeEI7QUFBYyxlQUFLLGFBQWE7QUFBQSxRQUFFO0FBQUEsTUFDbEM7QUFDRSxtQkFBYSxVQUFVLFlBQVksU0FBVSxHQUFHO0FBQzlDLFlBQUksU0FBUyxLQUFLO0FBQ2xCLGVBQU8sVUFBVSxPQUFPLFVBQVUsQ0FBQztBQUFBLE1BQ3ZDO0FBQ0UsbUJBQWEsVUFBVSxZQUFZLFdBQVk7QUFDN0MsWUFBSSxTQUFTLEtBQUs7QUFDbEIsZUFBTyxVQUFVLE9BQU8sVUFBVSxLQUFLLEdBQUc7QUFBQSxNQUM5QztBQUdFLGVBQVMsUUFBUUQsTUFBSyxHQUFHO0FBQ3ZCLGFBQUtBLEtBQUk7QUFDVCxZQUFJLElBQUksS0FBSyxLQUFLQSxLQUFJLE1BQU07QUFBRSxnQkFBTSxJQUFJLE1BQU0sdUJBQXVCLElBQUlBLEtBQUksU0FBUyxtQkFBbUI7QUFBQSxRQUFDO0FBQzFHLFlBQUksUUFBUUE7QUFDWixlQUFPLENBQUMsTUFBTSxPQUFPO0FBQ25CLG1CQUFTRixLQUFJLEtBQUksRUFBRUEsSUFBRztBQUNwQixnQkFBSSxRQUFRLE1BQU0sU0FBU0EsRUFBQyxHQUFHLEtBQUssTUFBTSxVQUFTO0FBQ25ELGdCQUFJLElBQUksSUFBSTtBQUFFLHNCQUFRO0FBQU87QUFBQSxZQUFLO0FBQ2xDLGlCQUFLO0FBQUEsVUFDYjtBQUFBLFFBQ0E7QUFDSSxlQUFPLE1BQU0sTUFBTSxDQUFDO0FBQUEsTUFDeEI7QUFJRSxlQUFTLFdBQVdFLE1BQUssT0FBTyxLQUFLO0FBQ25DLFlBQUksTUFBTSxDQUFBLEdBQUksSUFBSSxNQUFNO0FBQ3hCLFFBQUFBLEtBQUksS0FBSyxNQUFNLE1BQU0sSUFBSSxPQUFPLEdBQUcsU0FBVSxNQUFNO0FBQ2pELGNBQUksT0FBTyxLQUFLO0FBQ2hCLGNBQUksS0FBSyxJQUFJLE1BQU07QUFBRSxtQkFBTyxLQUFLLE1BQU0sR0FBRyxJQUFJLEVBQUU7QUFBQSxVQUFFO0FBQ2xELGNBQUksS0FBSyxNQUFNLE1BQU07QUFBRSxtQkFBTyxLQUFLLE1BQU0sTUFBTSxFQUFFO0FBQUEsVUFBRTtBQUNuRCxjQUFJLEtBQUssSUFBSTtBQUNiLFlBQUU7QUFBQSxRQUNSLENBQUs7QUFDRCxlQUFPO0FBQUEsTUFDWDtBQUVFLGVBQVMsU0FBU0EsTUFBSyxNQUFNLElBQUk7QUFDL0IsWUFBSSxNQUFNLENBQUE7QUFDVixRQUFBQSxLQUFJLEtBQUssTUFBTSxJQUFJLFNBQVUsTUFBTTtBQUFFLGNBQUksS0FBSyxLQUFLLElBQUk7QUFBQSxRQUFFLENBQUU7QUFDM0QsZUFBTztBQUFBLE1BQ1g7QUFJRSxlQUFTLGlCQUFpQixNQUFNLFFBQVE7QUFDdEMsWUFBSSxPQUFPLFNBQVMsS0FBSztBQUN6QixZQUFJLE1BQU07QUFBRSxtQkFBUyxJQUFJLE1BQU0sR0FBRyxJQUFJLEVBQUUsUUFBUTtBQUFFLGNBQUUsVUFBVTtBQUFBLFVBQUs7QUFBQSxRQUFFO0FBQUEsTUFDekU7QUFJRSxlQUFTLE9BQU8sTUFBTTtBQUNwQixZQUFJLEtBQUssVUFBVSxNQUFNO0FBQUUsaUJBQU87QUFBQSxRQUFJO0FBQ3RDLFlBQUksTUFBTSxLQUFLLFFBQVEsS0FBSyxRQUFRLElBQUksT0FBTyxJQUFJO0FBQ25ELGlCQUFTLFFBQVEsSUFBSSxRQUFRLE9BQU8sTUFBTSxPQUFPLFFBQVEsTUFBTSxRQUFRO0FBQ3JFLG1CQUFTRixLQUFJLEtBQUksRUFBRUEsSUFBRztBQUNwQixnQkFBSSxNQUFNLFNBQVNBLEVBQUMsS0FBSyxLQUFLO0FBQUU7QUFBQSxZQUFLO0FBQ3JDLGtCQUFNLE1BQU0sU0FBU0EsRUFBQyxFQUFFLFVBQVM7QUFBQSxVQUN6QztBQUFBLFFBQ0E7QUFDSSxlQUFPLEtBQUssSUFBSTtBQUFBLE1BQ3BCO0FBSUUsZUFBUyxhQUFhLE9BQU8sR0FBRztBQUM5QixZQUFJLElBQUksTUFBTTtBQUNkLGNBQU8sSUFBRztBQUNSLG1CQUFTSyxPQUFNLEdBQUdBLE9BQU0sTUFBTSxTQUFTLFFBQVEsRUFBRUEsTUFBSztBQUNwRCxnQkFBSSxRQUFRLE1BQU0sU0FBU0EsSUFBRyxHQUFHLEtBQUssTUFBTTtBQUM1QyxnQkFBSSxJQUFJLElBQUk7QUFBRSxzQkFBUTtBQUFPLHVCQUFTO0FBQUEsWUFBSztBQUMzQyxpQkFBSztBQUNMLGlCQUFLLE1BQU0sVUFBUztBQUFBLFVBQzVCO0FBQ00saUJBQU87QUFBQSxRQUNiLFNBQWEsQ0FBQyxNQUFNO0FBQ2hCLFlBQUlMLEtBQUk7QUFDUixlQUFPQSxLQUFJLE1BQU0sTUFBTSxRQUFRLEVBQUVBLElBQUc7QUFDbEMsY0FBSSxPQUFPLE1BQU0sTUFBTUEsRUFBQyxHQUFHLEtBQUssS0FBSztBQUNyQyxjQUFJLElBQUksSUFBSTtBQUFFO0FBQUEsVUFBSztBQUNuQixlQUFLO0FBQUEsUUFDWDtBQUNJLGVBQU8sSUFBSUE7QUFBQSxNQUNmO0FBRUUsZUFBUyxPQUFPRSxNQUFLLEdBQUc7QUFBQyxlQUFPLEtBQUtBLEtBQUksU0FBUyxJQUFJQSxLQUFJLFFBQVFBLEtBQUk7QUFBQSxNQUFJO0FBRTFFLGVBQVMsY0FBYyxTQUFTRixJQUFHO0FBQ2pDLGVBQU8sT0FBTyxRQUFRLG9CQUFvQkEsS0FBSSxRQUFRLGVBQWUsQ0FBQztBQUFBLE1BQzFFO0FBR0UsZUFBUyxJQUFJLE1BQU0sSUFBSSxRQUFRO0FBQzdCLFlBQUssV0FBVyxPQUFTLFVBQVM7QUFFbEMsWUFBSSxFQUFFLGdCQUFnQixNQUFNO0FBQUUsaUJBQU8sSUFBSSxJQUFJLE1BQU0sSUFBSSxNQUFNO0FBQUEsUUFBQztBQUM5RCxhQUFLLE9BQU87QUFDWixhQUFLLEtBQUs7QUFDVixhQUFLLFNBQVM7QUFBQSxNQUNsQjtBQUlFLGVBQVMsSUFBSSxHQUFHLEdBQUc7QUFBRSxlQUFPLEVBQUUsT0FBTyxFQUFFLFFBQVEsRUFBRSxLQUFLLEVBQUU7QUFBQSxNQUFFO0FBRTFELGVBQVMsZUFBZSxHQUFHLEdBQUc7QUFBRSxlQUFPLEVBQUUsVUFBVSxFQUFFLFVBQVUsSUFBSSxHQUFHLENBQUMsS0FBSztBQUFBLE1BQUM7QUFFN0UsZUFBUyxRQUFRLEdBQUc7QUFBQyxlQUFPLElBQUksRUFBRSxNQUFNLEVBQUUsRUFBRTtBQUFBLE1BQUM7QUFDN0MsZUFBUyxPQUFPLEdBQUcsR0FBRztBQUFFLGVBQU8sSUFBSSxHQUFHLENBQUMsSUFBSSxJQUFJLElBQUk7QUFBQSxNQUFDO0FBQ3BELGVBQVMsT0FBTyxHQUFHLEdBQUc7QUFBRSxlQUFPLElBQUksR0FBRyxDQUFDLElBQUksSUFBSSxJQUFJO0FBQUEsTUFBQztBQUlwRCxlQUFTLFNBQVNFLE1BQUssR0FBRztBQUFDLGVBQU8sS0FBSyxJQUFJQSxLQUFJLE9BQU8sS0FBSyxJQUFJLEdBQUdBLEtBQUksUUFBUUEsS0FBSSxPQUFPLENBQUMsQ0FBQztBQUFBLE1BQUM7QUFDNUYsZUFBUyxRQUFRQSxNQUFLLEtBQUs7QUFDekIsWUFBSSxJQUFJLE9BQU9BLEtBQUksT0FBTztBQUFFLGlCQUFPLElBQUlBLEtBQUksT0FBTyxDQUFDO0FBQUEsUUFBQztBQUNwRCxZQUFJLE9BQU9BLEtBQUksUUFBUUEsS0FBSSxPQUFPO0FBQ2xDLFlBQUksSUFBSSxPQUFPLE1BQU07QUFBRSxpQkFBTyxJQUFJLE1BQU0sUUFBUUEsTUFBSyxJQUFJLEVBQUUsS0FBSyxNQUFNO0FBQUEsUUFBQztBQUN2RSxlQUFPLFVBQVUsS0FBSyxRQUFRQSxNQUFLLElBQUksSUFBSSxFQUFFLEtBQUssTUFBTTtBQUFBLE1BQzVEO0FBQ0UsZUFBUyxVQUFVLEtBQUssU0FBUztBQUMvQixZQUFJLEtBQUssSUFBSTtBQUNiLFlBQUksTUFBTSxRQUFRLEtBQUssU0FBUztBQUFFLGlCQUFPLElBQUksSUFBSSxNQUFNLE9BQU87QUFBQSxRQUFDLFdBQ3RELEtBQUssR0FBRztBQUFFLGlCQUFPLElBQUksSUFBSSxNQUFNLENBQUM7QUFBQSxRQUFDLE9BQ3JDO0FBQUUsaUJBQU87QUFBQSxRQUFHO0FBQUEsTUFDckI7QUFDRSxlQUFTLGFBQWFBLE1BQUssT0FBTztBQUNoQyxZQUFJLE1BQU0sQ0FBQTtBQUNWLGlCQUFTRixLQUFJLEdBQUdBLEtBQUksTUFBTSxRQUFRQSxNQUFLO0FBQUUsY0FBSUEsRUFBQyxJQUFJLFFBQVFFLE1BQUssTUFBTUYsRUFBQyxDQUFDO0FBQUEsUUFBRTtBQUN6RSxlQUFPO0FBQUEsTUFDWDtBQUVFLFVBQUksZUFBZSxTQUFTLE9BQU8sV0FBVztBQUM1QyxhQUFLLFFBQVE7QUFDYixhQUFLLFlBQVk7QUFBQSxNQUNyQjtBQUVFLFVBQUksVUFBVSxTQUFTRSxNQUFLLE9BQU8sTUFBTSxXQUFXO0FBQ2xELGFBQUssUUFBUTtBQUNiLGFBQUssTUFBTUE7QUFDWCxhQUFLLE9BQU87QUFDWixhQUFLLGVBQWUsYUFBYTtBQUNqQyxhQUFLLGFBQWE7QUFDbEIsYUFBSyxlQUFlO0FBQUEsTUFDeEI7QUFFRSxjQUFRLFVBQVUsWUFBWSxTQUFVLEdBQUc7QUFDekMsWUFBSSxPQUFPLEtBQUssSUFBSSxRQUFRLEtBQUssT0FBTyxDQUFDO0FBQ3pDLFlBQUksUUFBUSxRQUFRLElBQUksS0FBSyxjQUFjO0FBQUUsZUFBSyxlQUFlO0FBQUEsUUFBRTtBQUNuRSxlQUFPO0FBQUEsTUFDWDtBQUVFLGNBQVEsVUFBVSxZQUFZLFNBQVUsR0FBRztBQUN6QyxZQUFJLENBQUMsS0FBSyxZQUFZO0FBQUUsaUJBQU87QUFBQSxRQUFJO0FBQ25DLGVBQU8sS0FBSyxXQUFXLEtBQUssWUFBWSxLQUFLLEdBQzNDO0FBQUUsZUFBSyxnQkFBZ0I7QUFBQSxRQUFFO0FBQzNCLFlBQUksT0FBTyxLQUFLLFdBQVcsS0FBSyxlQUFlLENBQUM7QUFDaEQsZUFBTztBQUFBLFVBQUMsTUFBTSxRQUFRLEtBQUssUUFBUSxtQkFBbUIsRUFBRTtBQUFBLFVBQ2hELE1BQU0sS0FBSyxXQUFXLEtBQUssWUFBWSxJQUFJO0FBQUEsUUFBQztBQUFBLE1BQ3hEO0FBRUUsY0FBUSxVQUFVLFdBQVcsV0FBWTtBQUN2QyxhQUFLO0FBQ0wsWUFBSSxLQUFLLGVBQWUsR0FBRztBQUFFLGVBQUs7QUFBQSxRQUFlO0FBQUEsTUFDckQ7QUFFRSxjQUFRLFlBQVksU0FBVUEsTUFBSyxPQUFPLE1BQU07QUFDOUMsWUFBSSxpQkFBaUIsY0FDbkI7QUFBRSxpQkFBTyxJQUFJLFFBQVFBLE1BQUssVUFBVUEsS0FBSSxNQUFNLE1BQU0sS0FBSyxHQUFHLE1BQU0sTUFBTSxTQUFTO0FBQUEsUUFBQyxPQUVsRjtBQUFFLGlCQUFPLElBQUksUUFBUUEsTUFBSyxVQUFVQSxLQUFJLE1BQU0sS0FBSyxHQUFHLElBQUk7QUFBQSxRQUFDO0FBQUEsTUFDakU7QUFFRSxjQUFRLFVBQVUsT0FBTyxTQUFVLE1BQU07QUFDdkMsWUFBSSxRQUFRLFNBQVMsUUFBUSxVQUFVLEtBQUssSUFBSSxNQUFNLEtBQUssS0FBSyxJQUFJLEtBQUs7QUFDekUsZUFBTyxLQUFLLGVBQWUsSUFBSSxJQUFJLGFBQWEsT0FBTyxLQUFLLFlBQVksSUFBSTtBQUFBLE1BQ2hGO0FBT0UsZUFBUyxjQUFjLElBQUksTUFBTSxTQUFTLFlBQVk7QUFHcEQsWUFBSSxLQUFLLENBQUMsR0FBRyxNQUFNLE9BQU8sR0FBRyxjQUFjLENBQUE7QUFFM0M7QUFBQSxVQUFRO0FBQUEsVUFBSSxLQUFLO0FBQUEsVUFBTSxHQUFHLElBQUk7QUFBQSxVQUFNO0FBQUEsVUFBUyxTQUFVLEtBQUssT0FBTztBQUFFLG1CQUFPLEdBQUcsS0FBSyxLQUFLLEtBQUs7QUFBQSxVQUFFO0FBQUEsVUFDeEY7QUFBQSxVQUFhO0FBQUEsUUFBVTtBQUMvQixZQUFJLFFBQVEsUUFBUTtBQUdwQixZQUFJLE9BQU8sU0FBV08sSUFBSTtBQUN4QixrQkFBUSxhQUFhO0FBQ3JCLGNBQUksVUFBVSxHQUFHLE1BQU0sU0FBU0EsRUFBQyxHQUFHVCxLQUFJLEdBQUcsS0FBSztBQUNoRCxrQkFBUSxRQUFRO0FBQ2hCLGtCQUFRLElBQUksS0FBSyxNQUFNLFFBQVEsTUFBTSxTQUFTLFNBQVUsS0FBSyxPQUFPO0FBQ2xFLGdCQUFJLFFBQVFBO0FBRVosbUJBQU8sS0FBSyxLQUFLO0FBQ2Ysa0JBQUksUUFBUSxHQUFHQSxFQUFDO0FBQ2hCLGtCQUFJLFFBQVEsS0FDVjtBQUFFLG1CQUFHLE9BQU9BLElBQUcsR0FBRyxLQUFLLEdBQUdBLEtBQUUsQ0FBQyxHQUFHLEtBQUs7QUFBQSxjQUFFO0FBQ3pDLGNBQUFBLE1BQUs7QUFDTCxtQkFBSyxLQUFLLElBQUksS0FBSyxLQUFLO0FBQUEsWUFDbEM7QUFDUSxnQkFBSSxDQUFDLE9BQU87QUFBRTtBQUFBLFlBQU07QUFDcEIsZ0JBQUksUUFBUSxRQUFRO0FBQ2xCLGlCQUFHLE9BQU8sT0FBT0EsS0FBSSxPQUFPLEtBQUssYUFBYSxLQUFLO0FBQ25ELGNBQUFBLEtBQUksUUFBUTtBQUFBLFlBQ3RCLE9BQWU7QUFDTCxxQkFBTyxRQUFRQSxJQUFHLFNBQVMsR0FBRztBQUM1QixvQkFBSSxNQUFNLEdBQUcsUUFBTSxDQUFDO0FBQ3BCLG1CQUFHLFFBQU0sQ0FBQyxLQUFLLE1BQU0sTUFBTSxNQUFNLE1BQU0sYUFBYTtBQUFBLGNBQ2hFO0FBQUEsWUFDQTtBQUFBLFVBQ0EsR0FBUyxXQUFXO0FBQ2Qsa0JBQVEsUUFBUTtBQUNoQixrQkFBUSxhQUFhO0FBQ3JCLGtCQUFRLGVBQWU7QUFBQSxRQUM3QjtBQUVJLGlCQUFTLElBQUksR0FBRyxJQUFJLEdBQUcsTUFBTSxTQUFTLFFBQVEsRUFBRSxFQUFHLE1BQU0sQ0FBQztBQUUxRCxlQUFPLEVBQUMsUUFBUSxJQUFJLFNBQVMsWUFBWSxXQUFXLFlBQVksWUFBWSxjQUFjLEtBQUk7QUFBQSxNQUNsRztBQUVFLGVBQVMsY0FBYyxJQUFJLE1BQU0sZ0JBQWdCO0FBQy9DLFlBQUksQ0FBQyxLQUFLLFVBQVUsS0FBSyxPQUFPLENBQUMsS0FBSyxHQUFHLE1BQU0sU0FBUztBQUN0RCxjQUFJLFVBQVUsaUJBQWlCLElBQUksT0FBTyxJQUFJLENBQUM7QUFDL0MsY0FBSSxhQUFhLEtBQUssS0FBSyxTQUFTLEdBQUcsUUFBUSxzQkFBc0IsVUFBVSxHQUFHLElBQUksTUFBTSxRQUFRLEtBQUs7QUFDekcsY0FBSSxTQUFTLGNBQWMsSUFBSSxNQUFNLE9BQU87QUFDNUMsY0FBSSxZQUFZO0FBQUUsb0JBQVEsUUFBUTtBQUFBLFVBQVc7QUFDN0MsZUFBSyxhQUFhLFFBQVEsS0FBSyxDQUFDLFVBQVU7QUFDMUMsZUFBSyxTQUFTLE9BQU87QUFDckIsY0FBSSxPQUFPLFNBQVM7QUFBRSxpQkFBSyxlQUFlLE9BQU87QUFBQSxVQUFRLFdBQ2hELEtBQUssY0FBYztBQUFFLGlCQUFLLGVBQWU7QUFBQSxVQUFLO0FBQ3ZELGNBQUksbUJBQW1CLEdBQUcsSUFBSSxtQkFDNUI7QUFBRSxlQUFHLElBQUksZUFBZSxLQUFLLElBQUksR0FBRyxJQUFJLGNBQWMsRUFBRSxHQUFHLElBQUksaUJBQWlCO0FBQUEsVUFBRTtBQUFBLFFBQzFGO0FBQ0ksZUFBTyxLQUFLO0FBQUEsTUFDaEI7QUFFRSxlQUFTLGlCQUFpQixJQUFJLEdBQUcsU0FBUztBQUN4QyxZQUFJRSxPQUFNLEdBQUcsS0FBSyxVQUFVLEdBQUc7QUFDL0IsWUFBSSxDQUFDQSxLQUFJLEtBQUssWUFBWTtBQUFFLGlCQUFPLElBQUksUUFBUUEsTUFBSyxNQUFNLENBQUM7QUFBQSxRQUFDO0FBQzVELFlBQUksUUFBUSxjQUFjLElBQUksR0FBRyxPQUFPO0FBQ3hDLFlBQUksUUFBUSxRQUFRQSxLQUFJLFNBQVMsUUFBUUEsTUFBSyxRQUFRLENBQUMsRUFBRTtBQUN6RCxZQUFJLFVBQVUsUUFBUSxRQUFRLFVBQVVBLE1BQUssT0FBTyxLQUFLLElBQUksSUFBSSxRQUFRQSxNQUFLLFdBQVdBLEtBQUksSUFBSSxHQUFHLEtBQUs7QUFFekcsUUFBQUEsS0FBSSxLQUFLLE9BQU8sR0FBRyxTQUFVLE1BQU07QUFDakMsc0JBQVksSUFBSSxLQUFLLE1BQU0sT0FBTztBQUNsQyxjQUFJLE1BQU0sUUFBUTtBQUNsQixlQUFLLGFBQWEsT0FBTyxJQUFJLEtBQUssTUFBTSxLQUFLLEtBQUssT0FBTyxRQUFRLFlBQVksTUFBTSxRQUFRLFNBQVMsUUFBUSxLQUFJLElBQUs7QUFDckgsa0JBQVEsU0FBUTtBQUFBLFFBQ3RCLENBQUs7QUFDRCxZQUFJLFNBQVM7QUFBRSxVQUFBQSxLQUFJLGVBQWUsUUFBUTtBQUFBLFFBQUs7QUFDL0MsZUFBTztBQUFBLE1BQ1g7QUFLRSxlQUFTLFlBQVksSUFBSSxNQUFNLFNBQVMsU0FBUztBQUMvQyxZQUFJLE9BQU8sR0FBRyxJQUFJO0FBQ2xCLFlBQUksU0FBUyxJQUFJLGFBQWEsTUFBTSxHQUFHLFFBQVEsU0FBUyxPQUFPO0FBQy9ELGVBQU8sUUFBUSxPQUFPLE1BQU0sV0FBVztBQUN2QyxZQUFJLFFBQVEsSUFBSTtBQUFFLHdCQUFjLE1BQU0sUUFBUSxLQUFLO0FBQUEsUUFBRTtBQUNyRCxlQUFPLENBQUMsT0FBTyxPQUFPO0FBQ3BCLG9CQUFVLE1BQU0sUUFBUSxRQUFRLEtBQUs7QUFDckMsaUJBQU8sUUFBUSxPQUFPO0FBQUEsUUFDNUI7QUFBQSxNQUNBO0FBRUUsZUFBUyxjQUFjLE1BQU0sT0FBTztBQUNsQyxZQUFJLEtBQUssV0FBVztBQUFFLGlCQUFPLEtBQUssVUFBVSxLQUFLO0FBQUEsUUFBQztBQUNsRCxZQUFJLENBQUMsS0FBSyxXQUFXO0FBQUU7QUFBQSxRQUFNO0FBQzdCLFlBQUksUUFBUSxVQUFVLE1BQU0sS0FBSztBQUNqQyxZQUFJLE1BQU0sS0FBSyxXQUFXO0FBQUUsaUJBQU8sTUFBTSxLQUFLLFVBQVUsTUFBTSxLQUFLO0FBQUEsUUFBQztBQUFBLE1BQ3hFO0FBRUUsZUFBUyxVQUFVLE1BQU0sUUFBUSxPQUFPLE9BQU87QUFDN0MsaUJBQVNGLEtBQUksR0FBR0EsS0FBSSxJQUFJQSxNQUFLO0FBQzNCLGNBQUksT0FBTztBQUFFLGtCQUFNLENBQUMsSUFBSSxVQUFVLE1BQU0sS0FBSyxFQUFFO0FBQUEsVUFBSztBQUNwRCxjQUFJLFFBQVEsS0FBSyxNQUFNLFFBQVEsS0FBSztBQUNwQyxjQUFJLE9BQU8sTUFBTSxPQUFPLE9BQU87QUFBRSxtQkFBTztBQUFBLFVBQUs7QUFBQSxRQUNuRDtBQUNJLGNBQU0sSUFBSSxNQUFNLFVBQVUsS0FBSyxPQUFPLDRCQUE0QjtBQUFBLE1BQ3RFO0FBRUUsVUFBSSxRQUFRLFNBQVMsUUFBUSxNQUFNLE9BQU87QUFDeEMsYUFBSyxRQUFRLE9BQU87QUFBTyxhQUFLLE1BQU0sT0FBTztBQUM3QyxhQUFLLFNBQVMsT0FBTyxRQUFPO0FBQzVCLGFBQUssT0FBTyxRQUFRO0FBQ3BCLGFBQUssUUFBUTtBQUFBLE1BQ2pCO0FBR0UsZUFBUyxVQUFVLElBQUksS0FBSyxTQUFTLFNBQVM7QUFDNUMsWUFBSUUsT0FBTSxHQUFHLEtBQUssT0FBT0EsS0FBSSxNQUFNO0FBQ25DLGNBQU0sUUFBUUEsTUFBSyxHQUFHO0FBQ3RCLFlBQUksT0FBTyxRQUFRQSxNQUFLLElBQUksSUFBSSxHQUFHLFVBQVUsaUJBQWlCLElBQUksSUFBSSxNQUFNLE9BQU87QUFDbkYsWUFBSSxTQUFTLElBQUksYUFBYSxLQUFLLE1BQU0sR0FBRyxRQUFRLFNBQVMsT0FBTyxHQUFHO0FBQ3ZFLFlBQUksU0FBUztBQUFFLG1CQUFTLENBQUE7QUFBQSxRQUFHO0FBQzNCLGdCQUFRLFdBQVcsT0FBTyxNQUFNLElBQUksT0FBTyxDQUFDLE9BQU8sT0FBTztBQUN4RCxpQkFBTyxRQUFRLE9BQU87QUFDdEIsa0JBQVEsVUFBVSxNQUFNLFFBQVEsUUFBUSxLQUFLO0FBQzdDLGNBQUksU0FBUztBQUFFLG1CQUFPLEtBQUssSUFBSSxNQUFNLFFBQVEsT0FBTyxVQUFVQSxLQUFJLE1BQU0sUUFBUSxLQUFLLENBQUMsQ0FBQztBQUFBLFVBQUU7QUFBQSxRQUMvRjtBQUNJLGVBQU8sVUFBVSxTQUFTLElBQUksTUFBTSxRQUFRLE9BQU8sUUFBUSxLQUFLO0FBQUEsTUFDcEU7QUFFRSxlQUFTLG1CQUFtQixNQUFNLFFBQVE7QUFDeEMsWUFBSSxNQUFNO0FBQUUscUJBQVM7QUFDbkIsZ0JBQUksWUFBWSxLQUFLLE1BQU0sbUNBQW1DO0FBQzlELGdCQUFJLENBQUMsV0FBVztBQUFFO0FBQUEsWUFBSztBQUN2QixtQkFBTyxLQUFLLE1BQU0sR0FBRyxVQUFVLEtBQUssSUFBSSxLQUFLLE1BQU0sVUFBVSxRQUFRLFVBQVUsQ0FBQyxFQUFFLE1BQU07QUFDeEYsZ0JBQUlDLFFBQU8sVUFBVSxDQUFDLElBQUksWUFBWTtBQUN0QyxnQkFBSSxPQUFPQSxLQUFJLEtBQUssTUFDbEI7QUFBRSxxQkFBT0EsS0FBSSxJQUFJLFVBQVUsQ0FBQztBQUFBLFlBQUUsV0FDdkIsQ0FBRSxJQUFJLE9BQU8sY0FBYyxVQUFVLENBQUMsSUFBSSxXQUFXLEVBQUcsS0FBSyxPQUFPQSxLQUFJLENBQUMsR0FDaEY7QUFBRSxxQkFBT0EsS0FBSSxLQUFLLE1BQU0sVUFBVSxDQUFDO0FBQUEsWUFBRTtBQUFBLFVBQzdDO0FBQUEsUUFBSztBQUNELGVBQU87QUFBQSxNQUNYO0FBR0UsZUFBUyxRQUFRLElBQUksTUFBTSxNQUFNLFNBQVMsR0FBRyxhQUFhLFlBQVk7QUFDcEUsWUFBSSxlQUFlLEtBQUs7QUFDeEIsWUFBSSxnQkFBZ0IsTUFBTTtBQUFFLHlCQUFlLEdBQUcsUUFBUTtBQUFBLFFBQWE7QUFDbkUsWUFBSSxXQUFXLEdBQUcsV0FBVztBQUM3QixZQUFJLFNBQVMsSUFBSSxhQUFhLE1BQU0sR0FBRyxRQUFRLFNBQVMsT0FBTyxHQUFHO0FBQ2xFLFlBQUksUUFBUSxHQUFHLFFBQVEsZ0JBQWdCLENBQUMsSUFBSTtBQUM1QyxZQUFJLFFBQVEsSUFBSTtBQUFFLDZCQUFtQixjQUFjLE1BQU0sUUFBUSxLQUFLLEdBQUcsV0FBVztBQUFBLFFBQUU7QUFDdEYsZUFBTyxDQUFDLE9BQU8sT0FBTztBQUNwQixjQUFJLE9BQU8sTUFBTSxHQUFHLFFBQVEsb0JBQW9CO0FBQzlDLDJCQUFlO0FBQ2YsZ0JBQUksWUFBWTtBQUFFLDBCQUFZLElBQUksTUFBTSxTQUFTLE9BQU8sR0FBRztBQUFBLFlBQUU7QUFDN0QsbUJBQU8sTUFBTSxLQUFLO0FBQ2xCLG9CQUFRO0FBQUEsVUFDaEIsT0FBYTtBQUNMLG9CQUFRLG1CQUFtQixVQUFVLE1BQU0sUUFBUSxRQUFRLE9BQU8sS0FBSyxHQUFHLFdBQVc7QUFBQSxVQUM3RjtBQUNNLGNBQUksT0FBTztBQUNULGdCQUFJLFFBQVEsTUFBTSxDQUFDLEVBQUU7QUFDckIsZ0JBQUksT0FBTztBQUFFLHNCQUFRLFFBQVEsUUFBUSxRQUFRLE1BQU0sUUFBUTtBQUFBLFlBQU87QUFBQSxVQUMxRTtBQUNNLGNBQUksQ0FBQyxnQkFBZ0IsWUFBWSxPQUFPO0FBQ3RDLG1CQUFPLFdBQVcsT0FBTyxPQUFPO0FBQzlCLHlCQUFXLEtBQUssSUFBSSxPQUFPLE9BQU8sV0FBVyxHQUFJO0FBQ2pELGdCQUFFLFVBQVUsUUFBUTtBQUFBLFlBQzlCO0FBQ1EsdUJBQVc7QUFBQSxVQUNuQjtBQUNNLGlCQUFPLFFBQVEsT0FBTztBQUFBLFFBQzVCO0FBQ0ksZUFBTyxXQUFXLE9BQU8sS0FBSztBQUk1QixjQUFJLE1BQU0sS0FBSyxJQUFJLE9BQU8sS0FBSyxXQUFXLEdBQUk7QUFDOUMsWUFBRSxLQUFLLFFBQVE7QUFDZixxQkFBVztBQUFBLFFBQ2pCO0FBQUEsTUFDQTtBQU9FLGVBQVMsY0FBYyxJQUFJLEdBQUcsU0FBUztBQUNyQyxZQUFJLFdBQVcsU0FBU0QsT0FBTSxHQUFHO0FBQ2pDLFlBQUksTUFBTSxVQUFVLEtBQUssS0FBSyxHQUFHLElBQUksS0FBSyxZQUFZLE1BQU87QUFDN0QsaUJBQVMsU0FBUyxHQUFHLFNBQVMsS0FBSyxFQUFFLFFBQVE7QUFDM0MsY0FBSSxVQUFVQSxLQUFJLE9BQU87QUFBRSxtQkFBT0EsS0FBSTtBQUFBLFVBQUs7QUFDM0MsY0FBSSxPQUFPLFFBQVFBLE1BQUssU0FBUyxDQUFDLEdBQUcsUUFBUSxLQUFLO0FBQ2xELGNBQUksVUFBVSxDQUFDLFdBQVcsVUFBVSxpQkFBaUIsZUFBZSxNQUFNLFlBQVksTUFBTUEsS0FBSSxlQUM5RjtBQUFFLG1CQUFPO0FBQUEsVUFBTTtBQUNqQixjQUFJLFdBQVcsWUFBWSxLQUFLLE1BQU0sTUFBTSxHQUFHLFFBQVEsT0FBTztBQUM5RCxjQUFJLFdBQVcsUUFBUSxZQUFZLFVBQVU7QUFDM0Msc0JBQVUsU0FBUztBQUNuQix3QkFBWTtBQUFBLFVBQ3BCO0FBQUEsUUFDQTtBQUNJLGVBQU87QUFBQSxNQUNYO0FBRUUsZUFBUyxnQkFBZ0JBLE1BQUssR0FBRztBQUMvQixRQUFBQSxLQUFJLGVBQWUsS0FBSyxJQUFJQSxLQUFJLGNBQWMsQ0FBQztBQUMvQyxZQUFJQSxLQUFJLG9CQUFvQixJQUFJLElBQUk7QUFBRTtBQUFBLFFBQU07QUFDNUMsWUFBSSxRQUFRQSxLQUFJO0FBQ2hCLGlCQUFTLE9BQU8sSUFBSSxHQUFHLE9BQU8sT0FBTyxRQUFRO0FBQzNDLGNBQUksUUFBUSxRQUFRQSxNQUFLLElBQUksRUFBRTtBQUkvQixjQUFJLFVBQVUsRUFBRSxpQkFBaUIsaUJBQWlCLE9BQU8sTUFBTSxZQUFZLElBQUk7QUFDN0Usb0JBQVEsT0FBTztBQUNmO0FBQUEsVUFDUjtBQUFBLFFBQ0E7QUFDSSxRQUFBQSxLQUFJLG9CQUFvQixLQUFLLElBQUlBLEtBQUksbUJBQW1CLEtBQUs7QUFBQSxNQUNqRTtBQUdFLFVBQUksbUJBQW1CLE9BQU8sb0JBQW9CO0FBRWxELGVBQVMsbUJBQW1CO0FBQzFCLDJCQUFtQjtBQUFBLE1BQ3ZCO0FBRUUsZUFBUyxvQkFBb0I7QUFDM0IsNEJBQW9CO0FBQUEsTUFDeEI7QUFJRSxlQUFTLFdBQVcsUUFBUSxNQUFNLElBQUk7QUFDcEMsYUFBSyxTQUFTO0FBQ2QsYUFBSyxPQUFPO0FBQU0sYUFBSyxLQUFLO0FBQUEsTUFDaEM7QUFHRSxlQUFTLGlCQUFpQixPQUFPLFFBQVE7QUFDdkMsWUFBSSxPQUFPO0FBQUUsbUJBQVNGLEtBQUksR0FBR0EsS0FBSSxNQUFNLFFBQVEsRUFBRUEsSUFBRztBQUNsRCxnQkFBSSxPQUFPLE1BQU1BLEVBQUM7QUFDbEIsZ0JBQUksS0FBSyxVQUFVLFFBQVE7QUFBRSxxQkFBTztBQUFBLFlBQUk7QUFBQSxVQUM5QztBQUFBLFFBQUs7QUFBQSxNQUNMO0FBSUUsZUFBUyxpQkFBaUIsT0FBTyxNQUFNO0FBQ3JDLFlBQUk7QUFDSixpQkFBU0EsS0FBSSxHQUFHQSxLQUFJLE1BQU0sUUFBUSxFQUFFQSxJQUNsQztBQUFFLGNBQUksTUFBTUEsRUFBQyxLQUFLLE1BQU07QUFBRSxhQUFDLE1BQU0sSUFBSSxDQUFBLElBQUssS0FBSyxNQUFNQSxFQUFDLENBQUM7QUFBQSxVQUFFO0FBQUEsUUFBRTtBQUM3RCxlQUFPO0FBQUEsTUFDWDtBQUdFLGVBQVMsY0FBYyxNQUFNLE1BQU0sSUFBSTtBQUNyQyxZQUFJLFdBQVcsTUFBTSxPQUFPLFlBQVksR0FBRyxnQkFBZ0IsR0FBRyxjQUFjLG9CQUFJO0FBQ2hGLFlBQUksWUFBWSxLQUFLLGVBQWUsU0FBUyxJQUFJLEtBQUssV0FBVyxHQUFHO0FBQ2xFLGVBQUssWUFBWSxLQUFLLElBQUk7QUFBQSxRQUNoQyxPQUFXO0FBQ0wsZUFBSyxjQUFjLEtBQUssY0FBYyxLQUFLLFlBQVksT0FBTyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSTtBQUM3RSxjQUFJLFVBQVU7QUFBRSxxQkFBUyxJQUFJLEtBQUssV0FBVztBQUFBLFVBQUU7QUFBQSxRQUNyRDtBQUNJLGFBQUssT0FBTyxXQUFXLElBQUk7QUFBQSxNQUMvQjtBQU1FLGVBQVMsa0JBQWtCLEtBQUssU0FBUyxVQUFVO0FBQ2pELFlBQUk7QUFDSixZQUFJLEtBQUs7QUFBRSxtQkFBU0EsS0FBSSxHQUFHQSxLQUFJLElBQUksUUFBUSxFQUFFQSxJQUFHO0FBQzlDLGdCQUFJLE9BQU8sSUFBSUEsRUFBQyxHQUFHLFNBQVMsS0FBSztBQUNqQyxnQkFBSSxlQUFlLEtBQUssUUFBUSxTQUFTLE9BQU8sZ0JBQWdCLEtBQUssUUFBUSxVQUFVLEtBQUssT0FBTztBQUNuRyxnQkFBSSxnQkFBZ0IsS0FBSyxRQUFRLFdBQVcsT0FBTyxRQUFRLGVBQWUsQ0FBQyxZQUFZLENBQUMsS0FBSyxPQUFPLGFBQWE7QUFDL0csa0JBQUksWUFBWSxLQUFLLE1BQU0sU0FBUyxPQUFPLGlCQUFpQixLQUFLLE1BQU0sVUFBVSxLQUFLLEtBQUs7QUFDMUYsZUFBQyxPQUFPLEtBQUssQ0FBQSxJQUFLLEtBQUssSUFBSSxXQUFXLFFBQVEsS0FBSyxNQUFNLFlBQVksT0FBTyxLQUFLLEVBQUUsQ0FBQztBQUFBLFlBQzdGO0FBQUEsVUFDQTtBQUFBLFFBQUs7QUFDRCxlQUFPO0FBQUEsTUFDWDtBQUNFLGVBQVMsaUJBQWlCLEtBQUssT0FBTyxVQUFVO0FBQzlDLFlBQUk7QUFDSixZQUFJLEtBQUs7QUFBRSxtQkFBU0EsS0FBSSxHQUFHQSxLQUFJLElBQUksUUFBUSxFQUFFQSxJQUFHO0FBQzlDLGdCQUFJLE9BQU8sSUFBSUEsRUFBQyxHQUFHLFNBQVMsS0FBSztBQUNqQyxnQkFBSSxZQUFZLEtBQUssTUFBTSxTQUFTLE9BQU8saUJBQWlCLEtBQUssTUFBTSxRQUFRLEtBQUssS0FBSztBQUN6RixnQkFBSSxhQUFhLEtBQUssUUFBUSxTQUFTLE9BQU8sUUFBUSxlQUFlLENBQUMsWUFBWSxLQUFLLE9BQU8sYUFBYTtBQUN6RyxrQkFBSSxlQUFlLEtBQUssUUFBUSxTQUFTLE9BQU8sZ0JBQWdCLEtBQUssUUFBUSxRQUFRLEtBQUssT0FBTztBQUNoRyxlQUFDLE9BQU8sS0FBSyxDQUFBLElBQUssS0FBSyxJQUFJO0FBQUEsZ0JBQVc7QUFBQSxnQkFBUSxlQUFlLE9BQU8sS0FBSyxPQUFPO0FBQUEsZ0JBQzNDLEtBQUssTUFBTSxPQUFPLE9BQU8sS0FBSyxLQUFLO0FBQUEsY0FBSyxDQUFDO0FBQUEsWUFDdkY7QUFBQSxVQUNBO0FBQUEsUUFBSztBQUNELGVBQU87QUFBQSxNQUNYO0FBUUUsZUFBUyx1QkFBdUJFLE1BQUssUUFBUTtBQUMzQyxZQUFJLE9BQU8sTUFBTTtBQUFFLGlCQUFPO0FBQUEsUUFBSTtBQUM5QixZQUFJLFdBQVcsT0FBT0EsTUFBSyxPQUFPLEtBQUssSUFBSSxLQUFLLFFBQVFBLE1BQUssT0FBTyxLQUFLLElBQUksRUFBRTtBQUMvRSxZQUFJLFVBQVUsT0FBT0EsTUFBSyxPQUFPLEdBQUcsSUFBSSxLQUFLLFFBQVFBLE1BQUssT0FBTyxHQUFHLElBQUksRUFBRTtBQUMxRSxZQUFJLENBQUMsWUFBWSxDQUFDLFNBQVM7QUFBRSxpQkFBTztBQUFBLFFBQUk7QUFFeEMsWUFBSSxVQUFVLE9BQU8sS0FBSyxJQUFJLFFBQVEsT0FBTyxHQUFHLElBQUksV0FBVyxJQUFJLE9BQU8sTUFBTSxPQUFPLEVBQUUsS0FBSztBQUU5RixZQUFJLFFBQVEsa0JBQWtCLFVBQVUsU0FBUyxRQUFRO0FBQ3pELFlBQUksT0FBTyxpQkFBaUIsU0FBUyxPQUFPLFFBQVE7QUFHcEQsWUFBSSxXQUFXLE9BQU8sS0FBSyxVQUFVLEdBQUcsU0FBUyxJQUFJLE9BQU8sSUFBSSxFQUFFLFVBQVUsV0FBVyxVQUFVO0FBQ2pHLFlBQUksT0FBTztBQUVULG1CQUFTRixLQUFJLEdBQUdBLEtBQUksTUFBTSxRQUFRLEVBQUVBLElBQUc7QUFDckMsZ0JBQUksT0FBTyxNQUFNQSxFQUFDO0FBQ2xCLGdCQUFJLEtBQUssTUFBTSxNQUFNO0FBQ25CLGtCQUFJLFFBQVEsaUJBQWlCLE1BQU0sS0FBSyxNQUFNO0FBQzlDLGtCQUFJLENBQUMsT0FBTztBQUFFLHFCQUFLLEtBQUs7QUFBQSxjQUFRLFdBQ3ZCLFVBQVU7QUFBRSxxQkFBSyxLQUFLLE1BQU0sTUFBTSxPQUFPLE9BQU8sTUFBTSxLQUFLO0FBQUEsY0FBTztBQUFBLFlBQ3JGO0FBQUEsVUFDQTtBQUFBLFFBQ0E7QUFDSSxZQUFJLE1BQU07QUFFUixtQkFBU0ssT0FBTSxHQUFHQSxPQUFNLEtBQUssUUFBUSxFQUFFQSxNQUFLO0FBQzFDLGdCQUFJLFNBQVMsS0FBS0EsSUFBRztBQUNyQixnQkFBSSxPQUFPLE1BQU0sTUFBTTtBQUFFLHFCQUFPLE1BQU07QUFBQSxZQUFPO0FBQzdDLGdCQUFJLE9BQU8sUUFBUSxNQUFNO0FBQ3ZCLGtCQUFJLFVBQVUsaUJBQWlCLE9BQU8sT0FBTyxNQUFNO0FBQ25ELGtCQUFJLENBQUMsU0FBUztBQUNaLHVCQUFPLE9BQU87QUFDZCxvQkFBSSxVQUFVO0FBQUUsbUJBQUMsVUFBVSxRQUFRLENBQUEsSUFBSyxLQUFLLE1BQU07QUFBQSxnQkFBRTtBQUFBLGNBQ2pFO0FBQUEsWUFDQSxPQUFlO0FBQ0wscUJBQU8sUUFBUTtBQUNmLGtCQUFJLFVBQVU7QUFBRSxpQkFBQyxVQUFVLFFBQVEsQ0FBQSxJQUFLLEtBQUssTUFBTTtBQUFBLGNBQUU7QUFBQSxZQUMvRDtBQUFBLFVBQ0E7QUFBQSxRQUNBO0FBRUksWUFBSSxPQUFPO0FBQUUsa0JBQVEsZ0JBQWdCLEtBQUs7QUFBQSxRQUFFO0FBQzVDLFlBQUksUUFBUSxRQUFRLE9BQU87QUFBRSxpQkFBTyxnQkFBZ0IsSUFBSTtBQUFBLFFBQUU7QUFFMUQsWUFBSSxhQUFhLENBQUMsS0FBSztBQUN2QixZQUFJLENBQUMsVUFBVTtBQUViLGNBQUksTUFBTSxPQUFPLEtBQUssU0FBUyxHQUFHO0FBQ2xDLGNBQUksTUFBTSxLQUFLLE9BQ2I7QUFBRSxxQkFBU0MsT0FBTSxHQUFHQSxPQUFNLE1BQU0sUUFBUSxFQUFFQSxNQUN4QztBQUFFLGtCQUFJLE1BQU1BLElBQUcsRUFBRSxNQUFNLE1BQ3JCO0FBQUUsaUJBQUMsZUFBZSxhQUFhLENBQUEsSUFBSyxLQUFLLElBQUksV0FBVyxNQUFNQSxJQUFHLEVBQUUsUUFBUSxNQUFNLElBQUksQ0FBQztBQUFBLGNBQUU7QUFBQSxZQUFFO0FBQUEsVUFBRTtBQUNsRyxtQkFBUyxNQUFNLEdBQUcsTUFBTSxLQUFLLEVBQUUsS0FDN0I7QUFBRSx1QkFBVyxLQUFLLFVBQVU7QUFBQSxVQUFFO0FBQ2hDLHFCQUFXLEtBQUssSUFBSTtBQUFBLFFBQzFCO0FBQ0ksZUFBTztBQUFBLE1BQ1g7QUFJRSxlQUFTLGdCQUFnQixPQUFPO0FBQzlCLGlCQUFTTixLQUFJLEdBQUdBLEtBQUksTUFBTSxRQUFRLEVBQUVBLElBQUc7QUFDckMsY0FBSSxPQUFPLE1BQU1BLEVBQUM7QUFDbEIsY0FBSSxLQUFLLFFBQVEsUUFBUSxLQUFLLFFBQVEsS0FBSyxNQUFNLEtBQUssT0FBTyxtQkFBbUIsT0FDOUU7QUFBRSxrQkFBTSxPQUFPQSxNQUFLLENBQUM7QUFBQSxVQUFFO0FBQUEsUUFDL0I7QUFDSSxZQUFJLENBQUMsTUFBTSxRQUFRO0FBQUUsaUJBQU87QUFBQSxRQUFJO0FBQ2hDLGVBQU87QUFBQSxNQUNYO0FBR0UsZUFBUyxxQkFBcUJFLE1BQUssTUFBTSxJQUFJO0FBQzNDLFlBQUksVUFBVTtBQUNkLFFBQUFBLEtBQUksS0FBSyxLQUFLLE1BQU0sR0FBRyxPQUFPLEdBQUcsU0FBVSxNQUFNO0FBQy9DLGNBQUksS0FBSyxhQUFhO0FBQUUscUJBQVNGLEtBQUksR0FBR0EsS0FBSSxLQUFLLFlBQVksUUFBUSxFQUFFQSxJQUFHO0FBQ3hFLGtCQUFJLE9BQU8sS0FBSyxZQUFZQSxFQUFDLEVBQUU7QUFDL0Isa0JBQUksS0FBSyxhQUFhLENBQUMsV0FBVyxRQUFRLFNBQVMsSUFBSSxLQUFLLEtBQzFEO0FBQUUsaUJBQUMsWUFBWSxVQUFVLENBQUEsSUFBSyxLQUFLLElBQUk7QUFBQSxjQUFFO0FBQUEsWUFDbkQ7QUFBQSxVQUFPO0FBQUEsUUFDUCxDQUFLO0FBQ0QsWUFBSSxDQUFDLFNBQVM7QUFBRSxpQkFBTztBQUFBLFFBQUk7QUFDM0IsWUFBSSxRQUFRLENBQUMsRUFBQyxNQUFZLEdBQU0sQ0FBQztBQUNqQyxpQkFBU0EsS0FBSSxHQUFHQSxLQUFJLFFBQVEsUUFBUSxFQUFFQSxJQUFHO0FBQ3ZDLGNBQUksS0FBSyxRQUFRQSxFQUFDLEdBQUcsSUFBSSxHQUFHLEtBQUssQ0FBQztBQUNsQyxtQkFBUyxJQUFJLEdBQUcsSUFBSSxNQUFNLFFBQVEsRUFBRSxHQUFHO0FBQ3JDLGdCQUFJLElBQUksTUFBTSxDQUFDO0FBQ2YsZ0JBQUksSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLElBQUksS0FBSyxJQUFJLEVBQUUsTUFBTSxFQUFFLEVBQUUsSUFBSSxHQUFHO0FBQUU7QUFBQSxZQUFRO0FBQzlELGdCQUFJLFdBQVcsQ0FBQyxHQUFHLENBQUMsR0FBRyxRQUFRLElBQUksRUFBRSxNQUFNLEVBQUUsSUFBSSxHQUFHLE1BQU0sSUFBSSxFQUFFLElBQUksRUFBRSxFQUFFO0FBQ3hFLGdCQUFJLFFBQVEsS0FBSyxDQUFDLEdBQUcsaUJBQWlCLENBQUMsT0FDckM7QUFBRSx1QkFBUyxLQUFLLEVBQUMsTUFBTSxFQUFFLE1BQU0sSUFBSSxFQUFFLEtBQUksQ0FBQztBQUFBLFlBQUU7QUFDOUMsZ0JBQUksTUFBTSxLQUFLLENBQUMsR0FBRyxrQkFBa0IsQ0FBQyxLQUNwQztBQUFFLHVCQUFTLEtBQUssRUFBQyxNQUFNLEVBQUUsSUFBSSxJQUFJLEVBQUUsR0FBRSxDQUFDO0FBQUEsWUFBRTtBQUMxQyxrQkFBTSxPQUFPLE1BQU0sT0FBTyxRQUFRO0FBQ2xDLGlCQUFLLFNBQVMsU0FBUztBQUFBLFVBQy9CO0FBQUEsUUFDQTtBQUNJLGVBQU87QUFBQSxNQUNYO0FBR0UsZUFBUyxrQkFBa0IsTUFBTTtBQUMvQixZQUFJLFFBQVEsS0FBSztBQUNqQixZQUFJLENBQUMsT0FBTztBQUFFO0FBQUEsUUFBTTtBQUNwQixpQkFBU0EsS0FBSSxHQUFHQSxLQUFJLE1BQU0sUUFBUSxFQUFFQSxJQUNsQztBQUFFLGdCQUFNQSxFQUFDLEVBQUUsT0FBTyxXQUFXLElBQUk7QUFBQSxRQUFFO0FBQ3JDLGFBQUssY0FBYztBQUFBLE1BQ3ZCO0FBQ0UsZUFBUyxrQkFBa0IsTUFBTSxPQUFPO0FBQ3RDLFlBQUksQ0FBQyxPQUFPO0FBQUU7QUFBQSxRQUFNO0FBQ3BCLGlCQUFTQSxLQUFJLEdBQUdBLEtBQUksTUFBTSxRQUFRLEVBQUVBLElBQ2xDO0FBQUUsZ0JBQU1BLEVBQUMsRUFBRSxPQUFPLFdBQVcsSUFBSTtBQUFBLFFBQUU7QUFDckMsYUFBSyxjQUFjO0FBQUEsTUFDdkI7QUFJRSxlQUFTLFVBQVUsUUFBUTtBQUFFLGVBQU8sT0FBTyxnQkFBZ0IsS0FBSztBQUFBLE1BQUM7QUFDakUsZUFBUyxXQUFXLFFBQVE7QUFBRSxlQUFPLE9BQU8saUJBQWlCLElBQUk7QUFBQSxNQUFDO0FBS2xFLGVBQVMsd0JBQXdCLEdBQUcsR0FBRztBQUNyQyxZQUFJLFVBQVUsRUFBRSxNQUFNLFNBQVMsRUFBRSxNQUFNO0FBQ3ZDLFlBQUksV0FBVyxHQUFHO0FBQUUsaUJBQU87QUFBQSxRQUFPO0FBQ2xDLFlBQUksT0FBTyxFQUFFLEtBQUksR0FBSSxPQUFPLEVBQUUsS0FBSTtBQUNsQyxZQUFJLFVBQVUsSUFBSSxLQUFLLE1BQU0sS0FBSyxJQUFJLEtBQUssVUFBVSxDQUFDLElBQUksVUFBVSxDQUFDO0FBQ3JFLFlBQUksU0FBUztBQUFFLGlCQUFPLENBQUM7QUFBQSxRQUFPO0FBQzlCLFlBQUksUUFBUSxJQUFJLEtBQUssSUFBSSxLQUFLLEVBQUUsS0FBSyxXQUFXLENBQUMsSUFBSSxXQUFXLENBQUM7QUFDakUsWUFBSSxPQUFPO0FBQUUsaUJBQU87QUFBQSxRQUFLO0FBQ3pCLGVBQU8sRUFBRSxLQUFLLEVBQUU7QUFBQSxNQUNwQjtBQUlFLGVBQVMsb0JBQW9CLE1BQU0sT0FBTztBQUN4QyxZQUFJLE1BQU0scUJBQXFCLEtBQUssYUFBYTtBQUNqRCxZQUFJLEtBQUs7QUFBRSxtQkFBUyxLQUFNLFFBQVNBLEtBQUksR0FBR0EsS0FBSSxJQUFJLFFBQVEsRUFBRUEsSUFBRztBQUM3RCxpQkFBSyxJQUFJQSxFQUFDO0FBQ1YsZ0JBQUksR0FBRyxPQUFPLGNBQWMsUUFBUSxHQUFHLE9BQU8sR0FBRyxPQUFPLFNBQ25ELENBQUMsU0FBUyx3QkFBd0IsT0FBTyxHQUFHLE1BQU0sSUFBSSxJQUN6RDtBQUFFLHNCQUFRLEdBQUc7QUFBQSxZQUFPO0FBQUEsVUFDNUI7QUFBQSxRQUFLO0FBQ0QsZUFBTztBQUFBLE1BQ1g7QUFDRSxlQUFTLHFCQUFxQixNQUFNO0FBQUUsZUFBTyxvQkFBb0IsTUFBTSxJQUFJO0FBQUEsTUFBQztBQUM1RSxlQUFTLG1CQUFtQixNQUFNO0FBQUUsZUFBTyxvQkFBb0IsTUFBTSxLQUFLO0FBQUEsTUFBQztBQUUzRSxlQUFTLG9CQUFvQixNQUFNLElBQUk7QUFDckMsWUFBSSxNQUFNLHFCQUFxQixLQUFLLGFBQWE7QUFDakQsWUFBSSxLQUFLO0FBQUUsbUJBQVNBLEtBQUksR0FBR0EsS0FBSSxJQUFJLFFBQVEsRUFBRUEsSUFBRztBQUM5QyxnQkFBSSxLQUFLLElBQUlBLEVBQUM7QUFDZCxnQkFBSSxHQUFHLE9BQU8sY0FBYyxHQUFHLFFBQVEsUUFBUSxHQUFHLE9BQU8sUUFBUSxHQUFHLE1BQU0sUUFBUSxHQUFHLEtBQUssUUFDckYsQ0FBQyxTQUFTLHdCQUF3QixPQUFPLEdBQUcsTUFBTSxJQUFJLElBQUk7QUFBRSxzQkFBUSxHQUFHO0FBQUEsWUFBTztBQUFBLFVBQ3pGO0FBQUEsUUFBSztBQUNELGVBQU87QUFBQSxNQUNYO0FBS0UsZUFBUywwQkFBMEJFLE1BQUtRLFNBQVEsTUFBTSxJQUFJLFFBQVE7QUFDaEUsWUFBSSxPQUFPLFFBQVFSLE1BQUtRLE9BQU07QUFDOUIsWUFBSSxNQUFNLHFCQUFxQixLQUFLO0FBQ3BDLFlBQUksS0FBSztBQUFFLG1CQUFTVixLQUFJLEdBQUdBLEtBQUksSUFBSSxRQUFRLEVBQUVBLElBQUc7QUFDOUMsZ0JBQUksS0FBSyxJQUFJQSxFQUFDO0FBQ2QsZ0JBQUksQ0FBQyxHQUFHLE9BQU8sV0FBVztBQUFFO0FBQUEsWUFBUTtBQUNwQyxnQkFBSSxRQUFRLEdBQUcsT0FBTyxLQUFLLENBQUM7QUFDNUIsZ0JBQUksVUFBVSxJQUFJLE1BQU0sTUFBTSxJQUFJLEtBQUssVUFBVSxHQUFHLE1BQU0sSUFBSSxVQUFVLE1BQU07QUFDOUUsZ0JBQUksUUFBUSxJQUFJLE1BQU0sSUFBSSxFQUFFLEtBQUssV0FBVyxHQUFHLE1BQU0sSUFBSSxXQUFXLE1BQU07QUFDMUUsZ0JBQUksV0FBVyxLQUFLLFNBQVMsS0FBSyxXQUFXLEtBQUssU0FBUyxHQUFHO0FBQUU7QUFBQSxZQUFRO0FBQ3hFLGdCQUFJLFdBQVcsTUFBTSxHQUFHLE9BQU8sa0JBQWtCLE9BQU8sZ0JBQWdCLElBQUksTUFBTSxJQUFJLElBQUksS0FBSyxJQUFJLElBQUksTUFBTSxJQUFJLElBQUksSUFBSSxNQUNySCxXQUFXLE1BQU0sR0FBRyxPQUFPLGtCQUFrQixPQUFPLGdCQUFnQixJQUFJLE1BQU0sTUFBTSxFQUFFLEtBQUssSUFBSSxJQUFJLE1BQU0sTUFBTSxFQUFFLElBQUksSUFDdkg7QUFBRSxxQkFBTztBQUFBLFlBQUk7QUFBQSxVQUNyQjtBQUFBLFFBQUs7QUFBQSxNQUNMO0FBTUUsZUFBUyxXQUFXLE1BQU07QUFDeEIsWUFBSTtBQUNKLGVBQU8sU0FBUyxxQkFBcUIsSUFBSSxHQUN2QztBQUFFLGlCQUFPLE9BQU8sS0FBSyxJQUFJLElBQUksRUFBRTtBQUFBLFFBQUs7QUFDdEMsZUFBTztBQUFBLE1BQ1g7QUFFRSxlQUFTLGNBQWMsTUFBTTtBQUMzQixZQUFJO0FBQ0osZUFBTyxTQUFTLG1CQUFtQixJQUFJLEdBQ3JDO0FBQUUsaUJBQU8sT0FBTyxLQUFLLEdBQUcsSUFBSSxFQUFFO0FBQUEsUUFBSztBQUNyQyxlQUFPO0FBQUEsTUFDWDtBQUlFLGVBQVMsb0JBQW9CLE1BQU07QUFDakMsWUFBSSxRQUFRO0FBQ1osZUFBTyxTQUFTLG1CQUFtQixJQUFJLEdBQUc7QUFDeEMsaUJBQU8sT0FBTyxLQUFLLEdBQUcsSUFBSSxFQUFFO0FBQzNCLFdBQUMsVUFBVSxRQUFRLENBQUEsSUFBSyxLQUFLLElBQUk7QUFBQSxRQUN4QztBQUNJLGVBQU87QUFBQSxNQUNYO0FBSUUsZUFBUyxhQUFhRSxNQUFLLE9BQU87QUFDaEMsWUFBSSxPQUFPLFFBQVFBLE1BQUssS0FBSyxHQUFHLE1BQU0sV0FBVyxJQUFJO0FBQ3JELFlBQUksUUFBUSxLQUFLO0FBQUUsaUJBQU87QUFBQSxRQUFLO0FBQy9CLGVBQU8sT0FBTyxHQUFHO0FBQUEsTUFDckI7QUFJRSxlQUFTLGdCQUFnQkEsTUFBSyxPQUFPO0FBQ25DLFlBQUksUUFBUUEsS0FBSSxTQUFRLEdBQUk7QUFBRSxpQkFBTztBQUFBLFFBQUs7QUFDMUMsWUFBSSxPQUFPLFFBQVFBLE1BQUssS0FBSyxHQUFHO0FBQ2hDLFlBQUksQ0FBQyxhQUFhQSxNQUFLLElBQUksR0FBRztBQUFFLGlCQUFPO0FBQUEsUUFBSztBQUM1QyxlQUFPLFNBQVMsbUJBQW1CLElBQUksR0FDckM7QUFBRSxpQkFBTyxPQUFPLEtBQUssR0FBRyxJQUFJLEVBQUU7QUFBQSxRQUFLO0FBQ3JDLGVBQU8sT0FBTyxJQUFJLElBQUk7QUFBQSxNQUMxQjtBQUtFLGVBQVMsYUFBYUEsTUFBSyxNQUFNO0FBQy9CLFlBQUksTUFBTSxxQkFBcUIsS0FBSztBQUNwQyxZQUFJLEtBQUs7QUFBRSxtQkFBUyxLQUFNLFFBQVNGLEtBQUksR0FBR0EsS0FBSSxJQUFJLFFBQVEsRUFBRUEsSUFBRztBQUM3RCxpQkFBSyxJQUFJQSxFQUFDO0FBQ1YsZ0JBQUksQ0FBQyxHQUFHLE9BQU8sV0FBVztBQUFFO0FBQUEsWUFBUTtBQUNwQyxnQkFBSSxHQUFHLFFBQVEsTUFBTTtBQUFFLHFCQUFPO0FBQUEsWUFBSTtBQUNsQyxnQkFBSSxHQUFHLE9BQU8sWUFBWTtBQUFFO0FBQUEsWUFBUTtBQUNwQyxnQkFBSSxHQUFHLFFBQVEsS0FBSyxHQUFHLE9BQU8saUJBQWlCLGtCQUFrQkUsTUFBSyxNQUFNLEVBQUUsR0FDNUU7QUFBRSxxQkFBTztBQUFBLFlBQUk7QUFBQSxVQUNyQjtBQUFBLFFBQUs7QUFBQSxNQUNMO0FBQ0UsZUFBUyxrQkFBa0JBLE1BQUssTUFBTSxNQUFNO0FBQzFDLFlBQUksS0FBSyxNQUFNLE1BQU07QUFDbkIsY0FBSSxNQUFNLEtBQUssT0FBTyxLQUFLLEdBQUcsSUFBSTtBQUNsQyxpQkFBTyxrQkFBa0JBLE1BQUssSUFBSSxNQUFNLGlCQUFpQixJQUFJLEtBQUssYUFBYSxLQUFLLE1BQU0sQ0FBQztBQUFBLFFBQ2pHO0FBQ0ksWUFBSSxLQUFLLE9BQU8sa0JBQWtCLEtBQUssTUFBTSxLQUFLLEtBQUssUUFDckQ7QUFBRSxpQkFBTztBQUFBLFFBQUk7QUFDZixpQkFBUyxLQUFNLFFBQVNGLEtBQUksR0FBR0EsS0FBSSxLQUFLLFlBQVksUUFBUSxFQUFFQSxJQUFHO0FBQy9ELGVBQUssS0FBSyxZQUFZQSxFQUFDO0FBQ3ZCLGNBQUksR0FBRyxPQUFPLGFBQWEsQ0FBQyxHQUFHLE9BQU8sY0FBYyxHQUFHLFFBQVEsS0FBSyxPQUMvRCxHQUFHLE1BQU0sUUFBUSxHQUFHLE1BQU0sS0FBSyxVQUMvQixHQUFHLE9BQU8saUJBQWlCLEtBQUssT0FBTyxtQkFDeEMsa0JBQWtCRSxNQUFLLE1BQU0sRUFBRSxHQUFHO0FBQUUsbUJBQU87QUFBQSxVQUFJO0FBQUEsUUFDekQ7QUFBQSxNQUNBO0FBR0UsZUFBUyxhQUFhLFNBQVM7QUFDN0Isa0JBQVUsV0FBVyxPQUFPO0FBRTVCLFlBQUksSUFBSSxHQUFHLFFBQVEsUUFBUTtBQUMzQixpQkFBU0YsS0FBSSxHQUFHQSxLQUFJLE1BQU0sTUFBTSxRQUFRLEVBQUVBLElBQUc7QUFDM0MsY0FBSSxPQUFPLE1BQU0sTUFBTUEsRUFBQztBQUN4QixjQUFJLFFBQVEsU0FBUztBQUFFO0FBQUEsVUFBSyxPQUN2QjtBQUFFLGlCQUFLLEtBQUs7QUFBQSxVQUFPO0FBQUEsUUFDOUI7QUFDSSxpQkFBUyxJQUFJLE1BQU0sUUFBUSxHQUFHLFFBQVEsR0FBRyxJQUFJLE1BQU0sUUFBUTtBQUN6RCxtQkFBU0ssT0FBTSxHQUFHQSxPQUFNLEVBQUUsU0FBUyxRQUFRLEVBQUVBLE1BQUs7QUFDaEQsZ0JBQUksTUFBTSxFQUFFLFNBQVNBLElBQUc7QUFDeEIsZ0JBQUksT0FBTyxPQUFPO0FBQUU7QUFBQSxZQUFLLE9BQ3BCO0FBQUUsbUJBQUssSUFBSTtBQUFBLFlBQU87QUFBQSxVQUMvQjtBQUFBLFFBQ0E7QUFDSSxlQUFPO0FBQUEsTUFDWDtBQUtFLGVBQVMsV0FBVyxNQUFNO0FBQ3hCLFlBQUksS0FBSyxVQUFVLEdBQUc7QUFBRSxpQkFBTztBQUFBLFFBQUM7QUFDaEMsWUFBSSxNQUFNLEtBQUssS0FBSyxRQUFRLFFBQVEsTUFBTTtBQUMxQyxlQUFPLFNBQVMscUJBQXFCLEdBQUcsR0FBRztBQUN6QyxjQUFJLFFBQVEsT0FBTyxLQUFLLEdBQUcsSUFBSTtBQUMvQixnQkFBTSxNQUFNLEtBQUs7QUFDakIsaUJBQU8sTUFBTSxLQUFLLEtBQUssTUFBTSxHQUFHO0FBQUEsUUFDdEM7QUFDSSxjQUFNO0FBQ04sZUFBTyxTQUFTLG1CQUFtQixHQUFHLEdBQUc7QUFDdkMsY0FBSSxVQUFVLE9BQU8sS0FBSyxHQUFHLElBQUk7QUFDakMsaUJBQU8sSUFBSSxLQUFLLFNBQVMsUUFBUSxLQUFLO0FBQ3RDLGdCQUFNLFFBQVEsR0FBRztBQUNqQixpQkFBTyxJQUFJLEtBQUssU0FBUyxRQUFRLEdBQUc7QUFBQSxRQUMxQztBQUNJLGVBQU87QUFBQSxNQUNYO0FBR0UsZUFBUyxZQUFZLElBQUk7QUFDdkIsWUFBSSxJQUFJLEdBQUcsU0FBU0gsT0FBTSxHQUFHO0FBQzdCLFVBQUUsVUFBVSxRQUFRQSxNQUFLQSxLQUFJLEtBQUs7QUFDbEMsVUFBRSxnQkFBZ0IsV0FBVyxFQUFFLE9BQU87QUFDdEMsVUFBRSxpQkFBaUI7QUFDbkIsUUFBQUEsS0FBSSxLQUFLLFNBQVUsTUFBTTtBQUN2QixjQUFJLE1BQU0sV0FBVyxJQUFJO0FBQ3pCLGNBQUksTUFBTSxFQUFFLGVBQWU7QUFDekIsY0FBRSxnQkFBZ0I7QUFDbEIsY0FBRSxVQUFVO0FBQUEsVUFDcEI7QUFBQSxRQUNBLENBQUs7QUFBQSxNQUNMO0FBTUUsVUFBSSxPQUFPLFNBQVMsTUFBTSxhQUFhUyxpQkFBZ0I7QUFDckQsYUFBSyxPQUFPO0FBQ1osMEJBQWtCLE1BQU0sV0FBVztBQUNuQyxhQUFLLFNBQVNBLGtCQUFpQkEsZ0JBQWUsSUFBSSxJQUFJO0FBQUEsTUFDMUQ7QUFFRSxXQUFLLFVBQVUsU0FBUyxXQUFZO0FBQUUsZUFBTyxPQUFPLElBQUk7QUFBQSxNQUFDO0FBQ3pELGlCQUFXLElBQUk7QUFLZixlQUFTLFdBQVcsTUFBTSxNQUFNLGFBQWFBLGlCQUFnQjtBQUMzRCxhQUFLLE9BQU87QUFDWixZQUFJLEtBQUssWUFBWTtBQUFFLGVBQUssYUFBYTtBQUFBLFFBQUs7QUFDOUMsWUFBSSxLQUFLLFFBQVE7QUFBRSxlQUFLLFNBQVM7QUFBQSxRQUFLO0FBQ3RDLFlBQUksS0FBSyxTQUFTLE1BQU07QUFBRSxlQUFLLFFBQVE7QUFBQSxRQUFLO0FBQzVDLDBCQUFrQixJQUFJO0FBQ3RCLDBCQUFrQixNQUFNLFdBQVc7QUFDbkMsWUFBSSxZQUFZQSxrQkFBaUJBLGdCQUFlLElBQUksSUFBSTtBQUN4RCxZQUFJLGFBQWEsS0FBSyxRQUFRO0FBQUUsMkJBQWlCLE1BQU0sU0FBUztBQUFBLFFBQUU7QUFBQSxNQUN0RTtBQUdFLGVBQVMsWUFBWSxNQUFNO0FBQ3pCLGFBQUssU0FBUztBQUNkLDBCQUFrQixJQUFJO0FBQUEsTUFDMUI7QUFLRSxVQUFJLG9CQUFvQixJQUFJLDRCQUE0QixDQUFBO0FBQ3hELGVBQVMsb0JBQW9CLE9BQU8sU0FBUztBQUMzQyxZQUFJLENBQUMsU0FBUyxRQUFRLEtBQUssS0FBSyxHQUFHO0FBQUUsaUJBQU87QUFBQSxRQUFJO0FBQ2hELFlBQUksUUFBUSxRQUFRLGVBQWUsNEJBQTRCO0FBQy9ELGVBQU8sTUFBTSxLQUFLLE1BQ2YsTUFBTSxLQUFLLElBQUksTUFBTSxRQUFRLFFBQVEsT0FBTztBQUFBLE1BQ25EO0FBT0UsZUFBUyxpQkFBaUIsSUFBSSxVQUFVO0FBSXRDLFlBQUksVUFBVSxLQUFLLFFBQVEsTUFBTSxNQUFNLFNBQVMsd0JBQXdCLElBQUk7QUFDNUUsWUFBSSxVQUFVO0FBQUEsVUFBQyxLQUFLLEtBQUssT0FBTyxDQUFDLE9BQU8sR0FBRyxpQkFBaUI7QUFBQSxVQUFHO0FBQUEsVUFDaEQsS0FBSztBQUFBLFVBQUcsS0FBSztBQUFBLFVBQUc7QUFBQSxVQUNoQixlQUFlO0FBQUEsVUFDZixhQUFhLEdBQUcsVUFBVSxjQUFjO0FBQUEsUUFBQztBQUN4RCxpQkFBUyxVQUFVLENBQUE7QUFHbkIsaUJBQVNYLEtBQUksR0FBR0EsT0FBTSxTQUFTLE9BQU8sU0FBUyxLQUFLLFNBQVMsSUFBSUEsTUFBSztBQUNwRSxjQUFJLE9BQU9BLEtBQUksU0FBUyxLQUFLQSxLQUFJLENBQUMsSUFBSSxTQUFTLE1BQU0sUUFBUztBQUM5RCxrQkFBUSxNQUFNO0FBQ2Qsa0JBQVEsV0FBVztBQUduQixjQUFJLGdCQUFnQixHQUFHLFFBQVEsT0FBTyxNQUFNLFFBQVEsU0FBUyxNQUFNLEdBQUcsSUFBSSxTQUFTLElBQ2pGO0FBQUUsb0JBQVEsV0FBVyxrQkFBa0IsUUFBUSxVQUFVLEtBQUs7QUFBQSxVQUFFO0FBQ2xFLGtCQUFRLE1BQU0sQ0FBQTtBQUNkLGNBQUksc0JBQXNCLFlBQVksR0FBRyxRQUFRLG9CQUFvQixPQUFPLElBQUk7QUFDaEYsNEJBQWtCLE1BQU0sU0FBUyxjQUFjLElBQUksTUFBTSxtQkFBbUIsQ0FBQztBQUM3RSxjQUFJLEtBQUssY0FBYztBQUNyQixnQkFBSSxLQUFLLGFBQWEsU0FDcEI7QUFBRSxzQkFBUSxVQUFVLFlBQVksS0FBSyxhQUFhLFNBQVMsUUFBUSxXQUFXLEVBQUU7QUFBQSxZQUFFO0FBQ3BGLGdCQUFJLEtBQUssYUFBYSxXQUNwQjtBQUFFLHNCQUFRLFlBQVksWUFBWSxLQUFLLGFBQWEsV0FBVyxRQUFRLGFBQWEsRUFBRTtBQUFBLFlBQUU7QUFBQSxVQUNsRztBQUdNLGNBQUksUUFBUSxJQUFJLFVBQVUsR0FDeEI7QUFBRSxvQkFBUSxJQUFJLEtBQUssR0FBRyxHQUFHLFFBQVEsUUFBUSxZQUFZLGlCQUFpQixHQUFHLFFBQVEsT0FBTyxDQUFDLENBQUM7QUFBQSxVQUFFO0FBRzlGLGNBQUlBLE1BQUssR0FBRztBQUNWLHFCQUFTLFFBQVEsTUFBTSxRQUFRO0FBQy9CLHFCQUFTLFFBQVEsUUFBUSxDQUFBO0FBQUEsVUFDakMsT0FBYTtBQUNYLGFBQUMsU0FBUyxRQUFRLFNBQVMsU0FBUyxRQUFRLE9BQU8sS0FBSyxLQUFLLFFBQVEsR0FBRztBQUNqRSxhQUFDLFNBQVMsUUFBUSxXQUFXLFNBQVMsUUFBUSxTQUFTLENBQUEsSUFBSyxLQUFLLEVBQUU7QUFBQSxVQUM1RTtBQUFBLFFBQ0E7QUFHSSxZQUFJLFFBQVE7QUFDVixjQUFJLE9BQU8sUUFBUSxRQUFRO0FBQzNCLGNBQUksYUFBYSxLQUFLLEtBQUssU0FBUyxLQUFNLEtBQUssaUJBQWlCLEtBQUssY0FBYyxTQUFTLEdBQzFGO0FBQUUsb0JBQVEsUUFBUSxZQUFZO0FBQUEsVUFBbUI7QUFBQSxRQUN6RDtBQUVJLGVBQU8sSUFBSSxjQUFjLElBQUksU0FBUyxNQUFNLFFBQVEsR0FBRztBQUN2RCxZQUFJLFFBQVEsSUFBSSxXQUNkO0FBQUUsa0JBQVEsWUFBWSxZQUFZLFFBQVEsSUFBSSxXQUFXLFFBQVEsYUFBYSxFQUFFO0FBQUEsUUFBRTtBQUVwRixlQUFPO0FBQUEsTUFDWDtBQUVFLGVBQVMsOEJBQThCLElBQUk7QUFDekMsWUFBSSxRQUFRLElBQUksUUFBUSxLQUFVLGdCQUFnQjtBQUNsRCxjQUFNLFFBQVEsUUFBUSxHQUFHLFdBQVcsQ0FBQyxFQUFFLFNBQVMsRUFBRTtBQUNsRCxjQUFNLGFBQWEsY0FBYyxNQUFNLEtBQUs7QUFDNUMsZUFBTztBQUFBLE1BQ1g7QUFJRSxlQUFTLFdBQVcsU0FBUyxNQUFNLE9BQU8sWUFBWSxVQUFVLEtBQUssWUFBWTtBQUMvRSxZQUFJLENBQUMsTUFBTTtBQUFFO0FBQUEsUUFBTTtBQUNuQixZQUFJLGNBQWMsUUFBUSxjQUFjLFlBQVksTUFBTSxRQUFRLGFBQWEsSUFBSTtBQUNuRixZQUFJLFVBQVUsUUFBUSxHQUFHLE1BQU0sY0FBYyxXQUFXO0FBQ3hELFlBQUk7QUFDSixZQUFJLENBQUMsUUFBUSxLQUFLLElBQUksR0FBRztBQUN2QixrQkFBUSxPQUFPLEtBQUs7QUFDcEIsb0JBQVUsU0FBUyxlQUFlLFdBQVc7QUFDN0Msa0JBQVEsSUFBSSxLQUFLLFFBQVEsS0FBSyxRQUFRLE1BQU0sS0FBSyxRQUFRLE9BQU87QUFDaEUsY0FBSSxNQUFNLGFBQWEsR0FBRztBQUFFLHVCQUFXO0FBQUEsVUFBSztBQUM1QyxrQkFBUSxPQUFPLEtBQUs7QUFBQSxRQUMxQixPQUFXO0FBQ0wsb0JBQVUsU0FBUyx1QkFBc0I7QUFDekMsY0FBSSxNQUFNO0FBQ1YsaUJBQU8sTUFBTTtBQUNYLG9CQUFRLFlBQVk7QUFDcEIsZ0JBQUksSUFBSSxRQUFRLEtBQUssSUFBSTtBQUN6QixnQkFBSSxVQUFVLElBQUksRUFBRSxRQUFRLE1BQU0sS0FBSyxTQUFTO0FBQ2hELGdCQUFJLFNBQVM7QUFDWCxrQkFBSSxNQUFNLFNBQVMsZUFBZSxZQUFZLE1BQU0sS0FBSyxNQUFNLE9BQU8sQ0FBQztBQUN2RSxrQkFBSSxNQUFNLGFBQWEsR0FBRztBQUFFLHdCQUFRLFlBQVksSUFBSSxRQUFRLENBQUMsR0FBRyxDQUFDLENBQUM7QUFBQSxjQUFFLE9BQy9EO0FBQUUsd0JBQVEsWUFBWSxHQUFHO0FBQUEsY0FBRTtBQUNoQyxzQkFBUSxJQUFJLEtBQUssUUFBUSxLQUFLLFFBQVEsTUFBTSxTQUFTLEdBQUc7QUFDeEQsc0JBQVEsT0FBTztBQUNmLHNCQUFRLE9BQU87QUFBQSxZQUN6QjtBQUNRLGdCQUFJLENBQUMsR0FBRztBQUFFO0FBQUEsWUFBSztBQUNmLG1CQUFPLFVBQVU7QUFDakIsZ0JBQUksUUFBUztBQUNiLGdCQUFJLEVBQUUsQ0FBQyxLQUFLLEtBQU07QUFDaEIsa0JBQUksVUFBVSxRQUFRLEdBQUcsUUFBUSxTQUFTLFdBQVcsVUFBVSxRQUFRLE1BQU07QUFDN0Usc0JBQVEsUUFBUSxZQUFZLElBQUksUUFBUSxTQUFTLFFBQVEsR0FBRyxRQUFRLENBQUM7QUFDckUsb0JBQU0sYUFBYSxRQUFRLGNBQWM7QUFDekMsb0JBQU0sYUFBYSxXQUFXLEdBQUk7QUFDbEMsc0JBQVEsT0FBTztBQUFBLFlBQ3pCLFdBQW1CLEVBQUUsQ0FBQyxLQUFLLFFBQVEsRUFBRSxDQUFDLEtBQUssTUFBTTtBQUN2QyxzQkFBUSxRQUFRLFlBQVksSUFBSSxRQUFRLEVBQUUsQ0FBQyxLQUFLLE9BQU8sTUFBVyxLQUFVLGdCQUFnQixDQUFDO0FBQzdGLG9CQUFNLGFBQWEsV0FBVyxFQUFFLENBQUMsQ0FBQztBQUNsQyxzQkFBUSxPQUFPO0FBQUEsWUFDekIsT0FBZTtBQUNMLHNCQUFRLFFBQVEsR0FBRyxRQUFRLHVCQUF1QixFQUFFLENBQUMsQ0FBQztBQUN0RCxvQkFBTSxhQUFhLFdBQVcsRUFBRSxDQUFDLENBQUM7QUFDbEMsa0JBQUksTUFBTSxhQUFhLEdBQUc7QUFBRSx3QkFBUSxZQUFZLElBQUksUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDO0FBQUEsY0FBRSxPQUNqRTtBQUFFLHdCQUFRLFlBQVksS0FBSztBQUFBLGNBQUU7QUFDbEMsc0JBQVEsT0FBTztBQUFBLFlBQ3pCO0FBQ1Esb0JBQVEsSUFBSSxLQUFLLFFBQVEsS0FBSyxRQUFRLE1BQU0sR0FBRyxLQUFLO0FBQ3BELG9CQUFRO0FBQUEsVUFDaEI7QUFBQSxRQUNBO0FBQ0ksZ0JBQVEsZ0JBQWdCLFlBQVksV0FBVyxLQUFLLFNBQVMsQ0FBQyxLQUFLO0FBQ25FLFlBQUksU0FBUyxjQUFjLFlBQVksWUFBWSxPQUFPLFlBQVk7QUFDcEUsY0FBSSxZQUFZLFNBQVM7QUFDekIsY0FBSSxZQUFZO0FBQUUseUJBQWE7QUFBQSxVQUFXO0FBQzFDLGNBQUksVUFBVTtBQUFFLHlCQUFhO0FBQUEsVUFBUztBQUN0QyxjQUFJLFFBQVEsSUFBSSxRQUFRLENBQUMsT0FBTyxHQUFHLFdBQVcsR0FBRztBQUNqRCxjQUFJLFlBQVk7QUFDZCxxQkFBUyxRQUFRLFlBQVk7QUFBRSxrQkFBSSxXQUFXLGVBQWUsSUFBSSxLQUFLLFFBQVEsV0FBVyxRQUFRLFNBQy9GO0FBQUUsc0JBQU0sYUFBYSxNQUFNLFdBQVcsSUFBSSxDQUFDO0FBQUEsY0FBRTtBQUFBLFlBQUU7QUFBQSxVQUN6RDtBQUNNLGlCQUFPLFFBQVEsUUFBUSxZQUFZLEtBQUs7QUFBQSxRQUM5QztBQUNJLGdCQUFRLFFBQVEsWUFBWSxPQUFPO0FBQUEsTUFDdkM7QUFJRSxlQUFTLFlBQVksTUFBTSxnQkFBZ0I7QUFDekMsWUFBSSxLQUFLLFNBQVMsS0FBSyxDQUFDLEtBQUssS0FBSyxJQUFJLEdBQUc7QUFBRSxpQkFBTztBQUFBLFFBQUk7QUFDdEQsWUFBSSxjQUFjLGdCQUFnQixTQUFTO0FBQzNDLGlCQUFTQSxLQUFJLEdBQUdBLEtBQUksS0FBSyxRQUFRQSxNQUFLO0FBQ3BDLGNBQUksS0FBSyxLQUFLLE9BQU9BLEVBQUM7QUFDdEIsY0FBSSxNQUFNLE9BQU8sZ0JBQWdCQSxNQUFLLEtBQUssU0FBUyxLQUFLLEtBQUssV0FBV0EsS0FBSSxDQUFDLEtBQUssS0FDakY7QUFBRSxpQkFBSztBQUFBLFVBQVM7QUFDbEIsb0JBQVU7QUFDVix3QkFBYyxNQUFNO0FBQUEsUUFDMUI7QUFDSSxlQUFPO0FBQUEsTUFDWDtBQUlFLGVBQVMsa0JBQWtCLE9BQU8sT0FBTztBQUN2QyxlQUFPLFNBQVUsU0FBUyxNQUFNLE9BQU8sWUFBWSxVQUFVLEtBQUssWUFBWTtBQUM1RSxrQkFBUSxRQUFRLFFBQVEscUJBQXFCO0FBQzdDLGNBQUksUUFBUSxRQUFRLEtBQUssTUFBTSxRQUFRLEtBQUs7QUFDNUMscUJBQVM7QUFFUCxnQkFBSSxPQUFRO0FBQ1oscUJBQVNBLEtBQUksR0FBR0EsS0FBSSxNQUFNLFFBQVFBLE1BQUs7QUFDckMscUJBQU8sTUFBTUEsRUFBQztBQUNkLGtCQUFJLEtBQUssS0FBSyxTQUFTLEtBQUssUUFBUSxPQUFPO0FBQUU7QUFBQSxjQUFLO0FBQUEsWUFDNUQ7QUFDUSxnQkFBSSxLQUFLLE1BQU0sS0FBSztBQUFFLHFCQUFPLE1BQU0sU0FBUyxNQUFNLE9BQU8sWUFBWSxVQUFVLEtBQUssVUFBVTtBQUFBLFlBQUM7QUFDL0Ysa0JBQU0sU0FBUyxLQUFLLE1BQU0sR0FBRyxLQUFLLEtBQUssS0FBSyxHQUFHLE9BQU8sWUFBWSxNQUFNLEtBQUssVUFBVTtBQUN2Rix5QkFBYTtBQUNiLG1CQUFPLEtBQUssTUFBTSxLQUFLLEtBQUssS0FBSztBQUNqQyxvQkFBUSxLQUFLO0FBQUEsVUFDckI7QUFBQSxRQUNBO0FBQUEsTUFDQTtBQUVFLGVBQVMsbUJBQW1CLFNBQVMsTUFBTSxRQUFRLGNBQWM7QUFDL0QsWUFBSSxTQUFTLENBQUMsZ0JBQWdCLE9BQU87QUFDckMsWUFBSSxRQUFRO0FBQUUsa0JBQVEsSUFBSSxLQUFLLFFBQVEsS0FBSyxRQUFRLE1BQU0sTUFBTSxNQUFNO0FBQUEsUUFBRTtBQUN4RSxZQUFJLENBQUMsZ0JBQWdCLFFBQVEsR0FBRyxRQUFRLE1BQU0sdUJBQXVCO0FBQ25FLGNBQUksQ0FBQyxRQUNIO0FBQUUscUJBQVMsUUFBUSxRQUFRLFlBQVksU0FBUyxjQUFjLE1BQU0sQ0FBQztBQUFBLFVBQUU7QUFDekUsaUJBQU8sYUFBYSxhQUFhLE9BQU8sRUFBRTtBQUFBLFFBQ2hEO0FBQ0ksWUFBSSxRQUFRO0FBQ1Ysa0JBQVEsR0FBRyxRQUFRLE1BQU0sY0FBYyxNQUFNO0FBQzdDLGtCQUFRLFFBQVEsWUFBWSxNQUFNO0FBQUEsUUFDeEM7QUFDSSxnQkFBUSxPQUFPO0FBQ2YsZ0JBQVEsZ0JBQWdCO0FBQUEsTUFDNUI7QUFJRSxlQUFTLGtCQUFrQixNQUFNLFNBQVMsUUFBUTtBQUNoRCxZQUFJLFFBQVEsS0FBSyxhQUFhLFVBQVUsS0FBSyxNQUFNLEtBQUs7QUFDeEQsWUFBSSxDQUFDLE9BQU87QUFDVixtQkFBU0ssT0FBTSxHQUFHQSxPQUFNLE9BQU8sUUFBUUEsUUFBSyxHQUMxQztBQUFFLG9CQUFRLFNBQVMsU0FBUyxRQUFRLE1BQU0sSUFBSSxLQUFLLE9BQU9BLElBQUcsQ0FBQyxHQUFHLG9CQUFvQixPQUFPQSxPQUFJLENBQUMsR0FBRyxRQUFRLEdBQUcsT0FBTyxDQUFDO0FBQUEsVUFBRTtBQUMzSDtBQUFBLFFBQ047QUFFSSxZQUFJLE1BQU0sUUFBUSxRQUFRLE1BQU0sR0FBR0wsS0FBSSxHQUFHLE9BQU8sSUFBSSxPQUFPO0FBQzVELFlBQUksYUFBYSxHQUFHLFdBQVcsY0FBYyxnQkFBZ0IsV0FBVztBQUN4RSxtQkFBUztBQUNQLGNBQUksY0FBYyxLQUFLO0FBQ3JCLHdCQUFZLGVBQWUsaUJBQWlCLE1BQU07QUFDbEQseUJBQWE7QUFDYix3QkFBWTtBQUFNLHlCQUFhO0FBQy9CLGdCQUFJLGlCQUFpQixDQUFBLEdBQUksWUFBYTtBQUN0QyxxQkFBUyxJQUFJLEdBQUcsSUFBSSxNQUFNLFFBQVEsRUFBRSxHQUFHO0FBQ3JDLGtCQUFJLEtBQUssTUFBTSxDQUFDLEdBQUcsSUFBSSxHQUFHO0FBQzFCLGtCQUFJLEVBQUUsUUFBUSxjQUFjLEdBQUcsUUFBUSxPQUFPLEVBQUUsWUFBWTtBQUMxRCwrQkFBZSxLQUFLLENBQUM7QUFBQSxjQUNqQyxXQUFxQixHQUFHLFFBQVEsUUFBUSxHQUFHLE1BQU0sUUFBUSxHQUFHLEtBQUssT0FBTyxFQUFFLGFBQWEsR0FBRyxNQUFNLE9BQU8sR0FBRyxRQUFRLE1BQU07QUFDNUcsb0JBQUksR0FBRyxNQUFNLFFBQVEsR0FBRyxNQUFNLE9BQU8sYUFBYSxHQUFHLElBQUk7QUFDdkQsK0JBQWEsR0FBRztBQUNoQixpQ0FBZTtBQUFBLGdCQUM3QjtBQUNZLG9CQUFJLEVBQUUsV0FBVztBQUFFLCtCQUFhLE1BQU0sRUFBRTtBQUFBLGdCQUFVO0FBQ2xELG9CQUFJLEVBQUUsS0FBSztBQUFFLHlCQUFPLE1BQU0sTUFBTSxNQUFNLE1BQU0sRUFBRTtBQUFBLGdCQUFJO0FBQ2xELG9CQUFJLEVBQUUsY0FBYyxHQUFHLFFBQVEsS0FBSztBQUFFLG9DQUFrQixNQUFNLEVBQUU7QUFBQSxnQkFBVztBQUMzRSxvQkFBSSxFQUFFLFlBQVksR0FBRyxNQUFNLFlBQVk7QUFBRSxtQkFBQyxjQUFjLFlBQVksQ0FBQSxJQUFLLEtBQUssRUFBRSxVQUFVLEdBQUcsRUFBRTtBQUFBLGdCQUFFO0FBR2pHLG9CQUFJLEVBQUUsT0FBTztBQUFFLG1CQUFDLGVBQWUsYUFBYSxDQUFBLElBQUssUUFBUSxFQUFFO0FBQUEsZ0JBQU07QUFDakUsb0JBQUksRUFBRSxZQUFZO0FBQ2hCLDJCQUFTLFFBQVEsRUFBRSxZQUNqQjtBQUFFLHFCQUFDLGVBQWUsYUFBYSxLQUFLLElBQUksSUFBSSxFQUFFLFdBQVcsSUFBSTtBQUFBLGtCQUFFO0FBQUEsZ0JBQy9FO0FBQ1ksb0JBQUksRUFBRSxjQUFjLENBQUMsYUFBYSx3QkFBd0IsVUFBVSxRQUFRLENBQUMsSUFBSSxJQUMvRTtBQUFFLDhCQUFZO0FBQUEsZ0JBQUc7QUFBQSxjQUMvQixXQUFxQixHQUFHLE9BQU8sT0FBTyxhQUFhLEdBQUcsTUFBTTtBQUNoRCw2QkFBYSxHQUFHO0FBQUEsY0FDNUI7QUFBQSxZQUNBO0FBQ1EsZ0JBQUksV0FBVztBQUFFLHVCQUFTLE1BQU0sR0FBRyxNQUFNLFVBQVUsUUFBUSxPQUFPLEdBQ2hFO0FBQUUsb0JBQUksVUFBVSxNQUFNLENBQUMsS0FBSyxZQUFZO0FBQUUsa0NBQWdCLE1BQU0sVUFBVSxHQUFHO0FBQUEsZ0JBQUU7QUFBQSxjQUFFO0FBQUEsWUFBRTtBQUVyRixnQkFBSSxDQUFDLGFBQWEsVUFBVSxRQUFRLEtBQUs7QUFBRSx1QkFBUyxNQUFNLEdBQUcsTUFBTSxlQUFlLFFBQVEsRUFBRSxLQUMxRjtBQUFFLG1DQUFtQixTQUFTLEdBQUcsZUFBZSxHQUFHLENBQUM7QUFBQSxjQUFFO0FBQUEsWUFBRTtBQUMxRCxnQkFBSSxjQUFjLFVBQVUsUUFBUSxNQUFNLEtBQUs7QUFDN0M7QUFBQSxnQkFBbUI7QUFBQSxpQkFBVSxVQUFVLE1BQU0sT0FBTyxNQUFNLElBQUksVUFBVSxNQUFNO0FBQUEsZ0JBQzNELFVBQVU7QUFBQSxnQkFBUSxVQUFVLFFBQVE7QUFBQSxjQUFJO0FBQzNELGtCQUFJLFVBQVUsTUFBTSxNQUFNO0FBQUU7QUFBQSxjQUFNO0FBQ2xDLGtCQUFJLFVBQVUsTUFBTSxLQUFLO0FBQUUsNEJBQVk7QUFBQSxjQUFNO0FBQUEsWUFDdkQ7QUFBQSxVQUNBO0FBQ00sY0FBSSxPQUFPLEtBQUs7QUFBRTtBQUFBLFVBQUs7QUFFdkIsY0FBSSxPQUFPLEtBQUssSUFBSSxLQUFLLFVBQVU7QUFDbkMsaUJBQU8sTUFBTTtBQUNYLGdCQUFJLE1BQU07QUFDUixrQkFBSSxNQUFNLE1BQU0sS0FBSztBQUNyQixrQkFBSSxDQUFDLFdBQVc7QUFDZCxvQkFBSSxZQUFZLE1BQU0sT0FBTyxLQUFLLE1BQU0sR0FBRyxPQUFPLEdBQUcsSUFBSTtBQUN6RCx3QkFBUTtBQUFBLGtCQUFTO0FBQUEsa0JBQVM7QUFBQSxrQkFBVyxRQUFRLFFBQVEsWUFBWTtBQUFBLGtCQUNoRDtBQUFBLGtCQUFnQixNQUFNLFVBQVUsVUFBVSxhQUFhLGVBQWU7QUFBQSxrQkFBSTtBQUFBLGtCQUFLO0FBQUEsZ0JBQVU7QUFBQSxjQUN0SDtBQUNVLGtCQUFJLE9BQU8sTUFBTTtBQUFDLHVCQUFPLEtBQUssTUFBTSxPQUFPLEdBQUc7QUFBRyxzQkFBTTtBQUFNO0FBQUEsY0FBSztBQUNsRSxvQkFBTTtBQUNOLCtCQUFpQjtBQUFBLFlBQzNCO0FBQ1EsbUJBQU8sUUFBUSxNQUFNLElBQUksS0FBSyxPQUFPQSxJQUFHLENBQUM7QUFDekMsb0JBQVEsb0JBQW9CLE9BQU9BLElBQUcsR0FBRyxRQUFRLEdBQUcsT0FBTztBQUFBLFVBQ25FO0FBQUEsUUFDQTtBQUFBLE1BQ0E7QUFNRSxlQUFTLFNBQVNFLE1BQUssTUFBTSxPQUFPO0FBRWxDLGFBQUssT0FBTztBQUVaLGFBQUssT0FBTyxvQkFBb0IsSUFBSTtBQUVwQyxhQUFLLE9BQU8sS0FBSyxPQUFPLE9BQU8sSUFBSSxLQUFLLElBQUksQ0FBQyxJQUFJLFFBQVEsSUFBSTtBQUM3RCxhQUFLLE9BQU8sS0FBSyxPQUFPO0FBQ3hCLGFBQUssU0FBUyxhQUFhQSxNQUFLLElBQUk7QUFBQSxNQUN4QztBQUdFLGVBQVMsZUFBZSxJQUFJLE1BQU0sSUFBSTtBQUNwQyxZQUFJLFFBQVEsQ0FBQSxHQUFJO0FBQ2hCLGlCQUFTLE1BQU0sTUFBTSxNQUFNLElBQUksTUFBTSxTQUFTO0FBQzVDLGNBQUksT0FBTyxJQUFJLFNBQVMsR0FBRyxLQUFLLFFBQVEsR0FBRyxLQUFLLEdBQUcsR0FBRyxHQUFHO0FBQ3pELG9CQUFVLE1BQU0sS0FBSztBQUNyQixnQkFBTSxLQUFLLElBQUk7QUFBQSxRQUNyQjtBQUNJLGVBQU87QUFBQSxNQUNYO0FBRUUsVUFBSSxpQkFBaUI7QUFFckIsZUFBUyxjQUFjLElBQUk7QUFDekIsWUFBSSxnQkFBZ0I7QUFDbEIseUJBQWUsSUFBSSxLQUFLLEVBQUU7QUFBQSxRQUNoQyxPQUFXO0FBQ0wsYUFBRyxZQUFZLGlCQUFpQjtBQUFBLFlBQzlCLEtBQUssQ0FBQyxFQUFFO0FBQUEsWUFDUixrQkFBa0IsQ0FBQTtBQUFBO1FBRTFCO0FBQUEsTUFDQTtBQUVFLGVBQVMsb0JBQW9CLE9BQU87QUFHbEMsWUFBSSxZQUFZLE1BQU0sa0JBQWtCRixLQUFJO0FBQzVDLFdBQUc7QUFDRCxpQkFBT0EsS0FBSSxVQUFVLFFBQVFBLE1BQzNCO0FBQUUsc0JBQVVBLEVBQUMsRUFBRSxLQUFLLElBQUk7QUFBQSxVQUFFO0FBQzVCLG1CQUFTLElBQUksR0FBRyxJQUFJLE1BQU0sSUFBSSxRQUFRLEtBQUs7QUFDekMsZ0JBQUksS0FBSyxNQUFNLElBQUksQ0FBQztBQUNwQixnQkFBSSxHQUFHLHdCQUNMO0FBQUUscUJBQU8sR0FBRyx1QkFBdUIsR0FBRyx1QkFBdUIsUUFDM0Q7QUFBRSxtQkFBRyx1QkFBdUIsR0FBRyxzQkFBc0IsRUFBRSxLQUFLLE1BQU0sR0FBRyxFQUFFO0FBQUEsY0FBRTtBQUFBLFlBQUU7QUFBQSxVQUN2RjtBQUFBLFFBQ0EsU0FBYUEsS0FBSSxVQUFVO0FBQUEsTUFDM0I7QUFFRSxlQUFTLGdCQUFnQixJQUFJLE9BQU87QUFDbEMsWUFBSSxRQUFRLEdBQUc7QUFDZixZQUFJLENBQUMsT0FBTztBQUFFO0FBQUEsUUFBTTtBQUVwQixZQUFJO0FBQUUsOEJBQW9CLEtBQUs7QUFBQSxRQUFFO0FBRS9CLDJCQUFpQjtBQUNqQixnQkFBTSxLQUFLO0FBQUEsUUFDakI7QUFBQSxNQUNBO0FBRUUsVUFBSSx5QkFBeUI7QUFTN0IsZUFBUyxZQUFZLFNBQVMsTUFBc0I7QUFDbEQsWUFBSSxNQUFNLFlBQVksU0FBUyxJQUFJO0FBQ25DLFlBQUksQ0FBQyxJQUFJLFFBQVE7QUFBRTtBQUFBLFFBQU07QUFDekIsWUFBSSxPQUFPLE1BQU0sVUFBVSxNQUFNLEtBQUssV0FBVyxDQUFDLEdBQUc7QUFDckQsWUFBSSxnQkFBZ0I7QUFDbEIsaUJBQU8sZUFBZTtBQUFBLFFBQzVCLFdBQWUsd0JBQXdCO0FBQ2pDLGlCQUFPO0FBQUEsUUFDYixPQUFXO0FBQ0wsaUJBQU8seUJBQXlCLENBQUE7QUFDaEMscUJBQVcsbUJBQW1CLENBQUM7QUFBQSxRQUNyQztBQUNJLFlBQUksT0FBTyxTQUFXQSxJQUFJO0FBQ3hCLGVBQUssS0FBSyxXQUFZO0FBQUUsbUJBQU8sSUFBSUEsRUFBQyxFQUFFLE1BQU0sTUFBTSxJQUFJO0FBQUEsV0FBSTtBQUFBLFFBQ2hFO0FBRUksaUJBQVNBLEtBQUksR0FBR0EsS0FBSSxJQUFJLFFBQVEsRUFBRUE7QUFDaEMsZUFBTUEsRUFBQztBQUFBLE1BQ2I7QUFFRSxlQUFTLG9CQUFvQjtBQUMzQixZQUFJLFVBQVU7QUFDZCxpQ0FBeUI7QUFDekIsaUJBQVNBLEtBQUksR0FBR0EsS0FBSSxRQUFRLFFBQVEsRUFBRUEsSUFBRztBQUFFLGtCQUFRQSxFQUFDLEVBQUM7QUFBQSxRQUFHO0FBQUEsTUFDNUQ7QUFLRSxlQUFTLHFCQUFxQixJQUFJLFVBQVUsT0FBTyxNQUFNO0FBQ3ZELGlCQUFTLElBQUksR0FBRyxJQUFJLFNBQVMsUUFBUSxRQUFRLEtBQUs7QUFDaEQsY0FBSSxPQUFPLFNBQVMsUUFBUSxDQUFDO0FBQzdCLGNBQUksUUFBUSxRQUFRO0FBQUUsMkJBQWUsSUFBSSxRQUFRO0FBQUEsVUFBRSxXQUMxQyxRQUFRLFVBQVU7QUFBRSw2QkFBaUIsSUFBSSxVQUFVLE9BQU8sSUFBSTtBQUFBLFVBQUUsV0FDaEUsUUFBUSxTQUFTO0FBQUUsOEJBQWtCLElBQUksUUFBUTtBQUFBLFVBQUUsV0FDbkQsUUFBUSxVQUFVO0FBQUUsOEJBQWtCLElBQUksVUFBVSxJQUFJO0FBQUEsVUFBRTtBQUFBLFFBQ3pFO0FBQ0ksaUJBQVMsVUFBVTtBQUFBLE1BQ3ZCO0FBSUUsZUFBUyxrQkFBa0IsVUFBVTtBQUNuQyxZQUFJLFNBQVMsUUFBUSxTQUFTLE1BQU07QUFDbEMsbUJBQVMsT0FBTyxJQUFJLE9BQU8sTUFBTSxNQUFNLG9CQUFvQjtBQUMzRCxjQUFJLFNBQVMsS0FBSyxZQUNoQjtBQUFFLHFCQUFTLEtBQUssV0FBVyxhQUFhLFNBQVMsTUFBTSxTQUFTLElBQUk7QUFBQSxVQUFFO0FBQ3hFLG1CQUFTLEtBQUssWUFBWSxTQUFTLElBQUk7QUFDdkMsY0FBSSxNQUFNLGFBQWEsR0FBRztBQUFFLHFCQUFTLEtBQUssTUFBTSxTQUFTO0FBQUEsVUFBRTtBQUFBLFFBQ2pFO0FBQ0ksZUFBTyxTQUFTO0FBQUEsTUFDcEI7QUFFRSxlQUFTLHFCQUFxQixJQUFJLFVBQVU7QUFDMUMsWUFBSSxNQUFNLFNBQVMsVUFBVSxTQUFTLFVBQVUsT0FBTyxTQUFTLEtBQUssV0FBVyxNQUFNLFNBQVMsS0FBSztBQUNwRyxZQUFJLEtBQUs7QUFBRSxpQkFBTztBQUFBLFFBQTZCO0FBQy9DLFlBQUksU0FBUyxZQUFZO0FBQ3ZCLGNBQUksS0FBSztBQUFFLHFCQUFTLFdBQVcsWUFBWTtBQUFBLFVBQUksT0FDMUM7QUFBRSxxQkFBUyxXQUFXLFdBQVcsWUFBWSxTQUFTLFVBQVU7QUFBRyxxQkFBUyxhQUFhO0FBQUEsVUFBSztBQUFBLFFBQ3pHLFdBQWUsS0FBSztBQUNkLGNBQUksT0FBTyxrQkFBa0IsUUFBUTtBQUNyQyxtQkFBUyxhQUFhLEtBQUssYUFBYSxJQUFJLE9BQU8sTUFBTSxHQUFHLEdBQUcsS0FBSyxVQUFVO0FBQzlFLGFBQUcsUUFBUSxNQUFNLGNBQWMsU0FBUyxVQUFVO0FBQUEsUUFDeEQ7QUFBQSxNQUNBO0FBSUUsZUFBUyxlQUFlLElBQUksVUFBVTtBQUNwQyxZQUFJLE1BQU0sR0FBRyxRQUFRO0FBQ3JCLFlBQUksT0FBTyxJQUFJLFFBQVEsU0FBUyxNQUFNO0FBQ3BDLGFBQUcsUUFBUSxtQkFBbUI7QUFDOUIsbUJBQVMsVUFBVSxJQUFJO0FBQ3ZCLGlCQUFPLElBQUk7QUFBQSxRQUNqQjtBQUNJLGVBQU8saUJBQWlCLElBQUksUUFBUTtBQUFBLE1BQ3hDO0FBS0UsZUFBUyxlQUFlLElBQUksVUFBVTtBQUNwQyxZQUFJLE1BQU0sU0FBUyxLQUFLO0FBQ3hCLFlBQUksUUFBUSxlQUFlLElBQUksUUFBUTtBQUN2QyxZQUFJLFNBQVMsUUFBUSxTQUFTLE1BQU07QUFBRSxtQkFBUyxPQUFPLE1BQU07QUFBQSxRQUFJO0FBQ2hFLGlCQUFTLEtBQUssV0FBVyxhQUFhLE1BQU0sS0FBSyxTQUFTLElBQUk7QUFDOUQsaUJBQVMsT0FBTyxNQUFNO0FBQ3RCLFlBQUksTUFBTSxXQUFXLFNBQVMsV0FBVyxNQUFNLGFBQWEsU0FBUyxXQUFXO0FBQzlFLG1CQUFTLFVBQVUsTUFBTTtBQUN6QixtQkFBUyxZQUFZLE1BQU07QUFDM0IsNEJBQWtCLElBQUksUUFBUTtBQUFBLFFBQ3BDLFdBQWUsS0FBSztBQUNkLG1CQUFTLEtBQUssWUFBWTtBQUFBLFFBQ2hDO0FBQUEsTUFDQTtBQUVFLGVBQVMsa0JBQWtCLElBQUksVUFBVTtBQUN2Qyw2QkFBcUIsSUFBSSxRQUFRO0FBQ2pDLFlBQUksU0FBUyxLQUFLLFdBQ2hCO0FBQUUsNEJBQWtCLFFBQVEsRUFBRSxZQUFZLFNBQVMsS0FBSztBQUFBLFFBQVUsV0FDM0QsU0FBUyxRQUFRLFNBQVMsTUFDakM7QUFBRSxtQkFBUyxLQUFLLFlBQVk7QUFBQSxRQUFHO0FBQ2pDLFlBQUksWUFBWSxTQUFTLFlBQVksU0FBUyxZQUFZLE9BQU8sU0FBUyxLQUFLLGFBQWEsTUFBTSxTQUFTLEtBQUs7QUFDaEgsaUJBQVMsS0FBSyxZQUFZLGFBQWE7QUFBQSxNQUMzQztBQUVFLGVBQVMsaUJBQWlCLElBQUksVUFBVSxPQUFPLE1BQU07QUFDbkQsWUFBSSxTQUFTLFFBQVE7QUFDbkIsbUJBQVMsS0FBSyxZQUFZLFNBQVMsTUFBTTtBQUN6QyxtQkFBUyxTQUFTO0FBQUEsUUFDeEI7QUFDSSxZQUFJLFNBQVMsa0JBQWtCO0FBQzdCLG1CQUFTLEtBQUssWUFBWSxTQUFTLGdCQUFnQjtBQUNuRCxtQkFBUyxtQkFBbUI7QUFBQSxRQUNsQztBQUNJLFlBQUksU0FBUyxLQUFLLGFBQWE7QUFDN0IsY0FBSSxPQUFPLGtCQUFrQixRQUFRO0FBQ3JDLG1CQUFTLG1CQUFtQjtBQUFBLFlBQUk7QUFBQSxZQUFPO0FBQUEsWUFBTSxrQ0FBa0MsU0FBUyxLQUFLO0FBQUEsWUFDNUQsWUFBWSxHQUFHLFFBQVEsY0FBYyxLQUFLLFdBQVcsQ0FBQyxLQUFLLG9CQUFvQixnQkFBaUIsS0FBSyxtQkFBb0I7QUFBQSxVQUFJO0FBQzlKLGFBQUcsUUFBUSxNQUFNLGNBQWMsU0FBUyxnQkFBZ0I7QUFDeEQsZUFBSyxhQUFhLFNBQVMsa0JBQWtCLFNBQVMsSUFBSTtBQUFBLFFBQ2hFO0FBQ0ksWUFBSSxVQUFVLFNBQVMsS0FBSztBQUM1QixZQUFJLEdBQUcsUUFBUSxlQUFlLFNBQVM7QUFDckMsY0FBSSxTQUFTLGtCQUFrQixRQUFRO0FBQ3ZDLGNBQUksYUFBYSxTQUFTLFNBQVMsSUFBSSxPQUFPLE1BQU0sNkJBQThCLFlBQVksR0FBRyxRQUFRLGNBQWMsS0FBSyxXQUFXLENBQUMsS0FBSyxvQkFBb0IsSUFBSTtBQUNySyxxQkFBVyxhQUFhLGVBQWUsTUFBTTtBQUM3QyxhQUFHLFFBQVEsTUFBTSxjQUFjLFVBQVU7QUFDekMsaUJBQU8sYUFBYSxZQUFZLFNBQVMsSUFBSTtBQUM3QyxjQUFJLFNBQVMsS0FBSyxhQUNoQjtBQUFFLHVCQUFXLGFBQWEsTUFBTSxTQUFTLEtBQUs7QUFBQSxVQUFZO0FBQzVELGNBQUksR0FBRyxRQUFRLGdCQUFnQixDQUFDLFdBQVcsQ0FBQyxRQUFRLHdCQUF3QixJQUMxRTtBQUFFLHFCQUFTLGFBQWEsV0FBVztBQUFBLGNBQ2pDO0FBQUEsZ0JBQUk7QUFBQSxnQkFBTyxjQUFjLEdBQUcsU0FBUyxLQUFLO0FBQUEsZ0JBQ3RDO0FBQUEsZ0JBQ0MsV0FBWSxLQUFLLFdBQVcsd0JBQXdCLElBQUssZ0JBQWlCLEdBQUcsUUFBUSxvQkFBcUI7QUFBQSxjQUFJO0FBQUEsWUFBRTtBQUFBLFVBQUU7QUFDM0gsY0FBSSxTQUFTO0FBQUUscUJBQVMsSUFBSSxHQUFHLElBQUksR0FBRyxRQUFRLFlBQVksUUFBUSxFQUFFLEdBQUc7QUFDckUsa0JBQUksS0FBSyxHQUFHLFFBQVEsWUFBWSxDQUFDLEVBQUUsV0FBVyxRQUFRLFFBQVEsZUFBZSxFQUFFLEtBQUssUUFBUSxFQUFFO0FBQzlGLGtCQUFJLE9BQ0Y7QUFBRSwyQkFBVyxZQUFZO0FBQUEsa0JBQUk7QUFBQSxrQkFBTyxDQUFDLEtBQUs7QUFBQSxrQkFBRztBQUFBLGtCQUNqQixXQUFZLEtBQUssV0FBVyxFQUFFLElBQUssZ0JBQWlCLEtBQUssWUFBWSxFQUFFLElBQUs7QUFBQSxnQkFBSSxDQUFFO0FBQUEsY0FBRTtBQUFBLFlBQzFIO0FBQUEsVUFBTztBQUFBLFFBQ1A7QUFBQSxNQUNBO0FBRUUsZUFBUyxrQkFBa0IsSUFBSSxVQUFVLE1BQU07QUFDN0MsWUFBSSxTQUFTLFdBQVc7QUFBRSxtQkFBUyxZQUFZO0FBQUEsUUFBSztBQUNwRCxZQUFJLFdBQVcsVUFBVSx1QkFBdUI7QUFDaEQsaUJBQVMsT0FBTyxTQUFTLEtBQUssWUFBWSxPQUFRLFFBQVMsTUFBTSxPQUFPLE1BQU07QUFDNUUsaUJBQU8sS0FBSztBQUNaLGNBQUksU0FBUyxLQUFLLEtBQUssU0FBUyxHQUFHO0FBQUUscUJBQVMsS0FBSyxZQUFZLElBQUk7QUFBQSxVQUFFO0FBQUEsUUFDM0U7QUFDSSwwQkFBa0IsSUFBSSxVQUFVLElBQUk7QUFBQSxNQUN4QztBQUdFLGVBQVMsaUJBQWlCLElBQUksVUFBVSxPQUFPLE1BQU07QUFDbkQsWUFBSSxRQUFRLGVBQWUsSUFBSSxRQUFRO0FBQ3ZDLGlCQUFTLE9BQU8sU0FBUyxPQUFPLE1BQU07QUFDdEMsWUFBSSxNQUFNLFNBQVM7QUFBRSxtQkFBUyxVQUFVLE1BQU07QUFBQSxRQUFRO0FBQ3RELFlBQUksTUFBTSxXQUFXO0FBQUUsbUJBQVMsWUFBWSxNQUFNO0FBQUEsUUFBVTtBQUU1RCwwQkFBa0IsSUFBSSxRQUFRO0FBQzlCLHlCQUFpQixJQUFJLFVBQVUsT0FBTyxJQUFJO0FBQzFDLDBCQUFrQixJQUFJLFVBQVUsSUFBSTtBQUNwQyxlQUFPLFNBQVM7QUFBQSxNQUNwQjtBQUlFLGVBQVMsa0JBQWtCLElBQUksVUFBVSxNQUFNO0FBQzdDLDZCQUFxQixJQUFJLFNBQVMsTUFBTSxVQUFVLE1BQU0sSUFBSTtBQUM1RCxZQUFJLFNBQVMsTUFBTTtBQUFFLG1CQUFTQSxLQUFJLEdBQUdBLEtBQUksU0FBUyxLQUFLLFFBQVFBLE1BQzdEO0FBQUUsaUNBQXFCLElBQUksU0FBUyxLQUFLQSxFQUFDLEdBQUcsVUFBVSxNQUFNLEtBQUs7QUFBQSxVQUFFO0FBQUEsUUFBRTtBQUFBLE1BQzVFO0FBRUUsZUFBUyxxQkFBcUIsSUFBSSxNQUFNLFVBQVUsTUFBTSxZQUFZO0FBQ2xFLFlBQUksQ0FBQyxLQUFLLFNBQVM7QUFBRTtBQUFBLFFBQU07QUFDM0IsWUFBSSxPQUFPLGtCQUFrQixRQUFRO0FBQ3JDLGlCQUFTQSxLQUFJLEdBQUcsS0FBSyxLQUFLLFNBQVNBLEtBQUksR0FBRyxRQUFRLEVBQUVBLElBQUc7QUFDckQsY0FBSSxTQUFTLEdBQUdBLEVBQUMsR0FBRyxPQUFPLElBQUksT0FBTyxDQUFDLE9BQU8sSUFBSSxHQUFHLDJCQUEyQixPQUFPLFlBQVksTUFBTSxPQUFPLFlBQVksR0FBRztBQUMvSCxjQUFJLENBQUMsT0FBTyxtQkFBbUI7QUFBRSxpQkFBSyxhQUFhLG9CQUFvQixNQUFNO0FBQUEsVUFBRTtBQUMvRSw2QkFBbUIsUUFBUSxNQUFNLFVBQVUsSUFBSTtBQUMvQyxhQUFHLFFBQVEsTUFBTSxjQUFjLElBQUk7QUFDbkMsY0FBSSxjQUFjLE9BQU8sT0FDdkI7QUFBRSxpQkFBSyxhQUFhLE1BQU0sU0FBUyxVQUFVLFNBQVMsSUFBSTtBQUFBLFVBQUUsT0FFNUQ7QUFBRSxpQkFBSyxZQUFZLElBQUk7QUFBQSxVQUFFO0FBQzNCLHNCQUFZLFFBQVEsUUFBUTtBQUFBLFFBQ2xDO0FBQUEsTUFDQTtBQUVFLGVBQVMsbUJBQW1CLFFBQVEsTUFBTSxVQUFVLE1BQU07QUFDeEQsWUFBSSxPQUFPLFdBQVc7QUFDeEIsV0FBQyxTQUFTLGNBQWMsU0FBUyxZQUFZLEtBQUssS0FBSyxJQUFJO0FBQ3ZELGNBQUksUUFBUSxLQUFLO0FBQ2pCLGVBQUssTUFBTSxPQUFPLEtBQUssV0FBVztBQUNsQyxjQUFJLENBQUMsT0FBTyxhQUFhO0FBQ3ZCLHFCQUFTLEtBQUs7QUFDZCxpQkFBSyxNQUFNLGNBQWMsS0FBSyxtQkFBbUI7QUFBQSxVQUN6RDtBQUNNLGVBQUssTUFBTSxRQUFRLFFBQVE7QUFBQSxRQUNqQztBQUNJLFlBQUksT0FBTyxhQUFhO0FBQ3RCLGVBQUssTUFBTSxTQUFTO0FBQ3BCLGVBQUssTUFBTSxXQUFXO0FBQ3RCLGNBQUksQ0FBQyxPQUFPLFdBQVc7QUFBRSxpQkFBSyxNQUFNLGFBQWEsQ0FBQyxLQUFLLG1CQUFtQjtBQUFBLFVBQUs7QUFBQSxRQUNyRjtBQUFBLE1BQ0E7QUFFRSxlQUFTLGFBQWEsUUFBUTtBQUM1QixZQUFJLE9BQU8sVUFBVSxNQUFNO0FBQUUsaUJBQU8sT0FBTztBQUFBLFFBQU07QUFDakQsWUFBSSxLQUFLLE9BQU8sSUFBSTtBQUNwQixZQUFJLENBQUMsSUFBSTtBQUFFLGlCQUFPO0FBQUEsUUFBQztBQUNuQixZQUFJLENBQUMsU0FBUyxTQUFTLE1BQU0sT0FBTyxJQUFJLEdBQUc7QUFDekMsY0FBSSxjQUFjO0FBQ2xCLGNBQUksT0FBTyxhQUNUO0FBQUUsMkJBQWUsbUJBQW1CLEdBQUcsUUFBUSxRQUFRLGNBQWM7QUFBQSxVQUFNO0FBQzdFLGNBQUksT0FBTyxXQUNUO0FBQUUsMkJBQWUsWUFBWSxHQUFHLFFBQVEsUUFBUSxjQUFjO0FBQUEsVUFBTTtBQUN0RSwrQkFBcUIsR0FBRyxRQUFRLFNBQVMsSUFBSSxPQUFPLENBQUMsT0FBTyxJQUFJLEdBQUcsTUFBTSxXQUFXLENBQUM7QUFBQSxRQUMzRjtBQUNJLGVBQU8sT0FBTyxTQUFTLE9BQU8sS0FBSyxXQUFXO0FBQUEsTUFDbEQ7QUFHRSxlQUFTLGNBQWMsU0FBUyxHQUFHO0FBQ2pDLGlCQUFTLElBQUksU0FBUyxDQUFDLEdBQUcsS0FBSyxRQUFRLFNBQVMsSUFBSSxFQUFFLFlBQVk7QUFDaEUsY0FBSSxDQUFDLEtBQU0sRUFBRSxZQUFZLEtBQUssRUFBRSxhQUFhLGtCQUFrQixLQUFLLFVBQy9ELEVBQUUsY0FBYyxRQUFRLFNBQVMsS0FBSyxRQUFRLE9BQ2pEO0FBQUUsbUJBQU87QUFBQSxVQUFJO0FBQUEsUUFDckI7QUFBQSxNQUNBO0FBSUUsZUFBUyxXQUFXLFNBQVM7QUFBQyxlQUFPLFFBQVEsVUFBVTtBQUFBLE1BQVM7QUFDaEUsZUFBUyxZQUFZLFNBQVM7QUFBQyxlQUFPLFFBQVEsTUFBTSxlQUFlLFFBQVEsVUFBVTtBQUFBLE1BQVk7QUFDakcsZUFBUyxTQUFTLFNBQVM7QUFDekIsWUFBSSxRQUFRLGdCQUFnQjtBQUFFLGlCQUFPLFFBQVE7QUFBQSxRQUFjO0FBQzNELFlBQUksSUFBSSxxQkFBcUIsUUFBUSxTQUFTLElBQUksT0FBTyxLQUFLLHNCQUFzQixDQUFDO0FBQ3JGLFlBQUksUUFBUSxPQUFPLG1CQUFtQixPQUFPLGlCQUFpQixDQUFDLElBQUksRUFBRTtBQUNyRSxZQUFJLE9BQU8sRUFBQyxNQUFNLFNBQVMsTUFBTSxXQUFXLEdBQUcsT0FBTyxTQUFTLE1BQU0sWUFBWSxFQUFDO0FBQ2xGLFlBQUksQ0FBQyxNQUFNLEtBQUssSUFBSSxLQUFLLENBQUMsTUFBTSxLQUFLLEtBQUssR0FBRztBQUFFLGtCQUFRLGlCQUFpQjtBQUFBLFFBQUs7QUFDN0UsZUFBTztBQUFBLE1BQ1g7QUFFRSxlQUFTLFVBQVUsSUFBSTtBQUFFLGVBQU8sY0FBYyxHQUFHLFFBQVE7QUFBQSxNQUFjO0FBQ3ZFLGVBQVMsYUFBYSxJQUFJO0FBQ3hCLGVBQU8sR0FBRyxRQUFRLFNBQVMsY0FBYyxVQUFVLEVBQUUsSUFBSSxHQUFHLFFBQVE7QUFBQSxNQUN4RTtBQUNFLGVBQVMsY0FBYyxJQUFJO0FBQ3pCLGVBQU8sR0FBRyxRQUFRLFNBQVMsZUFBZSxVQUFVLEVBQUUsSUFBSSxHQUFHLFFBQVE7QUFBQSxNQUN6RTtBQU1FLGVBQVMsa0JBQWtCLElBQUksVUFBVSxNQUFNO0FBQzdDLFlBQUksV0FBVyxHQUFHLFFBQVE7QUFDMUIsWUFBSSxXQUFXLFlBQVksYUFBYSxFQUFFO0FBQzFDLFlBQUksQ0FBQyxTQUFTLFFBQVEsV0FBVyxZQUFZLFNBQVMsUUFBUSxTQUFTLFVBQVU7QUFDL0UsY0FBSSxVQUFVLFNBQVMsUUFBUSxVQUFVLENBQUE7QUFDekMsY0FBSSxVQUFVO0FBQ1oscUJBQVMsUUFBUSxRQUFRO0FBQ3pCLGdCQUFJLFFBQVEsU0FBUyxLQUFLLFdBQVcsZUFBYztBQUNuRCxxQkFBU0EsS0FBSSxHQUFHQSxLQUFJLE1BQU0sU0FBUyxHQUFHQSxNQUFLO0FBQ3pDLGtCQUFJLE1BQU0sTUFBTUEsRUFBQyxHQUFHLE9BQU8sTUFBTUEsS0FBSSxDQUFDO0FBQ3RDLGtCQUFJLEtBQUssSUFBSSxJQUFJLFNBQVMsS0FBSyxNQUFNLElBQUksR0FDdkM7QUFBRSx3QkFBUSxNQUFNLElBQUksU0FBUyxLQUFLLE9BQU8sSUFBSSxLQUFLLEdBQUc7QUFBQSxjQUFFO0FBQUEsWUFDbkU7QUFBQSxVQUNBO0FBQ00sa0JBQVEsS0FBSyxLQUFLLFNBQVMsS0FBSyxHQUFHO0FBQUEsUUFDekM7QUFBQSxNQUNBO0FBS0UsZUFBUyxnQkFBZ0IsVUFBVSxNQUFNLE9BQU87QUFDOUMsWUFBSSxTQUFTLFFBQVEsTUFDbkI7QUFBRSxpQkFBTyxFQUFDLEtBQUssU0FBUyxRQUFRLEtBQUssT0FBTyxTQUFTLFFBQVEsTUFBSztBQUFBLFFBQUM7QUFDckUsWUFBSSxTQUFTLE1BQU07QUFDakIsbUJBQVNBLEtBQUksR0FBR0EsS0FBSSxTQUFTLEtBQUssUUFBUUEsTUFDeEM7QUFBRSxnQkFBSSxTQUFTLEtBQUtBLEVBQUMsS0FBSyxNQUN4QjtBQUFFLHFCQUFPLEVBQUMsS0FBSyxTQUFTLFFBQVEsS0FBS0EsRUFBQyxHQUFHLE9BQU8sU0FBUyxRQUFRLE9BQU9BLEVBQUMsRUFBQztBQUFBLFlBQUM7QUFBQSxVQUFFO0FBQ2pGLG1CQUFTSyxPQUFNLEdBQUdBLE9BQU0sU0FBUyxLQUFLLFFBQVFBLFFBQzVDO0FBQUUsZ0JBQUksT0FBTyxTQUFTLEtBQUtBLElBQUcsQ0FBQyxJQUFJLE9BQ2pDO0FBQUUscUJBQU8sRUFBQyxLQUFLLFNBQVMsUUFBUSxLQUFLQSxJQUFHLEdBQUcsT0FBTyxTQUFTLFFBQVEsT0FBT0EsSUFBRyxHQUFHLFFBQVEsS0FBSTtBQUFBLFlBQUM7QUFBQSxVQUFFO0FBQUEsUUFDekc7QUFBQSxNQUNBO0FBSUUsZUFBUywwQkFBMEIsSUFBSSxNQUFNO0FBQzNDLGVBQU8sV0FBVyxJQUFJO0FBQ3RCLFlBQUksUUFBUSxPQUFPLElBQUk7QUFDdkIsWUFBSSxPQUFPLEdBQUcsUUFBUSxtQkFBbUIsSUFBSSxTQUFTLEdBQUcsS0FBSyxNQUFNLEtBQUs7QUFDekUsYUFBSyxRQUFRO0FBQ2IsWUFBSSxRQUFRLEtBQUssUUFBUSxpQkFBaUIsSUFBSSxJQUFJO0FBQ2xELGFBQUssT0FBTyxNQUFNO0FBQ2xCLDZCQUFxQixHQUFHLFFBQVEsYUFBYSxNQUFNLEdBQUc7QUFDdEQsZUFBTztBQUFBLE1BQ1g7QUFJRSxlQUFTLFlBQVksSUFBSSxNQUFNLElBQUksTUFBTTtBQUN2QyxlQUFPLG9CQUFvQixJQUFJLHNCQUFzQixJQUFJLElBQUksR0FBRyxJQUFJLElBQUk7QUFBQSxNQUM1RTtBQUdFLGVBQVMsZ0JBQWdCLElBQUksT0FBTztBQUNsQyxZQUFJLFNBQVMsR0FBRyxRQUFRLFlBQVksUUFBUSxHQUFHLFFBQVEsUUFDckQ7QUFBRSxpQkFBTyxHQUFHLFFBQVEsS0FBSyxjQUFjLElBQUksS0FBSyxDQUFDO0FBQUEsUUFBQztBQUNwRCxZQUFJLE1BQU0sR0FBRyxRQUFRO0FBQ3JCLFlBQUksT0FBTyxTQUFTLElBQUksU0FBUyxRQUFRLElBQUksUUFBUSxJQUFJLE1BQ3ZEO0FBQUUsaUJBQU87QUFBQSxRQUFHO0FBQUEsTUFDbEI7QUFPRSxlQUFTLHNCQUFzQixJQUFJLE1BQU07QUFDdkMsWUFBSSxRQUFRLE9BQU8sSUFBSTtBQUN2QixZQUFJLE9BQU8sZ0JBQWdCLElBQUksS0FBSztBQUNwQyxZQUFJLFFBQVEsQ0FBQyxLQUFLLE1BQU07QUFDdEIsaUJBQU87QUFBQSxRQUNiLFdBQWUsUUFBUSxLQUFLLFNBQVM7QUFDL0IsK0JBQXFCLElBQUksTUFBTSxPQUFPLGNBQWMsRUFBRSxDQUFDO0FBQ3ZELGFBQUcsTUFBTSxjQUFjO0FBQUEsUUFDN0I7QUFDSSxZQUFJLENBQUMsTUFDSDtBQUFFLGlCQUFPLDBCQUEwQixJQUFJLElBQUk7QUFBQSxRQUFFO0FBRS9DLFlBQUksT0FBTyxnQkFBZ0IsTUFBTSxNQUFNLEtBQUs7QUFDNUMsZUFBTztBQUFBLFVBQ0w7QUFBQSxVQUFZO0FBQUEsVUFBWSxNQUFNO0FBQUEsVUFDOUIsS0FBSyxLQUFLO0FBQUEsVUFBSyxPQUFPLEtBQUs7QUFBQSxVQUFPLFFBQVEsS0FBSztBQUFBLFVBQy9DLFlBQVk7QUFBQSxRQUNsQjtBQUFBLE1BQ0E7QUFJRSxlQUFTLG9CQUFvQixJQUFJLFVBQVUsSUFBSSxNQUFNLFdBQVc7QUFDOUQsWUFBSSxTQUFTLFFBQVE7QUFBRSxlQUFLO0FBQUEsUUFBRztBQUMvQixZQUFJLE1BQU0sTUFBTSxRQUFRLEtBQUs7QUFDN0IsWUFBSSxTQUFTLE1BQU0sZUFBZSxHQUFHLEdBQUc7QUFDdEMsa0JBQVEsU0FBUyxNQUFNLEdBQUc7QUFBQSxRQUNoQyxPQUFXO0FBQ0wsY0FBSSxDQUFDLFNBQVMsTUFDWjtBQUFFLHFCQUFTLE9BQU8sU0FBUyxLQUFLLEtBQUssc0JBQXFCO0FBQUEsVUFBRztBQUMvRCxjQUFJLENBQUMsU0FBUyxZQUFZO0FBQ3hCLDhCQUFrQixJQUFJLFNBQVMsTUFBTSxTQUFTLElBQUk7QUFDbEQscUJBQVMsYUFBYTtBQUFBLFVBQzlCO0FBQ00sa0JBQVEsaUJBQWlCLElBQUksVUFBVSxJQUFJLElBQUk7QUFDL0MsY0FBSSxDQUFDLE1BQU0sT0FBTztBQUFFLHFCQUFTLE1BQU0sR0FBRyxJQUFJO0FBQUEsVUFBTTtBQUFBLFFBQ3REO0FBQ0ksZUFBTztBQUFBLFVBQUMsTUFBTSxNQUFNO0FBQUEsVUFBTSxPQUFPLE1BQU07QUFBQSxVQUMvQixLQUFLLFlBQVksTUFBTSxPQUFPLE1BQU07QUFBQSxVQUNwQyxRQUFRLFlBQVksTUFBTSxVQUFVLE1BQU07QUFBQSxRQUFNO0FBQUEsTUFDNUQ7QUFFRSxVQUFJLFdBQVcsRUFBQyxNQUFNLEdBQUcsT0FBTyxHQUFHLEtBQUssR0FBRyxRQUFRLEVBQUM7QUFFcEQsZUFBUyx1QkFBdUJFLE1BQUssSUFBSSxNQUFNO0FBQzdDLFlBQUksTUFBTSxPQUFPLEtBQUssVUFBVSxRQUFRO0FBR3hDLGlCQUFTUCxLQUFJLEdBQUdBLEtBQUlPLEtBQUksUUFBUVAsTUFBSyxHQUFHO0FBQ3RDLG1CQUFTTyxLQUFJUCxFQUFDO0FBQ2QsaUJBQU9PLEtBQUlQLEtBQUksQ0FBQztBQUNoQixjQUFJLEtBQUssUUFBUTtBQUNmLG9CQUFRO0FBQUcsa0JBQU07QUFDakIsdUJBQVc7QUFBQSxVQUNuQixXQUFpQixLQUFLLE1BQU07QUFDcEIsb0JBQVEsS0FBSztBQUNiLGtCQUFNLFFBQVE7QUFBQSxVQUN0QixXQUFpQkEsTUFBS08sS0FBSSxTQUFTLEtBQUssTUFBTSxRQUFRQSxLQUFJUCxLQUFJLENBQUMsSUFBSSxJQUFJO0FBQy9ELGtCQUFNLE9BQU87QUFDYixvQkFBUSxNQUFNO0FBQ2QsZ0JBQUksTUFBTSxNQUFNO0FBQUUseUJBQVc7QUFBQSxZQUFRO0FBQUEsVUFDN0M7QUFDTSxjQUFJLFNBQVMsTUFBTTtBQUNqQixtQkFBT08sS0FBSVAsS0FBSSxDQUFDO0FBQ2hCLGdCQUFJLFVBQVUsUUFBUSxTQUFTLEtBQUssYUFBYSxTQUFTLFVBQ3hEO0FBQUUseUJBQVc7QUFBQSxZQUFLO0FBQ3BCLGdCQUFJLFFBQVEsVUFBVSxTQUFTLEdBQzdCO0FBQUUscUJBQU9BLE1BQUtPLEtBQUlQLEtBQUksQ0FBQyxLQUFLTyxLQUFJUCxLQUFJLENBQUMsS0FBS08sS0FBSVAsS0FBSSxDQUFDLEVBQUUsWUFBWTtBQUMvRCx1QkFBT08sTUFBS1AsTUFBSyxLQUFLLENBQUM7QUFDdkIsMkJBQVc7QUFBQSxjQUN2QjtBQUFBLFlBQVc7QUFDSCxnQkFBSSxRQUFRLFdBQVcsU0FBUyxPQUFPLFFBQ3JDO0FBQUUscUJBQU9BLEtBQUlPLEtBQUksU0FBUyxLQUFLQSxLQUFJUCxLQUFJLENBQUMsS0FBS08sS0FBSVAsS0FBSSxDQUFDLEtBQUssQ0FBQ08sS0FBSVAsS0FBSSxDQUFDLEVBQUUsWUFBWTtBQUNqRix1QkFBT08sTUFBS1AsTUFBSyxLQUFLLENBQUM7QUFDdkIsMkJBQVc7QUFBQSxjQUN2QjtBQUFBLFlBQVc7QUFDSDtBQUFBLFVBQ1I7QUFBQSxRQUNBO0FBQ0ksZUFBTyxFQUFDLE1BQVksT0FBYyxLQUFVLFVBQW9CLFlBQVksUUFBUSxVQUFVLEtBQUk7QUFBQSxNQUN0RztBQUVFLGVBQVMsY0FBYyxPQUFPLE1BQU07QUFDbEMsWUFBSSxPQUFPO0FBQ1gsWUFBSSxRQUFRLFFBQVE7QUFBRSxtQkFBU0EsS0FBSSxHQUFHQSxLQUFJLE1BQU0sUUFBUUEsTUFBSztBQUMzRCxpQkFBSyxPQUFPLE1BQU1BLEVBQUMsR0FBRyxRQUFRLEtBQUssT0FBTztBQUFFO0FBQUEsWUFBSztBQUFBLFVBQ3ZEO0FBQUEsZUFBYTtBQUFFLG1CQUFTSyxPQUFNLE1BQU0sU0FBUyxHQUFHQSxRQUFPLEdBQUdBLFFBQU87QUFDM0QsaUJBQUssT0FBTyxNQUFNQSxJQUFHLEdBQUcsUUFBUSxLQUFLLE9BQU87QUFBRTtBQUFBLFlBQUs7QUFBQSxVQUN6RDtBQUFBLFFBQUs7QUFDRCxlQUFPO0FBQUEsTUFDWDtBQUVFLGVBQVMsaUJBQWlCLElBQUksVUFBVSxJQUFJLE1BQU07QUFDaEQsWUFBSSxRQUFRLHVCQUF1QixTQUFTLEtBQUssSUFBSSxJQUFJO0FBQ3pELFlBQUksT0FBTyxNQUFNLE1BQU0sUUFBUSxNQUFNLE9BQU8sTUFBTSxNQUFNLEtBQUssV0FBVyxNQUFNO0FBRTlFLFlBQUk7QUFDSixZQUFJLEtBQUssWUFBWSxHQUFHO0FBQ3RCLG1CQUFTQSxPQUFNLEdBQUdBLE9BQU0sR0FBR0EsUUFBTztBQUNoQyxtQkFBTyxTQUFTLGdCQUFnQixTQUFTLEtBQUssS0FBSyxPQUFPLE1BQU0sYUFBYSxLQUFLLENBQUMsR0FBRztBQUFFLGdCQUFFO0FBQUEsWUFBTTtBQUNoRyxtQkFBTyxNQUFNLGFBQWEsTUFBTSxNQUFNLFlBQVksZ0JBQWdCLFNBQVMsS0FBSyxLQUFLLE9BQU8sTUFBTSxhQUFhLEdBQUcsQ0FBQyxHQUFHO0FBQUUsZ0JBQUU7QUFBQSxZQUFJO0FBQzlILGdCQUFJLE1BQU0sYUFBYSxLQUFLLFNBQVMsS0FBSyxPQUFPLE1BQU0sV0FBVyxNQUFNLFlBQ3RFO0FBQUUscUJBQU8sS0FBSyxXQUFXLHNCQUFxQjtBQUFBLFlBQUcsT0FFakQ7QUFBRSxxQkFBTyxjQUFjLE1BQU0sTUFBTSxPQUFPLEdBQUcsRUFBRSxlQUFjLEdBQUksSUFBSTtBQUFBLFlBQUU7QUFDekUsZ0JBQUksS0FBSyxRQUFRLEtBQUssU0FBUyxTQUFTLEdBQUc7QUFBRTtBQUFBLFlBQUs7QUFDbEQsa0JBQU07QUFDTixvQkFBUSxRQUFRO0FBQ2hCLHVCQUFXO0FBQUEsVUFDbkI7QUFDTSxjQUFJLE1BQU0sYUFBYSxJQUFJO0FBQUUsbUJBQU8sMEJBQTBCLEdBQUcsUUFBUSxTQUFTLElBQUk7QUFBQSxVQUFFO0FBQUEsUUFDOUYsT0FBVztBQUNMLGNBQUksUUFBUSxHQUFHO0FBQUUsdUJBQVcsT0FBTztBQUFBLFVBQVE7QUFDM0MsY0FBSTtBQUNKLGNBQUksR0FBRyxRQUFRLGlCQUFpQixRQUFRLEtBQUssa0JBQWtCLFNBQVMsR0FDdEU7QUFBRSxtQkFBTyxNQUFNLFFBQVEsVUFBVSxNQUFNLFNBQVMsSUFBSSxDQUFDO0FBQUEsVUFBRSxPQUV2RDtBQUFFLG1CQUFPLEtBQUssc0JBQXFCO0FBQUEsVUFBRztBQUFBLFFBQzlDO0FBQ0ksWUFBSSxNQUFNLGFBQWEsS0FBSyxDQUFDLFVBQVUsQ0FBQyxRQUFRLENBQUMsS0FBSyxRQUFRLENBQUMsS0FBSyxRQUFRO0FBQzFFLGNBQUksUUFBUSxLQUFLLFdBQVcsZUFBYyxFQUFHLENBQUM7QUFDOUMsY0FBSSxPQUNGO0FBQUUsbUJBQU8sRUFBQyxNQUFNLE1BQU0sTUFBTSxPQUFPLE1BQU0sT0FBTyxVQUFVLEdBQUcsT0FBTyxHQUFHLEtBQUssTUFBTSxLQUFLLFFBQVEsTUFBTSxPQUFNO0FBQUEsVUFBRSxPQUU3RztBQUFFLG1CQUFPO0FBQUEsVUFBUztBQUFBLFFBQzFCO0FBRUksWUFBSSxPQUFPLEtBQUssTUFBTSxTQUFTLEtBQUssS0FBSyxPQUFPLEtBQUssU0FBUyxTQUFTLEtBQUs7QUFDNUUsWUFBSSxPQUFPLE9BQU8sUUFBUTtBQUMxQixZQUFJLFVBQVUsU0FBUyxLQUFLLFFBQVE7QUFDcEMsWUFBSUwsS0FBSTtBQUNSLGVBQU9BLEtBQUksUUFBUSxTQUFTLEdBQUdBLE1BQzdCO0FBQUUsY0FBSSxNQUFNLFFBQVFBLEVBQUMsR0FBRztBQUFFO0FBQUEsVUFBSztBQUFBLFFBQUU7QUFDbkMsWUFBSSxNQUFNQSxLQUFJLFFBQVFBLEtBQUksQ0FBQyxJQUFJLEdBQUcsTUFBTSxRQUFRQSxFQUFDO0FBQ2pELFlBQUksU0FBUztBQUFBLFVBQUMsT0FBTyxZQUFZLFVBQVUsS0FBSyxRQUFRLEtBQUssUUFBUSxTQUFTLEtBQUs7QUFBQSxVQUNyRSxRQUFRLFlBQVksU0FBUyxLQUFLLE9BQU8sS0FBSyxTQUFTLFNBQVMsS0FBSztBQUFBLFVBQ3JFO0FBQUEsVUFBVSxRQUFRO0FBQUEsUUFBRztBQUNuQyxZQUFJLENBQUMsS0FBSyxRQUFRLENBQUMsS0FBSyxPQUFPO0FBQUUsaUJBQU8sUUFBUTtBQUFBLFFBQUs7QUFDckQsWUFBSSxDQUFDLEdBQUcsUUFBUSwyQkFBMkI7QUFBRSxpQkFBTyxPQUFPO0FBQU0saUJBQU8sVUFBVTtBQUFBLFFBQUs7QUFFdkYsZUFBTztBQUFBLE1BQ1g7QUFJRSxlQUFTLDBCQUEwQixTQUFTLE1BQU07QUFDaEQsWUFBSSxDQUFDLE9BQU8sVUFBVSxPQUFPLGVBQWUsUUFDeEMsT0FBTyxlQUFlLE9BQU8sY0FBYyxDQUFDLGtCQUFrQixPQUFPLEdBQ3ZFO0FBQUUsaUJBQU87QUFBQSxRQUFJO0FBQ2YsWUFBSSxTQUFTLE9BQU8sY0FBYyxPQUFPO0FBQ3pDLFlBQUksU0FBUyxPQUFPLGNBQWMsT0FBTztBQUN6QyxlQUFPO0FBQUEsVUFBQyxNQUFNLEtBQUssT0FBTztBQUFBLFVBQVEsT0FBTyxLQUFLLFFBQVE7QUFBQSxVQUM5QyxLQUFLLEtBQUssTUFBTTtBQUFBLFVBQVEsUUFBUSxLQUFLLFNBQVM7QUFBQSxRQUFNO0FBQUEsTUFDaEU7QUFFRSxlQUFTLDZCQUE2QixVQUFVO0FBQzlDLFlBQUksU0FBUyxTQUFTO0FBQ3BCLG1CQUFTLFFBQVEsUUFBUSxDQUFBO0FBQ3pCLG1CQUFTLFFBQVEsVUFBVTtBQUMzQixjQUFJLFNBQVMsTUFBTTtBQUFFLHFCQUFTQSxLQUFJLEdBQUdBLEtBQUksU0FBUyxLQUFLLFFBQVFBLE1BQzdEO0FBQUUsdUJBQVMsUUFBUSxPQUFPQSxFQUFDLElBQUksQ0FBQTtBQUFBLFlBQUc7QUFBQSxVQUFFO0FBQUEsUUFDNUM7QUFBQSxNQUNBO0FBRUUsZUFBUywwQkFBMEIsSUFBSTtBQUNyQyxXQUFHLFFBQVEsa0JBQWtCO0FBQzdCLHVCQUFlLEdBQUcsUUFBUSxXQUFXO0FBQ3JDLGlCQUFTQSxLQUFJLEdBQUdBLEtBQUksR0FBRyxRQUFRLEtBQUssUUFBUUEsTUFDMUM7QUFBRSx1Q0FBNkIsR0FBRyxRQUFRLEtBQUtBLEVBQUMsQ0FBQztBQUFBLFFBQUU7QUFBQSxNQUN6RDtBQUVFLGVBQVMsWUFBWSxJQUFJO0FBQ3ZCLGtDQUEwQixFQUFFO0FBQzVCLFdBQUcsUUFBUSxrQkFBa0IsR0FBRyxRQUFRLG1CQUFtQixHQUFHLFFBQVEsaUJBQWlCO0FBQ3ZGLFlBQUksQ0FBQyxHQUFHLFFBQVEsY0FBYztBQUFFLGFBQUcsUUFBUSxpQkFBaUI7QUFBQSxRQUFLO0FBQ2pFLFdBQUcsUUFBUSxlQUFlO0FBQUEsTUFDOUI7QUFFRSxlQUFTLFlBQVlFLE1BQUs7QUFJeEIsWUFBSSxVQUFVLFNBQVM7QUFBRSxpQkFBTyxFQUFFQSxLQUFJLEtBQUssc0JBQXFCLEVBQUcsT0FBTyxTQUFTLGlCQUFpQkEsS0FBSSxJQUFJLEVBQUUsVUFBVTtBQUFBLFFBQUU7QUFDMUgsZUFBT0EsS0FBSSxZQUFZLGdCQUFnQkEsS0FBSSxtQkFBbUJBLEtBQUksTUFBTTtBQUFBLE1BQzVFO0FBQ0UsZUFBUyxZQUFZQSxNQUFLO0FBQ3hCLFlBQUksVUFBVSxTQUFTO0FBQUUsaUJBQU8sRUFBRUEsS0FBSSxLQUFLLHNCQUFxQixFQUFHLE1BQU0sU0FBUyxpQkFBaUJBLEtBQUksSUFBSSxFQUFFLFNBQVM7QUFBQSxRQUFFO0FBQ3hILGVBQU9BLEtBQUksWUFBWSxnQkFBZ0JBLEtBQUksbUJBQW1CQSxLQUFJLE1BQU07QUFBQSxNQUM1RTtBQUVFLGVBQVMsZ0JBQWdCLFNBQVM7QUFDaEMsWUFBSSxNQUFNLFdBQVcsT0FBTztBQUM1QixZQUFJLFVBQVUsSUFBSTtBQUNsQixZQUFJLFNBQVM7QUFDYixZQUFJLFNBQVM7QUFBRSxtQkFBU0YsS0FBSSxHQUFHQSxLQUFJLFFBQVEsUUFBUSxFQUFFQSxJQUFHO0FBQUUsZ0JBQUksUUFBUUEsRUFBQyxFQUFFLE9BQ3ZFO0FBQUUsd0JBQVUsYUFBYSxRQUFRQSxFQUFDLENBQUM7QUFBQSxZQUFFO0FBQUEsVUFBRTtBQUFBLFFBQUU7QUFDM0MsZUFBTztBQUFBLE1BQ1g7QUFNRSxlQUFTLGdCQUFnQixJQUFJLFNBQVMsTUFBTSxTQUFTLGdCQUFnQjtBQUNuRSxZQUFJLENBQUMsZ0JBQWdCO0FBQ25CLGNBQUksU0FBUyxnQkFBZ0IsT0FBTztBQUNwQyxlQUFLLE9BQU87QUFBUSxlQUFLLFVBQVU7QUFBQSxRQUN6QztBQUNJLFlBQUksV0FBVyxRQUFRO0FBQUUsaUJBQU87QUFBQSxRQUFJO0FBQ3BDLFlBQUksQ0FBQyxTQUFTO0FBQUUsb0JBQVU7QUFBQSxRQUFRO0FBQ2xDLFlBQUksT0FBTyxhQUFhLE9BQU87QUFDL0IsWUFBSSxXQUFXLFNBQVM7QUFBRSxrQkFBUSxXQUFXLEdBQUcsT0FBTztBQUFBLFFBQUUsT0FDcEQ7QUFBRSxrQkFBUSxHQUFHLFFBQVE7QUFBQSxRQUFXO0FBQ3JDLFlBQUksV0FBVyxVQUFVLFdBQVcsVUFBVTtBQUM1QyxjQUFJLE9BQU8sR0FBRyxRQUFRLFVBQVUsc0JBQXFCO0FBQ3JELGtCQUFRLEtBQUssT0FBTyxXQUFXLFdBQVcsSUFBSSxZQUFZLElBQUksRUFBRSxDQUFDO0FBQ2pFLGNBQUksT0FBTyxLQUFLLFFBQVEsV0FBVyxXQUFXLElBQUksWUFBWSxJQUFJLEVBQUUsQ0FBQztBQUNyRSxlQUFLLFFBQVE7QUFBTSxlQUFLLFNBQVM7QUFBQSxRQUN2QztBQUNJLGFBQUssT0FBTztBQUFNLGFBQUssVUFBVTtBQUNqQyxlQUFPO0FBQUEsTUFDWDtBQUlFLGVBQVMsZ0JBQWdCLElBQUksUUFBUSxTQUFTO0FBQzVDLFlBQUksV0FBVyxPQUFPO0FBQUUsaUJBQU87QUFBQSxRQUFNO0FBQ3JDLFlBQUksT0FBTyxPQUFPLE1BQU0sTUFBTSxPQUFPO0FBRXJDLFlBQUksV0FBVyxRQUFRO0FBQ3JCLGtCQUFRLFlBQVksSUFBSSxFQUFFLENBQUM7QUFDM0IsaUJBQU8sWUFBWSxJQUFJLEVBQUUsQ0FBQztBQUFBLFFBQ2hDLFdBQWUsV0FBVyxXQUFXLENBQUMsU0FBUztBQUN6QyxjQUFJLFdBQVcsR0FBRyxRQUFRLE1BQU0sc0JBQXFCO0FBQ3JELGtCQUFRLFNBQVM7QUFDakIsaUJBQU8sU0FBUztBQUFBLFFBQ3RCO0FBRUksWUFBSSxlQUFlLEdBQUcsUUFBUSxVQUFVLHNCQUFxQjtBQUM3RCxlQUFPLEVBQUMsTUFBTSxPQUFPLGFBQWEsTUFBTSxLQUFLLE1BQU0sYUFBYSxJQUFHO0FBQUEsTUFDdkU7QUFFRSxlQUFTLFdBQVcsSUFBSSxLQUFLLFNBQVMsU0FBUyxNQUFNO0FBQ25ELFlBQUksQ0FBQyxTQUFTO0FBQUUsb0JBQVUsUUFBUSxHQUFHLEtBQUssSUFBSSxJQUFJO0FBQUEsUUFBRTtBQUNwRCxlQUFPLGdCQUFnQixJQUFJLFNBQVMsWUFBWSxJQUFJLFNBQVMsSUFBSSxJQUFJLElBQUksR0FBRyxPQUFPO0FBQUEsTUFDdkY7QUFrQkUsZUFBUyxhQUFhLElBQUksS0FBSyxTQUFTLFNBQVMsaUJBQWlCLFdBQVc7QUFDM0Usa0JBQVUsV0FBVyxRQUFRLEdBQUcsS0FBSyxJQUFJLElBQUk7QUFDN0MsWUFBSSxDQUFDLGlCQUFpQjtBQUFFLDRCQUFrQixzQkFBc0IsSUFBSSxPQUFPO0FBQUEsUUFBRTtBQUM3RSxpQkFBUyxJQUFJWSxLQUFJLE9BQU87QUFDdEIsY0FBSSxJQUFJLG9CQUFvQixJQUFJLGlCQUFpQkEsS0FBSSxRQUFRLFVBQVUsUUFBUSxTQUFTO0FBQ3hGLGNBQUksT0FBTztBQUFFLGNBQUUsT0FBTyxFQUFFO0FBQUEsVUFBTSxPQUFRO0FBQUUsY0FBRSxRQUFRLEVBQUU7QUFBQSxVQUFLO0FBQ3pELGlCQUFPLGdCQUFnQixJQUFJLFNBQVMsR0FBRyxPQUFPO0FBQUEsUUFDcEQ7QUFDSSxZQUFJLFFBQVEsU0FBUyxTQUFTLEdBQUcsSUFBSSxTQUFTLEdBQUcsS0FBSyxJQUFJLElBQUksU0FBUyxJQUFJO0FBQzNFLFlBQUksTUFBTSxRQUFRLEtBQUssUUFBUTtBQUM3QixlQUFLLFFBQVEsS0FBSztBQUNsQixtQkFBUztBQUFBLFFBQ2YsV0FBZSxNQUFNLEdBQUc7QUFDbEIsZUFBSztBQUNMLG1CQUFTO0FBQUEsUUFDZjtBQUNJLFlBQUksQ0FBQyxPQUFPO0FBQUUsaUJBQU8sSUFBSSxVQUFVLFdBQVcsS0FBSyxJQUFJLElBQUksVUFBVSxRQUFRO0FBQUEsUUFBQztBQUU5RSxpQkFBUyxRQUFRQSxLQUFJQyxVQUFTLFFBQVE7QUFDcEMsY0FBSSxPQUFPLE1BQU1BLFFBQU8sR0FBRyxRQUFRLEtBQUssU0FBUztBQUNqRCxpQkFBTyxJQUFJLFNBQVNELE1BQUssSUFBSUEsS0FBSSxTQUFTLE1BQU07QUFBQSxRQUN0RDtBQUNJLFlBQUksVUFBVSxjQUFjLE9BQU8sSUFBSSxNQUFNO0FBQzdDLFlBQUksUUFBUTtBQUNaLFlBQUksTUFBTSxRQUFRLElBQUksU0FBUyxVQUFVLFFBQVE7QUFDakQsWUFBSSxTQUFTLE1BQU07QUFBRSxjQUFJLFFBQVEsUUFBUSxJQUFJLE9BQU8sVUFBVSxRQUFRO0FBQUEsUUFBRTtBQUN4RSxlQUFPO0FBQUEsTUFDWDtBQUlFLGVBQVMsZUFBZSxJQUFJLEtBQUs7QUFDL0IsWUFBSSxPQUFPO0FBQ1gsY0FBTSxRQUFRLEdBQUcsS0FBSyxHQUFHO0FBQ3pCLFlBQUksQ0FBQyxHQUFHLFFBQVEsY0FBYztBQUFFLGlCQUFPLFVBQVUsR0FBRyxPQUFPLElBQUksSUFBSTtBQUFBLFFBQUc7QUFDdEUsWUFBSSxVQUFVLFFBQVEsR0FBRyxLQUFLLElBQUksSUFBSTtBQUN0QyxZQUFJLE1BQU0sYUFBYSxPQUFPLElBQUksV0FBVyxHQUFHLE9BQU87QUFDdkQsZUFBTyxFQUFDLE1BQVksT0FBTyxNQUFNLEtBQVUsUUFBUSxNQUFNLFFBQVEsT0FBTTtBQUFBLE1BQzNFO0FBUUUsZUFBUyxZQUFZLE1BQU0sSUFBSSxRQUFRLFNBQVMsTUFBTTtBQUNwRCxZQUFJLE1BQU0sSUFBSSxNQUFNLElBQUksTUFBTTtBQUM5QixZQUFJLE9BQU87QUFDWCxZQUFJLFNBQVM7QUFBRSxjQUFJLFVBQVU7QUFBQSxRQUFRO0FBQ3JDLGVBQU87QUFBQSxNQUNYO0FBSUUsZUFBUyxXQUFXLElBQUksR0FBRyxHQUFHO0FBQzVCLFlBQUlWLE9BQU0sR0FBRztBQUNiLGFBQUssR0FBRyxRQUFRO0FBQ2hCLFlBQUksSUFBSSxHQUFHO0FBQUUsaUJBQU8sWUFBWUEsS0FBSSxPQUFPLEdBQUcsTUFBTSxJQUFJLEVBQUU7QUFBQSxRQUFDO0FBQzNELFlBQUksUUFBUSxhQUFhQSxNQUFLLENBQUMsR0FBRyxPQUFPQSxLQUFJLFFBQVFBLEtBQUksT0FBTztBQUNoRSxZQUFJLFFBQVEsTUFDVjtBQUFFLGlCQUFPLFlBQVlBLEtBQUksUUFBUUEsS0FBSSxPQUFPLEdBQUcsUUFBUUEsTUFBSyxJQUFJLEVBQUUsS0FBSyxRQUFRLE1BQU0sR0FBRyxDQUFDO0FBQUEsUUFBQztBQUM1RixZQUFJLElBQUksR0FBRztBQUFFLGNBQUk7QUFBQSxRQUFFO0FBRW5CLFlBQUksVUFBVSxRQUFRQSxNQUFLLEtBQUs7QUFDaEMsbUJBQVM7QUFDUCxjQUFJLFFBQVEsZ0JBQWdCLElBQUksU0FBUyxPQUFPLEdBQUcsQ0FBQztBQUNwRCxjQUFJLFlBQVksb0JBQW9CLFNBQVMsTUFBTSxNQUFNLE1BQU0sT0FBTyxLQUFLLE1BQU0sVUFBVSxJQUFJLElBQUksRUFBRTtBQUNyRyxjQUFJLENBQUMsV0FBVztBQUFFLG1CQUFPO0FBQUEsVUFBSztBQUM5QixjQUFJLFdBQVcsVUFBVSxLQUFLLENBQUM7QUFDL0IsY0FBSSxTQUFTLFFBQVEsT0FBTztBQUFFLG1CQUFPO0FBQUEsVUFBUTtBQUM3QyxvQkFBVSxRQUFRQSxNQUFLLFFBQVEsU0FBUyxJQUFJO0FBQUEsUUFDbEQ7QUFBQSxNQUNBO0FBRUUsZUFBUyxrQkFBa0IsSUFBSSxTQUFTLGlCQUFpQixHQUFHO0FBQzFELGFBQUssZ0JBQWdCLE9BQU87QUFDNUIsWUFBSSxNQUFNLFFBQVEsS0FBSztBQUN2QixZQUFJLFFBQVEsVUFBVSxTQUFVLElBQUk7QUFBRSxpQkFBTyxvQkFBb0IsSUFBSSxpQkFBaUIsS0FBSyxDQUFDLEVBQUUsVUFBVTtBQUFBLFFBQUUsR0FBSSxLQUFLLENBQUM7QUFDcEgsY0FBTSxVQUFVLFNBQVUsSUFBSTtBQUFFLGlCQUFPLG9CQUFvQixJQUFJLGlCQUFpQixFQUFFLEVBQUUsTUFBTTtBQUFBLFFBQUUsR0FBSSxPQUFPLEdBQUc7QUFDMUcsZUFBTyxFQUFDLE9BQWMsSUFBUTtBQUFBLE1BQ2xDO0FBRUUsZUFBUyxzQkFBc0IsSUFBSSxTQUFTLGlCQUFpQixRQUFRO0FBQ25FLFlBQUksQ0FBQyxpQkFBaUI7QUFBRSw0QkFBa0Isc0JBQXNCLElBQUksT0FBTztBQUFBLFFBQUU7QUFDN0UsWUFBSSxZQUFZLGdCQUFnQixJQUFJLFNBQVMsb0JBQW9CLElBQUksaUJBQWlCLE1BQU0sR0FBRyxNQUFNLEVBQUU7QUFDdkcsZUFBTyxrQkFBa0IsSUFBSSxTQUFTLGlCQUFpQixTQUFTO0FBQUEsTUFDcEU7QUFJRSxlQUFTLFdBQVcsS0FBSyxHQUFHLEdBQUcsTUFBTTtBQUNuQyxlQUFPLElBQUksVUFBVSxJQUFJLFFBQVEsSUFBSSxNQUFNLElBQUksUUFBUSxPQUFPLElBQUksT0FBTyxJQUFJLFNBQVM7QUFBQSxNQUMxRjtBQUVFLGVBQVMsZ0JBQWdCLElBQUksU0FBU1EsU0FBUSxHQUFHLEdBQUc7QUFFbEQsYUFBSyxhQUFhLE9BQU87QUFDekIsWUFBSSxrQkFBa0Isc0JBQXNCLElBQUksT0FBTztBQUd2RCxZQUFJSSxnQkFBZSxnQkFBZ0IsT0FBTztBQUMxQyxZQUFJLFFBQVEsR0FBRyxNQUFNLFFBQVEsS0FBSyxRQUFRLE1BQU07QUFFaEQsWUFBSSxRQUFRLFNBQVMsU0FBUyxHQUFHLElBQUksU0FBUztBQUc5QyxZQUFJLE9BQU87QUFDVCxjQUFJLFFBQVEsR0FBRyxRQUFRLGVBQWUsd0JBQXdCLGdCQUNoRCxJQUFJLFNBQVNKLFNBQVEsaUJBQWlCLE9BQU8sR0FBRyxDQUFDO0FBQy9ELGdCQUFNLEtBQUssU0FBUztBQUtwQixrQkFBUSxNQUFNLEtBQUssT0FBTyxLQUFLLEtBQUs7QUFDcEMsZ0JBQU0sTUFBTSxLQUFLLEtBQUssS0FBSyxPQUFPO0FBQUEsUUFDeEM7QUFLSSxZQUFJLFdBQVcsTUFBTSxZQUFZO0FBQ2pDLFlBQUksS0FBSyxVQUFVLFNBQVVFLEtBQUk7QUFDL0IsY0FBSSxNQUFNLG9CQUFvQixJQUFJLGlCQUFpQkEsR0FBRTtBQUNyRCxjQUFJLE9BQU9FO0FBQWMsY0FBSSxVQUFVQTtBQUN2QyxjQUFJLENBQUMsV0FBVyxLQUFLLEdBQUcsR0FBRyxLQUFLLEdBQUc7QUFBRSxtQkFBTztBQUFBLFVBQUs7QUFDakQsY0FBSSxJQUFJLE9BQU8sS0FBSyxJQUFJLFFBQVEsR0FBRztBQUNqQyx1QkFBV0Y7QUFDWCx3QkFBWTtBQUFBLFVBQ3BCO0FBQ00saUJBQU87QUFBQSxRQUNiLEdBQU8sT0FBTyxHQUFHO0FBRWIsWUFBSSxPQUFPLFFBQVEsVUFBVTtBQUU3QixZQUFJLFdBQVc7QUFFYixjQUFJLFNBQVMsSUFBSSxVQUFVLE9BQU8sVUFBVSxRQUFRLEdBQUcsVUFBVSxVQUFVO0FBQzNFLGVBQUssWUFBWSxVQUFVLElBQUk7QUFDL0IsbUJBQVMsVUFBVSxVQUFVO0FBQzdCLGtCQUFRLFNBQVMsVUFBVSxPQUFPLFVBQVU7QUFBQSxRQUNsRCxPQUFXO0FBRUwsY0FBSSxDQUFDLFFBQVEsTUFBTSxPQUFPLE1BQU0sUUFBUTtBQUFFO0FBQUEsVUFBSztBQUkvQyxtQkFBUyxNQUFNLElBQUksVUFBVSxNQUFNLFFBQVEsS0FBSyxTQUFTLFdBQ3RELG9CQUFvQixJQUFJLGlCQUFpQixNQUFNLE1BQU0sSUFBSSxFQUFFLEVBQUUsU0FBU0UsaUJBQWdCLEtBQU0sTUFDN0YsVUFBVTtBQUdaLGNBQUksU0FBUyxhQUFhLElBQUksSUFBSUosU0FBUSxJQUFJLE1BQU0sR0FBRyxRQUFRLFNBQVMsZUFBZTtBQUN2RixrQkFBUSxPQUFPO0FBQ2Ysb0JBQVUsSUFBSSxPQUFPLE1BQU0sS0FBSyxLQUFLLE9BQU8sU0FBUyxJQUFJO0FBQUEsUUFDL0Q7QUFFSSxhQUFLLG1CQUFtQixRQUFRLE1BQU0sSUFBSSxDQUFDO0FBQzNDLGVBQU8sWUFBWUEsU0FBUSxJQUFJLFFBQVEsU0FBUyxJQUFJLEtBQUs7QUFBQSxNQUM3RDtBQUVFLGVBQVMsZUFBZSxJQUFJLFNBQVNBLFNBQVEsaUJBQWlCLE9BQU8sR0FBRyxHQUFHO0FBS3pFLFlBQUksUUFBUSxVQUFVLFNBQVVWLElBQUc7QUFDakMsY0FBSWUsUUFBTyxNQUFNZixFQUFDLEdBQUdnQixPQUFNRCxNQUFLLFNBQVM7QUFDekMsaUJBQU8sV0FBVztBQUFBLFlBQWE7QUFBQSxZQUFJLElBQUlMLFNBQVFNLE9BQU1ELE1BQUssS0FBS0EsTUFBSyxNQUFNQyxPQUFNLFdBQVcsT0FBTztBQUFBLFlBQ25FO0FBQUEsWUFBUTtBQUFBLFlBQVM7QUFBQSxVQUFlLEdBQUcsR0FBRyxHQUFHLElBQUk7QUFBQSxRQUNsRixHQUFPLEdBQUcsTUFBTSxTQUFTLENBQUM7QUFDdEIsWUFBSSxPQUFPLE1BQU0sS0FBSztBQUl0QixZQUFJLFFBQVEsR0FBRztBQUNiLGNBQUksTUFBTSxLQUFLLFNBQVM7QUFDeEIsY0FBSSxRQUFRO0FBQUEsWUFBYTtBQUFBLFlBQUksSUFBSU4sU0FBUSxNQUFNLEtBQUssT0FBTyxLQUFLLElBQUksTUFBTSxVQUFVLFFBQVE7QUFBQSxZQUNuRTtBQUFBLFlBQVE7QUFBQSxZQUFTO0FBQUEsVUFBZTtBQUN6RCxjQUFJLFdBQVcsT0FBTyxHQUFHLEdBQUcsSUFBSSxLQUFLLE1BQU0sTUFBTSxHQUMvQztBQUFFLG1CQUFPLE1BQU0sUUFBUSxDQUFDO0FBQUEsVUFBRTtBQUFBLFFBQ2xDO0FBQ0ksZUFBTztBQUFBLE1BQ1g7QUFFRSxlQUFTLHNCQUFzQixJQUFJLFNBQVMsU0FBUyxpQkFBaUIsT0FBTyxHQUFHLEdBQUc7QUFRakYsWUFBSSxNQUFNLGtCQUFrQixJQUFJLFNBQVMsaUJBQWlCLENBQUM7QUFDM0QsWUFBSSxRQUFRLElBQUk7QUFDaEIsWUFBSSxNQUFNLElBQUk7QUFDZCxZQUFJLEtBQUssS0FBSyxRQUFRLEtBQUssT0FBTyxNQUFNLENBQUMsQ0FBQyxHQUFHO0FBQUU7QUFBQSxRQUFNO0FBQ3JELFlBQUksT0FBTyxNQUFNLGNBQWM7QUFDL0IsaUJBQVNWLEtBQUksR0FBR0EsS0FBSSxNQUFNLFFBQVFBLE1BQUs7QUFDckMsY0FBSSxJQUFJLE1BQU1BLEVBQUM7QUFDZixjQUFJLEVBQUUsUUFBUSxPQUFPLEVBQUUsTUFBTSxPQUFPO0FBQUU7QUFBQSxVQUFRO0FBQzlDLGNBQUksTUFBTSxFQUFFLFNBQVM7QUFDckIsY0FBSSxPQUFPLG9CQUFvQixJQUFJLGlCQUFpQixNQUFNLEtBQUssSUFBSSxLQUFLLEVBQUUsRUFBRSxJQUFJLElBQUksS0FBSyxJQUFJLE9BQU8sRUFBRSxJQUFJLENBQUMsRUFBRTtBQUc3RyxjQUFJLE9BQU8sT0FBTyxJQUFJLElBQUksT0FBTyxNQUFNLE9BQU87QUFDOUMsY0FBSSxDQUFDLFFBQVEsY0FBYyxNQUFNO0FBQy9CLG1CQUFPO0FBQ1AsMEJBQWM7QUFBQSxVQUN0QjtBQUFBLFFBQ0E7QUFDSSxZQUFJLENBQUMsTUFBTTtBQUFFLGlCQUFPLE1BQU0sTUFBTSxTQUFTLENBQUM7QUFBQSxRQUFFO0FBRTVDLFlBQUksS0FBSyxPQUFPLE9BQU87QUFBRSxpQkFBTyxFQUFDLE1BQU0sT0FBTyxJQUFJLEtBQUssSUFBSSxPQUFPLEtBQUssTUFBSztBQUFBLFFBQUU7QUFDOUUsWUFBSSxLQUFLLEtBQUssS0FBSztBQUFFLGlCQUFPLEVBQUMsTUFBTSxLQUFLLE1BQU0sSUFBSSxLQUFLLE9BQU8sS0FBSyxNQUFLO0FBQUEsUUFBRTtBQUMxRSxlQUFPO0FBQUEsTUFDWDtBQUVFLFVBQUk7QUFFSixlQUFTLFdBQVcsU0FBUztBQUMzQixZQUFJLFFBQVEsb0JBQW9CLE1BQU07QUFBRSxpQkFBTyxRQUFRO0FBQUEsUUFBZ0I7QUFDdkUsWUFBSSxlQUFlLE1BQU07QUFDdkIsd0JBQWMsSUFBSSxPQUFPLE1BQU0sc0JBQXNCO0FBR3JELG1CQUFTQSxLQUFJLEdBQUdBLEtBQUksSUFBSSxFQUFFQSxJQUFHO0FBQzNCLHdCQUFZLFlBQVksU0FBUyxlQUFlLEdBQUcsQ0FBQztBQUNwRCx3QkFBWSxZQUFZLElBQUksSUFBSSxDQUFDO0FBQUEsVUFDekM7QUFDTSxzQkFBWSxZQUFZLFNBQVMsZUFBZSxHQUFHLENBQUM7QUFBQSxRQUMxRDtBQUNJLDZCQUFxQixRQUFRLFNBQVMsV0FBVztBQUNqRCxZQUFJLFNBQVMsWUFBWSxlQUFlO0FBQ3hDLFlBQUksU0FBUyxHQUFHO0FBQUUsa0JBQVEsbUJBQW1CO0FBQUEsUUFBTztBQUNwRCx1QkFBZSxRQUFRLE9BQU87QUFDOUIsZUFBTyxVQUFVO0FBQUEsTUFDckI7QUFHRSxlQUFTLFVBQVUsU0FBUztBQUMxQixZQUFJLFFBQVEsbUJBQW1CLE1BQU07QUFBRSxpQkFBTyxRQUFRO0FBQUEsUUFBZTtBQUNyRSxZQUFJLFNBQVMsSUFBSSxRQUFRLFlBQVk7QUFDckMsWUFBSSxNQUFNLElBQUksT0FBTyxDQUFDLE1BQU0sR0FBRyxzQkFBc0I7QUFDckQsNkJBQXFCLFFBQVEsU0FBUyxHQUFHO0FBQ3pDLFlBQUksT0FBTyxPQUFPLHlCQUF5QixTQUFTLEtBQUssUUFBUSxLQUFLLFFBQVE7QUFDOUUsWUFBSSxRQUFRLEdBQUc7QUFBRSxrQkFBUSxrQkFBa0I7QUFBQSxRQUFNO0FBQ2pELGVBQU8sU0FBUztBQUFBLE1BQ3BCO0FBSUUsZUFBUyxjQUFjLElBQUk7QUFDekIsWUFBSSxJQUFJLEdBQUcsU0FBUyxPQUFPLENBQUEsR0FBSSxRQUFRLENBQUE7QUFDdkMsWUFBSSxhQUFhLEVBQUUsUUFBUTtBQUMzQixpQkFBUyxJQUFJLEVBQUUsUUFBUSxZQUFZQSxLQUFJLEdBQUcsR0FBRyxJQUFJLEVBQUUsYUFBYSxFQUFFQSxJQUFHO0FBQ25FLGNBQUksS0FBSyxHQUFHLFFBQVEsWUFBWUEsRUFBQyxFQUFFO0FBQ25DLGVBQUssRUFBRSxJQUFJLEVBQUUsYUFBYSxFQUFFLGFBQWE7QUFDekMsZ0JBQU0sRUFBRSxJQUFJLEVBQUU7QUFBQSxRQUNwQjtBQUNJLGVBQU87QUFBQSxVQUFDLFVBQVUscUJBQXFCLENBQUM7QUFBQSxVQUNoQyxrQkFBa0IsRUFBRSxRQUFRO0FBQUEsVUFDNUIsWUFBWTtBQUFBLFVBQ1osYUFBYTtBQUFBLFVBQ2IsY0FBYyxFQUFFLFFBQVE7QUFBQSxRQUFXO0FBQUEsTUFDL0M7QUFLRSxlQUFTLHFCQUFxQixTQUFTO0FBQ3JDLGVBQU8sUUFBUSxTQUFTLHNCQUFxQixFQUFHLE9BQU8sUUFBUSxNQUFNLHdCQUF3QjtBQUFBLE1BQ2pHO0FBS0UsZUFBUyxlQUFlLElBQUk7QUFDMUIsWUFBSSxLQUFLLFdBQVcsR0FBRyxPQUFPLEdBQUcsV0FBVyxHQUFHLFFBQVE7QUFDdkQsWUFBSSxVQUFVLFlBQVksS0FBSyxJQUFJLEdBQUcsR0FBRyxRQUFRLFNBQVMsY0FBYyxVQUFVLEdBQUcsT0FBTyxJQUFJLENBQUM7QUFDakcsZUFBTyxTQUFVLE1BQU07QUFDckIsY0FBSSxhQUFhLEdBQUcsS0FBSyxJQUFJLEdBQUc7QUFBRSxtQkFBTztBQUFBLFVBQUM7QUFFMUMsY0FBSSxnQkFBZ0I7QUFDcEIsY0FBSSxLQUFLLFNBQVM7QUFBRSxxQkFBU0EsS0FBSSxHQUFHQSxLQUFJLEtBQUssUUFBUSxRQUFRQSxNQUFLO0FBQ2hFLGtCQUFJLEtBQUssUUFBUUEsRUFBQyxFQUFFLFFBQVE7QUFBRSxpQ0FBaUIsS0FBSyxRQUFRQSxFQUFDLEVBQUU7QUFBQSxjQUFPO0FBQUEsWUFDOUU7QUFBQSxVQUFPO0FBRUQsY0FBSSxVQUNGO0FBQUUsbUJBQU8saUJBQWlCLEtBQUssS0FBSyxLQUFLLEtBQUssU0FBUyxPQUFPLEtBQUssS0FBSztBQUFBLFVBQUUsT0FFMUU7QUFBRSxtQkFBTyxnQkFBZ0I7QUFBQSxVQUFFO0FBQUEsUUFDbkM7QUFBQSxNQUNBO0FBRUUsZUFBUyxvQkFBb0IsSUFBSTtBQUMvQixZQUFJRSxPQUFNLEdBQUcsS0FBSyxNQUFNLGVBQWUsRUFBRTtBQUN6QyxRQUFBQSxLQUFJLEtBQUssU0FBVSxNQUFNO0FBQ3ZCLGNBQUksWUFBWSxJQUFJLElBQUk7QUFDeEIsY0FBSSxhQUFhLEtBQUssUUFBUTtBQUFFLDZCQUFpQixNQUFNLFNBQVM7QUFBQSxVQUFFO0FBQUEsUUFDeEUsQ0FBSztBQUFBLE1BQ0w7QUFPRSxlQUFTLGFBQWEsSUFBSSxHQUFHLFNBQVMsU0FBUztBQUM3QyxZQUFJLFVBQVUsR0FBRztBQUNqQixZQUFJLENBQUMsV0FBVyxTQUFTLENBQUMsRUFBRSxhQUFhLGdCQUFnQixLQUFLLFFBQVE7QUFBRSxpQkFBTztBQUFBLFFBQUk7QUFFbkYsWUFBSSxHQUFHLEdBQUcsUUFBUSxRQUFRLFVBQVUsc0JBQXFCO0FBRXpELFlBQUk7QUFBRSxjQUFJLEVBQUUsVUFBVSxNQUFNO0FBQU0sY0FBSSxFQUFFLFVBQVUsTUFBTTtBQUFBLFFBQUksU0FDckQsS0FBSztBQUFFLGlCQUFPO0FBQUEsUUFBSTtBQUN6QixZQUFJLFNBQVMsV0FBVyxJQUFJLEdBQUcsQ0FBQyxHQUFHO0FBQ25DLFlBQUksV0FBVyxPQUFPLE9BQU8sTUFBTSxPQUFPLFFBQVEsR0FBRyxLQUFLLE9BQU8sSUFBSSxFQUFFLE1BQU0sVUFBVSxPQUFPLElBQUk7QUFDaEcsY0FBSSxVQUFVLFlBQVksTUFBTSxLQUFLLFFBQVEsR0FBRyxRQUFRLE9BQU8sSUFBSSxLQUFLO0FBQ3hFLG1CQUFTLElBQUksT0FBTyxNQUFNLEtBQUssSUFBSSxHQUFHLEtBQUssT0FBTyxJQUFJLFNBQVMsR0FBRyxPQUFPLEVBQUUsUUFBUSxVQUFVLEdBQUcsT0FBTyxDQUFDLElBQUksT0FBTyxDQUFDO0FBQUEsUUFDMUg7QUFDSSxlQUFPO0FBQUEsTUFDWDtBQUlFLGVBQVMsY0FBYyxJQUFJLEdBQUc7QUFDNUIsWUFBSSxLQUFLLEdBQUcsUUFBUSxRQUFRO0FBQUUsaUJBQU87QUFBQSxRQUFJO0FBQ3pDLGFBQUssR0FBRyxRQUFRO0FBQ2hCLFlBQUksSUFBSSxHQUFHO0FBQUUsaUJBQU87QUFBQSxRQUFJO0FBQ3hCLFlBQUksT0FBTyxHQUFHLFFBQVE7QUFDdEIsaUJBQVNGLEtBQUksR0FBR0EsS0FBSSxLQUFLLFFBQVFBLE1BQUs7QUFDcEMsZUFBSyxLQUFLQSxFQUFDLEVBQUU7QUFDYixjQUFJLElBQUksR0FBRztBQUFFLG1CQUFPQTtBQUFBLFVBQUM7QUFBQSxRQUMzQjtBQUFBLE1BQ0E7QUFRRSxlQUFTLFVBQVUsSUFBSSxNQUFNLElBQUksU0FBUztBQUN4QyxZQUFJLFFBQVEsTUFBTTtBQUFFLGlCQUFPLEdBQUcsSUFBSTtBQUFBLFFBQU07QUFDeEMsWUFBSSxNQUFNLE1BQU07QUFBRSxlQUFLLEdBQUcsSUFBSSxRQUFRLEdBQUcsSUFBSTtBQUFBLFFBQUs7QUFDbEQsWUFBSSxDQUFDLFNBQVM7QUFBRSxvQkFBVTtBQUFBLFFBQUU7QUFFNUIsWUFBSSxVQUFVLEdBQUc7QUFDakIsWUFBSSxXQUFXLEtBQUssUUFBUSxXQUN2QixRQUFRLHFCQUFxQixRQUFRLFFBQVEsb0JBQW9CLE9BQ3BFO0FBQUUsa0JBQVEsb0JBQW9CO0FBQUEsUUFBSztBQUVyQyxXQUFHLE1BQU0sY0FBYztBQUV2QixZQUFJLFFBQVEsUUFBUSxRQUFRO0FBQzFCLGNBQUkscUJBQXFCLGFBQWEsR0FBRyxLQUFLLElBQUksSUFBSSxRQUFRLFFBQzVEO0FBQUUsc0JBQVUsRUFBRTtBQUFBLFVBQUU7QUFBQSxRQUN4QixXQUFlLE1BQU0sUUFBUSxVQUFVO0FBQ2pDLGNBQUkscUJBQXFCLGdCQUFnQixHQUFHLEtBQUssS0FBSyxPQUFPLElBQUksUUFBUSxVQUFVO0FBQ2pGLHNCQUFVLEVBQUU7QUFBQSxVQUNwQixPQUFhO0FBQ0wsb0JBQVEsWUFBWTtBQUNwQixvQkFBUSxVQUFVO0FBQUEsVUFDMUI7QUFBQSxRQUNBLFdBQWUsUUFBUSxRQUFRLFlBQVksTUFBTSxRQUFRLFFBQVE7QUFDM0Qsb0JBQVUsRUFBRTtBQUFBLFFBQ2xCLFdBQWUsUUFBUSxRQUFRLFVBQVU7QUFDbkMsY0FBSSxNQUFNLGlCQUFpQixJQUFJLElBQUksS0FBSyxTQUFTLENBQUM7QUFDbEQsY0FBSSxLQUFLO0FBQ1Asb0JBQVEsT0FBTyxRQUFRLEtBQUssTUFBTSxJQUFJLEtBQUs7QUFDM0Msb0JBQVEsV0FBVyxJQUFJO0FBQ3ZCLG9CQUFRLFVBQVU7QUFBQSxVQUMxQixPQUFhO0FBQ0wsc0JBQVUsRUFBRTtBQUFBLFVBQ3BCO0FBQUEsUUFDQSxXQUFlLE1BQU0sUUFBUSxRQUFRO0FBQy9CLGNBQUksUUFBUSxpQkFBaUIsSUFBSSxNQUFNLE1BQU0sRUFBRTtBQUMvQyxjQUFJLE9BQU87QUFDVCxvQkFBUSxPQUFPLFFBQVEsS0FBSyxNQUFNLEdBQUcsTUFBTSxLQUFLO0FBQ2hELG9CQUFRLFNBQVMsTUFBTTtBQUFBLFVBQy9CLE9BQWE7QUFDTCxzQkFBVSxFQUFFO0FBQUEsVUFDcEI7QUFBQSxRQUNBLE9BQVc7QUFDTCxjQUFJLFNBQVMsaUJBQWlCLElBQUksTUFBTSxNQUFNLEVBQUU7QUFDaEQsY0FBSSxTQUFTLGlCQUFpQixJQUFJLElBQUksS0FBSyxTQUFTLENBQUM7QUFDckQsY0FBSSxVQUFVLFFBQVE7QUFDcEIsb0JBQVEsT0FBTyxRQUFRLEtBQUssTUFBTSxHQUFHLE9BQU8sS0FBSyxFQUM5QyxPQUFPLGVBQWUsSUFBSSxPQUFPLE9BQU8sT0FBTyxLQUFLLENBQUMsRUFDckQsT0FBTyxRQUFRLEtBQUssTUFBTSxPQUFPLEtBQUssQ0FBQztBQUMxQyxvQkFBUSxVQUFVO0FBQUEsVUFDMUIsT0FBYTtBQUNMLHNCQUFVLEVBQUU7QUFBQSxVQUNwQjtBQUFBLFFBQ0E7QUFFSSxZQUFJLE1BQU0sUUFBUTtBQUNsQixZQUFJLEtBQUs7QUFDUCxjQUFJLEtBQUssSUFBSSxPQUNYO0FBQUUsZ0JBQUksU0FBUztBQUFBLFVBQVEsV0FDaEIsT0FBTyxJQUFJLFFBQVEsSUFBSSxNQUM5QjtBQUFFLG9CQUFRLG1CQUFtQjtBQUFBLFVBQUs7QUFBQSxRQUMxQztBQUFBLE1BQ0E7QUFJRSxlQUFTLGNBQWMsSUFBSSxNQUFNLE1BQU07QUFDckMsV0FBRyxNQUFNLGNBQWM7QUFDdkIsWUFBSSxVQUFVLEdBQUcsU0FBUyxNQUFNLEdBQUcsUUFBUTtBQUMzQyxZQUFJLE9BQU8sUUFBUSxJQUFJLFNBQVMsT0FBTyxJQUFJLFFBQVEsSUFBSSxNQUNyRDtBQUFFLGtCQUFRLG1CQUFtQjtBQUFBLFFBQUs7QUFFcEMsWUFBSSxPQUFPLFFBQVEsWUFBWSxRQUFRLFFBQVEsUUFBUTtBQUFFO0FBQUEsUUFBTTtBQUMvRCxZQUFJLFdBQVcsUUFBUSxLQUFLLGNBQWMsSUFBSSxJQUFJLENBQUM7QUFDbkQsWUFBSSxTQUFTLFFBQVEsTUFBTTtBQUFFO0FBQUEsUUFBTTtBQUNuQyxZQUFJLE1BQU0sU0FBUyxZQUFZLFNBQVMsVUFBVSxDQUFBO0FBQ2xELFlBQUksUUFBUSxLQUFLLElBQUksS0FBSyxJQUFJO0FBQUUsY0FBSSxLQUFLLElBQUk7QUFBQSxRQUFFO0FBQUEsTUFDbkQ7QUFHRSxlQUFTLFVBQVUsSUFBSTtBQUNyQixXQUFHLFFBQVEsV0FBVyxHQUFHLFFBQVEsU0FBUyxHQUFHLElBQUk7QUFDakQsV0FBRyxRQUFRLE9BQU8sQ0FBQTtBQUNsQixXQUFHLFFBQVEsYUFBYTtBQUFBLE1BQzVCO0FBRUUsZUFBUyxpQkFBaUIsSUFBSSxNQUFNLE1BQU0sS0FBSztBQUM3QyxZQUFJLFFBQVEsY0FBYyxJQUFJLElBQUksR0FBRyxNQUFNLE9BQU8sR0FBRyxRQUFRO0FBQzdELFlBQUksQ0FBQyxxQkFBcUIsUUFBUSxHQUFHLElBQUksUUFBUSxHQUFHLElBQUksTUFDdEQ7QUFBRSxpQkFBTyxFQUFDLE9BQWMsT0FBTyxLQUFJO0FBQUEsUUFBQztBQUN0QyxZQUFJLElBQUksR0FBRyxRQUFRO0FBQ25CLGlCQUFTQSxLQUFJLEdBQUdBLEtBQUksT0FBT0EsTUFDekI7QUFBRSxlQUFLLEtBQUtBLEVBQUMsRUFBRTtBQUFBLFFBQUs7QUFDdEIsWUFBSSxLQUFLLE1BQU07QUFDYixjQUFJLE1BQU0sR0FBRztBQUNYLGdCQUFJLFNBQVMsS0FBSyxTQUFTLEdBQUc7QUFBRSxxQkFBTztBQUFBLFlBQUk7QUFDM0MsbUJBQVEsSUFBSSxLQUFLLEtBQUssRUFBRSxPQUFRO0FBQ2hDO0FBQUEsVUFDUixPQUFhO0FBQ0wsbUJBQU8sSUFBSTtBQUFBLFVBQ25CO0FBQ00sa0JBQVE7QUFBTSxrQkFBUTtBQUFBLFFBQzVCO0FBQ0ksZUFBTyxhQUFhLEdBQUcsS0FBSyxJQUFJLEtBQUssTUFBTTtBQUN6QyxjQUFJLFVBQVUsTUFBTSxJQUFJLElBQUksS0FBSyxTQUFTLElBQUk7QUFBRSxtQkFBTztBQUFBLFVBQUk7QUFDM0Qsa0JBQVEsTUFBTSxLQUFLLFNBQVMsTUFBTSxJQUFJLElBQUksRUFBRSxFQUFFO0FBQzlDLG1CQUFTO0FBQUEsUUFDZjtBQUNJLGVBQU8sRUFBQyxPQUFjLE9BQU8sS0FBSTtBQUFBLE1BQ3JDO0FBSUUsZUFBUyxXQUFXLElBQUksTUFBTSxJQUFJO0FBQ2hDLFlBQUksVUFBVSxHQUFHLFNBQVMsT0FBTyxRQUFRO0FBQ3pDLFlBQUksS0FBSyxVQUFVLEtBQUssUUFBUSxRQUFRLFVBQVUsTUFBTSxRQUFRLFVBQVU7QUFDeEUsa0JBQVEsT0FBTyxlQUFlLElBQUksTUFBTSxFQUFFO0FBQzFDLGtCQUFRLFdBQVc7QUFBQSxRQUN6QixPQUFXO0FBQ0wsY0FBSSxRQUFRLFdBQVcsTUFDckI7QUFBRSxvQkFBUSxPQUFPLGVBQWUsSUFBSSxNQUFNLFFBQVEsUUFBUSxFQUFFLE9BQU8sUUFBUSxJQUFJO0FBQUEsVUFBRSxXQUMxRSxRQUFRLFdBQVcsTUFDMUI7QUFBRSxvQkFBUSxPQUFPLFFBQVEsS0FBSyxNQUFNLGNBQWMsSUFBSSxJQUFJLENBQUM7QUFBQSxVQUFFO0FBQy9ELGtCQUFRLFdBQVc7QUFDbkIsY0FBSSxRQUFRLFNBQVMsSUFDbkI7QUFBRSxvQkFBUSxPQUFPLFFBQVEsS0FBSyxPQUFPLGVBQWUsSUFBSSxRQUFRLFFBQVEsRUFBRSxDQUFDO0FBQUEsVUFBRSxXQUN0RSxRQUFRLFNBQVMsSUFDeEI7QUFBRSxvQkFBUSxPQUFPLFFBQVEsS0FBSyxNQUFNLEdBQUcsY0FBYyxJQUFJLEVBQUUsQ0FBQztBQUFBLFVBQUU7QUFBQSxRQUN0RTtBQUNJLGdCQUFRLFNBQVM7QUFBQSxNQUNyQjtBQUlFLGVBQVMsZUFBZSxJQUFJO0FBQzFCLFlBQUksT0FBTyxHQUFHLFFBQVEsTUFBTSxRQUFRO0FBQ3BDLGlCQUFTQSxLQUFJLEdBQUdBLEtBQUksS0FBSyxRQUFRQSxNQUFLO0FBQ3BDLGNBQUksV0FBVyxLQUFLQSxFQUFDO0FBQ3JCLGNBQUksQ0FBQyxTQUFTLFdBQVcsQ0FBQyxTQUFTLFFBQVEsU0FBUyxVQUFVO0FBQUUsY0FBRTtBQUFBLFVBQU07QUFBQSxRQUM5RTtBQUNJLGVBQU87QUFBQSxNQUNYO0FBRUUsZUFBUyxnQkFBZ0IsSUFBSTtBQUMzQixXQUFHLFFBQVEsTUFBTSxjQUFjLEdBQUcsUUFBUSxNQUFNLGtCQUFrQjtBQUFBLE1BQ3RFO0FBRUUsZUFBUyxpQkFBaUIsSUFBSSxTQUFTO0FBQ3JDLFlBQUssWUFBWSxPQUFTLFdBQVU7QUFFcEMsWUFBSUUsT0FBTSxHQUFHLEtBQUssU0FBUyxDQUFBO0FBQzNCLFlBQUksY0FBYyxPQUFPLFVBQVUsU0FBUyx1QkFBc0I7QUFDbEUsWUFBSSxjQUFjLE9BQU8sWUFBWSxTQUFTLHVCQUFzQjtBQUVwRSxZQUFJLGVBQWUsR0FBRyxRQUFRO0FBQzlCLFlBQUksY0FBYztBQUFFLG9CQUFVO0FBQUEsUUFBSztBQUNuQyxpQkFBU0YsS0FBSSxHQUFHQSxLQUFJRSxLQUFJLElBQUksT0FBTyxRQUFRRixNQUFLO0FBQzlDLGNBQUksQ0FBQyxXQUFXQSxNQUFLRSxLQUFJLElBQUksV0FBVztBQUFFO0FBQUEsVUFBUTtBQUNsRCxjQUFJTSxTQUFRTixLQUFJLElBQUksT0FBT0YsRUFBQztBQUM1QixjQUFJUSxPQUFNLEtBQUksRUFBRyxRQUFRLEdBQUcsUUFBUSxVQUFVQSxPQUFNLEdBQUUsRUFBRyxPQUFPLEdBQUcsUUFBUSxVQUFVO0FBQUU7QUFBQSxVQUFRO0FBQy9GLGNBQUksWUFBWUEsT0FBTSxNQUFLO0FBQzNCLGNBQUksY0FBYztBQUNoQixnQkFBSSxPQUFPLGFBQWEsSUFBSUEsTUFBSztBQUNqQyxnQkFBSSxNQUFNO0FBQUUsa0NBQW9CLElBQUksTUFBTSxXQUFXO0FBQUEsWUFBRTtBQUFBLFVBQy9ELFdBQWlCLGFBQWEsR0FBRyxRQUFRLHlCQUF5QjtBQUMxRCxnQ0FBb0IsSUFBSUEsT0FBTSxNQUFNLFdBQVc7QUFBQSxVQUN2RDtBQUNNLGNBQUksQ0FBQyxXQUNIO0FBQUUsK0JBQW1CLElBQUlBLFFBQU8sV0FBVztBQUFBLFVBQUU7QUFBQSxRQUNyRDtBQUNJLGVBQU87QUFBQSxNQUNYO0FBR0UsZUFBUyxvQkFBb0IsSUFBSSxNQUFNLFFBQVE7QUFDN0MsWUFBSSxNQUFNLGFBQWEsSUFBSSxNQUFNLE9BQU8sTUFBTSxNQUFNLENBQUMsR0FBRyxRQUFRLHlCQUF5QjtBQUV6RixZQUFJLFNBQVMsT0FBTyxZQUFZLElBQUksT0FBTyxLQUFVLG1CQUFtQixDQUFDO0FBQ3pFLGVBQU8sTUFBTSxPQUFPLElBQUksT0FBTztBQUMvQixlQUFPLE1BQU0sTUFBTSxJQUFJLE1BQU07QUFDN0IsZUFBTyxNQUFNLFNBQVMsS0FBSyxJQUFJLEdBQUcsSUFBSSxTQUFTLElBQUksR0FBRyxJQUFJLEdBQUcsUUFBUSxlQUFlO0FBRXBGLFlBQUksb0JBQW9CLEtBQUssR0FBRyxrQkFBaUIsRUFBRyxTQUFTLEdBQUc7QUFDOUQsY0FBSSxVQUFVLFdBQVcsSUFBSSxNQUFNLE9BQU8sTUFBTSxJQUFJO0FBQ3BELGNBQUksUUFBUSxRQUFRLFFBQVEsUUFBUTtBQUNwQyxpQkFBTyxNQUFNLFNBQVMsUUFBUSxJQUFJLFFBQVEsR0FBRyxpQkFBZ0IsS0FBTTtBQUFBLFFBQ3pFO0FBRUksWUFBSSxJQUFJLE9BQU87QUFFYixjQUFJLGNBQWMsT0FBTyxZQUFZLElBQUksT0FBTyxLQUFVLDhDQUE4QyxDQUFDO0FBQ3pHLHNCQUFZLE1BQU0sVUFBVTtBQUM1QixzQkFBWSxNQUFNLE9BQU8sSUFBSSxNQUFNLE9BQU87QUFDMUMsc0JBQVksTUFBTSxNQUFNLElBQUksTUFBTSxNQUFNO0FBQ3hDLHNCQUFZLE1BQU0sVUFBVSxJQUFJLE1BQU0sU0FBUyxJQUFJLE1BQU0sT0FBTyxPQUFNO0FBQUEsUUFDNUU7QUFBQSxNQUNBO0FBRUUsZUFBUyxVQUFVLEdBQUcsR0FBRztBQUFFLGVBQU8sRUFBRSxNQUFNLEVBQUUsT0FBTyxFQUFFLE9BQU8sRUFBRTtBQUFBLE1BQUk7QUFHbEUsZUFBUyxtQkFBbUIsSUFBSUEsUUFBTyxRQUFRO0FBQzdDLFlBQUksVUFBVSxHQUFHLFNBQVNOLE9BQU0sR0FBRztBQUNuQyxZQUFJLFdBQVcsU0FBUyx1QkFBc0I7QUFDOUMsWUFBSSxVQUFVLFNBQVMsR0FBRyxPQUFPLEdBQUcsV0FBVyxRQUFRO0FBQ3ZELFlBQUksWUFBWSxLQUFLLElBQUksUUFBUSxZQUFZLGFBQWEsRUFBRSxJQUFJLFFBQVEsTUFBTSxVQUFVLElBQUksUUFBUTtBQUNwRyxZQUFJLFNBQVNBLEtBQUksYUFBYTtBQUU5QixpQkFBUyxJQUFJLE1BQU0sS0FBSyxPQUFPLFFBQVE7QUFDckMsY0FBSSxNQUFNLEdBQUc7QUFBRSxrQkFBTTtBQUFBLFVBQUU7QUFDdkIsZ0JBQU0sS0FBSyxNQUFNLEdBQUc7QUFDcEIsbUJBQVMsS0FBSyxNQUFNLE1BQU07QUFDMUIsbUJBQVMsWUFBWSxJQUFJLE9BQU8sTUFBTSx1QkFBd0IsK0JBQStCLE9BQU8sNENBQTRDLE1BQU0saUJBQWlCLFNBQVMsT0FBTyxZQUFZLE9BQU8sU0FBUyxnREFBZ0QsU0FBUyxPQUFPLEtBQU07QUFBQSxRQUMvUjtBQUVJLGlCQUFTLFlBQVksTUFBTSxTQUFTLE9BQU87QUFDekMsY0FBSSxVQUFVLFFBQVFBLE1BQUssSUFBSTtBQUMvQixjQUFJLFVBQVUsUUFBUSxLQUFLO0FBQzNCLGNBQUksT0FBTztBQUNYLG1CQUFTLE9BQU8sSUFBSSxNQUFNO0FBQ3hCLG1CQUFPLFdBQVcsSUFBSSxJQUFJLE1BQU0sRUFBRSxHQUFHLE9BQU8sU0FBUyxJQUFJO0FBQUEsVUFDakU7QUFFTSxtQkFBUyxNQUFNLEtBQUssS0FBSyxNQUFNO0FBQzdCLGdCQUFJLFNBQVMsc0JBQXNCLElBQUksU0FBUyxNQUFNLEdBQUc7QUFDekQsZ0JBQUlDLFFBQVEsT0FBTyxVQUFXLFFBQVEsV0FBVyxTQUFTO0FBQzFELGdCQUFJLEtBQUssUUFBUSxVQUFVLE9BQU8sUUFBUSxPQUFPLE9BQU8sS0FBSyxLQUFLLFFBQVEsS0FBSyxPQUFPLE9BQU8sTUFBTSxDQUFDLENBQUMsSUFBSSxJQUFJO0FBQzdHLG1CQUFPLE9BQU8sSUFBSUEsS0FBSSxFQUFFQSxLQUFJO0FBQUEsVUFDcEM7QUFFTSxjQUFJLFFBQVEsU0FBUyxTQUFTRCxLQUFJLFNBQVM7QUFDM0MsOEJBQW9CLE9BQU8sV0FBVyxHQUFHLFNBQVMsT0FBTyxVQUFVLE9BQU8sU0FBVSxNQUFNLElBQUksS0FBS0YsSUFBRztBQUNwRyxnQkFBSSxNQUFNLE9BQU87QUFDakIsZ0JBQUksVUFBVSxPQUFPLE1BQU0sTUFBTSxTQUFTLE9BQU87QUFDakQsZ0JBQUksUUFBUSxPQUFPLEtBQUssR0FBRyxNQUFNLFVBQVUsTUFBTTtBQUVqRCxnQkFBSSxZQUFZLFdBQVcsUUFBUSxRQUFRLEdBQUcsVUFBVSxTQUFTLFFBQVEsTUFBTTtBQUMvRSxnQkFBSSxRQUFRQSxNQUFLLEdBQUcsT0FBTyxDQUFDLFNBQVNBLE1BQUssTUFBTSxTQUFTO0FBQ3pELGdCQUFJLE1BQU0sTUFBTSxRQUFRLE9BQU8sR0FBRztBQUNoQyxrQkFBSSxZQUFZLFNBQVMsWUFBWSxZQUFZO0FBQ2pELGtCQUFJLGFBQWEsU0FBUyxVQUFVLGNBQWM7QUFDbEQsa0JBQUksT0FBTyxXQUFXLFlBQVksTUFBTSxVQUFVLE9BQU87QUFDekQsa0JBQUksUUFBUSxZQUFZLGFBQWEsTUFBTSxRQUFRLFNBQVM7QUFDNUQsa0JBQUksTUFBTSxRQUFRLEtBQUssUUFBUSxNQUFNLFFBQVEsTUFBTTtBQUFBLFlBQzdELE9BQWU7QUFDTCxrQkFBSSxTQUFTLFVBQVUsU0FBUztBQUNoQyxrQkFBSSxLQUFLO0FBQ1AsMEJBQVUsVUFBVSxhQUFhLFFBQVEsV0FBVyxRQUFRO0FBQzVELDJCQUFXLFNBQVMsWUFBWSxNQUFNLE1BQU0sS0FBSyxRQUFRO0FBQ3pELDBCQUFVLFNBQVMsV0FBVyxNQUFNLElBQUksS0FBSyxPQUFPO0FBQ3BELDJCQUFXLFVBQVUsV0FBVyxPQUFPLFlBQVksTUFBTTtBQUFBLGNBQ3JFLE9BQWlCO0FBQ0wsMEJBQVUsQ0FBQyxTQUFTLFdBQVcsTUFBTSxNQUFNLEtBQUssUUFBUTtBQUN4RCwyQkFBVyxDQUFDLFVBQVUsYUFBYSxRQUFRLFlBQVksUUFBUTtBQUMvRCwwQkFBVSxDQUFDLFVBQVUsV0FBVyxPQUFPLFdBQVcsTUFBTTtBQUN4RCwyQkFBVyxDQUFDLFNBQVMsWUFBWSxNQUFNLElBQUksS0FBSyxPQUFPO0FBQUEsY0FDbkU7QUFDVSxrQkFBSSxTQUFTLFFBQVEsS0FBSyxXQUFXLFNBQVMsUUFBUSxNQUFNO0FBQzVELGtCQUFJLFFBQVEsU0FBUyxNQUFNLEtBQUs7QUFBRSxvQkFBSSxVQUFVLFFBQVEsUUFBUSxNQUFNLE1BQU0sR0FBRztBQUFBLGNBQUU7QUFDakYsa0JBQUksU0FBUyxNQUFNLEtBQUssV0FBVyxTQUFTLE1BQU0sTUFBTTtBQUFBLFlBQ2xFO0FBRVEsZ0JBQUksQ0FBQyxTQUFTLFVBQVUsU0FBUyxLQUFLLElBQUksR0FBRztBQUFFLHNCQUFRO0FBQUEsWUFBUTtBQUMvRCxnQkFBSSxVQUFVLE9BQU8sS0FBSyxJQUFJLEdBQUc7QUFBRSxzQkFBUTtBQUFBLFlBQU07QUFDakQsZ0JBQUksQ0FBQyxPQUFPLFVBQVUsU0FBUyxHQUFHLElBQUksR0FBRztBQUFFLG9CQUFNO0FBQUEsWUFBUTtBQUN6RCxnQkFBSSxVQUFVLE9BQU8sR0FBRyxJQUFJLEdBQUc7QUFBRSxvQkFBTTtBQUFBLFlBQU07QUFBQSxVQUNyRCxDQUFPO0FBQ0QsaUJBQU8sRUFBQyxPQUFjLElBQVE7QUFBQSxRQUNwQztBQUVJLFlBQUksUUFBUVEsT0FBTSxLQUFJLEdBQUksTUFBTUEsT0FBTSxHQUFFO0FBQ3hDLFlBQUksTUFBTSxRQUFRLElBQUksTUFBTTtBQUMxQixzQkFBWSxNQUFNLE1BQU0sTUFBTSxJQUFJLElBQUksRUFBRTtBQUFBLFFBQzlDLE9BQVc7QUFDTCxjQUFJLFdBQVcsUUFBUU4sTUFBSyxNQUFNLElBQUksR0FBRyxTQUFTLFFBQVFBLE1BQUssSUFBSSxJQUFJO0FBQ3ZFLGNBQUksY0FBYyxXQUFXLFFBQVEsS0FBSyxXQUFXLE1BQU07QUFDM0QsY0FBSSxVQUFVLFlBQVksTUFBTSxNQUFNLE1BQU0sSUFBSSxjQUFjLFNBQVMsS0FBSyxTQUFTLElBQUksSUFBSSxFQUFFO0FBQy9GLGNBQUksYUFBYSxZQUFZLElBQUksTUFBTSxjQUFjLElBQUksTUFBTSxJQUFJLEVBQUUsRUFBRTtBQUN2RSxjQUFJLGFBQWE7QUFDZixnQkFBSSxRQUFRLE1BQU0sV0FBVyxNQUFNLEdBQUc7QUFDcEMsa0JBQUksUUFBUSxPQUFPLFFBQVEsS0FBSyxNQUFNLFFBQVEsTUFBTTtBQUNwRCxrQkFBSSxVQUFVLFdBQVcsS0FBSyxXQUFXLE1BQU0sV0FBVyxNQUFNO0FBQUEsWUFDMUUsT0FBZTtBQUNMLGtCQUFJLFFBQVEsT0FBTyxRQUFRLEtBQUssV0FBVyxPQUFPLFFBQVEsT0FBTyxRQUFRLE1BQU07QUFBQSxZQUN6RjtBQUFBLFVBQ0E7QUFDTSxjQUFJLFFBQVEsU0FBUyxXQUFXLEtBQzlCO0FBQUUsZ0JBQUksVUFBVSxRQUFRLFFBQVEsTUFBTSxXQUFXLEdBQUc7QUFBQSxVQUFFO0FBQUEsUUFDOUQ7QUFFSSxlQUFPLFlBQVksUUFBUTtBQUFBLE1BQy9CO0FBR0UsZUFBUyxhQUFhLElBQUk7QUFDeEIsWUFBSSxDQUFDLEdBQUcsTUFBTSxTQUFTO0FBQUU7QUFBQSxRQUFNO0FBQy9CLFlBQUksVUFBVSxHQUFHO0FBQ2pCLHNCQUFjLFFBQVEsT0FBTztBQUM3QixZQUFJZSxNQUFLO0FBQ1QsZ0JBQVEsVUFBVSxNQUFNLGFBQWE7QUFDckMsWUFBSSxHQUFHLFFBQVEsa0JBQWtCLEdBQy9CO0FBQUUsa0JBQVEsVUFBVSxZQUFZLFdBQVk7QUFDMUMsZ0JBQUksQ0FBQyxHQUFHLFNBQVEsR0FBSTtBQUFFLHFCQUFPLEVBQUU7QUFBQSxZQUFFO0FBQ2pDLG9CQUFRLFVBQVUsTUFBTSxjQUFjQSxNQUFLLENBQUNBLE9BQU0sS0FBSztBQUFBLFVBQy9ELEdBQVMsR0FBRyxRQUFRLGVBQWU7QUFBQSxRQUFFLFdBQ3hCLEdBQUcsUUFBUSxrQkFBa0IsR0FDcEM7QUFBRSxrQkFBUSxVQUFVLE1BQU0sYUFBYTtBQUFBLFFBQVM7QUFBQSxNQUN0RDtBQUVFLGVBQVMsWUFBWSxJQUFJO0FBQ3ZCLFlBQUksQ0FBQyxHQUFHLFlBQVk7QUFDbEIsYUFBRyxRQUFRLE1BQU0sTUFBSztBQUN0QixjQUFJLENBQUMsR0FBRyxNQUFNLFNBQVM7QUFBRSxvQkFBUSxFQUFFO0FBQUEsVUFBRTtBQUFBLFFBQzNDO0FBQUEsTUFDQTtBQUVFLGVBQVMsZUFBZSxJQUFJO0FBQzFCLFdBQUcsTUFBTSxvQkFBb0I7QUFDN0IsbUJBQVcsV0FBWTtBQUFFLGNBQUksR0FBRyxNQUFNLG1CQUFtQjtBQUN2RCxlQUFHLE1BQU0sb0JBQW9CO0FBQzdCLGdCQUFJLEdBQUcsTUFBTSxTQUFTO0FBQUUscUJBQU8sRUFBRTtBQUFBLFlBQUU7QUFBQSxVQUN6QztBQUFBLFFBQUssR0FBSSxHQUFHO0FBQUEsTUFDWjtBQUVFLGVBQVMsUUFBUSxJQUFJLEdBQUc7QUFDdEIsWUFBSSxHQUFHLE1BQU0scUJBQXFCLENBQUMsR0FBRyxNQUFNLGNBQWM7QUFBRSxhQUFHLE1BQU0sb0JBQW9CO0FBQUEsUUFBTTtBQUUvRixZQUFJLEdBQUcsUUFBUSxZQUFZLFlBQVk7QUFBRTtBQUFBLFFBQU07QUFDL0MsWUFBSSxDQUFDLEdBQUcsTUFBTSxTQUFTO0FBQ3JCLGlCQUFPLElBQUksU0FBUyxJQUFJLENBQUM7QUFDekIsYUFBRyxNQUFNLFVBQVU7QUFDbkIsbUJBQVMsR0FBRyxRQUFRLFNBQVMsb0JBQW9CO0FBSWpELGNBQUksQ0FBQyxHQUFHLFNBQVMsR0FBRyxRQUFRLHFCQUFxQixHQUFHLElBQUksS0FBSztBQUMzRCxlQUFHLFFBQVEsTUFBTSxNQUFLO0FBQ3RCLGdCQUFJLFFBQVE7QUFBRSx5QkFBVyxXQUFZO0FBQUUsdUJBQU8sR0FBRyxRQUFRLE1BQU0sTUFBTSxJQUFJO0FBQUEsY0FBRSxHQUFJLEVBQUU7QUFBQSxZQUFFO0FBQUEsVUFDM0Y7QUFDTSxhQUFHLFFBQVEsTUFBTSxjQUFhO0FBQUEsUUFDcEM7QUFDSSxxQkFBYSxFQUFFO0FBQUEsTUFDbkI7QUFDRSxlQUFTLE9BQU8sSUFBSSxHQUFHO0FBQ3JCLFlBQUksR0FBRyxNQUFNLG1CQUFtQjtBQUFFO0FBQUEsUUFBTTtBQUV4QyxZQUFJLEdBQUcsTUFBTSxTQUFTO0FBQ3BCLGlCQUFPLElBQUksUUFBUSxJQUFJLENBQUM7QUFDeEIsYUFBRyxNQUFNLFVBQVU7QUFDbkIsa0JBQVEsR0FBRyxRQUFRLFNBQVMsb0JBQW9CO0FBQUEsUUFDdEQ7QUFDSSxzQkFBYyxHQUFHLFFBQVEsT0FBTztBQUNoQyxtQkFBVyxXQUFZO0FBQUUsY0FBSSxDQUFDLEdBQUcsTUFBTSxTQUFTO0FBQUUsZUFBRyxRQUFRLFFBQVE7QUFBQSxVQUFNO0FBQUEsUUFBRSxHQUFJLEdBQUc7QUFBQSxNQUN4RjtBQUlFLGVBQVMsd0JBQXdCLElBQUk7QUFDbkMsWUFBSSxVQUFVLEdBQUc7QUFDakIsWUFBSSxhQUFhLFFBQVEsUUFBUTtBQUNqQyxZQUFJLFVBQVUsS0FBSyxJQUFJLEdBQUcsUUFBUSxTQUFTLHNCQUFxQixFQUFHLEdBQUc7QUFDdEUsWUFBSSxZQUFZLFFBQVEsUUFBUSxzQkFBcUIsRUFBRztBQUN4RCxZQUFJLGFBQWE7QUFDakIsaUJBQVNqQixLQUFJLEdBQUdBLEtBQUksUUFBUSxLQUFLLFFBQVFBLE1BQUs7QUFDNUMsY0FBSSxNQUFNLFFBQVEsS0FBS0EsRUFBQyxHQUFHLFdBQVcsR0FBRyxRQUFRO0FBQ2pELGNBQUksU0FBVSxRQUFTLFFBQVE7QUFDL0IsY0FBSSxJQUFJLFFBQVE7QUFBRTtBQUFBLFVBQVE7QUFDMUIsdUJBQWEsSUFBSSxLQUFLO0FBQ3RCLGNBQUksTUFBTSxhQUFhLEdBQUc7QUFDeEIsZ0JBQUksTUFBTSxJQUFJLEtBQUssWUFBWSxJQUFJLEtBQUs7QUFDeEMscUJBQVMsTUFBTTtBQUNmLHlCQUFhO0FBQUEsVUFDckIsT0FBYTtBQUNMLGdCQUFJLE1BQU0sSUFBSSxLQUFLLHNCQUFxQjtBQUN4QyxxQkFBUyxJQUFJLFNBQVMsSUFBSTtBQUcxQixnQkFBSSxDQUFDLFlBQVksSUFBSSxLQUFLLFlBQ3hCO0FBQUUsc0JBQVEsSUFBSSxLQUFLLFdBQVcsd0JBQXdCLFFBQVEsSUFBSSxPQUFPO0FBQUEsWUFBRTtBQUFBLFVBQ3JGO0FBQ00sY0FBSSxPQUFPLElBQUksS0FBSyxTQUFTO0FBQzdCLGNBQUksT0FBTyxRQUFRLE9BQU8sT0FBTztBQUMvQixnQkFBSSxZQUFZLFNBQVM7QUFBRSw0QkFBYztBQUFBLFlBQUs7QUFDOUMsNkJBQWlCLElBQUksTUFBTSxNQUFNO0FBQ2pDLCtCQUFtQixJQUFJLElBQUk7QUFDM0IsZ0JBQUksSUFBSSxNQUFNO0FBQUUsdUJBQVMsSUFBSSxHQUFHLElBQUksSUFBSSxLQUFLLFFBQVEsS0FDbkQ7QUFBRSxtQ0FBbUIsSUFBSSxLQUFLLENBQUMsQ0FBQztBQUFBLGNBQUU7QUFBQSxZQUFFO0FBQUEsVUFDOUM7QUFDTSxjQUFJLFFBQVEsR0FBRyxRQUFRLFlBQVk7QUFDakMsZ0JBQUksVUFBVSxLQUFLLEtBQUssUUFBUSxVQUFVLEdBQUcsT0FBTyxDQUFDO0FBQ3JELGdCQUFJLFVBQVUsR0FBRyxRQUFRLGVBQWU7QUFDdEMsaUJBQUcsUUFBUSxnQkFBZ0I7QUFDM0IsaUJBQUcsUUFBUSxVQUFVLElBQUk7QUFDekIsaUJBQUcsUUFBUSxpQkFBaUI7QUFBQSxZQUN0QztBQUFBLFVBQ0E7QUFBQSxRQUNBO0FBQ0ksWUFBSSxLQUFLLElBQUksVUFBVSxJQUFJLEdBQUc7QUFBRSxrQkFBUSxTQUFTLGFBQWE7QUFBQSxRQUFXO0FBQUEsTUFDN0U7QUFJRSxlQUFTLG1CQUFtQixNQUFNO0FBQ2hDLFlBQUksS0FBSyxTQUFTO0FBQUUsbUJBQVNBLEtBQUksR0FBR0EsS0FBSSxLQUFLLFFBQVEsUUFBUSxFQUFFQSxJQUFHO0FBQ2hFLGdCQUFJLElBQUksS0FBSyxRQUFRQSxFQUFDLEdBQUcsU0FBUyxFQUFFLEtBQUs7QUFDekMsZ0JBQUksUUFBUTtBQUFFLGdCQUFFLFNBQVMsT0FBTztBQUFBLFlBQWE7QUFBQSxVQUNuRDtBQUFBLFFBQUs7QUFBQSxNQUNMO0FBS0UsZUFBUyxhQUFhLFNBQVNFLE1BQUssVUFBVTtBQUM1QyxZQUFJLE1BQU0sWUFBWSxTQUFTLE9BQU8sT0FBTyxLQUFLLElBQUksR0FBRyxTQUFTLEdBQUcsSUFBSSxRQUFRLFNBQVM7QUFDMUYsY0FBTSxLQUFLLE1BQU0sTUFBTSxXQUFXLE9BQU8sQ0FBQztBQUMxQyxZQUFJLFNBQVMsWUFBWSxTQUFTLFVBQVUsT0FBTyxTQUFTLFNBQVMsTUFBTSxRQUFRLFFBQVE7QUFFM0YsWUFBSSxPQUFPLGFBQWFBLE1BQUssR0FBRyxHQUFHLEtBQUssYUFBYUEsTUFBSyxNQUFNO0FBR2hFLFlBQUksWUFBWSxTQUFTLFFBQVE7QUFDL0IsY0FBSSxhQUFhLFNBQVMsT0FBTyxLQUFLLE1BQU0sV0FBVyxTQUFTLE9BQU8sR0FBRztBQUMxRSxjQUFJLGFBQWEsTUFBTTtBQUNyQixtQkFBTztBQUNQLGlCQUFLLGFBQWFBLE1BQUssYUFBYSxRQUFRQSxNQUFLLFVBQVUsQ0FBQyxJQUFJLFFBQVEsUUFBUSxZQUFZO0FBQUEsVUFDcEcsV0FBaUIsS0FBSyxJQUFJLFVBQVVBLEtBQUksU0FBUSxDQUFFLEtBQUssSUFBSTtBQUNuRCxtQkFBTyxhQUFhQSxNQUFLLGFBQWEsUUFBUUEsTUFBSyxRQUFRLENBQUMsSUFBSSxRQUFRLFFBQVEsWUFBWTtBQUM1RixpQkFBSztBQUFBLFVBQ2I7QUFBQSxRQUNBO0FBQ0ksZUFBTyxFQUFDLE1BQVksSUFBSSxLQUFLLElBQUksSUFBSSxPQUFPLENBQUMsRUFBQztBQUFBLE1BQ2xEO0FBTUUsZUFBUyxrQkFBa0IsSUFBSSxNQUFNO0FBQ25DLFlBQUksZUFBZSxJQUFJLHNCQUFzQixHQUFHO0FBQUU7QUFBQSxRQUFNO0FBRXhELFlBQUksVUFBVSxHQUFHLFNBQVMsTUFBTSxRQUFRLE1BQU0seUJBQXlCLFdBQVc7QUFDbEYsWUFBSUEsT0FBTSxRQUFRLFFBQVE7QUFDMUIsWUFBSSxLQUFLLE1BQU0sSUFBSSxNQUFNLEdBQUc7QUFBRSxxQkFBVztBQUFBLFFBQUssV0FDckMsS0FBSyxTQUFTLElBQUksT0FBT0EsS0FBSSxZQUFZLGVBQWVBLEtBQUksZ0JBQWdCLGVBQWU7QUFBRSxxQkFBVztBQUFBLFFBQU07QUFDdkgsWUFBSSxZQUFZLFFBQVEsQ0FBQyxTQUFTO0FBQ2hDLGNBQUksYUFBYSxJQUFJLE9BQU8sS0FBVSxNQUFPLHlEQUF5RCxLQUFLLE1BQU0sUUFBUSxhQUFhLFdBQVcsR0FBRyxPQUFPLEtBQUssNENBQTRDLEtBQUssU0FBUyxLQUFLLE1BQU0sVUFBVSxFQUFFLElBQUksUUFBUSxhQUFhLHlDQUEwQyxLQUFLLE9BQVEsZ0JBQWlCLEtBQUssSUFBSSxHQUFHLEtBQUssUUFBUSxLQUFLLElBQUksSUFBSyxLQUFLO0FBQzlYLGFBQUcsUUFBUSxVQUFVLFlBQVksVUFBVTtBQUMzQyxxQkFBVyxlQUFlLFFBQVE7QUFDbEMsYUFBRyxRQUFRLFVBQVUsWUFBWSxVQUFVO0FBQUEsUUFDakQ7QUFBQSxNQUNBO0FBS0UsZUFBUyxrQkFBa0IsSUFBSSxLQUFLLEtBQUssUUFBUTtBQUMvQyxZQUFJLFVBQVUsTUFBTTtBQUFFLG1CQUFTO0FBQUEsUUFBRTtBQUNqQyxZQUFJO0FBQ0osWUFBSSxDQUFDLEdBQUcsUUFBUSxnQkFBZ0IsT0FBTyxLQUFLO0FBSTFDLGdCQUFNLElBQUksVUFBVSxXQUFXLElBQUksSUFBSSxNQUFNLElBQUksS0FBSyxHQUFHLFFBQVEsSUFBSTtBQUNyRSxnQkFBTSxJQUFJLEtBQUssSUFBSSxJQUFJLE1BQU0sSUFBSSxVQUFVLFdBQVcsSUFBSSxLQUFLLElBQUksSUFBSSxJQUFJLE9BQU8sSUFBSTtBQUFBLFFBQzVGO0FBQ0ksaUJBQVMsUUFBUSxHQUFHLFFBQVEsR0FBRyxTQUFTO0FBQ3RDLGNBQUksVUFBVTtBQUNkLGNBQUksU0FBUyxhQUFhLElBQUksR0FBRztBQUNqQyxjQUFJLFlBQVksQ0FBQyxPQUFPLE9BQU8sTUFBTSxTQUFTLGFBQWEsSUFBSSxHQUFHO0FBQ2xFLGlCQUFPO0FBQUEsWUFBQyxNQUFNLEtBQUssSUFBSSxPQUFPLE1BQU0sVUFBVSxJQUFJO0FBQUEsWUFDMUMsS0FBSyxLQUFLLElBQUksT0FBTyxLQUFLLFVBQVUsR0FBRyxJQUFJO0FBQUEsWUFDM0MsT0FBTyxLQUFLLElBQUksT0FBTyxNQUFNLFVBQVUsSUFBSTtBQUFBLFlBQzNDLFFBQVEsS0FBSyxJQUFJLE9BQU8sUUFBUSxVQUFVLE1BQU0sSUFBSTtBQUFBLFVBQU07QUFDbEUsY0FBSSxZQUFZLG1CQUFtQixJQUFJLElBQUk7QUFDM0MsY0FBSSxXQUFXLEdBQUcsSUFBSSxXQUFXLFlBQVksR0FBRyxJQUFJO0FBQ3BELGNBQUksVUFBVSxhQUFhLE1BQU07QUFDL0IsNEJBQWdCLElBQUksVUFBVSxTQUFTO0FBQ3ZDLGdCQUFJLEtBQUssSUFBSSxHQUFHLElBQUksWUFBWSxRQUFRLElBQUksR0FBRztBQUFFLHdCQUFVO0FBQUEsWUFBSztBQUFBLFVBQ3hFO0FBQ00sY0FBSSxVQUFVLGNBQWMsTUFBTTtBQUNoQywwQkFBYyxJQUFJLFVBQVUsVUFBVTtBQUN0QyxnQkFBSSxLQUFLLElBQUksR0FBRyxJQUFJLGFBQWEsU0FBUyxJQUFJLEdBQUc7QUFBRSx3QkFBVTtBQUFBLFlBQUs7QUFBQSxVQUMxRTtBQUNNLGNBQUksQ0FBQyxTQUFTO0FBQUU7QUFBQSxVQUFLO0FBQUEsUUFDM0I7QUFDSSxlQUFPO0FBQUEsTUFDWDtBQUdFLGVBQVMsZUFBZSxJQUFJLE1BQU07QUFDaEMsWUFBSSxZQUFZLG1CQUFtQixJQUFJLElBQUk7QUFDM0MsWUFBSSxVQUFVLGFBQWEsTUFBTTtBQUFFLDBCQUFnQixJQUFJLFVBQVUsU0FBUztBQUFBLFFBQUU7QUFDNUUsWUFBSSxVQUFVLGNBQWMsTUFBTTtBQUFFLHdCQUFjLElBQUksVUFBVSxVQUFVO0FBQUEsUUFBRTtBQUFBLE1BQ2hGO0FBTUUsZUFBUyxtQkFBbUIsSUFBSSxNQUFNO0FBQ3BDLFlBQUksVUFBVSxHQUFHLFNBQVMsYUFBYSxXQUFXLEdBQUcsT0FBTztBQUM1RCxZQUFJLEtBQUssTUFBTSxHQUFHO0FBQUUsZUFBSyxNQUFNO0FBQUEsUUFBRTtBQUNqQyxZQUFJLFlBQVksR0FBRyxTQUFTLEdBQUcsTUFBTSxhQUFhLE9BQU8sR0FBRyxNQUFNLFlBQVksUUFBUSxTQUFTO0FBQy9GLFlBQUlnQixVQUFTLGNBQWMsRUFBRSxHQUFHLFNBQVMsQ0FBQTtBQUN6QyxZQUFJLEtBQUssU0FBUyxLQUFLLE1BQU1BLFNBQVE7QUFBRSxlQUFLLFNBQVMsS0FBSyxNQUFNQTtBQUFBLFFBQU87QUFDdkUsWUFBSSxZQUFZLEdBQUcsSUFBSSxTQUFTLFlBQVksT0FBTztBQUNuRCxZQUFJLFFBQVEsS0FBSyxNQUFNLFlBQVksV0FBVyxLQUFLLFNBQVMsWUFBWTtBQUN4RSxZQUFJLEtBQUssTUFBTSxXQUFXO0FBQ3hCLGlCQUFPLFlBQVksUUFBUSxJQUFJLEtBQUs7QUFBQSxRQUMxQyxXQUFlLEtBQUssU0FBUyxZQUFZQSxTQUFRO0FBQzNDLGNBQUksU0FBUyxLQUFLLElBQUksS0FBSyxNQUFNLFdBQVcsWUFBWSxLQUFLLFVBQVVBLE9BQU07QUFDN0UsY0FBSSxVQUFVLFdBQVc7QUFBRSxtQkFBTyxZQUFZO0FBQUEsVUFBTztBQUFBLFFBQzNEO0FBRUksWUFBSSxjQUFjLEdBQUcsUUFBUSxjQUFjLElBQUksUUFBUSxRQUFRO0FBQy9ELFlBQUksYUFBYSxHQUFHLFNBQVMsR0FBRyxNQUFNLGNBQWMsT0FBTyxHQUFHLE1BQU0sYUFBYSxRQUFRLFNBQVMsYUFBYTtBQUMvRyxZQUFJLFVBQVUsYUFBYSxFQUFFLElBQUksUUFBUSxRQUFRO0FBQ2pELFlBQUksVUFBVSxLQUFLLFFBQVEsS0FBSyxPQUFPO0FBQ3ZDLFlBQUksU0FBUztBQUFFLGVBQUssUUFBUSxLQUFLLE9BQU87QUFBQSxRQUFRO0FBQ2hELFlBQUksS0FBSyxPQUFPLElBQ2Q7QUFBRSxpQkFBTyxhQUFhO0FBQUEsUUFBRSxXQUNqQixLQUFLLE9BQU8sWUFDbkI7QUFBRSxpQkFBTyxhQUFhLEtBQUssSUFBSSxHQUFHLEtBQUssT0FBTyxlQUFlLFVBQVUsSUFBSSxHQUFHO0FBQUEsUUFBRSxXQUN6RSxLQUFLLFFBQVEsVUFBVSxhQUFhLEdBQzNDO0FBQUUsaUJBQU8sYUFBYSxLQUFLLFNBQVMsVUFBVSxJQUFJLE1BQU07QUFBQSxRQUFRO0FBQ2xFLGVBQU87QUFBQSxNQUNYO0FBSUUsZUFBUyxlQUFlLElBQUksS0FBSztBQUMvQixZQUFJLE9BQU8sTUFBTTtBQUFFO0FBQUEsUUFBTTtBQUN6QiwyQkFBbUIsRUFBRTtBQUNyQixXQUFHLE1BQU0sYUFBYSxHQUFHLE1BQU0sYUFBYSxPQUFPLEdBQUcsSUFBSSxZQUFZLEdBQUcsTUFBTSxhQUFhO0FBQUEsTUFDaEc7QUFJRSxlQUFTLG9CQUFvQixJQUFJO0FBQy9CLDJCQUFtQixFQUFFO0FBQ3JCLFlBQUksTUFBTSxHQUFHLFVBQVM7QUFDdEIsV0FBRyxNQUFNLGNBQWMsRUFBQyxNQUFNLEtBQUssSUFBSSxLQUFLLFFBQVEsR0FBRyxRQUFRLG1CQUFrQjtBQUFBLE1BQ3JGO0FBRUUsZUFBUyxlQUFlLElBQUksR0FBRyxHQUFHO0FBQ2hDLFlBQUksS0FBSyxRQUFRLEtBQUssTUFBTTtBQUFFLDZCQUFtQixFQUFFO0FBQUEsUUFBRTtBQUNyRCxZQUFJLEtBQUssTUFBTTtBQUFFLGFBQUcsTUFBTSxhQUFhO0FBQUEsUUFBRTtBQUN6QyxZQUFJLEtBQUssTUFBTTtBQUFFLGFBQUcsTUFBTSxZQUFZO0FBQUEsUUFBRTtBQUFBLE1BQzVDO0FBRUUsZUFBUyxjQUFjLElBQUlWLFFBQU87QUFDaEMsMkJBQW1CLEVBQUU7QUFDckIsV0FBRyxNQUFNLGNBQWNBO0FBQUEsTUFDM0I7QUFNRSxlQUFTLG1CQUFtQixJQUFJO0FBQzlCLFlBQUlBLFNBQVEsR0FBRyxNQUFNO0FBQ3JCLFlBQUlBLFFBQU87QUFDVCxhQUFHLE1BQU0sY0FBYztBQUN2QixjQUFJLE9BQU8sZUFBZSxJQUFJQSxPQUFNLElBQUksR0FBRyxLQUFLLGVBQWUsSUFBSUEsT0FBTSxFQUFFO0FBQzNFLDhCQUFvQixJQUFJLE1BQU0sSUFBSUEsT0FBTSxNQUFNO0FBQUEsUUFDcEQ7QUFBQSxNQUNBO0FBRUUsZUFBUyxvQkFBb0IsSUFBSSxNQUFNLElBQUksUUFBUTtBQUNqRCxZQUFJLE9BQU8sbUJBQW1CLElBQUk7QUFBQSxVQUNoQyxNQUFNLEtBQUssSUFBSSxLQUFLLE1BQU0sR0FBRyxJQUFJO0FBQUEsVUFDakMsS0FBSyxLQUFLLElBQUksS0FBSyxLQUFLLEdBQUcsR0FBRyxJQUFJO0FBQUEsVUFDbEMsT0FBTyxLQUFLLElBQUksS0FBSyxPQUFPLEdBQUcsS0FBSztBQUFBLFVBQ3BDLFFBQVEsS0FBSyxJQUFJLEtBQUssUUFBUSxHQUFHLE1BQU0sSUFBSTtBQUFBLFFBQ2pELENBQUs7QUFDRCx1QkFBZSxJQUFJLEtBQUssWUFBWSxLQUFLLFNBQVM7QUFBQSxNQUN0RDtBQUlFLGVBQVMsZ0JBQWdCLElBQUksS0FBSztBQUNoQyxZQUFJLEtBQUssSUFBSSxHQUFHLElBQUksWUFBWSxHQUFHLElBQUksR0FBRztBQUFFO0FBQUEsUUFBTTtBQUNsRCxZQUFJLENBQUMsT0FBTztBQUFFLDhCQUFvQixJQUFJLEVBQUMsS0FBSyxJQUFHLENBQUM7QUFBQSxRQUFFO0FBQ2xELHFCQUFhLElBQUksS0FBSyxJQUFJO0FBQzFCLFlBQUksT0FBTztBQUFFLDhCQUFvQixFQUFFO0FBQUEsUUFBRTtBQUNyQyxvQkFBWSxJQUFJLEdBQUc7QUFBQSxNQUN2QjtBQUVFLGVBQVMsYUFBYSxJQUFJLEtBQUssYUFBYTtBQUMxQyxjQUFNLEtBQUssSUFBSSxHQUFHLEtBQUssSUFBSSxHQUFHLFFBQVEsU0FBUyxlQUFlLEdBQUcsUUFBUSxTQUFTLGNBQWMsR0FBRyxDQUFDO0FBQ3BHLFlBQUksR0FBRyxRQUFRLFNBQVMsYUFBYSxPQUFPLENBQUMsYUFBYTtBQUFFO0FBQUEsUUFBTTtBQUNsRSxXQUFHLElBQUksWUFBWTtBQUNuQixXQUFHLFFBQVEsV0FBVyxhQUFhLEdBQUc7QUFDdEMsWUFBSSxHQUFHLFFBQVEsU0FBUyxhQUFhLEtBQUs7QUFBRSxhQUFHLFFBQVEsU0FBUyxZQUFZO0FBQUEsUUFBSTtBQUFBLE1BQ3BGO0FBSUUsZUFBUyxjQUFjLElBQUksS0FBSyxZQUFZLGFBQWE7QUFDdkQsY0FBTSxLQUFLLElBQUksR0FBRyxLQUFLLElBQUksS0FBSyxHQUFHLFFBQVEsU0FBUyxjQUFjLEdBQUcsUUFBUSxTQUFTLFdBQVcsQ0FBQztBQUNsRyxhQUFLLGFBQWEsT0FBTyxHQUFHLElBQUksYUFBYSxLQUFLLElBQUksR0FBRyxJQUFJLGFBQWEsR0FBRyxJQUFJLE1BQU0sQ0FBQyxhQUFhO0FBQUU7QUFBQSxRQUFNO0FBQzdHLFdBQUcsSUFBSSxhQUFhO0FBQ3BCLDBCQUFrQixFQUFFO0FBQ3BCLFlBQUksR0FBRyxRQUFRLFNBQVMsY0FBYyxLQUFLO0FBQUUsYUFBRyxRQUFRLFNBQVMsYUFBYTtBQUFBLFFBQUk7QUFDbEYsV0FBRyxRQUFRLFdBQVcsY0FBYyxHQUFHO0FBQUEsTUFDM0M7QUFNRSxlQUFTLHFCQUFxQixJQUFJO0FBQ2hDLFlBQUksSUFBSSxHQUFHLFNBQVMsVUFBVSxFQUFFLFFBQVE7QUFDeEMsWUFBSSxPQUFPLEtBQUssTUFBTSxHQUFHLElBQUksU0FBUyxZQUFZLEdBQUcsT0FBTyxDQUFDO0FBQzdELGVBQU87QUFBQSxVQUNMLGNBQWMsRUFBRSxTQUFTO0FBQUEsVUFDekIsWUFBWSxFQUFFLFFBQVE7QUFBQSxVQUN0QixhQUFhLEVBQUUsU0FBUztBQUFBLFVBQWEsYUFBYSxFQUFFLFNBQVM7QUFBQSxVQUM3RCxXQUFXLEVBQUUsUUFBUTtBQUFBLFVBQ3JCLFNBQVMsR0FBRyxRQUFRLGNBQWMsVUFBVTtBQUFBLFVBQzVDLFdBQVc7QUFBQSxVQUNYLGNBQWMsT0FBTyxVQUFVLEVBQUUsSUFBSSxFQUFFO0FBQUEsVUFDdkMsZ0JBQWdCLEVBQUU7QUFBQSxVQUNsQixhQUFhO0FBQUEsUUFDbkI7QUFBQSxNQUNBO0FBRUUsVUFBSSxtQkFBbUIsU0FBUyxPQUFPLFFBQVEsSUFBSTtBQUNqRCxhQUFLLEtBQUs7QUFDVixZQUFJLE9BQU8sS0FBSyxPQUFPLElBQUksT0FBTyxDQUFDLElBQUksT0FBTyxNQUFNLE1BQU0sZ0JBQWdCLENBQUMsR0FBRyx1QkFBdUI7QUFDckcsWUFBSSxRQUFRLEtBQUssUUFBUSxJQUFJLE9BQU8sQ0FBQyxJQUFJLE9BQU8sTUFBTSxNQUFNLCtCQUErQixDQUFDLEdBQUcsdUJBQXVCO0FBQ3RILGFBQUssV0FBVyxNQUFNLFdBQVc7QUFDakMsY0FBTSxJQUFJO0FBQUcsY0FBTSxLQUFLO0FBRXhCLFdBQUcsTUFBTSxVQUFVLFdBQVk7QUFDN0IsY0FBSSxLQUFLLGNBQWM7QUFBRSxtQkFBTyxLQUFLLFdBQVcsVUFBVTtBQUFBLFVBQUU7QUFBQSxRQUNsRSxDQUFLO0FBQ0QsV0FBRyxPQUFPLFVBQVUsV0FBWTtBQUM5QixjQUFJLE1BQU0sYUFBYTtBQUFFLG1CQUFPLE1BQU0sWUFBWSxZQUFZO0FBQUEsVUFBRTtBQUFBLFFBQ3RFLENBQUs7QUFFRCxhQUFLLG1CQUFtQjtBQUV4QixZQUFJLE1BQU0sYUFBYSxHQUFHO0FBQUUsZUFBSyxNQUFNLE1BQU0sWUFBWSxLQUFLLEtBQUssTUFBTSxXQUFXO0FBQUEsUUFBTztBQUFBLE1BQy9GO0FBRUUsdUJBQWlCLFVBQVUsU0FBUyxTQUFVLFNBQVM7QUFDckQsWUFBSSxTQUFTLFFBQVEsY0FBYyxRQUFRLGNBQWM7QUFDekQsWUFBSSxTQUFTLFFBQVEsZUFBZSxRQUFRLGVBQWU7QUFDM0QsWUFBSSxTQUFTLFFBQVE7QUFFckIsWUFBSSxRQUFRO0FBQ1YsZUFBSyxLQUFLLE1BQU0sVUFBVTtBQUMxQixlQUFLLEtBQUssTUFBTSxTQUFTLFNBQVMsU0FBUyxPQUFPO0FBQ2xELGNBQUksY0FBYyxRQUFRLGNBQWMsU0FBUyxTQUFTO0FBRTFELGVBQUssS0FBSyxXQUFXLE1BQU0sU0FDekIsS0FBSyxJQUFJLEdBQUcsUUFBUSxlQUFlLFFBQVEsZUFBZSxXQUFXLElBQUk7QUFBQSxRQUNqRixPQUFXO0FBQ0wsZUFBSyxLQUFLLFlBQVk7QUFDdEIsZUFBSyxLQUFLLE1BQU0sVUFBVTtBQUMxQixlQUFLLEtBQUssV0FBVyxNQUFNLFNBQVM7QUFBQSxRQUMxQztBQUVJLFlBQUksUUFBUTtBQUNWLGVBQUssTUFBTSxNQUFNLFVBQVU7QUFDM0IsZUFBSyxNQUFNLE1BQU0sUUFBUSxTQUFTLFNBQVMsT0FBTztBQUNsRCxlQUFLLE1BQU0sTUFBTSxPQUFPLFFBQVEsVUFBVTtBQUMxQyxjQUFJLGFBQWEsUUFBUSxZQUFZLFFBQVEsV0FBVyxTQUFTLFNBQVM7QUFDMUUsZUFBSyxNQUFNLFdBQVcsTUFBTSxRQUMxQixLQUFLLElBQUksR0FBRyxRQUFRLGNBQWMsUUFBUSxjQUFjLFVBQVUsSUFBSTtBQUFBLFFBQzlFLE9BQVc7QUFDTCxlQUFLLE1BQU0sTUFBTSxVQUFVO0FBQzNCLGVBQUssTUFBTSxXQUFXLE1BQU0sUUFBUTtBQUFBLFFBQzFDO0FBRUksWUFBSSxDQUFDLEtBQUssb0JBQW9CLFFBQVEsZUFBZSxHQUFHO0FBQ3RELGNBQUksVUFBVSxHQUFHO0FBQUUsaUJBQUssY0FBYTtBQUFBLFVBQUc7QUFDeEMsZUFBSyxtQkFBbUI7QUFBQSxRQUM5QjtBQUVJLGVBQU8sRUFBQyxPQUFPLFNBQVMsU0FBUyxHQUFHLFFBQVEsU0FBUyxTQUFTLEVBQUM7QUFBQSxNQUNuRTtBQUVFLHVCQUFpQixVQUFVLGdCQUFnQixTQUFVLEtBQUs7QUFDeEQsWUFBSSxLQUFLLE1BQU0sY0FBYyxLQUFLO0FBQUUsZUFBSyxNQUFNLGFBQWE7QUFBQSxRQUFJO0FBQ2hFLFlBQUksS0FBSyxjQUFjO0FBQUUsZUFBSyxtQkFBbUIsS0FBSyxPQUFPLEtBQUssY0FBYyxPQUFPO0FBQUEsUUFBRTtBQUFBLE1BQzdGO0FBRUUsdUJBQWlCLFVBQVUsZUFBZSxTQUFVLEtBQUs7QUFDdkQsWUFBSSxLQUFLLEtBQUssYUFBYSxLQUFLO0FBQUUsZUFBSyxLQUFLLFlBQVk7QUFBQSxRQUFJO0FBQzVELFlBQUksS0FBSyxhQUFhO0FBQUUsZUFBSyxtQkFBbUIsS0FBSyxNQUFNLEtBQUssYUFBYSxNQUFNO0FBQUEsUUFBRTtBQUFBLE1BQ3pGO0FBRUUsdUJBQWlCLFVBQVUsZ0JBQWdCLFdBQVk7QUFDckQsWUFBSSxJQUFJLE9BQU8sQ0FBQyxxQkFBcUIsU0FBUztBQUM5QyxhQUFLLE1BQU0sTUFBTSxTQUFTLEtBQUssS0FBSyxNQUFNLFFBQVE7QUFDbEQsYUFBSyxNQUFNLE1BQU0sYUFBYSxLQUFLLEtBQUssTUFBTSxhQUFhO0FBQzNELGFBQUssZUFBZSxJQUFJO0FBQ3hCLGFBQUssY0FBYyxJQUFJO0FBQUEsTUFDM0I7QUFFRSx1QkFBaUIsVUFBVSxxQkFBcUIsU0FBVSxLQUFLLE9BQU8sTUFBTTtBQUMxRSxZQUFJLE1BQU0sYUFBYTtBQUN2QixpQkFBUyxlQUFlO0FBT3RCLGNBQUksTUFBTSxJQUFJLHNCQUFxQjtBQUNuQyxjQUFJSixPQUFNLFFBQVEsU0FBUyxTQUFTLGlCQUFpQixJQUFJLFFBQVEsSUFBSSxJQUFJLE1BQU0sSUFBSSxVQUFVLENBQUMsSUFDeEYsU0FBUyxrQkFBa0IsSUFBSSxRQUFRLElBQUksUUFBUSxHQUFHLElBQUksU0FBUyxDQUFDO0FBQzFFLGNBQUlBLFFBQU8sS0FBSztBQUFFLGdCQUFJLE1BQU0sYUFBYTtBQUFBLFVBQVMsT0FDN0M7QUFBRSxrQkFBTSxJQUFJLEtBQU0sWUFBWTtBQUFBLFVBQUU7QUFBQSxRQUMzQztBQUNJLGNBQU0sSUFBSSxLQUFNLFlBQVk7QUFBQSxNQUNoQztBQUVFLHVCQUFpQixVQUFVLFFBQVEsV0FBWTtBQUM3QyxZQUFJLFNBQVMsS0FBSyxNQUFNO0FBQ3hCLGVBQU8sWUFBWSxLQUFLLEtBQUs7QUFDN0IsZUFBTyxZQUFZLEtBQUssSUFBSTtBQUFBLE1BQ2hDO0FBRUUsVUFBSSxpQkFBaUIsV0FBWTtBQUFBLE1BQUE7QUFFakMscUJBQWUsVUFBVSxTQUFTLFdBQVk7QUFBRSxlQUFPLEVBQUMsUUFBUSxHQUFHLE9BQU8sRUFBQztBQUFBLE1BQUM7QUFDNUUscUJBQWUsVUFBVSxnQkFBZ0IsV0FBWTtBQUFBLE1BQUE7QUFDckQscUJBQWUsVUFBVSxlQUFlLFdBQVk7QUFBQSxNQUFBO0FBQ3BELHFCQUFlLFVBQVUsUUFBUSxXQUFZO0FBQUEsTUFBQTtBQUU3QyxlQUFTLGlCQUFpQixJQUFJLFNBQVM7QUFDckMsWUFBSSxDQUFDLFNBQVM7QUFBRSxvQkFBVSxxQkFBcUIsRUFBRTtBQUFBLFFBQUU7QUFDbkQsWUFBSSxhQUFhLEdBQUcsUUFBUSxVQUFVLGNBQWMsR0FBRyxRQUFRO0FBQy9ELDhCQUFzQixJQUFJLE9BQU87QUFDakMsaUJBQVNKLEtBQUksR0FBR0EsS0FBSSxLQUFLLGNBQWMsR0FBRyxRQUFRLFlBQVksZUFBZSxHQUFHLFFBQVEsV0FBV0EsTUFBSztBQUN0RyxjQUFJLGNBQWMsR0FBRyxRQUFRLFlBQVksR0FBRyxRQUFRLGNBQ2xEO0FBQUUsb0NBQXdCLEVBQUU7QUFBQSxVQUFFO0FBQ2hDLGdDQUFzQixJQUFJLHFCQUFxQixFQUFFLENBQUM7QUFDbEQsdUJBQWEsR0FBRyxRQUFRO0FBQVUsd0JBQWMsR0FBRyxRQUFRO0FBQUEsUUFDakU7QUFBQSxNQUNBO0FBSUUsZUFBUyxzQkFBc0IsSUFBSSxTQUFTO0FBQzFDLFlBQUksSUFBSSxHQUFHO0FBQ1gsWUFBSSxRQUFRLEVBQUUsV0FBVyxPQUFPLE9BQU87QUFFdkMsVUFBRSxNQUFNLE1BQU0sZ0JBQWdCLEVBQUUsV0FBVyxNQUFNLFNBQVM7QUFDMUQsVUFBRSxNQUFNLE1BQU0saUJBQWlCLEVBQUUsWUFBWSxNQUFNLFVBQVU7QUFDN0QsVUFBRSxhQUFhLE1BQU0sZUFBZSxNQUFNLFNBQVM7QUFFbkQsWUFBSSxNQUFNLFNBQVMsTUFBTSxRQUFRO0FBQy9CLFlBQUUsZ0JBQWdCLE1BQU0sVUFBVTtBQUNsQyxZQUFFLGdCQUFnQixNQUFNLFNBQVMsTUFBTSxTQUFTO0FBQ2hELFlBQUUsZ0JBQWdCLE1BQU0sUUFBUSxNQUFNLFFBQVE7QUFBQSxRQUNwRCxPQUFXO0FBQUUsWUFBRSxnQkFBZ0IsTUFBTSxVQUFVO0FBQUEsUUFBRztBQUM5QyxZQUFJLE1BQU0sVUFBVSxHQUFHLFFBQVEsOEJBQThCLEdBQUcsUUFBUSxhQUFhO0FBQ25GLFlBQUUsYUFBYSxNQUFNLFVBQVU7QUFDL0IsWUFBRSxhQUFhLE1BQU0sU0FBUyxNQUFNLFNBQVM7QUFDN0MsWUFBRSxhQUFhLE1BQU0sUUFBUSxRQUFRLGNBQWM7QUFBQSxRQUN6RCxPQUFXO0FBQUUsWUFBRSxhQUFhLE1BQU0sVUFBVTtBQUFBLFFBQUc7QUFBQSxNQUMvQztBQUVFLFVBQUksaUJBQWlCLEVBQUMsVUFBVSxrQkFBa0IsUUFBUSxlQUFjO0FBRXhFLGVBQVMsZUFBZSxJQUFJO0FBQzFCLFlBQUksR0FBRyxRQUFRLFlBQVk7QUFDekIsYUFBRyxRQUFRLFdBQVcsTUFBSztBQUMzQixjQUFJLEdBQUcsUUFBUSxXQUFXLFVBQ3hCO0FBQUUsb0JBQVEsR0FBRyxRQUFRLFNBQVMsR0FBRyxRQUFRLFdBQVcsUUFBUTtBQUFBLFVBQUU7QUFBQSxRQUN0RTtBQUVJLFdBQUcsUUFBUSxhQUFhLElBQUksZUFBZSxHQUFHLFFBQVEsY0FBYyxFQUFFLFNBQVUsTUFBTTtBQUNwRixhQUFHLFFBQVEsUUFBUSxhQUFhLE1BQU0sR0FBRyxRQUFRLGVBQWU7QUFFaEUsYUFBRyxNQUFNLGFBQWEsV0FBWTtBQUNoQyxnQkFBSSxHQUFHLE1BQU0sU0FBUztBQUFFLHlCQUFXLFdBQVk7QUFBRSx1QkFBTyxHQUFHLFFBQVEsTUFBTSxNQUFLO0FBQUEsY0FBRyxHQUFJLENBQUM7QUFBQSxZQUFFO0FBQUEsVUFDaEcsQ0FBTztBQUNELGVBQUssYUFBYSxrQkFBa0IsTUFBTTtBQUFBLFFBQ2hELEdBQU8sU0FBVSxLQUFLLE1BQU07QUFDdEIsY0FBSSxRQUFRLGNBQWM7QUFBRSwwQkFBYyxJQUFJLEdBQUc7QUFBQSxVQUFFLE9BQzlDO0FBQUUsNEJBQWdCLElBQUksR0FBRztBQUFBLFVBQUU7QUFBQSxRQUN0QyxHQUFPLEVBQUU7QUFDTCxZQUFJLEdBQUcsUUFBUSxXQUFXLFVBQ3hCO0FBQUUsbUJBQVMsR0FBRyxRQUFRLFNBQVMsR0FBRyxRQUFRLFdBQVcsUUFBUTtBQUFBLFFBQUU7QUFBQSxNQUNyRTtBQVFFLFVBQUksV0FBVztBQUVmLGVBQVMsZUFBZSxJQUFJO0FBQzFCLFdBQUcsUUFBUTtBQUFBLFVBQ1Q7QUFBQSxVQUNBLGFBQWE7QUFBQTtBQUFBLFVBQ2IsYUFBYSxHQUFHLElBQUk7QUFBQTtBQUFBLFVBQ3BCLGFBQWE7QUFBQTtBQUFBLFVBQ2IsYUFBYTtBQUFBO0FBQUEsVUFDYixRQUFRO0FBQUE7QUFBQSxVQUNSLFlBQVk7QUFBQTtBQUFBLFVBQ1osd0JBQXdCO0FBQUE7QUFBQSxVQUN4QixzQkFBc0I7QUFBQTtBQUFBLFVBQ3RCLGtCQUFrQjtBQUFBO0FBQUEsVUFDbEIsZUFBZTtBQUFBO0FBQUEsVUFDZixZQUFZO0FBQUEsVUFBTSxXQUFXO0FBQUE7QUFBQSxVQUM3QixhQUFhO0FBQUE7QUFBQSxVQUNiLE9BQU87QUFBQSxVQUNQLElBQUksRUFBRTtBQUFBO0FBQUEsVUFDTixZQUFZO0FBQUE7QUFBQTtBQUVkLHNCQUFjLEdBQUcsS0FBSztBQUFBLE1BQzFCO0FBR0UsZUFBUyxhQUFhLElBQUk7QUFDeEIsWUFBSSxLQUFLLEdBQUc7QUFDWixZQUFJLElBQUk7QUFBRSwwQkFBZ0IsSUFBSSxTQUFVLE9BQU87QUFDN0MscUJBQVNBLEtBQUksR0FBR0EsS0FBSSxNQUFNLElBQUksUUFBUUEsTUFDcEM7QUFBRSxvQkFBTSxJQUFJQSxFQUFDLEVBQUUsR0FBRyxRQUFRO0FBQUEsWUFBSztBQUNqQywwQkFBYyxLQUFLO0FBQUEsVUFDekIsQ0FBSztBQUFBLFFBQUU7QUFBQSxNQUNQO0FBSUUsZUFBUyxjQUFjLE9BQU87QUFDNUIsWUFBSSxNQUFNLE1BQU07QUFDaEIsaUJBQVNBLEtBQUksR0FBR0EsS0FBSSxJQUFJLFFBQVFBLE1BQzlCO0FBQUUsMEJBQWdCLElBQUlBLEVBQUMsQ0FBQztBQUFBLFFBQUU7QUFDNUIsaUJBQVNLLE9BQU0sR0FBR0EsT0FBTSxJQUFJLFFBQVFBLFFBQ2xDO0FBQUUsMEJBQWdCLElBQUlBLElBQUcsQ0FBQztBQUFBLFFBQUU7QUFDOUIsaUJBQVNDLE9BQU0sR0FBR0EsT0FBTSxJQUFJLFFBQVFBLFFBQ2xDO0FBQUUsMEJBQWdCLElBQUlBLElBQUcsQ0FBQztBQUFBLFFBQUU7QUFDOUIsaUJBQVMsTUFBTSxHQUFHLE1BQU0sSUFBSSxRQUFRLE9BQ2xDO0FBQUUsMEJBQWdCLElBQUksR0FBRyxDQUFDO0FBQUEsUUFBRTtBQUM5QixpQkFBUyxNQUFNLEdBQUcsTUFBTSxJQUFJLFFBQVEsT0FDbEM7QUFBRSw4QkFBb0IsSUFBSSxHQUFHLENBQUM7QUFBQSxRQUFFO0FBQUEsTUFDdEM7QUFFRSxlQUFTLGdCQUFnQixJQUFJO0FBQzNCLFlBQUksS0FBSyxHQUFHLElBQUksVUFBVSxHQUFHO0FBQzdCLDRCQUFvQixFQUFFO0FBQ3RCLFlBQUksR0FBRyxlQUFlO0FBQUUsc0JBQVksRUFBRTtBQUFBLFFBQUU7QUFFeEMsV0FBRyxhQUFhLEdBQUcsZUFBZSxHQUFHLGVBQWUsR0FBRyxhQUFhLFFBQ2xFLEdBQUcsZ0JBQWdCLEdBQUcsWUFBWSxLQUFLLE9BQU8sUUFBUSxZQUNuQyxHQUFHLFlBQVksR0FBRyxRQUFRLFFBQVEsV0FDckQsUUFBUSxrQkFBa0IsR0FBRyxRQUFRO0FBQ3ZDLFdBQUcsU0FBUyxHQUFHLGNBQ2IsSUFBSSxjQUFjLElBQUksR0FBRyxjQUFjLEVBQUMsS0FBSyxHQUFHLFdBQVcsUUFBUSxHQUFHLFlBQVcsR0FBRyxHQUFHLFdBQVc7QUFBQSxNQUN4RztBQUVFLGVBQVMsZ0JBQWdCLElBQUk7QUFDM0IsV0FBRyxpQkFBaUIsR0FBRyxjQUFjLHNCQUFzQixHQUFHLElBQUksR0FBRyxNQUFNO0FBQUEsTUFDL0U7QUFFRSxlQUFTLGdCQUFnQixJQUFJO0FBQzNCLFlBQUksS0FBSyxHQUFHLElBQUksVUFBVSxHQUFHO0FBQzdCLFlBQUksR0FBRyxnQkFBZ0I7QUFBRSxrQ0FBd0IsRUFBRTtBQUFBLFFBQUU7QUFFckQsV0FBRyxhQUFhLHFCQUFxQixFQUFFO0FBS3ZDLFlBQUksUUFBUSxrQkFBa0IsQ0FBQyxHQUFHLFFBQVEsY0FBYztBQUN0RCxhQUFHLGdCQUFnQixZQUFZLElBQUksUUFBUSxTQUFTLFFBQVEsUUFBUSxLQUFLLE1BQU0sRUFBRSxPQUFPO0FBQ3hGLGFBQUcsUUFBUSxhQUFhLEdBQUc7QUFDM0IsYUFBRyxXQUFXLGNBQ1osS0FBSyxJQUFJLFFBQVEsU0FBUyxhQUFhLFFBQVEsTUFBTSxhQUFhLEdBQUcsZ0JBQWdCLFVBQVUsRUFBRSxJQUFJLEdBQUcsUUFBUSxRQUFRO0FBQzFILGFBQUcsZ0JBQWdCLEtBQUssSUFBSSxHQUFHLFFBQVEsTUFBTSxhQUFhLEdBQUcsZ0JBQWdCLGFBQWEsRUFBRSxDQUFDO0FBQUEsUUFDbkc7QUFFSSxZQUFJLEdBQUcsa0JBQWtCLEdBQUcsa0JBQzFCO0FBQUUsYUFBRyxvQkFBb0IsUUFBUSxNQUFNLGlCQUFnQjtBQUFBLFFBQUc7QUFBQSxNQUNoRTtBQUVFLGVBQVMsZ0JBQWdCLElBQUk7QUFDM0IsWUFBSSxLQUFLLEdBQUc7QUFFWixZQUFJLEdBQUcsaUJBQWlCLE1BQU07QUFDNUIsYUFBRyxRQUFRLE1BQU0sTUFBTSxXQUFXLEdBQUcsZ0JBQWdCO0FBQ3JELGNBQUksR0FBRyxnQkFBZ0IsR0FBRyxJQUFJLFlBQzVCO0FBQUUsMEJBQWMsSUFBSSxLQUFLLElBQUksR0FBRyxRQUFRLFNBQVMsWUFBWSxHQUFHLGFBQWEsR0FBRyxJQUFJO0FBQUEsVUFBRTtBQUN4RixhQUFHLFFBQVEsaUJBQWlCO0FBQUEsUUFDbEM7QUFFSSxZQUFJLFlBQVksR0FBRyxTQUFTLEdBQUcsU0FBUyxVQUFVLEtBQUssRUFBRSxDQUFDO0FBQzFELFlBQUksR0FBRyxtQkFDTDtBQUFFLGFBQUcsUUFBUSxNQUFNLGNBQWMsR0FBRyxtQkFBbUIsU0FBUztBQUFBLFFBQUU7QUFDcEUsWUFBSSxHQUFHLGtCQUFrQixHQUFHLGVBQWUsR0FBRyxJQUFJLFFBQ2hEO0FBQUUsMkJBQWlCLElBQUksR0FBRyxVQUFVO0FBQUEsUUFBRTtBQUN4QyxZQUFJLEdBQUcsZ0JBQ0w7QUFBRSw0QkFBa0IsSUFBSSxHQUFHLFVBQVU7QUFBQSxRQUFFO0FBRXpDLFlBQUksR0FBRyxrQkFBa0I7QUFBRSx1QkFBYSxFQUFFO0FBQUEsUUFBRTtBQUU1QyxZQUFJLEdBQUcsTUFBTSxXQUFXLEdBQUcsYUFDekI7QUFBRSxhQUFHLFFBQVEsTUFBTSxNQUFNLEdBQUcsTUFBTTtBQUFBLFFBQUU7QUFDdEMsWUFBSSxXQUFXO0FBQUUsc0JBQVksR0FBRyxFQUFFO0FBQUEsUUFBRTtBQUFBLE1BQ3hDO0FBRUUsZUFBUyxvQkFBb0IsSUFBSTtBQUMvQixZQUFJLEtBQUssR0FBRyxJQUFJLFVBQVUsR0FBRyxTQUFTSixPQUFNLEdBQUc7QUFFL0MsWUFBSSxHQUFHLGdCQUFnQjtBQUFFLDRCQUFrQixJQUFJLEdBQUcsTUFBTTtBQUFBLFFBQUU7QUFHMUQsWUFBSSxRQUFRLGVBQWUsU0FBUyxHQUFHLGFBQWEsUUFBUSxHQUFHLGNBQWMsUUFBUSxHQUFHLGNBQ3RGO0FBQUUsa0JBQVEsY0FBYyxRQUFRLGNBQWM7QUFBQSxRQUFLO0FBR3JELFlBQUksR0FBRyxhQUFhLE1BQU07QUFBRSx1QkFBYSxJQUFJLEdBQUcsV0FBVyxHQUFHLFdBQVc7QUFBQSxRQUFFO0FBRTNFLFlBQUksR0FBRyxjQUFjLE1BQU07QUFBRSx3QkFBYyxJQUFJLEdBQUcsWUFBWSxNQUFNLElBQUk7QUFBQSxRQUFFO0FBRTFFLFlBQUksR0FBRyxhQUFhO0FBQ2xCLGNBQUksT0FBTztBQUFBLFlBQWtCO0FBQUEsWUFBSSxRQUFRQSxNQUFLLEdBQUcsWUFBWSxJQUFJO0FBQUEsWUFDcEMsUUFBUUEsTUFBSyxHQUFHLFlBQVksRUFBRTtBQUFBLFlBQUcsR0FBRyxZQUFZO0FBQUEsVUFBTTtBQUNuRiw0QkFBa0IsSUFBSSxJQUFJO0FBQUEsUUFDaEM7QUFJSSxZQUFJLFNBQVMsR0FBRyxvQkFBb0IsV0FBVyxHQUFHO0FBQ2xELFlBQUksUUFBUTtBQUFFLG1CQUFTRixLQUFJLEdBQUdBLEtBQUksT0FBTyxRQUFRLEVBQUVBLElBQ2pEO0FBQUUsZ0JBQUksQ0FBQyxPQUFPQSxFQUFDLEVBQUUsTUFBTSxRQUFRO0FBQUUscUJBQU8sT0FBT0EsRUFBQyxHQUFHLE1BQU07QUFBQSxZQUFFO0FBQUEsVUFBRTtBQUFBLFFBQUU7QUFDakUsWUFBSSxVQUFVO0FBQUUsbUJBQVNLLE9BQU0sR0FBR0EsT0FBTSxTQUFTLFFBQVEsRUFBRUEsTUFDekQ7QUFBRSxnQkFBSSxTQUFTQSxJQUFHLEVBQUUsTUFBTSxRQUFRO0FBQUUscUJBQU8sU0FBU0EsSUFBRyxHQUFHLFFBQVE7QUFBQSxZQUFFO0FBQUEsVUFBRTtBQUFBLFFBQUU7QUFFMUUsWUFBSSxRQUFRLFFBQVEsY0FDbEI7QUFBRSxVQUFBSCxLQUFJLFlBQVksR0FBRyxRQUFRLFNBQVM7QUFBQSxRQUFVO0FBR2xELFlBQUksR0FBRyxZQUNMO0FBQUUsaUJBQU8sSUFBSSxXQUFXLElBQUksR0FBRyxVQUFVO0FBQUEsUUFBRTtBQUM3QyxZQUFJLEdBQUcsUUFDTDtBQUFFLGFBQUcsT0FBTyxPQUFNO0FBQUEsUUFBRztBQUFBLE1BQzNCO0FBR0UsZUFBUyxRQUFRLElBQUksR0FBRztBQUN0QixZQUFJLEdBQUcsT0FBTztBQUFFLGlCQUFPLEVBQUM7QUFBQSxRQUFFO0FBQzFCLHVCQUFlLEVBQUU7QUFDakIsWUFBSTtBQUFFLGlCQUFPO1FBQUcsVUFDcEI7QUFBYyx1QkFBYSxFQUFFO0FBQUEsUUFBRTtBQUFBLE1BQy9CO0FBRUUsZUFBUyxVQUFVLElBQUksR0FBRztBQUN4QixlQUFPLFdBQVc7QUFDaEIsY0FBSSxHQUFHLE9BQU87QUFBRSxtQkFBTyxFQUFFLE1BQU0sSUFBSSxTQUFTO0FBQUEsVUFBQztBQUM3Qyx5QkFBZSxFQUFFO0FBQ2pCLGNBQUk7QUFBRSxtQkFBTyxFQUFFLE1BQU0sSUFBSSxTQUFTO0FBQUEsVUFBQyxVQUN6QztBQUFnQix5QkFBYSxFQUFFO0FBQUEsVUFBRTtBQUFBLFFBQ2pDO0FBQUEsTUFDQTtBQUdFLGVBQVMsU0FBUyxHQUFHO0FBQ25CLGVBQU8sV0FBVztBQUNoQixjQUFJLEtBQUssT0FBTztBQUFFLG1CQUFPLEVBQUUsTUFBTSxNQUFNLFNBQVM7QUFBQSxVQUFDO0FBQ2pELHlCQUFlLElBQUk7QUFDbkIsY0FBSTtBQUFFLG1CQUFPLEVBQUUsTUFBTSxNQUFNLFNBQVM7QUFBQSxVQUFDLFVBQzNDO0FBQWdCLHlCQUFhLElBQUk7QUFBQSxVQUFFO0FBQUEsUUFDbkM7QUFBQSxNQUNBO0FBQ0UsZUFBUyxZQUFZLEdBQUc7QUFDdEIsZUFBTyxXQUFXO0FBQ2hCLGNBQUksS0FBSyxLQUFLO0FBQ2QsY0FBSSxDQUFDLE1BQU0sR0FBRyxPQUFPO0FBQUUsbUJBQU8sRUFBRSxNQUFNLE1BQU0sU0FBUztBQUFBLFVBQUM7QUFDdEQseUJBQWUsRUFBRTtBQUNqQixjQUFJO0FBQUUsbUJBQU8sRUFBRSxNQUFNLE1BQU0sU0FBUztBQUFBLFVBQUMsVUFDM0M7QUFBZ0IseUJBQWEsRUFBRTtBQUFBLFVBQUU7QUFBQSxRQUNqQztBQUFBLE1BQ0E7QUFJRSxlQUFTLFlBQVksSUFBSSxNQUFNO0FBQzdCLFlBQUksR0FBRyxJQUFJLG9CQUFvQixHQUFHLFFBQVEsUUFDeEM7QUFBRSxhQUFHLE1BQU0sVUFBVSxJQUFJLE1BQU0sS0FBSyxpQkFBaUIsRUFBRSxDQUFDO0FBQUEsUUFBRTtBQUFBLE1BQ2hFO0FBRUUsZUFBUyxnQkFBZ0IsSUFBSTtBQUMzQixZQUFJQSxPQUFNLEdBQUc7QUFDYixZQUFJQSxLQUFJLHFCQUFxQixHQUFHLFFBQVEsUUFBUTtBQUFFO0FBQUEsUUFBTTtBQUN4RCxZQUFJLE1BQU0sQ0FBQyxvQkFBSSxTQUFPLEdBQUcsUUFBUTtBQUNqQyxZQUFJLFVBQVUsaUJBQWlCLElBQUlBLEtBQUksaUJBQWlCO0FBQ3hELFlBQUksZUFBZSxDQUFBO0FBRW5CLFFBQUFBLEtBQUksS0FBSyxRQUFRLE1BQU0sS0FBSyxJQUFJQSxLQUFJLFFBQVFBLEtBQUksTUFBTSxHQUFHLFFBQVEsU0FBUyxHQUFHLEdBQUcsU0FBVSxNQUFNO0FBQzlGLGNBQUksUUFBUSxRQUFRLEdBQUcsUUFBUSxVQUFVO0FBQ3ZDLGdCQUFJLFlBQVksS0FBSztBQUNyQixnQkFBSSxhQUFhLEtBQUssS0FBSyxTQUFTLEdBQUcsUUFBUSxxQkFBcUIsVUFBVUEsS0FBSSxNQUFNLFFBQVEsS0FBSyxJQUFJO0FBQ3pHLGdCQUFJLGNBQWMsY0FBYyxJQUFJLE1BQU0sU0FBUyxJQUFJO0FBQ3ZELGdCQUFJLFlBQVk7QUFBRSxzQkFBUSxRQUFRO0FBQUEsWUFBVztBQUM3QyxpQkFBSyxTQUFTLFlBQVk7QUFDMUIsZ0JBQUksU0FBUyxLQUFLLGNBQWMsU0FBUyxZQUFZO0FBQ3JELGdCQUFJLFFBQVE7QUFBRSxtQkFBSyxlQUFlO0FBQUEsWUFBTyxXQUNoQyxRQUFRO0FBQUUsbUJBQUssZUFBZTtBQUFBLFlBQUs7QUFDNUMsZ0JBQUksV0FBVyxDQUFDLGFBQWEsVUFBVSxVQUFVLEtBQUssT0FBTyxVQUMzRCxVQUFVLFdBQVcsQ0FBQyxVQUFVLENBQUMsVUFBVSxPQUFPLFdBQVcsT0FBTyxXQUFXLE9BQU8sYUFBYSxPQUFPO0FBQzVHLHFCQUFTRixLQUFJLEdBQUcsQ0FBQyxZQUFZQSxLQUFJLFVBQVUsUUFBUSxFQUFFQSxJQUFHO0FBQUUseUJBQVcsVUFBVUEsRUFBQyxLQUFLLEtBQUssT0FBT0EsRUFBQztBQUFBLFlBQUU7QUFDcEcsZ0JBQUksVUFBVTtBQUFFLDJCQUFhLEtBQUssUUFBUSxJQUFJO0FBQUEsWUFBRTtBQUNoRCxpQkFBSyxhQUFhLFFBQVEsS0FBSTtBQUM5QixvQkFBUSxTQUFRO0FBQUEsVUFDeEIsT0FBYTtBQUNMLGdCQUFJLEtBQUssS0FBSyxVQUFVLEdBQUcsUUFBUSxvQkFDakM7QUFBRSwwQkFBWSxJQUFJLEtBQUssTUFBTSxPQUFPO0FBQUEsWUFBRTtBQUN4QyxpQkFBSyxhQUFhLFFBQVEsT0FBTyxLQUFLLElBQUksUUFBUSxLQUFJLElBQUs7QUFDM0Qsb0JBQVEsU0FBUTtBQUFBLFVBQ3hCO0FBQ00sY0FBSSxDQUFDLG9CQUFJLFNBQU8sS0FBSztBQUNuQix3QkFBWSxJQUFJLEdBQUcsUUFBUSxTQUFTO0FBQ3BDLG1CQUFPO0FBQUEsVUFDZjtBQUFBLFFBQ0EsQ0FBSztBQUNELFFBQUFFLEtBQUksb0JBQW9CLFFBQVE7QUFDaEMsUUFBQUEsS0FBSSxlQUFlLEtBQUssSUFBSUEsS0FBSSxjQUFjLFFBQVEsSUFBSTtBQUMxRCxZQUFJLGFBQWEsUUFBUTtBQUFFLGtCQUFRLElBQUksV0FBWTtBQUNqRCxxQkFBU0YsS0FBSSxHQUFHQSxLQUFJLGFBQWEsUUFBUUEsTUFDdkM7QUFBRSw0QkFBYyxJQUFJLGFBQWFBLEVBQUMsR0FBRyxNQUFNO0FBQUEsWUFBRTtBQUFBLFVBQ3JELENBQUs7QUFBQSxRQUFFO0FBQUEsTUFDUDtBQUlFLFVBQUksZ0JBQWdCLFNBQVMsSUFBSSxVQUFVLE9BQU87QUFDaEQsWUFBSSxVQUFVLEdBQUc7QUFFakIsYUFBSyxXQUFXO0FBRWhCLGFBQUssVUFBVSxhQUFhLFNBQVMsR0FBRyxLQUFLLFFBQVE7QUFDckQsYUFBSyxpQkFBaUIsQ0FBQyxRQUFRLFFBQVE7QUFDdkMsYUFBSyxnQkFBZ0IsUUFBUSxRQUFRO0FBQ3JDLGFBQUssZUFBZSxRQUFRLFFBQVE7QUFDcEMsYUFBSyxrQkFBa0IsYUFBYSxFQUFFO0FBQ3RDLGFBQUssUUFBUTtBQUNiLGFBQUssT0FBTyxjQUFjLEVBQUU7QUFDNUIsYUFBSyxTQUFTLENBQUE7QUFBQSxNQUNsQjtBQUVFLG9CQUFjLFVBQVUsU0FBUyxTQUFVLFNBQVMsTUFBTTtBQUN4RCxZQUFJLFdBQVcsU0FBUyxJQUFJLEdBQzFCO0FBQUUsZUFBSyxPQUFPLEtBQUssU0FBUztBQUFBLFFBQUU7QUFBQSxNQUNwQztBQUNFLG9CQUFjLFVBQVUsU0FBUyxXQUFZO0FBQzNDLGlCQUFTQSxLQUFJLEdBQUdBLEtBQUksS0FBSyxPQUFPLFFBQVFBLE1BQ3RDO0FBQUUsaUJBQU8sTUFBTSxNQUFNLEtBQUssT0FBT0EsRUFBQyxDQUFDO0FBQUEsUUFBRTtBQUFBLE1BQzNDO0FBRUUsZUFBUyxvQkFBb0IsSUFBSTtBQUMvQixZQUFJLFVBQVUsR0FBRztBQUNqQixZQUFJLENBQUMsUUFBUSxxQkFBcUIsUUFBUSxTQUFTLGFBQWE7QUFDOUQsa0JBQVEsaUJBQWlCLFFBQVEsU0FBUyxjQUFjLFFBQVEsU0FBUztBQUN6RSxrQkFBUSxhQUFhLE1BQU0sU0FBUyxVQUFVLEVBQUUsSUFBSTtBQUNwRCxrQkFBUSxNQUFNLE1BQU0sZUFBZSxDQUFDLFFBQVEsaUJBQWlCO0FBQzdELGtCQUFRLE1BQU0sTUFBTSxtQkFBbUIsVUFBVSxFQUFFLElBQUk7QUFDdkQsa0JBQVEsb0JBQW9CO0FBQUEsUUFDbEM7QUFBQSxNQUNBO0FBRUUsZUFBUyxrQkFBa0IsSUFBSTtBQUM3QixZQUFJLEdBQUcsWUFBWTtBQUFFLGlCQUFPO0FBQUEsUUFBSTtBQUNoQyxZQUFJLFNBQVMsVUFBVSxLQUFLLEVBQUUsQ0FBQztBQUMvQixZQUFJLENBQUMsVUFBVSxDQUFDLFNBQVMsR0FBRyxRQUFRLFNBQVMsTUFBTSxHQUFHO0FBQUUsaUJBQU87QUFBQSxRQUFJO0FBQ25FLFlBQUksU0FBUyxFQUFDLFdBQVcsT0FBTTtBQUMvQixZQUFJLE9BQU8sY0FBYztBQUN2QixjQUFJLE1BQU0sSUFBSSxFQUFFLEVBQUUsYUFBWTtBQUM5QixjQUFJLElBQUksY0FBYyxJQUFJLFVBQVUsU0FBUyxHQUFHLFFBQVEsU0FBUyxJQUFJLFVBQVUsR0FBRztBQUNoRixtQkFBTyxhQUFhLElBQUk7QUFDeEIsbUJBQU8sZUFBZSxJQUFJO0FBQzFCLG1CQUFPLFlBQVksSUFBSTtBQUN2QixtQkFBTyxjQUFjLElBQUk7QUFBQSxVQUNqQztBQUFBLFFBQ0E7QUFDSSxlQUFPO0FBQUEsTUFDWDtBQUVFLGVBQVMsaUJBQWlCLFVBQVU7QUFDbEMsWUFBSSxDQUFDLFlBQVksQ0FBQyxTQUFTLGFBQWEsU0FBUyxhQUFhLFVBQVUsU0FBUyxTQUFTLFNBQVMsQ0FBQyxHQUFHO0FBQUU7QUFBQSxRQUFNO0FBQy9HLGlCQUFTLFVBQVUsTUFBSztBQUN4QixZQUFJLENBQUMscUJBQXFCLEtBQUssU0FBUyxVQUFVLFFBQVEsS0FDdEQsU0FBUyxjQUFjLFNBQVMsU0FBUyxNQUFNLFNBQVMsVUFBVSxLQUFLLFNBQVMsU0FBUyxNQUFNLFNBQVMsU0FBUyxHQUFHO0FBQ3RILGNBQUlFLE9BQU0sU0FBUyxVQUFVO0FBQzdCLGNBQUksTUFBTUEsS0FBSSxZQUFZLGFBQVksR0FBSU0sU0FBUU4sS0FBSSxZQUFXO0FBQ2pFLFVBQUFNLE9BQU0sT0FBTyxTQUFTLFlBQVksU0FBUyxZQUFZO0FBQ3ZELFVBQUFBLE9BQU0sU0FBUyxLQUFLO0FBQ3BCLGNBQUksZ0JBQWU7QUFDbkIsY0FBSSxTQUFTQSxNQUFLO0FBQ2xCLGNBQUksT0FBTyxTQUFTLFdBQVcsU0FBUyxXQUFXO0FBQUEsUUFDekQ7QUFBQSxNQUNBO0FBS0UsZUFBUyxzQkFBc0IsSUFBSSxRQUFRO0FBQ3pDLFlBQUksVUFBVSxHQUFHLFNBQVNOLE9BQU0sR0FBRztBQUVuQyxZQUFJLE9BQU8sZ0JBQWdCO0FBQ3pCLG9CQUFVLEVBQUU7QUFDWixpQkFBTztBQUFBLFFBQ2I7QUFHSSxZQUFJLENBQUMsT0FBTyxTQUNSLE9BQU8sUUFBUSxRQUFRLFFBQVEsWUFBWSxPQUFPLFFBQVEsTUFBTSxRQUFRLFdBQ3ZFLFFBQVEscUJBQXFCLFFBQVEsUUFBUSxxQkFBcUIsUUFBUSxXQUMzRSxRQUFRLGdCQUFnQixRQUFRLFFBQVEsZUFBZSxFQUFFLEtBQUssR0FDaEU7QUFBRSxpQkFBTztBQUFBLFFBQUs7QUFFaEIsWUFBSSwyQkFBMkIsRUFBRSxHQUFHO0FBQ2xDLG9CQUFVLEVBQUU7QUFDWixpQkFBTyxPQUFPLGNBQWMsRUFBRTtBQUFBLFFBQ3BDO0FBR0ksWUFBSSxNQUFNQSxLQUFJLFFBQVFBLEtBQUk7QUFDMUIsWUFBSSxPQUFPLEtBQUssSUFBSSxPQUFPLFFBQVEsT0FBTyxHQUFHLFFBQVEsZ0JBQWdCQSxLQUFJLEtBQUs7QUFDOUUsWUFBSSxLQUFLLEtBQUssSUFBSSxLQUFLLE9BQU8sUUFBUSxLQUFLLEdBQUcsUUFBUSxjQUFjO0FBQ3BFLFlBQUksUUFBUSxXQUFXLFFBQVEsT0FBTyxRQUFRLFdBQVcsSUFBSTtBQUFFLGlCQUFPLEtBQUssSUFBSUEsS0FBSSxPQUFPLFFBQVEsUUFBUTtBQUFBLFFBQUU7QUFDNUcsWUFBSSxRQUFRLFNBQVMsTUFBTSxRQUFRLFNBQVMsS0FBSyxJQUFJO0FBQUUsZUFBSyxLQUFLLElBQUksS0FBSyxRQUFRLE1BQU07QUFBQSxRQUFFO0FBQzFGLFlBQUksbUJBQW1CO0FBQ3JCLGlCQUFPLGFBQWEsR0FBRyxLQUFLLElBQUk7QUFDaEMsZUFBSyxnQkFBZ0IsR0FBRyxLQUFLLEVBQUU7QUFBQSxRQUNyQztBQUVJLFlBQUksWUFBWSxRQUFRLFFBQVEsWUFBWSxNQUFNLFFBQVEsVUFDeEQsUUFBUSxrQkFBa0IsT0FBTyxpQkFBaUIsUUFBUSxpQkFBaUIsT0FBTztBQUNwRixtQkFBVyxJQUFJLE1BQU0sRUFBRTtBQUV2QixnQkFBUSxhQUFhLGFBQWEsUUFBUSxHQUFHLEtBQUssUUFBUSxRQUFRLENBQUM7QUFFbkUsV0FBRyxRQUFRLE1BQU0sTUFBTSxNQUFNLFFBQVEsYUFBYTtBQUVsRCxZQUFJLFdBQVcsZUFBZSxFQUFFO0FBQ2hDLFlBQUksQ0FBQyxhQUFhLFlBQVksS0FBSyxDQUFDLE9BQU8sU0FBUyxRQUFRLGdCQUFnQixRQUFRLFNBQy9FLFFBQVEscUJBQXFCLFFBQVEsUUFBUSxxQkFBcUIsUUFBUSxTQUM3RTtBQUFFLGlCQUFPO0FBQUEsUUFBSztBQUloQixZQUFJLGNBQWMsa0JBQWtCLEVBQUU7QUFDdEMsWUFBSSxXQUFXLEdBQUc7QUFBRSxrQkFBUSxRQUFRLE1BQU0sVUFBVTtBQUFBLFFBQU87QUFDM0QscUJBQWEsSUFBSSxRQUFRLG1CQUFtQixPQUFPLElBQUk7QUFDdkQsWUFBSSxXQUFXLEdBQUc7QUFBRSxrQkFBUSxRQUFRLE1BQU0sVUFBVTtBQUFBLFFBQUc7QUFDdkQsZ0JBQVEsZUFBZSxRQUFRO0FBRy9CLHlCQUFpQixXQUFXO0FBSTVCLHVCQUFlLFFBQVEsU0FBUztBQUNoQyx1QkFBZSxRQUFRLFlBQVk7QUFDbkMsZ0JBQVEsUUFBUSxNQUFNLFNBQVMsUUFBUSxNQUFNLE1BQU0sWUFBWTtBQUUvRCxZQUFJLFdBQVc7QUFDYixrQkFBUSxpQkFBaUIsT0FBTztBQUNoQyxrQkFBUSxnQkFBZ0IsT0FBTztBQUMvQixzQkFBWSxJQUFJLEdBQUc7QUFBQSxRQUN6QjtBQUVJLGdCQUFRLG9CQUFvQjtBQUU1QixlQUFPO0FBQUEsTUFDWDtBQUVFLGVBQVMsa0JBQWtCLElBQUksUUFBUTtBQUNyQyxZQUFJLFdBQVcsT0FBTztBQUV0QixpQkFBUyxRQUFRLFFBQU8sUUFBUSxPQUFPO0FBQ3JDLGNBQUksQ0FBQyxTQUFTLENBQUMsR0FBRyxRQUFRLGdCQUFnQixPQUFPLG1CQUFtQixhQUFhLEVBQUUsR0FBRztBQUVwRixnQkFBSSxZQUFZLFNBQVMsT0FBTyxNQUM5QjtBQUFFLHlCQUFXLEVBQUMsS0FBSyxLQUFLLElBQUksR0FBRyxJQUFJLFNBQVMsWUFBWSxHQUFHLE9BQU8sSUFBSSxjQUFjLEVBQUUsR0FBRyxTQUFTLEdBQUcsRUFBQztBQUFBLFlBQUU7QUFHMUcsbUJBQU8sVUFBVSxhQUFhLEdBQUcsU0FBUyxHQUFHLEtBQUssUUFBUTtBQUMxRCxnQkFBSSxPQUFPLFFBQVEsUUFBUSxHQUFHLFFBQVEsWUFBWSxPQUFPLFFBQVEsTUFBTSxHQUFHLFFBQVEsUUFDaEY7QUFBRTtBQUFBLFlBQUs7QUFBQSxVQUNqQixXQUFpQixPQUFPO0FBQ2hCLG1CQUFPLFVBQVUsYUFBYSxHQUFHLFNBQVMsR0FBRyxLQUFLLFFBQVE7QUFBQSxVQUNsRTtBQUNNLGNBQUksQ0FBQyxzQkFBc0IsSUFBSSxNQUFNLEdBQUc7QUFBRTtBQUFBLFVBQUs7QUFDL0Msa0NBQXdCLEVBQUU7QUFDMUIsY0FBSSxhQUFhLHFCQUFxQixFQUFFO0FBQ3hDLDBCQUFnQixFQUFFO0FBQ2xCLDJCQUFpQixJQUFJLFVBQVU7QUFDL0IsNEJBQWtCLElBQUksVUFBVTtBQUNoQyxpQkFBTyxRQUFRO0FBQUEsUUFDckI7QUFFSSxlQUFPLE9BQU8sSUFBSSxVQUFVLEVBQUU7QUFDOUIsWUFBSSxHQUFHLFFBQVEsWUFBWSxHQUFHLFFBQVEsb0JBQW9CLEdBQUcsUUFBUSxVQUFVLEdBQUcsUUFBUSxnQkFBZ0I7QUFDeEcsaUJBQU8sT0FBTyxJQUFJLGtCQUFrQixJQUFJLEdBQUcsUUFBUSxVQUFVLEdBQUcsUUFBUSxNQUFNO0FBQzlFLGFBQUcsUUFBUSxtQkFBbUIsR0FBRyxRQUFRO0FBQVUsYUFBRyxRQUFRLGlCQUFpQixHQUFHLFFBQVE7QUFBQSxRQUNoRztBQUFBLE1BQ0E7QUFFRSxlQUFTLG9CQUFvQixJQUFJLFVBQVU7QUFDekMsWUFBSSxTQUFTLElBQUksY0FBYyxJQUFJLFFBQVE7QUFDM0MsWUFBSSxzQkFBc0IsSUFBSSxNQUFNLEdBQUc7QUFDckMsa0NBQXdCLEVBQUU7QUFDMUIsNEJBQWtCLElBQUksTUFBTTtBQUM1QixjQUFJLGFBQWEscUJBQXFCLEVBQUU7QUFDeEMsMEJBQWdCLEVBQUU7QUFDbEIsMkJBQWlCLElBQUksVUFBVTtBQUMvQiw0QkFBa0IsSUFBSSxVQUFVO0FBQ2hDLGlCQUFPLE9BQU07QUFBQSxRQUNuQjtBQUFBLE1BQ0E7QUFNRSxlQUFTLGFBQWEsSUFBSSxtQkFBbUIsTUFBTTtBQUNqRCxZQUFJLFVBQVUsR0FBRyxTQUFTLGNBQWMsR0FBRyxRQUFRO0FBQ25ELFlBQUksWUFBWSxRQUFRLFNBQVMsTUFBTSxVQUFVO0FBRWpELGlCQUFTLEdBQUdpQixPQUFNO0FBQ2hCLGNBQUksT0FBT0EsTUFBSztBQUVoQixjQUFJLFVBQVUsT0FBTyxHQUFHLFFBQVEsc0JBQXNCQSxPQUNwRDtBQUFFLFlBQUFBLE1BQUssTUFBTSxVQUFVO0FBQUEsVUFBTyxPQUU5QjtBQUFFLFlBQUFBLE1BQUssV0FBVyxZQUFZQSxLQUFJO0FBQUEsVUFBRTtBQUN0QyxpQkFBTztBQUFBLFFBQ2I7QUFFSSxZQUFJLE9BQU8sUUFBUSxNQUFNLFFBQVEsUUFBUTtBQUd6QyxpQkFBU25CLEtBQUksR0FBR0EsS0FBSSxLQUFLLFFBQVFBLE1BQUs7QUFDcEMsY0FBSSxXQUFXLEtBQUtBLEVBQUM7QUFDckIsY0FBSSxTQUFTLE9BQVE7QUFBQSxtQkFBVyxDQUFDLFNBQVMsUUFBUSxTQUFTLEtBQUssY0FBYyxXQUFXO0FBQ3ZGLGdCQUFJLE9BQU8saUJBQWlCLElBQUksVUFBVSxPQUFPLElBQUk7QUFDckQsc0JBQVUsYUFBYSxNQUFNLEdBQUc7QUFBQSxVQUN4QyxPQUFhO0FBQ0wsbUJBQU8sT0FBTyxTQUFTLE1BQU07QUFBRSxvQkFBTSxHQUFHLEdBQUc7QUFBQSxZQUFFO0FBQzdDLGdCQUFJLGVBQWUsZUFBZSxxQkFBcUIsUUFDckQscUJBQXFCLFNBQVMsU0FBUztBQUN6QyxnQkFBSSxTQUFTLFNBQVM7QUFDcEIsa0JBQUksUUFBUSxTQUFTLFNBQVMsUUFBUSxJQUFJLElBQUk7QUFBRSwrQkFBZTtBQUFBLGNBQU07QUFDckUsbUNBQXFCLElBQUksVUFBVSxPQUFPLElBQUk7QUFBQSxZQUN4RDtBQUNRLGdCQUFJLGNBQWM7QUFDaEIsNkJBQWUsU0FBUyxVQUFVO0FBQ2xDLHVCQUFTLFdBQVcsWUFBWSxTQUFTLGVBQWUsY0FBYyxHQUFHLFNBQVMsS0FBSyxDQUFDLENBQUM7QUFBQSxZQUNuRztBQUNRLGtCQUFNLFNBQVMsS0FBSztBQUFBLFVBQzVCO0FBQ00sbUJBQVMsU0FBUztBQUFBLFFBQ3hCO0FBQ0ksZUFBTyxLQUFLO0FBQUUsZ0JBQU0sR0FBRyxHQUFHO0FBQUEsUUFBRTtBQUFBLE1BQ2hDO0FBRUUsZUFBUyxrQkFBa0IsU0FBUztBQUNsQyxZQUFJLFFBQVEsUUFBUSxRQUFRO0FBQzVCLGdCQUFRLE1BQU0sTUFBTSxhQUFhLFFBQVE7QUFFekMsb0JBQVksU0FBUyxpQkFBaUIsT0FBTztBQUFBLE1BQ2pEO0FBRUUsZUFBUyxrQkFBa0IsSUFBSSxTQUFTO0FBQ3RDLFdBQUcsUUFBUSxNQUFNLE1BQU0sWUFBWSxRQUFRLFlBQVk7QUFDdkQsV0FBRyxRQUFRLGFBQWEsTUFBTSxNQUFNLFFBQVEsWUFBWTtBQUN4RCxXQUFHLFFBQVEsUUFBUSxNQUFNLFNBQVUsUUFBUSxZQUFZLEdBQUcsUUFBUSxZQUFZLFVBQVUsRUFBRSxJQUFLO0FBQUEsTUFDbkc7QUFJRSxlQUFTLGtCQUFrQixJQUFJO0FBQzdCLFlBQUksVUFBVSxHQUFHLFNBQVMsT0FBTyxRQUFRO0FBQ3pDLFlBQUksQ0FBQyxRQUFRLGlCQUFpQixDQUFDLFFBQVEsUUFBUSxjQUFjLENBQUMsR0FBRyxRQUFRLGNBQWM7QUFBRTtBQUFBLFFBQU07QUFDL0YsWUFBSSxPQUFPLHFCQUFxQixPQUFPLElBQUksUUFBUSxTQUFTLGFBQWEsR0FBRyxJQUFJO0FBQ2hGLFlBQUksVUFBVSxRQUFRLFFBQVEsYUFBYSxPQUFPLE9BQU87QUFDekQsaUJBQVNBLEtBQUksR0FBR0EsS0FBSSxLQUFLLFFBQVFBLE1BQUs7QUFBRSxjQUFJLENBQUMsS0FBS0EsRUFBQyxFQUFFLFFBQVE7QUFDM0QsZ0JBQUksR0FBRyxRQUFRLGFBQWE7QUFDMUIsa0JBQUksS0FBS0EsRUFBQyxFQUFFLFFBQ1Y7QUFBRSxxQkFBS0EsRUFBQyxFQUFFLE9BQU8sTUFBTSxPQUFPO0FBQUEsY0FBSztBQUNyQyxrQkFBSSxLQUFLQSxFQUFDLEVBQUUsa0JBQ1Y7QUFBRSxxQkFBS0EsRUFBQyxFQUFFLGlCQUFpQixNQUFNLE9BQU87QUFBQSxjQUFLO0FBQUEsWUFDdkQ7QUFDTSxnQkFBSSxRQUFRLEtBQUtBLEVBQUMsRUFBRTtBQUNwQixnQkFBSSxPQUFPO0FBQUUsdUJBQVMsSUFBSSxHQUFHLElBQUksTUFBTSxRQUFRLEtBQzdDO0FBQUUsc0JBQU0sQ0FBQyxFQUFFLE1BQU0sT0FBTztBQUFBLGNBQUs7QUFBQSxZQUFFO0FBQUEsVUFDdkM7QUFBQSxRQUFLO0FBQ0QsWUFBSSxHQUFHLFFBQVEsYUFDYjtBQUFFLGtCQUFRLFFBQVEsTUFBTSxPQUFRLE9BQU8sVUFBVztBQUFBLFFBQUs7QUFBQSxNQUM3RDtBQUtFLGVBQVMsMkJBQTJCLElBQUk7QUFDdEMsWUFBSSxDQUFDLEdBQUcsUUFBUSxhQUFhO0FBQUUsaUJBQU87QUFBQSxRQUFLO0FBQzNDLFlBQUlFLE9BQU0sR0FBRyxLQUFLLE9BQU8sY0FBYyxHQUFHLFNBQVNBLEtBQUksUUFBUUEsS0FBSSxPQUFPLENBQUMsR0FBRyxVQUFVLEdBQUc7QUFDM0YsWUFBSSxLQUFLLFVBQVUsUUFBUSxjQUFjO0FBQ3ZDLGNBQUksT0FBTyxRQUFRLFFBQVEsWUFBWTtBQUFBLFlBQUk7QUFBQSxZQUFPLENBQUMsSUFBSSxPQUFPLElBQUksQ0FBQztBQUFBLFlBQ3hCO0FBQUEsVUFBNkMsQ0FBQztBQUN6RixjQUFJLFNBQVMsS0FBSyxXQUFXLGFBQWEsVUFBVSxLQUFLLGNBQWM7QUFDdkUsa0JBQVEsV0FBVyxNQUFNLFFBQVE7QUFDakMsa0JBQVEsb0JBQW9CLEtBQUssSUFBSSxRQUFRLFFBQVEsV0FBVyxjQUFjLE9BQU8sSUFBSTtBQUN6RixrQkFBUSxlQUFlLFFBQVEsb0JBQW9CO0FBQ25ELGtCQUFRLGVBQWUsUUFBUSxvQkFBb0IsS0FBSyxTQUFTO0FBQ2pFLGtCQUFRLFdBQVcsTUFBTSxRQUFRLFFBQVEsZUFBZTtBQUN4RCw0QkFBa0IsR0FBRyxPQUFPO0FBQzVCLGlCQUFPO0FBQUEsUUFDYjtBQUNJLGVBQU87QUFBQSxNQUNYO0FBRUUsZUFBUyxXQUFXLFNBQVMsYUFBYTtBQUN4QyxZQUFJLFNBQVMsSUFBSSxpQkFBaUI7QUFDbEMsaUJBQVNGLEtBQUksR0FBR0EsS0FBSSxRQUFRLFFBQVFBLE1BQUs7QUFDdkMsY0FBSSxPQUFPLFFBQVFBLEVBQUMsR0FBRyxRQUFRO0FBQy9CLGNBQUksT0FBTyxRQUFRLFVBQVU7QUFBRSxvQkFBUSxLQUFLO0FBQU8sbUJBQU8sS0FBSztBQUFBLFVBQVU7QUFDekUsY0FBSSxRQUFRLDBCQUEwQjtBQUNwQyxnQkFBSSxDQUFDLGFBQWE7QUFBRTtBQUFBLFlBQVEsT0FDdkI7QUFBRSwrQkFBaUI7QUFBQSxZQUFLO0FBQUEsVUFDckM7QUFDTSxpQkFBTyxLQUFLLEVBQUMsV0FBVyxNQUFNLE1BQVksQ0FBQztBQUFBLFFBQ2pEO0FBQ0ksWUFBSSxlQUFlLENBQUMsZ0JBQWdCO0FBQUUsaUJBQU8sS0FBSyxFQUFDLFdBQVcsMEJBQTBCLE9BQU8sS0FBSSxDQUFDO0FBQUEsUUFBRTtBQUN0RyxlQUFPO0FBQUEsTUFDWDtBQUlFLGVBQVMsY0FBYyxTQUFTO0FBQzlCLFlBQUksVUFBVSxRQUFRLFNBQVMsUUFBUSxRQUFRO0FBQy9DLHVCQUFlLE9BQU87QUFDdEIsZ0JBQVEsYUFBYTtBQUNyQixpQkFBU0EsS0FBSSxHQUFHQSxLQUFJLE1BQU0sUUFBUSxFQUFFQSxJQUFHO0FBQ3JDLGNBQUksTUFBTSxNQUFNQSxFQUFDO0FBQ2pCLGNBQUksWUFBWSxJQUFJO0FBQ3BCLGNBQUksUUFBUSxJQUFJO0FBQ2hCLGNBQUksT0FBTyxRQUFRLFlBQVksSUFBSSxPQUFPLE1BQU0sdUJBQXVCLFNBQVMsQ0FBQztBQUNqRixjQUFJLE9BQU87QUFBRSxpQkFBSyxNQUFNLFVBQVU7QUFBQSxVQUFNO0FBQ3hDLGNBQUksYUFBYSwwQkFBMEI7QUFDekMsb0JBQVEsYUFBYTtBQUNyQixpQkFBSyxNQUFNLFNBQVMsUUFBUSxnQkFBZ0IsS0FBSztBQUFBLFVBQ3pEO0FBQUEsUUFDQTtBQUNJLGdCQUFRLE1BQU0sVUFBVSxNQUFNLFNBQVMsS0FBSztBQUM1QywwQkFBa0IsT0FBTztBQUFBLE1BQzdCO0FBRUUsZUFBUyxjQUFjLElBQUk7QUFDekIsc0JBQWMsR0FBRyxPQUFPO0FBQ3hCLGtCQUFVLEVBQUU7QUFDWiwwQkFBa0IsRUFBRTtBQUFBLE1BQ3hCO0FBTUUsZUFBUyxRQUFRLE9BQU9FLE1BQUssT0FBTyxTQUFTO0FBQzNDLFlBQUksSUFBSTtBQUNSLGFBQUssUUFBUTtBQUdiLFVBQUUsa0JBQWtCLElBQUksT0FBTyxNQUFNLDZCQUE2QjtBQUNsRSxVQUFFLGdCQUFnQixhQUFhLGtCQUFrQixNQUFNO0FBR3ZELFVBQUUsZUFBZSxJQUFJLE9BQU8sTUFBTSwwQkFBMEI7QUFDNUQsVUFBRSxhQUFhLGFBQWEsa0JBQWtCLE1BQU07QUFFcEQsVUFBRSxVQUFVLEtBQUssT0FBTyxNQUFNLGlCQUFpQjtBQUUvQyxVQUFFLGVBQWUsSUFBSSxPQUFPLE1BQU0sTUFBTSxnQ0FBZ0M7QUFDeEUsVUFBRSxZQUFZLElBQUksT0FBTyxNQUFNLG9CQUFvQjtBQUVuRCxVQUFFLFVBQVUsSUFBSSxPQUFPLE1BQU0sb0JBQW9CO0FBRWpELFVBQUUsY0FBYyxJQUFJLE9BQU8sTUFBTSxvQkFBb0I7QUFFckQsVUFBRSxZQUFZO0FBQUEsVUFBSztBQUFBLFVBQU8sQ0FBQyxFQUFFLFNBQVMsRUFBRSxhQUFhLEVBQUUsY0FBYyxFQUFFLFdBQVcsRUFBRSxPQUFPO0FBQUEsVUFDekU7QUFBQSxVQUFNO0FBQUEsUUFBbUM7QUFDM0QsWUFBSSxRQUFRLEtBQUssT0FBTyxDQUFDLEVBQUUsU0FBUyxHQUFHLGtCQUFrQjtBQUV6RCxVQUFFLFFBQVEsSUFBSSxPQUFPLENBQUMsS0FBSyxHQUFHLE1BQU0sb0JBQW9CO0FBRXhELFVBQUUsUUFBUSxJQUFJLE9BQU8sQ0FBQyxFQUFFLEtBQUssR0FBRyxrQkFBa0I7QUFDbEQsVUFBRSxhQUFhO0FBSWYsVUFBRSxlQUFlLElBQUksT0FBTyxNQUFNLE1BQU0saUNBQWlDLGNBQWMsaUJBQWlCO0FBRXhHLFVBQUUsVUFBVSxJQUFJLE9BQU8sTUFBTSxvQkFBb0I7QUFDakQsVUFBRSxhQUFhO0FBRWYsVUFBRSxXQUFXLElBQUksT0FBTyxDQUFDLEVBQUUsT0FBTyxFQUFFLGNBQWMsRUFBRSxPQUFPLEdBQUcsbUJBQW1CO0FBQ2pGLFVBQUUsU0FBUyxhQUFhLFlBQVksSUFBSTtBQUV4QyxVQUFFLFVBQVUsSUFBSSxPQUFPLENBQUMsRUFBRSxpQkFBaUIsRUFBRSxjQUFjLEVBQUUsUUFBUSxHQUFHLFlBQVk7QUFFcEYsWUFBSSxVQUFVLG1CQUFtQixLQUFLO0FBQUUsWUFBRSxRQUFRLE1BQU0sV0FBVztBQUFBLFFBQWE7QUFJaEYsVUFBRSxRQUFRLGFBQWEsYUFBYSxJQUFJO0FBR3hDLFlBQUksTUFBTSxhQUFhLEdBQUc7QUFBRSxZQUFFLFFBQVEsTUFBTSxTQUFTO0FBQUksWUFBRSxTQUFTLE1BQU0sZUFBZTtBQUFBLFFBQUU7QUFDM0YsWUFBSSxDQUFDLFVBQVUsRUFBRSxTQUFTLFNBQVM7QUFBRSxZQUFFLFNBQVMsWUFBWTtBQUFBLFFBQUs7QUFFakUsWUFBSSxPQUFPO0FBQ1QsY0FBSSxNQUFNLGFBQWE7QUFBRSxrQkFBTSxZQUFZLEVBQUUsT0FBTztBQUFBLFVBQUUsT0FDakQ7QUFBRSxrQkFBTSxFQUFFLE9BQU87QUFBQSxVQUFFO0FBQUEsUUFDOUI7QUFHSSxVQUFFLFdBQVcsRUFBRSxTQUFTQSxLQUFJO0FBQzVCLFVBQUUsbUJBQW1CLEVBQUUsaUJBQWlCQSxLQUFJO0FBRTVDLFVBQUUsT0FBTyxDQUFBO0FBQ1QsVUFBRSxlQUFlO0FBR2pCLFVBQUUsbUJBQW1CO0FBRXJCLFVBQUUsYUFBYTtBQUNmLFVBQUUsaUJBQWlCLEVBQUUsZ0JBQWdCO0FBQ3JDLFVBQUUsb0JBQW9CO0FBRXRCLFVBQUUsaUJBQWlCLEVBQUUsWUFBWSxFQUFFLFdBQVc7QUFDOUMsVUFBRSxvQkFBb0I7QUFJdEIsVUFBRSxlQUFlLEVBQUUsb0JBQW9CLEVBQUUsZUFBZTtBQUl4RCxVQUFFLGVBQWU7QUFFakIsVUFBRSxrQkFBa0IsRUFBRSxtQkFBbUIsRUFBRSxpQkFBaUI7QUFJNUQsVUFBRSxVQUFVO0FBQ1osVUFBRSxnQkFBZ0I7QUFDbEIsVUFBRSxpQkFBaUI7QUFHbkIsVUFBRSxVQUFVLEVBQUUsVUFBVSxFQUFFLGNBQWMsRUFBRSxjQUFjO0FBR3hELFVBQUUsUUFBUTtBQUlWLFVBQUUsb0JBQW9CO0FBRXRCLFVBQUUsY0FBYztBQUVoQixVQUFFLGNBQWMsV0FBVyxRQUFRLFNBQVMsUUFBUSxXQUFXO0FBQy9ELHNCQUFjLENBQUM7QUFFZixjQUFNLEtBQUssQ0FBQztBQUFBLE1BQ2hCO0FBYUUsVUFBSSxlQUFlLEdBQUcscUJBQXFCO0FBSzNDLFVBQUksSUFBSTtBQUFFLDZCQUFxQjtBQUFBLE1BQUssV0FDM0IsT0FBTztBQUFFLDZCQUFxQjtBQUFBLE1BQUcsV0FDakMsUUFBUTtBQUFFLDZCQUFxQjtBQUFBLE1BQUksV0FDbkMsUUFBUTtBQUFFLDZCQUFxQixLQUFHO0FBQUEsTUFBRTtBQUU3QyxlQUFTLGdCQUFnQixHQUFHO0FBQzFCLFlBQUksS0FBSyxFQUFFLGFBQWEsS0FBSyxFQUFFO0FBQy9CLFlBQUksTUFBTSxRQUFRLEVBQUUsVUFBVSxFQUFFLFFBQVEsRUFBRSxpQkFBaUI7QUFBRSxlQUFLLEVBQUU7QUFBQSxRQUFPO0FBQzNFLFlBQUksTUFBTSxRQUFRLEVBQUUsVUFBVSxFQUFFLFFBQVEsRUFBRSxlQUFlO0FBQUUsZUFBSyxFQUFFO0FBQUEsUUFBTyxXQUNoRSxNQUFNLE1BQU07QUFBRSxlQUFLLEVBQUU7QUFBQSxRQUFXO0FBQ3pDLGVBQU8sRUFBQyxHQUFHLElBQUksR0FBRyxHQUFFO0FBQUEsTUFDeEI7QUFDRSxlQUFTLGlCQUFpQixHQUFHO0FBQzNCLFlBQUksUUFBUSxnQkFBZ0IsQ0FBQztBQUM3QixjQUFNLEtBQUs7QUFDWCxjQUFNLEtBQUs7QUFDWCxlQUFPO0FBQUEsTUFDWDtBQUVFLGVBQVMsY0FBYyxJQUFJLEdBQUc7QUFJNUIsWUFBSSxVQUFVLGtCQUFrQixLQUFLO0FBQ25DLGNBQUksR0FBRyxRQUFRLG9CQUFvQixNQUFNO0FBQUUsZUFBRyxRQUFRLE1BQU0sTUFBTSxnQkFBZ0I7QUFBQSxVQUFPLE9BQ3BGO0FBQUUseUJBQWEsR0FBRyxRQUFRLGdCQUFnQjtBQUFBLFVBQUU7QUFDakQsYUFBRyxRQUFRLG1CQUFtQixXQUFXLFdBQVk7QUFDbkQsZUFBRyxRQUFRLG1CQUFtQjtBQUM5QixlQUFHLFFBQVEsTUFBTSxNQUFNLGdCQUFnQjtBQUFBLFVBQy9DLEdBQVMsR0FBRztBQUFBLFFBQ1o7QUFDSSxZQUFJLFFBQVEsZ0JBQWdCLENBQUMsR0FBRyxLQUFLLE1BQU0sR0FBRyxLQUFLLE1BQU07QUFDekQsWUFBSSxnQkFBZ0I7QUFDcEIsWUFBSSxFQUFFLGNBQWMsR0FBRztBQUNyQixlQUFLLEVBQUU7QUFDUCxlQUFLLEVBQUU7QUFDUCwwQkFBZ0I7QUFBQSxRQUN0QjtBQUVJLFlBQUksVUFBVSxHQUFHLFNBQVMsU0FBUyxRQUFRO0FBRTNDLFlBQUksYUFBYSxPQUFPLGNBQWMsT0FBTztBQUM3QyxZQUFJLGFBQWEsT0FBTyxlQUFlLE9BQU87QUFDOUMsWUFBSSxFQUFFLE1BQU0sY0FBYyxNQUFNLGFBQWE7QUFBRTtBQUFBLFFBQU07QUFNckQsWUFBSSxNQUFNLE9BQU8sUUFBUTtBQUN2QixnQkFBTyxVQUFTLE1BQU0sRUFBRSxRQUFRLE9BQU8sUUFBUSxNQUFNLE9BQU8sUUFBUSxNQUFNLElBQUksWUFBWTtBQUN4RixxQkFBU0YsS0FBSSxHQUFHQSxLQUFJLEtBQUssUUFBUUEsTUFBSztBQUNwQyxrQkFBSSxLQUFLQSxFQUFDLEVBQUUsUUFBUSxLQUFLO0FBQ3ZCLG1CQUFHLFFBQVEscUJBQXFCO0FBQ2hDLHNCQUFNO0FBQUEsY0FDbEI7QUFBQSxZQUNBO0FBQUEsVUFDQTtBQUFBLFFBQ0E7QUFRSSxZQUFJLE1BQU0sQ0FBQyxTQUFTLENBQUMsVUFBVSxpQkFBaUIsTUFBTTtBQUNwRCxjQUFJLE1BQU0sWUFDUjtBQUFFLDRCQUFnQixJQUFJLEtBQUssSUFBSSxHQUFHLE9BQU8sWUFBWSxLQUFLLGFBQWEsQ0FBQztBQUFBLFVBQUU7QUFDNUUsd0JBQWMsSUFBSSxLQUFLLElBQUksR0FBRyxPQUFPLGFBQWEsS0FBSyxhQUFhLENBQUM7QUFLckUsY0FBSSxDQUFDLE1BQU8sTUFBTSxZQUNoQjtBQUFFLDZCQUFpQixDQUFDO0FBQUEsVUFBRTtBQUN4QixrQkFBUSxjQUFjO0FBQ3RCO0FBQUEsUUFDTjtBQUlJLFlBQUksTUFBTSxpQkFBaUIsTUFBTTtBQUMvQixjQUFJLFNBQVMsS0FBSztBQUNsQixjQUFJLE1BQU0sR0FBRyxJQUFJLFdBQVcsTUFBTSxNQUFNLFFBQVEsUUFBUTtBQUN4RCxjQUFJLFNBQVMsR0FBRztBQUFFLGtCQUFNLEtBQUssSUFBSSxHQUFHLE1BQU0sU0FBUyxFQUFFO0FBQUEsVUFBRSxPQUNsRDtBQUFFLGtCQUFNLEtBQUssSUFBSSxHQUFHLElBQUksUUFBUSxNQUFNLFNBQVMsRUFBRTtBQUFBLFVBQUU7QUFDeEQsOEJBQW9CLElBQUksRUFBQyxLQUFVLFFBQVEsSUFBRyxDQUFDO0FBQUEsUUFDckQ7QUFFSSxZQUFJLGVBQWUsTUFBTSxFQUFFLGNBQWMsR0FBRztBQUMxQyxjQUFJLFFBQVEsZUFBZSxNQUFNO0FBQy9CLG9CQUFRLGNBQWMsT0FBTztBQUFZLG9CQUFRLGNBQWMsT0FBTztBQUN0RSxvQkFBUSxVQUFVO0FBQUksb0JBQVEsVUFBVTtBQUN4Qyx1QkFBVyxXQUFZO0FBQ3JCLGtCQUFJLFFBQVEsZUFBZSxNQUFNO0FBQUU7QUFBQSxjQUFNO0FBQ3pDLGtCQUFJLFNBQVMsT0FBTyxhQUFhLFFBQVE7QUFDekMsa0JBQUksU0FBUyxPQUFPLFlBQVksUUFBUTtBQUN4QyxrQkFBSSxTQUFVLFVBQVUsUUFBUSxXQUFXLFNBQVMsUUFBUSxXQUN6RCxVQUFVLFFBQVEsV0FBVyxTQUFTLFFBQVE7QUFDakQsc0JBQVEsY0FBYyxRQUFRLGNBQWM7QUFDNUMsa0JBQUksQ0FBQyxRQUFRO0FBQUU7QUFBQSxjQUFNO0FBQ3JCLG9DQUFzQixxQkFBcUIsZUFBZSxXQUFXLGVBQWU7QUFDcEYsZ0JBQUU7QUFBQSxZQUNaLEdBQVcsR0FBRztBQUFBLFVBQ2QsT0FBYTtBQUNMLG9CQUFRLFdBQVc7QUFBSSxvQkFBUSxXQUFXO0FBQUEsVUFDbEQ7QUFBQSxRQUNBO0FBQUEsTUFDQTtBQU9FLFVBQUksWUFBWSxTQUFTLFFBQVEsV0FBVztBQUMxQyxhQUFLLFNBQVM7QUFDZCxhQUFLLFlBQVk7QUFBQSxNQUNyQjtBQUVFLGdCQUFVLFVBQVUsVUFBVSxXQUFZO0FBQUUsZUFBTyxLQUFLLE9BQU8sS0FBSyxTQUFTO0FBQUEsTUFBQztBQUU5RSxnQkFBVSxVQUFVLFNBQVMsU0FBVSxPQUFPO0FBQzVDLFlBQUksU0FBUyxNQUFNO0FBQUUsaUJBQU87QUFBQSxRQUFJO0FBQ2hDLFlBQUksTUFBTSxhQUFhLEtBQUssYUFBYSxNQUFNLE9BQU8sVUFBVSxLQUFLLE9BQU8sUUFBUTtBQUFFLGlCQUFPO0FBQUEsUUFBSztBQUNsRyxpQkFBU0EsS0FBSSxHQUFHQSxLQUFJLEtBQUssT0FBTyxRQUFRQSxNQUFLO0FBQzNDLGNBQUksT0FBTyxLQUFLLE9BQU9BLEVBQUMsR0FBRyxRQUFRLE1BQU0sT0FBT0EsRUFBQztBQUNqRCxjQUFJLENBQUMsZUFBZSxLQUFLLFFBQVEsTUFBTSxNQUFNLEtBQUssQ0FBQyxlQUFlLEtBQUssTUFBTSxNQUFNLElBQUksR0FBRztBQUFFLG1CQUFPO0FBQUEsVUFBSztBQUFBLFFBQzlHO0FBQ0ksZUFBTztBQUFBLE1BQ1g7QUFFRSxnQkFBVSxVQUFVLFdBQVcsV0FBWTtBQUN6QyxZQUFJLE1BQU0sQ0FBQTtBQUNWLGlCQUFTQSxLQUFJLEdBQUdBLEtBQUksS0FBSyxPQUFPLFFBQVFBLE1BQ3RDO0FBQUUsY0FBSUEsRUFBQyxJQUFJLElBQUksTUFBTSxRQUFRLEtBQUssT0FBT0EsRUFBQyxFQUFFLE1BQU0sR0FBRyxRQUFRLEtBQUssT0FBT0EsRUFBQyxFQUFFLElBQUksQ0FBQztBQUFBLFFBQUU7QUFDckYsZUFBTyxJQUFJLFVBQVUsS0FBSyxLQUFLLFNBQVM7QUFBQSxNQUM1QztBQUVFLGdCQUFVLFVBQVUsb0JBQW9CLFdBQVk7QUFDbEQsaUJBQVNBLEtBQUksR0FBR0EsS0FBSSxLQUFLLE9BQU8sUUFBUUEsTUFDdEM7QUFBRSxjQUFJLENBQUMsS0FBSyxPQUFPQSxFQUFDLEVBQUUsU0FBUztBQUFFLG1CQUFPO0FBQUEsVUFBSTtBQUFBLFFBQUU7QUFDaEQsZUFBTztBQUFBLE1BQ1g7QUFFRSxnQkFBVSxVQUFVLFdBQVcsU0FBVSxLQUFLLEtBQUs7QUFDakQsWUFBSSxDQUFDLEtBQUs7QUFBRSxnQkFBTTtBQUFBLFFBQUk7QUFDdEIsaUJBQVNBLEtBQUksR0FBR0EsS0FBSSxLQUFLLE9BQU8sUUFBUUEsTUFBSztBQUMzQyxjQUFJUSxTQUFRLEtBQUssT0FBT1IsRUFBQztBQUN6QixjQUFJLElBQUksS0FBS1EsT0FBTSxLQUFJLENBQUUsS0FBSyxLQUFLLElBQUksS0FBS0EsT0FBTSxHQUFFLENBQUUsS0FBSyxHQUN6RDtBQUFFLG1CQUFPUjtBQUFBLFVBQUM7QUFBQSxRQUNsQjtBQUNJLGVBQU87QUFBQSxNQUNYO0FBRUUsVUFBSSxRQUFRLFNBQVMsUUFBUSxNQUFNO0FBQ2pDLGFBQUssU0FBUztBQUFRLGFBQUssT0FBTztBQUFBLE1BQ3RDO0FBRUUsWUFBTSxVQUFVLE9BQU8sV0FBWTtBQUFFLGVBQU8sT0FBTyxLQUFLLFFBQVEsS0FBSyxJQUFJO0FBQUEsTUFBQztBQUMxRSxZQUFNLFVBQVUsS0FBSyxXQUFZO0FBQUUsZUFBTyxPQUFPLEtBQUssUUFBUSxLQUFLLElBQUk7QUFBQSxNQUFDO0FBQ3hFLFlBQU0sVUFBVSxRQUFRLFdBQVk7QUFBRSxlQUFPLEtBQUssS0FBSyxRQUFRLEtBQUssT0FBTyxRQUFRLEtBQUssS0FBSyxNQUFNLEtBQUssT0FBTztBQUFBLE1BQUU7QUFLakgsZUFBUyxtQkFBbUIsSUFBSSxRQUFRLFdBQVc7QUFDakQsWUFBSSxXQUFXLE1BQU0sR0FBRyxRQUFRO0FBQ2hDLFlBQUksT0FBTyxPQUFPLFNBQVM7QUFDM0IsZUFBTyxLQUFLLFNBQVUsR0FBRyxHQUFHO0FBQUUsaUJBQU8sSUFBSSxFQUFFLEtBQUksR0FBSSxFQUFFLEtBQUksQ0FBRTtBQUFBLFFBQUUsQ0FBRTtBQUMvRCxvQkFBWSxRQUFRLFFBQVEsSUFBSTtBQUNoQyxpQkFBU0EsS0FBSSxHQUFHQSxLQUFJLE9BQU8sUUFBUUEsTUFBSztBQUN0QyxjQUFJLE1BQU0sT0FBT0EsRUFBQyxHQUFHLE9BQU8sT0FBT0EsS0FBSSxDQUFDO0FBQ3hDLGNBQUksT0FBTyxJQUFJLEtBQUssR0FBRSxHQUFJLElBQUksTUFBTTtBQUNwQyxjQUFJLFlBQVksQ0FBQyxJQUFJLE1BQUssSUFBSyxPQUFPLElBQUksUUFBUSxHQUFHO0FBQ25ELGdCQUFJLE9BQU8sT0FBTyxLQUFLLEtBQUksR0FBSSxJQUFJLEtBQUksQ0FBRSxHQUFHLEtBQUssT0FBTyxLQUFLLEdBQUUsR0FBSSxJQUFJLElBQUk7QUFDM0UsZ0JBQUksTUFBTSxLQUFLLE1BQUssSUFBSyxJQUFJLEtBQUksS0FBTSxJQUFJLE9BQU8sS0FBSyxLQUFJLEtBQU0sS0FBSztBQUN0RSxnQkFBSUEsTUFBSyxXQUFXO0FBQUUsZ0JBQUU7QUFBQSxZQUFVO0FBQ2xDLG1CQUFPLE9BQU8sRUFBRUEsSUFBRyxHQUFHLElBQUksTUFBTSxNQUFNLEtBQUssTUFBTSxNQUFNLE9BQU8sRUFBRSxDQUFDO0FBQUEsVUFDekU7QUFBQSxRQUNBO0FBQ0ksZUFBTyxJQUFJLFVBQVUsUUFBUSxTQUFTO0FBQUEsTUFDMUM7QUFFRSxlQUFTLGdCQUFnQixRQUFRLE1BQU07QUFDckMsZUFBTyxJQUFJLFVBQVUsQ0FBQyxJQUFJLE1BQU0sUUFBUSxRQUFRLE1BQU0sQ0FBQyxHQUFHLENBQUM7QUFBQSxNQUMvRDtBQUlFLGVBQVMsVUFBVSxRQUFRO0FBQ3pCLFlBQUksQ0FBQyxPQUFPLE1BQU07QUFBRSxpQkFBTyxPQUFPO0FBQUEsUUFBRTtBQUNwQyxlQUFPO0FBQUEsVUFBSSxPQUFPLEtBQUssT0FBTyxPQUFPLEtBQUssU0FBUztBQUFBLFVBQ3hDLElBQUksT0FBTyxJQUFJLEVBQUUsVUFBVSxPQUFPLEtBQUssVUFBVSxJQUFJLE9BQU8sS0FBSyxLQUFLO0FBQUEsUUFBRTtBQUFBLE1BQ3ZGO0FBSUUsZUFBUyxnQkFBZ0IsS0FBSyxRQUFRO0FBQ3BDLFlBQUksSUFBSSxLQUFLLE9BQU8sSUFBSSxJQUFJLEdBQUc7QUFBRSxpQkFBTztBQUFBLFFBQUc7QUFDM0MsWUFBSSxJQUFJLEtBQUssT0FBTyxFQUFFLEtBQUssR0FBRztBQUFFLGlCQUFPLFVBQVUsTUFBTTtBQUFBLFFBQUM7QUFFeEQsWUFBSSxPQUFPLElBQUksT0FBTyxPQUFPLEtBQUssVUFBVSxPQUFPLEdBQUcsT0FBTyxPQUFPLEtBQUssUUFBUSxHQUFHLEtBQUssSUFBSTtBQUM3RixZQUFJLElBQUksUUFBUSxPQUFPLEdBQUcsTUFBTTtBQUFFLGdCQUFNLFVBQVUsTUFBTSxFQUFFLEtBQUssT0FBTyxHQUFHO0FBQUEsUUFBRztBQUM1RSxlQUFPLElBQUksTUFBTSxFQUFFO0FBQUEsTUFDdkI7QUFFRSxlQUFTLHNCQUFzQkUsTUFBSyxRQUFRO0FBQzFDLFlBQUksTUFBTSxDQUFBO0FBQ1YsaUJBQVNGLEtBQUksR0FBR0EsS0FBSUUsS0FBSSxJQUFJLE9BQU8sUUFBUUYsTUFBSztBQUM5QyxjQUFJUSxTQUFRTixLQUFJLElBQUksT0FBT0YsRUFBQztBQUM1QixjQUFJLEtBQUssSUFBSTtBQUFBLFlBQU0sZ0JBQWdCUSxPQUFNLFFBQVEsTUFBTTtBQUFBLFlBQ3BDLGdCQUFnQkEsT0FBTSxNQUFNLE1BQU07QUFBQSxVQUFDLENBQUM7QUFBQSxRQUM3RDtBQUNJLGVBQU8sbUJBQW1CTixLQUFJLElBQUksS0FBS0EsS0FBSSxJQUFJLFNBQVM7QUFBQSxNQUM1RDtBQUVFLGVBQVMsVUFBVSxLQUFLLEtBQUssSUFBSTtBQUMvQixZQUFJLElBQUksUUFBUSxJQUFJLE1BQ2xCO0FBQUUsaUJBQU8sSUFBSSxHQUFHLE1BQU0sSUFBSSxLQUFLLElBQUksS0FBSyxHQUFHLEVBQUU7QUFBQSxRQUFDLE9BRTlDO0FBQUUsaUJBQU8sSUFBSSxHQUFHLFFBQVEsSUFBSSxPQUFPLElBQUksT0FBTyxJQUFJLEVBQUU7QUFBQSxRQUFDO0FBQUEsTUFDM0Q7QUFJRSxlQUFTLG1CQUFtQkEsTUFBSyxTQUFTLE1BQU07QUFDOUMsWUFBSSxNQUFNLENBQUE7QUFDVixZQUFJLFVBQVUsSUFBSUEsS0FBSSxPQUFPLENBQUMsR0FBRyxVQUFVO0FBQzNDLGlCQUFTRixLQUFJLEdBQUdBLEtBQUksUUFBUSxRQUFRQSxNQUFLO0FBQ3ZDLGNBQUksU0FBUyxRQUFRQSxFQUFDO0FBQ3RCLGNBQUksT0FBTyxVQUFVLE9BQU8sTUFBTSxTQUFTLE9BQU87QUFDbEQsY0FBSSxLQUFLLFVBQVUsVUFBVSxNQUFNLEdBQUcsU0FBUyxPQUFPO0FBQ3RELG9CQUFVLE9BQU87QUFDakIsb0JBQVU7QUFDVixjQUFJLFFBQVEsVUFBVTtBQUNwQixnQkFBSVEsU0FBUU4sS0FBSSxJQUFJLE9BQU9GLEVBQUMsR0FBRyxNQUFNLElBQUlRLE9BQU0sTUFBTUEsT0FBTSxNQUFNLElBQUk7QUFDckUsZ0JBQUlSLEVBQUMsSUFBSSxJQUFJLE1BQU0sTUFBTSxLQUFLLE1BQU0sTUFBTSxPQUFPLEVBQUU7QUFBQSxVQUMzRCxPQUFhO0FBQ0wsZ0JBQUlBLEVBQUMsSUFBSSxJQUFJLE1BQU0sTUFBTSxJQUFJO0FBQUEsVUFDckM7QUFBQSxRQUNBO0FBQ0ksZUFBTyxJQUFJLFVBQVUsS0FBS0UsS0FBSSxJQUFJLFNBQVM7QUFBQSxNQUMvQztBQUlFLGVBQVMsU0FBUyxJQUFJO0FBQ3BCLFdBQUcsSUFBSSxPQUFPLFFBQVEsR0FBRyxTQUFTLEdBQUcsSUFBSSxVQUFVO0FBQ25ELHVCQUFlLEVBQUU7QUFBQSxNQUNyQjtBQUVFLGVBQVMsZUFBZSxJQUFJO0FBQzFCLFdBQUcsSUFBSSxLQUFLLFNBQVUsTUFBTTtBQUMxQixjQUFJLEtBQUssWUFBWTtBQUFFLGlCQUFLLGFBQWE7QUFBQSxVQUFLO0FBQzlDLGNBQUksS0FBSyxRQUFRO0FBQUUsaUJBQUssU0FBUztBQUFBLFVBQUs7QUFBQSxRQUM1QyxDQUFLO0FBQ0QsV0FBRyxJQUFJLGVBQWUsR0FBRyxJQUFJLG9CQUFvQixHQUFHLElBQUk7QUFDeEQsb0JBQVksSUFBSSxHQUFHO0FBQ25CLFdBQUcsTUFBTTtBQUNULFlBQUksR0FBRyxPQUFPO0FBQUUsb0JBQVUsRUFBRTtBQUFBLFFBQUU7QUFBQSxNQUNsQztBQU9FLGVBQVMsa0JBQWtCQSxNQUFLLFFBQVE7QUFDdEMsZUFBTyxPQUFPLEtBQUssTUFBTSxLQUFLLE9BQU8sR0FBRyxNQUFNLEtBQUssSUFBSSxPQUFPLElBQUksS0FBSyxPQUNwRSxDQUFDQSxLQUFJLE1BQU1BLEtBQUksR0FBRyxRQUFRO0FBQUEsTUFDakM7QUFHRSxlQUFTLFVBQVVBLE1BQUssUUFBUSxhQUFhUyxpQkFBZ0I7QUFDM0QsaUJBQVMsU0FBUyxHQUFHO0FBQUMsaUJBQU8sY0FBYyxZQUFZLENBQUMsSUFBSTtBQUFBLFFBQUk7QUFDaEUsaUJBQVMsT0FBTyxNQUFNUyxPQUFNLE9BQU87QUFDakMscUJBQVcsTUFBTUEsT0FBTSxPQUFPVCxlQUFjO0FBQzVDLHNCQUFZLE1BQU0sVUFBVSxNQUFNLE1BQU07QUFBQSxRQUM5QztBQUNJLGlCQUFTLFNBQVMsT0FBTyxLQUFLO0FBQzVCLGNBQUksU0FBUyxDQUFBO0FBQ2IsbUJBQVNYLEtBQUksT0FBT0EsS0FBSSxLQUFLLEVBQUVBLElBQzdCO0FBQUUsbUJBQU8sS0FBSyxJQUFJLEtBQUssS0FBS0EsRUFBQyxHQUFHLFNBQVNBLEVBQUMsR0FBR1csZUFBYyxDQUFDO0FBQUEsVUFBRTtBQUNoRSxpQkFBTztBQUFBLFFBQ2I7QUFFSSxZQUFJLE9BQU8sT0FBTyxNQUFNLEtBQUssT0FBTyxJQUFJLE9BQU8sT0FBTztBQUN0RCxZQUFJLFlBQVksUUFBUVQsTUFBSyxLQUFLLElBQUksR0FBRyxXQUFXLFFBQVFBLE1BQUssR0FBRyxJQUFJO0FBQ3hFLFlBQUksV0FBVyxJQUFJLElBQUksR0FBRyxZQUFZLFNBQVMsS0FBSyxTQUFTLENBQUMsR0FBRyxTQUFTLEdBQUcsT0FBTyxLQUFLO0FBR3pGLFlBQUksT0FBTyxNQUFNO0FBQ2YsVUFBQUEsS0FBSSxPQUFPLEdBQUcsU0FBUyxHQUFHLEtBQUssTUFBTSxDQUFDO0FBQ3RDLFVBQUFBLEtBQUksT0FBTyxLQUFLLFFBQVFBLEtBQUksT0FBTyxLQUFLLE1BQU07QUFBQSxRQUNwRCxXQUFlLGtCQUFrQkEsTUFBSyxNQUFNLEdBQUc7QUFHekMsY0FBSSxRQUFRLFNBQVMsR0FBRyxLQUFLLFNBQVMsQ0FBQztBQUN2QyxpQkFBTyxVQUFVLFNBQVMsTUFBTSxTQUFTO0FBQ3pDLGNBQUksUUFBUTtBQUFFLFlBQUFBLEtBQUksT0FBTyxLQUFLLE1BQU0sTUFBTTtBQUFBLFVBQUU7QUFDNUMsY0FBSSxNQUFNLFFBQVE7QUFBRSxZQUFBQSxLQUFJLE9BQU8sS0FBSyxNQUFNLEtBQUs7QUFBQSxVQUFFO0FBQUEsUUFDdkQsV0FBZSxhQUFhLFVBQVU7QUFDaEMsY0FBSSxLQUFLLFVBQVUsR0FBRztBQUNwQixtQkFBTyxXQUFXLFVBQVUsS0FBSyxNQUFNLEdBQUcsS0FBSyxFQUFFLElBQUksV0FBVyxVQUFVLEtBQUssTUFBTSxHQUFHLEVBQUUsR0FBRyxTQUFTO0FBQUEsVUFDOUcsT0FBYTtBQUNMLGdCQUFJLFVBQVUsU0FBUyxHQUFHLEtBQUssU0FBUyxDQUFDO0FBQ3pDLG9CQUFRLEtBQUssSUFBSSxLQUFLLFdBQVcsVUFBVSxLQUFLLE1BQU0sR0FBRyxFQUFFLEdBQUcsV0FBV1MsZUFBYyxDQUFDO0FBQ3hGLG1CQUFPLFdBQVcsVUFBVSxLQUFLLE1BQU0sR0FBRyxLQUFLLEVBQUUsSUFBSSxLQUFLLENBQUMsR0FBRyxTQUFTLENBQUMsQ0FBQztBQUN6RSxZQUFBVCxLQUFJLE9BQU8sS0FBSyxPQUFPLEdBQUcsT0FBTztBQUFBLFVBQ3pDO0FBQUEsUUFDQSxXQUFlLEtBQUssVUFBVSxHQUFHO0FBQzNCLGlCQUFPLFdBQVcsVUFBVSxLQUFLLE1BQU0sR0FBRyxLQUFLLEVBQUUsSUFBSSxLQUFLLENBQUMsSUFBSSxTQUFTLEtBQUssTUFBTSxHQUFHLEVBQUUsR0FBRyxTQUFTLENBQUMsQ0FBQztBQUN0RyxVQUFBQSxLQUFJLE9BQU8sS0FBSyxPQUFPLEdBQUcsTUFBTTtBQUFBLFFBQ3RDLE9BQVc7QUFDTCxpQkFBTyxXQUFXLFVBQVUsS0FBSyxNQUFNLEdBQUcsS0FBSyxFQUFFLElBQUksS0FBSyxDQUFDLEdBQUcsU0FBUyxDQUFDLENBQUM7QUFDekUsaUJBQU8sVUFBVSxXQUFXLFNBQVMsS0FBSyxNQUFNLEdBQUcsRUFBRSxHQUFHLFNBQVM7QUFDakUsY0FBSSxVQUFVLFNBQVMsR0FBRyxLQUFLLFNBQVMsQ0FBQztBQUN6QyxjQUFJLFNBQVMsR0FBRztBQUFFLFlBQUFBLEtBQUksT0FBTyxLQUFLLE9BQU8sR0FBRyxTQUFTLENBQUM7QUFBQSxVQUFFO0FBQ3hELFVBQUFBLEtBQUksT0FBTyxLQUFLLE9BQU8sR0FBRyxPQUFPO0FBQUEsUUFDdkM7QUFFSSxvQkFBWUEsTUFBSyxVQUFVQSxNQUFLLE1BQU07QUFBQSxNQUMxQztBQUdFLGVBQVMsV0FBV0EsTUFBSyxHQUFHLGdCQUFnQjtBQUMxQyxpQkFBUyxVQUFVQSxNQUFLLE1BQU0sWUFBWTtBQUN4QyxjQUFJQSxLQUFJLFFBQVE7QUFBRSxxQkFBU0YsS0FBSSxHQUFHQSxLQUFJRSxLQUFJLE9BQU8sUUFBUSxFQUFFRixJQUFHO0FBQzVELGtCQUFJLE1BQU1FLEtBQUksT0FBT0YsRUFBQztBQUN0QixrQkFBSSxJQUFJLE9BQU8sTUFBTTtBQUFFO0FBQUEsY0FBUTtBQUMvQixrQkFBSSxTQUFTLGNBQWMsSUFBSTtBQUMvQixrQkFBSSxrQkFBa0IsQ0FBQyxRQUFRO0FBQUU7QUFBQSxjQUFRO0FBQ3pDLGdCQUFFLElBQUksS0FBSyxNQUFNO0FBQ2pCLHdCQUFVLElBQUksS0FBS0UsTUFBSyxNQUFNO0FBQUEsWUFDdEM7QUFBQSxVQUFPO0FBQUEsUUFDUDtBQUNJLGtCQUFVQSxNQUFLLE1BQU0sSUFBSTtBQUFBLE1BQzdCO0FBR0UsZUFBUyxVQUFVLElBQUlBLE1BQUs7QUFDMUIsWUFBSUEsS0FBSSxJQUFJO0FBQUUsZ0JBQU0sSUFBSSxNQUFNLGtDQUFrQztBQUFBLFFBQUM7QUFDakUsV0FBRyxNQUFNQTtBQUNULFFBQUFBLEtBQUksS0FBSztBQUNULDRCQUFvQixFQUFFO0FBQ3RCLGlCQUFTLEVBQUU7QUFDWCwwQkFBa0IsRUFBRTtBQUNwQixXQUFHLFFBQVEsWUFBWUEsS0FBSTtBQUMzQixZQUFJLENBQUMsR0FBRyxRQUFRLGNBQWM7QUFBRSxzQkFBWSxFQUFFO0FBQUEsUUFBRTtBQUNoRCxXQUFHLFFBQVEsT0FBT0EsS0FBSTtBQUN0QixrQkFBVSxFQUFFO0FBQUEsTUFDaEI7QUFFRSxlQUFTLGtCQUFrQixJQUFJO0FBQy9CLFNBQUMsR0FBRyxJQUFJLGFBQWEsUUFBUSxXQUFXLFNBQVMsR0FBRyxRQUFRLFNBQVMsZ0JBQWdCO0FBQUEsTUFDdkY7QUFFRSxlQUFTLGlCQUFpQixJQUFJO0FBQzVCLGdCQUFRLElBQUksV0FBWTtBQUN0Qiw0QkFBa0IsRUFBRTtBQUNwQixvQkFBVSxFQUFFO0FBQUEsUUFDbEIsQ0FBSztBQUFBLE1BQ0w7QUFFRSxlQUFTLFFBQVEsTUFBTTtBQUlyQixhQUFLLE9BQU8sQ0FBQTtBQUFJLGFBQUssU0FBUyxDQUFBO0FBQzlCLGFBQUssWUFBWSxPQUFPLEtBQUssWUFBWTtBQUd6QyxhQUFLLGNBQWMsS0FBSyxjQUFjO0FBQ3RDLGFBQUssU0FBUyxLQUFLLFlBQVk7QUFDL0IsYUFBSyxhQUFhLEtBQUssZ0JBQWdCO0FBRXZDLGFBQUssYUFBYSxLQUFLLGdCQUFnQixPQUFPLEtBQUssZ0JBQWdCO0FBQUEsTUFDdkU7QUFJRSxlQUFTLHdCQUF3QkEsTUFBSyxRQUFRO0FBQzVDLFlBQUksYUFBYSxFQUFDLE1BQU0sUUFBUSxPQUFPLElBQUksR0FBRyxJQUFJLFVBQVUsTUFBTSxHQUFHLE1BQU0sV0FBV0EsTUFBSyxPQUFPLE1BQU0sT0FBTyxFQUFFLEVBQUM7QUFDbEgseUJBQWlCQSxNQUFLLFlBQVksT0FBTyxLQUFLLE1BQU0sT0FBTyxHQUFHLE9BQU8sQ0FBQztBQUN0RSxtQkFBV0EsTUFBSyxTQUFVQSxNQUFLO0FBQUUsaUJBQU8saUJBQWlCQSxNQUFLLFlBQVksT0FBTyxLQUFLLE1BQU0sT0FBTyxHQUFHLE9BQU8sQ0FBQztBQUFBLFFBQUUsR0FBSSxJQUFJO0FBQ3hILGVBQU87QUFBQSxNQUNYO0FBSUUsZUFBUyxxQkFBcUIsT0FBTztBQUNuQyxlQUFPLE1BQU0sUUFBUTtBQUNuQixjQUFJLE9BQU8sSUFBSSxLQUFLO0FBQ3BCLGNBQUksS0FBSyxRQUFRO0FBQUUsa0JBQU0sSUFBRztBQUFBLFVBQUcsT0FDMUI7QUFBRTtBQUFBLFVBQUs7QUFBQSxRQUNsQjtBQUFBLE1BQ0E7QUFJRSxlQUFTLGdCQUFnQixNQUFNLE9BQU87QUFDcEMsWUFBSSxPQUFPO0FBQ1QsK0JBQXFCLEtBQUssSUFBSTtBQUM5QixpQkFBTyxJQUFJLEtBQUssSUFBSTtBQUFBLFFBQzFCLFdBQWUsS0FBSyxLQUFLLFVBQVUsQ0FBQyxJQUFJLEtBQUssSUFBSSxFQUFFLFFBQVE7QUFDckQsaUJBQU8sSUFBSSxLQUFLLElBQUk7QUFBQSxRQUMxQixXQUFlLEtBQUssS0FBSyxTQUFTLEtBQUssQ0FBQyxLQUFLLEtBQUssS0FBSyxLQUFLLFNBQVMsQ0FBQyxFQUFFLFFBQVE7QUFDMUUsZUFBSyxLQUFLLElBQUc7QUFDYixpQkFBTyxJQUFJLEtBQUssSUFBSTtBQUFBLFFBQzFCO0FBQUEsTUFDQTtBQUtFLGVBQVMsbUJBQW1CQSxNQUFLLFFBQVEsVUFBVSxNQUFNO0FBQ3ZELFlBQUksT0FBT0EsS0FBSTtBQUNmLGFBQUssT0FBTyxTQUFTO0FBQ3JCLFlBQUksT0FBTyxDQUFDLG9CQUFJLFFBQU07QUFDdEIsWUFBSTtBQUVKLGFBQUssS0FBSyxVQUFVLFFBQ2YsS0FBSyxjQUFjLE9BQU8sVUFBVSxPQUFPLFdBQ3pDLE9BQU8sT0FBTyxPQUFPLENBQUMsS0FBSyxPQUFPLEtBQUssY0FBYyxRQUFRQSxLQUFJLEtBQUtBLEtBQUksR0FBRyxRQUFRLG9CQUFvQixRQUMxRyxPQUFPLE9BQU8sT0FBTyxDQUFDLEtBQUssVUFDNUIsTUFBTSxnQkFBZ0IsTUFBTSxLQUFLLFVBQVUsSUFBSSxJQUFJO0FBRXRELGlCQUFPLElBQUksSUFBSSxPQUFPO0FBQ3RCLGNBQUksSUFBSSxPQUFPLE1BQU0sT0FBTyxFQUFFLEtBQUssS0FBSyxJQUFJLE9BQU8sTUFBTSxLQUFLLEVBQUUsS0FBSyxHQUFHO0FBR3RFLGlCQUFLLEtBQUssVUFBVSxNQUFNO0FBQUEsVUFDbEMsT0FBYTtBQUVMLGdCQUFJLFFBQVEsS0FBSyx3QkFBd0JBLE1BQUssTUFBTSxDQUFDO0FBQUEsVUFDN0Q7QUFBQSxRQUNBLE9BQVc7QUFFTCxjQUFJLFNBQVMsSUFBSSxLQUFLLElBQUk7QUFDMUIsY0FBSSxDQUFDLFVBQVUsQ0FBQyxPQUFPLFFBQ3JCO0FBQUUsbUNBQXVCQSxLQUFJLEtBQUssS0FBSyxJQUFJO0FBQUEsVUFBRTtBQUMvQyxnQkFBTTtBQUFBLFlBQUMsU0FBUyxDQUFDLHdCQUF3QkEsTUFBSyxNQUFNLENBQUM7QUFBQSxZQUM5QyxZQUFZLEtBQUs7QUFBQSxVQUFVO0FBQ2xDLGVBQUssS0FBSyxLQUFLLEdBQUc7QUFDbEIsaUJBQU8sS0FBSyxLQUFLLFNBQVMsS0FBSyxXQUFXO0FBQ3hDLGlCQUFLLEtBQUssTUFBSztBQUNmLGdCQUFJLENBQUMsS0FBSyxLQUFLLENBQUMsRUFBRSxRQUFRO0FBQUUsbUJBQUssS0FBSyxNQUFLO0FBQUEsWUFBRztBQUFBLFVBQ3REO0FBQUEsUUFDQTtBQUNJLGFBQUssS0FBSyxLQUFLLFFBQVE7QUFDdkIsYUFBSyxhQUFhLEVBQUUsS0FBSztBQUN6QixhQUFLLGNBQWMsS0FBSyxjQUFjO0FBQ3RDLGFBQUssU0FBUyxLQUFLLFlBQVk7QUFDL0IsYUFBSyxhQUFhLEtBQUssZ0JBQWdCLE9BQU87QUFFOUMsWUFBSSxDQUFDLE1BQU07QUFBRSxpQkFBT0EsTUFBSyxjQUFjO0FBQUEsUUFBRTtBQUFBLE1BQzdDO0FBRUUsZUFBUywwQkFBMEJBLE1BQUssUUFBUSxNQUFNLEtBQUs7QUFDekQsWUFBSSxLQUFLLE9BQU8sT0FBTyxDQUFDO0FBQ3hCLGVBQU8sTUFBTSxPQUNYLE1BQU0sT0FDTixLQUFLLE9BQU8sVUFBVSxJQUFJLE9BQU8sVUFDakMsS0FBSyxrQkFBaUIsS0FBTSxJQUFJLGtCQUFpQixLQUNqRCxvQkFBSSxTQUFPQSxLQUFJLFFBQVEsZ0JBQWdCQSxLQUFJLEtBQUtBLEtBQUksR0FBRyxRQUFRLG9CQUFvQjtBQUFBLE1BQ3pGO0FBTUUsZUFBUyxzQkFBc0JBLE1BQUssS0FBSyxNQUFNLFNBQVM7QUFDdEQsWUFBSSxPQUFPQSxLQUFJLFNBQVMsU0FBUyxXQUFXLFFBQVE7QUFNcEQsWUFBSSxRQUFRLEtBQUssYUFDWixVQUFVLEtBQUssaUJBQWlCLFdBQy9CLEtBQUssZUFBZSxLQUFLLGVBQWUsS0FBSyxjQUFjLFVBQzNELDBCQUEwQkEsTUFBSyxRQUFRLElBQUksS0FBSyxJQUFJLEdBQUcsR0FBRyxJQUM5RDtBQUFFLGVBQUssS0FBSyxLQUFLLEtBQUssU0FBUyxDQUFDLElBQUk7QUFBQSxRQUFJLE9BRXhDO0FBQUUsaUNBQXVCLEtBQUssS0FBSyxJQUFJO0FBQUEsUUFBRTtBQUUzQyxhQUFLLGNBQWMsQ0FBQyxvQkFBSTtBQUN4QixhQUFLLGdCQUFnQjtBQUNyQixhQUFLLFlBQVk7QUFDakIsWUFBSSxXQUFXLFFBQVEsY0FBYyxPQUNuQztBQUFFLCtCQUFxQixLQUFLLE1BQU07QUFBQSxRQUFFO0FBQUEsTUFDMUM7QUFFRSxlQUFTLHVCQUF1QixLQUFLLE1BQU07QUFDekMsWUFBSSxNQUFNLElBQUksSUFBSTtBQUNsQixZQUFJLEVBQUUsT0FBTyxJQUFJLFVBQVUsSUFBSSxPQUFPLEdBQUcsSUFDdkM7QUFBRSxlQUFLLEtBQUssR0FBRztBQUFBLFFBQUU7QUFBQSxNQUN2QjtBQUdFLGVBQVMsaUJBQWlCQSxNQUFLLFFBQVEsTUFBTSxJQUFJO0FBQy9DLFlBQUksV0FBVyxPQUFPLFdBQVdBLEtBQUksRUFBRSxHQUFHLElBQUk7QUFDOUMsUUFBQUEsS0FBSSxLQUFLLEtBQUssSUFBSUEsS0FBSSxPQUFPLElBQUksR0FBRyxLQUFLLElBQUlBLEtBQUksUUFBUUEsS0FBSSxNQUFNLEVBQUUsR0FBRyxTQUFVLE1BQU07QUFDdEYsY0FBSSxLQUFLLGFBQ1A7QUFBRSxhQUFDLGFBQWEsV0FBVyxPQUFPLFdBQVdBLEtBQUksRUFBRSxJQUFJLENBQUEsSUFBSyxDQUFDLElBQUksS0FBSztBQUFBLFVBQVk7QUFDcEYsWUFBRTtBQUFBLFFBQ1IsQ0FBSztBQUFBLE1BQ0w7QUFJRSxlQUFTLG1CQUFtQixPQUFPO0FBQ2pDLFlBQUksQ0FBQyxPQUFPO0FBQUUsaUJBQU87QUFBQSxRQUFJO0FBQ3pCLFlBQUk7QUFDSixpQkFBU0YsS0FBSSxHQUFHQSxLQUFJLE1BQU0sUUFBUSxFQUFFQSxJQUFHO0FBQ3JDLGNBQUksTUFBTUEsRUFBQyxFQUFFLE9BQU8sbUJBQW1CO0FBQUUsZ0JBQUksQ0FBQyxLQUFLO0FBQUUsb0JBQU0sTUFBTSxNQUFNLEdBQUdBLEVBQUM7QUFBQSxZQUFFO0FBQUEsVUFBRSxXQUN0RSxLQUFLO0FBQUUsZ0JBQUksS0FBSyxNQUFNQSxFQUFDLENBQUM7QUFBQSxVQUFFO0FBQUEsUUFDekM7QUFDSSxlQUFPLENBQUMsTUFBTSxRQUFRLElBQUksU0FBUyxNQUFNO0FBQUEsTUFDN0M7QUFHRSxlQUFTLFlBQVlFLE1BQUssUUFBUTtBQUNoQyxZQUFJLFFBQVEsT0FBTyxXQUFXQSxLQUFJLEVBQUU7QUFDcEMsWUFBSSxDQUFDLE9BQU87QUFBRSxpQkFBTztBQUFBLFFBQUk7QUFDekIsWUFBSSxLQUFLLENBQUE7QUFDVCxpQkFBU0YsS0FBSSxHQUFHQSxLQUFJLE9BQU8sS0FBSyxRQUFRLEVBQUVBLElBQ3hDO0FBQUUsYUFBRyxLQUFLLG1CQUFtQixNQUFNQSxFQUFDLENBQUMsQ0FBQztBQUFBLFFBQUU7QUFDMUMsZUFBTztBQUFBLE1BQ1g7QUFNRSxlQUFTLGNBQWNFLE1BQUssUUFBUTtBQUNsQyxZQUFJLE1BQU0sWUFBWUEsTUFBSyxNQUFNO0FBQ2pDLFlBQUksWUFBWSx1QkFBdUJBLE1BQUssTUFBTTtBQUNsRCxZQUFJLENBQUMsS0FBSztBQUFFLGlCQUFPO0FBQUEsUUFBUztBQUM1QixZQUFJLENBQUMsV0FBVztBQUFFLGlCQUFPO0FBQUEsUUFBRztBQUU1QixpQkFBU0YsS0FBSSxHQUFHQSxLQUFJLElBQUksUUFBUSxFQUFFQSxJQUFHO0FBQ25DLGNBQUksU0FBUyxJQUFJQSxFQUFDLEdBQUcsYUFBYSxVQUFVQSxFQUFDO0FBQzdDLGNBQUksVUFBVSxZQUFZO0FBQ3hCLGtCQUFPLFVBQVMsSUFBSSxHQUFHLElBQUksV0FBVyxRQUFRLEVBQUUsR0FBRztBQUNqRCxrQkFBSSxPQUFPLFdBQVcsQ0FBQztBQUN2Qix1QkFBUyxJQUFJLEdBQUcsSUFBSSxPQUFPLFFBQVEsRUFBRSxHQUNuQztBQUFFLG9CQUFJLE9BQU8sQ0FBQyxFQUFFLFVBQVUsS0FBSyxRQUFRO0FBQUUsMkJBQVM7QUFBQSxnQkFBSztBQUFBLGNBQUU7QUFDM0QscUJBQU8sS0FBSyxJQUFJO0FBQUEsWUFDMUI7QUFBQSxVQUNBLFdBQWlCLFlBQVk7QUFDckIsZ0JBQUlBLEVBQUMsSUFBSTtBQUFBLFVBQ2pCO0FBQUEsUUFDQTtBQUNJLGVBQU87QUFBQSxNQUNYO0FBSUUsZUFBUyxpQkFBaUIsUUFBUSxVQUFVLGdCQUFnQjtBQUMxRCxZQUFJLE9BQU8sQ0FBQTtBQUNYLGlCQUFTQSxLQUFJLEdBQUdBLEtBQUksT0FBTyxRQUFRLEVBQUVBLElBQUc7QUFDdEMsY0FBSSxRQUFRLE9BQU9BLEVBQUM7QUFDcEIsY0FBSSxNQUFNLFFBQVE7QUFDaEIsaUJBQUssS0FBSyxpQkFBaUIsVUFBVSxVQUFVLFNBQVMsS0FBSyxLQUFLLElBQUksS0FBSztBQUMzRTtBQUFBLFVBQ1I7QUFDTSxjQUFJLFVBQVUsTUFBTSxTQUFTLGFBQWEsQ0FBQTtBQUMxQyxlQUFLLEtBQUssRUFBQyxTQUFTLFdBQVUsQ0FBQztBQUMvQixtQkFBUyxJQUFJLEdBQUcsSUFBSSxRQUFRLFFBQVEsRUFBRSxHQUFHO0FBQ3ZDLGdCQUFJLFNBQVMsUUFBUSxDQUFDLEdBQUcsSUFBSztBQUM5Qix1QkFBVyxLQUFLLEVBQUMsTUFBTSxPQUFPLE1BQU0sSUFBSSxPQUFPLElBQUksTUFBTSxPQUFPLEtBQUksQ0FBQztBQUNyRSxnQkFBSSxVQUFVO0FBQUUsdUJBQVNHLFNBQVEsUUFBUTtBQUFFLG9CQUFJLElBQUlBLE1BQUssTUFBTSxlQUFlLEdBQUc7QUFDOUUsc0JBQUksUUFBUSxVQUFVLE9BQU8sRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLElBQUk7QUFDeEMsd0JBQUksVUFBVSxFQUFFQSxLQUFJLElBQUksT0FBT0EsS0FBSTtBQUNuQywyQkFBTyxPQUFPQSxLQUFJO0FBQUEsa0JBQzlCO0FBQUEsZ0JBQ0E7QUFBQSxjQUFTO0FBQUEsWUFBRTtBQUFBLFVBQ1g7QUFBQSxRQUNBO0FBQ0ksZUFBTztBQUFBLE1BQ1g7QUFVRSxlQUFTLFlBQVlLLFFBQU8sTUFBTSxPQUFPLFFBQVE7QUFDL0MsWUFBSSxRQUFRO0FBQ1YsY0FBSSxTQUFTQSxPQUFNO0FBQ25CLGNBQUksT0FBTztBQUNULGdCQUFJLFlBQVksSUFBSSxNQUFNLE1BQU0sSUFBSTtBQUNwQyxnQkFBSSxhQUFjLElBQUksT0FBTyxNQUFNLElBQUksR0FBSTtBQUN6Qyx1QkFBUztBQUNULHFCQUFPO0FBQUEsWUFDakIsV0FBbUIsYUFBYyxJQUFJLE1BQU0sS0FBSyxJQUFJLEdBQUk7QUFDOUMscUJBQU87QUFBQSxZQUNqQjtBQUFBLFVBQ0E7QUFDTSxpQkFBTyxJQUFJLE1BQU0sUUFBUSxJQUFJO0FBQUEsUUFDbkMsT0FBVztBQUNMLGlCQUFPLElBQUksTUFBTSxTQUFTLE1BQU0sSUFBSTtBQUFBLFFBQzFDO0FBQUEsTUFDQTtBQUdFLGVBQVMsZ0JBQWdCTixNQUFLLE1BQU0sT0FBTyxTQUFTLFFBQVE7QUFDMUQsWUFBSSxVQUFVLE1BQU07QUFBRSxtQkFBU0EsS0FBSSxPQUFPQSxLQUFJLEdBQUcsUUFBUSxTQUFTQSxLQUFJO0FBQUEsUUFBUTtBQUM5RSxxQkFBYUEsTUFBSyxJQUFJLFVBQVUsQ0FBQyxZQUFZQSxLQUFJLElBQUksUUFBTyxHQUFJLE1BQU0sT0FBTyxNQUFNLENBQUMsR0FBRyxDQUFDLEdBQUcsT0FBTztBQUFBLE1BQ3RHO0FBSUUsZUFBUyxpQkFBaUJBLE1BQUssT0FBTyxTQUFTO0FBQzdDLFlBQUksTUFBTSxDQUFBO0FBQ1YsWUFBSSxTQUFTQSxLQUFJLE9BQU9BLEtBQUksR0FBRyxRQUFRLFNBQVNBLEtBQUk7QUFDcEQsaUJBQVNGLEtBQUksR0FBR0EsS0FBSUUsS0FBSSxJQUFJLE9BQU8sUUFBUUYsTUFDekM7QUFBRSxjQUFJQSxFQUFDLElBQUksWUFBWUUsS0FBSSxJQUFJLE9BQU9GLEVBQUMsR0FBRyxNQUFNQSxFQUFDLEdBQUcsTUFBTSxNQUFNO0FBQUEsUUFBRTtBQUNwRSxZQUFJLFNBQVMsbUJBQW1CRSxLQUFJLElBQUksS0FBS0EsS0FBSSxJQUFJLFNBQVM7QUFDOUQscUJBQWFBLE1BQUssUUFBUSxPQUFPO0FBQUEsTUFDckM7QUFHRSxlQUFTLG9CQUFvQkEsTUFBS0YsSUFBR1EsUUFBTyxTQUFTO0FBQ25ELFlBQUksU0FBU04sS0FBSSxJQUFJLE9BQU8sTUFBTSxDQUFDO0FBQ25DLGVBQU9GLEVBQUMsSUFBSVE7QUFDWixxQkFBYU4sTUFBSyxtQkFBbUJBLEtBQUksSUFBSSxRQUFRQSxLQUFJLElBQUksU0FBUyxHQUFHLE9BQU87QUFBQSxNQUNwRjtBQUdFLGVBQVMsbUJBQW1CQSxNQUFLLFFBQVEsTUFBTSxTQUFTO0FBQ3RELHFCQUFhQSxNQUFLLGdCQUFnQixRQUFRLElBQUksR0FBRyxPQUFPO0FBQUEsTUFDNUQ7QUFJRSxlQUFTLHNCQUFzQkEsTUFBSyxLQUFLLFNBQVM7QUFDaEQsWUFBSSxNQUFNO0FBQUEsVUFDUixRQUFRLElBQUk7QUFBQSxVQUNaLFFBQVEsU0FBUyxRQUFRO0FBQ3ZCLGlCQUFLLFNBQVMsQ0FBQTtBQUNkLHFCQUFTRixLQUFJLEdBQUdBLEtBQUksT0FBTyxRQUFRQSxNQUNqQztBQUFFLG1CQUFLLE9BQU9BLEVBQUMsSUFBSSxJQUFJO0FBQUEsZ0JBQU0sUUFBUUUsTUFBSyxPQUFPRixFQUFDLEVBQUUsTUFBTTtBQUFBLGdCQUMvQixRQUFRRSxNQUFLLE9BQU9GLEVBQUMsRUFBRSxJQUFJO0FBQUEsY0FBQztBQUFBLFlBQUU7QUFBQSxVQUNuRTtBQUFBLFVBQ00sUUFBUSxXQUFXLFFBQVE7QUFBQTtBQUU3QixlQUFPRSxNQUFLLHlCQUF5QkEsTUFBSyxHQUFHO0FBQzdDLFlBQUlBLEtBQUksSUFBSTtBQUFFLGlCQUFPQSxLQUFJLElBQUkseUJBQXlCQSxLQUFJLElBQUksR0FBRztBQUFBLFFBQUU7QUFDbkUsWUFBSSxJQUFJLFVBQVUsSUFBSSxRQUFRO0FBQUUsaUJBQU8sbUJBQW1CQSxLQUFJLElBQUksSUFBSSxRQUFRLElBQUksT0FBTyxTQUFTLENBQUM7QUFBQSxRQUFDLE9BQy9GO0FBQUUsaUJBQU87QUFBQSxRQUFHO0FBQUEsTUFDckI7QUFFRSxlQUFTLDJCQUEyQkEsTUFBSyxLQUFLLFNBQVM7QUFDckQsWUFBSSxPQUFPQSxLQUFJLFFBQVEsTUFBTSxPQUFPLElBQUksSUFBSTtBQUM1QyxZQUFJLFFBQVEsS0FBSyxRQUFRO0FBQ3ZCLGVBQUssS0FBSyxTQUFTLENBQUMsSUFBSTtBQUN4Qiw2QkFBbUJBLE1BQUssS0FBSyxPQUFPO0FBQUEsUUFDMUMsT0FBVztBQUNMLHVCQUFhQSxNQUFLLEtBQUssT0FBTztBQUFBLFFBQ3BDO0FBQUEsTUFDQTtBQUdFLGVBQVMsYUFBYUEsTUFBSyxLQUFLLFNBQVM7QUFDdkMsMkJBQW1CQSxNQUFLLEtBQUssT0FBTztBQUNwQyw4QkFBc0JBLE1BQUtBLEtBQUksS0FBS0EsS0FBSSxLQUFLQSxLQUFJLEdBQUcsTUFBTSxLQUFLLEtBQUssT0FBTztBQUFBLE1BQy9FO0FBRUUsZUFBUyxtQkFBbUJBLE1BQUssS0FBSyxTQUFTO0FBQzdDLFlBQUksV0FBV0EsTUFBSyx1QkFBdUIsS0FBS0EsS0FBSSxNQUFNLFdBQVdBLEtBQUksSUFBSSx1QkFBdUIsR0FDbEc7QUFBRSxnQkFBTSxzQkFBc0JBLE1BQUssS0FBSyxPQUFPO0FBQUEsUUFBRTtBQUVuRCxZQUFJLE9BQU8sV0FBVyxRQUFRLFNBQzNCLElBQUksSUFBSSxVQUFVLE1BQU1BLEtBQUksSUFBSSxRQUFPLEVBQUcsSUFBSSxJQUFJLElBQUksS0FBSztBQUM5RCwwQkFBa0JBLE1BQUssc0JBQXNCQSxNQUFLLEtBQUssTUFBTSxJQUFJLENBQUM7QUFFbEUsWUFBSSxFQUFFLFdBQVcsUUFBUSxXQUFXLFVBQVVBLEtBQUksTUFBTUEsS0FBSSxHQUFHLFVBQVUsVUFBVSxLQUFLLFlBQ3RGO0FBQUUsOEJBQW9CQSxLQUFJLEVBQUU7QUFBQSxRQUFFO0FBQUEsTUFDcEM7QUFFRSxlQUFTLGtCQUFrQkEsTUFBSyxLQUFLO0FBQ25DLFlBQUksSUFBSSxPQUFPQSxLQUFJLEdBQUcsR0FBRztBQUFFO0FBQUEsUUFBTTtBQUVqQyxRQUFBQSxLQUFJLE1BQU07QUFFVixZQUFJQSxLQUFJLElBQUk7QUFDVixVQUFBQSxLQUFJLEdBQUcsTUFBTSxjQUFjO0FBQzNCLFVBQUFBLEtBQUksR0FBRyxNQUFNLG1CQUFtQjtBQUNoQywrQkFBcUJBLEtBQUksRUFBRTtBQUFBLFFBQ2pDO0FBQ0ksb0JBQVlBLE1BQUssa0JBQWtCQSxJQUFHO0FBQUEsTUFDMUM7QUFJRSxlQUFTLGlCQUFpQkEsTUFBSztBQUM3QiwwQkFBa0JBLE1BQUssc0JBQXNCQSxNQUFLQSxLQUFJLEtBQUssTUFBTSxLQUFLLENBQUM7QUFBQSxNQUMzRTtBQUlFLGVBQVMsc0JBQXNCQSxNQUFLLEtBQUssTUFBTSxVQUFVO0FBQ3ZELFlBQUk7QUFDSixpQkFBU0YsS0FBSSxHQUFHQSxLQUFJLElBQUksT0FBTyxRQUFRQSxNQUFLO0FBQzFDLGNBQUlRLFNBQVEsSUFBSSxPQUFPUixFQUFDO0FBQ3hCLGNBQUksTUFBTSxJQUFJLE9BQU8sVUFBVUUsS0FBSSxJQUFJLE9BQU8sVUFBVUEsS0FBSSxJQUFJLE9BQU9GLEVBQUM7QUFDeEUsY0FBSSxZQUFZLFdBQVdFLE1BQUtNLE9BQU0sUUFBUSxPQUFPLElBQUksUUFBUSxNQUFNLFFBQVE7QUFDL0UsY0FBSSxVQUFVQSxPQUFNLFFBQVFBLE9BQU0sU0FBUyxZQUFZLFdBQVdOLE1BQUtNLE9BQU0sTUFBTSxPQUFPLElBQUksTUFBTSxNQUFNLFFBQVE7QUFDbEgsY0FBSSxPQUFPLGFBQWFBLE9BQU0sVUFBVSxXQUFXQSxPQUFNLE1BQU07QUFDN0QsZ0JBQUksQ0FBQyxLQUFLO0FBQUUsb0JBQU0sSUFBSSxPQUFPLE1BQU0sR0FBR1IsRUFBQztBQUFBLFlBQUU7QUFDekMsZ0JBQUlBLEVBQUMsSUFBSSxJQUFJLE1BQU0sV0FBVyxPQUFPO0FBQUEsVUFDN0M7QUFBQSxRQUNBO0FBQ0ksZUFBTyxNQUFNLG1CQUFtQkUsS0FBSSxJQUFJLEtBQUssSUFBSSxTQUFTLElBQUk7QUFBQSxNQUNsRTtBQUVFLGVBQVMsZ0JBQWdCQSxNQUFLLEtBQUssUUFBUSxLQUFLLFVBQVU7QUFDeEQsWUFBSSxPQUFPLFFBQVFBLE1BQUssSUFBSSxJQUFJO0FBQ2hDLFlBQUksS0FBSyxhQUFhO0FBQUUsbUJBQVNGLEtBQUksR0FBR0EsS0FBSSxLQUFLLFlBQVksUUFBUSxFQUFFQSxJQUFHO0FBQ3hFLGdCQUFJLEtBQUssS0FBSyxZQUFZQSxFQUFDLEdBQUcsSUFBSSxHQUFHO0FBS3JDLGdCQUFJLG9CQUFxQixnQkFBZ0IsSUFBSyxDQUFDLEVBQUUsYUFBYSxFQUFFO0FBQ2hFLGdCQUFJLHFCQUFzQixpQkFBaUIsSUFBSyxDQUFDLEVBQUUsY0FBYyxFQUFFO0FBRW5FLGlCQUFLLEdBQUcsUUFBUSxTQUFTLG9CQUFvQixHQUFHLFFBQVEsSUFBSSxLQUFLLEdBQUcsT0FBTyxJQUFJLFNBQzFFLEdBQUcsTUFBTSxTQUFTLHFCQUFxQixHQUFHLE1BQU0sSUFBSSxLQUFLLEdBQUcsS0FBSyxJQUFJLE1BQU07QUFDOUUsa0JBQUksVUFBVTtBQUNaLHVCQUFPLEdBQUcsbUJBQW1CO0FBQzdCLG9CQUFJLEVBQUUsbUJBQW1CO0FBQ3ZCLHNCQUFJLENBQUMsS0FBSyxhQUFhO0FBQUU7QUFBQSxrQkFBSyxPQUN6QjtBQUFDLHNCQUFFQTtBQUFHO0FBQUEsa0JBQVE7QUFBQSxnQkFDL0I7QUFBQSxjQUNBO0FBQ1Esa0JBQUksQ0FBQyxFQUFFLFFBQVE7QUFBRTtBQUFBLGNBQVE7QUFFekIsa0JBQUksUUFBUTtBQUNWLG9CQUFJLE9BQU8sRUFBRSxLQUFLLE1BQU0sSUFBSSxJQUFJLEVBQUUsR0FBRyxPQUFRO0FBQzdDLG9CQUFJLE1BQU0sSUFBSSxxQkFBcUIsbUJBQ2pDO0FBQUUseUJBQU8sUUFBUUUsTUFBSyxNQUFNLENBQUMsS0FBSyxRQUFRLEtBQUssUUFBUSxJQUFJLE9BQU8sT0FBTyxJQUFJO0FBQUEsZ0JBQUU7QUFDakYsb0JBQUksUUFBUSxLQUFLLFFBQVEsSUFBSSxTQUFTLE9BQU8sSUFBSSxNQUFNLE1BQU0sT0FBTyxNQUFNLElBQUksT0FBTyxJQUFJLE9BQU8sSUFDOUY7QUFBRSx5QkFBTyxnQkFBZ0JBLE1BQUssTUFBTSxLQUFLLEtBQUssUUFBUTtBQUFBLGdCQUFDO0FBQUEsY0FDbkU7QUFFUSxrQkFBSSxNQUFNLEVBQUUsS0FBSyxNQUFNLElBQUksS0FBSyxDQUFDO0FBQ2pDLGtCQUFJLE1BQU0sSUFBSSxvQkFBb0Isb0JBQ2hDO0FBQUUsc0JBQU0sUUFBUUEsTUFBSyxLQUFLLEtBQUssSUFBSSxRQUFRLElBQUksT0FBTyxPQUFPLElBQUk7QUFBQSxjQUFFO0FBQ3JFLHFCQUFPLE1BQU0sZ0JBQWdCQSxNQUFLLEtBQUssS0FBSyxLQUFLLFFBQVEsSUFBSTtBQUFBLFlBQ3JFO0FBQUEsVUFDQTtBQUFBLFFBQUs7QUFDRCxlQUFPO0FBQUEsTUFDWDtBQUdFLGVBQVMsV0FBV0EsTUFBSyxLQUFLLFFBQVEsTUFBTSxVQUFVO0FBQ3BELFlBQUksTUFBTSxRQUFRO0FBQ2xCLFlBQUksUUFBUSxnQkFBZ0JBLE1BQUssS0FBSyxRQUFRLEtBQUssUUFBUSxLQUN0RCxDQUFDLFlBQVksZ0JBQWdCQSxNQUFLLEtBQUssUUFBUSxLQUFLLElBQUksS0FDekQsZ0JBQWdCQSxNQUFLLEtBQUssUUFBUSxDQUFDLEtBQUssUUFBUSxLQUMvQyxDQUFDLFlBQVksZ0JBQWdCQSxNQUFLLEtBQUssUUFBUSxDQUFDLEtBQUssSUFBSTtBQUM5RCxZQUFJLENBQUMsT0FBTztBQUNWLFVBQUFBLEtBQUksV0FBVztBQUNmLGlCQUFPLElBQUlBLEtBQUksT0FBTyxDQUFDO0FBQUEsUUFDN0I7QUFDSSxlQUFPO0FBQUEsTUFDWDtBQUVFLGVBQVMsUUFBUUEsTUFBSyxLQUFLLEtBQUssTUFBTTtBQUNwQyxZQUFJLE1BQU0sS0FBSyxJQUFJLE1BQU0sR0FBRztBQUMxQixjQUFJLElBQUksT0FBT0EsS0FBSSxPQUFPO0FBQUUsbUJBQU8sUUFBUUEsTUFBSyxJQUFJLElBQUksT0FBTyxDQUFDLENBQUM7QUFBQSxVQUFDLE9BQzdEO0FBQUUsbUJBQU87QUFBQSxVQUFJO0FBQUEsUUFDeEIsV0FBZSxNQUFNLEtBQUssSUFBSSxPQUFPLFFBQVEsUUFBUUEsTUFBSyxJQUFJLElBQUksR0FBRyxLQUFLLFFBQVE7QUFDNUUsY0FBSSxJQUFJLE9BQU9BLEtBQUksUUFBUUEsS0FBSSxPQUFPLEdBQUc7QUFBRSxtQkFBTyxJQUFJLElBQUksT0FBTyxHQUFHLENBQUM7QUFBQSxVQUFDLE9BQ2pFO0FBQUUsbUJBQU87QUFBQSxVQUFJO0FBQUEsUUFDeEIsT0FBVztBQUNMLGlCQUFPLElBQUksSUFBSSxJQUFJLE1BQU0sSUFBSSxLQUFLLEdBQUc7QUFBQSxRQUMzQztBQUFBLE1BQ0E7QUFFRSxlQUFTLFVBQVUsSUFBSTtBQUNyQixXQUFHLGFBQWEsSUFBSSxHQUFHLFVBQVMsR0FBSSxDQUFDLEdBQUcsSUFBSSxHQUFHLFNBQVEsQ0FBRSxHQUFHLGNBQWM7QUFBQSxNQUM5RTtBQUtFLGVBQVMsYUFBYUEsTUFBSyxRQUFRLFFBQVE7QUFDekMsWUFBSSxNQUFNO0FBQUEsVUFDUixVQUFVO0FBQUEsVUFDVixNQUFNLE9BQU87QUFBQSxVQUNiLElBQUksT0FBTztBQUFBLFVBQ1gsTUFBTSxPQUFPO0FBQUEsVUFDYixRQUFRLE9BQU87QUFBQSxVQUNmLFFBQVEsV0FBWTtBQUFFLG1CQUFPLElBQUksV0FBVztBQUFBLFVBQUs7QUFBQTtBQUVuRCxZQUFJLFFBQVE7QUFBRSxjQUFJLFNBQVMsU0FBVSxNQUFNLElBQUksTUFBTSxRQUFRO0FBQzNELGdCQUFJLE1BQU07QUFBRSxrQkFBSSxPQUFPLFFBQVFBLE1BQUssSUFBSTtBQUFBLFlBQUU7QUFDMUMsZ0JBQUksSUFBSTtBQUFFLGtCQUFJLEtBQUssUUFBUUEsTUFBSyxFQUFFO0FBQUEsWUFBRTtBQUNwQyxnQkFBSSxNQUFNO0FBQUUsa0JBQUksT0FBTztBQUFBLFlBQUs7QUFDNUIsZ0JBQUksV0FBVyxRQUFXO0FBQUUsa0JBQUksU0FBUztBQUFBLFlBQU87QUFBQSxVQUN0RDtBQUFBLFFBQU07QUFDRixlQUFPQSxNQUFLLGdCQUFnQkEsTUFBSyxHQUFHO0FBQ3BDLFlBQUlBLEtBQUksSUFBSTtBQUFFLGlCQUFPQSxLQUFJLElBQUksZ0JBQWdCQSxLQUFJLElBQUksR0FBRztBQUFBLFFBQUU7QUFFMUQsWUFBSSxJQUFJLFVBQVU7QUFDaEIsY0FBSUEsS0FBSSxJQUFJO0FBQUUsWUFBQUEsS0FBSSxHQUFHLE1BQU0sY0FBYztBQUFBLFVBQUU7QUFDM0MsaUJBQU87QUFBQSxRQUNiO0FBQ0ksZUFBTyxFQUFDLE1BQU0sSUFBSSxNQUFNLElBQUksSUFBSSxJQUFJLE1BQU0sSUFBSSxNQUFNLFFBQVEsSUFBSSxPQUFNO0FBQUEsTUFDMUU7QUFJRSxlQUFTLFdBQVdBLE1BQUssUUFBUSxnQkFBZ0I7QUFDL0MsWUFBSUEsS0FBSSxJQUFJO0FBQ1YsY0FBSSxDQUFDQSxLQUFJLEdBQUcsT0FBTztBQUFFLG1CQUFPLFVBQVVBLEtBQUksSUFBSSxVQUFVLEVBQUVBLE1BQUssUUFBUSxjQUFjO0FBQUEsVUFBQztBQUN0RixjQUFJQSxLQUFJLEdBQUcsTUFBTSxlQUFlO0FBQUU7QUFBQSxVQUFNO0FBQUEsUUFDOUM7QUFFSSxZQUFJLFdBQVdBLE1BQUssY0FBYyxLQUFLQSxLQUFJLE1BQU0sV0FBV0EsS0FBSSxJQUFJLGNBQWMsR0FBRztBQUNuRixtQkFBUyxhQUFhQSxNQUFLLFFBQVEsSUFBSTtBQUN2QyxjQUFJLENBQUMsUUFBUTtBQUFFO0FBQUEsVUFBTTtBQUFBLFFBQzNCO0FBSUksWUFBSSxRQUFRLG9CQUFvQixDQUFDLGtCQUFrQixxQkFBcUJBLE1BQUssT0FBTyxNQUFNLE9BQU8sRUFBRTtBQUNuRyxZQUFJLE9BQU87QUFDVCxtQkFBU0YsS0FBSSxNQUFNLFNBQVMsR0FBR0EsTUFBSyxHQUFHLEVBQUVBLElBQ3ZDO0FBQUUsNEJBQWdCRSxNQUFLLEVBQUMsTUFBTSxNQUFNRixFQUFDLEVBQUUsTUFBTSxJQUFJLE1BQU1BLEVBQUMsRUFBRSxJQUFJLE1BQU1BLEtBQUksQ0FBQyxFQUFFLElBQUksT0FBTyxNQUFNLFFBQVEsT0FBTyxPQUFNLENBQUM7QUFBQSxVQUFFO0FBQUEsUUFDNUgsT0FBVztBQUNMLDBCQUFnQkUsTUFBSyxNQUFNO0FBQUEsUUFDakM7QUFBQSxNQUNBO0FBRUUsZUFBUyxnQkFBZ0JBLE1BQUssUUFBUTtBQUNwQyxZQUFJLE9BQU8sS0FBSyxVQUFVLEtBQUssT0FBTyxLQUFLLENBQUMsS0FBSyxNQUFNLElBQUksT0FBTyxNQUFNLE9BQU8sRUFBRSxLQUFLLEdBQUc7QUFBRTtBQUFBLFFBQU07QUFDakcsWUFBSSxXQUFXLHNCQUFzQkEsTUFBSyxNQUFNO0FBQ2hELDJCQUFtQkEsTUFBSyxRQUFRLFVBQVVBLEtBQUksS0FBS0EsS0FBSSxHQUFHLE1BQU0sS0FBSyxHQUFHO0FBRXhFLDRCQUFvQkEsTUFBSyxRQUFRLFVBQVUsdUJBQXVCQSxNQUFLLE1BQU0sQ0FBQztBQUM5RSxZQUFJLFVBQVUsQ0FBQTtBQUVkLG1CQUFXQSxNQUFLLFNBQVVBLE1BQUssWUFBWTtBQUN6QyxjQUFJLENBQUMsY0FBYyxRQUFRLFNBQVNBLEtBQUksT0FBTyxLQUFLLElBQUk7QUFDdEQsdUJBQVdBLEtBQUksU0FBUyxNQUFNO0FBQzlCLG9CQUFRLEtBQUtBLEtBQUksT0FBTztBQUFBLFVBQ2hDO0FBQ00sOEJBQW9CQSxNQUFLLFFBQVEsTUFBTSx1QkFBdUJBLE1BQUssTUFBTSxDQUFDO0FBQUEsUUFDaEYsQ0FBSztBQUFBLE1BQ0w7QUFHRSxlQUFTLHNCQUFzQkEsTUFBSyxNQUFNLG9CQUFvQjtBQUM1RCxZQUFJLFdBQVdBLEtBQUksTUFBTUEsS0FBSSxHQUFHLE1BQU07QUFDdEMsWUFBSSxZQUFZLENBQUMsb0JBQW9CO0FBQUU7QUFBQSxRQUFNO0FBRTdDLFlBQUksT0FBT0EsS0FBSSxTQUFTLE9BQU8sV0FBV0EsS0FBSTtBQUM5QyxZQUFJLFNBQVMsUUFBUSxTQUFTLEtBQUssT0FBTyxLQUFLLFFBQVEsT0FBTyxRQUFRLFNBQVMsS0FBSyxTQUFTLEtBQUs7QUFJbEcsWUFBSUYsS0FBSTtBQUNSLGVBQU9BLEtBQUksT0FBTyxRQUFRQSxNQUFLO0FBQzdCLGtCQUFRLE9BQU9BLEVBQUM7QUFDaEIsY0FBSSxxQkFBcUIsTUFBTSxVQUFVLENBQUMsTUFBTSxPQUFPRSxLQUFJLEdBQUcsSUFBSSxDQUFDLE1BQU0sUUFDdkU7QUFBRTtBQUFBLFVBQUs7QUFBQSxRQUNmO0FBQ0ksWUFBSUYsTUFBSyxPQUFPLFFBQVE7QUFBRTtBQUFBLFFBQU07QUFDaEMsYUFBSyxhQUFhLEtBQUssZ0JBQWdCO0FBRXZDLG1CQUFTO0FBQ1Asa0JBQVEsT0FBTyxJQUFHO0FBQ2xCLGNBQUksTUFBTSxRQUFRO0FBQ2hCLG1DQUF1QixPQUFPLElBQUk7QUFDbEMsZ0JBQUksc0JBQXNCLENBQUMsTUFBTSxPQUFPRSxLQUFJLEdBQUcsR0FBRztBQUNoRCwyQkFBYUEsTUFBSyxPQUFPLEVBQUMsV0FBVyxNQUFLLENBQUM7QUFDM0M7QUFBQSxZQUNWO0FBQ1EsdUJBQVc7QUFBQSxVQUNuQixXQUFpQixVQUFVO0FBQ25CLG1CQUFPLEtBQUssS0FBSztBQUNqQjtBQUFBLFVBQ1IsT0FBYTtBQUFFO0FBQUEsVUFBSztBQUFBLFFBQ3BCO0FBSUksWUFBSSxjQUFjLENBQUE7QUFDbEIsK0JBQXVCLFVBQVUsSUFBSTtBQUNyQyxhQUFLLEtBQUssRUFBQyxTQUFTLGFBQWEsWUFBWSxLQUFLLFdBQVUsQ0FBQztBQUM3RCxhQUFLLGFBQWEsTUFBTSxjQUFjLEVBQUUsS0FBSztBQUU3QyxZQUFJLFNBQVMsV0FBV0EsTUFBSyxjQUFjLEtBQUtBLEtBQUksTUFBTSxXQUFXQSxLQUFJLElBQUksY0FBYztBQUUzRixZQUFJLE9BQU8sU0FBV0YsSUFBSTtBQUN4QixjQUFJLFNBQVMsTUFBTSxRQUFRQSxFQUFDO0FBQzVCLGlCQUFPLFNBQVM7QUFDaEIsY0FBSSxVQUFVLENBQUMsYUFBYUUsTUFBSyxRQUFRLEtBQUssR0FBRztBQUMvQyxtQkFBTyxTQUFTO0FBQ2hCLG1CQUFPLENBQUE7QUFBQSxVQUNmO0FBRU0sc0JBQVksS0FBSyx3QkFBd0JBLE1BQUssTUFBTSxDQUFDO0FBRXJELGNBQUksUUFBUUYsS0FBSSxzQkFBc0JFLE1BQUssTUFBTSxJQUFJLElBQUksTUFBTTtBQUMvRCw4QkFBb0JBLE1BQUssUUFBUSxPQUFPLGNBQWNBLE1BQUssTUFBTSxDQUFDO0FBQ2xFLGNBQUksQ0FBQ0YsTUFBS0UsS0FBSSxJQUFJO0FBQUUsWUFBQUEsS0FBSSxHQUFHLGVBQWUsRUFBQyxNQUFNLE9BQU8sTUFBTSxJQUFJLFVBQVUsTUFBTSxFQUFDLENBQUM7QUFBQSxVQUFFO0FBQ3RGLGNBQUksVUFBVSxDQUFBO0FBR2QscUJBQVdBLE1BQUssU0FBVUEsTUFBSyxZQUFZO0FBQ3pDLGdCQUFJLENBQUMsY0FBYyxRQUFRLFNBQVNBLEtBQUksT0FBTyxLQUFLLElBQUk7QUFDdEQseUJBQVdBLEtBQUksU0FBUyxNQUFNO0FBQzlCLHNCQUFRLEtBQUtBLEtBQUksT0FBTztBQUFBLFlBQ2xDO0FBQ1EsZ0NBQW9CQSxNQUFLLFFBQVEsTUFBTSxjQUFjQSxNQUFLLE1BQU0sQ0FBQztBQUFBLFVBQ3pFLENBQU87QUFBQSxRQUNQO0FBRUksaUJBQVNHLE9BQU0sTUFBTSxRQUFRLFNBQVMsR0FBR0EsUUFBTyxHQUFHLEVBQUVBLE1BQUs7QUFDeEQsY0FBSSxXQUFXLEtBQU1BLElBQUc7QUFFeEIsY0FBSyxTQUFXLFFBQU8sU0FBUztBQUFBLFFBQ3RDO0FBQUEsTUFDQTtBQUlFLGVBQVMsU0FBU0gsTUFBSyxVQUFVO0FBQy9CLFlBQUksWUFBWSxHQUFHO0FBQUU7QUFBQSxRQUFNO0FBQzNCLFFBQUFBLEtBQUksU0FBUztBQUNiLFFBQUFBLEtBQUksTUFBTSxJQUFJLFVBQVUsSUFBSUEsS0FBSSxJQUFJLFFBQVEsU0FBVU0sUUFBTztBQUFFLGlCQUFPLElBQUk7QUFBQSxZQUN4RSxJQUFJQSxPQUFNLE9BQU8sT0FBTyxVQUFVQSxPQUFNLE9BQU8sRUFBRTtBQUFBLFlBQ2pELElBQUlBLE9BQU0sS0FBSyxPQUFPLFVBQVVBLE9BQU0sS0FBSyxFQUFFO0FBQUE7U0FDM0MsR0FBR04sS0FBSSxJQUFJLFNBQVM7QUFDeEIsWUFBSUEsS0FBSSxJQUFJO0FBQ1Ysb0JBQVVBLEtBQUksSUFBSUEsS0FBSSxPQUFPQSxLQUFJLFFBQVEsVUFBVSxRQUFRO0FBQzNELG1CQUFTLElBQUlBLEtBQUksR0FBRyxTQUFTLElBQUksRUFBRSxVQUFVLElBQUksRUFBRSxRQUFRLEtBQ3pEO0FBQUUsMEJBQWNBLEtBQUksSUFBSSxHQUFHLFFBQVE7QUFBQSxVQUFFO0FBQUEsUUFDN0M7QUFBQSxNQUNBO0FBSUUsZUFBUyxvQkFBb0JBLE1BQUssUUFBUSxVQUFVLE9BQU87QUFDekQsWUFBSUEsS0FBSSxNQUFNLENBQUNBLEtBQUksR0FBRyxPQUNwQjtBQUFFLGlCQUFPLFVBQVVBLEtBQUksSUFBSSxtQkFBbUIsRUFBRUEsTUFBSyxRQUFRLFVBQVUsS0FBSztBQUFBLFFBQUM7QUFFL0UsWUFBSSxPQUFPLEdBQUcsT0FBT0EsS0FBSSxPQUFPO0FBQzlCLG1CQUFTQSxNQUFLLE9BQU8sS0FBSyxTQUFTLEtBQUssT0FBTyxHQUFHLE9BQU8sT0FBTyxLQUFLLEtBQUs7QUFDMUU7QUFBQSxRQUNOO0FBQ0ksWUFBSSxPQUFPLEtBQUssT0FBT0EsS0FBSSxTQUFRLEdBQUk7QUFBRTtBQUFBLFFBQU07QUFHL0MsWUFBSSxPQUFPLEtBQUssT0FBT0EsS0FBSSxPQUFPO0FBQ2hDLGNBQUksUUFBUSxPQUFPLEtBQUssU0FBUyxLQUFLQSxLQUFJLFFBQVEsT0FBTyxLQUFLO0FBQzlELG1CQUFTQSxNQUFLLEtBQUs7QUFDbkIsbUJBQVM7QUFBQSxZQUFDLE1BQU0sSUFBSUEsS0FBSSxPQUFPLENBQUM7QUFBQSxZQUFHLElBQUksSUFBSSxPQUFPLEdBQUcsT0FBTyxPQUFPLE9BQU8sR0FBRyxFQUFFO0FBQUEsWUFDckUsTUFBTSxDQUFDLElBQUksT0FBTyxJQUFJLENBQUM7QUFBQSxZQUFHLFFBQVEsT0FBTztBQUFBLFVBQU07QUFBQSxRQUMvRDtBQUNJLFlBQUksT0FBT0EsS0FBSSxTQUFRO0FBQ3ZCLFlBQUksT0FBTyxHQUFHLE9BQU8sTUFBTTtBQUN6QixtQkFBUztBQUFBLFlBQUMsTUFBTSxPQUFPO0FBQUEsWUFBTSxJQUFJLElBQUksTUFBTSxRQUFRQSxNQUFLLElBQUksRUFBRSxLQUFLLE1BQU07QUFBQSxZQUMvRCxNQUFNLENBQUMsT0FBTyxLQUFLLENBQUMsQ0FBQztBQUFBLFlBQUcsUUFBUSxPQUFPO0FBQUEsVUFBTTtBQUFBLFFBQzdEO0FBRUksZUFBTyxVQUFVLFdBQVdBLE1BQUssT0FBTyxNQUFNLE9BQU8sRUFBRTtBQUV2RCxZQUFJLENBQUMsVUFBVTtBQUFFLHFCQUFXLHNCQUFzQkEsTUFBSyxNQUFNO0FBQUEsUUFBRTtBQUMvRCxZQUFJQSxLQUFJLElBQUk7QUFBRSxzQ0FBNEJBLEtBQUksSUFBSSxRQUFRLEtBQUs7QUFBQSxRQUFFLE9BQzVEO0FBQUUsb0JBQVVBLE1BQUssUUFBUSxLQUFLO0FBQUEsUUFBRTtBQUNyQywyQkFBbUJBLE1BQUssVUFBVSxjQUFjO0FBRWhELFlBQUlBLEtBQUksWUFBWSxXQUFXQSxNQUFLLElBQUlBLEtBQUksYUFBYSxDQUFDLENBQUMsR0FDekQ7QUFBRSxVQUFBQSxLQUFJLFdBQVc7QUFBQSxRQUFNO0FBQUEsTUFDN0I7QUFJRSxlQUFTLDRCQUE0QixJQUFJLFFBQVEsT0FBTztBQUN0RCxZQUFJQSxPQUFNLEdBQUcsS0FBSyxVQUFVLEdBQUcsU0FBUyxPQUFPLE9BQU8sTUFBTSxLQUFLLE9BQU87QUFFeEUsWUFBSSxxQkFBcUIsT0FBTyxrQkFBa0IsS0FBSztBQUN2RCxZQUFJLENBQUMsR0FBRyxRQUFRLGNBQWM7QUFDNUIsNEJBQWtCLE9BQU8sV0FBVyxRQUFRQSxNQUFLLEtBQUssSUFBSSxDQUFDLENBQUM7QUFDNUQsVUFBQUEsS0FBSSxLQUFLLGlCQUFpQixHQUFHLE9BQU8sR0FBRyxTQUFVLE1BQU07QUFDckQsZ0JBQUksUUFBUSxRQUFRLFNBQVM7QUFDM0IsbUNBQXFCO0FBQ3JCLHFCQUFPO0FBQUEsWUFDakI7QUFBQSxVQUNBLENBQU87QUFBQSxRQUNQO0FBRUksWUFBSUEsS0FBSSxJQUFJLFNBQVMsT0FBTyxNQUFNLE9BQU8sRUFBRSxJQUFJLElBQzdDO0FBQUUsK0JBQXFCLEVBQUU7QUFBQSxRQUFFO0FBRTdCLGtCQUFVQSxNQUFLLFFBQVEsT0FBTyxlQUFlLEVBQUUsQ0FBQztBQUVoRCxZQUFJLENBQUMsR0FBRyxRQUFRLGNBQWM7QUFDNUIsVUFBQUEsS0FBSSxLQUFLLGlCQUFpQixLQUFLLE9BQU8sT0FBTyxLQUFLLFFBQVEsU0FBVSxNQUFNO0FBQ3hFLGdCQUFJLE1BQU0sV0FBVyxJQUFJO0FBQ3pCLGdCQUFJLE1BQU0sUUFBUSxlQUFlO0FBQy9CLHNCQUFRLFVBQVU7QUFDbEIsc0JBQVEsZ0JBQWdCO0FBQ3hCLHNCQUFRLGlCQUFpQjtBQUN6QixtQ0FBcUI7QUFBQSxZQUMvQjtBQUFBLFVBQ0EsQ0FBTztBQUNELGNBQUksb0JBQW9CO0FBQUUsZUFBRyxNQUFNLGdCQUFnQjtBQUFBLFVBQUs7QUFBQSxRQUM5RDtBQUVJLHdCQUFnQkEsTUFBSyxLQUFLLElBQUk7QUFDOUIsb0JBQVksSUFBSSxHQUFHO0FBRW5CLFlBQUksVUFBVSxPQUFPLEtBQUssVUFBVSxHQUFHLE9BQU8sS0FBSyxRQUFRO0FBRTNELFlBQUksT0FBTyxNQUNUO0FBQUUsb0JBQVUsRUFBRTtBQUFBLFFBQUUsV0FDVCxLQUFLLFFBQVEsR0FBRyxRQUFRLE9BQU8sS0FBSyxVQUFVLEtBQUssQ0FBQyxrQkFBa0IsR0FBRyxLQUFLLE1BQU0sR0FDM0Y7QUFBRSx3QkFBYyxJQUFJLEtBQUssTUFBTSxNQUFNO0FBQUEsUUFBRSxPQUV2QztBQUFFLG9CQUFVLElBQUksS0FBSyxNQUFNLEdBQUcsT0FBTyxHQUFHLE9BQU87QUFBQSxRQUFFO0FBRW5ELFlBQUksaUJBQWlCLFdBQVcsSUFBSSxTQUFTLEdBQUcsZ0JBQWdCLFdBQVcsSUFBSSxRQUFRO0FBQ3ZGLFlBQUksaUJBQWlCLGdCQUFnQjtBQUNuQyxjQUFJLE1BQU07QUFBQSxZQUNSO0FBQUEsWUFBWTtBQUFBLFlBQ1osTUFBTSxPQUFPO0FBQUEsWUFDYixTQUFTLE9BQU87QUFBQSxZQUNoQixRQUFRLE9BQU87QUFBQTtBQUVqQixjQUFJLGVBQWU7QUFBRSx3QkFBWSxJQUFJLFVBQVUsSUFBSSxHQUFHO0FBQUEsVUFBRTtBQUN4RCxjQUFJLGdCQUFnQjtBQUFFLGFBQUMsR0FBRyxNQUFNLGVBQWUsR0FBRyxNQUFNLGFBQWEsQ0FBQSxJQUFLLEtBQUssR0FBRztBQUFBLFVBQUU7QUFBQSxRQUMxRjtBQUNJLFdBQUcsUUFBUSxvQkFBb0I7QUFBQSxNQUNuQztBQUVFLGVBQVMsYUFBYUEsTUFBSyxNQUFNLE1BQU0sSUFBSSxRQUFRO0FBQ2pELFlBQUk7QUFFSixZQUFJLENBQUMsSUFBSTtBQUFFLGVBQUs7QUFBQSxRQUFLO0FBQ3JCLFlBQUksSUFBSSxJQUFJLElBQUksSUFBSSxHQUFHO0FBQUUsVUFBQyxTQUFTLENBQUMsSUFBSSxJQUFJLEdBQUcsT0FBTyxPQUFPLENBQUMsR0FBRyxLQUFLLE9BQU8sQ0FBQztBQUFBLFFBQUc7QUFDakYsWUFBSSxPQUFPLFFBQVEsVUFBVTtBQUFFLGlCQUFPQSxLQUFJLFdBQVcsSUFBSTtBQUFBLFFBQUU7QUFDM0QsbUJBQVdBLE1BQUssRUFBQyxNQUFZLElBQVEsTUFBTSxNQUFNLE9BQWMsQ0FBQztBQUFBLE1BQ3BFO0FBSUUsZUFBUyxvQkFBb0IsS0FBSyxNQUFNLElBQUksTUFBTTtBQUNoRCxZQUFJLEtBQUssSUFBSSxNQUFNO0FBQ2pCLGNBQUksUUFBUTtBQUFBLFFBQ2xCLFdBQWUsT0FBTyxJQUFJLE1BQU07QUFDMUIsY0FBSSxPQUFPO0FBQ1gsY0FBSSxLQUFLO0FBQUEsUUFDZjtBQUFBLE1BQ0E7QUFTRSxlQUFTLGdCQUFnQixPQUFPLE1BQU0sSUFBSSxNQUFNO0FBQzlDLGlCQUFTRixLQUFJLEdBQUdBLEtBQUksTUFBTSxRQUFRLEVBQUVBLElBQUc7QUFDckMsY0FBSSxNQUFNLE1BQU1BLEVBQUMsR0FBRyxLQUFLO0FBQ3pCLGNBQUksSUFBSSxRQUFRO0FBQ2QsZ0JBQUksQ0FBQyxJQUFJLFFBQVE7QUFBRSxvQkFBTSxNQUFNQSxFQUFDLElBQUksSUFBSSxTQUFRO0FBQUksa0JBQUksU0FBUztBQUFBLFlBQUs7QUFDdEUscUJBQVMsSUFBSSxHQUFHLElBQUksSUFBSSxPQUFPLFFBQVEsS0FBSztBQUMxQyxrQ0FBb0IsSUFBSSxPQUFPLENBQUMsRUFBRSxRQUFRLE1BQU0sSUFBSSxJQUFJO0FBQ3hELGtDQUFvQixJQUFJLE9BQU8sQ0FBQyxFQUFFLE1BQU0sTUFBTSxJQUFJLElBQUk7QUFBQSxZQUNoRTtBQUNRO0FBQUEsVUFDUjtBQUNNLG1CQUFTLE1BQU0sR0FBRyxNQUFNLElBQUksUUFBUSxRQUFRLEVBQUUsS0FBSztBQUNqRCxnQkFBSSxNQUFNLElBQUksUUFBUSxHQUFHO0FBQ3pCLGdCQUFJLEtBQUssSUFBSSxLQUFLLE1BQU07QUFDdEIsa0JBQUksT0FBTyxJQUFJLElBQUksS0FBSyxPQUFPLE1BQU0sSUFBSSxLQUFLLEVBQUU7QUFDaEQsa0JBQUksS0FBSyxJQUFJLElBQUksR0FBRyxPQUFPLE1BQU0sSUFBSSxHQUFHLEVBQUU7QUFBQSxZQUNwRCxXQUFtQixRQUFRLElBQUksR0FBRyxNQUFNO0FBQzlCLG1CQUFLO0FBQ0w7QUFBQSxZQUNWO0FBQUEsVUFDQTtBQUNNLGNBQUksQ0FBQyxJQUFJO0FBQ1Asa0JBQU0sT0FBTyxHQUFHQSxLQUFJLENBQUM7QUFDckIsWUFBQUEsS0FBSTtBQUFBLFVBQ1o7QUFBQSxRQUNBO0FBQUEsTUFDQTtBQUVFLGVBQVMsV0FBVyxNQUFNLFFBQVE7QUFDaEMsWUFBSSxPQUFPLE9BQU8sS0FBSyxNQUFNLEtBQUssT0FBTyxHQUFHLE1BQU0sT0FBTyxPQUFPLEtBQUssVUFBVSxLQUFLLFFBQVE7QUFDNUYsd0JBQWdCLEtBQUssTUFBTSxNQUFNLElBQUksSUFBSTtBQUN6Qyx3QkFBZ0IsS0FBSyxRQUFRLE1BQU0sSUFBSSxJQUFJO0FBQUEsTUFDL0M7QUFLRSxlQUFTLFdBQVdFLE1BQUssUUFBUSxZQUFZLElBQUk7QUFDL0MsWUFBSSxLQUFLLFFBQVEsT0FBTztBQUN4QixZQUFJLE9BQU8sVUFBVSxVQUFVO0FBQUUsaUJBQU8sUUFBUUEsTUFBSyxTQUFTQSxNQUFLLE1BQU0sQ0FBQztBQUFBLFFBQUUsT0FDdkU7QUFBRSxlQUFLLE9BQU8sTUFBTTtBQUFBLFFBQUU7QUFDM0IsWUFBSSxNQUFNLE1BQU07QUFBRSxpQkFBTztBQUFBLFFBQUk7QUFDN0IsWUFBSSxHQUFHLE1BQU0sRUFBRSxLQUFLQSxLQUFJLElBQUk7QUFBRSx3QkFBY0EsS0FBSSxJQUFJLElBQUksVUFBVTtBQUFBLFFBQUU7QUFDcEUsZUFBTztBQUFBLE1BQ1g7QUFlRSxlQUFTLFVBQVUsT0FBTztBQUN4QixhQUFLLFFBQVE7QUFDYixhQUFLLFNBQVM7QUFDZCxZQUFJLFNBQVM7QUFDYixpQkFBU0YsS0FBSSxHQUFHQSxLQUFJLE1BQU0sUUFBUSxFQUFFQSxJQUFHO0FBQ3JDLGdCQUFNQSxFQUFDLEVBQUUsU0FBUztBQUNsQixvQkFBVSxNQUFNQSxFQUFDLEVBQUU7QUFBQSxRQUN6QjtBQUNJLGFBQUssU0FBUztBQUFBLE1BQ2xCO0FBRUUsZ0JBQVUsWUFBWTtBQUFBLFFBQ3BCLFdBQVcsV0FBVztBQUFFLGlCQUFPLEtBQUssTUFBTTtBQUFBLFFBQU07QUFBQTtBQUFBLFFBR2hELGFBQWEsU0FBUyxJQUFJLEdBQUc7QUFDM0IsbUJBQVNBLEtBQUksSUFBSSxJQUFJLEtBQUssR0FBR0EsS0FBSSxHQUFHLEVBQUVBLElBQUc7QUFDdkMsZ0JBQUksT0FBTyxLQUFLLE1BQU1BLEVBQUM7QUFDdkIsaUJBQUssVUFBVSxLQUFLO0FBQ3BCLHdCQUFZLElBQUk7QUFDaEIsd0JBQVksTUFBTSxRQUFRO0FBQUEsVUFDbEM7QUFDTSxlQUFLLE1BQU0sT0FBTyxJQUFJLENBQUM7QUFBQSxRQUM3QjtBQUFBO0FBQUEsUUFHSSxVQUFVLFNBQVMsT0FBTztBQUN4QixnQkFBTSxLQUFLLE1BQU0sT0FBTyxLQUFLLEtBQUs7QUFBQSxRQUN4QztBQUFBO0FBQUE7QUFBQSxRQUlJLGFBQWEsU0FBUyxJQUFJLE9BQU8sUUFBUTtBQUN2QyxlQUFLLFVBQVU7QUFDZixlQUFLLFFBQVEsS0FBSyxNQUFNLE1BQU0sR0FBRyxFQUFFLEVBQUUsT0FBTyxLQUFLLEVBQUUsT0FBTyxLQUFLLE1BQU0sTUFBTSxFQUFFLENBQUM7QUFDOUUsbUJBQVNBLEtBQUksR0FBR0EsS0FBSSxNQUFNLFFBQVEsRUFBRUEsSUFBRztBQUFFLGtCQUFNQSxFQUFDLEVBQUUsU0FBUztBQUFBLFVBQUs7QUFBQSxRQUN0RTtBQUFBO0FBQUEsUUFHSSxPQUFPLFNBQVMsSUFBSSxHQUFHLElBQUk7QUFDekIsbUJBQVMsSUFBSSxLQUFLLEdBQUcsS0FBSyxHQUFHLEVBQUUsSUFDN0I7QUFBRSxnQkFBSSxHQUFHLEtBQUssTUFBTSxFQUFFLENBQUMsR0FBRztBQUFFLHFCQUFPO0FBQUEsWUFBSTtBQUFBLFVBQUU7QUFBQSxRQUNqRDtBQUFBO0FBR0UsZUFBUyxZQUFZLFVBQVU7QUFDN0IsYUFBSyxXQUFXO0FBQ2hCLFlBQUksT0FBTyxHQUFHLFNBQVM7QUFDdkIsaUJBQVNBLEtBQUksR0FBR0EsS0FBSSxTQUFTLFFBQVEsRUFBRUEsSUFBRztBQUN4QyxjQUFJLEtBQUssU0FBU0EsRUFBQztBQUNuQixrQkFBUSxHQUFHLFVBQVM7QUFBSSxvQkFBVSxHQUFHO0FBQ3JDLGFBQUcsU0FBUztBQUFBLFFBQ2xCO0FBQ0ksYUFBSyxPQUFPO0FBQ1osYUFBSyxTQUFTO0FBQ2QsYUFBSyxTQUFTO0FBQUEsTUFDbEI7QUFFRSxrQkFBWSxZQUFZO0FBQUEsUUFDdEIsV0FBVyxXQUFXO0FBQUUsaUJBQU8sS0FBSztBQUFBLFFBQUk7QUFBQSxRQUV4QyxhQUFhLFNBQVMsSUFBSSxHQUFHO0FBQzNCLGVBQUssUUFBUTtBQUNiLG1CQUFTQSxLQUFJLEdBQUdBLEtBQUksS0FBSyxTQUFTLFFBQVEsRUFBRUEsSUFBRztBQUM3QyxnQkFBSSxRQUFRLEtBQUssU0FBU0EsRUFBQyxHQUFHLEtBQUssTUFBTSxVQUFTO0FBQ2xELGdCQUFJLEtBQUssSUFBSTtBQUNYLGtCQUFJLEtBQUssS0FBSyxJQUFJLEdBQUcsS0FBSyxFQUFFLEdBQUcsWUFBWSxNQUFNO0FBQ2pELG9CQUFNLFlBQVksSUFBSSxFQUFFO0FBQ3hCLG1CQUFLLFVBQVUsWUFBWSxNQUFNO0FBQ2pDLGtCQUFJLE1BQU0sSUFBSTtBQUFFLHFCQUFLLFNBQVMsT0FBT0EsTUFBSyxDQUFDO0FBQUcsc0JBQU0sU0FBUztBQUFBLGNBQUs7QUFDbEUsbUJBQUssS0FBSyxPQUFPLEdBQUc7QUFBRTtBQUFBLGNBQUs7QUFDM0IsbUJBQUs7QUFBQSxZQUNmLE9BQWU7QUFBRSxvQkFBTTtBQUFBLFlBQUc7QUFBQSxVQUMxQjtBQUdNLGNBQUksS0FBSyxPQUFPLElBQUksT0FDZixLQUFLLFNBQVMsU0FBUyxLQUFLLEVBQUUsS0FBSyxTQUFTLENBQUMsYUFBYSxhQUFhO0FBQzFFLGdCQUFJLFFBQVEsQ0FBQTtBQUNaLGlCQUFLLFNBQVMsS0FBSztBQUNuQixpQkFBSyxXQUFXLENBQUMsSUFBSSxVQUFVLEtBQUssQ0FBQztBQUNyQyxpQkFBSyxTQUFTLENBQUMsRUFBRSxTQUFTO0FBQUEsVUFDbEM7QUFBQSxRQUNBO0FBQUEsUUFFSSxVQUFVLFNBQVMsT0FBTztBQUN4QixtQkFBU0EsS0FBSSxHQUFHQSxLQUFJLEtBQUssU0FBUyxRQUFRLEVBQUVBLElBQUc7QUFBRSxpQkFBSyxTQUFTQSxFQUFDLEVBQUUsU0FBUyxLQUFLO0FBQUEsVUFBRTtBQUFBLFFBQ3hGO0FBQUEsUUFFSSxhQUFhLFNBQVMsSUFBSSxPQUFPLFFBQVE7QUFDdkMsZUFBSyxRQUFRLE1BQU07QUFDbkIsZUFBSyxVQUFVO0FBQ2YsbUJBQVNBLEtBQUksR0FBR0EsS0FBSSxLQUFLLFNBQVMsUUFBUSxFQUFFQSxJQUFHO0FBQzdDLGdCQUFJLFFBQVEsS0FBSyxTQUFTQSxFQUFDLEdBQUcsS0FBSyxNQUFNLFVBQVM7QUFDbEQsZ0JBQUksTUFBTSxJQUFJO0FBQ1osb0JBQU0sWUFBWSxJQUFJLE9BQU8sTUFBTTtBQUNuQyxrQkFBSSxNQUFNLFNBQVMsTUFBTSxNQUFNLFNBQVMsSUFBSTtBQUcxQyxvQkFBSSxZQUFZLE1BQU0sTUFBTSxTQUFTLEtBQUs7QUFDMUMseUJBQVMsTUFBTSxXQUFXLE1BQU0sTUFBTSxNQUFNLFVBQVM7QUFDbkQsc0JBQUksT0FBTyxJQUFJLFVBQVUsTUFBTSxNQUFNLE1BQU0sS0FBSyxPQUFPLEVBQUUsQ0FBQztBQUMxRCx3QkFBTSxVQUFVLEtBQUs7QUFDckIsdUJBQUssU0FBUyxPQUFPLEVBQUVBLElBQUcsR0FBRyxJQUFJO0FBQ2pDLHVCQUFLLFNBQVM7QUFBQSxnQkFDNUI7QUFDWSxzQkFBTSxRQUFRLE1BQU0sTUFBTSxNQUFNLEdBQUcsU0FBUztBQUM1QyxxQkFBSyxXQUFVO0FBQUEsY0FDM0I7QUFDVTtBQUFBLFlBQ1Y7QUFDUSxrQkFBTTtBQUFBLFVBQ2Q7QUFBQSxRQUNBO0FBQUE7QUFBQSxRQUdJLFlBQVksV0FBVztBQUNyQixjQUFJLEtBQUssU0FBUyxVQUFVLElBQUk7QUFBRTtBQUFBLFVBQU07QUFDeEMsY0FBSSxLQUFLO0FBQ1QsYUFBRztBQUNELGdCQUFJLFVBQVUsR0FBRyxTQUFTLE9BQU8sR0FBRyxTQUFTLFNBQVMsR0FBRyxDQUFDO0FBQzFELGdCQUFJLFVBQVUsSUFBSSxZQUFZLE9BQU87QUFDckMsZ0JBQUksQ0FBQyxHQUFHLFFBQVE7QUFDZCxrQkFBSSxPQUFPLElBQUksWUFBWSxHQUFHLFFBQVE7QUFDdEMsbUJBQUssU0FBUztBQUNkLGlCQUFHLFdBQVcsQ0FBQyxNQUFNLE9BQU87QUFDNUIsbUJBQUs7QUFBQSxZQUNmLE9BQWM7QUFDSixpQkFBRyxRQUFRLFFBQVE7QUFDbkIsaUJBQUcsVUFBVSxRQUFRO0FBQ3JCLGtCQUFJLFVBQVUsUUFBUSxHQUFHLE9BQU8sVUFBVSxFQUFFO0FBQzVDLGlCQUFHLE9BQU8sU0FBUyxPQUFPLFVBQVUsR0FBRyxHQUFHLE9BQU87QUFBQSxZQUMzRDtBQUNRLG9CQUFRLFNBQVMsR0FBRztBQUFBLFVBQzVCLFNBQWUsR0FBRyxTQUFTLFNBQVM7QUFDOUIsYUFBRyxPQUFPLFdBQVU7QUFBQSxRQUMxQjtBQUFBLFFBRUksT0FBTyxTQUFTLElBQUksR0FBRyxJQUFJO0FBQ3pCLG1CQUFTQSxLQUFJLEdBQUdBLEtBQUksS0FBSyxTQUFTLFFBQVEsRUFBRUEsSUFBRztBQUM3QyxnQkFBSSxRQUFRLEtBQUssU0FBU0EsRUFBQyxHQUFHLEtBQUssTUFBTSxVQUFTO0FBQ2xELGdCQUFJLEtBQUssSUFBSTtBQUNYLGtCQUFJLE9BQU8sS0FBSyxJQUFJLEdBQUcsS0FBSyxFQUFFO0FBQzlCLGtCQUFJLE1BQU0sTUFBTSxJQUFJLE1BQU0sRUFBRSxHQUFHO0FBQUUsdUJBQU87QUFBQSxjQUFJO0FBQzVDLG1CQUFLLEtBQUssU0FBUyxHQUFHO0FBQUU7QUFBQSxjQUFLO0FBQzdCLG1CQUFLO0FBQUEsWUFDZixPQUFlO0FBQUUsb0JBQU07QUFBQSxZQUFHO0FBQUEsVUFDMUI7QUFBQSxRQUNBO0FBQUE7QUFLRSxVQUFJLGFBQWEsU0FBU0UsTUFBSyxNQUFNLFNBQVM7QUFDNUMsWUFBSSxTQUFTO0FBQUUsbUJBQVMsT0FBTyxTQUFTO0FBQUUsZ0JBQUksUUFBUSxlQUFlLEdBQUcsR0FDdEU7QUFBRSxtQkFBSyxHQUFHLElBQUksUUFBUSxHQUFHO0FBQUEsWUFBRTtBQUFBLFVBQUU7QUFBQSxRQUFFO0FBQ2pDLGFBQUssTUFBTUE7QUFDWCxhQUFLLE9BQU87QUFBQSxNQUNoQjtBQUVFLGlCQUFXLFVBQVUsUUFBUSxXQUFZO0FBQ3ZDLFlBQUksS0FBSyxLQUFLLElBQUksSUFBSSxLQUFLLEtBQUssS0FBSyxTQUFTLE9BQU8sS0FBSyxNQUFNLEtBQUssT0FBTyxJQUFJO0FBQ2hGLFlBQUksTUFBTSxRQUFRLENBQUMsSUFBSTtBQUFFO0FBQUEsUUFBTTtBQUMvQixpQkFBU0YsS0FBSSxHQUFHQSxLQUFJLEdBQUcsUUFBUSxFQUFFQSxJQUFHO0FBQUUsY0FBSSxHQUFHQSxFQUFDLEtBQUssTUFBTTtBQUFFLGVBQUcsT0FBT0EsTUFBSyxDQUFDO0FBQUEsVUFBRTtBQUFBLFFBQUU7QUFDL0UsWUFBSSxDQUFDLEdBQUcsUUFBUTtBQUFFLGVBQUssVUFBVTtBQUFBLFFBQUs7QUFDdEMsWUFBSSxTQUFTLGFBQWEsSUFBSTtBQUM5Qix5QkFBaUIsTUFBTSxLQUFLLElBQUksR0FBRyxLQUFLLFNBQVMsTUFBTSxDQUFDO0FBQ3hELFlBQUksSUFBSTtBQUNOLGtCQUFRLElBQUksV0FBWTtBQUN0Qix5Q0FBNkIsSUFBSSxNQUFNLENBQUMsTUFBTTtBQUM5QywwQkFBYyxJQUFJLElBQUksUUFBUTtBQUFBLFVBQ3RDLENBQU87QUFDRCxzQkFBWSxJQUFJLHFCQUFxQixJQUFJLE1BQU0sRUFBRTtBQUFBLFFBQ3ZEO0FBQUEsTUFDQTtBQUVFLGlCQUFXLFVBQVUsVUFBVSxXQUFZO0FBQ3ZDLFlBQUlxQixXQUFTO0FBRWYsWUFBSSxPQUFPLEtBQUssUUFBUSxLQUFLLEtBQUssSUFBSSxJQUFJLE9BQU8sS0FBSztBQUN0RCxhQUFLLFNBQVM7QUFDZCxZQUFJLE9BQU8sYUFBYSxJQUFJLElBQUk7QUFDaEMsWUFBSSxDQUFDLE1BQU07QUFBRTtBQUFBLFFBQU07QUFDbkIsWUFBSSxDQUFDLGFBQWEsS0FBSyxLQUFLLElBQUksR0FBRztBQUFFLDJCQUFpQixNQUFNLEtBQUssU0FBUyxJQUFJO0FBQUEsUUFBRTtBQUNoRixZQUFJLElBQUk7QUFDTixrQkFBUSxJQUFJLFdBQVk7QUFDdEIsZUFBRyxNQUFNLGNBQWM7QUFDdkIseUNBQTZCLElBQUksTUFBTSxJQUFJO0FBQzNDLHdCQUFZLElBQUkscUJBQXFCLElBQUlBLFVBQVEsT0FBTyxJQUFJLENBQUM7QUFBQSxVQUNyRSxDQUFPO0FBQUEsUUFDUDtBQUFBLE1BQ0E7QUFDRSxpQkFBVyxVQUFVO0FBRXJCLGVBQVMsNkJBQTZCLElBQUksTUFBTSxNQUFNO0FBQ3BELFlBQUksYUFBYSxJQUFJLEtBQU0sR0FBRyxTQUFTLEdBQUcsTUFBTSxhQUFjLEdBQUcsSUFBSSxZQUNuRTtBQUFFLHlCQUFlLElBQUksSUFBSTtBQUFBLFFBQUU7QUFBQSxNQUNqQztBQUVFLGVBQVMsY0FBY25CLE1BQUssUUFBUSxNQUFNLFNBQVM7QUFDakQsWUFBSSxTQUFTLElBQUksV0FBV0EsTUFBSyxNQUFNLE9BQU87QUFDOUMsWUFBSSxLQUFLQSxLQUFJO0FBQ2IsWUFBSSxNQUFNLE9BQU8sV0FBVztBQUFFLGFBQUcsUUFBUSxlQUFlO0FBQUEsUUFBSztBQUM3RCxtQkFBV0EsTUFBSyxRQUFRLFVBQVUsU0FBVSxNQUFNO0FBQ2hELGNBQUksVUFBVSxLQUFLLFlBQVksS0FBSyxVQUFVLENBQUE7QUFDOUMsY0FBSSxPQUFPLFlBQVksTUFBTTtBQUFFLG9CQUFRLEtBQUssTUFBTTtBQUFBLFVBQUUsT0FDL0M7QUFBRSxvQkFBUSxPQUFPLEtBQUssSUFBSSxRQUFRLFFBQVEsS0FBSyxJQUFJLEdBQUcsT0FBTyxRQUFRLENBQUMsR0FBRyxHQUFHLE1BQU07QUFBQSxVQUFFO0FBQ3pGLGlCQUFPLE9BQU87QUFDZCxjQUFJLE1BQU0sQ0FBQyxhQUFhQSxNQUFLLElBQUksR0FBRztBQUNsQyxnQkFBSSxlQUFlLGFBQWEsSUFBSSxJQUFJQSxLQUFJO0FBQzVDLDZCQUFpQixNQUFNLEtBQUssU0FBUyxhQUFhLE1BQU0sQ0FBQztBQUN6RCxnQkFBSSxjQUFjO0FBQUUsNkJBQWUsSUFBSSxPQUFPLE1BQU07QUFBQSxZQUFFO0FBQ3RELGVBQUcsTUFBTSxjQUFjO0FBQUEsVUFDL0I7QUFDTSxpQkFBTztBQUFBLFFBQ2IsQ0FBSztBQUNELFlBQUksSUFBSTtBQUFFLHNCQUFZLElBQUksbUJBQW1CLElBQUksUUFBUSxPQUFPLFVBQVUsV0FBVyxTQUFTLE9BQU8sTUFBTSxDQUFDO0FBQUEsUUFBRTtBQUM5RyxlQUFPO0FBQUEsTUFDWDtBQWlCRSxVQUFJLGVBQWU7QUFFbkIsVUFBSSxhQUFhLFNBQVNBLE1BQUssTUFBTTtBQUNuQyxhQUFLLFFBQVEsQ0FBQTtBQUNiLGFBQUssT0FBTztBQUNaLGFBQUssTUFBTUE7QUFDWCxhQUFLLEtBQUssRUFBRTtBQUFBLE1BQ2hCO0FBR0UsaUJBQVcsVUFBVSxRQUFRLFdBQVk7QUFDdkMsWUFBSSxLQUFLLG1CQUFtQjtBQUFFO0FBQUEsUUFBTTtBQUNwQyxZQUFJLEtBQUssS0FBSyxJQUFJLElBQUksU0FBUyxNQUFNLENBQUMsR0FBRztBQUN6QyxZQUFJLFFBQVE7QUFBRSx5QkFBZSxFQUFFO0FBQUEsUUFBRTtBQUNqQyxZQUFJLFdBQVcsTUFBTSxPQUFPLEdBQUc7QUFDN0IsY0FBSSxRQUFRLEtBQUssS0FBSTtBQUNyQixjQUFJLE9BQU87QUFBRSx3QkFBWSxNQUFNLFNBQVMsTUFBTSxNQUFNLE1BQU0sRUFBRTtBQUFBLFVBQUU7QUFBQSxRQUNwRTtBQUNJLFlBQUksTUFBTSxNQUFNLE1BQU07QUFDdEIsaUJBQVNGLEtBQUksR0FBR0EsS0FBSSxLQUFLLE1BQU0sUUFBUSxFQUFFQSxJQUFHO0FBQzFDLGNBQUksT0FBTyxLQUFLLE1BQU1BLEVBQUM7QUFDdkIsY0FBSSxPQUFPLGlCQUFpQixLQUFLLGFBQWEsSUFBSTtBQUNsRCxjQUFJLE1BQU0sQ0FBQyxLQUFLLFdBQVc7QUFBRSwwQkFBYyxJQUFJLE9BQU8sSUFBSSxHQUFHLE1BQU07QUFBQSxVQUFFLFdBQzVELElBQUk7QUFDWCxnQkFBSSxLQUFLLE1BQU0sTUFBTTtBQUFFLG9CQUFNLE9BQU8sSUFBSTtBQUFBLFlBQUU7QUFDMUMsZ0JBQUksS0FBSyxRQUFRLE1BQU07QUFBRSxvQkFBTSxPQUFPLElBQUk7QUFBQSxZQUFFO0FBQUEsVUFDcEQ7QUFDTSxlQUFLLGNBQWMsaUJBQWlCLEtBQUssYUFBYSxJQUFJO0FBQzFELGNBQUksS0FBSyxRQUFRLFFBQVEsS0FBSyxhQUFhLENBQUMsYUFBYSxLQUFLLEtBQUssSUFBSSxLQUFLLElBQzFFO0FBQUUsNkJBQWlCLE1BQU0sV0FBVyxHQUFHLE9BQU8sQ0FBQztBQUFBLFVBQUU7QUFBQSxRQUN6RDtBQUNJLFlBQUksTUFBTSxLQUFLLGFBQWEsQ0FBQyxHQUFHLFFBQVEsY0FBYztBQUFFLG1CQUFTSyxPQUFNLEdBQUdBLE9BQU0sS0FBSyxNQUFNLFFBQVEsRUFBRUEsTUFBSztBQUN4RyxnQkFBSSxTQUFTLFdBQVcsS0FBSyxNQUFNQSxJQUFHLENBQUMsR0FBRyxNQUFNLFdBQVcsTUFBTTtBQUNqRSxnQkFBSSxNQUFNLEdBQUcsUUFBUSxlQUFlO0FBQ2xDLGlCQUFHLFFBQVEsVUFBVTtBQUNyQixpQkFBRyxRQUFRLGdCQUFnQjtBQUMzQixpQkFBRyxRQUFRLGlCQUFpQjtBQUFBLFlBQ3BDO0FBQUEsVUFDQTtBQUFBLFFBQUs7QUFFRCxZQUFJLE9BQU8sUUFBUSxNQUFNLEtBQUssV0FBVztBQUFFLG9CQUFVLElBQUksS0FBSyxNQUFNLENBQUM7QUFBQSxRQUFFO0FBQ3ZFLGFBQUssTUFBTSxTQUFTO0FBQ3BCLGFBQUssb0JBQW9CO0FBQ3pCLFlBQUksS0FBSyxVQUFVLEtBQUssSUFBSSxVQUFVO0FBQ3BDLGVBQUssSUFBSSxXQUFXO0FBQ3BCLGNBQUksSUFBSTtBQUFFLDZCQUFpQixHQUFHLEdBQUc7QUFBQSxVQUFFO0FBQUEsUUFDekM7QUFDSSxZQUFJLElBQUk7QUFBRSxzQkFBWSxJQUFJLGlCQUFpQixJQUFJLE1BQU0sS0FBSyxHQUFHO0FBQUEsUUFBRTtBQUMvRCxZQUFJLFFBQVE7QUFBRSx1QkFBYSxFQUFFO0FBQUEsUUFBRTtBQUMvQixZQUFJLEtBQUssUUFBUTtBQUFFLGVBQUssT0FBTyxNQUFLO0FBQUEsUUFBRztBQUFBLE1BQzNDO0FBT0UsaUJBQVcsVUFBVSxPQUFPLFNBQVUsTUFBTSxTQUFTO0FBQ25ELFlBQUksUUFBUSxRQUFRLEtBQUssUUFBUSxZQUFZO0FBQUUsaUJBQU87QUFBQSxRQUFFO0FBQ3hELFlBQUksTUFBTTtBQUNWLGlCQUFTTCxLQUFJLEdBQUdBLEtBQUksS0FBSyxNQUFNLFFBQVEsRUFBRUEsSUFBRztBQUMxQyxjQUFJLE9BQU8sS0FBSyxNQUFNQSxFQUFDO0FBQ3ZCLGNBQUksT0FBTyxpQkFBaUIsS0FBSyxhQUFhLElBQUk7QUFDbEQsY0FBSSxLQUFLLFFBQVEsTUFBTTtBQUNyQixtQkFBTyxJQUFJLFVBQVUsT0FBTyxPQUFPLElBQUksR0FBRyxLQUFLLElBQUk7QUFDbkQsZ0JBQUksUUFBUSxJQUFJO0FBQUUscUJBQU87QUFBQSxZQUFJO0FBQUEsVUFDckM7QUFDTSxjQUFJLEtBQUssTUFBTSxNQUFNO0FBQ25CLGlCQUFLLElBQUksVUFBVSxPQUFPLE9BQU8sSUFBSSxHQUFHLEtBQUssRUFBRTtBQUMvQyxnQkFBSSxRQUFRLEdBQUc7QUFBRSxxQkFBTztBQUFBLFlBQUU7QUFBQSxVQUNsQztBQUFBLFFBQ0E7QUFDSSxlQUFPLFFBQVEsRUFBQyxNQUFZLEdBQU07QUFBQSxNQUN0QztBQUlFLGlCQUFXLFVBQVUsVUFBVSxXQUFZO0FBQ3ZDLFlBQUlxQixXQUFTO0FBRWYsWUFBSSxNQUFNLEtBQUssS0FBSyxJQUFJLElBQUksR0FBRyxTQUFTLE1BQU0sS0FBSyxLQUFLLElBQUk7QUFDNUQsWUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJO0FBQUU7QUFBQSxRQUFNO0FBQ3pCLGdCQUFRLElBQUksV0FBWTtBQUN0QixjQUFJLE9BQU8sSUFBSSxNQUFNLFFBQVEsT0FBTyxJQUFJLElBQUk7QUFDNUMsY0FBSSxPQUFPLGdCQUFnQixJQUFJLEtBQUs7QUFDcEMsY0FBSSxNQUFNO0FBQ1IseUNBQTZCLElBQUk7QUFDakMsZUFBRyxNQUFNLG1CQUFtQixHQUFHLE1BQU0sY0FBYztBQUFBLFVBQzNEO0FBQ00sYUFBRyxNQUFNLGdCQUFnQjtBQUN6QixjQUFJLENBQUMsYUFBYSxPQUFPLEtBQUssSUFBSSxLQUFLLE9BQU8sVUFBVSxNQUFNO0FBQzVELGdCQUFJLFlBQVksT0FBTztBQUN2QixtQkFBTyxTQUFTO0FBQ2hCLGdCQUFJLFVBQVUsYUFBYSxNQUFNLElBQUk7QUFDckMsZ0JBQUksU0FDRjtBQUFFLCtCQUFpQixNQUFNLEtBQUssU0FBUyxPQUFPO0FBQUEsWUFBRTtBQUFBLFVBQzFEO0FBQ00sc0JBQVksSUFBSSxpQkFBaUIsSUFBSUEsUUFBTTtBQUFBLFFBQ2pELENBQUs7QUFBQSxNQUNMO0FBRUUsaUJBQVcsVUFBVSxhQUFhLFNBQVUsTUFBTTtBQUNoRCxZQUFJLENBQUMsS0FBSyxNQUFNLFVBQVUsS0FBSyxJQUFJLElBQUk7QUFDckMsY0FBSSxLQUFLLEtBQUssSUFBSSxHQUFHO0FBQ3JCLGNBQUksQ0FBQyxHQUFHLHNCQUFzQixRQUFRLEdBQUcsb0JBQW9CLElBQUksS0FBSyxJQUNwRTtBQUFFLGFBQUMsR0FBRyx5QkFBeUIsR0FBRyx1QkFBdUIsQ0FBQSxJQUFLLEtBQUssSUFBSTtBQUFBLFVBQUU7QUFBQSxRQUNqRjtBQUNJLGFBQUssTUFBTSxLQUFLLElBQUk7QUFBQSxNQUN4QjtBQUVFLGlCQUFXLFVBQVUsYUFBYSxTQUFVLE1BQU07QUFDaEQsYUFBSyxNQUFNLE9BQU8sUUFBUSxLQUFLLE9BQU8sSUFBSSxHQUFHLENBQUM7QUFDOUMsWUFBSSxDQUFDLEtBQUssTUFBTSxVQUFVLEtBQUssSUFBSSxJQUFJO0FBQ3JDLGNBQUksS0FBSyxLQUFLLElBQUksR0FBRztBQUNwQixXQUFDLEdBQUcsdUJBQXVCLEdBQUcscUJBQXFCLEtBQUssS0FBSyxJQUFJO0FBQUEsUUFDeEU7QUFBQSxNQUNBO0FBQ0UsaUJBQVcsVUFBVTtBQUdyQixlQUFTLFNBQVNuQixNQUFLLE1BQU0sSUFBSSxTQUFTLE1BQU07QUFJOUMsWUFBSSxXQUFXLFFBQVEsUUFBUTtBQUFFLGlCQUFPLGVBQWVBLE1BQUssTUFBTSxJQUFJLFNBQVMsSUFBSTtBQUFBLFFBQUM7QUFFcEYsWUFBSUEsS0FBSSxNQUFNLENBQUNBLEtBQUksR0FBRyxPQUFPO0FBQUUsaUJBQU8sVUFBVUEsS0FBSSxJQUFJLFFBQVEsRUFBRUEsTUFBSyxNQUFNLElBQUksU0FBUyxJQUFJO0FBQUEsUUFBQztBQUUvRixZQUFJLFNBQVMsSUFBSSxXQUFXQSxNQUFLLElBQUksR0FBRyxPQUFPLElBQUksTUFBTSxFQUFFO0FBQzNELFlBQUksU0FBUztBQUFFLGtCQUFRLFNBQVMsUUFBUSxLQUFLO0FBQUEsUUFBRTtBQUUvQyxZQUFJLE9BQU8sS0FBSyxRQUFRLEtBQUssT0FBTyxtQkFBbUIsT0FDckQ7QUFBRSxpQkFBTztBQUFBLFFBQU07QUFDakIsWUFBSSxPQUFPLGNBQWM7QUFFdkIsaUJBQU8sWUFBWTtBQUNuQixpQkFBTyxhQUFhLEtBQUssUUFBUSxDQUFDLE9BQU8sWUFBWSxHQUFHLG1CQUFtQjtBQUMzRSxjQUFJLENBQUMsUUFBUSxtQkFBbUI7QUFBRSxtQkFBTyxXQUFXLGFBQWEsb0JBQW9CLE1BQU07QUFBQSxVQUFFO0FBQzdGLGNBQUksUUFBUSxZQUFZO0FBQUUsbUJBQU8sV0FBVyxhQUFhO0FBQUEsVUFBSztBQUFBLFFBQ3BFO0FBQ0ksWUFBSSxPQUFPLFdBQVc7QUFDcEIsY0FBSSwwQkFBMEJBLE1BQUssS0FBSyxNQUFNLE1BQU0sSUFBSSxNQUFNLEtBQzFELEtBQUssUUFBUSxHQUFHLFFBQVEsMEJBQTBCQSxNQUFLLEdBQUcsTUFBTSxNQUFNLElBQUksTUFBTSxHQUNsRjtBQUFFLGtCQUFNLElBQUksTUFBTSxrRUFBa0U7QUFBQSxVQUFDO0FBQ3ZGLDRCQUFpQjtBQUFBLFFBQ3ZCO0FBRUksWUFBSSxPQUFPLGNBQ1Q7QUFBRSw2QkFBbUJBLE1BQUssRUFBQyxNQUFZLElBQVEsUUFBUSxXQUFVLEdBQUdBLEtBQUksS0FBSyxHQUFHO0FBQUEsUUFBRTtBQUVwRixZQUFJLFVBQVUsS0FBSyxNQUFNLEtBQUtBLEtBQUksSUFBSTtBQUN0QyxRQUFBQSxLQUFJLEtBQUssU0FBUyxHQUFHLE9BQU8sR0FBRyxTQUFVLE1BQU07QUFDN0MsY0FBSSxNQUFNLE9BQU8sYUFBYSxDQUFDLEdBQUcsUUFBUSxnQkFBZ0IsV0FBVyxJQUFJLEtBQUssR0FBRyxRQUFRLFNBQ3ZGO0FBQUUsNEJBQWdCO0FBQUEsVUFBSztBQUN6QixjQUFJLE9BQU8sYUFBYSxXQUFXLEtBQUssTUFBTTtBQUFFLDZCQUFpQixNQUFNLENBQUM7QUFBQSxVQUFFO0FBQzFFLHdCQUFjLE1BQU0sSUFBSTtBQUFBLFlBQVc7QUFBQSxZQUNBLFdBQVcsS0FBSyxPQUFPLEtBQUssS0FBSztBQUFBLFlBQ2pDLFdBQVcsR0FBRyxPQUFPLEdBQUcsS0FBSztBQUFBLFVBQUksR0FBR0EsS0FBSSxNQUFNQSxLQUFJLEdBQUcsS0FBSztBQUM3RixZQUFFO0FBQUEsUUFDUixDQUFLO0FBRUQsWUFBSSxPQUFPLFdBQVc7QUFBRSxVQUFBQSxLQUFJLEtBQUssS0FBSyxNQUFNLEdBQUcsT0FBTyxHQUFHLFNBQVUsTUFBTTtBQUN2RSxnQkFBSSxhQUFhQSxNQUFLLElBQUksR0FBRztBQUFFLCtCQUFpQixNQUFNLENBQUM7QUFBQSxZQUFFO0FBQUEsVUFDL0QsQ0FBSztBQUFBLFFBQUU7QUFFSCxZQUFJLE9BQU8sY0FBYztBQUFFLGFBQUcsUUFBUSxxQkFBcUIsV0FBWTtBQUFFLG1CQUFPLE9BQU8sTUFBSztBQUFBLFVBQUcsQ0FBRTtBQUFBLFFBQUU7QUFFbkcsWUFBSSxPQUFPLFVBQVU7QUFDbkIsMkJBQWdCO0FBQ2hCLGNBQUlBLEtBQUksUUFBUSxLQUFLLFVBQVVBLEtBQUksUUFBUSxPQUFPLFFBQ2hEO0FBQUUsWUFBQUEsS0FBSSxhQUFZO0FBQUEsVUFBRztBQUFBLFFBQzdCO0FBQ0ksWUFBSSxPQUFPLFdBQVc7QUFDcEIsaUJBQU8sS0FBSyxFQUFFO0FBQ2QsaUJBQU8sU0FBUztBQUFBLFFBQ3RCO0FBQ0ksWUFBSSxJQUFJO0FBRU4sY0FBSSxlQUFlO0FBQUUsZUFBRyxNQUFNLGdCQUFnQjtBQUFBLFVBQUs7QUFDbkQsY0FBSSxPQUFPLFdBQ1Q7QUFBRSxzQkFBVSxJQUFJLEtBQUssTUFBTSxHQUFHLE9BQU8sQ0FBQztBQUFBLFVBQUUsV0FDakMsT0FBTyxhQUFhLE9BQU8sY0FBYyxPQUFPLFlBQVksT0FBTyxPQUNuRSxPQUFPLGNBQWMsT0FBTyxPQUNuQztBQUFFLHFCQUFTRixLQUFJLEtBQUssTUFBTUEsTUFBSyxHQUFHLE1BQU1BLE1BQUs7QUFBRSw0QkFBYyxJQUFJQSxJQUFHLE1BQU07QUFBQSxZQUFFO0FBQUEsVUFBRTtBQUNoRixjQUFJLE9BQU8sUUFBUTtBQUFFLDZCQUFpQixHQUFHLEdBQUc7QUFBQSxVQUFFO0FBQzlDLHNCQUFZLElBQUksZUFBZSxJQUFJLE1BQU07QUFBQSxRQUMvQztBQUNJLGVBQU87QUFBQSxNQUNYO0FBT0UsVUFBSSxtQkFBbUIsU0FBUyxTQUFTLFNBQVM7QUFDaEQsYUFBSyxVQUFVO0FBQ2YsYUFBSyxVQUFVO0FBQ2YsaUJBQVNBLEtBQUksR0FBR0EsS0FBSSxRQUFRLFFBQVEsRUFBRUEsSUFDcEM7QUFBRSxrQkFBUUEsRUFBQyxFQUFFLFNBQVM7QUFBQSxRQUFLO0FBQUEsTUFDakM7QUFFRSx1QkFBaUIsVUFBVSxRQUFRLFdBQVk7QUFDN0MsWUFBSSxLQUFLLG1CQUFtQjtBQUFFO0FBQUEsUUFBTTtBQUNwQyxhQUFLLG9CQUFvQjtBQUN6QixpQkFBU0EsS0FBSSxHQUFHQSxLQUFJLEtBQUssUUFBUSxRQUFRLEVBQUVBLElBQ3pDO0FBQUUsZUFBSyxRQUFRQSxFQUFDLEVBQUUsTUFBSztBQUFBLFFBQUc7QUFDNUIsb0JBQVksTUFBTSxPQUFPO0FBQUEsTUFDN0I7QUFFRSx1QkFBaUIsVUFBVSxPQUFPLFNBQVUsTUFBTSxTQUFTO0FBQ3pELGVBQU8sS0FBSyxRQUFRLEtBQUssTUFBTSxPQUFPO0FBQUEsTUFDMUM7QUFDRSxpQkFBVyxnQkFBZ0I7QUFFM0IsZUFBUyxlQUFlRSxNQUFLLE1BQU0sSUFBSSxTQUFTLE1BQU07QUFDcEQsa0JBQVUsUUFBUSxPQUFPO0FBQ3pCLGdCQUFRLFNBQVM7QUFDakIsWUFBSSxVQUFVLENBQUMsU0FBU0EsTUFBSyxNQUFNLElBQUksU0FBUyxJQUFJLENBQUMsR0FBRyxVQUFVLFFBQVEsQ0FBQztBQUMzRSxZQUFJLFNBQVMsUUFBUTtBQUNyQixtQkFBV0EsTUFBSyxTQUFVQSxNQUFLO0FBQzdCLGNBQUksUUFBUTtBQUFFLG9CQUFRLGFBQWEsT0FBTyxVQUFVLElBQUk7QUFBQSxVQUFFO0FBQzFELGtCQUFRLEtBQUssU0FBU0EsTUFBSyxRQUFRQSxNQUFLLElBQUksR0FBRyxRQUFRQSxNQUFLLEVBQUUsR0FBRyxTQUFTLElBQUksQ0FBQztBQUMvRSxtQkFBU0YsS0FBSSxHQUFHQSxLQUFJRSxLQUFJLE9BQU8sUUFBUSxFQUFFRixJQUN2QztBQUFFLGdCQUFJRSxLQUFJLE9BQU9GLEVBQUMsRUFBRSxVQUFVO0FBQUU7QUFBQSxZQUFNO0FBQUEsVUFBRTtBQUMxQyxvQkFBVSxJQUFJLE9BQU87QUFBQSxRQUMzQixDQUFLO0FBQ0QsZUFBTyxJQUFJLGlCQUFpQixTQUFTLE9BQU87QUFBQSxNQUNoRDtBQUVFLGVBQVMsa0JBQWtCRSxNQUFLO0FBQzlCLGVBQU9BLEtBQUksVUFBVSxJQUFJQSxLQUFJLE9BQU8sQ0FBQyxHQUFHQSxLQUFJLFFBQVEsSUFBSUEsS0FBSSxTQUFRLENBQUUsQ0FBQyxHQUFHLFNBQVUsR0FBRztBQUFFLGlCQUFPLEVBQUU7QUFBQSxRQUFPLENBQUU7QUFBQSxNQUMvRztBQUVFLGVBQVMsa0JBQWtCQSxNQUFLLFNBQVM7QUFDdkMsaUJBQVNGLEtBQUksR0FBR0EsS0FBSSxRQUFRLFFBQVFBLE1BQUs7QUFDdkMsY0FBSSxTQUFTLFFBQVFBLEVBQUMsR0FBRyxNQUFNLE9BQU8sS0FBSTtBQUMxQyxjQUFJLFFBQVFFLEtBQUksUUFBUSxJQUFJLElBQUksR0FBRyxNQUFNQSxLQUFJLFFBQVEsSUFBSSxFQUFFO0FBQzNELGNBQUksSUFBSSxPQUFPLEdBQUcsR0FBRztBQUNuQixnQkFBSSxVQUFVLFNBQVNBLE1BQUssT0FBTyxLQUFLLE9BQU8sU0FBUyxPQUFPLFFBQVEsSUFBSTtBQUMzRSxtQkFBTyxRQUFRLEtBQUssT0FBTztBQUMzQixvQkFBUSxTQUFTO0FBQUEsVUFDekI7QUFBQSxRQUNBO0FBQUEsTUFDQTtBQUVFLGVBQVMsb0JBQW9CLFNBQVM7QUFDcEMsWUFBSSxPQUFPLFNBQVdGLElBQUk7QUFDeEIsY0FBSSxTQUFTLFFBQVFBLEVBQUMsR0FBRyxTQUFTLENBQUMsT0FBTyxRQUFRLEdBQUc7QUFDckQscUJBQVcsT0FBTyxRQUFRLEtBQUssU0FBVSxHQUFHO0FBQUUsbUJBQU8sT0FBTyxLQUFLLENBQUM7QUFBQSxVQUFFLENBQUU7QUFDdEUsbUJBQVMsSUFBSSxHQUFHLElBQUksT0FBTyxRQUFRLFFBQVEsS0FBSztBQUM5QyxnQkFBSSxZQUFZLE9BQU8sUUFBUSxDQUFDO0FBQ2hDLGdCQUFJLFFBQVEsUUFBUSxVQUFVLEdBQUcsS0FBSyxJQUFJO0FBQ3hDLHdCQUFVLFNBQVM7QUFDbkIscUJBQU8sUUFBUSxPQUFPLEtBQUssQ0FBQztBQUFBLFlBQ3RDO0FBQUEsVUFDQTtBQUFBLFFBQ0E7QUFFSSxpQkFBU0EsS0FBSSxHQUFHQSxLQUFJLFFBQVEsUUFBUUEsS0FBSyxNQUFNQSxFQUFDO0FBQUEsTUFDcEQ7QUFFRSxVQUFJLFlBQVk7QUFDaEIsVUFBSSxNQUFNLFNBQVMsTUFBTSxNQUFNLFdBQVcsU0FBUyxXQUFXO0FBQzVELFlBQUksRUFBRSxnQkFBZ0IsTUFBTTtBQUFFLGlCQUFPLElBQUksSUFBSSxNQUFNLE1BQU0sV0FBVyxTQUFTLFNBQVM7QUFBQSxRQUFDO0FBQ3ZGLFlBQUksYUFBYSxNQUFNO0FBQUUsc0JBQVk7QUFBQSxRQUFFO0FBRXZDLG9CQUFZLEtBQUssTUFBTSxDQUFDLElBQUksVUFBVSxDQUFDLElBQUksS0FBSyxJQUFJLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUM1RCxhQUFLLFFBQVE7QUFDYixhQUFLLFlBQVksS0FBSyxhQUFhO0FBQ25DLGFBQUssV0FBVztBQUNoQixhQUFLLGtCQUFrQjtBQUN2QixhQUFLLGVBQWUsS0FBSyxvQkFBb0I7QUFDN0MsWUFBSSxRQUFRLElBQUksV0FBVyxDQUFDO0FBQzVCLGFBQUssTUFBTSxnQkFBZ0IsS0FBSztBQUNoQyxhQUFLLFVBQVUsSUFBSSxRQUFRLElBQUk7QUFDL0IsYUFBSyxLQUFLLEVBQUU7QUFDWixhQUFLLGFBQWE7QUFDbEIsYUFBSyxVQUFVO0FBQ2YsYUFBSyxZQUFhLGFBQWEsUUFBUyxRQUFRO0FBQ2hELGFBQUssU0FBUztBQUVkLFlBQUksT0FBTyxRQUFRLFVBQVU7QUFBRSxpQkFBTyxLQUFLLFdBQVcsSUFBSTtBQUFBLFFBQUU7QUFDNUQsa0JBQVUsTUFBTSxFQUFDLE1BQU0sT0FBTyxJQUFJLE9BQU8sS0FBVSxDQUFDO0FBQ3BELHFCQUFhLE1BQU0sZ0JBQWdCLEtBQUssR0FBRyxjQUFjO0FBQUEsTUFDN0Q7QUFFRSxVQUFJLFlBQVksVUFBVSxZQUFZLFdBQVc7QUFBQSxRQUMvQyxhQUFhO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxRQUtiLE1BQU0sU0FBUyxNQUFNLElBQUksSUFBSTtBQUMzQixjQUFJLElBQUk7QUFBRSxpQkFBSyxNQUFNLE9BQU8sS0FBSyxPQUFPLEtBQUssTUFBTSxFQUFFO0FBQUEsVUFBRSxPQUNsRDtBQUFFLGlCQUFLLE1BQU0sS0FBSyxPQUFPLEtBQUssUUFBUSxLQUFLLE1BQU0sSUFBSTtBQUFBLFVBQUU7QUFBQSxRQUNsRTtBQUFBO0FBQUEsUUFHSSxRQUFRLFNBQVMsSUFBSSxPQUFPO0FBQzFCLGNBQUksU0FBUztBQUNiLG1CQUFTQSxLQUFJLEdBQUdBLEtBQUksTUFBTSxRQUFRLEVBQUVBLElBQUc7QUFBRSxzQkFBVSxNQUFNQSxFQUFDLEVBQUU7QUFBQSxVQUFPO0FBQ25FLGVBQUssWUFBWSxLQUFLLEtBQUssT0FBTyxPQUFPLE1BQU07QUFBQSxRQUNyRDtBQUFBLFFBQ0ksUUFBUSxTQUFTLElBQUksR0FBRztBQUFFLGVBQUssWUFBWSxLQUFLLEtBQUssT0FBTyxDQUFDO0FBQUEsUUFBRTtBQUFBO0FBQUE7QUFBQSxRQUsvRCxVQUFVLFNBQVMsU0FBUztBQUMxQixjQUFJLFFBQVEsU0FBUyxNQUFNLEtBQUssT0FBTyxLQUFLLFFBQVEsS0FBSyxJQUFJO0FBQzdELGNBQUksWUFBWSxPQUFPO0FBQUUsbUJBQU87QUFBQSxVQUFLO0FBQ3JDLGlCQUFPLE1BQU0sS0FBSyxXQUFXLEtBQUssY0FBYSxDQUFFO0FBQUEsUUFDdkQ7QUFBQSxRQUNJLFVBQVUsWUFBWSxTQUFTLE1BQU07QUFDbkMsY0FBSSxNQUFNLElBQUksS0FBSyxPQUFPLENBQUMsR0FBRyxPQUFPLEtBQUssUUFBUSxLQUFLLE9BQU87QUFDOUQscUJBQVcsTUFBTTtBQUFBLFlBQUMsTUFBTTtBQUFBLFlBQUssSUFBSSxJQUFJLE1BQU0sUUFBUSxNQUFNLElBQUksRUFBRSxLQUFLLE1BQU07QUFBQSxZQUN4RCxNQUFNLEtBQUssV0FBVyxJQUFJO0FBQUEsWUFBRyxRQUFRO0FBQUEsWUFBWSxNQUFNO0FBQUEsVUFBSSxHQUFHLElBQUk7QUFDcEYsY0FBSSxLQUFLLElBQUk7QUFBRSwyQkFBZSxLQUFLLElBQUksR0FBRyxDQUFDO0FBQUEsVUFBRTtBQUM3Qyx1QkFBYSxNQUFNLGdCQUFnQixHQUFHLEdBQUcsY0FBYztBQUFBLFFBQzdELENBQUs7QUFBQSxRQUNELGNBQWMsU0FBUyxNQUFNLE1BQU0sSUFBSSxRQUFRO0FBQzdDLGlCQUFPLFFBQVEsTUFBTSxJQUFJO0FBQ3pCLGVBQUssS0FBSyxRQUFRLE1BQU0sRUFBRSxJQUFJO0FBQzlCLHVCQUFhLE1BQU0sTUFBTSxNQUFNLElBQUksTUFBTTtBQUFBLFFBQy9DO0FBQUEsUUFDSSxVQUFVLFNBQVMsTUFBTSxJQUFJLFNBQVM7QUFDcEMsY0FBSSxRQUFRLFdBQVcsTUFBTSxRQUFRLE1BQU0sSUFBSSxHQUFHLFFBQVEsTUFBTSxFQUFFLENBQUM7QUFDbkUsY0FBSSxZQUFZLE9BQU87QUFBRSxtQkFBTztBQUFBLFVBQUs7QUFDckMsY0FBSSxZQUFZLElBQUk7QUFBRSxtQkFBTyxNQUFNLEtBQUssRUFBRTtBQUFBLFVBQUM7QUFDM0MsaUJBQU8sTUFBTSxLQUFLLFdBQVcsS0FBSyxjQUFhLENBQUU7QUFBQSxRQUN2RDtBQUFBLFFBRUksU0FBUyxTQUFTLE1BQU07QUFBQyxjQUFJLElBQUksS0FBSyxjQUFjLElBQUk7QUFBRyxpQkFBTyxLQUFLLEVBQUU7QUFBQSxRQUFJO0FBQUEsUUFFN0UsZUFBZSxTQUFTLE1BQU07QUFBQyxjQUFJLE9BQU8sTUFBTSxJQUFJLEdBQUc7QUFBRSxtQkFBTyxRQUFRLE1BQU0sSUFBSTtBQUFBLFVBQUM7QUFBQSxRQUFFO0FBQUEsUUFDckYsZUFBZSxTQUFTLE1BQU07QUFBQyxpQkFBTyxPQUFPLElBQUk7QUFBQSxRQUFDO0FBQUEsUUFFbEQsMEJBQTBCLFNBQVMsTUFBTTtBQUN2QyxjQUFJLE9BQU8sUUFBUSxVQUFVO0FBQUUsbUJBQU8sUUFBUSxNQUFNLElBQUk7QUFBQSxVQUFFO0FBQzFELGlCQUFPLFdBQVcsSUFBSTtBQUFBLFFBQzVCO0FBQUEsUUFFSSxXQUFXLFdBQVc7QUFBQyxpQkFBTyxLQUFLO0FBQUEsUUFBSTtBQUFBLFFBQ3ZDLFdBQVcsV0FBVztBQUFDLGlCQUFPLEtBQUs7QUFBQSxRQUFLO0FBQUEsUUFDeEMsVUFBVSxXQUFXO0FBQUMsaUJBQU8sS0FBSyxRQUFRLEtBQUssT0FBTztBQUFBLFFBQUM7QUFBQSxRQUV2RCxTQUFTLFNBQVMsS0FBSztBQUFDLGlCQUFPLFFBQVEsTUFBTSxHQUFHO0FBQUEsUUFBQztBQUFBLFFBRWpELFdBQVcsU0FBUyxPQUFPO0FBQ3pCLGNBQUlRLFNBQVEsS0FBSyxJQUFJLFFBQU8sR0FBSTtBQUNoQyxjQUFJLFNBQVMsUUFBUSxTQUFTLFFBQVE7QUFBRSxrQkFBTUEsT0FBTTtBQUFBLFVBQUssV0FDaEQsU0FBUyxVQUFVO0FBQUUsa0JBQU1BLE9BQU07QUFBQSxVQUFPLFdBQ3hDLFNBQVMsU0FBUyxTQUFTLFFBQVEsVUFBVSxPQUFPO0FBQUUsa0JBQU1BLE9BQU0sR0FBRTtBQUFBLFVBQUcsT0FDM0U7QUFBRSxrQkFBTUEsT0FBTSxLQUFJO0FBQUEsVUFBRztBQUMxQixpQkFBTztBQUFBLFFBQ2I7QUFBQSxRQUNJLGdCQUFnQixXQUFXO0FBQUUsaUJBQU8sS0FBSyxJQUFJO0FBQUEsUUFBTTtBQUFBLFFBQ25ELG1CQUFtQixXQUFXO0FBQUMsaUJBQU8sS0FBSyxJQUFJLGtCQUFpQjtBQUFBLFFBQUU7QUFBQSxRQUVsRSxXQUFXLFlBQVksU0FBUyxNQUFNLElBQUksU0FBUztBQUNqRCw2QkFBbUIsTUFBTSxRQUFRLE1BQU0sT0FBTyxRQUFRLFdBQVcsSUFBSSxNQUFNLE1BQU0sQ0FBQyxJQUFJLElBQUksR0FBRyxNQUFNLE9BQU87QUFBQSxRQUNoSCxDQUFLO0FBQUEsUUFDRCxjQUFjLFlBQVksU0FBUyxRQUFRLE1BQU0sU0FBUztBQUN4RCw2QkFBbUIsTUFBTSxRQUFRLE1BQU0sTUFBTSxHQUFHLFFBQVEsTUFBTSxRQUFRLE1BQU0sR0FBRyxPQUFPO0FBQUEsUUFDNUYsQ0FBSztBQUFBLFFBQ0QsaUJBQWlCLFlBQVksU0FBUyxNQUFNLE9BQU8sU0FBUztBQUMxRCwwQkFBZ0IsTUFBTSxRQUFRLE1BQU0sSUFBSSxHQUFHLFNBQVMsUUFBUSxNQUFNLEtBQUssR0FBRyxPQUFPO0FBQUEsUUFDdkYsQ0FBSztBQUFBLFFBQ0Qsa0JBQWtCLFlBQVksU0FBUyxPQUFPLFNBQVM7QUFDckQsMkJBQWlCLE1BQU0sYUFBYSxNQUFNLEtBQUssR0FBRyxPQUFPO0FBQUEsUUFDL0QsQ0FBSztBQUFBLFFBQ0Qsb0JBQW9CLFlBQVksU0FBUyxHQUFHLFNBQVM7QUFDbkQsY0FBSSxRQUFRLElBQUksS0FBSyxJQUFJLFFBQVEsQ0FBQztBQUNsQywyQkFBaUIsTUFBTSxhQUFhLE1BQU0sS0FBSyxHQUFHLE9BQU87QUFBQSxRQUMvRCxDQUFLO0FBQUEsUUFDRCxlQUFlLFlBQVksU0FBUyxRQUFRLFNBQVMsU0FBUztBQUM1RCxjQUFJLENBQUMsT0FBTyxRQUFRO0FBQUU7QUFBQSxVQUFNO0FBQzVCLGNBQUksTUFBTSxDQUFBO0FBQ1YsbUJBQVNSLEtBQUksR0FBR0EsS0FBSSxPQUFPLFFBQVFBLE1BQ2pDO0FBQUUsZ0JBQUlBLEVBQUMsSUFBSSxJQUFJO0FBQUEsY0FBTSxRQUFRLE1BQU0sT0FBT0EsRUFBQyxFQUFFLE1BQU07QUFBQSxjQUNoQyxRQUFRLE1BQU0sT0FBT0EsRUFBQyxFQUFFLFFBQVEsT0FBT0EsRUFBQyxFQUFFLE1BQU07QUFBQSxZQUFDO0FBQUEsVUFBRTtBQUN4RSxjQUFJLFdBQVcsTUFBTTtBQUFFLHNCQUFVLEtBQUssSUFBSSxPQUFPLFNBQVMsR0FBRyxLQUFLLElBQUksU0FBUztBQUFBLFVBQUU7QUFDakYsdUJBQWEsTUFBTSxtQkFBbUIsS0FBSyxJQUFJLEtBQUssT0FBTyxHQUFHLE9BQU87QUFBQSxRQUMzRSxDQUFLO0FBQUEsUUFDRCxjQUFjLFlBQVksU0FBUyxRQUFRLE1BQU0sU0FBUztBQUN4RCxjQUFJLFNBQVMsS0FBSyxJQUFJLE9BQU8sTUFBTSxDQUFDO0FBQ3BDLGlCQUFPLEtBQUssSUFBSSxNQUFNLFFBQVEsTUFBTSxNQUFNLEdBQUcsUUFBUSxNQUFNLFFBQVEsTUFBTSxDQUFDLENBQUM7QUFDM0UsdUJBQWEsTUFBTSxtQkFBbUIsS0FBSyxJQUFJLFFBQVEsT0FBTyxTQUFTLENBQUMsR0FBRyxPQUFPO0FBQUEsUUFDeEYsQ0FBSztBQUFBLFFBRUQsY0FBYyxTQUFTLFNBQVM7QUFDOUIsY0FBSSxTQUFTLEtBQUssSUFBSSxRQUFRO0FBQzlCLG1CQUFTQSxLQUFJLEdBQUdBLEtBQUksT0FBTyxRQUFRQSxNQUFLO0FBQ3RDLGdCQUFJLE1BQU0sV0FBVyxNQUFNLE9BQU9BLEVBQUMsRUFBRSxLQUFJLEdBQUksT0FBT0EsRUFBQyxFQUFFLEdBQUUsQ0FBRTtBQUMzRCxvQkFBUSxRQUFRLE1BQU0sT0FBTyxHQUFHLElBQUk7QUFBQSxVQUM1QztBQUNNLGNBQUksWUFBWSxPQUFPO0FBQUUsbUJBQU87QUFBQSxVQUFLLE9BQ2hDO0FBQUUsbUJBQU8sTUFBTSxLQUFLLFdBQVcsS0FBSyxjQUFhLENBQUU7QUFBQSxVQUFDO0FBQUEsUUFDL0Q7QUFBQSxRQUNJLGVBQWUsU0FBUyxTQUFTO0FBQy9CLGNBQUksUUFBUSxDQUFBLEdBQUksU0FBUyxLQUFLLElBQUk7QUFDbEMsbUJBQVNBLEtBQUksR0FBR0EsS0FBSSxPQUFPLFFBQVFBLE1BQUs7QUFDdEMsZ0JBQUksTUFBTSxXQUFXLE1BQU0sT0FBT0EsRUFBQyxFQUFFLEtBQUksR0FBSSxPQUFPQSxFQUFDLEVBQUUsR0FBRSxDQUFFO0FBQzNELGdCQUFJLFlBQVksT0FBTztBQUFFLG9CQUFNLElBQUksS0FBSyxXQUFXLEtBQUssY0FBYSxDQUFFO0FBQUEsWUFBRTtBQUN6RSxrQkFBTUEsRUFBQyxJQUFJO0FBQUEsVUFDbkI7QUFDTSxpQkFBTztBQUFBLFFBQ2I7QUFBQSxRQUNJLGtCQUFrQixTQUFTLE1BQU0sVUFBVSxRQUFRO0FBQ2pELGNBQUksTUFBTSxDQUFBO0FBQ1YsbUJBQVNBLEtBQUksR0FBR0EsS0FBSSxLQUFLLElBQUksT0FBTyxRQUFRQSxNQUMxQztBQUFFLGdCQUFJQSxFQUFDLElBQUk7QUFBQSxVQUFLO0FBQ2xCLGVBQUssa0JBQWtCLEtBQUssVUFBVSxVQUFVLFFBQVE7QUFBQSxRQUM5RDtBQUFBLFFBQ0ksbUJBQW1CLFlBQVksU0FBUyxNQUFNLFVBQVUsUUFBUTtBQUM5RCxjQUFJLFVBQVUsQ0FBQSxHQUFJLE1BQU0sS0FBSztBQUM3QixtQkFBU0EsS0FBSSxHQUFHQSxLQUFJLElBQUksT0FBTyxRQUFRQSxNQUFLO0FBQzFDLGdCQUFJUSxTQUFRLElBQUksT0FBT1IsRUFBQztBQUN4QixvQkFBUUEsRUFBQyxJQUFJLEVBQUMsTUFBTVEsT0FBTSxLQUFJLEdBQUksSUFBSUEsT0FBTSxHQUFFLEdBQUksTUFBTSxLQUFLLFdBQVcsS0FBS1IsRUFBQyxDQUFDLEdBQUcsT0FBYztBQUFBLFVBQ3hHO0FBQ00sY0FBSSxTQUFTLFlBQVksWUFBWSxTQUFTLG1CQUFtQixNQUFNLFNBQVMsUUFBUTtBQUN4RixtQkFBU0ssT0FBTSxRQUFRLFNBQVMsR0FBR0EsUUFBTyxHQUFHQSxRQUMzQztBQUFFLHVCQUFXLE1BQU0sUUFBUUEsSUFBRyxDQUFDO0FBQUEsVUFBRTtBQUNuQyxjQUFJLFFBQVE7QUFBRSx1Q0FBMkIsTUFBTSxNQUFNO0FBQUEsVUFBRSxXQUM5QyxLQUFLLElBQUk7QUFBRSxnQ0FBb0IsS0FBSyxFQUFFO0FBQUEsVUFBRTtBQUFBLFFBQ3ZELENBQUs7QUFBQSxRQUNELE1BQU0sWUFBWSxXQUFXO0FBQUMsZ0NBQXNCLE1BQU0sTUFBTTtBQUFBLFFBQUUsQ0FBQztBQUFBLFFBQ25FLE1BQU0sWUFBWSxXQUFXO0FBQUMsZ0NBQXNCLE1BQU0sTUFBTTtBQUFBLFFBQUUsQ0FBQztBQUFBLFFBQ25FLGVBQWUsWUFBWSxXQUFXO0FBQUMsZ0NBQXNCLE1BQU0sUUFBUSxJQUFJO0FBQUEsUUFBRSxDQUFDO0FBQUEsUUFDbEYsZUFBZSxZQUFZLFdBQVc7QUFBQyxnQ0FBc0IsTUFBTSxRQUFRLElBQUk7QUFBQSxRQUFFLENBQUM7QUFBQSxRQUVsRixjQUFjLFNBQVMsS0FBSztBQUFDLGVBQUssU0FBUztBQUFBLFFBQUk7QUFBQSxRQUMvQyxjQUFjLFdBQVc7QUFBQyxpQkFBTyxLQUFLO0FBQUEsUUFBTTtBQUFBLFFBRTVDLGFBQWEsV0FBVztBQUN0QixjQUFJLE9BQU8sS0FBSyxTQUFTLE9BQU8sR0FBRyxTQUFTO0FBQzVDLG1CQUFTTCxLQUFJLEdBQUdBLEtBQUksS0FBSyxLQUFLLFFBQVFBLE1BQUs7QUFBRSxnQkFBSSxDQUFDLEtBQUssS0FBS0EsRUFBQyxFQUFFLFFBQVE7QUFBRSxnQkFBRTtBQUFBLFlBQUs7QUFBQSxVQUFFO0FBQ2xGLG1CQUFTSyxPQUFNLEdBQUdBLE9BQU0sS0FBSyxPQUFPLFFBQVFBLFFBQU87QUFBRSxnQkFBSSxDQUFDLEtBQUssT0FBT0EsSUFBRyxFQUFFLFFBQVE7QUFBRSxnQkFBRTtBQUFBLFlBQU87QUFBQSxVQUFFO0FBQ2hHLGlCQUFPLEVBQUMsTUFBTSxNQUFNLE1BQU0sT0FBTTtBQUFBLFFBQ3RDO0FBQUEsUUFDSSxjQUFjLFdBQVc7QUFDdkIsY0FBSWdCLFdBQVM7QUFFYixlQUFLLFVBQVUsSUFBSSxRQUFRLEtBQUssT0FBTztBQUN2QyxxQkFBVyxNQUFNLFNBQVVuQixNQUFLO0FBQUUsbUJBQU9BLEtBQUksVUFBVW1CLFNBQU87QUFBQSxVQUFRLEdBQUksSUFBSTtBQUFBLFFBQ3BGO0FBQUEsUUFFSSxXQUFXLFdBQVc7QUFDcEIsZUFBSyxrQkFBa0IsS0FBSyxpQkFBaUIsSUFBSTtBQUFBLFFBQ3ZEO0FBQUEsUUFDSSxrQkFBa0IsU0FBUyxZQUFZO0FBQ3JDLGNBQUksWUFDRjtBQUFFLGlCQUFLLFFBQVEsU0FBUyxLQUFLLFFBQVEsWUFBWSxLQUFLLFFBQVEsYUFBYTtBQUFBLFVBQUs7QUFDbEYsaUJBQU8sS0FBSyxRQUFRO0FBQUEsUUFDMUI7QUFBQSxRQUNJLFNBQVMsU0FBVSxLQUFLO0FBQ3RCLGlCQUFPLEtBQUssUUFBUSxlQUFlLE9BQU8sS0FBSztBQUFBLFFBQ3JEO0FBQUEsUUFFSSxZQUFZLFdBQVc7QUFDckIsaUJBQU87QUFBQSxZQUFDLE1BQU0saUJBQWlCLEtBQUssUUFBUSxJQUFJO0FBQUEsWUFDeEMsUUFBUSxpQkFBaUIsS0FBSyxRQUFRLE1BQU07QUFBQSxVQUFDO0FBQUEsUUFDM0Q7QUFBQSxRQUNJLFlBQVksU0FBUyxVQUFVO0FBQzdCLGNBQUksT0FBTyxLQUFLLFVBQVUsSUFBSSxRQUFRLEtBQUssT0FBTztBQUNsRCxlQUFLLE9BQU8saUJBQWlCLFNBQVMsS0FBSyxNQUFNLENBQUMsR0FBRyxNQUFNLElBQUk7QUFDL0QsZUFBSyxTQUFTLGlCQUFpQixTQUFTLE9BQU8sTUFBTSxDQUFDLEdBQUcsTUFBTSxJQUFJO0FBQUEsUUFDekU7QUFBQSxRQUVJLGlCQUFpQixZQUFZLFNBQVMsTUFBTSxVQUFVLE9BQU87QUFDM0QsaUJBQU8sV0FBVyxNQUFNLE1BQU0sVUFBVSxTQUFVQyxPQUFNO0FBQ3RELGdCQUFJLFVBQVVBLE1BQUssa0JBQWtCQSxNQUFLLGdCQUFnQixDQUFBO0FBQzFELG9CQUFRLFFBQVEsSUFBSTtBQUNwQixnQkFBSSxDQUFDLFNBQVMsUUFBUSxPQUFPLEdBQUc7QUFBRSxjQUFBQSxNQUFLLGdCQUFnQjtBQUFBLFlBQUs7QUFDNUQsbUJBQU87QUFBQSxVQUNmLENBQU87QUFBQSxRQUNQLENBQUs7QUFBQSxRQUVELGFBQWEsWUFBWSxTQUFTLFVBQVU7QUFDMUMsY0FBSUQsV0FBUztBQUViLGVBQUssS0FBSyxTQUFVLE1BQU07QUFDeEIsZ0JBQUksS0FBSyxpQkFBaUIsS0FBSyxjQUFjLFFBQVEsR0FBRztBQUN0RCx5QkFBV0EsVUFBUSxNQUFNLFVBQVUsV0FBWTtBQUM3QyxxQkFBSyxjQUFjLFFBQVEsSUFBSTtBQUMvQixvQkFBSSxRQUFRLEtBQUssYUFBYSxHQUFHO0FBQUUsdUJBQUssZ0JBQWdCO0FBQUEsZ0JBQUs7QUFDN0QsdUJBQU87QUFBQSxjQUNuQixDQUFXO0FBQUEsWUFDWDtBQUFBLFVBQ0EsQ0FBTztBQUFBLFFBQ1AsQ0FBSztBQUFBLFFBRUQsVUFBVSxTQUFTLE1BQU07QUFDdkIsY0FBSTtBQUNKLGNBQUksT0FBTyxRQUFRLFVBQVU7QUFDM0IsZ0JBQUksQ0FBQyxPQUFPLE1BQU0sSUFBSSxHQUFHO0FBQUUscUJBQU87QUFBQSxZQUFJO0FBQ3RDLGdCQUFJO0FBQ0osbUJBQU8sUUFBUSxNQUFNLElBQUk7QUFDekIsZ0JBQUksQ0FBQyxNQUFNO0FBQUUscUJBQU87QUFBQSxZQUFJO0FBQUEsVUFDaEMsT0FBYTtBQUNMLGdCQUFJLE9BQU8sSUFBSTtBQUNmLGdCQUFJLEtBQUssTUFBTTtBQUFFLHFCQUFPO0FBQUEsWUFBSTtBQUFBLFVBQ3BDO0FBQ00saUJBQU87QUFBQSxZQUFDLE1BQU07QUFBQSxZQUFHLFFBQVE7QUFBQSxZQUFNLE1BQU0sS0FBSztBQUFBLFlBQU0sZUFBZSxLQUFLO0FBQUEsWUFDNUQsV0FBVyxLQUFLO0FBQUEsWUFBVyxTQUFTLEtBQUs7QUFBQSxZQUFTLFdBQVcsS0FBSztBQUFBLFlBQ2xFLFNBQVMsS0FBSztBQUFBLFVBQU87QUFBQSxRQUNuQztBQUFBLFFBRUksY0FBYyxZQUFZLFNBQVMsUUFBUSxPQUFPLEtBQUs7QUFDckQsaUJBQU8sV0FBVyxNQUFNLFFBQVEsU0FBUyxXQUFXLFdBQVcsU0FBUyxTQUFVLE1BQU07QUFDdEYsZ0JBQUlsQixRQUFPLFNBQVMsU0FBUyxjQUNsQixTQUFTLGVBQWUsWUFDeEIsU0FBUyxXQUFXLGdCQUFnQjtBQUMvQyxnQkFBSSxDQUFDLEtBQUtBLEtBQUksR0FBRztBQUFFLG1CQUFLQSxLQUFJLElBQUk7QUFBQSxZQUFJLFdBQzNCLFVBQVUsR0FBRyxFQUFFLEtBQUssS0FBS0EsS0FBSSxDQUFDLEdBQUc7QUFBRSxxQkFBTztBQUFBLFlBQUssT0FDbkQ7QUFBRSxtQkFBS0EsS0FBSSxLQUFLLE1BQU07QUFBQSxZQUFJO0FBQy9CLG1CQUFPO0FBQUEsVUFDZixDQUFPO0FBQUEsUUFDUCxDQUFLO0FBQUEsUUFDRCxpQkFBaUIsWUFBWSxTQUFTLFFBQVEsT0FBTyxLQUFLO0FBQ3hELGlCQUFPLFdBQVcsTUFBTSxRQUFRLFNBQVMsV0FBVyxXQUFXLFNBQVMsU0FBVSxNQUFNO0FBQ3RGLGdCQUFJQSxRQUFPLFNBQVMsU0FBUyxjQUNsQixTQUFTLGVBQWUsWUFDeEIsU0FBUyxXQUFXLGdCQUFnQjtBQUMvQyxnQkFBSSxNQUFNLEtBQUtBLEtBQUk7QUFDbkIsZ0JBQUksQ0FBQyxLQUFLO0FBQUUscUJBQU87QUFBQSxZQUFLLFdBQ2YsT0FBTyxNQUFNO0FBQUUsbUJBQUtBLEtBQUksSUFBSTtBQUFBLFlBQUssT0FDckM7QUFDSCxrQkFBSSxRQUFRLElBQUksTUFBTSxVQUFVLEdBQUcsQ0FBQztBQUNwQyxrQkFBSSxDQUFDLE9BQU87QUFBRSx1QkFBTztBQUFBLGNBQUs7QUFDMUIsa0JBQUksTUFBTSxNQUFNLFFBQVEsTUFBTSxDQUFDLEVBQUU7QUFDakMsbUJBQUtBLEtBQUksSUFBSSxJQUFJLE1BQU0sR0FBRyxNQUFNLEtBQUssS0FBSyxDQUFDLE1BQU0sU0FBUyxPQUFPLElBQUksU0FBUyxLQUFLLE9BQU8sSUFBSSxNQUFNLEdBQUcsS0FBSztBQUFBLFlBQ3RIO0FBQ1EsbUJBQU87QUFBQSxVQUNmLENBQU87QUFBQSxRQUNQLENBQUs7QUFBQSxRQUVELGVBQWUsWUFBWSxTQUFTLFFBQVEsTUFBTSxTQUFTO0FBQ3pELGlCQUFPLGNBQWMsTUFBTSxRQUFRLE1BQU0sT0FBTztBQUFBLFFBQ3RELENBQUs7QUFBQSxRQUNELGtCQUFrQixTQUFTLFFBQVE7QUFBRSxpQkFBTyxNQUFLO0FBQUEsUUFBRztBQUFBLFFBRXBELFVBQVUsU0FBUyxNQUFNLElBQUksU0FBUztBQUNwQyxpQkFBTyxTQUFTLE1BQU0sUUFBUSxNQUFNLElBQUksR0FBRyxRQUFRLE1BQU0sRUFBRSxHQUFHLFNBQVMsV0FBVyxRQUFRLFFBQVEsT0FBTztBQUFBLFFBQy9HO0FBQUEsUUFDSSxhQUFhLFNBQVMsS0FBSyxTQUFTO0FBQ2xDLGNBQUksV0FBVztBQUFBLFlBQUMsY0FBYyxZQUFZLFFBQVEsWUFBWSxPQUFPLFFBQVEsU0FBUztBQUFBLFlBQ3RFLFlBQVksV0FBVyxRQUFRO0FBQUEsWUFDL0IsZ0JBQWdCO0FBQUEsWUFBTyxRQUFRLFdBQVcsUUFBUTtBQUFBLFlBQ2xELG1CQUFtQixXQUFXLFFBQVE7QUFBQSxVQUFpQjtBQUN2RSxnQkFBTSxRQUFRLE1BQU0sR0FBRztBQUN2QixpQkFBTyxTQUFTLE1BQU0sS0FBSyxLQUFLLFVBQVUsVUFBVTtBQUFBLFFBQzFEO0FBQUEsUUFDSSxhQUFhLFNBQVMsS0FBSztBQUN6QixnQkFBTSxRQUFRLE1BQU0sR0FBRztBQUN2QixjQUFJLFVBQVUsQ0FBQSxHQUFJLFFBQVEsUUFBUSxNQUFNLElBQUksSUFBSSxFQUFFO0FBQ2xELGNBQUksT0FBTztBQUFFLHFCQUFTSCxLQUFJLEdBQUdBLEtBQUksTUFBTSxRQUFRLEVBQUVBLElBQUc7QUFDbEQsa0JBQUksT0FBTyxNQUFNQSxFQUFDO0FBQ2xCLG1CQUFLLEtBQUssUUFBUSxRQUFRLEtBQUssUUFBUSxJQUFJLFFBQ3RDLEtBQUssTUFBTSxRQUFRLEtBQUssTUFBTSxJQUFJLEtBQ3JDO0FBQUUsd0JBQVEsS0FBSyxLQUFLLE9BQU8sVUFBVSxLQUFLLE1BQU07QUFBQSxjQUFFO0FBQUEsWUFDNUQ7QUFBQSxVQUFPO0FBQ0QsaUJBQU87QUFBQSxRQUNiO0FBQUEsUUFDSSxXQUFXLFNBQVMsTUFBTSxJQUFJLFFBQVE7QUFDcEMsaUJBQU8sUUFBUSxNQUFNLElBQUk7QUFBRyxlQUFLLFFBQVEsTUFBTSxFQUFFO0FBQ2pELGNBQUksUUFBUSxDQUFBLEdBQUlVLFVBQVMsS0FBSztBQUM5QixlQUFLLEtBQUssS0FBSyxNQUFNLEdBQUcsT0FBTyxHQUFHLFNBQVUsTUFBTTtBQUNoRCxnQkFBSSxRQUFRLEtBQUs7QUFDakIsZ0JBQUksT0FBTztBQUFFLHVCQUFTVixLQUFJLEdBQUdBLEtBQUksTUFBTSxRQUFRQSxNQUFLO0FBQ2xELG9CQUFJLE9BQU8sTUFBTUEsRUFBQztBQUNsQixvQkFBSSxFQUFFLEtBQUssTUFBTSxRQUFRVSxXQUFVLEtBQUssUUFBUSxLQUFLLE1BQU0sS0FBSyxNQUMxRCxLQUFLLFFBQVEsUUFBUUEsV0FBVSxLQUFLLFFBQ3BDLEtBQUssUUFBUSxRQUFRQSxXQUFVLEdBQUcsUUFBUSxLQUFLLFFBQVEsR0FBRyxRQUMzRCxDQUFDLFVBQVUsT0FBTyxLQUFLLE1BQU0sSUFDaEM7QUFBRSx3QkFBTSxLQUFLLEtBQUssT0FBTyxVQUFVLEtBQUssTUFBTTtBQUFBLGdCQUFFO0FBQUEsY0FDNUQ7QUFBQSxZQUFTO0FBQ0QsY0FBRUE7QUFBQSxVQUNWLENBQU87QUFDRCxpQkFBTztBQUFBLFFBQ2I7QUFBQSxRQUNJLGFBQWEsV0FBVztBQUN0QixjQUFJLFVBQVUsQ0FBQTtBQUNkLGVBQUssS0FBSyxTQUFVLE1BQU07QUFDeEIsZ0JBQUksTUFBTSxLQUFLO0FBQ2YsZ0JBQUksS0FBSztBQUFFLHVCQUFTVixLQUFJLEdBQUdBLEtBQUksSUFBSSxRQUFRLEVBQUVBLElBQzNDO0FBQUUsb0JBQUksSUFBSUEsRUFBQyxFQUFFLFFBQVEsTUFBTTtBQUFFLDBCQUFRLEtBQUssSUFBSUEsRUFBQyxFQUFFLE1BQU07QUFBQSxnQkFBRTtBQUFBLGNBQUU7QUFBQSxZQUFFO0FBQUEsVUFDdkUsQ0FBTztBQUNELGlCQUFPO0FBQUEsUUFDYjtBQUFBLFFBRUksY0FBYyxTQUFTdUIsTUFBSztBQUMxQixjQUFJLElBQUliLFVBQVMsS0FBSyxPQUFPLFVBQVUsS0FBSyxjQUFhLEVBQUc7QUFDNUQsZUFBSyxLQUFLLFNBQVUsTUFBTTtBQUN4QixnQkFBSSxLQUFLLEtBQUssS0FBSyxTQUFTO0FBQzVCLGdCQUFJLEtBQUthLE1BQUs7QUFBRSxtQkFBS0E7QUFBSyxxQkFBTztBQUFBLFlBQUk7QUFDckMsWUFBQUEsUUFBTztBQUNQLGNBQUViO0FBQUEsVUFDVixDQUFPO0FBQ0QsaUJBQU8sUUFBUSxNQUFNLElBQUlBLFNBQVEsRUFBRSxDQUFDO0FBQUEsUUFDMUM7QUFBQSxRQUNJLGNBQWMsU0FBVSxRQUFRO0FBQzlCLG1CQUFTLFFBQVEsTUFBTSxNQUFNO0FBQzdCLGNBQUksUUFBUSxPQUFPO0FBQ25CLGNBQUksT0FBTyxPQUFPLEtBQUssU0FBUyxPQUFPLEtBQUssR0FBRztBQUFFLG1CQUFPO0FBQUEsVUFBQztBQUN6RCxjQUFJLFVBQVUsS0FBSyxjQUFhLEVBQUc7QUFDbkMsZUFBSyxLQUFLLEtBQUssT0FBTyxPQUFPLE1BQU0sU0FBVSxNQUFNO0FBQ2pELHFCQUFTLEtBQUssS0FBSyxTQUFTO0FBQUEsVUFDcEMsQ0FBTztBQUNELGlCQUFPO0FBQUEsUUFDYjtBQUFBLFFBRUksTUFBTSxTQUFTLGFBQWE7QUFDMUIsY0FBSVIsT0FBTSxJQUFJO0FBQUEsWUFBSSxTQUFTLE1BQU0sS0FBSyxPQUFPLEtBQUssUUFBUSxLQUFLLElBQUk7QUFBQSxZQUNqRCxLQUFLO0FBQUEsWUFBWSxLQUFLO0FBQUEsWUFBTyxLQUFLO0FBQUEsWUFBUyxLQUFLO0FBQUEsVUFBUztBQUMzRSxVQUFBQSxLQUFJLFlBQVksS0FBSztBQUFXLFVBQUFBLEtBQUksYUFBYSxLQUFLO0FBQ3RELFVBQUFBLEtBQUksTUFBTSxLQUFLO0FBQ2YsVUFBQUEsS0FBSSxTQUFTO0FBQ2IsY0FBSSxhQUFhO0FBQ2YsWUFBQUEsS0FBSSxRQUFRLFlBQVksS0FBSyxRQUFRO0FBQ3JDLFlBQUFBLEtBQUksV0FBVyxLQUFLLFlBQVk7QUFBQSxVQUN4QztBQUNNLGlCQUFPQTtBQUFBLFFBQ2I7QUFBQSxRQUVJLFdBQVcsU0FBUyxTQUFTO0FBQzNCLGNBQUksQ0FBQyxTQUFTO0FBQUUsc0JBQVUsQ0FBQTtBQUFBLFVBQUc7QUFDN0IsY0FBSSxPQUFPLEtBQUssT0FBTyxLQUFLLEtBQUssUUFBUSxLQUFLO0FBQzlDLGNBQUksUUFBUSxRQUFRLFFBQVEsUUFBUSxPQUFPLE1BQU07QUFBRSxtQkFBTyxRQUFRO0FBQUEsVUFBSztBQUN2RSxjQUFJLFFBQVEsTUFBTSxRQUFRLFFBQVEsS0FBSyxJQUFJO0FBQUUsaUJBQUssUUFBUTtBQUFBLFVBQUc7QUFDN0QsY0FBSSxPQUFPLElBQUksSUFBSSxTQUFTLE1BQU0sTUFBTSxFQUFFLEdBQUcsUUFBUSxRQUFRLEtBQUssWUFBWSxNQUFNLEtBQUssU0FBUyxLQUFLLFNBQVM7QUFDaEgsY0FBSSxRQUFRLFlBQVk7QUFBRSxpQkFBSyxVQUFVLEtBQUs7QUFBQSxVQUM3QztBQUFFLFdBQUMsS0FBSyxXQUFXLEtBQUssU0FBUyxDQUFBLElBQUssS0FBSyxFQUFDLEtBQUssTUFBTSxZQUFZLFFBQVEsV0FBVSxDQUFDO0FBQ3ZGLGVBQUssU0FBUyxDQUFDLEVBQUMsS0FBSyxNQUFNLFVBQVUsTUFBTSxZQUFZLFFBQVEsV0FBVSxDQUFDO0FBQzFFLDRCQUFrQixNQUFNLGtCQUFrQixJQUFJLENBQUM7QUFDL0MsaUJBQU87QUFBQSxRQUNiO0FBQUEsUUFDSSxXQUFXLFNBQVMsT0FBTztBQUN6QixjQUFJLGlCQUFpQixZQUFZO0FBQUUsb0JBQVEsTUFBTTtBQUFBLFVBQUk7QUFDckQsY0FBSSxLQUFLLFFBQVE7QUFBRSxxQkFBU0YsS0FBSSxHQUFHQSxLQUFJLEtBQUssT0FBTyxRQUFRLEVBQUVBLElBQUc7QUFDOUQsa0JBQUksT0FBTyxLQUFLLE9BQU9BLEVBQUM7QUFDeEIsa0JBQUksS0FBSyxPQUFPLE9BQU87QUFBRTtBQUFBLGNBQVE7QUFDakMsbUJBQUssT0FBTyxPQUFPQSxJQUFHLENBQUM7QUFDdkIsb0JBQU0sVUFBVSxJQUFJO0FBQ3BCLGtDQUFvQixrQkFBa0IsSUFBSSxDQUFDO0FBQzNDO0FBQUEsWUFDUjtBQUFBLFVBQU87QUFFRCxjQUFJLE1BQU0sV0FBVyxLQUFLLFNBQVM7QUFDakMsZ0JBQUksV0FBVyxDQUFDLE1BQU0sRUFBRTtBQUN4Qix1QkFBVyxPQUFPLFNBQVVFLE1BQUs7QUFBRSxxQkFBTyxTQUFTLEtBQUtBLEtBQUksRUFBRTtBQUFBLFlBQUUsR0FBSSxJQUFJO0FBQ3hFLGtCQUFNLFVBQVUsSUFBSSxRQUFRLElBQUk7QUFDaEMsa0JBQU0sUUFBUSxPQUFPLGlCQUFpQixLQUFLLFFBQVEsTUFBTSxRQUFRO0FBQ2pFLGtCQUFNLFFBQVEsU0FBUyxpQkFBaUIsS0FBSyxRQUFRLFFBQVEsUUFBUTtBQUFBLFVBQzdFO0FBQUEsUUFDQTtBQUFBLFFBQ0ksZ0JBQWdCLFNBQVMsR0FBRztBQUFDLHFCQUFXLE1BQU0sQ0FBQztBQUFBLFFBQUU7QUFBQSxRQUVqRCxTQUFTLFdBQVc7QUFBQyxpQkFBTyxLQUFLO0FBQUEsUUFBSTtBQUFBLFFBQ3JDLFdBQVcsV0FBVztBQUFDLGlCQUFPLEtBQUs7QUFBQSxRQUFFO0FBQUEsUUFFckMsWUFBWSxTQUFTLEtBQUs7QUFDeEIsY0FBSSxLQUFLLFNBQVM7QUFBRSxtQkFBTyxJQUFJLE1BQU0sS0FBSyxPQUFPO0FBQUEsVUFBQztBQUNsRCxpQkFBTyxlQUFlLEdBQUc7QUFBQSxRQUMvQjtBQUFBLFFBQ0ksZUFBZSxXQUFXO0FBQUUsaUJBQU8sS0FBSyxXQUFXO0FBQUEsUUFBSTtBQUFBLFFBRXZELGNBQWMsWUFBWSxTQUFVLEtBQUs7QUFDdkMsY0FBSSxPQUFPLE9BQU87QUFBRSxrQkFBTTtBQUFBLFVBQU07QUFDaEMsY0FBSSxPQUFPLEtBQUssV0FBVztBQUFFO0FBQUEsVUFBTTtBQUNuQyxlQUFLLFlBQVk7QUFDakIsZUFBSyxLQUFLLFNBQVUsTUFBTTtBQUFFLG1CQUFPLEtBQUssUUFBUTtBQUFBLFdBQU87QUFDdkQsY0FBSSxLQUFLLElBQUk7QUFBRSw2QkFBaUIsS0FBSyxFQUFFO0FBQUEsVUFBRTtBQUFBLFFBQy9DLENBQUs7QUFBQSxNQUNMLENBQUc7QUFHRCxVQUFJLFVBQVUsV0FBVyxJQUFJLFVBQVU7QUFJdkMsVUFBSSxXQUFXO0FBRWYsZUFBUyxPQUFPLEdBQUc7QUFDakIsWUFBSSxLQUFLO0FBQ1Qsd0JBQWdCLEVBQUU7QUFDbEIsWUFBSSxlQUFlLElBQUksQ0FBQyxLQUFLLGNBQWMsR0FBRyxTQUFTLENBQUMsR0FDdEQ7QUFBRTtBQUFBLFFBQU07QUFDVix5QkFBaUIsQ0FBQztBQUNsQixZQUFJLElBQUk7QUFBRSxxQkFBVyxDQUFDLG9CQUFJO0FBQUEsUUFBSztBQUMvQixZQUFJLE1BQU0sYUFBYSxJQUFJLEdBQUcsSUFBSSxHQUFHLFFBQVEsRUFBRSxhQUFhO0FBQzVELFlBQUksQ0FBQyxPQUFPLEdBQUcsV0FBVSxHQUFJO0FBQUU7QUFBQSxRQUFNO0FBR3JDLFlBQUksU0FBUyxNQUFNLFVBQVUsT0FBTyxjQUFjLE9BQU8sTUFBTTtBQUM3RCxjQUFJLElBQUksTUFBTSxRQUFRLE9BQU8sTUFBTSxDQUFDLEdBQUcsT0FBTztBQUM5QyxjQUFJLHNDQUFzQyxXQUFZO0FBQ3BELGdCQUFJLEVBQUUsUUFBUSxHQUFHO0FBQ2Ysd0JBQVUsSUFBSSxXQUFZO0FBQ3hCLHNCQUFNLFFBQVEsR0FBRyxLQUFLLEdBQUc7QUFDekIsb0JBQUksU0FBUztBQUFBLGtCQUFDLE1BQU07QUFBQSxrQkFBSyxJQUFJO0FBQUEsa0JBQ2YsTUFBTSxHQUFHLElBQUk7QUFBQSxvQkFDVCxLQUFLLE9BQU8sU0FBVSxHQUFHO0FBQUUsNkJBQU8sS0FBSztBQUFBLG9CQUFLLENBQUUsRUFBRSxLQUFLLEdBQUcsSUFBSSxjQUFhLENBQUU7QUFBQSxrQkFBQztBQUFBLGtCQUNoRixRQUFRO0FBQUEsZ0JBQU87QUFDN0IsMkJBQVcsR0FBRyxLQUFLLE1BQU07QUFDekIsMkNBQTJCLEdBQUcsS0FBSyxnQkFBZ0IsUUFBUSxHQUFHLEtBQUssR0FBRyxHQUFHLFFBQVEsR0FBRyxLQUFLLFVBQVUsTUFBTSxDQUFDLENBQUMsQ0FBQztBQUFBLGNBQ3hILENBQVcsRUFBQztBQUFBLFlBQ1o7QUFBQSxVQUNBO0FBQ00sY0FBSSxtQkFBbUIsU0FBVSxNQUFNRixJQUFHO0FBQ3hDLGdCQUFJLEdBQUcsUUFBUSxzQkFDWCxRQUFRLEdBQUcsUUFBUSxvQkFBb0IsS0FBSyxJQUFJLEtBQUssSUFBSTtBQUMzRCxrREFBbUM7QUFDbkM7QUFBQSxZQUNWO0FBQ1EsZ0JBQUksU0FBUyxJQUFJO0FBQ2pCLG1CQUFPLFVBQVUsV0FBWTtBQUFFLHFCQUFPLG9DQUFtQztBQUFBLFlBQUc7QUFDNUUsbUJBQU8sU0FBUyxXQUFZO0FBQzFCLGtCQUFJLFVBQVUsT0FBTztBQUNyQixrQkFBSSwwQkFBMEIsS0FBSyxPQUFPLEdBQUc7QUFDM0Msb0RBQW1DO0FBQ25DO0FBQUEsY0FDWjtBQUNVLG1CQUFLQSxFQUFDLElBQUk7QUFDVixrREFBbUM7QUFBQSxZQUM3QztBQUNRLG1CQUFPLFdBQVcsSUFBSTtBQUFBLFVBQzlCO0FBQ00sbUJBQVNBLEtBQUksR0FBR0EsS0FBSSxNQUFNLFFBQVFBLE1BQUs7QUFBRSw2QkFBaUIsTUFBTUEsRUFBQyxHQUFHQSxFQUFDO0FBQUEsVUFBRTtBQUFBLFFBQzdFLE9BQVc7QUFFTCxjQUFJLEdBQUcsTUFBTSxnQkFBZ0IsR0FBRyxJQUFJLElBQUksU0FBUyxHQUFHLElBQUksSUFBSTtBQUMxRCxlQUFHLE1BQU0sYUFBYSxDQUFDO0FBRXZCLHVCQUFXLFdBQVk7QUFBRSxxQkFBTyxHQUFHLFFBQVEsTUFBTSxNQUFLO0FBQUEsWUFBRyxHQUFJLEVBQUU7QUFDL0Q7QUFBQSxVQUNSO0FBQ00sY0FBSTtBQUNGLGdCQUFJLFNBQVMsRUFBRSxhQUFhLFFBQVEsTUFBTTtBQUMxQyxnQkFBSSxRQUFRO0FBQ1Ysa0JBQUk7QUFDSixrQkFBSSxHQUFHLE1BQU0sZ0JBQWdCLENBQUMsR0FBRyxNQUFNLGFBQWEsTUFDbEQ7QUFBRSwyQkFBVyxHQUFHLGVBQWM7QUFBQSxjQUFHO0FBQ25DLGlDQUFtQixHQUFHLEtBQUssZ0JBQWdCLEtBQUssR0FBRyxDQUFDO0FBQ3BELGtCQUFJLFVBQVU7QUFBRSx5QkFBU0ssT0FBTSxHQUFHQSxPQUFNLFNBQVMsUUFBUSxFQUFFQSxNQUN6RDtBQUFFLCtCQUFhLEdBQUcsS0FBSyxJQUFJLFNBQVNBLElBQUcsRUFBRSxRQUFRLFNBQVNBLElBQUcsRUFBRSxNQUFNLE1BQU07QUFBQSxnQkFBRTtBQUFBLGNBQUU7QUFDakYsaUJBQUcsaUJBQWlCLFFBQVEsVUFBVSxPQUFPO0FBQzdDLGlCQUFHLFFBQVEsTUFBTSxNQUFLO0FBQUEsWUFDaEM7QUFBQSxVQUNBLFNBQ1ksS0FBSTtBQUFBLFVBQUE7QUFBQSxRQUNoQjtBQUFBLE1BQ0E7QUFFRSxlQUFTLFlBQVksSUFBSSxHQUFHO0FBQzFCLFlBQUksT0FBTyxDQUFDLEdBQUcsTUFBTSxnQkFBZ0IsQ0FBQyxvQkFBSSxTQUFPLFdBQVcsTUFBTTtBQUFFLGlCQUFPLENBQUM7QUFBRztBQUFBLFFBQU07QUFDckYsWUFBSSxlQUFlLElBQUksQ0FBQyxLQUFLLGNBQWMsR0FBRyxTQUFTLENBQUMsR0FBRztBQUFFO0FBQUEsUUFBTTtBQUVuRSxVQUFFLGFBQWEsUUFBUSxRQUFRLEdBQUcsYUFBWSxDQUFFO0FBQ2hELFVBQUUsYUFBYSxnQkFBZ0I7QUFJL0IsWUFBSSxFQUFFLGFBQWEsZ0JBQWdCLENBQUMsUUFBUTtBQUMxQyxjQUFJLE1BQU0sSUFBSSxPQUFPLE1BQU0sTUFBTSxtQ0FBbUM7QUFDcEUsY0FBSSxNQUFNO0FBQ1YsY0FBSSxRQUFRO0FBQ1YsZ0JBQUksUUFBUSxJQUFJLFNBQVM7QUFDekIsZUFBRyxRQUFRLFFBQVEsWUFBWSxHQUFHO0FBRWxDLGdCQUFJLE9BQU8sSUFBSTtBQUFBLFVBQ3ZCO0FBQ00sWUFBRSxhQUFhLGFBQWEsS0FBSyxHQUFHLENBQUM7QUFDckMsY0FBSSxRQUFRO0FBQUUsZ0JBQUksV0FBVyxZQUFZLEdBQUc7QUFBQSxVQUFFO0FBQUEsUUFDcEQ7QUFBQSxNQUNBO0FBRUUsZUFBUyxXQUFXLElBQUksR0FBRztBQUN6QixZQUFJLE1BQU0sYUFBYSxJQUFJLENBQUM7QUFDNUIsWUFBSSxDQUFDLEtBQUs7QUFBRTtBQUFBLFFBQU07QUFDbEIsWUFBSSxPQUFPLFNBQVMsdUJBQXNCO0FBQzFDLDRCQUFvQixJQUFJLEtBQUssSUFBSTtBQUNqQyxZQUFJLENBQUMsR0FBRyxRQUFRLFlBQVk7QUFDMUIsYUFBRyxRQUFRLGFBQWEsSUFBSSxPQUFPLE1BQU0sMkNBQTJDO0FBQ3BGLGFBQUcsUUFBUSxVQUFVLGFBQWEsR0FBRyxRQUFRLFlBQVksR0FBRyxRQUFRLFNBQVM7QUFBQSxRQUNuRjtBQUNJLDZCQUFxQixHQUFHLFFBQVEsWUFBWSxJQUFJO0FBQUEsTUFDcEQ7QUFFRSxlQUFTLGdCQUFnQixJQUFJO0FBQzNCLFlBQUksR0FBRyxRQUFRLFlBQVk7QUFDekIsYUFBRyxRQUFRLFVBQVUsWUFBWSxHQUFHLFFBQVEsVUFBVTtBQUN0RCxhQUFHLFFBQVEsYUFBYTtBQUFBLFFBQzlCO0FBQUEsTUFDQTtBQU1FLGVBQVMsa0JBQWtCLEdBQUc7QUFDNUIsWUFBSSxDQUFDLFNBQVMsd0JBQXdCO0FBQUU7QUFBQSxRQUFNO0FBQzlDLFlBQUksVUFBVSxTQUFTLHVCQUF1QixZQUFZLEdBQUcsVUFBVSxDQUFBO0FBQ3ZFLGlCQUFTTCxLQUFJLEdBQUdBLEtBQUksUUFBUSxRQUFRQSxNQUFLO0FBQ3ZDLGNBQUksS0FBSyxRQUFRQSxFQUFDLEVBQUU7QUFDcEIsY0FBSSxJQUFJO0FBQUUsb0JBQVEsS0FBSyxFQUFFO0FBQUEsVUFBRTtBQUFBLFFBQ2pDO0FBQ0ksWUFBSSxRQUFRLFFBQVE7QUFBRSxrQkFBUSxDQUFDLEVBQUUsVUFBVSxXQUFZO0FBQ3JELHFCQUFTQSxLQUFJLEdBQUdBLEtBQUksUUFBUSxRQUFRQSxNQUFLO0FBQUUsZ0JBQUUsUUFBUUEsRUFBQyxDQUFDO0FBQUEsWUFBRTtBQUFBLFVBQy9ELENBQUs7QUFBQSxRQUFFO0FBQUEsTUFDUDtBQUVFLFVBQUksb0JBQW9CO0FBQ3hCLGVBQVMsdUJBQXVCO0FBQzlCLFlBQUksbUJBQW1CO0FBQUU7QUFBQSxRQUFNO0FBQy9CLCtCQUFzQjtBQUN0Qiw0QkFBb0I7QUFBQSxNQUN4QjtBQUNFLGVBQVMseUJBQXlCO0FBRWhDLFlBQUk7QUFDSixXQUFHLFFBQVEsVUFBVSxXQUFZO0FBQy9CLGNBQUksZUFBZSxNQUFNO0FBQUUsMEJBQWMsV0FBVyxXQUFZO0FBQzlELDRCQUFjO0FBQ2QsZ0NBQWtCLFFBQVE7QUFBQSxZQUNsQyxHQUFTLEdBQUc7QUFBQSxVQUFFO0FBQUEsUUFDZCxDQUFLO0FBRUQsV0FBRyxRQUFRLFFBQVEsV0FBWTtBQUFFLGlCQUFPLGtCQUFrQixNQUFNO0FBQUEsU0FBSTtBQUFBLE1BQ3hFO0FBRUUsZUFBUyxTQUFTLElBQUk7QUFDcEIsWUFBSSxJQUFJLEdBQUc7QUFFWCxVQUFFLGtCQUFrQixFQUFFLG1CQUFtQixFQUFFLGlCQUFpQjtBQUM1RCxVQUFFLG9CQUFvQjtBQUN0QixXQUFHLFFBQU87QUFBQSxNQUNkO0FBRUUsVUFBSSxXQUFXO0FBQUEsUUFDYixHQUFHO0FBQUEsUUFBUyxHQUFHO0FBQUEsUUFBYSxHQUFHO0FBQUEsUUFBTyxJQUFJO0FBQUEsUUFBUyxJQUFJO0FBQUEsUUFBUyxJQUFJO0FBQUEsUUFBUSxJQUFJO0FBQUEsUUFDaEYsSUFBSTtBQUFBLFFBQVMsSUFBSTtBQUFBLFFBQVksSUFBSTtBQUFBLFFBQU8sSUFBSTtBQUFBLFFBQVMsSUFBSTtBQUFBLFFBQVUsSUFBSTtBQUFBLFFBQVksSUFBSTtBQUFBLFFBQ3ZGLElBQUk7QUFBQSxRQUFRLElBQUk7QUFBQSxRQUFRLElBQUk7QUFBQSxRQUFNLElBQUk7QUFBQSxRQUFTLElBQUk7QUFBQSxRQUFRLElBQUk7QUFBQSxRQUFhLElBQUk7QUFBQSxRQUNoRixJQUFJO0FBQUEsUUFBVSxJQUFJO0FBQUEsUUFBSyxJQUFJO0FBQUEsUUFBSyxJQUFJO0FBQUEsUUFBTyxJQUFJO0FBQUEsUUFBTyxJQUFJO0FBQUEsUUFDMUQsS0FBSztBQUFBLFFBQUssS0FBSztBQUFBLFFBQUssS0FBSztBQUFBLFFBQUssS0FBSztBQUFBLFFBQUssS0FBSztBQUFBLFFBQUssS0FBSztBQUFBLFFBQ3ZELEtBQUs7QUFBQSxRQUFLLEtBQUs7QUFBQSxRQUFLLEtBQUs7QUFBQSxRQUFLLEtBQUs7QUFBQSxRQUFLLEtBQUs7QUFBQSxRQUFLLEtBQUs7QUFBQSxRQUFLLEtBQUs7QUFBQSxRQUFLLEtBQUs7QUFBQSxRQUFLLEtBQUs7QUFBQSxRQUFLLEtBQUs7QUFBQSxRQUMvRixLQUFLO0FBQUEsUUFBSyxLQUFLO0FBQUEsUUFBSyxLQUFLO0FBQUEsUUFBTyxPQUFPO0FBQUEsUUFBTSxPQUFPO0FBQUEsUUFBUSxPQUFPO0FBQUEsUUFBUSxPQUFPO0FBQUEsUUFBUyxPQUFPO0FBQUEsUUFDbEcsT0FBTztBQUFBLFFBQVEsT0FBTztBQUFBLFFBQU8sT0FBTztBQUFBLFFBQVUsT0FBTztBQUFBLFFBQVksT0FBTztBQUFBO0FBSTFFLGVBQVMsSUFBSSxHQUFHLElBQUksSUFBSSxLQUFLO0FBQUUsaUJBQVMsSUFBSSxFQUFFLElBQUksU0FBUyxJQUFJLEVBQUUsSUFBSSxPQUFPLENBQUM7QUFBQSxNQUFFO0FBRS9FLGVBQVMsTUFBTSxJQUFJLE9BQU8sSUFBSSxPQUFPO0FBQUUsaUJBQVMsR0FBRyxJQUFJLE9BQU8sYUFBYSxHQUFHO0FBQUEsTUFBRTtBQUVoRixlQUFTLE1BQU0sR0FBRyxPQUFPLElBQUksT0FBTztBQUFFLGlCQUFTLE1BQU0sR0FBRyxJQUFJLFNBQVMsTUFBTSxLQUFLLElBQUksTUFBTTtBQUFBLE1BQUk7QUFFOUYsVUFBSSxTQUFTLENBQUE7QUFFYixhQUFPLFFBQVE7QUFBQSxRQUNiLFFBQVE7QUFBQSxRQUFjLFNBQVM7QUFBQSxRQUFlLE1BQU07QUFBQSxRQUFZLFFBQVE7QUFBQSxRQUN4RSxPQUFPO0FBQUEsUUFBYSxRQUFRO0FBQUEsUUFBb0IsVUFBVTtBQUFBLFFBQVksWUFBWTtBQUFBLFFBQ2xGLFVBQVU7QUFBQSxRQUFnQixhQUFhO0FBQUEsUUFBaUIsbUJBQW1CO0FBQUEsUUFDM0UsT0FBTztBQUFBLFFBQWMsYUFBYTtBQUFBLFFBQ2xDLFNBQVM7QUFBQSxRQUFvQixVQUFVO0FBQUEsUUFDdkMsT0FBTztBQUFBO0FBS1QsYUFBTyxZQUFZO0FBQUEsUUFDakIsVUFBVTtBQUFBLFFBQWEsVUFBVTtBQUFBLFFBQWMsVUFBVTtBQUFBLFFBQVEsZ0JBQWdCO0FBQUEsUUFBUSxVQUFVO0FBQUEsUUFDbkcsYUFBYTtBQUFBLFFBQWMsWUFBWTtBQUFBLFFBQVksV0FBVztBQUFBLFFBQVksYUFBYTtBQUFBLFFBQ3ZGLGFBQWE7QUFBQSxRQUFlLGNBQWM7QUFBQSxRQUFnQixZQUFZO0FBQUEsUUFBZSxhQUFhO0FBQUEsUUFDbEcsa0JBQWtCO0FBQUEsUUFBa0IsZUFBZTtBQUFBLFFBQWlCLFVBQVU7QUFBQSxRQUFRLFVBQVU7QUFBQSxRQUNoRyxVQUFVO0FBQUEsUUFBWSxnQkFBZ0I7QUFBQSxRQUFZLGdCQUFnQjtBQUFBLFFBQVcsZ0JBQWdCO0FBQUEsUUFDN0YsVUFBVTtBQUFBLFFBQWMsVUFBVTtBQUFBLFFBQ2xDLFVBQVU7QUFBQSxRQUFpQixnQkFBZ0I7QUFBQSxRQUFpQixTQUFTO0FBQUEsUUFDckUsZUFBZTtBQUFBO0FBR2pCLGFBQU8sU0FBUztBQUFBLFFBQ2QsVUFBVTtBQUFBLFFBQWUsVUFBVTtBQUFBLFFBQWMsVUFBVTtBQUFBLFFBQVksVUFBVTtBQUFBLFFBQ2pGLFVBQVU7QUFBQSxRQUFlLFVBQVU7QUFBQSxRQUFhLFVBQVU7QUFBQSxRQUFjLGdCQUFnQjtBQUFBLFFBQ3hGLFVBQVU7QUFBQSxRQUFnQixVQUFVO0FBQUEsUUFBaUIsaUJBQWlCO0FBQUEsUUFBaUIsVUFBVTtBQUFBLFFBQ2pHLFVBQVU7QUFBQSxRQUFrQixVQUFVO0FBQUE7QUFFeEMsYUFBTyxhQUFhO0FBQUEsUUFDbEIsU0FBUztBQUFBLFFBQWEsU0FBUztBQUFBLFFBQWMsU0FBUztBQUFBLFFBQVEsZUFBZTtBQUFBLFFBQVEsU0FBUztBQUFBLFFBQzlGLFlBQVk7QUFBQSxRQUFjLFVBQVU7QUFBQSxRQUFjLFdBQVc7QUFBQSxRQUFZLFlBQVk7QUFBQSxRQUFZLFlBQVk7QUFBQSxRQUM3RyxhQUFhO0FBQUEsUUFBZ0IsWUFBWTtBQUFBLFFBQWMsYUFBYTtBQUFBLFFBQWUsaUJBQWlCO0FBQUEsUUFDcEcsc0JBQXNCO0FBQUEsUUFBaUIsY0FBYztBQUFBLFFBQWlCLFNBQVM7QUFBQSxRQUFRLFNBQVM7QUFBQSxRQUNoRyxTQUFTO0FBQUEsUUFBWSxlQUFlO0FBQUEsUUFBWSxhQUFhO0FBQUEsUUFBVyxtQkFBbUI7QUFBQSxRQUMzRixTQUFTO0FBQUEsUUFBYyxTQUFTO0FBQUEsUUFBYyxpQkFBaUI7QUFBQSxRQUFzQixjQUFjO0FBQUEsUUFDbkcsU0FBUztBQUFBLFFBQWlCLGVBQWU7QUFBQSxRQUFpQixXQUFXO0FBQUEsUUFBYyxhQUFhO0FBQUEsUUFDaEcsZUFBZSxDQUFDLFNBQVMsUUFBUTtBQUFBO0FBRW5DLGFBQU8sU0FBUyxJQUFJLE1BQU0sT0FBTyxhQUFhLE9BQU87QUFJckQsZUFBUyxpQkFBaUIsTUFBTTtBQUM5QixZQUFJLFFBQVEsS0FBSyxNQUFNLFFBQVE7QUFDL0IsZUFBTyxNQUFNLE1BQU0sU0FBUyxDQUFDO0FBQzdCLFlBQUksS0FBSyxNQUFNLE9BQU87QUFDdEIsaUJBQVNBLEtBQUksR0FBR0EsS0FBSSxNQUFNLFNBQVMsR0FBR0EsTUFBSztBQUN6QyxjQUFJLE1BQU0sTUFBTUEsRUFBQztBQUNqQixjQUFJLGtCQUFrQixLQUFLLEdBQUcsR0FBRztBQUFFLGtCQUFNO0FBQUEsVUFBSyxXQUNyQyxZQUFZLEtBQUssR0FBRyxHQUFHO0FBQUUsa0JBQU07QUFBQSxVQUFLLFdBQ3BDLHNCQUFzQixLQUFLLEdBQUcsR0FBRztBQUFFLG1CQUFPO0FBQUEsVUFBSyxXQUMvQyxjQUFjLEtBQUssR0FBRyxHQUFHO0FBQUUsb0JBQVE7QUFBQSxVQUFLLE9BQzVDO0FBQUUsa0JBQU0sSUFBSSxNQUFNLGlDQUFpQyxHQUFHO0FBQUEsVUFBQztBQUFBLFFBQ2xFO0FBQ0ksWUFBSSxLQUFLO0FBQUUsaUJBQU8sU0FBUztBQUFBLFFBQUs7QUFDaEMsWUFBSSxNQUFNO0FBQUUsaUJBQU8sVUFBVTtBQUFBLFFBQUs7QUFDbEMsWUFBSSxLQUFLO0FBQUUsaUJBQU8sU0FBUztBQUFBLFFBQUs7QUFDaEMsWUFBSSxPQUFPO0FBQUUsaUJBQU8sV0FBVztBQUFBLFFBQUs7QUFDcEMsZUFBTztBQUFBLE1BQ1g7QUFPRSxlQUFTLGdCQUFnQixRQUFRO0FBQy9CLFlBQUksT0FBTyxDQUFBO0FBQ1gsaUJBQVMsV0FBVyxRQUFRO0FBQUUsY0FBSSxPQUFPLGVBQWUsT0FBTyxHQUFHO0FBQ2hFLGdCQUFJLFFBQVEsT0FBTyxPQUFPO0FBQzFCLGdCQUFJLG1DQUFtQyxLQUFLLE9BQU8sR0FBRztBQUFFO0FBQUEsWUFBUTtBQUNoRSxnQkFBSSxTQUFTLE9BQU87QUFBRSxxQkFBTyxPQUFPLE9BQU87QUFBRztBQUFBLFlBQVE7QUFFdEQsZ0JBQUksT0FBTyxJQUFJLFFBQVEsTUFBTSxHQUFHLEdBQUcsZ0JBQWdCO0FBQ25ELHFCQUFTQSxLQUFJLEdBQUdBLEtBQUksS0FBSyxRQUFRQSxNQUFLO0FBQ3BDLGtCQUFJLE1BQU8sUUFBUyxPQUFRO0FBQzVCLGtCQUFJQSxNQUFLLEtBQUssU0FBUyxHQUFHO0FBQ3hCLHVCQUFPLEtBQUssS0FBSyxHQUFHO0FBQ3BCLHNCQUFNO0FBQUEsY0FDaEIsT0FBZTtBQUNMLHVCQUFPLEtBQUssTUFBTSxHQUFHQSxLQUFJLENBQUMsRUFBRSxLQUFLLEdBQUc7QUFDcEMsc0JBQU07QUFBQSxjQUNoQjtBQUNRLGtCQUFJLE9BQU8sS0FBSyxJQUFJO0FBQ3BCLGtCQUFJLENBQUMsTUFBTTtBQUFFLHFCQUFLLElBQUksSUFBSTtBQUFBLGNBQUksV0FDckIsUUFBUSxLQUFLO0FBQUUsc0JBQU0sSUFBSSxNQUFNLCtCQUErQixJQUFJO0FBQUEsY0FBQztBQUFBLFlBQ3BGO0FBQ00sbUJBQU8sT0FBTyxPQUFPO0FBQUEsVUFDM0I7QUFBQSxRQUFLO0FBQ0QsaUJBQVNHLFNBQVEsTUFBTTtBQUFFLGlCQUFPQSxLQUFJLElBQUksS0FBS0EsS0FBSTtBQUFBLFFBQUU7QUFDbkQsZUFBTztBQUFBLE1BQ1g7QUFFRSxlQUFTLFVBQVUsS0FBS0ksTUFBSyxRQUFRLFNBQVM7QUFDNUMsUUFBQUEsT0FBTSxVQUFVQSxJQUFHO0FBQ25CLFlBQUksUUFBUUEsS0FBSSxPQUFPQSxLQUFJLEtBQUssS0FBSyxPQUFPLElBQUlBLEtBQUksR0FBRztBQUN2RCxZQUFJLFVBQVUsT0FBTztBQUFFLGlCQUFPO0FBQUEsUUFBUztBQUN2QyxZQUFJLFVBQVUsT0FBTztBQUFFLGlCQUFPO0FBQUEsUUFBTztBQUNyQyxZQUFJLFNBQVMsUUFBUSxPQUFPLEtBQUssR0FBRztBQUFFLGlCQUFPO0FBQUEsUUFBUztBQUV0RCxZQUFJQSxLQUFJLGFBQWE7QUFDbkIsY0FBSSxPQUFPLFVBQVUsU0FBUyxLQUFLQSxLQUFJLFdBQVcsS0FBSyxrQkFDckQ7QUFBRSxtQkFBTyxVQUFVLEtBQUtBLEtBQUksYUFBYSxRQUFRLE9BQU87QUFBQSxVQUFDO0FBQzNELG1CQUFTUCxLQUFJLEdBQUdBLEtBQUlPLEtBQUksWUFBWSxRQUFRUCxNQUFLO0FBQy9DLGdCQUFJLFNBQVMsVUFBVSxLQUFLTyxLQUFJLFlBQVlQLEVBQUMsR0FBRyxRQUFRLE9BQU87QUFDL0QsZ0JBQUksUUFBUTtBQUFFLHFCQUFPO0FBQUEsWUFBTTtBQUFBLFVBQ25DO0FBQUEsUUFDQTtBQUFBLE1BQ0E7QUFJRSxlQUFTLGNBQWMsT0FBTztBQUM1QixZQUFJLE9BQU8sT0FBTyxTQUFTLFdBQVcsUUFBUSxTQUFTLE1BQU0sT0FBTztBQUNwRSxlQUFPLFFBQVEsVUFBVSxRQUFRLFNBQVMsUUFBUSxXQUFXLFFBQVE7QUFBQSxNQUN6RTtBQUVFLGVBQVMsaUJBQWlCLE1BQU0sT0FBTyxTQUFTO0FBQzlDLFlBQUksT0FBTztBQUNYLFlBQUksTUFBTSxVQUFVLFFBQVEsT0FBTztBQUFFLGlCQUFPLFNBQVM7QUFBQSxRQUFLO0FBQzFELGFBQUssY0FBYyxNQUFNLFVBQVUsTUFBTSxZQUFZLFFBQVEsUUFBUTtBQUFFLGlCQUFPLFVBQVU7QUFBQSxRQUFLO0FBQzdGLGFBQUssY0FBYyxNQUFNLFVBQVUsTUFBTSxZQUFZLFFBQVEsT0FBTztBQUFFLGlCQUFPLFNBQVM7QUFBQSxRQUFLO0FBQzNGLFlBQUksQ0FBQyxXQUFXLE1BQU0sWUFBWSxRQUFRLFNBQVM7QUFBRSxpQkFBTyxXQUFXO0FBQUEsUUFBSztBQUM1RSxlQUFPO0FBQUEsTUFDWDtBQUdFLGVBQVMsUUFBUSxPQUFPLFNBQVM7QUFDL0IsWUFBSSxVQUFVLE1BQU0sV0FBVyxNQUFNLE1BQU0sTUFBTSxHQUFHO0FBQUUsaUJBQU87QUFBQSxRQUFLO0FBQ2xFLFlBQUksT0FBTyxTQUFTLE1BQU0sT0FBTztBQUNqQyxZQUFJLFFBQVEsUUFBUSxNQUFNLGFBQWE7QUFBRSxpQkFBTztBQUFBLFFBQUs7QUFHckQsWUFBSSxNQUFNLFdBQVcsS0FBSyxNQUFNLE1BQU07QUFBRSxpQkFBTyxNQUFNO0FBQUEsUUFBSztBQUMxRCxlQUFPLGlCQUFpQixNQUFNLE9BQU8sT0FBTztBQUFBLE1BQ2hEO0FBRUUsZUFBUyxVQUFVLEtBQUs7QUFDdEIsZUFBTyxPQUFPLE9BQU8sV0FBVyxPQUFPLEdBQUcsSUFBSTtBQUFBLE1BQ2xEO0FBSUUsZUFBUyxvQkFBb0IsSUFBSSxTQUFTO0FBQ3hDLFlBQUksU0FBUyxHQUFHLElBQUksSUFBSSxRQUFRLE9BQU8sQ0FBQTtBQUd2QyxpQkFBU0EsS0FBSSxHQUFHQSxLQUFJLE9BQU8sUUFBUUEsTUFBSztBQUN0QyxjQUFJLFNBQVMsUUFBUSxPQUFPQSxFQUFDLENBQUM7QUFDOUIsaUJBQU8sS0FBSyxVQUFVLElBQUksT0FBTyxNQUFNLElBQUksSUFBSSxFQUFFLEVBQUUsS0FBSyxHQUFHO0FBQ3pELGdCQUFJLFdBQVcsS0FBSyxJQUFHO0FBQ3ZCLGdCQUFJLElBQUksU0FBUyxNQUFNLE9BQU8sSUFBSSxJQUFJLEdBQUc7QUFDdkMscUJBQU8sT0FBTyxTQUFTO0FBQ3ZCO0FBQUEsWUFDVjtBQUFBLFVBQ0E7QUFDTSxlQUFLLEtBQUssTUFBTTtBQUFBLFFBQ3RCO0FBRUksZ0JBQVEsSUFBSSxXQUFZO0FBQ3RCLG1CQUFTQSxLQUFJLEtBQUssU0FBUyxHQUFHQSxNQUFLLEdBQUdBLE1BQ3BDO0FBQUUseUJBQWEsR0FBRyxLQUFLLElBQUksS0FBS0EsRUFBQyxFQUFFLE1BQU0sS0FBS0EsRUFBQyxFQUFFLElBQUksU0FBUztBQUFBLFVBQUU7QUFDbEUsOEJBQW9CLEVBQUU7QUFBQSxRQUM1QixDQUFLO0FBQUEsTUFDTDtBQUVFLGVBQVMsa0JBQWtCLE1BQU0sSUFBSSxLQUFLO0FBQ3hDLFlBQUksU0FBUyxtQkFBbUIsS0FBSyxNQUFNLEtBQUssS0FBSyxHQUFHO0FBQ3hELGVBQU8sU0FBUyxLQUFLLFNBQVMsS0FBSyxLQUFLLFNBQVMsT0FBTztBQUFBLE1BQzVEO0FBRUUsZUFBUyxjQUFjLE1BQU0sT0FBTyxLQUFLO0FBQ3ZDLFlBQUksS0FBSyxrQkFBa0IsTUFBTSxNQUFNLElBQUksR0FBRztBQUM5QyxlQUFPLE1BQU0sT0FBTyxPQUFPLElBQUksSUFBSSxNQUFNLE1BQU0sSUFBSSxNQUFNLElBQUksVUFBVSxRQUFRO0FBQUEsTUFDbkY7QUFFRSxlQUFTLFVBQVUsVUFBVSxJQUFJLFNBQVNVLFNBQVEsS0FBSztBQUNyRCxZQUFJLFVBQVU7QUFDWixjQUFJLEdBQUcsSUFBSSxhQUFhLE9BQU87QUFBRSxrQkFBTSxDQUFDO0FBQUEsVUFBSTtBQUM1QyxjQUFJLFFBQVEsU0FBUyxTQUFTLEdBQUcsSUFBSSxTQUFTO0FBQzlDLGNBQUksT0FBTztBQUNULGdCQUFJLE9BQU8sTUFBTSxJQUFJLElBQUksS0FBSyxJQUFJLE1BQU0sQ0FBQztBQUN6QyxnQkFBSSxxQkFBc0IsTUFBTSxNQUFPLEtBQUssU0FBUztBQUNyRCxnQkFBSSxTQUFTLHFCQUFxQixVQUFVO0FBQzVDLGdCQUFJO0FBT0osZ0JBQUksS0FBSyxRQUFRLEtBQUssR0FBRyxJQUFJLGFBQWEsT0FBTztBQUMvQyxrQkFBSSxPQUFPLHNCQUFzQixJQUFJLE9BQU87QUFDNUMsbUJBQUssTUFBTSxJQUFJLFFBQVEsS0FBSyxTQUFTLElBQUk7QUFDekMsa0JBQUksWUFBWSxvQkFBb0IsSUFBSSxNQUFNLEVBQUUsRUFBRTtBQUNsRCxtQkFBSyxVQUFVLFNBQVVFLEtBQUk7QUFBRSx1QkFBTyxvQkFBb0IsSUFBSSxNQUFNQSxHQUFFLEVBQUUsT0FBTztBQUFBLGNBQVUsR0FBSyxNQUFNLE1BQU8sS0FBSyxTQUFTLEtBQUssS0FBSyxPQUFPLEtBQUssS0FBSyxHQUFHLEVBQUU7QUFDekosa0JBQUksVUFBVSxVQUFVO0FBQUUscUJBQUssa0JBQWtCLFNBQVMsSUFBSSxDQUFDO0FBQUEsY0FBRTtBQUFBLFlBQzNFLE9BQWU7QUFBRSxtQkFBSyxNQUFNLElBQUksS0FBSyxLQUFLLEtBQUs7QUFBQSxZQUFLO0FBQzVDLG1CQUFPLElBQUksSUFBSUYsU0FBUSxJQUFJLE1BQU07QUFBQSxVQUN6QztBQUFBLFFBQ0E7QUFDSSxlQUFPLElBQUksSUFBSUEsU0FBUSxNQUFNLElBQUksUUFBUSxLQUFLLFNBQVMsR0FBRyxNQUFNLElBQUksV0FBVyxPQUFPO0FBQUEsTUFDMUY7QUFFRSxlQUFTLGFBQWEsSUFBSSxNQUFNLE9BQU8sS0FBSztBQUMxQyxZQUFJLE9BQU8sU0FBUyxNQUFNLEdBQUcsSUFBSSxTQUFTO0FBQzFDLFlBQUksQ0FBQyxNQUFNO0FBQUUsaUJBQU8sY0FBYyxNQUFNLE9BQU8sR0FBRztBQUFBLFFBQUM7QUFDbkQsWUFBSSxNQUFNLE1BQU0sS0FBSyxLQUFLLFFBQVE7QUFDaEMsZ0JBQU0sS0FBSyxLQUFLLEtBQUs7QUFDckIsZ0JBQU0sU0FBUztBQUFBLFFBQ3JCLFdBQWUsTUFBTSxNQUFNLEdBQUc7QUFDeEIsZ0JBQU0sS0FBSztBQUNYLGdCQUFNLFNBQVM7QUFBQSxRQUNyQjtBQUNJLFlBQUksVUFBVSxjQUFjLE1BQU0sTUFBTSxJQUFJLE1BQU0sTUFBTSxHQUFHLE9BQU8sS0FBSyxPQUFPO0FBQzlFLFlBQUksR0FBRyxJQUFJLGFBQWEsU0FBUyxLQUFLLFFBQVEsS0FBSyxNQUFNLE1BQU0sSUFBSSxLQUFLLEtBQUssTUFBTSxLQUFLLEtBQUssT0FBTyxNQUFNLEtBQUs7QUFHN0csaUJBQU8sY0FBYyxNQUFNLE9BQU8sR0FBRztBQUFBLFFBQzNDO0FBRUksWUFBSSxLQUFLLFNBQVUsS0FBS2MsTUFBSztBQUFFLGlCQUFPLGtCQUFrQixNQUFNLGVBQWUsTUFBTSxJQUFJLEtBQUssS0FBS0EsSUFBRztBQUFBLFFBQUU7QUFDdEcsWUFBSTtBQUNKLFlBQUksdUJBQXVCLFNBQVVaLEtBQUk7QUFDdkMsY0FBSSxDQUFDLEdBQUcsUUFBUSxjQUFjO0FBQUUsbUJBQU8sRUFBQyxPQUFPLEdBQUcsS0FBSyxLQUFLLEtBQUssT0FBTTtBQUFBLFVBQUM7QUFDeEUsaUJBQU8sUUFBUSxzQkFBc0IsSUFBSSxJQUFJO0FBQzdDLGlCQUFPLHNCQUFzQixJQUFJLE1BQU0sTUFBTUEsR0FBRTtBQUFBLFFBQ3JEO0FBQ0ksWUFBSWEscUJBQW9CLHFCQUFxQixNQUFNLFVBQVUsV0FBVyxHQUFHLE9BQU8sRUFBRSxJQUFJLE1BQU0sRUFBRTtBQUVoRyxZQUFJLEdBQUcsSUFBSSxhQUFhLFNBQVMsS0FBSyxTQUFTLEdBQUc7QUFDaEQsY0FBSSxxQkFBc0IsS0FBSyxTQUFTLEtBQU8sTUFBTTtBQUNyRCxjQUFJLEtBQUssR0FBRyxPQUFPLHFCQUFxQixJQUFJLEVBQUU7QUFDOUMsY0FBSSxNQUFNLFNBQVMsQ0FBQyxxQkFBcUIsTUFBTSxLQUFLLFFBQVEsTUFBTUEsbUJBQWtCLFFBQVEsTUFBTSxLQUFLLE1BQU0sTUFBTUEsbUJBQWtCLE1BQU07QUFFekksZ0JBQUksU0FBUyxxQkFBcUIsV0FBVztBQUM3QyxtQkFBTyxJQUFJLElBQUksTUFBTSxNQUFNLElBQUksTUFBTTtBQUFBLFVBQzdDO0FBQUEsUUFDQTtBQUtJLFlBQUkscUJBQXFCLFNBQVVaLFVBQVNXLE1BQUtDLG9CQUFtQjtBQUNsRSxjQUFJLFNBQVMsU0FBVWIsS0FBSWMscUJBQW9CO0FBQUUsbUJBQU9BLHNCQUNwRCxJQUFJLElBQUksTUFBTSxNQUFNLEdBQUdkLEtBQUksQ0FBQyxHQUFHLFFBQVEsSUFDdkMsSUFBSSxJQUFJLE1BQU0sTUFBTUEsS0FBSSxPQUFPO0FBQUEsVUFBRTtBQUVyQyxpQkFBT0MsWUFBVyxLQUFLQSxXQUFVLEtBQUssUUFBUUEsWUFBV1csTUFBSztBQUM1RCxnQkFBSVQsUUFBTyxLQUFLRixRQUFPO0FBQ3ZCLGdCQUFJYSxzQkFBc0JGLE9BQU0sTUFBT1QsTUFBSyxTQUFTO0FBQ3JELGdCQUFJSCxNQUFLYyxzQkFBcUJELG1CQUFrQixRQUFRLEdBQUdBLG1CQUFrQixLQUFLLEVBQUU7QUFDcEYsZ0JBQUlWLE1BQUssUUFBUUgsT0FBTUEsTUFBS0csTUFBSyxJQUFJO0FBQUUscUJBQU8sT0FBT0gsS0FBSWMsbUJBQWtCO0FBQUEsWUFBQztBQUM1RSxZQUFBZCxNQUFLYyxzQkFBcUJYLE1BQUssT0FBTyxHQUFHQSxNQUFLLElBQUksRUFBRTtBQUNwRCxnQkFBSVUsbUJBQWtCLFNBQVNiLE9BQU1BLE1BQUthLG1CQUFrQixLQUFLO0FBQUUscUJBQU8sT0FBT2IsS0FBSWMsbUJBQWtCO0FBQUEsWUFBQztBQUFBLFVBQ2hIO0FBQUEsUUFDQTtBQUdJLFlBQUksTUFBTSxtQkFBbUIsVUFBVSxLQUFLLEtBQUtELGtCQUFpQjtBQUNsRSxZQUFJLEtBQUs7QUFBRSxpQkFBTztBQUFBLFFBQUc7QUFHckIsWUFBSSxTQUFTLE1BQU0sSUFBSUEsbUJBQWtCLE1BQU0sR0FBR0EsbUJBQWtCLE9BQU8sRUFBRTtBQUM3RSxZQUFJLFVBQVUsUUFBUSxFQUFFLE1BQU0sS0FBSyxVQUFVLEtBQUssS0FBSyxTQUFTO0FBQzlELGdCQUFNLG1CQUFtQixNQUFNLElBQUksSUFBSSxLQUFLLFNBQVMsR0FBRyxLQUFLLHFCQUFxQixNQUFNLENBQUM7QUFDekYsY0FBSSxLQUFLO0FBQUUsbUJBQU87QUFBQSxVQUFHO0FBQUEsUUFDM0I7QUFHSSxlQUFPO0FBQUEsTUFDWDtBQUlFLFVBQUksV0FBVztBQUFBLFFBQ2I7QUFBQSxRQUNBLGlCQUFpQixTQUFVLElBQUk7QUFBRSxpQkFBTyxHQUFHLGFBQWEsR0FBRyxVQUFVLFFBQVEsR0FBRyxHQUFHLFVBQVUsTUFBTSxHQUFHLGNBQWM7QUFBQSxRQUFFO0FBQUEsUUFDdEgsVUFBVSxTQUFVLElBQUk7QUFBRSxpQkFBTyxvQkFBb0IsSUFBSSxTQUFVakIsUUFBTztBQUN4RSxnQkFBSUEsT0FBTSxTQUFTO0FBQ2pCLGtCQUFJLE1BQU0sUUFBUSxHQUFHLEtBQUtBLE9BQU0sS0FBSyxJQUFJLEVBQUUsS0FBSztBQUNoRCxrQkFBSUEsT0FBTSxLQUFLLE1BQU0sT0FBT0EsT0FBTSxLQUFLLE9BQU8sR0FBRyxTQUFRLEdBQ3ZEO0FBQUUsdUJBQU8sRUFBQyxNQUFNQSxPQUFNLE1BQU0sSUFBSSxJQUFJQSxPQUFNLEtBQUssT0FBTyxHQUFHLENBQUMsRUFBQztBQUFBLGNBQUMsT0FFNUQ7QUFBRSx1QkFBTyxFQUFDLE1BQU1BLE9BQU0sTUFBTSxJQUFJLElBQUlBLE9BQU0sS0FBSyxNQUFNLEdBQUcsRUFBQztBQUFBLGNBQUM7QUFBQSxZQUNwRSxPQUFhO0FBQ0wscUJBQU8sRUFBQyxNQUFNQSxPQUFNLEtBQUksR0FBSSxJQUFJQSxPQUFNLEdBQUUsRUFBRTtBQUFBLFlBQ2xEO0FBQUEsVUFDQSxDQUFLO0FBQUEsUUFBRTtBQUFBLFFBQ0gsWUFBWSxTQUFVLElBQUk7QUFBRSxpQkFBTyxvQkFBb0IsSUFBSSxTQUFVQSxRQUFPO0FBQUUsbUJBQVE7QUFBQSxjQUNwRixNQUFNLElBQUlBLE9BQU0sS0FBSSxFQUFHLE1BQU0sQ0FBQztBQUFBLGNBQzlCLElBQUksUUFBUSxHQUFHLEtBQUssSUFBSUEsT0FBTSxLQUFLLE9BQU8sR0FBRyxDQUFDLENBQUM7QUFBQSxZQUNyRDtBQUFBLFVBQU8sQ0FBRTtBQUFBLFFBQUU7QUFBQSxRQUNQLGFBQWEsU0FBVSxJQUFJO0FBQUUsaUJBQU8sb0JBQW9CLElBQUksU0FBVUEsUUFBTztBQUFFLG1CQUFRO0FBQUEsY0FDckYsTUFBTSxJQUFJQSxPQUFNLEtBQUksRUFBRyxNQUFNLENBQUM7QUFBQSxjQUFHLElBQUlBLE9BQU0sS0FBSTtBQUFBLFlBQ3JEO0FBQUEsVUFBTyxDQUFFO0FBQUEsUUFBRTtBQUFBLFFBQ1Asb0JBQW9CLFNBQVUsSUFBSTtBQUFFLGlCQUFPLG9CQUFvQixJQUFJLFNBQVVBLFFBQU87QUFDbEYsZ0JBQUksTUFBTSxHQUFHLFdBQVdBLE9BQU0sTUFBTSxLQUFLLEVBQUUsTUFBTTtBQUNqRCxnQkFBSSxVQUFVLEdBQUcsV0FBVyxFQUFDLE1BQU0sR0FBRyxJQUFRLEdBQUcsS0FBSztBQUN0RCxtQkFBTyxFQUFDLE1BQU0sU0FBUyxJQUFJQSxPQUFNLEtBQUksRUFBRTtBQUFBLFVBQzdDLENBQUs7QUFBQSxRQUFFO0FBQUEsUUFDSCxxQkFBcUIsU0FBVSxJQUFJO0FBQUUsaUJBQU8sb0JBQW9CLElBQUksU0FBVUEsUUFBTztBQUNuRixnQkFBSSxNQUFNLEdBQUcsV0FBV0EsT0FBTSxNQUFNLEtBQUssRUFBRSxNQUFNO0FBQ2pELGdCQUFJLFdBQVcsR0FBRyxXQUFXLEVBQUMsTUFBTSxHQUFHLFFBQVEsUUFBUSxjQUFjLEtBQUssSUFBUSxHQUFHLEtBQUs7QUFDMUYsbUJBQU8sRUFBQyxNQUFNQSxPQUFNLEtBQUksR0FBSSxJQUFJLFNBQVE7QUFBQSxVQUM5QyxDQUFLO0FBQUEsUUFBRTtBQUFBLFFBQ0gsTUFBTSxTQUFVLElBQUk7QUFBRSxpQkFBTyxHQUFHLEtBQUk7QUFBQSxRQUFHO0FBQUEsUUFDdkMsTUFBTSxTQUFVLElBQUk7QUFBRSxpQkFBTyxHQUFHLEtBQUk7QUFBQSxRQUFHO0FBQUEsUUFDdkMsZUFBZSxTQUFVLElBQUk7QUFBRSxpQkFBTyxHQUFHLGNBQWE7QUFBQSxRQUFHO0FBQUEsUUFDekQsZUFBZSxTQUFVLElBQUk7QUFBRSxpQkFBTyxHQUFHLGNBQWE7QUFBQSxRQUFHO0FBQUEsUUFDekQsWUFBWSxTQUFVLElBQUk7QUFBRSxpQkFBTyxHQUFHLGdCQUFnQixJQUFJLEdBQUcsVUFBUyxHQUFJLENBQUMsQ0FBQztBQUFBLFFBQUU7QUFBQSxRQUM5RSxVQUFVLFNBQVUsSUFBSTtBQUFFLGlCQUFPLEdBQUcsZ0JBQWdCLElBQUksR0FBRyxVQUFVLENBQUM7QUFBQSxRQUFFO0FBQUEsUUFDeEUsYUFBYSxTQUFVLElBQUk7QUFBRSxpQkFBTyxHQUFHO0FBQUEsWUFBbUIsU0FBVUEsUUFBTztBQUFFLHFCQUFPLFVBQVUsSUFBSUEsT0FBTSxLQUFLLElBQUk7QUFBQSxZQUFFO0FBQUEsWUFDakgsRUFBQyxRQUFRLFNBQVMsTUFBTSxFQUFDO0FBQUEsVUFDL0I7QUFBQSxRQUFNO0FBQUEsUUFDRixrQkFBa0IsU0FBVSxJQUFJO0FBQUUsaUJBQU8sR0FBRztBQUFBLFlBQW1CLFNBQVVBLFFBQU87QUFBRSxxQkFBTyxlQUFlLElBQUlBLE9BQU0sSUFBSTtBQUFBLFlBQUU7QUFBQSxZQUN0SCxFQUFDLFFBQVEsU0FBUyxNQUFNLEVBQUM7QUFBQSxVQUMvQjtBQUFBLFFBQU07QUFBQSxRQUNGLFdBQVcsU0FBVSxJQUFJO0FBQUUsaUJBQU8sR0FBRztBQUFBLFlBQW1CLFNBQVVBLFFBQU87QUFBRSxxQkFBTyxRQUFRLElBQUlBLE9BQU0sS0FBSyxJQUFJO0FBQUEsWUFBRTtBQUFBLFlBQzdHLEVBQUMsUUFBUSxTQUFTLE1BQU0sR0FBRTtBQUFBLFVBQ2hDO0FBQUEsUUFBTTtBQUFBLFFBQ0YsYUFBYSxTQUFVLElBQUk7QUFBRSxpQkFBTyxHQUFHLG1CQUFtQixTQUFVQSxRQUFPO0FBQ3pFLGdCQUFJLE1BQU0sR0FBRyxhQUFhQSxPQUFNLE1BQU0sS0FBSyxFQUFFLE1BQU07QUFDbkQsbUJBQU8sR0FBRyxXQUFXLEVBQUMsTUFBTSxHQUFHLFFBQVEsUUFBUSxjQUFjLEtBQUssSUFBUSxHQUFHLEtBQUs7QUFBQSxVQUN4RixHQUFPLFFBQVE7QUFBQSxRQUFFO0FBQUEsUUFDYixZQUFZLFNBQVUsSUFBSTtBQUFFLGlCQUFPLEdBQUcsbUJBQW1CLFNBQVVBLFFBQU87QUFDeEUsZ0JBQUksTUFBTSxHQUFHLGFBQWFBLE9BQU0sTUFBTSxLQUFLLEVBQUUsTUFBTTtBQUNuRCxtQkFBTyxHQUFHLFdBQVcsRUFBQyxNQUFNLEdBQUcsSUFBUSxHQUFHLEtBQUs7QUFBQSxVQUNyRCxHQUFPLFFBQVE7QUFBQSxRQUFFO0FBQUEsUUFDYixpQkFBaUIsU0FBVSxJQUFJO0FBQUUsaUJBQU8sR0FBRyxtQkFBbUIsU0FBVUEsUUFBTztBQUM3RSxnQkFBSSxNQUFNLEdBQUcsYUFBYUEsT0FBTSxNQUFNLEtBQUssRUFBRSxNQUFNO0FBQ25ELGdCQUFJLE1BQU0sR0FBRyxXQUFXLEVBQUMsTUFBTSxHQUFHLElBQVEsR0FBRyxLQUFLO0FBQ2xELGdCQUFJLElBQUksS0FBSyxHQUFHLFFBQVEsSUFBSSxJQUFJLEVBQUUsT0FBTyxJQUFJLEdBQUc7QUFBRSxxQkFBTyxlQUFlLElBQUlBLE9BQU0sSUFBSTtBQUFBLFlBQUM7QUFDdkYsbUJBQU87QUFBQSxVQUNiLEdBQU8sUUFBUTtBQUFBLFFBQUU7QUFBQSxRQUNiLFVBQVUsU0FBVSxJQUFJO0FBQUUsaUJBQU8sR0FBRyxNQUFNLElBQUksTUFBTTtBQUFBLFFBQUU7QUFBQSxRQUN0RCxZQUFZLFNBQVUsSUFBSTtBQUFFLGlCQUFPLEdBQUcsTUFBTSxHQUFHLE1BQU07QUFBQSxRQUFFO0FBQUEsUUFDdkQsVUFBVSxTQUFVLElBQUk7QUFBRSxpQkFBTyxHQUFHLE1BQU0sSUFBSSxNQUFNO0FBQUEsUUFBRTtBQUFBLFFBQ3RELFlBQVksU0FBVSxJQUFJO0FBQUUsaUJBQU8sR0FBRyxNQUFNLEdBQUcsTUFBTTtBQUFBLFFBQUU7QUFBQSxRQUN2RCxZQUFZLFNBQVUsSUFBSTtBQUFFLGlCQUFPLEdBQUcsTUFBTSxJQUFJLE1BQU07QUFBQSxRQUFFO0FBQUEsUUFDeEQsYUFBYSxTQUFVLElBQUk7QUFBRSxpQkFBTyxHQUFHLE1BQU0sR0FBRyxNQUFNO0FBQUEsUUFBRTtBQUFBLFFBQ3hELGNBQWMsU0FBVSxJQUFJO0FBQUUsaUJBQU8sR0FBRyxNQUFNLElBQUksUUFBUTtBQUFBLFFBQUU7QUFBQSxRQUM1RCxlQUFlLFNBQVUsSUFBSTtBQUFFLGlCQUFPLEdBQUcsTUFBTSxHQUFHLFFBQVE7QUFBQSxRQUFFO0FBQUEsUUFDNUQsWUFBWSxTQUFVLElBQUk7QUFBRSxpQkFBTyxHQUFHLE1BQU0sSUFBSSxNQUFNO0FBQUEsUUFBRTtBQUFBLFFBQ3hELGNBQWMsU0FBVSxJQUFJO0FBQUUsaUJBQU8sR0FBRyxNQUFNLEdBQUcsT0FBTztBQUFBLFFBQUU7QUFBQSxRQUMxRCxhQUFhLFNBQVUsSUFBSTtBQUFFLGlCQUFPLEdBQUcsTUFBTSxJQUFJLE9BQU87QUFBQSxRQUFFO0FBQUEsUUFDMUQsYUFBYSxTQUFVLElBQUk7QUFBRSxpQkFBTyxHQUFHLE1BQU0sR0FBRyxNQUFNO0FBQUEsUUFBRTtBQUFBLFFBQ3hELGVBQWUsU0FBVSxJQUFJO0FBQUUsaUJBQU8sR0FBRyxRQUFRLElBQUksV0FBVztBQUFBLFFBQUU7QUFBQSxRQUNsRSxjQUFjLFNBQVUsSUFBSTtBQUFFLGlCQUFPLEdBQUcsUUFBUSxHQUFHLE1BQU07QUFBQSxRQUFFO0FBQUEsUUFDM0QsZUFBZSxTQUFVLElBQUk7QUFBRSxpQkFBTyxHQUFHLFFBQVEsSUFBSSxNQUFNO0FBQUEsUUFBRTtBQUFBLFFBQzdELGNBQWMsU0FBVSxJQUFJO0FBQUUsaUJBQU8sR0FBRyxRQUFRLEdBQUcsTUFBTTtBQUFBLFFBQUU7QUFBQSxRQUMzRCxnQkFBZ0IsU0FBVSxJQUFJO0FBQUUsaUJBQU8sR0FBRyxRQUFRLElBQUksT0FBTztBQUFBLFFBQUU7QUFBQSxRQUMvRCxlQUFlLFNBQVUsSUFBSTtBQUFFLGlCQUFPLEdBQUcsUUFBUSxHQUFHLE9BQU87QUFBQSxRQUFFO0FBQUEsUUFDN0QsWUFBWSxTQUFVLElBQUk7QUFBRSxpQkFBTyxHQUFHLGdCQUFnQixPQUFPO0FBQUEsUUFBRTtBQUFBLFFBQy9ELFlBQVksU0FBVSxJQUFJO0FBQUUsaUJBQU8sR0FBRyxnQkFBZ0IsS0FBSztBQUFBLFFBQUU7QUFBQSxRQUM3RCxZQUFZLFNBQVUsSUFBSTtBQUFFLGlCQUFPLEdBQUcsZ0JBQWdCLFVBQVU7QUFBQSxRQUFFO0FBQUEsUUFDbEUsV0FBVyxTQUFVLElBQUk7QUFBRSxpQkFBTyxHQUFHLGlCQUFpQixHQUFJO0FBQUEsUUFBRTtBQUFBLFFBQzVELGVBQWUsU0FBVSxJQUFJO0FBQzNCLGNBQUksU0FBUyxJQUFJLFNBQVMsR0FBRyxlQUFjLEdBQUksVUFBVSxHQUFHLFFBQVE7QUFDcEUsbUJBQVNSLEtBQUksR0FBR0EsS0FBSSxPQUFPLFFBQVFBLE1BQUs7QUFDdEMsZ0JBQUksTUFBTSxPQUFPQSxFQUFDLEVBQUUsS0FBSTtBQUN4QixnQkFBSSxNQUFNLFlBQVksR0FBRyxRQUFRLElBQUksSUFBSSxHQUFHLElBQUksSUFBSSxPQUFPO0FBQzNELG1CQUFPLEtBQUssU0FBUyxVQUFVLE1BQU0sT0FBTyxDQUFDO0FBQUEsVUFDckQ7QUFDTSxhQUFHLGtCQUFrQixNQUFNO0FBQUEsUUFDakM7QUFBQSxRQUNJLFlBQVksU0FBVSxJQUFJO0FBQ3hCLGNBQUksR0FBRyxxQkFBcUI7QUFBRSxlQUFHLGdCQUFnQixLQUFLO0FBQUEsVUFBRSxPQUNuRDtBQUFFLGVBQUcsWUFBWSxXQUFXO0FBQUEsVUFBRTtBQUFBLFFBQ3pDO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxRQVFJLGdCQUFnQixTQUFVLElBQUk7QUFBRSxpQkFBTyxRQUFRLElBQUksV0FBWTtBQUM3RCxnQkFBSSxTQUFTLEdBQUcsZUFBYyxHQUFJLFNBQVMsQ0FBQTtBQUMzQyxxQkFBU0EsS0FBSSxHQUFHQSxLQUFJLE9BQU8sUUFBUUEsTUFBSztBQUN0QyxrQkFBSSxDQUFDLE9BQU9BLEVBQUMsRUFBRSxNQUFLLEdBQUk7QUFBRTtBQUFBLGNBQVE7QUFDbEMsa0JBQUksTUFBTSxPQUFPQSxFQUFDLEVBQUUsTUFBTSxPQUFPLFFBQVEsR0FBRyxLQUFLLElBQUksSUFBSSxFQUFFO0FBQzNELGtCQUFJLE1BQU07QUFDUixvQkFBSSxJQUFJLE1BQU0sS0FBSyxRQUFRO0FBQUUsd0JBQU0sSUFBSSxJQUFJLElBQUksTUFBTSxJQUFJLEtBQUssQ0FBQztBQUFBLGdCQUFFO0FBQ2pFLG9CQUFJLElBQUksS0FBSyxHQUFHO0FBQ2Qsd0JBQU0sSUFBSSxJQUFJLElBQUksTUFBTSxJQUFJLEtBQUssQ0FBQztBQUNsQyxxQkFBRztBQUFBLG9CQUFhLEtBQUssT0FBTyxJQUFJLEtBQUssQ0FBQyxJQUFJLEtBQUssT0FBTyxJQUFJLEtBQUssQ0FBQztBQUFBLG9CQUNoRCxJQUFJLElBQUksTUFBTSxJQUFJLEtBQUssQ0FBQztBQUFBLG9CQUFHO0FBQUEsb0JBQUs7QUFBQSxrQkFBWTtBQUFBLGdCQUN4RSxXQUFxQixJQUFJLE9BQU8sR0FBRyxJQUFJLE9BQU87QUFDbEMsc0JBQUksT0FBTyxRQUFRLEdBQUcsS0FBSyxJQUFJLE9BQU8sQ0FBQyxFQUFFO0FBQ3pDLHNCQUFJLE1BQU07QUFDUiwwQkFBTSxJQUFJLElBQUksSUFBSSxNQUFNLENBQUM7QUFDekIsdUJBQUc7QUFBQSxzQkFBYSxLQUFLLE9BQU8sQ0FBQyxJQUFJLEdBQUcsSUFBSSxjQUFhLElBQ3JDLEtBQUssT0FBTyxLQUFLLFNBQVMsQ0FBQztBQUFBLHNCQUMzQixJQUFJLElBQUksT0FBTyxHQUFHLEtBQUssU0FBUyxDQUFDO0FBQUEsc0JBQUc7QUFBQSxzQkFBSztBQUFBLG9CQUFZO0FBQUEsa0JBQ25GO0FBQUEsZ0JBQ0E7QUFBQSxjQUNBO0FBQ1EscUJBQU8sS0FBSyxJQUFJLE1BQU0sS0FBSyxHQUFHLENBQUM7QUFBQSxZQUN2QztBQUNNLGVBQUcsY0FBYyxNQUFNO0FBQUEsVUFDN0IsQ0FBSztBQUFBLFFBQUU7QUFBQSxRQUNILGtCQUFrQixTQUFVLElBQUk7QUFBRSxpQkFBTyxRQUFRLElBQUksV0FBWTtBQUMvRCxnQkFBSSxPQUFPLEdBQUcsZUFBYztBQUM1QixxQkFBU0EsS0FBSSxLQUFLLFNBQVMsR0FBR0EsTUFBSyxHQUFHQSxNQUNwQztBQUFFLGlCQUFHLGFBQWEsR0FBRyxJQUFJLGNBQWEsR0FBSSxLQUFLQSxFQUFDLEVBQUUsUUFBUSxLQUFLQSxFQUFDLEVBQUUsTUFBTSxRQUFRO0FBQUEsWUFBRTtBQUNwRixtQkFBTyxHQUFHLGVBQWM7QUFDeEIscUJBQVNLLE9BQU0sR0FBR0EsT0FBTSxLQUFLLFFBQVFBLFFBQ25DO0FBQUUsaUJBQUcsV0FBVyxLQUFLQSxJQUFHLEVBQUUsS0FBSSxFQUFHLE1BQU0sTUFBTSxJQUFJO0FBQUEsWUFBRTtBQUNyRCxnQ0FBb0IsRUFBRTtBQUFBLFVBQzVCLENBQUs7QUFBQSxRQUFFO0FBQUEsUUFDSCxVQUFVLFNBQVUsSUFBSTtBQUFFLGlCQUFPLEdBQUcsaUJBQWlCLE1BQU0sT0FBTztBQUFBLFFBQUU7QUFBQSxRQUNwRSxpQkFBaUIsU0FBVSxJQUFJO0FBQUUsaUJBQU8sR0FBRyxnQkFBZTtBQUFBLFFBQUc7QUFBQTtBQUkvRCxlQUFTLFVBQVUsSUFBSSxPQUFPO0FBQzVCLFlBQUksT0FBTyxRQUFRLEdBQUcsS0FBSyxLQUFLO0FBQ2hDLFlBQUksU0FBUyxXQUFXLElBQUk7QUFDNUIsWUFBSSxVQUFVLE1BQU07QUFBRSxrQkFBUSxPQUFPLE1BQU07QUFBQSxRQUFFO0FBQzdDLGVBQU8sVUFBVSxNQUFNLElBQUksUUFBUSxPQUFPLENBQUM7QUFBQSxNQUMvQztBQUNFLGVBQVMsUUFBUSxJQUFJLE9BQU87QUFDMUIsWUFBSSxPQUFPLFFBQVEsR0FBRyxLQUFLLEtBQUs7QUFDaEMsWUFBSSxTQUFTLGNBQWMsSUFBSTtBQUMvQixZQUFJLFVBQVUsTUFBTTtBQUFFLGtCQUFRLE9BQU8sTUFBTTtBQUFBLFFBQUU7QUFDN0MsZUFBTyxVQUFVLE1BQU0sSUFBSSxNQUFNLE9BQU8sRUFBRTtBQUFBLE1BQzlDO0FBQ0UsZUFBUyxlQUFlLElBQUksS0FBSztBQUMvQixZQUFJLFFBQVEsVUFBVSxJQUFJLElBQUksSUFBSTtBQUNsQyxZQUFJLE9BQU8sUUFBUSxHQUFHLEtBQUssTUFBTSxJQUFJO0FBQ3JDLFlBQUksUUFBUSxTQUFTLE1BQU0sR0FBRyxJQUFJLFNBQVM7QUFDM0MsWUFBSSxDQUFDLFNBQVMsTUFBTSxDQUFDLEVBQUUsU0FBUyxHQUFHO0FBQ2pDLGNBQUksYUFBYSxLQUFLLElBQUksTUFBTSxJQUFJLEtBQUssS0FBSyxPQUFPLElBQUksQ0FBQztBQUMxRCxjQUFJLE9BQU8sSUFBSSxRQUFRLE1BQU0sUUFBUSxJQUFJLE1BQU0sY0FBYyxJQUFJO0FBQ2pFLGlCQUFPLElBQUksTUFBTSxNQUFNLE9BQU8sSUFBSSxZQUFZLE1BQU0sTUFBTTtBQUFBLFFBQ2hFO0FBQ0ksZUFBTztBQUFBLE1BQ1g7QUFHRSxlQUFTLGdCQUFnQixJQUFJLE9BQU8sV0FBVztBQUM3QyxZQUFJLE9BQU8sU0FBUyxVQUFVO0FBQzVCLGtCQUFRLFNBQVMsS0FBSztBQUN0QixjQUFJLENBQUMsT0FBTztBQUFFLG1CQUFPO0FBQUEsVUFBSztBQUFBLFFBQ2hDO0FBR0ksV0FBRyxRQUFRLE1BQU0sYUFBWTtBQUM3QixZQUFJLFlBQVksR0FBRyxRQUFRLE9BQU8sT0FBTztBQUN6QyxZQUFJO0FBQ0YsY0FBSSxHQUFHLGNBQWM7QUFBRSxlQUFHLE1BQU0sZ0JBQWdCO0FBQUEsVUFBSztBQUNyRCxjQUFJLFdBQVc7QUFBRSxlQUFHLFFBQVEsUUFBUTtBQUFBLFVBQU07QUFDMUMsaUJBQU8sTUFBTSxFQUFFLEtBQUs7QUFBQSxRQUMxQixVQUFLO0FBQ0MsYUFBRyxRQUFRLFFBQVE7QUFDbkIsYUFBRyxNQUFNLGdCQUFnQjtBQUFBLFFBQy9CO0FBQ0ksZUFBTztBQUFBLE1BQ1g7QUFFRSxlQUFTLG1CQUFtQixJQUFJLE1BQU0sUUFBUTtBQUM1QyxpQkFBU0wsS0FBSSxHQUFHQSxLQUFJLEdBQUcsTUFBTSxRQUFRLFFBQVFBLE1BQUs7QUFDaEQsY0FBSSxTQUFTLFVBQVUsTUFBTSxHQUFHLE1BQU0sUUFBUUEsRUFBQyxHQUFHLFFBQVEsRUFBRTtBQUM1RCxjQUFJLFFBQVE7QUFBRSxtQkFBTztBQUFBLFVBQU07QUFBQSxRQUNqQztBQUNJLGVBQVEsR0FBRyxRQUFRLGFBQWEsVUFBVSxNQUFNLEdBQUcsUUFBUSxXQUFXLFFBQVEsRUFBRSxLQUMzRSxVQUFVLE1BQU0sR0FBRyxRQUFRLFFBQVEsUUFBUSxFQUFFO0FBQUEsTUFDdEQ7QUFLRSxVQUFJLFVBQVUsSUFBSTtBQUVsQixlQUFTLFlBQVksSUFBSSxNQUFNLEdBQUcsUUFBUTtBQUN4QyxZQUFJLE1BQU0sR0FBRyxNQUFNO0FBQ25CLFlBQUksS0FBSztBQUNQLGNBQUksY0FBYyxJQUFJLEdBQUc7QUFBRSxtQkFBTztBQUFBLFVBQVM7QUFDM0MsY0FBSSxNQUFNLEtBQUssSUFBSSxHQUNqQjtBQUFFLGVBQUcsTUFBTSxTQUFTO0FBQUEsVUFBSyxPQUV6QjtBQUFFLG9CQUFRLElBQUksSUFBSSxXQUFZO0FBQzVCLGtCQUFJLEdBQUcsTUFBTSxVQUFVLEtBQUs7QUFDMUIsbUJBQUcsTUFBTSxTQUFTO0FBQ2xCLG1CQUFHLFFBQVEsTUFBTSxNQUFLO0FBQUEsY0FDbEM7QUFBQSxZQUNBLENBQVM7QUFBQSxVQUFFO0FBQ0wsY0FBSSxpQkFBaUIsSUFBSSxNQUFNLE1BQU0sTUFBTSxHQUFHLE1BQU0sR0FBRztBQUFFLG1CQUFPO0FBQUEsVUFBSTtBQUFBLFFBQzFFO0FBQ0ksZUFBTyxpQkFBaUIsSUFBSSxNQUFNLEdBQUcsTUFBTTtBQUFBLE1BQy9DO0FBRUUsZUFBUyxpQkFBaUIsSUFBSSxNQUFNLEdBQUcsUUFBUTtBQUM3QyxZQUFJLFNBQVMsbUJBQW1CLElBQUksTUFBTSxNQUFNO0FBRWhELFlBQUksVUFBVSxTQUNaO0FBQUUsYUFBRyxNQUFNLFNBQVM7QUFBQSxRQUFLO0FBQzNCLFlBQUksVUFBVSxXQUNaO0FBQUUsc0JBQVksSUFBSSxjQUFjLElBQUksTUFBTSxDQUFDO0FBQUEsUUFBRTtBQUUvQyxZQUFJLFVBQVUsYUFBYSxVQUFVLFNBQVM7QUFDNUMsMkJBQWlCLENBQUM7QUFDbEIsdUJBQWEsRUFBRTtBQUFBLFFBQ3JCO0FBRUksZUFBTyxDQUFDLENBQUM7QUFBQSxNQUNiO0FBR0UsZUFBUyxpQkFBaUIsSUFBSSxHQUFHO0FBQy9CLFlBQUksT0FBTyxRQUFRLEdBQUcsSUFBSTtBQUMxQixZQUFJLENBQUMsTUFBTTtBQUFFLGlCQUFPO0FBQUEsUUFBSztBQUV6QixZQUFJLEVBQUUsWUFBWSxDQUFDLEdBQUcsTUFBTSxRQUFRO0FBSWxDLGlCQUFPLFlBQVksSUFBSSxXQUFXLE1BQU0sR0FBRyxTQUFVLEdBQUc7QUFBRSxtQkFBTyxnQkFBZ0IsSUFBSSxHQUFHLElBQUk7QUFBQSxVQUFFLENBQUUsS0FDekYsWUFBWSxJQUFJLE1BQU0sR0FBRyxTQUFVLEdBQUc7QUFDcEMsZ0JBQUksT0FBTyxLQUFLLFdBQVcsV0FBVyxLQUFLLENBQUMsSUFBSSxFQUFFLFFBQ2hEO0FBQUUscUJBQU8sZ0JBQWdCLElBQUksQ0FBQztBQUFBLFlBQUM7QUFBQSxVQUNoRCxDQUFjO0FBQUEsUUFDZCxPQUFXO0FBQ0wsaUJBQU8sWUFBWSxJQUFJLE1BQU0sR0FBRyxTQUFVLEdBQUc7QUFBRSxtQkFBTyxnQkFBZ0IsSUFBSSxDQUFDO0FBQUEsVUFBRSxDQUFFO0FBQUEsUUFDckY7QUFBQSxNQUNBO0FBR0UsZUFBUyxrQkFBa0IsSUFBSSxHQUFHLElBQUk7QUFDcEMsZUFBTyxZQUFZLElBQUksTUFBTSxLQUFLLEtBQUssR0FBRyxTQUFVLEdBQUc7QUFBRSxpQkFBTyxnQkFBZ0IsSUFBSSxHQUFHLElBQUk7QUFBQSxRQUFFLENBQUU7QUFBQSxNQUNuRztBQUVFLFVBQUksaUJBQWlCO0FBQ3JCLGVBQVMsVUFBVSxHQUFHO0FBQ3BCLFlBQUksS0FBSztBQUNULFlBQUksRUFBRSxVQUFVLEVBQUUsVUFBVSxHQUFHLFFBQVEsTUFBTSxZQUFZO0FBQUU7QUFBQSxRQUFNO0FBQ2pFLFdBQUcsTUFBTSxRQUFRLFVBQVUsS0FBSyxFQUFFLENBQUM7QUFDbkMsWUFBSSxlQUFlLElBQUksQ0FBQyxHQUFHO0FBQUU7QUFBQSxRQUFNO0FBRW5DLFlBQUksTUFBTSxhQUFhLE1BQU0sRUFBRSxXQUFXLElBQUk7QUFBRSxZQUFFLGNBQWM7QUFBQSxRQUFNO0FBQ3RFLFlBQUksT0FBTyxFQUFFO0FBQ2IsV0FBRyxRQUFRLFFBQVEsUUFBUSxNQUFNLEVBQUU7QUFDbkMsWUFBSSxVQUFVLGlCQUFpQixJQUFJLENBQUM7QUFDcEMsWUFBSSxRQUFRO0FBQ1YsMkJBQWlCLFVBQVUsT0FBTztBQUVsQyxjQUFJLENBQUMsV0FBVyxRQUFRLE1BQU0sQ0FBQyxpQkFBaUIsTUFBTSxFQUFFLFVBQVUsRUFBRSxVQUNsRTtBQUFFLGVBQUcsaUJBQWlCLElBQUksTUFBTSxLQUFLO0FBQUEsVUFBRTtBQUFBLFFBQy9DO0FBQ0ksWUFBSSxTQUFTLENBQUMsT0FBTyxDQUFDLFdBQVcsUUFBUSxNQUFNLEVBQUUsWUFBWSxDQUFDLEVBQUUsV0FBVyxTQUFTLGFBQ2xGO0FBQUUsbUJBQVMsWUFBWSxLQUFLO0FBQUEsUUFBRTtBQUdoQyxZQUFJLFFBQVEsTUFBTSxDQUFDLDJCQUEyQixLQUFLLEdBQUcsUUFBUSxRQUFRLFNBQVMsR0FDN0U7QUFBRSx3QkFBYyxFQUFFO0FBQUEsUUFBRTtBQUFBLE1BQzFCO0FBRUUsZUFBUyxjQUFjLElBQUk7QUFDekIsWUFBSSxVQUFVLEdBQUcsUUFBUTtBQUN6QixpQkFBUyxTQUFTLHNCQUFzQjtBQUV4QyxpQkFBUyxHQUFHLEdBQUc7QUFDYixjQUFJLEVBQUUsV0FBVyxNQUFNLENBQUMsRUFBRSxRQUFRO0FBQ2hDLG9CQUFRLFNBQVMsc0JBQXNCO0FBQ3ZDLGdCQUFJLFVBQVUsU0FBUyxFQUFFO0FBQ3pCLGdCQUFJLFVBQVUsYUFBYSxFQUFFO0FBQUEsVUFDckM7QUFBQSxRQUNBO0FBQ0ksV0FBRyxVQUFVLFNBQVMsRUFBRTtBQUN4QixXQUFHLFVBQVUsYUFBYSxFQUFFO0FBQUEsTUFDaEM7QUFFRSxlQUFTLFFBQVEsR0FBRztBQUNsQixZQUFJLEVBQUUsV0FBVyxJQUFJO0FBQUUsZUFBSyxJQUFJLElBQUksUUFBUTtBQUFBLFFBQU07QUFDbEQsdUJBQWUsTUFBTSxDQUFDO0FBQUEsTUFDMUI7QUFFRSxlQUFTLFdBQVcsR0FBRztBQUNyQixZQUFJLEtBQUs7QUFDVCxZQUFJLEVBQUUsVUFBVSxFQUFFLFVBQVUsR0FBRyxRQUFRLE1BQU0sWUFBWTtBQUFFO0FBQUEsUUFBTTtBQUNqRSxZQUFJLGNBQWMsR0FBRyxTQUFTLENBQUMsS0FBSyxlQUFlLElBQUksQ0FBQyxLQUFLLEVBQUUsV0FBVyxDQUFDLEVBQUUsVUFBVSxPQUFPLEVBQUUsU0FBUztBQUFFO0FBQUEsUUFBTTtBQUNqSCxZQUFJLFVBQVUsRUFBRSxTQUFTLFdBQVcsRUFBRTtBQUN0QyxZQUFJLFVBQVUsV0FBVyxnQkFBZ0I7QUFBQywyQkFBaUI7QUFBTSwyQkFBaUIsQ0FBQztBQUFHO0FBQUEsUUFBTTtBQUM1RixZQUFLLFdBQVcsQ0FBQyxFQUFFLFNBQVMsRUFBRSxRQUFRLE9BQVEsaUJBQWlCLElBQUksQ0FBQyxHQUFHO0FBQUU7QUFBQSxRQUFNO0FBQy9FLFlBQUksS0FBSyxPQUFPLGFBQWEsWUFBWSxPQUFPLFVBQVUsUUFBUTtBQUVsRSxZQUFJLE1BQU0sTUFBUTtBQUFFO0FBQUEsUUFBTTtBQUMxQixZQUFJLGtCQUFrQixJQUFJLEdBQUcsRUFBRSxHQUFHO0FBQUU7QUFBQSxRQUFNO0FBQzFDLFdBQUcsUUFBUSxNQUFNLFdBQVcsQ0FBQztBQUFBLE1BQ2pDO0FBRUUsVUFBSSxvQkFBb0I7QUFFeEIsVUFBSSxZQUFZLFNBQVMsTUFBTSxLQUFLLFFBQVE7QUFDMUMsYUFBSyxPQUFPO0FBQ1osYUFBSyxNQUFNO0FBQ1gsYUFBSyxTQUFTO0FBQUEsTUFDbEI7QUFFRSxnQkFBVSxVQUFVLFVBQVUsU0FBVSxNQUFNLEtBQUssUUFBUTtBQUN6RCxlQUFPLEtBQUssT0FBTyxvQkFBb0IsUUFDckMsSUFBSSxLQUFLLEtBQUssR0FBRyxLQUFLLEtBQUssVUFBVSxLQUFLO0FBQUEsTUFDaEQ7QUFFRSxVQUFJLFdBQVc7QUFDZixlQUFTLFlBQVksS0FBSyxRQUFRO0FBQ2hDLFlBQUksTUFBTSxDQUFDLG9CQUFJO0FBQ2YsWUFBSSxtQkFBbUIsZ0JBQWdCLFFBQVEsS0FBSyxLQUFLLE1BQU0sR0FBRztBQUNoRSxzQkFBWSxrQkFBa0I7QUFDOUIsaUJBQU87QUFBQSxRQUNiLFdBQWUsYUFBYSxVQUFVLFFBQVEsS0FBSyxLQUFLLE1BQU0sR0FBRztBQUMzRCw0QkFBa0IsSUFBSSxVQUFVLEtBQUssS0FBSyxNQUFNO0FBQ2hELHNCQUFZO0FBQ1osaUJBQU87QUFBQSxRQUNiLE9BQVc7QUFDTCxzQkFBWSxJQUFJLFVBQVUsS0FBSyxLQUFLLE1BQU07QUFDMUMsNEJBQWtCO0FBQ2xCLGlCQUFPO0FBQUEsUUFDYjtBQUFBLE1BQ0E7QUFPRSxlQUFTLFlBQVksR0FBRztBQUN0QixZQUFJLEtBQUssTUFBTSxVQUFVLEdBQUc7QUFDNUIsWUFBSSxlQUFlLElBQUksQ0FBQyxLQUFLLFFBQVEsZUFBZSxRQUFRLE1BQU0sY0FBYSxHQUFJO0FBQUU7QUFBQSxRQUFNO0FBQzNGLGdCQUFRLE1BQU0sYUFBWTtBQUMxQixnQkFBUSxRQUFRLEVBQUU7QUFFbEIsWUFBSSxjQUFjLFNBQVMsQ0FBQyxHQUFHO0FBQzdCLGNBQUksQ0FBQyxRQUFRO0FBR1gsb0JBQVEsU0FBUyxZQUFZO0FBQzdCLHVCQUFXLFdBQVk7QUFBRSxxQkFBTyxRQUFRLFNBQVMsWUFBWTtBQUFBLFlBQUssR0FBSSxHQUFHO0FBQUEsVUFDakY7QUFDTTtBQUFBLFFBQ047QUFDSSxZQUFJLGNBQWMsSUFBSSxDQUFDLEdBQUc7QUFBRTtBQUFBLFFBQU07QUFDbEMsWUFBSSxNQUFNLGFBQWEsSUFBSSxDQUFDLEdBQUcsU0FBUyxTQUFTLENBQUMsR0FBRyxTQUFTLE1BQU0sWUFBWSxLQUFLLE1BQU0sSUFBSTtBQUMvRixZQUFJLEVBQUUsRUFBRSxNQUFLO0FBR2IsWUFBSSxVQUFVLEtBQUssR0FBRyxNQUFNLGVBQzFCO0FBQUUsYUFBRyxNQUFNLGNBQWMsQ0FBQztBQUFBLFFBQUU7QUFFOUIsWUFBSSxPQUFPLG1CQUFtQixJQUFJLFFBQVEsS0FBSyxRQUFRLENBQUMsR0FBRztBQUFFO0FBQUEsUUFBTTtBQUVuRSxZQUFJLFVBQVUsR0FBRztBQUNmLGNBQUksS0FBSztBQUFFLDJCQUFlLElBQUksS0FBSyxRQUFRLENBQUM7QUFBQSxVQUFFLFdBQ3JDLFNBQVMsQ0FBQyxLQUFLLFFBQVEsVUFBVTtBQUFFLDZCQUFpQixDQUFDO0FBQUEsVUFBRTtBQUFBLFFBQ3RFLFdBQWUsVUFBVSxHQUFHO0FBQ3RCLGNBQUksS0FBSztBQUFFLDRCQUFnQixHQUFHLEtBQUssR0FBRztBQUFBLFVBQUU7QUFDeEMscUJBQVcsV0FBWTtBQUFFLG1CQUFPLFFBQVEsTUFBTTtVQUFRLEdBQUksRUFBRTtBQUFBLFFBQ2xFLFdBQWUsVUFBVSxHQUFHO0FBQ3RCLGNBQUksbUJBQW1CO0FBQUUsZUFBRyxRQUFRLE1BQU0sY0FBYyxDQUFDO0FBQUEsVUFBRSxPQUN0RDtBQUFFLDJCQUFlLEVBQUU7QUFBQSxVQUFFO0FBQUEsUUFDaEM7QUFBQSxNQUNBO0FBRUUsZUFBUyxtQkFBbUIsSUFBSSxRQUFRLEtBQUssUUFBUSxPQUFPO0FBQzFELFlBQUksT0FBTztBQUNYLFlBQUksVUFBVSxVQUFVO0FBQUUsaUJBQU8sV0FBVztBQUFBLFFBQUssV0FDeEMsVUFBVSxVQUFVO0FBQUUsaUJBQU8sV0FBVztBQUFBLFFBQUs7QUFDdEQsZ0JBQVEsVUFBVSxJQUFJLFNBQVMsVUFBVSxJQUFJLFdBQVcsV0FBVztBQUVuRSxlQUFPLFlBQVksSUFBSyxpQkFBaUIsTUFBTSxLQUFLLEdBQUcsT0FBTyxTQUFVLE9BQU87QUFDN0UsY0FBSSxPQUFPLFNBQVMsVUFBVTtBQUFFLG9CQUFRLFNBQVMsS0FBSztBQUFBLFVBQUU7QUFDeEQsY0FBSSxDQUFDLE9BQU87QUFBRSxtQkFBTztBQUFBLFVBQUs7QUFDMUIsY0FBSSxPQUFPO0FBQ1gsY0FBSTtBQUNGLGdCQUFJLEdBQUcsY0FBYztBQUFFLGlCQUFHLE1BQU0sZ0JBQWdCO0FBQUEsWUFBSztBQUNyRCxtQkFBTyxNQUFNLElBQUksR0FBRyxLQUFLO0FBQUEsVUFDakMsVUFBTztBQUNDLGVBQUcsTUFBTSxnQkFBZ0I7QUFBQSxVQUNqQztBQUNNLGlCQUFPO0FBQUEsUUFDYixDQUFLO0FBQUEsTUFDTDtBQUVFLGVBQVMsZUFBZSxJQUFJLFFBQVEsT0FBTztBQUN6QyxZQUFJLFNBQVMsR0FBRyxVQUFVLGdCQUFnQjtBQUMxQyxZQUFJLFFBQVEsU0FBUyxPQUFPLElBQUksUUFBUSxLQUFLLElBQUksQ0FBQTtBQUNqRCxZQUFJLE1BQU0sUUFBUSxNQUFNO0FBQ3RCLGNBQUksT0FBTyxXQUFXLE1BQU0sWUFBWSxNQUFNLFVBQVUsTUFBTTtBQUM5RCxnQkFBTSxPQUFPLE9BQU8sY0FBYyxVQUFVLFdBQVcsU0FBUyxVQUFVLFdBQVcsU0FBUztBQUFBLFFBQ3BHO0FBQ0ksWUFBSSxNQUFNLFVBQVUsUUFBUSxHQUFHLElBQUksUUFBUTtBQUFFLGdCQUFNLFNBQVMsR0FBRyxJQUFJLFVBQVUsTUFBTTtBQUFBLFFBQVM7QUFDNUYsWUFBSSxNQUFNLFVBQVUsTUFBTTtBQUFFLGdCQUFNLFNBQVMsTUFBTSxNQUFNLFVBQVUsTUFBTTtBQUFBLFFBQVE7QUFDL0UsWUFBSSxNQUFNLGNBQWMsTUFBTTtBQUFFLGdCQUFNLGFBQWEsRUFBRSxNQUFNLE1BQU0sU0FBUyxNQUFNO0FBQUEsUUFBUztBQUN6RixlQUFPO0FBQUEsTUFDWDtBQUVFLGVBQVMsZUFBZSxJQUFJLEtBQUssUUFBUSxPQUFPO0FBQzlDLFlBQUksSUFBSTtBQUFFLHFCQUFXLEtBQUssYUFBYSxFQUFFLEdBQUcsQ0FBQztBQUFBLFFBQUUsT0FDMUM7QUFBRSxhQUFHLE1BQU0sUUFBUSxVQUFVLEtBQUssRUFBRSxDQUFDO0FBQUEsUUFBRTtBQUU1QyxZQUFJLFdBQVcsZUFBZSxJQUFJLFFBQVEsS0FBSztBQUUvQyxZQUFJLE1BQU0sR0FBRyxJQUFJLEtBQUs7QUFDdEIsWUFBSSxHQUFHLFFBQVEsWUFBWSxlQUFlLENBQUMsR0FBRyxXQUFVLEtBQ3BELFVBQVUsYUFBYSxZQUFZLElBQUksU0FBUyxHQUFHLEtBQUssT0FDdkQsS0FBSyxZQUFZLElBQUksT0FBTyxTQUFTLEdBQUcsS0FBSSxHQUFJLEdBQUcsSUFBSSxLQUFLLElBQUksT0FBTyxPQUN2RSxJQUFJLFVBQVUsTUFBTSxHQUFHLElBQUksS0FBSyxJQUFJLE9BQU8sSUFDOUM7QUFBRSw4QkFBb0IsSUFBSSxPQUFPLEtBQUssUUFBUTtBQUFBLFFBQUUsT0FFaEQ7QUFBRSwyQkFBaUIsSUFBSSxPQUFPLEtBQUssUUFBUTtBQUFBLFFBQUU7QUFBQSxNQUNuRDtBQUlFLGVBQVMsb0JBQW9CLElBQUksT0FBTyxLQUFLLFVBQVU7QUFDckQsWUFBSSxVQUFVLEdBQUcsU0FBUyxRQUFRO0FBQ2xDLFlBQUksVUFBVSxVQUFVLElBQUksU0FBVSxHQUFHO0FBQ3ZDLGNBQUksUUFBUTtBQUFFLG9CQUFRLFNBQVMsWUFBWTtBQUFBLFVBQU07QUFDakQsYUFBRyxNQUFNLGVBQWU7QUFDeEIsY0FBSSxHQUFHLE1BQU0sbUJBQW1CO0FBQzlCLGdCQUFJLEdBQUcsWUFBWTtBQUFFLGlCQUFHLE1BQU0sb0JBQW9CO0FBQUEsWUFBTSxPQUNuRDtBQUFFLDZCQUFlLEVBQUU7QUFBQSxZQUFFO0FBQUEsVUFDbEM7QUFDTSxjQUFJLFFBQVEsUUFBUSxlQUFlLFdBQVcsT0FBTztBQUNyRCxjQUFJLFFBQVEsUUFBUSxlQUFlLGFBQWEsU0FBUztBQUN6RCxjQUFJLFFBQVEsVUFBVSxhQUFhLFNBQVM7QUFDNUMsY0FBSSxRQUFRLFVBQVUsUUFBUSxPQUFPO0FBQ3JDLGNBQUksQ0FBQyxPQUFPO0FBQ1YsNkJBQWlCLENBQUM7QUFDbEIsZ0JBQUksQ0FBQyxTQUFTLFFBQ1o7QUFBRSw4QkFBZ0IsR0FBRyxLQUFLLEtBQUssTUFBTSxNQUFNLFNBQVMsTUFBTTtBQUFBLFlBQUU7QUFFOUQsZ0JBQUssVUFBVSxDQUFDLFVBQVcsTUFBTSxjQUFjLEdBQzdDO0FBQUUseUJBQVcsV0FBWTtBQUFDLHdCQUFRLFFBQVEsY0FBYyxLQUFLLE1BQU0sRUFBQyxlQUFlLEtBQUksQ0FBQztBQUFHLHdCQUFRLE1BQU0sTUFBSztBQUFBLGNBQUcsR0FBRyxFQUFFO0FBQUEsWUFBRSxPQUV4SDtBQUFFLHNCQUFRLE1BQU0sTUFBSztBQUFBLFlBQUc7QUFBQSxVQUNsQztBQUFBLFFBQ0EsQ0FBSztBQUNELFlBQUksWUFBWSxTQUFTLElBQUk7QUFDM0Isa0JBQVEsU0FBUyxLQUFLLElBQUksTUFBTSxVQUFVLEdBQUcsT0FBTyxJQUFJLEtBQUssSUFBSSxNQUFNLFVBQVUsR0FBRyxPQUFPLEtBQUs7QUFBQSxRQUN0RztBQUNJLFlBQUksWUFBWSxXQUFZO0FBQUUsaUJBQU8sUUFBUTtBQUFBLFFBQUs7QUFFbEQsWUFBSSxRQUFRO0FBQUUsa0JBQVEsU0FBUyxZQUFZO0FBQUEsUUFBSztBQUNoRCxXQUFHLE1BQU0sZUFBZTtBQUN4QixnQkFBUSxPQUFPLENBQUMsU0FBUztBQUN6QixXQUFHLFFBQVEsUUFBUSxlQUFlLFdBQVcsT0FBTztBQUNwRCxXQUFHLFFBQVEsUUFBUSxlQUFlLGFBQWEsU0FBUztBQUN4RCxXQUFHLFFBQVEsVUFBVSxhQUFhLFNBQVM7QUFDM0MsV0FBRyxRQUFRLFVBQVUsUUFBUSxPQUFPO0FBRXBDLFdBQUcsTUFBTSxvQkFBb0I7QUFDN0IsbUJBQVcsV0FBWTtBQUFFLGlCQUFPLFFBQVEsTUFBTTtRQUFRLEdBQUksRUFBRTtBQUU1RCxZQUFJLFFBQVEsU0FBUyxVQUFVO0FBQUUsa0JBQVEsU0FBUyxTQUFRO0FBQUEsUUFBRztBQUFBLE1BQ2pFO0FBRUUsZUFBUyxhQUFhLElBQUksS0FBSyxNQUFNO0FBQ25DLFlBQUksUUFBUSxRQUFRO0FBQUUsaUJBQU8sSUFBSSxNQUFNLEtBQUssR0FBRztBQUFBLFFBQUM7QUFDaEQsWUFBSSxRQUFRLFFBQVE7QUFBRSxpQkFBTyxHQUFHLFdBQVcsR0FBRztBQUFBLFFBQUM7QUFDL0MsWUFBSSxRQUFRLFFBQVE7QUFBRSxpQkFBTyxJQUFJLE1BQU0sSUFBSSxJQUFJLE1BQU0sQ0FBQyxHQUFHLFFBQVEsR0FBRyxLQUFLLElBQUksSUFBSSxPQUFPLEdBQUcsQ0FBQyxDQUFDLENBQUM7QUFBQSxRQUFDO0FBQy9GLFlBQUksU0FBUyxLQUFLLElBQUksR0FBRztBQUN6QixlQUFPLElBQUksTUFBTSxPQUFPLE1BQU0sT0FBTyxFQUFFO0FBQUEsTUFDM0M7QUFHRSxlQUFTLGlCQUFpQixJQUFJLE9BQU8sT0FBTyxVQUFVO0FBQ3BELFlBQUksSUFBSTtBQUFFLHlCQUFlLEVBQUU7QUFBQSxRQUFFO0FBQzdCLFlBQUksVUFBVSxHQUFHLFNBQVNFLE9BQU0sR0FBRztBQUNuQyx5QkFBaUIsS0FBSztBQUV0QixZQUFJLFVBQVUsVUFBVSxXQUFXQSxLQUFJLEtBQUssU0FBUyxTQUFTO0FBQzlELFlBQUksU0FBUyxVQUFVLENBQUMsU0FBUyxRQUFRO0FBQ3ZDLHFCQUFXQSxLQUFJLElBQUksU0FBUyxLQUFLO0FBQ2pDLGNBQUksV0FBVyxJQUNiO0FBQUUsdUJBQVcsT0FBTyxRQUFRO0FBQUEsVUFBRSxPQUU5QjtBQUFFLHVCQUFXLElBQUksTUFBTSxPQUFPLEtBQUs7QUFBQSxVQUFFO0FBQUEsUUFDN0MsT0FBVztBQUNMLHFCQUFXQSxLQUFJLElBQUksUUFBTztBQUMxQixxQkFBV0EsS0FBSSxJQUFJO0FBQUEsUUFDekI7QUFFSSxZQUFJLFNBQVMsUUFBUSxhQUFhO0FBQ2hDLGNBQUksQ0FBQyxTQUFTLFFBQVE7QUFBRSx1QkFBVyxJQUFJLE1BQU0sT0FBTyxLQUFLO0FBQUEsVUFBRTtBQUMzRCxrQkFBUSxhQUFhLElBQUksT0FBTyxNQUFNLElBQUk7QUFDMUMscUJBQVc7QUFBQSxRQUNqQixPQUFXO0FBQ0wsY0FBSU0sU0FBUSxhQUFhLElBQUksT0FBTyxTQUFTLElBQUk7QUFDakQsY0FBSSxTQUFTLFFBQ1g7QUFBRSx1QkFBVyxZQUFZLFVBQVVBLE9BQU0sUUFBUUEsT0FBTSxNQUFNLFNBQVMsTUFBTTtBQUFBLFVBQUUsT0FFOUU7QUFBRSx1QkFBV0E7QUFBQSxVQUFNO0FBQUEsUUFDM0I7QUFFSSxZQUFJLENBQUMsU0FBUyxRQUFRO0FBQ3BCLHFCQUFXO0FBQ1gsdUJBQWFOLE1BQUssSUFBSSxVQUFVLENBQUMsUUFBUSxHQUFHLENBQUMsR0FBRyxTQUFTO0FBQ3pELHFCQUFXQSxLQUFJO0FBQUEsUUFDckIsV0FBZSxZQUFZLElBQUk7QUFDekIscUJBQVcsT0FBTztBQUNsQjtBQUFBLFlBQWFBO0FBQUEsWUFBSyxtQkFBbUIsSUFBSSxPQUFPLE9BQU8sQ0FBQyxRQUFRLENBQUMsR0FBRyxRQUFRO0FBQUEsWUFDL0QsRUFBQyxRQUFRLE9BQU8sUUFBUSxTQUFRO0FBQUEsVUFBQztBQUFBLFFBQ3BELFdBQWUsT0FBTyxTQUFTLEtBQUssT0FBTyxRQUFRLEVBQUUsTUFBSyxLQUFNLFNBQVMsUUFBUSxVQUFVLENBQUMsU0FBUyxRQUFRO0FBQ3ZHO0FBQUEsWUFBYUE7QUFBQSxZQUFLLG1CQUFtQixJQUFJLE9BQU8sTUFBTSxHQUFHLFFBQVEsRUFBRSxPQUFPLE9BQU8sTUFBTSxXQUFXLENBQUMsQ0FBQyxHQUFHLENBQUM7QUFBQSxZQUMzRixFQUFDLFFBQVEsT0FBTyxRQUFRLFNBQVE7QUFBQSxVQUFDO0FBQzlDLHFCQUFXQSxLQUFJO0FBQUEsUUFDckIsT0FBVztBQUNMLDhCQUFvQkEsTUFBSyxVQUFVLFVBQVUsU0FBUztBQUFBLFFBQzVEO0FBRUksWUFBSSxVQUFVO0FBQ2QsaUJBQVMsU0FBUyxLQUFLO0FBQ3JCLGNBQUksSUFBSSxTQUFTLEdBQUcsS0FBSyxHQUFHO0FBQUU7QUFBQSxVQUFNO0FBQ3BDLG9CQUFVO0FBRVYsY0FBSSxTQUFTLFFBQVEsYUFBYTtBQUNoQyxnQkFBSXlCLFVBQVMsQ0FBQSxHQUFJLFVBQVUsR0FBRyxRQUFRO0FBQ3RDLGdCQUFJLFdBQVcsWUFBWSxRQUFRekIsTUFBSyxNQUFNLElBQUksRUFBRSxNQUFNLE1BQU0sSUFBSSxPQUFPO0FBQzNFLGdCQUFJLFNBQVMsWUFBWSxRQUFRQSxNQUFLLElBQUksSUFBSSxFQUFFLE1BQU0sSUFBSSxJQUFJLE9BQU87QUFDckUsZ0JBQUksT0FBTyxLQUFLLElBQUksVUFBVSxNQUFNLEdBQUcsUUFBUSxLQUFLLElBQUksVUFBVSxNQUFNO0FBQ3hFLHFCQUFTLE9BQU8sS0FBSyxJQUFJLE1BQU0sTUFBTSxJQUFJLElBQUksR0FBRyxNQUFNLEtBQUssSUFBSSxHQUFHLFNBQVEsR0FBSSxLQUFLLElBQUksTUFBTSxNQUFNLElBQUksSUFBSSxDQUFDLEdBQ3ZHLFFBQVEsS0FBSyxRQUFRO0FBQ3hCLGtCQUFJLE9BQU8sUUFBUUEsTUFBSyxJQUFJLEVBQUUsTUFBTSxVQUFVLFdBQVcsTUFBTSxNQUFNLE9BQU87QUFDNUUsa0JBQUksUUFBUSxPQUNWO0FBQUUsZ0JBQUF5QixRQUFPLEtBQUssSUFBSSxNQUFNLElBQUksTUFBTSxPQUFPLEdBQUcsSUFBSSxNQUFNLE9BQU8sQ0FBQyxDQUFDO0FBQUEsY0FBRSxXQUMxRCxLQUFLLFNBQVMsU0FDckI7QUFBRSxnQkFBQUEsUUFBTyxLQUFLLElBQUksTUFBTSxJQUFJLE1BQU0sT0FBTyxHQUFHLElBQUksTUFBTSxXQUFXLE1BQU0sT0FBTyxPQUFPLENBQUMsQ0FBQyxDQUFDO0FBQUEsY0FBRTtBQUFBLFlBQ3RHO0FBQ1EsZ0JBQUksQ0FBQ0EsUUFBTyxRQUFRO0FBQUUsY0FBQUEsUUFBTyxLQUFLLElBQUksTUFBTSxPQUFPLEtBQUssQ0FBQztBQUFBLFlBQUU7QUFDM0Q7QUFBQSxjQUFhekI7QUFBQSxjQUFLLG1CQUFtQixJQUFJLFNBQVMsT0FBTyxNQUFNLEdBQUcsUUFBUSxFQUFFLE9BQU95QixPQUFNLEdBQUcsUUFBUTtBQUFBLGNBQ3ZGLEVBQUMsUUFBUSxVQUFVLFFBQVEsTUFBSztBQUFBLFlBQUM7QUFDOUMsZUFBRyxlQUFlLEdBQUc7QUFBQSxVQUM3QixPQUFhO0FBQ0wsZ0JBQUksV0FBVztBQUNmLGdCQUFJbkIsU0FBUSxhQUFhLElBQUksS0FBSyxTQUFTLElBQUk7QUFDL0MsZ0JBQUksU0FBUyxTQUFTLFFBQVE7QUFDOUIsZ0JBQUksSUFBSUEsT0FBTSxRQUFRLE1BQU0sSUFBSSxHQUFHO0FBQ2pDLHFCQUFPQSxPQUFNO0FBQ2IsdUJBQVMsT0FBTyxTQUFTLEtBQUksR0FBSUEsT0FBTSxNQUFNO0FBQUEsWUFDdkQsT0FBZTtBQUNMLHFCQUFPQSxPQUFNO0FBQ2IsdUJBQVMsT0FBTyxTQUFTLEdBQUUsR0FBSUEsT0FBTSxJQUFJO0FBQUEsWUFDbkQ7QUFDUSxnQkFBSSxXQUFXLFNBQVMsT0FBTyxNQUFNLENBQUM7QUFDdEMscUJBQVMsUUFBUSxJQUFJLGFBQWEsSUFBSSxJQUFJLE1BQU0sUUFBUU4sTUFBSyxNQUFNLEdBQUcsSUFBSSxDQUFDO0FBQzNFLHlCQUFhQSxNQUFLLG1CQUFtQixJQUFJLFVBQVUsUUFBUSxHQUFHLFNBQVM7QUFBQSxVQUMvRTtBQUFBLFFBQ0E7QUFFSSxZQUFJLGFBQWEsUUFBUSxRQUFRLHNCQUFxQjtBQUt0RCxZQUFJLFVBQVU7QUFFZCxpQkFBUyxPQUFPLEdBQUc7QUFDakIsY0FBSSxXQUFXLEVBQUU7QUFDakIsY0FBSSxNQUFNLGFBQWEsSUFBSSxHQUFHLE1BQU0sU0FBUyxRQUFRLFdBQVc7QUFDaEUsY0FBSSxDQUFDLEtBQUs7QUFBRTtBQUFBLFVBQU07QUFDbEIsY0FBSSxJQUFJLEtBQUssT0FBTyxLQUFLLEdBQUc7QUFDMUIsZUFBRyxNQUFNLFFBQVEsVUFBVSxLQUFLLEVBQUUsQ0FBQztBQUNuQyxxQkFBUyxHQUFHO0FBQ1osZ0JBQUksVUFBVSxhQUFhLFNBQVNBLElBQUc7QUFDdkMsZ0JBQUksSUFBSSxRQUFRLFFBQVEsTUFBTSxJQUFJLE9BQU8sUUFBUSxNQUMvQztBQUFFLHlCQUFXLFVBQVUsSUFBSSxXQUFZO0FBQUMsb0JBQUksV0FBVyxVQUFVO0FBQUUseUJBQU8sQ0FBQztBQUFBLGdCQUFFO0FBQUEsY0FBRSxDQUFDLEdBQUcsR0FBRztBQUFBLFlBQUU7QUFBQSxVQUNsRyxPQUFhO0FBQ0wsZ0JBQUksVUFBVSxFQUFFLFVBQVUsV0FBVyxNQUFNLE1BQU0sRUFBRSxVQUFVLFdBQVcsU0FBUyxLQUFLO0FBQ3RGLGdCQUFJLFNBQVM7QUFBRSx5QkFBVyxVQUFVLElBQUksV0FBWTtBQUNsRCxvQkFBSSxXQUFXLFVBQVU7QUFBRTtBQUFBLGdCQUFNO0FBQ2pDLHdCQUFRLFNBQVMsYUFBYTtBQUM5Qix1QkFBTyxDQUFDO0FBQUEsY0FDbEIsQ0FBUyxHQUFHLEVBQUU7QUFBQSxZQUFFO0FBQUEsVUFDaEI7QUFBQSxRQUNBO0FBRUksaUJBQVMsS0FBSyxHQUFHO0FBQ2YsYUFBRyxNQUFNLGdCQUFnQjtBQUN6QixvQkFBVTtBQUlWLGNBQUksR0FBRztBQUNMLDZCQUFpQixDQUFDO0FBQ2xCLG9CQUFRLE1BQU0sTUFBSztBQUFBLFVBQzNCO0FBQ00sY0FBSSxRQUFRLFFBQVEsZUFBZSxhQUFhLElBQUk7QUFDcEQsY0FBSSxRQUFRLFFBQVEsZUFBZSxXQUFXLEVBQUU7QUFDaEQsVUFBQUEsS0FBSSxRQUFRLGdCQUFnQjtBQUFBLFFBQ2xDO0FBRUksWUFBSSxPQUFPLFVBQVUsSUFBSSxTQUFVLEdBQUc7QUFDcEMsY0FBSSxFQUFFLFlBQVksS0FBSyxDQUFDLFNBQVMsQ0FBQyxHQUFHO0FBQUUsaUJBQUssQ0FBQztBQUFBLFVBQUUsT0FDMUM7QUFBRSxtQkFBTyxDQUFDO0FBQUEsVUFBRTtBQUFBLFFBQ3ZCLENBQUs7QUFDRCxZQUFJLEtBQUssVUFBVSxJQUFJLElBQUk7QUFDM0IsV0FBRyxNQUFNLGdCQUFnQjtBQUN6QixXQUFHLFFBQVEsUUFBUSxlQUFlLGFBQWEsSUFBSTtBQUNuRCxXQUFHLFFBQVEsUUFBUSxlQUFlLFdBQVcsRUFBRTtBQUFBLE1BQ25EO0FBSUUsZUFBUyxhQUFhLElBQUlNLFFBQU87QUFDL0IsWUFBSSxTQUFTQSxPQUFNO0FBQ25CLFlBQUksT0FBT0EsT0FBTTtBQUNqQixZQUFJLGFBQWEsUUFBUSxHQUFHLEtBQUssT0FBTyxJQUFJO0FBQzVDLFlBQUksSUFBSSxRQUFRLElBQUksS0FBSyxLQUFLLE9BQU8sVUFBVSxLQUFLLFFBQVE7QUFBRSxpQkFBT0E7QUFBQSxRQUFLO0FBQzFFLFlBQUksUUFBUSxTQUFTLFVBQVU7QUFDL0IsWUFBSSxDQUFDLE9BQU87QUFBRSxpQkFBT0E7QUFBQSxRQUFLO0FBQzFCLFlBQUksUUFBUSxjQUFjLE9BQU8sT0FBTyxJQUFJLE9BQU8sTUFBTSxHQUFHLE9BQU8sTUFBTSxLQUFLO0FBQzlFLFlBQUksS0FBSyxRQUFRLE9BQU8sTUFBTSxLQUFLLE1BQU0sT0FBTyxJQUFJO0FBQUUsaUJBQU9BO0FBQUEsUUFBSztBQUNsRSxZQUFJLFdBQVcsU0FBVSxLQUFLLFFBQVEsT0FBTyxPQUFRLEtBQUssU0FBUyxLQUFLLElBQUk7QUFDNUUsWUFBSSxZQUFZLEtBQUssWUFBWSxNQUFNLFFBQVE7QUFBRSxpQkFBT0E7QUFBQSxRQUFLO0FBSTdELFlBQUk7QUFDSixZQUFJLEtBQUssUUFBUSxPQUFPLE1BQU07QUFDNUIsc0JBQVksS0FBSyxPQUFPLE9BQU8sU0FBUyxHQUFHLElBQUksYUFBYSxRQUFRLElBQUksTUFBTTtBQUFBLFFBQ3BGLE9BQVc7QUFDTCxjQUFJLFlBQVksY0FBYyxPQUFPLEtBQUssSUFBSSxLQUFLLE1BQU07QUFDekQsY0FBSSxNQUFNLFlBQVksVUFBVSxLQUFLLEtBQUssT0FBTyxPQUFPLEtBQUssU0FBUyxJQUFJLEtBQUs7QUFDL0UsY0FBSSxhQUFhLFdBQVcsS0FBSyxhQUFhLFVBQzVDO0FBQUUsdUJBQVcsTUFBTTtBQUFBLFVBQUUsT0FFckI7QUFBRSx1QkFBVyxNQUFNO0FBQUEsVUFBRTtBQUFBLFFBQzdCO0FBRUksWUFBSSxVQUFVLE1BQU0sWUFBWSxXQUFXLEtBQUssRUFBRTtBQUNsRCxZQUFJLE9BQU8sYUFBYSxRQUFRLFNBQVM7QUFDekMsWUFBSSxLQUFLLE9BQU8sUUFBUSxPQUFPLFFBQVEsSUFBSSxTQUFTLE9BQU8sVUFBVTtBQUNyRSxlQUFPLE9BQU8sTUFBTSxNQUFNLE9BQU8sVUFBVSxTQUFTQSxTQUFRLElBQUksTUFBTSxJQUFJLElBQUksT0FBTyxNQUFNLElBQUksTUFBTSxHQUFHLElBQUk7QUFBQSxNQUNoSDtBQUtFLGVBQVMsWUFBWSxJQUFJLEdBQUcsTUFBTSxTQUFTO0FBQ3pDLFlBQUksSUFBSTtBQUNSLFlBQUksRUFBRSxTQUFTO0FBQ2IsZUFBSyxFQUFFLFFBQVEsQ0FBQyxFQUFFO0FBQ2xCLGVBQUssRUFBRSxRQUFRLENBQUMsRUFBRTtBQUFBLFFBQ3hCLE9BQVc7QUFDTCxjQUFJO0FBQUUsaUJBQUssRUFBRTtBQUFTLGlCQUFLLEVBQUU7QUFBQSxVQUFRLFNBQy9CLEtBQUs7QUFBRSxtQkFBTztBQUFBLFVBQUs7QUFBQSxRQUMvQjtBQUNJLFlBQUksTUFBTSxLQUFLLE1BQU0sR0FBRyxRQUFRLFFBQVEsd0JBQXdCLEtBQUssR0FBRztBQUFFLGlCQUFPO0FBQUEsUUFBSztBQUN0RixZQUFJLFNBQVM7QUFBRSwyQkFBaUIsQ0FBQztBQUFBLFFBQUU7QUFFbkMsWUFBSSxVQUFVLEdBQUc7QUFDakIsWUFBSSxVQUFVLFFBQVEsUUFBUSxzQkFBcUI7QUFFbkQsWUFBSSxLQUFLLFFBQVEsVUFBVSxDQUFDLFdBQVcsSUFBSSxJQUFJLEdBQUc7QUFBRSxpQkFBTyxtQkFBbUIsQ0FBQztBQUFBLFFBQUM7QUFDaEYsY0FBTSxRQUFRLE1BQU0sUUFBUTtBQUU1QixpQkFBU1IsS0FBSSxHQUFHQSxLQUFJLEdBQUcsUUFBUSxZQUFZLFFBQVEsRUFBRUEsSUFBRztBQUN0RCxjQUFJLElBQUksUUFBUSxRQUFRLFdBQVdBLEVBQUM7QUFDcEMsY0FBSSxLQUFLLEVBQUUsc0JBQXFCLEVBQUcsU0FBUyxJQUFJO0FBQzlDLGdCQUFJLE9BQU8sYUFBYSxHQUFHLEtBQUssRUFBRTtBQUNsQyxnQkFBSSxTQUFTLEdBQUcsUUFBUSxZQUFZQSxFQUFDO0FBQ3JDLG1CQUFPLElBQUksTUFBTSxJQUFJLE1BQU0sT0FBTyxXQUFXLENBQUM7QUFDOUMsbUJBQU8sbUJBQW1CLENBQUM7QUFBQSxVQUNuQztBQUFBLFFBQ0E7QUFBQSxNQUNBO0FBRUUsZUFBUyxjQUFjLElBQUksR0FBRztBQUM1QixlQUFPLFlBQVksSUFBSSxHQUFHLGVBQWUsSUFBSTtBQUFBLE1BQ2pEO0FBT0UsZUFBUyxjQUFjLElBQUksR0FBRztBQUM1QixZQUFJLGNBQWMsR0FBRyxTQUFTLENBQUMsS0FBSyxvQkFBb0IsSUFBSSxDQUFDLEdBQUc7QUFBRTtBQUFBLFFBQU07QUFDeEUsWUFBSSxlQUFlLElBQUksR0FBRyxhQUFhLEdBQUc7QUFBRTtBQUFBLFFBQU07QUFDbEQsWUFBSSxDQUFDLG1CQUFtQjtBQUFFLGFBQUcsUUFBUSxNQUFNLGNBQWMsQ0FBQztBQUFBLFFBQUU7QUFBQSxNQUNoRTtBQUVFLGVBQVMsb0JBQW9CLElBQUksR0FBRztBQUNsQyxZQUFJLENBQUMsV0FBVyxJQUFJLG1CQUFtQixHQUFHO0FBQUUsaUJBQU87QUFBQSxRQUFLO0FBQ3hELGVBQU8sWUFBWSxJQUFJLEdBQUcscUJBQXFCLEtBQUs7QUFBQSxNQUN4RDtBQUVFLGVBQVMsYUFBYSxJQUFJO0FBQ3hCLFdBQUcsUUFBUSxRQUFRLFlBQVksR0FBRyxRQUFRLFFBQVEsVUFBVSxRQUFRLGdCQUFnQixFQUFFLElBQ3BGLEdBQUcsUUFBUSxNQUFNLFFBQVEsY0FBYyxRQUFRO0FBQ2pELG9CQUFZLEVBQUU7QUFBQSxNQUNsQjtBQUVFLFVBQUksT0FBTyxFQUFDLFVBQVUsV0FBVTtBQUFDLGVBQU87QUFBQSxNQUFpQixFQUFDO0FBRTFELFVBQUksV0FBVyxDQUFBO0FBQ2YsVUFBSSxpQkFBaUIsQ0FBQTtBQUVyQixlQUFTLGNBQWM0QixhQUFZO0FBQ2pDLFlBQUlDLGtCQUFpQkQsWUFBVztBQUVoQyxpQkFBUyxPQUFPLE1BQU0sT0FBTyxRQUFRLFdBQVc7QUFDOUMsVUFBQUEsWUFBVyxTQUFTLElBQUksSUFBSTtBQUM1QixjQUFJLFFBQVE7QUFBRSxZQUFBQyxnQkFBZSxJQUFJLElBQy9CLFlBQVksU0FBVSxJQUFJLEtBQUssS0FBSztBQUFDLGtCQUFJLE9BQU8sTUFBTTtBQUFFLHVCQUFPLElBQUksS0FBSyxHQUFHO0FBQUEsY0FBRTtBQUFBLFlBQUUsSUFBSTtBQUFBLFVBQU87QUFBQSxRQUNsRztBQUVJLFFBQUFELFlBQVcsZUFBZTtBQUcxQixRQUFBQSxZQUFXLE9BQU87QUFJbEIsZUFBTyxTQUFTLElBQUksU0FBVSxJQUFJLEtBQUs7QUFBRSxpQkFBTyxHQUFHLFNBQVMsR0FBRztBQUFBLFFBQUUsR0FBSSxJQUFJO0FBQ3pFLGVBQU8sUUFBUSxNQUFNLFNBQVUsSUFBSSxLQUFLO0FBQ3RDLGFBQUcsSUFBSSxhQUFhO0FBQ3BCLG1CQUFTLEVBQUU7QUFBQSxRQUNqQixHQUFPLElBQUk7QUFFUCxlQUFPLGNBQWMsR0FBRyxVQUFVLElBQUk7QUFDdEMsZUFBTyxrQkFBa0IsS0FBSztBQUM5QixlQUFPLGVBQWUsSUFBSTtBQUMxQixlQUFPLFdBQVcsR0FBRyxTQUFVLElBQUk7QUFDakMseUJBQWUsRUFBRTtBQUNqQixzQkFBWSxFQUFFO0FBQ2Qsb0JBQVUsRUFBRTtBQUFBLFFBQ2xCLEdBQU8sSUFBSTtBQUVQLGVBQU8saUJBQWlCLE1BQU0sU0FBVSxJQUFJLEtBQUs7QUFDL0MsYUFBRyxJQUFJLFVBQVU7QUFDakIsY0FBSSxDQUFDLEtBQUs7QUFBRTtBQUFBLFVBQU07QUFDbEIsY0FBSSxZQUFZLENBQUEsR0FBSWxCLFVBQVMsR0FBRyxJQUFJO0FBQ3BDLGFBQUcsSUFBSSxLQUFLLFNBQVUsTUFBTTtBQUMxQixxQkFBUyxNQUFNLE9BQUs7QUFDbEIsa0JBQUksUUFBUSxLQUFLLEtBQUssUUFBUSxLQUFLLEdBQUc7QUFDdEMsa0JBQUksU0FBUyxJQUFJO0FBQUU7QUFBQSxjQUFLO0FBQ3hCLG9CQUFNLFFBQVEsSUFBSTtBQUNsQix3QkFBVSxLQUFLLElBQUlBLFNBQVEsS0FBSyxDQUFDO0FBQUEsWUFDM0M7QUFDUSxZQUFBQTtBQUFBLFVBQ1IsQ0FBTztBQUNELG1CQUFTVixLQUFJLFVBQVUsU0FBUyxHQUFHQSxNQUFLLEdBQUdBLE1BQ3pDO0FBQUUseUJBQWEsR0FBRyxLQUFLLEtBQUssVUFBVUEsRUFBQyxHQUFHLElBQUksVUFBVUEsRUFBQyxFQUFFLE1BQU0sVUFBVUEsRUFBQyxFQUFFLEtBQUssSUFBSSxNQUFNLENBQUM7QUFBQSxVQUFFO0FBQUEsUUFDeEcsQ0FBSztBQUNELGVBQU8sZ0JBQWdCLDRIQUE0SCxTQUFVLElBQUksS0FBSyxLQUFLO0FBQ3pLLGFBQUcsTUFBTSxlQUFlLElBQUksT0FBTyxJQUFJLFVBQVUsSUFBSSxLQUFLLEdBQUksSUFBSSxLQUFLLE9BQVEsR0FBRztBQUNsRixjQUFJLE9BQU8sTUFBTTtBQUFFLGVBQUcsUUFBTztBQUFBLFVBQUc7QUFBQSxRQUN0QyxDQUFLO0FBQ0QsZUFBTywwQkFBMEIsK0JBQStCLFNBQVUsSUFBSTtBQUFFLGlCQUFPLEdBQUcsUUFBTztBQUFBLFFBQUcsR0FBSSxJQUFJO0FBQzVHLGVBQU8saUJBQWlCLElBQUk7QUFDNUIsZUFBTyxjQUFjLFNBQVMsb0JBQW9CLFlBQVksV0FBWTtBQUN4RSxnQkFBTSxJQUFJLE1BQU0seURBQXlEO0FBQUEsUUFDL0UsR0FBTyxJQUFJO0FBQ1AsZUFBTyxjQUFjLE9BQU8sU0FBVSxJQUFJLEtBQUs7QUFBRSxpQkFBTyxHQUFHLGNBQWEsRUFBRyxhQUFhO0FBQUEsUUFBSSxHQUFJLElBQUk7QUFDcEcsZUFBTyxlQUFlLE9BQU8sU0FBVSxJQUFJLEtBQUs7QUFBRSxpQkFBTyxHQUFHLGNBQWEsRUFBRyxjQUFjO0FBQUEsUUFBSSxHQUFJLElBQUk7QUFDdEcsZUFBTyxrQkFBa0IsT0FBTyxTQUFVLElBQUksS0FBSztBQUFFLGlCQUFPLEdBQUcsY0FBYSxFQUFHLGlCQUFpQjtBQUFBLFFBQUksR0FBSSxJQUFJO0FBQzVHLGVBQU8sbUJBQW1CLENBQUMsT0FBTztBQUNsQyxlQUFPLHlCQUF5QixJQUFJO0FBRXBDLGVBQU8sU0FBUyxXQUFXLFNBQVUsSUFBSTtBQUN2Qyx1QkFBYSxFQUFFO0FBQ2Ysd0JBQWMsRUFBRTtBQUFBLFFBQ3RCLEdBQU8sSUFBSTtBQUNQLGVBQU8sVUFBVSxXQUFXLFNBQVUsSUFBSSxLQUFLLEtBQUs7QUFDbEQsY0FBSSxPQUFPLFVBQVUsR0FBRztBQUN4QixjQUFJLE9BQU8sT0FBTyxRQUFRLFVBQVUsR0FBRztBQUN2QyxjQUFJLFFBQVEsS0FBSyxRQUFRO0FBQUUsaUJBQUssT0FBTyxJQUFJLElBQUk7QUFBQSxVQUFFO0FBQ2pELGNBQUksS0FBSyxRQUFRO0FBQUUsaUJBQUssT0FBTyxJQUFJLFFBQVEsSUFBSTtBQUFBLFVBQUU7QUFBQSxRQUN2RCxDQUFLO0FBQ0QsZUFBTyxhQUFhLElBQUk7QUFDeEIsZUFBTyxrQkFBa0IsSUFBSTtBQUU3QixlQUFPLGdCQUFnQixPQUFPLGlCQUFpQixJQUFJO0FBQ25ELGVBQU8sV0FBVyxDQUFBLEdBQUksU0FBVSxJQUFJLEtBQUs7QUFDdkMsYUFBRyxRQUFRLGNBQWMsV0FBVyxLQUFLLEdBQUcsUUFBUSxXQUFXO0FBQy9ELHdCQUFjLEVBQUU7QUFBQSxRQUN0QixHQUFPLElBQUk7QUFDUCxlQUFPLGVBQWUsTUFBTSxTQUFVLElBQUksS0FBSztBQUM3QyxhQUFHLFFBQVEsUUFBUSxNQUFNLE9BQU8sTUFBTSxxQkFBcUIsR0FBRyxPQUFPLElBQUksT0FBTztBQUNoRixhQUFHLFFBQU87QUFBQSxRQUNoQixHQUFPLElBQUk7QUFDUCxlQUFPLDhCQUE4QixPQUFPLFNBQVUsSUFBSTtBQUFFLGlCQUFPLGlCQUFpQixFQUFFO0FBQUEsUUFBRSxHQUFJLElBQUk7QUFDaEcsZUFBTyxrQkFBa0IsVUFBVSxTQUFVLElBQUk7QUFDL0MseUJBQWUsRUFBRTtBQUNqQiwyQkFBaUIsRUFBRTtBQUNuQixhQUFHLFFBQVEsV0FBVyxhQUFhLEdBQUcsSUFBSSxTQUFTO0FBQ25ELGFBQUcsUUFBUSxXQUFXLGNBQWMsR0FBRyxJQUFJLFVBQVU7QUFBQSxRQUMzRCxHQUFPLElBQUk7QUFDUCxlQUFPLGVBQWUsT0FBTyxTQUFVLElBQUksS0FBSztBQUM5QyxhQUFHLFFBQVEsY0FBYyxXQUFXLEdBQUcsUUFBUSxTQUFTLEdBQUc7QUFDM0Qsd0JBQWMsRUFBRTtBQUFBLFFBQ3RCLEdBQU8sSUFBSTtBQUNQLGVBQU8sbUJBQW1CLEdBQUcsZUFBZSxJQUFJO0FBQ2hELGVBQU8sdUJBQXVCLFNBQVUsU0FBUztBQUFFLGlCQUFPO0FBQUEsUUFBUSxHQUFJLGVBQWUsSUFBSTtBQUN6RixlQUFPLDJCQUEyQixPQUFPLGlCQUFpQixJQUFJO0FBRTlELGVBQU8sK0JBQStCLElBQUk7QUFDMUMsZUFBTyxtQkFBbUIsSUFBSTtBQUM5QixlQUFPLDBCQUEwQixJQUFJO0FBQ3JDLGVBQU8sc0JBQXNCLEtBQUs7QUFFbEMsZUFBTyxZQUFZLE9BQU8sU0FBVSxJQUFJLEtBQUs7QUFDM0MsY0FBSSxPQUFPLFlBQVk7QUFDckIsbUJBQU8sRUFBRTtBQUNULGVBQUcsUUFBUSxNQUFNLEtBQUk7QUFBQSxVQUM3QjtBQUNNLGFBQUcsUUFBUSxNQUFNLGdCQUFnQixHQUFHO0FBQUEsUUFDMUMsQ0FBSztBQUVELGVBQU8scUJBQXFCLE1BQU0sU0FBVSxJQUFJLEtBQUs7QUFDbkQsZ0JBQU8sUUFBUSxLQUFNLE9BQU87QUFDNUIsYUFBRyxRQUFRLE1BQU0seUJBQXlCLEdBQUc7QUFBQSxRQUNuRCxDQUFLO0FBRUQsZUFBTyxnQkFBZ0IsT0FBTyxTQUFVLElBQUksS0FBSztBQUFDLGNBQUksQ0FBQyxLQUFLO0FBQUUsZUFBRyxRQUFRLE1BQU0sTUFBSztBQUFBLFVBQUc7QUFBQSxRQUFFLEdBQUcsSUFBSTtBQUNoRyxlQUFPLFlBQVksTUFBTSxlQUFlO0FBQ3hDLGVBQU8sc0JBQXNCLElBQUk7QUFFakMsZUFBTyxtQkFBbUIsR0FBRztBQUM3QixlQUFPLHNCQUFzQixDQUFDO0FBQzlCLGVBQU8sZ0JBQWdCLEdBQUcsaUJBQWlCLElBQUk7QUFDL0MsZUFBTyw2QkFBNkIsTUFBTSxpQkFBaUIsSUFBSTtBQUMvRCxlQUFPLFlBQVksR0FBRztBQUN0QixlQUFPLGFBQWEsR0FBRztBQUN2QixlQUFPLGdCQUFnQixNQUFNLGdCQUFnQixJQUFJO0FBQ2pELGVBQU8sZ0JBQWdCLE9BQU8sZ0JBQWdCLElBQUk7QUFDbEQsZUFBTyxnQkFBZ0IsR0FBRztBQUMxQixlQUFPLGFBQWEsS0FBSyxTQUFVLElBQUksS0FBSztBQUFFLGlCQUFPLEdBQUcsSUFBSSxRQUFRLFlBQVk7QUFBQSxRQUFJLENBQUU7QUFDdEYsZUFBTyxxQkFBcUIsSUFBSTtBQUNoQyxlQUFPLGtCQUFrQixJQUFJLFNBQVUsSUFBSTtBQUFFLGlCQUFPLEdBQUcsUUFBTztBQUFBLFFBQUcsR0FBSSxJQUFJO0FBQ3pFLGVBQU8sc0JBQXNCLEtBQU8sZ0JBQWdCLElBQUk7QUFDeEQsZUFBTyx1QkFBdUIsTUFBTSxTQUFVLElBQUksS0FBSztBQUNyRCxjQUFJLENBQUMsS0FBSztBQUFFLGVBQUcsUUFBUSxNQUFNLGNBQWE7QUFBQSxVQUFHO0FBQUEsUUFDbkQsQ0FBSztBQUVELGVBQU8sWUFBWSxNQUFNLFNBQVUsSUFBSSxLQUFLO0FBQUUsaUJBQU8sR0FBRyxRQUFRLE1BQU0sU0FBUSxFQUFHLFdBQVcsT0FBTztBQUFBLFNBQUs7QUFDeEcsZUFBTyxhQUFhLElBQUk7QUFDeEIsZUFBTyxhQUFhLE9BQU8sU0FBVSxJQUFJLEtBQUs7QUFBRSxpQkFBTyxHQUFHLElBQUksYUFBYSxHQUFHO0FBQUEsUUFBRSxHQUFJLElBQUk7QUFDeEYsZUFBTyxXQUFXLElBQUk7QUFBQSxNQUMxQjtBQUVFLGVBQVMsZ0JBQWdCLElBQUksT0FBTyxLQUFLO0FBQ3ZDLFlBQUksUUFBUSxPQUFPLE9BQU87QUFDMUIsWUFBSSxDQUFDLFNBQVMsQ0FBQyxPQUFPO0FBQ3BCLGNBQUksUUFBUSxHQUFHLFFBQVE7QUFDdkIsY0FBSSxTQUFTLFFBQVEsS0FBSztBQUMxQixpQkFBTyxHQUFHLFFBQVEsVUFBVSxhQUFhLE1BQU0sS0FBSztBQUNwRCxpQkFBTyxHQUFHLFFBQVEsVUFBVSxhQUFhLE1BQU0sS0FBSztBQUNwRCxpQkFBTyxHQUFHLFFBQVEsVUFBVSxZQUFZLE1BQU0sSUFBSTtBQUNsRCxpQkFBTyxHQUFHLFFBQVEsVUFBVSxhQUFhLE1BQU0sS0FBSztBQUNwRCxpQkFBTyxHQUFHLFFBQVEsVUFBVSxRQUFRLE1BQU0sSUFBSTtBQUFBLFFBQ3BEO0FBQUEsTUFDQTtBQUVFLGVBQVMsZ0JBQWdCLElBQUk7QUFDM0IsWUFBSSxHQUFHLFFBQVEsY0FBYztBQUMzQixtQkFBUyxHQUFHLFFBQVEsU0FBUyxpQkFBaUI7QUFDOUMsYUFBRyxRQUFRLE1BQU0sTUFBTSxXQUFXO0FBQ2xDLGFBQUcsUUFBUSxhQUFhO0FBQUEsUUFDOUIsT0FBVztBQUNMLGtCQUFRLEdBQUcsUUFBUSxTQUFTLGlCQUFpQjtBQUM3QyxzQkFBWSxFQUFFO0FBQUEsUUFDcEI7QUFDSSw0QkFBb0IsRUFBRTtBQUN0QixrQkFBVSxFQUFFO0FBQ1osb0JBQVksRUFBRTtBQUNkLG1CQUFXLFdBQVk7QUFBRSxpQkFBTyxpQkFBaUIsRUFBRTtBQUFBLFFBQUUsR0FBSSxHQUFHO0FBQUEsTUFDaEU7QUFLRSxlQUFTLFdBQVcsT0FBTyxTQUFTO0FBQ2xDLFlBQUlxQixXQUFTO0FBRWIsWUFBSSxFQUFFLGdCQUFnQixhQUFhO0FBQUUsaUJBQU8sSUFBSSxXQUFXLE9BQU8sT0FBTztBQUFBLFFBQUM7QUFFMUUsYUFBSyxVQUFVLFVBQVUsVUFBVSxRQUFRLE9BQU8sSUFBSSxDQUFBO0FBRXRELGdCQUFRLFVBQVUsU0FBUyxLQUFLO0FBRWhDLFlBQUluQixPQUFNLFFBQVE7QUFDbEIsWUFBSSxPQUFPQSxRQUFPLFVBQVU7QUFBRSxVQUFBQSxPQUFNLElBQUksSUFBSUEsTUFBSyxRQUFRLE1BQU0sTUFBTSxRQUFRLGVBQWUsUUFBUSxTQUFTO0FBQUEsUUFBRSxXQUN0RyxRQUFRLE1BQU07QUFBRSxVQUFBQSxLQUFJLGFBQWEsUUFBUTtBQUFBLFFBQUs7QUFDdkQsYUFBSyxNQUFNQTtBQUVYLFlBQUksUUFBUSxJQUFJLFdBQVcsWUFBWSxRQUFRLFVBQVUsRUFBRSxJQUFJO0FBQy9ELFlBQUksVUFBVSxLQUFLLFVBQVUsSUFBSSxRQUFRLE9BQU9BLE1BQUssT0FBTyxPQUFPO0FBQ25FLGdCQUFRLFFBQVEsYUFBYTtBQUM3QixxQkFBYSxJQUFJO0FBQ2pCLFlBQUksUUFBUSxjQUNWO0FBQUUsZUFBSyxRQUFRLFFBQVEsYUFBYTtBQUFBLFFBQW1CO0FBQ3pELHVCQUFlLElBQUk7QUFFbkIsYUFBSyxRQUFRO0FBQUEsVUFDWCxTQUFTLENBQUE7QUFBQTtBQUFBLFVBQ1QsVUFBVSxDQUFBO0FBQUE7QUFBQSxVQUNWLFNBQVM7QUFBQTtBQUFBLFVBQ1QsV0FBVztBQUFBLFVBQ1gsbUJBQW1CO0FBQUEsVUFDbkIsU0FBUztBQUFBLFVBQ1QsZUFBZTtBQUFBO0FBQUEsVUFDZixlQUFlO0FBQUEsVUFBSSxhQUFhO0FBQUE7QUFBQSxVQUNoQyxlQUFlO0FBQUEsVUFDZixjQUFjO0FBQUEsVUFDZCxXQUFXLElBQUksUUFBTztBQUFBO0FBQUEsVUFDdEIsUUFBUTtBQUFBO0FBQUEsVUFDUixjQUFjO0FBQUE7QUFHaEIsWUFBSSxRQUFRLGFBQWEsQ0FBQyxRQUFRO0FBQUUsa0JBQVEsTUFBTSxNQUFLO0FBQUEsUUFBRztBQUkxRCxZQUFJLE1BQU0sYUFBYSxJQUFJO0FBQUUscUJBQVcsV0FBWTtBQUFFLG1CQUFPbUIsU0FBTyxRQUFRLE1BQU0sTUFBTSxJQUFJO0FBQUEsVUFBRSxHQUFJLEVBQUU7QUFBQSxRQUFFO0FBRXRHLDhCQUFzQixJQUFJO0FBQzFCLDZCQUFvQjtBQUVwQix1QkFBZSxJQUFJO0FBQ25CLGFBQUssTUFBTSxjQUFjO0FBQ3pCLGtCQUFVLE1BQU1uQixJQUFHO0FBRW5CLFlBQUssUUFBUSxhQUFhLENBQUMsVUFBVyxLQUFLLFNBQVEsR0FDakQ7QUFBRSxxQkFBVyxXQUFZO0FBQ3ZCLGdCQUFJbUIsU0FBTyxTQUFRLEtBQU0sQ0FBQ0EsU0FBTyxNQUFNLFNBQVM7QUFBRSxzQkFBUUEsUUFBTTtBQUFBLFlBQUU7QUFBQSxVQUMxRSxHQUFTLEVBQUU7QUFBQSxRQUFFLE9BRVA7QUFBRSxpQkFBTyxJQUFJO0FBQUEsUUFBRTtBQUVqQixpQkFBUyxPQUFPLGdCQUFnQjtBQUFFLGNBQUksZUFBZSxlQUFlLEdBQUcsR0FDckU7QUFBRSwyQkFBZSxHQUFHLEVBQUUsTUFBTSxRQUFRLEdBQUcsR0FBRyxJQUFJO0FBQUEsVUFBRTtBQUFBLFFBQUU7QUFDcEQsbUNBQTJCLElBQUk7QUFDL0IsWUFBSSxRQUFRLFlBQVk7QUFBRSxrQkFBUSxXQUFXLElBQUk7QUFBQSxRQUFFO0FBQ25ELGlCQUFTckIsS0FBSSxHQUFHQSxLQUFJLFVBQVUsUUFBUSxFQUFFQSxJQUFHO0FBQUUsb0JBQVVBLEVBQUMsRUFBRSxJQUFJO0FBQUEsUUFBRTtBQUNoRSxxQkFBYSxJQUFJO0FBR2pCLFlBQUksVUFBVSxRQUFRLGdCQUNsQixpQkFBaUIsUUFBUSxPQUFPLEVBQUUsaUJBQWlCLHNCQUNyRDtBQUFFLGtCQUFRLFFBQVEsTUFBTSxnQkFBZ0I7QUFBQSxRQUFPO0FBQUEsTUFDckQ7QUFHRSxpQkFBVyxXQUFXO0FBRXRCLGlCQUFXLGlCQUFpQjtBQUc1QixlQUFTLHNCQUFzQixJQUFJO0FBQ2pDLFlBQUksSUFBSSxHQUFHO0FBQ1gsV0FBRyxFQUFFLFVBQVUsYUFBYSxVQUFVLElBQUksV0FBVyxDQUFDO0FBRXRELFlBQUksTUFBTSxhQUFhLElBQ3JCO0FBQUUsYUFBRyxFQUFFLFVBQVUsWUFBWSxVQUFVLElBQUksU0FBVSxHQUFHO0FBQ3RELGdCQUFJLGVBQWUsSUFBSSxDQUFDLEdBQUc7QUFBRTtBQUFBLFlBQU07QUFDbkMsZ0JBQUksTUFBTSxhQUFhLElBQUksQ0FBQztBQUM1QixnQkFBSSxDQUFDLE9BQU8sY0FBYyxJQUFJLENBQUMsS0FBSyxjQUFjLEdBQUcsU0FBUyxDQUFDLEdBQUc7QUFBRTtBQUFBLFlBQU07QUFDMUUsNkJBQWlCLENBQUM7QUFDbEIsZ0JBQUksT0FBTyxHQUFHLFdBQVcsR0FBRztBQUM1Qiw0QkFBZ0IsR0FBRyxLQUFLLEtBQUssUUFBUSxLQUFLLElBQUk7QUFBQSxVQUN0RCxDQUFPLENBQUM7QUFBQSxRQUFFLE9BRUo7QUFBRSxhQUFHLEVBQUUsVUFBVSxZQUFZLFNBQVUsR0FBRztBQUFFLG1CQUFPLGVBQWUsSUFBSSxDQUFDLEtBQUssaUJBQWlCLENBQUM7QUFBQSxVQUFFLENBQUU7QUFBQSxRQUFFO0FBSXRHLFdBQUcsRUFBRSxVQUFVLGVBQWUsU0FBVSxHQUFHO0FBQUUsaUJBQU8sY0FBYyxJQUFJLENBQUM7QUFBQSxRQUFFLENBQUU7QUFDM0UsV0FBRyxFQUFFLE1BQU0sU0FBUSxHQUFJLGVBQWUsU0FBVSxHQUFHO0FBQ2pELGNBQUksQ0FBQyxFQUFFLFNBQVMsU0FBUyxFQUFFLE1BQU0sR0FBRztBQUFFLDBCQUFjLElBQUksQ0FBQztBQUFBLFVBQUU7QUFBQSxRQUNqRSxDQUFLO0FBR0QsWUFBSSxlQUFlLFlBQVksRUFBQyxLQUFLLEVBQUM7QUFDdEMsaUJBQVMsY0FBYztBQUNyQixjQUFJLEVBQUUsYUFBYTtBQUNqQiw0QkFBZ0IsV0FBVyxXQUFZO0FBQUUscUJBQU8sRUFBRSxjQUFjO0FBQUEsWUFBSyxHQUFJLEdBQUk7QUFDN0Usd0JBQVksRUFBRTtBQUNkLHNCQUFVLE1BQU0sQ0FBQyxvQkFBSTtBQUFBLFVBQzdCO0FBQUEsUUFDQTtBQUNJLGlCQUFTLHNCQUFzQixHQUFHO0FBQ2hDLGNBQUksRUFBRSxRQUFRLFVBQVUsR0FBRztBQUFFLG1CQUFPO0FBQUEsVUFBSztBQUN6QyxjQUFJLFFBQVEsRUFBRSxRQUFRLENBQUM7QUFDdkIsaUJBQU8sTUFBTSxXQUFXLEtBQUssTUFBTSxXQUFXO0FBQUEsUUFDcEQ7QUFDSSxpQkFBUyxRQUFRLE9BQU8sT0FBTztBQUM3QixjQUFJLE1BQU0sUUFBUSxNQUFNO0FBQUUsbUJBQU87QUFBQSxVQUFJO0FBQ3JDLGNBQUksS0FBSyxNQUFNLE9BQU8sTUFBTSxNQUFNLEtBQUssTUFBTSxNQUFNLE1BQU07QUFDekQsaUJBQU8sS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLO0FBQUEsUUFDdEM7QUFDSSxXQUFHLEVBQUUsVUFBVSxjQUFjLFNBQVUsR0FBRztBQUN4QyxjQUFJLENBQUMsZUFBZSxJQUFJLENBQUMsS0FBSyxDQUFDLHNCQUFzQixDQUFDLEtBQUssQ0FBQyxjQUFjLElBQUksQ0FBQyxHQUFHO0FBQ2hGLGNBQUUsTUFBTSxhQUFZO0FBQ3BCLHlCQUFhLGFBQWE7QUFDMUIsZ0JBQUksTUFBTSxDQUFDLG9CQUFJO0FBQ2YsY0FBRSxjQUFjO0FBQUEsY0FBQyxPQUFPO0FBQUEsY0FBSyxPQUFPO0FBQUEsY0FDbkIsTUFBTSxNQUFNLFVBQVUsT0FBTyxNQUFNLFlBQVk7QUFBQSxZQUFJO0FBQ3BFLGdCQUFJLEVBQUUsUUFBUSxVQUFVLEdBQUc7QUFDekIsZ0JBQUUsWUFBWSxPQUFPLEVBQUUsUUFBUSxDQUFDLEVBQUU7QUFDbEMsZ0JBQUUsWUFBWSxNQUFNLEVBQUUsUUFBUSxDQUFDLEVBQUU7QUFBQSxZQUMzQztBQUFBLFVBQ0E7QUFBQSxRQUNBLENBQUs7QUFDRCxXQUFHLEVBQUUsVUFBVSxhQUFhLFdBQVk7QUFDdEMsY0FBSSxFQUFFLGFBQWE7QUFBRSxjQUFFLFlBQVksUUFBUTtBQUFBLFVBQUs7QUFBQSxRQUN0RCxDQUFLO0FBQ0QsV0FBRyxFQUFFLFVBQVUsWUFBWSxTQUFVLEdBQUc7QUFDdEMsY0FBSSxRQUFRLEVBQUU7QUFDZCxjQUFJLFNBQVMsQ0FBQyxjQUFjLEdBQUcsQ0FBQyxLQUFLLE1BQU0sUUFBUSxRQUMvQyxDQUFDLE1BQU0sU0FBUyxvQkFBSSxTQUFPLE1BQU0sUUFBUSxLQUFLO0FBQ2hELGdCQUFJLE1BQU0sR0FBRyxXQUFXLEVBQUUsYUFBYSxNQUFNLEdBQUdRO0FBQ2hELGdCQUFJLENBQUMsTUFBTSxRQUFRLFFBQVEsT0FBTyxNQUFNLElBQUksR0FDMUM7QUFBRSxjQUFBQSxTQUFRLElBQUksTUFBTSxLQUFLLEdBQUc7QUFBQSxZQUFFLFdBQ3ZCLENBQUMsTUFBTSxLQUFLLFFBQVEsUUFBUSxPQUFPLE1BQU0sS0FBSyxJQUFJLEdBQ3pEO0FBQUUsY0FBQUEsU0FBUSxHQUFHLFdBQVcsR0FBRztBQUFBLFlBQUUsT0FFN0I7QUFBRSxjQUFBQSxTQUFRLElBQUksTUFBTSxJQUFJLElBQUksTUFBTSxDQUFDLEdBQUcsUUFBUSxHQUFHLEtBQUssSUFBSSxJQUFJLE9BQU8sR0FBRyxDQUFDLENBQUMsQ0FBQztBQUFBLFlBQUU7QUFDL0UsZUFBRyxhQUFhQSxPQUFNLFFBQVFBLE9BQU0sSUFBSTtBQUN4QyxlQUFHLE1BQUs7QUFDUiw2QkFBaUIsQ0FBQztBQUFBLFVBQzFCO0FBQ00sc0JBQVc7QUFBQSxRQUNqQixDQUFLO0FBQ0QsV0FBRyxFQUFFLFVBQVUsZUFBZSxXQUFXO0FBSXpDLFdBQUcsRUFBRSxVQUFVLFVBQVUsV0FBWTtBQUNuQyxjQUFJLEVBQUUsU0FBUyxjQUFjO0FBQzNCLDRCQUFnQixJQUFJLEVBQUUsU0FBUyxTQUFTO0FBQ3hDLDBCQUFjLElBQUksRUFBRSxTQUFTLFlBQVksSUFBSTtBQUM3QyxtQkFBTyxJQUFJLFVBQVUsRUFBRTtBQUFBLFVBQy9CO0FBQUEsUUFDQSxDQUFLO0FBR0QsV0FBRyxFQUFFLFVBQVUsY0FBYyxTQUFVLEdBQUc7QUFBRSxpQkFBTyxjQUFjLElBQUksQ0FBQztBQUFBLFFBQUUsQ0FBRTtBQUMxRSxXQUFHLEVBQUUsVUFBVSxrQkFBa0IsU0FBVSxHQUFHO0FBQUUsaUJBQU8sY0FBYyxJQUFJLENBQUM7QUFBQSxRQUFFLENBQUU7QUFHOUUsV0FBRyxFQUFFLFNBQVMsVUFBVSxXQUFZO0FBQUUsaUJBQU8sRUFBRSxRQUFRLFlBQVksRUFBRSxRQUFRLGFBQWE7QUFBQSxRQUFFLENBQUU7QUFFOUYsVUFBRSxnQkFBZ0I7QUFBQSxVQUNoQixPQUFPLFNBQVUsR0FBRztBQUFDLGdCQUFJLENBQUMsZUFBZSxJQUFJLENBQUMsR0FBRztBQUFFLHFCQUFPLENBQUM7QUFBQSxZQUFFO0FBQUEsVUFBRTtBQUFBLFVBQy9ELE1BQU0sU0FBVSxHQUFHO0FBQUMsZ0JBQUksQ0FBQyxlQUFlLElBQUksQ0FBQyxHQUFHO0FBQUUseUJBQVcsSUFBSSxDQUFDO0FBQUcscUJBQU8sQ0FBQztBQUFBO1VBQUk7QUFBQSxVQUNqRixPQUFPLFNBQVUsR0FBRztBQUFFLG1CQUFPLFlBQVksSUFBSSxDQUFDO0FBQUEsVUFBRTtBQUFBLFVBQ2hELE1BQU0sVUFBVSxJQUFJLE1BQU07QUFBQSxVQUMxQixPQUFPLFNBQVUsR0FBRztBQUFDLGdCQUFJLENBQUMsZUFBZSxJQUFJLENBQUMsR0FBRztBQUFFLDhCQUFnQixFQUFFO0FBQUEsWUFBRTtBQUFBLFVBQUU7QUFBQTtBQUczRSxZQUFJLE1BQU0sRUFBRSxNQUFNLFNBQVE7QUFDMUIsV0FBRyxLQUFLLFNBQVMsU0FBVSxHQUFHO0FBQUUsaUJBQU8sUUFBUSxLQUFLLElBQUksQ0FBQztBQUFBLFFBQUUsQ0FBRTtBQUM3RCxXQUFHLEtBQUssV0FBVyxVQUFVLElBQUksU0FBUyxDQUFDO0FBQzNDLFdBQUcsS0FBSyxZQUFZLFVBQVUsSUFBSSxVQUFVLENBQUM7QUFDN0MsV0FBRyxLQUFLLFNBQVMsU0FBVSxHQUFHO0FBQUUsaUJBQU8sUUFBUSxJQUFJLENBQUM7QUFBQSxTQUFJO0FBQ3hELFdBQUcsS0FBSyxRQUFRLFNBQVUsR0FBRztBQUFFLGlCQUFPLE9BQU8sSUFBSSxDQUFDO0FBQUEsU0FBSTtBQUFBLE1BQzFEO0FBRUUsVUFBSSxZQUFZLENBQUE7QUFDaEIsaUJBQVcsaUJBQWlCLFNBQVUsR0FBRztBQUFFLGVBQU8sVUFBVSxLQUFLLENBQUM7QUFBQSxNQUFFO0FBT3BFLGVBQVMsV0FBVyxJQUFJLEdBQUcsS0FBSyxZQUFZO0FBQzFDLFlBQUlOLE9BQU0sR0FBRyxLQUFLO0FBQ2xCLFlBQUksT0FBTyxNQUFNO0FBQUUsZ0JBQU07QUFBQSxRQUFNO0FBQy9CLFlBQUksT0FBTyxTQUFTO0FBR2xCLGNBQUksQ0FBQ0EsS0FBSSxLQUFLLFFBQVE7QUFBRSxrQkFBTTtBQUFBLFVBQU8sT0FDaEM7QUFBRSxvQkFBUSxpQkFBaUIsSUFBSSxDQUFDLEVBQUU7QUFBQSxVQUFNO0FBQUEsUUFDbkQ7QUFFSSxZQUFJLFVBQVUsR0FBRyxRQUFRO0FBQ3pCLFlBQUksT0FBTyxRQUFRQSxNQUFLLENBQUMsR0FBRyxXQUFXLFlBQVksS0FBSyxNQUFNLE1BQU0sT0FBTztBQUMzRSxZQUFJLEtBQUssWUFBWTtBQUFFLGVBQUssYUFBYTtBQUFBLFFBQUs7QUFDOUMsWUFBSSxpQkFBaUIsS0FBSyxLQUFLLE1BQU0sTUFBTSxFQUFFLENBQUMsR0FBRztBQUNqRCxZQUFJLENBQUMsY0FBYyxDQUFDLEtBQUssS0FBSyxLQUFLLElBQUksR0FBRztBQUN4Qyx3QkFBYztBQUNkLGdCQUFNO0FBQUEsUUFDWixXQUFlLE9BQU8sU0FBUztBQUN6Qix3QkFBY0EsS0FBSSxLQUFLLE9BQU8sT0FBTyxLQUFLLEtBQUssTUFBTSxlQUFlLE1BQU0sR0FBRyxLQUFLLElBQUk7QUFDdEYsY0FBSSxlQUFlLFFBQVEsY0FBYyxLQUFLO0FBQzVDLGdCQUFJLENBQUMsWUFBWTtBQUFFO0FBQUEsWUFBTTtBQUN6QixrQkFBTTtBQUFBLFVBQ2Q7QUFBQSxRQUNBO0FBQ0ksWUFBSSxPQUFPLFFBQVE7QUFDakIsY0FBSSxJQUFJQSxLQUFJLE9BQU87QUFBRSwwQkFBYyxZQUFZLFFBQVFBLE1BQUssSUFBRSxDQUFDLEVBQUUsTUFBTSxNQUFNLE9BQU87QUFBQSxVQUFFLE9BQ2pGO0FBQUUsMEJBQWM7QUFBQSxVQUFFO0FBQUEsUUFDN0IsV0FBZSxPQUFPLE9BQU87QUFDdkIsd0JBQWMsV0FBVyxHQUFHLFFBQVE7QUFBQSxRQUMxQyxXQUFlLE9BQU8sWUFBWTtBQUM1Qix3QkFBYyxXQUFXLEdBQUcsUUFBUTtBQUFBLFFBQzFDLFdBQWUsT0FBTyxPQUFPLFVBQVU7QUFDakMsd0JBQWMsV0FBVztBQUFBLFFBQy9CO0FBQ0ksc0JBQWMsS0FBSyxJQUFJLEdBQUcsV0FBVztBQUVyQyxZQUFJLGVBQWUsSUFBSSxNQUFNO0FBQzdCLFlBQUksR0FBRyxRQUFRLGdCQUNiO0FBQUUsbUJBQVNGLEtBQUksS0FBSyxNQUFNLGNBQWMsT0FBTyxHQUFHQSxJQUFHLEVBQUVBLElBQUc7QUFBQyxtQkFBTztBQUFTLDRCQUFnQjtBQUFBLFVBQUs7QUFBQSxRQUFDO0FBQ25HLFlBQUksTUFBTSxhQUFhO0FBQUUsMEJBQWdCLFNBQVMsY0FBYyxHQUFHO0FBQUEsUUFBRTtBQUVyRSxZQUFJLGdCQUFnQixnQkFBZ0I7QUFDbEMsdUJBQWFFLE1BQUssY0FBYyxJQUFJLEdBQUcsQ0FBQyxHQUFHLElBQUksR0FBRyxlQUFlLE1BQU0sR0FBRyxRQUFRO0FBQ2xGLGVBQUssYUFBYTtBQUNsQixpQkFBTztBQUFBLFFBQ2IsT0FBVztBQUdMLG1CQUFTRyxPQUFNLEdBQUdBLE9BQU1ILEtBQUksSUFBSSxPQUFPLFFBQVFHLFFBQU87QUFDcEQsZ0JBQUlHLFNBQVFOLEtBQUksSUFBSSxPQUFPRyxJQUFHO0FBQzlCLGdCQUFJRyxPQUFNLEtBQUssUUFBUSxLQUFLQSxPQUFNLEtBQUssS0FBSyxlQUFlLFFBQVE7QUFDakUsa0JBQUksUUFBUSxJQUFJLEdBQUcsZUFBZSxNQUFNO0FBQ3hDLGtDQUFvQk4sTUFBS0csTUFBSyxJQUFJLE1BQU0sT0FBTyxLQUFLLENBQUM7QUFDckQ7QUFBQSxZQUNWO0FBQUEsVUFDQTtBQUFBLFFBQ0E7QUFBQSxNQUNBO0FBS0UsVUFBSSxhQUFhO0FBRWpCLGVBQVMsY0FBYyxlQUFlO0FBQ3BDLHFCQUFhO0FBQUEsTUFDakI7QUFFRSxlQUFTLGVBQWUsSUFBSSxVQUFVLFNBQVMsS0FBSyxRQUFRO0FBQzFELFlBQUlILE9BQU0sR0FBRztBQUNiLFdBQUcsUUFBUSxRQUFRO0FBQ25CLFlBQUksQ0FBQyxLQUFLO0FBQUUsZ0JBQU1BLEtBQUk7QUFBQSxRQUFJO0FBRTFCLFlBQUksU0FBUyxDQUFDLG9CQUFJLFNBQU87QUFDekIsWUFBSSxRQUFRLFVBQVUsV0FBVyxHQUFHLE1BQU0sZ0JBQWdCO0FBQzFELFlBQUksWUFBWSxlQUFlLFFBQVEsR0FBRyxhQUFhO0FBRXZELFlBQUksU0FBUyxJQUFJLE9BQU8sU0FBUyxHQUFHO0FBQ2xDLGNBQUksY0FBYyxXQUFXLEtBQUssS0FBSyxJQUFJLEtBQUssVUFBVTtBQUN4RCxnQkFBSSxJQUFJLE9BQU8sU0FBUyxXQUFXLEtBQUssVUFBVSxHQUFHO0FBQ25ELDJCQUFhLENBQUE7QUFDYix1QkFBU0YsS0FBSSxHQUFHQSxLQUFJLFdBQVcsS0FBSyxRQUFRQSxNQUMxQztBQUFFLDJCQUFXLEtBQUtFLEtBQUksV0FBVyxXQUFXLEtBQUtGLEVBQUMsQ0FBQyxDQUFDO0FBQUEsY0FBRTtBQUFBLFlBQ2xFO0FBQUEsVUFDQSxXQUFpQixVQUFVLFVBQVUsSUFBSSxPQUFPLFVBQVUsR0FBRyxRQUFRLHdCQUF3QjtBQUNyRix5QkFBYSxJQUFJLFdBQVcsU0FBVSxHQUFHO0FBQUUscUJBQU8sQ0FBQyxDQUFDO0FBQUEsYUFBSTtBQUFBLFVBQ2hFO0FBQUEsUUFDQTtBQUVJLFlBQUksY0FBYyxHQUFHLE1BQU07QUFFM0IsaUJBQVNLLE9BQU0sSUFBSSxPQUFPLFNBQVMsR0FBR0EsUUFBTyxHQUFHQSxRQUFPO0FBQ3JELGNBQUlHLFNBQVEsSUFBSSxPQUFPSCxJQUFHO0FBQzFCLGNBQUksT0FBT0csT0FBTSxLQUFJLEdBQUksS0FBS0EsT0FBTSxHQUFFO0FBQ3RDLGNBQUlBLE9BQU0sU0FBUztBQUNqQixnQkFBSSxXQUFXLFVBQVUsR0FDdkI7QUFBRSxxQkFBTyxJQUFJLEtBQUssTUFBTSxLQUFLLEtBQUssT0FBTztBQUFBLFlBQUUsV0FDcEMsR0FBRyxNQUFNLGFBQWEsQ0FBQyxPQUM5QjtBQUFFLG1CQUFLLElBQUksR0FBRyxNQUFNLEtBQUssSUFBSSxRQUFRTixNQUFLLEdBQUcsSUFBSSxFQUFFLEtBQUssUUFBUSxHQUFHLEtBQUssSUFBSSxTQUFTLEVBQUUsTUFBTSxDQUFDO0FBQUEsWUFBRSxXQUN6RixTQUFTLGNBQWMsV0FBVyxZQUFZLFdBQVcsS0FBSyxLQUFLLElBQUksS0FBSyxVQUFVLEtBQUssSUFBSSxHQUN0RztBQUFFLHFCQUFPLEtBQUssSUFBSSxLQUFLLE1BQU0sQ0FBQztBQUFBLFlBQUU7QUFBQSxVQUMxQztBQUNNLGNBQUksY0FBYztBQUFBLFlBQUM7QUFBQSxZQUFZO0FBQUEsWUFBUSxNQUFNLGFBQWEsV0FBV0csT0FBTSxXQUFXLE1BQU0sSUFBSTtBQUFBLFlBQzdFLFFBQVEsV0FBVyxRQUFRLFVBQVUsR0FBRyxNQUFNLGNBQWMsU0FBUyxRQUFRO0FBQUEsVUFBUztBQUN6RyxxQkFBVyxHQUFHLEtBQUssV0FBVztBQUM5QixzQkFBWSxJQUFJLGFBQWEsSUFBSSxXQUFXO0FBQUEsUUFDbEQ7QUFDSSxZQUFJLFlBQVksQ0FBQyxPQUNmO0FBQUUsMEJBQWdCLElBQUksUUFBUTtBQUFBLFFBQUU7QUFFbEMsNEJBQW9CLEVBQUU7QUFDdEIsWUFBSSxHQUFHLE1BQU0sY0FBYyxHQUFHO0FBQUUsYUFBRyxNQUFNLGNBQWM7QUFBQSxRQUFZO0FBQ25FLFdBQUcsTUFBTSxTQUFTO0FBQ2xCLFdBQUcsTUFBTSxnQkFBZ0IsR0FBRyxNQUFNLGNBQWM7QUFBQSxNQUNwRDtBQUVFLGVBQVMsWUFBWSxHQUFHLElBQUk7QUFDMUIsWUFBSSxTQUFTLEVBQUUsaUJBQWlCLEVBQUUsY0FBYyxRQUFRLE1BQU07QUFDOUQsWUFBSSxRQUFRO0FBQ1YsWUFBRSxlQUFjO0FBQ2hCLGNBQUksQ0FBQyxHQUFHLGdCQUFnQixDQUFDLEdBQUcsUUFBUSxnQkFBZ0IsR0FBRyxTQUFRLEdBQzdEO0FBQUUsb0JBQVEsSUFBSSxXQUFZO0FBQUUscUJBQU8sZUFBZSxJQUFJLFFBQVEsR0FBRyxNQUFNLE9BQU87QUFBQSxZQUFFLENBQUU7QUFBQSxVQUFFO0FBQ3RGLGlCQUFPO0FBQUEsUUFDYjtBQUFBLE1BQ0E7QUFFRSxlQUFTLGdCQUFnQixJQUFJLFVBQVU7QUFFckMsWUFBSSxDQUFDLEdBQUcsUUFBUSxpQkFBaUIsQ0FBQyxHQUFHLFFBQVEsYUFBYTtBQUFFO0FBQUEsUUFBTTtBQUNsRSxZQUFJLE1BQU0sR0FBRyxJQUFJO0FBRWpCLGlCQUFTTCxLQUFJLElBQUksT0FBTyxTQUFTLEdBQUdBLE1BQUssR0FBR0EsTUFBSztBQUMvQyxjQUFJUSxTQUFRLElBQUksT0FBT1IsRUFBQztBQUN4QixjQUFJUSxPQUFNLEtBQUssS0FBSyxPQUFRUixNQUFLLElBQUksT0FBT0EsS0FBSSxDQUFDLEVBQUUsS0FBSyxRQUFRUSxPQUFNLEtBQUssTUFBTztBQUFFO0FBQUEsVUFBUTtBQUM1RixjQUFJLE9BQU8sR0FBRyxVQUFVQSxPQUFNLElBQUk7QUFDbEMsY0FBSSxXQUFXO0FBQ2YsY0FBSSxLQUFLLGVBQWU7QUFDdEIscUJBQVMsSUFBSSxHQUFHLElBQUksS0FBSyxjQUFjLFFBQVEsS0FDN0M7QUFBRSxrQkFBSSxTQUFTLFFBQVEsS0FBSyxjQUFjLE9BQU8sQ0FBQyxDQUFDLElBQUksSUFBSTtBQUN6RCwyQkFBVyxXQUFXLElBQUlBLE9BQU0sS0FBSyxNQUFNLE9BQU87QUFDbEQ7QUFBQSxjQUNaO0FBQUEsWUFBVztBQUFBLFVBQ1gsV0FBaUIsS0FBSyxlQUFlO0FBQzdCLGdCQUFJLEtBQUssY0FBYyxLQUFLLFFBQVEsR0FBRyxLQUFLQSxPQUFNLEtBQUssSUFBSSxFQUFFLEtBQUssTUFBTSxHQUFHQSxPQUFNLEtBQUssRUFBRSxDQUFDLEdBQ3ZGO0FBQUUseUJBQVcsV0FBVyxJQUFJQSxPQUFNLEtBQUssTUFBTSxPQUFPO0FBQUEsWUFBRTtBQUFBLFVBQ2hFO0FBQ00sY0FBSSxVQUFVO0FBQUUsd0JBQVksSUFBSSxpQkFBaUIsSUFBSUEsT0FBTSxLQUFLLElBQUk7QUFBQSxVQUFFO0FBQUEsUUFDNUU7QUFBQSxNQUNBO0FBRUUsZUFBUyxlQUFlLElBQUk7QUFDMUIsWUFBSSxPQUFPLElBQUksU0FBUyxDQUFBO0FBQ3hCLGlCQUFTUixLQUFJLEdBQUdBLEtBQUksR0FBRyxJQUFJLElBQUksT0FBTyxRQUFRQSxNQUFLO0FBQ2pELGNBQUksT0FBTyxHQUFHLElBQUksSUFBSSxPQUFPQSxFQUFDLEVBQUUsS0FBSztBQUNyQyxjQUFJLFlBQVksRUFBQyxRQUFRLElBQUksTUFBTSxDQUFDLEdBQUcsTUFBTSxJQUFJLE9BQU8sR0FBRyxDQUFDLEVBQUM7QUFDN0QsaUJBQU8sS0FBSyxTQUFTO0FBQ3JCLGVBQUssS0FBSyxHQUFHLFNBQVMsVUFBVSxRQUFRLFVBQVUsSUFBSSxDQUFDO0FBQUEsUUFDN0Q7QUFDSSxlQUFPLEVBQUMsTUFBWSxPQUFjO0FBQUEsTUFDdEM7QUFFRSxlQUFTLG9CQUFvQixPQUFPLFlBQVksYUFBYSxnQkFBZ0I7QUFDM0UsY0FBTSxhQUFhLGVBQWUsY0FBYyxPQUFPLEtBQUs7QUFDNUQsY0FBTSxhQUFhLGtCQUFrQixpQkFBaUIsT0FBTyxLQUFLO0FBQ2xFLGNBQU0sYUFBYSxjQUFjLENBQUMsQ0FBQyxVQUFVO0FBQUEsTUFDakQ7QUFFRSxlQUFTLGlCQUFpQjtBQUN4QixZQUFJLEtBQUssSUFBSSxZQUFZLE1BQU0sTUFBTSx1R0FBdUc7QUFDNUksWUFBSSxNQUFNLElBQUksT0FBTyxDQUFDLEVBQUUsR0FBRyxNQUFNLGdFQUFnRTtBQUtqRyxZQUFJLFFBQVE7QUFBRSxhQUFHLE1BQU0sUUFBUTtBQUFBLFFBQVMsT0FDbkM7QUFBRSxhQUFHLGFBQWEsUUFBUSxLQUFLO0FBQUEsUUFBRTtBQUV0QyxZQUFJLEtBQUs7QUFBRSxhQUFHLE1BQU0sU0FBUztBQUFBLFFBQWtCO0FBQy9DLGVBQU87QUFBQSxNQUNYO0FBVUUsZUFBUyxpQkFBaUI0QixhQUFZO0FBQ3BDLFlBQUlDLGtCQUFpQkQsWUFBVztBQUVoQyxZQUFJLFVBQVVBLFlBQVcsVUFBVSxDQUFBO0FBRW5DLFFBQUFBLFlBQVcsWUFBWTtBQUFBLFVBQ3JCLGFBQWFBO0FBQUEsVUFDYixPQUFPLFdBQVU7QUFBQyxnQkFBSSxJQUFJLEVBQUUsTUFBSztBQUFJLGlCQUFLLFFBQVEsTUFBTSxNQUFLO0FBQUEsVUFBRztBQUFBLFVBRWhFLFdBQVcsU0FBUyxRQUFRLE9BQU87QUFDakMsZ0JBQUksVUFBVSxLQUFLLFNBQVMsTUFBTSxRQUFRLE1BQU07QUFDaEQsZ0JBQUksUUFBUSxNQUFNLEtBQUssU0FBUyxVQUFVLFFBQVE7QUFBRTtBQUFBLFlBQU07QUFDMUQsb0JBQVEsTUFBTSxJQUFJO0FBQ2xCLGdCQUFJQyxnQkFBZSxlQUFlLE1BQU0sR0FDdEM7QUFBRSx3QkFBVSxNQUFNQSxnQkFBZSxNQUFNLENBQUMsRUFBRSxNQUFNLE9BQU8sR0FBRztBQUFBLFlBQUU7QUFDOUQsbUJBQU8sTUFBTSxnQkFBZ0IsTUFBTSxNQUFNO0FBQUEsVUFDakQ7QUFBQSxVQUVNLFdBQVcsU0FBUyxRQUFRO0FBQUMsbUJBQU8sS0FBSyxRQUFRLE1BQU07QUFBQSxVQUFDO0FBQUEsVUFDeEQsUUFBUSxXQUFXO0FBQUMsbUJBQU8sS0FBSztBQUFBLFVBQUc7QUFBQSxVQUVuQyxXQUFXLFNBQVN0QixNQUFLLFFBQVE7QUFDL0IsaUJBQUssTUFBTSxRQUFRLFNBQVMsU0FBUyxTQUFTLEVBQUUsVUFBVUEsSUFBRyxDQUFDO0FBQUEsVUFDdEU7QUFBQSxVQUNNLGNBQWMsU0FBU0EsTUFBSztBQUMxQixnQkFBSSxPQUFPLEtBQUssTUFBTTtBQUN0QixxQkFBU1AsS0FBSSxHQUFHQSxLQUFJLEtBQUssUUFBUSxFQUFFQSxJQUNqQztBQUFFLGtCQUFJLEtBQUtBLEVBQUMsS0FBS08sUUFBTyxLQUFLUCxFQUFDLEVBQUUsUUFBUU8sTUFBSztBQUMzQyxxQkFBSyxPQUFPUCxJQUFHLENBQUM7QUFDaEIsdUJBQU87QUFBQSxjQUNuQjtBQUFBLFlBQVc7QUFBQSxVQUNYO0FBQUEsVUFFTSxZQUFZLFNBQVMsU0FBUyxNQUFNLFNBQVM7QUFDM0MsZ0JBQUksT0FBTyxLQUFLLFFBQVEsT0FBTzRCLFlBQVcsUUFBUSxLQUFLLFNBQVMsSUFBSTtBQUNwRSxnQkFBSSxLQUFLLFlBQVk7QUFBRSxvQkFBTSxJQUFJLE1BQU0sK0JBQStCO0FBQUEsWUFBQztBQUN2RTtBQUFBLGNBQWEsS0FBSyxNQUFNO0FBQUEsY0FDWDtBQUFBLGdCQUFDO0FBQUEsZ0JBQVksVUFBVTtBQUFBLGdCQUFNLFFBQVEsV0FBVyxRQUFRO0FBQUEsZ0JBQ3ZELFVBQVcsV0FBVyxRQUFRLFlBQWE7QUFBQSxjQUFDO0FBQUEsY0FDN0MsU0FBVSxTQUFTO0FBQUUsdUJBQU8sUUFBUTtBQUFBLGNBQVM7QUFBQSxZQUFFO0FBQzVELGlCQUFLLE1BQU07QUFDWCxzQkFBVSxJQUFJO0FBQUEsVUFDdEIsQ0FBTztBQUFBLFVBQ0QsZUFBZSxTQUFTLFNBQVMsTUFBTTtBQUNyQyxnQkFBSSxXQUFXLEtBQUssTUFBTTtBQUMxQixxQkFBUzVCLEtBQUksR0FBR0EsS0FBSSxTQUFTLFFBQVEsRUFBRUEsSUFBRztBQUN4QyxrQkFBSSxNQUFNLFNBQVNBLEVBQUMsRUFBRTtBQUN0QixrQkFBSSxPQUFPLFFBQVEsT0FBTyxRQUFRLFlBQVksSUFBSSxRQUFRLE1BQU07QUFDOUQseUJBQVMsT0FBT0EsSUFBRyxDQUFDO0FBQ3BCLHFCQUFLLE1BQU07QUFDWCwwQkFBVSxJQUFJO0FBQ2Q7QUFBQSxjQUNaO0FBQUEsWUFDQTtBQUFBLFVBQ0EsQ0FBTztBQUFBLFVBRUQsWUFBWSxTQUFTLFNBQVMsR0FBRyxLQUFLLFlBQVk7QUFDaEQsZ0JBQUksT0FBTyxPQUFPLFlBQVksT0FBTyxPQUFPLFVBQVU7QUFDcEQsa0JBQUksT0FBTyxNQUFNO0FBQUUsc0JBQU0sS0FBSyxRQUFRLGNBQWMsVUFBVTtBQUFBLGNBQU8sT0FDaEU7QUFBRSxzQkFBTSxNQUFNLFFBQVE7QUFBQSxjQUFXO0FBQUEsWUFDaEQ7QUFDUSxnQkFBSSxPQUFPLEtBQUssS0FBSyxDQUFDLEdBQUc7QUFBRSx5QkFBVyxNQUFNLEdBQUcsS0FBSyxVQUFVO0FBQUEsWUFBRTtBQUFBLFVBQ3hFLENBQU87QUFBQSxVQUNELGlCQUFpQixTQUFTLFNBQVMsS0FBSztBQUN0QyxnQkFBSSxTQUFTLEtBQUssSUFBSSxJQUFJLFFBQVEsTUFBTTtBQUN4QyxxQkFBU0EsS0FBSSxHQUFHQSxLQUFJLE9BQU8sUUFBUUEsTUFBSztBQUN0QyxrQkFBSVEsU0FBUSxPQUFPUixFQUFDO0FBQ3BCLGtCQUFJLENBQUNRLE9BQU0sU0FBUztBQUNsQixvQkFBSSxPQUFPQSxPQUFNLEtBQUksR0FBSSxLQUFLQSxPQUFNLEdBQUU7QUFDdEMsb0JBQUksUUFBUSxLQUFLLElBQUksS0FBSyxLQUFLLElBQUk7QUFDbkMsc0JBQU0sS0FBSyxJQUFJLEtBQUssU0FBUSxHQUFJLEdBQUcsUUFBUSxHQUFHLEtBQUssSUFBSSxFQUFFLElBQUk7QUFDN0QseUJBQVMsSUFBSSxPQUFPLElBQUksS0FBSyxFQUFFLEdBQzdCO0FBQUUsNkJBQVcsTUFBTSxHQUFHLEdBQUc7QUFBQSxnQkFBRTtBQUM3QixvQkFBSSxZQUFZLEtBQUssSUFBSSxJQUFJO0FBQzdCLG9CQUFJLEtBQUssTUFBTSxLQUFLLE9BQU8sVUFBVSxVQUFVLFVBQVUsVUFBVVIsRUFBQyxFQUFFLEtBQUksRUFBRyxLQUFLLEdBQ2hGO0FBQUUsc0NBQW9CLEtBQUssS0FBS0EsSUFBRyxJQUFJLE1BQU0sTUFBTSxVQUFVQSxFQUFDLEVBQUUsR0FBRSxDQUFFLEdBQUcsY0FBYztBQUFBLGdCQUFFO0FBQUEsY0FDckcsV0FBcUJRLE9BQU0sS0FBSyxPQUFPLEtBQUs7QUFDaEMsMkJBQVcsTUFBTUEsT0FBTSxLQUFLLE1BQU0sS0FBSyxJQUFJO0FBQzNDLHNCQUFNQSxPQUFNLEtBQUs7QUFDakIsb0JBQUlSLE1BQUssS0FBSyxJQUFJLElBQUksV0FBVztBQUFFLHNDQUFvQixJQUFJO0FBQUEsZ0JBQUU7QUFBQSxjQUN6RTtBQUFBLFlBQ0E7QUFBQSxVQUNBLENBQU87QUFBQTtBQUFBO0FBQUEsVUFJRCxZQUFZLFNBQVMsS0FBSyxTQUFTO0FBQ2pDLG1CQUFPLFVBQVUsTUFBTSxLQUFLLE9BQU87QUFBQSxVQUMzQztBQUFBLFVBRU0sZUFBZSxTQUFTLE1BQU0sU0FBUztBQUNyQyxtQkFBTyxVQUFVLE1BQU0sSUFBSSxJQUFJLEdBQUcsU0FBUyxJQUFJO0FBQUEsVUFDdkQ7QUFBQSxVQUVNLGdCQUFnQixTQUFTLEtBQUs7QUFDNUIsa0JBQU0sUUFBUSxLQUFLLEtBQUssR0FBRztBQUMzQixnQkFBSSxTQUFTLGNBQWMsTUFBTSxRQUFRLEtBQUssS0FBSyxJQUFJLElBQUksQ0FBQztBQUM1RCxnQkFBSSxTQUFTLEdBQUcsU0FBUyxPQUFPLFNBQVMsS0FBSyxHQUFHLEtBQUssSUFBSTtBQUMxRCxnQkFBSTtBQUNKLGdCQUFJLE1BQU0sR0FBRztBQUFFLHFCQUFPLE9BQU8sQ0FBQztBQUFBLFlBQUUsT0FDM0I7QUFBRSx5QkFBUztBQUNkLG9CQUFJLE1BQU8sU0FBUyxTQUFVO0FBQzlCLHFCQUFLLE1BQU0sT0FBTyxNQUFNLElBQUksQ0FBQyxJQUFJLE1BQU0sSUFBSTtBQUFFLDBCQUFRO0FBQUEsZ0JBQUksV0FDaEQsT0FBTyxNQUFNLElBQUksQ0FBQyxJQUFJLElBQUk7QUFBRSwyQkFBUyxNQUFNO0FBQUEsZ0JBQUUsT0FDakQ7QUFBRSx5QkFBTyxPQUFPLE1BQU0sSUFBSSxDQUFDO0FBQUc7QUFBQSxnQkFBSztBQUFBLGNBQ2xEO0FBQUEsWUFBUztBQUNELGdCQUFJLE1BQU0sT0FBTyxLQUFLLFFBQVEsVUFBVSxJQUFJO0FBQzVDLG1CQUFPLE1BQU0sSUFBSSxPQUFPLE9BQU8sSUFBSSxPQUFPLEtBQUssTUFBTSxHQUFHLE1BQU0sQ0FBQztBQUFBLFVBQ3ZFO0FBQUEsVUFFTSxXQUFXLFNBQVMsS0FBSztBQUN2QixnQkFBSSxPQUFPLEtBQUssSUFBSTtBQUNwQixnQkFBSSxDQUFDLEtBQUssV0FBVztBQUFFLHFCQUFPO0FBQUEsWUFBSTtBQUNsQyxtQkFBTzRCLFlBQVcsVUFBVSxNQUFNLEtBQUssV0FBVyxHQUFHLEVBQUUsS0FBSyxFQUFFO0FBQUEsVUFDdEU7QUFBQSxVQUVNLFdBQVcsU0FBUyxLQUFLLE1BQU07QUFDN0IsbUJBQU8sS0FBSyxXQUFXLEtBQUssSUFBSSxFQUFFLENBQUM7QUFBQSxVQUMzQztBQUFBLFVBRU0sWUFBWSxTQUFTLEtBQUssTUFBTTtBQUM5QixnQkFBSSxRQUFRLENBQUE7QUFDWixnQkFBSSxDQUFDLFFBQVEsZUFBZSxJQUFJLEdBQUc7QUFBRSxxQkFBTztBQUFBLFlBQUs7QUFDakQsZ0JBQUksT0FBTyxRQUFRLElBQUksR0FBRyxPQUFPLEtBQUssVUFBVSxHQUFHO0FBQ25ELGdCQUFJLE9BQU8sS0FBSyxJQUFJLEtBQUssVUFBVTtBQUNqQyxrQkFBSSxLQUFLLEtBQUssSUFBSSxDQUFDLEdBQUc7QUFBRSxzQkFBTSxLQUFLLEtBQUssS0FBSyxJQUFJLENBQUMsQ0FBQztBQUFBLGNBQUU7QUFBQSxZQUMvRCxXQUFtQixLQUFLLElBQUksR0FBRztBQUNyQix1QkFBUzVCLEtBQUksR0FBR0EsS0FBSSxLQUFLLElBQUksRUFBRSxRQUFRQSxNQUFLO0FBQzFDLG9CQUFJLE1BQU0sS0FBSyxLQUFLLElBQUksRUFBRUEsRUFBQyxDQUFDO0FBQzVCLG9CQUFJLEtBQUs7QUFBRSx3QkFBTSxLQUFLLEdBQUc7QUFBQSxnQkFBRTtBQUFBLGNBQ3ZDO0FBQUEsWUFDQSxXQUFtQixLQUFLLGNBQWMsS0FBSyxLQUFLLFVBQVUsR0FBRztBQUNuRCxvQkFBTSxLQUFLLEtBQUssS0FBSyxVQUFVLENBQUM7QUFBQSxZQUMxQyxXQUFtQixLQUFLLEtBQUssSUFBSSxHQUFHO0FBQzFCLG9CQUFNLEtBQUssS0FBSyxLQUFLLElBQUksQ0FBQztBQUFBLFlBQ3BDO0FBQ1EscUJBQVNLLE9BQU0sR0FBR0EsT0FBTSxLQUFLLFFBQVEsUUFBUUEsUUFBTztBQUNsRCxrQkFBSSxNQUFNLEtBQUssUUFBUUEsSUFBRztBQUMxQixrQkFBSSxJQUFJLEtBQUssTUFBTSxJQUFJLEtBQUssUUFBUSxPQUFPLElBQUksR0FBRyxLQUFLLElBQ3JEO0FBQUUsc0JBQU0sS0FBSyxJQUFJLEdBQUc7QUFBQSxjQUFFO0FBQUEsWUFDbEM7QUFDUSxtQkFBTztBQUFBLFVBQ2Y7QUFBQSxVQUVNLGVBQWUsU0FBUyxNQUFNLFNBQVM7QUFDckMsZ0JBQUlILE9BQU0sS0FBSztBQUNmLG1CQUFPLFNBQVNBLE1BQUssUUFBUSxPQUFPQSxLQUFJLFFBQVFBLEtBQUksT0FBTyxJQUFHLElBQUk7QUFDbEUsbUJBQU8saUJBQWlCLE1BQU0sT0FBTyxHQUFHLE9BQU8sRUFBRTtBQUFBLFVBQ3pEO0FBQUEsVUFFTSxjQUFjLFNBQVMsT0FBTyxNQUFNO0FBQ2xDLGdCQUFJLEtBQUtNLFNBQVEsS0FBSyxJQUFJLElBQUksUUFBTztBQUNyQyxnQkFBSSxTQUFTLE1BQU07QUFBRSxvQkFBTUEsT0FBTTtBQUFBLFlBQUssV0FDN0IsT0FBTyxTQUFTLFVBQVU7QUFBRSxvQkFBTSxRQUFRLEtBQUssS0FBSyxLQUFLO0FBQUEsWUFBRSxPQUMvRDtBQUFFLG9CQUFNLFFBQVFBLE9BQU0sS0FBSSxJQUFLQSxPQUFNLEdBQUU7QUFBQSxZQUFHO0FBQy9DLG1CQUFPLGFBQWEsTUFBTSxLQUFLLFFBQVEsTUFBTTtBQUFBLFVBQ3JEO0FBQUEsVUFFTSxZQUFZLFNBQVMsS0FBSyxNQUFNO0FBQzlCLG1CQUFPLFdBQVcsTUFBTSxRQUFRLEtBQUssS0FBSyxHQUFHLEdBQUcsUUFBUSxNQUFNO0FBQUEsVUFDdEU7QUFBQSxVQUVNLFlBQVksU0FBUyxRQUFRLE1BQU07QUFDakMscUJBQVMsZ0JBQWdCLE1BQU0sUUFBUSxRQUFRLE1BQU07QUFDckQsbUJBQU8sV0FBVyxNQUFNLE9BQU8sTUFBTSxPQUFPLEdBQUc7QUFBQSxVQUN2RDtBQUFBLFVBRU0sY0FBYyxTQUFTLFFBQVEsTUFBTTtBQUNuQyxxQkFBUyxnQkFBZ0IsTUFBTSxFQUFDLEtBQUssUUFBUSxNQUFNLEVBQUMsR0FBRyxRQUFRLE1BQU0sRUFBRTtBQUN2RSxtQkFBTyxhQUFhLEtBQUssS0FBSyxTQUFTLEtBQUssUUFBUSxVQUFVO0FBQUEsVUFDdEU7QUFBQSxVQUNNLGNBQWMsU0FBUyxNQUFNLE1BQU0sZ0JBQWdCO0FBQ2pELGdCQUFJLE1BQU0sT0FBTztBQUNqQixnQkFBSSxPQUFPLFFBQVEsVUFBVTtBQUMzQixrQkFBSSxPQUFPLEtBQUssSUFBSSxRQUFRLEtBQUssSUFBSSxPQUFPO0FBQzVDLGtCQUFJLE9BQU8sS0FBSyxJQUFJLE9BQU87QUFBRSx1QkFBTyxLQUFLLElBQUk7QUFBQSxjQUFNLFdBQzFDLE9BQU8sTUFBTTtBQUFFLHVCQUFPO0FBQU0sc0JBQU07QUFBQSxjQUFLO0FBQ2hELHdCQUFVLFFBQVEsS0FBSyxLQUFLLElBQUk7QUFBQSxZQUMxQyxPQUFlO0FBQ0wsd0JBQVU7QUFBQSxZQUNwQjtBQUNRLG1CQUFPLGdCQUFnQixNQUFNLFNBQVMsRUFBQyxLQUFLLEdBQUcsTUFBTSxFQUFDLEdBQUcsUUFBUSxRQUFRLGtCQUFrQixHQUFHLEVBQUUsT0FDN0YsTUFBTSxLQUFLLElBQUksU0FBUyxhQUFhLE9BQU8sSUFBSTtBQUFBLFVBQzNEO0FBQUEsVUFFTSxtQkFBbUIsV0FBVztBQUFFLG1CQUFPLFdBQVcsS0FBSyxPQUFPO0FBQUEsVUFBQztBQUFBLFVBQy9ELGtCQUFrQixXQUFXO0FBQUUsbUJBQU8sVUFBVSxLQUFLLE9BQU87QUFBQSxVQUFDO0FBQUEsVUFFN0QsYUFBYSxXQUFXO0FBQUUsbUJBQU8sRUFBQyxNQUFNLEtBQUssUUFBUSxVQUFVLElBQUksS0FBSyxRQUFRLE9BQU07QUFBQSxVQUFDO0FBQUEsVUFFdkYsV0FBVyxTQUFTLEtBQUssTUFBTSxRQUFRLE1BQU0sT0FBTztBQUNsRCxnQkFBSSxVQUFVLEtBQUs7QUFDbkIsa0JBQU0sYUFBYSxNQUFNLFFBQVEsS0FBSyxLQUFLLEdBQUcsQ0FBQztBQUMvQyxnQkFBSSxNQUFNLElBQUksUUFBUSxPQUFPLElBQUk7QUFDakMsaUJBQUssTUFBTSxXQUFXO0FBQ3RCLGlCQUFLLGFBQWEsb0JBQW9CLE1BQU07QUFDNUMsaUJBQUssUUFBUSxNQUFNLGNBQWMsSUFBSTtBQUNyQyxvQkFBUSxNQUFNLFlBQVksSUFBSTtBQUM5QixnQkFBSSxRQUFRLFFBQVE7QUFDbEIsb0JBQU0sSUFBSTtBQUFBLFlBQ3BCLFdBQW1CLFFBQVEsV0FBVyxRQUFRLFFBQVE7QUFDNUMsa0JBQUksU0FBUyxLQUFLLElBQUksUUFBUSxRQUFRLGNBQWMsS0FBSyxJQUFJLE1BQU0sR0FDbkUsU0FBUyxLQUFLLElBQUksUUFBUSxNQUFNLGFBQWEsUUFBUSxVQUFVLFdBQVc7QUFFMUUsbUJBQUssUUFBUSxXQUFXLElBQUksU0FBUyxLQUFLLGVBQWUsV0FBVyxJQUFJLE1BQU0sS0FBSyxjQUNqRjtBQUFFLHNCQUFNLElBQUksTUFBTSxLQUFLO0FBQUEsY0FBYSxXQUM3QixJQUFJLFNBQVMsS0FBSyxnQkFBZ0IsUUFDekM7QUFBRSxzQkFBTSxJQUFJO0FBQUEsY0FBTztBQUNyQixrQkFBSSxPQUFPLEtBQUssY0FBYyxRQUM1QjtBQUFFLHVCQUFPLFNBQVMsS0FBSztBQUFBLGNBQVk7QUFBQSxZQUMvQztBQUNRLGlCQUFLLE1BQU0sTUFBTSxNQUFNO0FBQ3ZCLGlCQUFLLE1BQU0sT0FBTyxLQUFLLE1BQU0sUUFBUTtBQUNyQyxnQkFBSSxTQUFTLFNBQVM7QUFDcEIscUJBQU8sUUFBUSxNQUFNLGNBQWMsS0FBSztBQUN4QyxtQkFBSyxNQUFNLFFBQVE7QUFBQSxZQUM3QixPQUFlO0FBQ0wsa0JBQUksU0FBUyxRQUFRO0FBQUUsdUJBQU87QUFBQSxjQUFFLFdBQ3ZCLFNBQVMsVUFBVTtBQUFFLHdCQUFRLFFBQVEsTUFBTSxjQUFjLEtBQUssZUFBZTtBQUFBLGNBQUU7QUFDeEYsbUJBQUssTUFBTSxPQUFPLE9BQU87QUFBQSxZQUNuQztBQUNRLGdCQUFJLFFBQ0Y7QUFBRSw2QkFBZSxNQUFNLEVBQUMsTUFBWSxLQUFVLE9BQU8sT0FBTyxLQUFLLGFBQWEsUUFBUSxNQUFNLEtBQUssYUFBWSxDQUFDO0FBQUEsWUFBRTtBQUFBLFVBQzFIO0FBQUEsVUFFTSxrQkFBa0IsU0FBUyxTQUFTO0FBQUEsVUFDcEMsbUJBQW1CLFNBQVMsVUFBVTtBQUFBLFVBQ3RDLGdCQUFnQjtBQUFBLFVBQ2hCLG9CQUFvQixTQUFTLFdBQVc7QUFBQSxVQUV4QyxhQUFhLFNBQVMsS0FBSztBQUN6QixnQkFBSSxTQUFTLGVBQWUsR0FBRyxHQUM3QjtBQUFFLHFCQUFPLFNBQVMsR0FBRyxFQUFFLEtBQUssTUFBTSxJQUFJO0FBQUEsWUFBQztBQUFBLFVBQ2pEO0FBQUEsVUFFTSxpQkFBaUIsU0FBUyxTQUFTLE1BQU07QUFBRSw0QkFBZ0IsTUFBTSxJQUFJO0FBQUEsV0FBSTtBQUFBLFVBRXpFLFVBQVUsU0FBUyxNQUFNLFFBQVEsTUFBTSxVQUFVO0FBQy9DLGdCQUFJLE1BQU07QUFDVixnQkFBSSxTQUFTLEdBQUc7QUFBRSxvQkFBTTtBQUFJLHVCQUFTLENBQUM7QUFBQSxZQUFPO0FBQzdDLGdCQUFJLE1BQU0sUUFBUSxLQUFLLEtBQUssSUFBSTtBQUNoQyxxQkFBU1IsS0FBSSxHQUFHQSxLQUFJLFFBQVEsRUFBRUEsSUFBRztBQUMvQixvQkFBTSxTQUFTLEtBQUssS0FBSyxLQUFLLEtBQUssTUFBTSxRQUFRO0FBQ2pELGtCQUFJLElBQUksU0FBUztBQUFFO0FBQUEsY0FBSztBQUFBLFlBQ2xDO0FBQ1EsbUJBQU87QUFBQSxVQUNmO0FBQUEsVUFFTSxPQUFPLFNBQVMsU0FBUyxLQUFLLE1BQU07QUFDbEMsZ0JBQUlxQixXQUFTO0FBRWIsaUJBQUssbUJBQW1CLFNBQVViLFFBQU87QUFDdkMsa0JBQUlhLFNBQU8sUUFBUSxTQUFTQSxTQUFPLElBQUksVUFBVWIsT0FBTSxNQUFLLEdBQzFEO0FBQUUsdUJBQU8sU0FBU2EsU0FBTyxLQUFLYixPQUFNLE1BQU0sS0FBSyxNQUFNYSxTQUFPLFFBQVEsZUFBZTtBQUFBLGNBQUMsT0FFcEY7QUFBRSx1QkFBTyxNQUFNLElBQUliLE9BQU0sU0FBU0EsT0FBTTtjQUFJO0FBQUEsWUFDeEQsR0FBVyxRQUFRO0FBQUEsVUFDbkIsQ0FBTztBQUFBLFVBRUQsU0FBUyxTQUFTLFNBQVMsS0FBSyxNQUFNO0FBQ3BDLGdCQUFJLE1BQU0sS0FBSyxJQUFJLEtBQUtOLE9BQU0sS0FBSztBQUNuQyxnQkFBSSxJQUFJLGtCQUFpQixHQUN2QjtBQUFFLGNBQUFBLEtBQUksaUJBQWlCLElBQUksTUFBTSxTQUFTO0FBQUEsWUFBRSxPQUU1QztBQUFFLGtDQUFvQixNQUFNLFNBQVVNLFFBQU87QUFDM0Msb0JBQUksUUFBUSxTQUFTTixNQUFLTSxPQUFNLE1BQU0sS0FBSyxNQUFNLEtBQUs7QUFDdEQsdUJBQU8sTUFBTSxJQUFJLEVBQUMsTUFBTSxPQUFPLElBQUlBLE9BQU0sS0FBSSxJQUFJLEVBQUMsTUFBTUEsT0FBTSxNQUFNLElBQUksTUFBSztBQUFBLGNBQ3pGLENBQVc7QUFBQSxZQUFFO0FBQUEsVUFDYixDQUFPO0FBQUEsVUFFRCxVQUFVLFNBQVMsTUFBTSxRQUFRLE1BQU0sWUFBWTtBQUNqRCxnQkFBSSxNQUFNLEdBQUcsSUFBSTtBQUNqQixnQkFBSSxTQUFTLEdBQUc7QUFBRSxvQkFBTTtBQUFJLHVCQUFTLENBQUM7QUFBQSxZQUFPO0FBQzdDLGdCQUFJLE1BQU0sUUFBUSxLQUFLLEtBQUssSUFBSTtBQUNoQyxxQkFBU1IsS0FBSSxHQUFHQSxLQUFJLFFBQVEsRUFBRUEsSUFBRztBQUMvQixrQkFBSSxTQUFTLGFBQWEsTUFBTSxLQUFLLEtBQUs7QUFDMUMsa0JBQUksS0FBSyxNQUFNO0FBQUUsb0JBQUksT0FBTztBQUFBLGNBQUssT0FDNUI7QUFBRSx1QkFBTyxPQUFPO0FBQUEsY0FBRTtBQUN2QixvQkFBTSxTQUFTLE1BQU0sUUFBUSxLQUFLLElBQUk7QUFDdEMsa0JBQUksSUFBSSxTQUFTO0FBQUU7QUFBQSxjQUFLO0FBQUEsWUFDbEM7QUFDUSxtQkFBTztBQUFBLFVBQ2Y7QUFBQSxVQUVNLE9BQU8sU0FBUyxTQUFTLEtBQUssTUFBTTtBQUNsQyxnQkFBSXFCLFdBQVM7QUFFYixnQkFBSW5CLE9BQU0sS0FBSyxLQUFLLFFBQVEsQ0FBQTtBQUM1QixnQkFBSSxXQUFXLENBQUMsS0FBSyxRQUFRLFNBQVMsQ0FBQ0EsS0FBSSxVQUFVQSxLQUFJLElBQUksa0JBQWlCO0FBQzlFLFlBQUFBLEtBQUksbUJBQW1CLFNBQVVNLFFBQU87QUFDdEMsa0JBQUksVUFDRjtBQUFFLHVCQUFPLE1BQU0sSUFBSUEsT0FBTSxTQUFTQSxPQUFNO2NBQUk7QUFDOUMsa0JBQUksVUFBVSxhQUFhYSxVQUFRYixPQUFNLE1BQU0sS0FBSztBQUNwRCxrQkFBSUEsT0FBTSxjQUFjLE1BQU07QUFBRSx3QkFBUSxPQUFPQSxPQUFNO0FBQUEsY0FBVztBQUNoRSxvQkFBTSxLQUFLLFFBQVEsSUFBSTtBQUN2QixrQkFBSSxNQUFNLFNBQVNhLFVBQVEsU0FBUyxLQUFLLElBQUk7QUFDN0Msa0JBQUksUUFBUSxVQUFVYixVQUFTTixLQUFJLElBQUksUUFBTyxHQUM1QztBQUFFLCtCQUFlbUIsVUFBUSxXQUFXQSxVQUFRLEtBQUssS0FBSyxFQUFFLE1BQU0sUUFBUSxHQUFHO0FBQUEsY0FBRTtBQUM3RSxxQkFBTztBQUFBLFlBQ2pCLEdBQVcsUUFBUTtBQUNYLGdCQUFJLE1BQU0sUUFBUTtBQUFFLHVCQUFTckIsS0FBSSxHQUFHQSxLQUFJRSxLQUFJLElBQUksT0FBTyxRQUFRRixNQUM3RDtBQUFFLGdCQUFBRSxLQUFJLElBQUksT0FBT0YsRUFBQyxFQUFFLGFBQWEsTUFBTUEsRUFBQztBQUFBLGNBQUU7QUFBQSxZQUFFO0FBQUEsVUFDdEQsQ0FBTztBQUFBO0FBQUEsVUFHRCxZQUFZLFNBQVMsS0FBSztBQUN4QixnQkFBSUUsT0FBTSxLQUFLLEtBQUssT0FBTyxRQUFRQSxNQUFLLElBQUksSUFBSSxFQUFFO0FBQ2xELGdCQUFJLFFBQVEsSUFBSSxJQUFJLE1BQU0sSUFBSTtBQUM5QixnQkFBSSxNQUFNO0FBQ1Isa0JBQUksU0FBUyxLQUFLLFVBQVUsS0FBSyxXQUFXO0FBQzVDLG1CQUFLLElBQUksVUFBVSxZQUFZLE9BQU8sS0FBSyxXQUFXLE9BQU87QUFBRSxrQkFBRTtBQUFBLGNBQU0sT0FBUTtBQUFFLGtCQUFFO0FBQUEsY0FBSTtBQUN2RixrQkFBSSxZQUFZLEtBQUssT0FBTyxLQUFLO0FBQ2pDLGtCQUFJLFFBQVEsV0FBVyxXQUFXLE1BQU0sSUFDcEMsU0FBVSxJQUFJO0FBQUUsdUJBQU8sV0FBVyxJQUFJLE1BQU07QUFBQSxjQUFFLElBQzlDLEtBQUssS0FBSyxTQUFTLElBQUksU0FBVSxJQUFJO0FBQUUsdUJBQU8sS0FBSyxLQUFLLEVBQUU7QUFBQSxjQUFFLElBQzVELFNBQVUsSUFBSTtBQUFFLHVCQUFRLENBQUMsS0FBSyxLQUFLLEVBQUUsS0FBSyxDQUFDLFdBQVcsRUFBRTtBQUFBLGNBQUc7QUFDL0QscUJBQU8sUUFBUSxLQUFLLE1BQU0sS0FBSyxPQUFPLFFBQVEsQ0FBQyxDQUFDLEdBQUc7QUFBRSxrQkFBRTtBQUFBLGNBQU07QUFDN0QscUJBQU8sTUFBTSxLQUFLLFVBQVUsTUFBTSxLQUFLLE9BQU8sR0FBRyxDQUFDLEdBQUc7QUFBRSxrQkFBRTtBQUFBLGNBQUk7QUFBQSxZQUN2RTtBQUNRLG1CQUFPLElBQUksTUFBTSxJQUFJLElBQUksTUFBTSxLQUFLLEdBQUcsSUFBSSxJQUFJLE1BQU0sR0FBRyxDQUFDO0FBQUEsVUFDakU7QUFBQSxVQUVNLGlCQUFpQixTQUFTLE9BQU87QUFDL0IsZ0JBQUksU0FBUyxRQUFRLFNBQVMsS0FBSyxNQUFNLFdBQVc7QUFBRTtBQUFBLFlBQU07QUFDNUQsZ0JBQUksS0FBSyxNQUFNLFlBQVksQ0FBQyxLQUFLLE1BQU0sV0FDckM7QUFBRSx1QkFBUyxLQUFLLFFBQVEsV0FBVyxzQkFBc0I7QUFBQSxZQUFFLE9BRTNEO0FBQUUsc0JBQVEsS0FBSyxRQUFRLFdBQVcsc0JBQXNCO0FBQUEsWUFBRTtBQUU1RCxtQkFBTyxNQUFNLG1CQUFtQixNQUFNLEtBQUssTUFBTSxTQUFTO0FBQUEsVUFDbEU7QUFBQSxVQUNNLFVBQVUsV0FBVztBQUFFLG1CQUFPLEtBQUssUUFBUSxNQUFNLFNBQVEsS0FBTSxVQUFVLEtBQUssSUFBSSxDQUFDO0FBQUEsVUFBQztBQUFBLFVBQ3BGLFlBQVksV0FBVztBQUFFLG1CQUFPLENBQUMsRUFBRSxLQUFLLFFBQVEsWUFBWSxLQUFLLElBQUk7QUFBQSxVQUFTO0FBQUEsVUFFOUUsVUFBVSxTQUFTLFNBQVUsR0FBRyxHQUFHO0FBQUUsMkJBQWUsTUFBTSxHQUFHLENBQUM7QUFBQSxXQUFJO0FBQUEsVUFDbEUsZUFBZSxXQUFXO0FBQ3hCLGdCQUFJLFdBQVcsS0FBSyxRQUFRO0FBQzVCLG1CQUFPO0FBQUEsY0FBQyxNQUFNLFNBQVM7QUFBQSxjQUFZLEtBQUssU0FBUztBQUFBLGNBQ3pDLFFBQVEsU0FBUyxlQUFlLFVBQVUsSUFBSSxJQUFJLEtBQUssUUFBUTtBQUFBLGNBQy9ELE9BQU8sU0FBUyxjQUFjLFVBQVUsSUFBSSxJQUFJLEtBQUssUUFBUTtBQUFBLGNBQzdELGNBQWMsY0FBYyxJQUFJO0FBQUEsY0FBRyxhQUFhLGFBQWEsSUFBSTtBQUFBLFlBQUM7QUFBQSxVQUNsRjtBQUFBLFVBRU0sZ0JBQWdCLFNBQVMsU0FBU00sUUFBTyxRQUFRO0FBQy9DLGdCQUFJQSxVQUFTLE1BQU07QUFDakIsY0FBQUEsU0FBUSxFQUFDLE1BQU0sS0FBSyxJQUFJLElBQUksVUFBVSxNQUFNLElBQUksS0FBSTtBQUNwRCxrQkFBSSxVQUFVLE1BQU07QUFBRSx5QkFBUyxLQUFLLFFBQVE7QUFBQSxjQUFtQjtBQUFBLFlBQ3pFLFdBQW1CLE9BQU9BLFVBQVMsVUFBVTtBQUNuQyxjQUFBQSxTQUFRLEVBQUMsTUFBTSxJQUFJQSxRQUFPLENBQUMsR0FBRyxJQUFJLEtBQUk7QUFBQSxZQUNoRCxXQUFtQkEsT0FBTSxRQUFRLE1BQU07QUFDN0IsY0FBQUEsU0FBUSxFQUFDLE1BQU1BLFFBQU8sSUFBSSxLQUFJO0FBQUEsWUFDeEM7QUFDUSxnQkFBSSxDQUFDQSxPQUFNLElBQUk7QUFBRSxjQUFBQSxPQUFNLEtBQUtBLE9BQU07QUFBQSxZQUFLO0FBQ3ZDLFlBQUFBLE9BQU0sU0FBUyxVQUFVO0FBRXpCLGdCQUFJQSxPQUFNLEtBQUssUUFBUSxNQUFNO0FBQzNCLDRCQUFjLE1BQU1BLE1BQUs7QUFBQSxZQUNuQyxPQUFlO0FBQ0wsa0NBQW9CLE1BQU1BLE9BQU0sTUFBTUEsT0FBTSxJQUFJQSxPQUFNLE1BQU07QUFBQSxZQUN0RTtBQUFBLFVBQ0EsQ0FBTztBQUFBLFVBRUQsU0FBUyxTQUFTLFNBQVMsT0FBTyxRQUFRO0FBQ3hDLGdCQUFJYSxXQUFTO0FBRWIsZ0JBQUksWUFBWSxTQUFVLEtBQUs7QUFBRSxxQkFBTyxPQUFPLE9BQU8sWUFBWSxRQUFRLEtBQUssT0FBTyxHQUFHLENBQUMsSUFBSSxNQUFNLE9BQU87QUFBQSxZQUFJO0FBQy9HLGdCQUFJLFNBQVMsTUFBTTtBQUFFLG1CQUFLLFFBQVEsUUFBUSxNQUFNLFFBQVEsVUFBVSxLQUFLO0FBQUEsWUFBRTtBQUN6RSxnQkFBSSxVQUFVLE1BQU07QUFBRSxtQkFBSyxRQUFRLFFBQVEsTUFBTSxTQUFTLFVBQVUsTUFBTTtBQUFBLFlBQUU7QUFDNUUsZ0JBQUksS0FBSyxRQUFRLGNBQWM7QUFBRSx3Q0FBMEIsSUFBSTtBQUFBLFlBQUU7QUFDakUsZ0JBQUlYLFVBQVMsS0FBSyxRQUFRO0FBQzFCLGlCQUFLLElBQUksS0FBS0EsU0FBUSxLQUFLLFFBQVEsUUFBUSxTQUFVLE1BQU07QUFDekQsa0JBQUksS0FBSyxTQUFTO0FBQUUseUJBQVNWLEtBQUksR0FBR0EsS0FBSSxLQUFLLFFBQVEsUUFBUUEsTUFDM0Q7QUFBRSxzQkFBSSxLQUFLLFFBQVFBLEVBQUMsRUFBRSxXQUFXO0FBQUUsa0NBQWNxQixVQUFRWCxTQUFRLFFBQVE7QUFBRztBQUFBLGtCQUFLO0FBQUEsZ0JBQUU7QUFBQSxjQUFFO0FBQ3ZGLGdCQUFFQTtBQUFBLFlBQ1osQ0FBUztBQUNELGlCQUFLLE1BQU0sY0FBYztBQUN6QixtQkFBTyxNQUFNLFdBQVcsSUFBSTtBQUFBLFVBQ3BDLENBQU87QUFBQSxVQUVELFdBQVcsU0FBUyxHQUFFO0FBQUMsbUJBQU8sUUFBUSxNQUFNLENBQUM7QUFBQSxVQUFDO0FBQUEsVUFDOUMsZ0JBQWdCLFdBQVU7QUFBQyxtQkFBTyxlQUFlLElBQUk7QUFBQSxVQUFDO0FBQUEsVUFDdEQsY0FBYyxXQUFVO0FBQUMsbUJBQU8sYUFBYSxJQUFJO0FBQUEsVUFBQztBQUFBLFVBRWxELFNBQVMsU0FBUyxXQUFXO0FBQzNCLGdCQUFJLFlBQVksS0FBSyxRQUFRO0FBQzdCLHNCQUFVLElBQUk7QUFDZCxpQkFBSyxNQUFNLGNBQWM7QUFDekIsd0JBQVksSUFBSTtBQUNoQiwyQkFBZSxNQUFNLEtBQUssSUFBSSxZQUFZLEtBQUssSUFBSSxTQUFTO0FBQzVELDhCQUFrQixLQUFLLE9BQU87QUFDOUIsZ0JBQUksYUFBYSxRQUFRLEtBQUssSUFBSSxZQUFZLFdBQVcsS0FBSyxPQUFPLENBQUMsSUFBSSxPQUFNLEtBQUssUUFBUSxjQUMzRjtBQUFFLGtDQUFvQixJQUFJO0FBQUEsWUFBRTtBQUM5QixtQkFBTyxNQUFNLFdBQVcsSUFBSTtBQUFBLFVBQ3BDLENBQU87QUFBQSxVQUVELFNBQVMsU0FBUyxTQUFTUixNQUFLO0FBQzlCLGdCQUFJLE1BQU0sS0FBSztBQUNmLGdCQUFJLEtBQUs7QUFFVCxnQkFBSSxLQUFLLE1BQU0sZUFBZTtBQUFFLG1CQUFLLE1BQU0sY0FBYTtBQUFBLFlBQUc7QUFDM0Qsc0JBQVUsTUFBTUEsSUFBRztBQUNuQix3QkFBWSxJQUFJO0FBQ2hCLGlCQUFLLFFBQVEsTUFBTSxNQUFLO0FBQ3hCLDJCQUFlLE1BQU1BLEtBQUksWUFBWUEsS0FBSSxTQUFTO0FBQ2xELGlCQUFLLE1BQU0sY0FBYztBQUN6Qix3QkFBWSxNQUFNLFdBQVcsTUFBTSxHQUFHO0FBQ3RDLG1CQUFPO0FBQUEsVUFDZixDQUFPO0FBQUEsVUFFRCxRQUFRLFNBQVMsWUFBWTtBQUMzQixnQkFBSSxVQUFVLEtBQUssUUFBUTtBQUMzQixtQkFBTyxXQUFXLE9BQU8sVUFBVSxlQUFlLEtBQUssU0FBUyxVQUFVLElBQUksUUFBUSxVQUFVLElBQUk7QUFBQSxVQUM1RztBQUFBLFVBRU0sZUFBZSxXQUFVO0FBQUMsbUJBQU8sS0FBSyxRQUFRLE1BQU07VUFBVTtBQUFBLFVBQzlELG1CQUFtQixXQUFVO0FBQUMsbUJBQU8sS0FBSyxRQUFRO0FBQUEsVUFBTztBQUFBLFVBQ3pELG9CQUFvQixXQUFVO0FBQUMsbUJBQU8sS0FBSyxRQUFRO0FBQUEsVUFBUTtBQUFBLFVBQzNELGtCQUFrQixXQUFVO0FBQUMsbUJBQU8sS0FBSyxRQUFRO0FBQUEsVUFBTztBQUFBO0FBRTFELG1CQUFXMEIsV0FBVTtBQUVyQixRQUFBQSxZQUFXLGlCQUFpQixTQUFTLE1BQU0sTUFBTSxPQUFPO0FBQ3RELGNBQUksQ0FBQyxRQUFRLGVBQWUsSUFBSSxHQUFHO0FBQUUsb0JBQVEsSUFBSSxJQUFJQSxZQUFXLElBQUksSUFBSSxFQUFDLFNBQVMsQ0FBQSxFQUFFO0FBQUEsVUFBRTtBQUN0RixrQkFBUSxJQUFJLEVBQUUsSUFBSSxJQUFJO0FBQUEsUUFDNUI7QUFDSSxRQUFBQSxZQUFXLHVCQUF1QixTQUFTLE1BQU0sTUFBTSxXQUFXLE9BQU87QUFDdkUsVUFBQUEsWUFBVyxlQUFlLE1BQU0sTUFBTSxLQUFLO0FBQzNDLGtCQUFRLElBQUksRUFBRSxRQUFRLEtBQUssRUFBQyxNQUFNLFdBQVcsS0FBSyxNQUFLLENBQUM7QUFBQSxRQUM5RDtBQUFBLE1BQ0E7QUFXRSxlQUFTLFNBQVMxQixNQUFLLEtBQUssS0FBSyxNQUFNLFVBQVU7QUFDL0MsWUFBSSxTQUFTO0FBQ2IsWUFBSSxVQUFVO0FBQ2QsWUFBSSxVQUFVLFFBQVFBLE1BQUssSUFBSSxJQUFJO0FBQ25DLFlBQUksVUFBVSxZQUFZQSxLQUFJLGFBQWEsUUFBUSxDQUFDLE1BQU07QUFDMUQsaUJBQVMsZUFBZTtBQUN0QixjQUFJLElBQUksSUFBSSxPQUFPO0FBQ25CLGNBQUksSUFBSUEsS0FBSSxTQUFTLEtBQUtBLEtBQUksUUFBUUEsS0FBSSxNQUFNO0FBQUUsbUJBQU87QUFBQSxVQUFLO0FBQzlELGdCQUFNLElBQUksSUFBSSxHQUFHLElBQUksSUFBSSxJQUFJLE1BQU07QUFDbkMsaUJBQU8sVUFBVSxRQUFRQSxNQUFLLENBQUM7QUFBQSxRQUNyQztBQUNJLGlCQUFTLFNBQVMsYUFBYTtBQUM3QixjQUFJO0FBQ0osY0FBSSxRQUFRLGFBQWE7QUFDdkIsZ0JBQUksS0FBSyxRQUFRLEtBQUssV0FBVyxJQUFJLE1BQU0sTUFBTSxJQUFJLElBQUksR0FBRztBQUM1RCxnQkFBSSxNQUFNLEVBQUUsR0FBRztBQUNiLHFCQUFPO0FBQUEsWUFDakIsT0FBZTtBQUNMLGtCQUFJLFNBQVMsTUFBTSxJQUFJLE1BQU0sU0FBVSxLQUFLLFFBQVMsTUFBTSxTQUFVLEtBQUs7QUFDMUUscUJBQU8sSUFBSSxJQUFJLElBQUksTUFBTSxLQUFLLElBQUksR0FBRyxLQUFLLElBQUksUUFBUSxLQUFLLFFBQVEsSUFBSSxLQUFLLE9BQU8sU0FBUyxJQUFJLEVBQUUsQ0FBQyxHQUFHLENBQUMsR0FBRztBQUFBLFlBQ3BIO0FBQUEsVUFDQSxXQUFpQixVQUFVO0FBQ25CLG1CQUFPLGFBQWFBLEtBQUksSUFBSSxTQUFTLEtBQUssR0FBRztBQUFBLFVBQ3JELE9BQWE7QUFDTCxtQkFBTyxjQUFjLFNBQVMsS0FBSyxHQUFHO0FBQUEsVUFDOUM7QUFDTSxjQUFJLFFBQVEsTUFBTTtBQUNoQixnQkFBSSxDQUFDLGVBQWUsYUFBWSxHQUM5QjtBQUFFLG9CQUFNLFVBQVUsVUFBVUEsS0FBSSxJQUFJLFNBQVMsSUFBSSxNQUFNLE9BQU87QUFBQSxZQUFFLE9BRWhFO0FBQUUscUJBQU87QUFBQSxZQUFLO0FBQUEsVUFDeEIsT0FBYTtBQUNMLGtCQUFNO0FBQUEsVUFDZDtBQUNNLGlCQUFPO0FBQUEsUUFDYjtBQUVJLFlBQUksUUFBUSxVQUFVLFFBQVEsYUFBYTtBQUN6QyxtQkFBUTtBQUFBLFFBQ2QsV0FBZSxRQUFRLFVBQVU7QUFDM0IsbUJBQVMsSUFBSTtBQUFBLFFBQ25CLFdBQWUsUUFBUSxVQUFVLFFBQVEsU0FBUztBQUM1QyxjQUFJLFVBQVUsTUFBTSxRQUFRLFFBQVE7QUFDcEMsY0FBSSxTQUFTQSxLQUFJLE1BQU1BLEtBQUksR0FBRyxVQUFVLEtBQUssV0FBVztBQUN4RCxtQkFBUyxRQUFRLFFBQU8sUUFBUSxPQUFPO0FBQ3JDLGdCQUFJLE1BQU0sS0FBSyxDQUFDLFNBQVMsQ0FBQyxLQUFLLEdBQUc7QUFBRTtBQUFBLFlBQUs7QUFDekMsZ0JBQUksTUFBTSxRQUFRLEtBQUssT0FBTyxJQUFJLEVBQUUsS0FBSztBQUN6QyxnQkFBSSxPQUFPLFdBQVcsS0FBSyxNQUFNLElBQUksTUFDakMsU0FBUyxPQUFPLE9BQU8sTUFDdkIsQ0FBQyxTQUFTLEtBQUssS0FBSyxHQUFHLElBQUksT0FDM0I7QUFDSixnQkFBSSxTQUFTLENBQUMsU0FBUyxDQUFDLE1BQU07QUFBRSxxQkFBTztBQUFBLFlBQUk7QUFDM0MsZ0JBQUksV0FBVyxXQUFXLE1BQU07QUFDOUIsa0JBQUksTUFBTSxHQUFHO0FBQUMsc0JBQU07QUFBRyx5QkFBUTtBQUFJLG9CQUFJLFNBQVM7QUFBQSxjQUFRO0FBQ3hEO0FBQUEsWUFDVjtBQUVRLGdCQUFJLE1BQU07QUFBRSx3QkFBVTtBQUFBLFlBQUs7QUFDM0IsZ0JBQUksTUFBTSxLQUFLLENBQUMsU0FBUyxDQUFDLEtBQUssR0FBRztBQUFFO0FBQUEsWUFBSztBQUFBLFVBQ2pEO0FBQUEsUUFDQTtBQUNJLFlBQUksU0FBUyxXQUFXQSxNQUFLLEtBQUssUUFBUSxTQUFTLElBQUk7QUFDdkQsWUFBSSxlQUFlLFFBQVEsTUFBTSxHQUFHO0FBQUUsaUJBQU8sVUFBVTtBQUFBLFFBQUs7QUFDNUQsZUFBTztBQUFBLE1BQ1g7QUFLRSxlQUFTLFNBQVMsSUFBSSxLQUFLLEtBQUssTUFBTTtBQUNwQyxZQUFJQSxPQUFNLEdBQUcsS0FBSyxJQUFJLElBQUksTUFBTTtBQUNoQyxZQUFJLFFBQVEsUUFBUTtBQUNsQixjQUFJLFdBQVcsS0FBSyxJQUFJLEdBQUcsUUFBUSxRQUFRLGNBQWMsSUFBSSxFQUFFLEVBQUUsZUFBZUEsS0FBSSxFQUFFLEVBQUUsZ0JBQWdCLFlBQVk7QUFDcEgsY0FBSSxhQUFhLEtBQUssSUFBSSxXQUFXLE1BQUssV0FBVyxHQUFHLE9BQU8sR0FBRyxDQUFDO0FBQ25FLGVBQUssTUFBTSxJQUFJLElBQUksU0FBUyxJQUFJLE9BQU8sTUFBTTtBQUFBLFFBRW5ELFdBQWUsUUFBUSxRQUFRO0FBQ3pCLGNBQUksTUFBTSxJQUFJLElBQUksU0FBUyxJQUFJLElBQUksTUFBTTtBQUFBLFFBQy9DO0FBQ0ksWUFBSTtBQUNKLG1CQUFTO0FBQ1AsbUJBQVMsV0FBVyxJQUFJLEdBQUcsQ0FBQztBQUM1QixjQUFJLENBQUMsT0FBTyxTQUFTO0FBQUU7QUFBQSxVQUFLO0FBQzVCLGNBQUksTUFBTSxJQUFJLEtBQUssSUFBSSxLQUFLQSxLQUFJLFFBQVE7QUFBRSxtQkFBTyxVQUFVO0FBQU07QUFBQSxVQUFLO0FBQ3RFLGVBQUssTUFBTTtBQUFBLFFBQ2pCO0FBQ0ksZUFBTztBQUFBLE1BQ1g7QUFJRSxVQUFJLHVCQUF1QixTQUFTLElBQUk7QUFDdEMsYUFBSyxLQUFLO0FBQ1YsYUFBSyxpQkFBaUIsS0FBSyxtQkFBbUIsS0FBSyxnQkFBZ0IsS0FBSyxrQkFBa0I7QUFDMUYsYUFBSyxVQUFVLElBQUksUUFBTztBQUMxQixhQUFLLFlBQVk7QUFDakIsYUFBSyxjQUFjO0FBQ25CLGFBQUssaUJBQWlCO0FBQUEsTUFDMUI7QUFFRSwyQkFBcUIsVUFBVSxPQUFPLFNBQVUsU0FBUztBQUNyRCxZQUFJbUIsV0FBUztBQUVmLFlBQUksUUFBUSxNQUFNLEtBQUssTUFBTTtBQUM3QixZQUFJLE1BQU0sTUFBTSxNQUFNLFFBQVE7QUFDOUIsWUFBSSxrQkFBa0I7QUFDdEIsNEJBQW9CLEtBQUssR0FBRyxRQUFRLFlBQVksR0FBRyxRQUFRLGFBQWEsR0FBRyxRQUFRLGNBQWM7QUFFakcsaUJBQVMsZUFBZSxHQUFHO0FBQ3pCLG1CQUFTLElBQUksRUFBRSxRQUFRLEdBQUcsSUFBSSxFQUFFLFlBQVk7QUFDMUMsZ0JBQUksS0FBSyxLQUFLO0FBQUUscUJBQU87QUFBQSxZQUFJO0FBQzNCLGdCQUFJLGlDQUFpQyxLQUFLLEVBQUUsU0FBUyxHQUFHO0FBQUU7QUFBQSxZQUFLO0FBQUEsVUFDdkU7QUFDTSxpQkFBTztBQUFBLFFBQ2I7QUFFSSxXQUFHLEtBQUssU0FBUyxTQUFVLEdBQUc7QUFDNUIsY0FBSSxDQUFDLGVBQWUsQ0FBQyxLQUFLLGVBQWUsSUFBSSxDQUFDLEtBQUssWUFBWSxHQUFHLEVBQUUsR0FBRztBQUFFO0FBQUEsVUFBTTtBQUUvRSxjQUFJLGNBQWMsSUFBSTtBQUFFLHVCQUFXLFVBQVUsSUFBSSxXQUFZO0FBQUUscUJBQU9BLFNBQU8sY0FBYTtBQUFBLFlBQUcsQ0FBRSxHQUFHLEVBQUU7QUFBQSxVQUFFO0FBQUEsUUFDNUcsQ0FBSztBQUVELFdBQUcsS0FBSyxvQkFBb0IsU0FBVSxHQUFHO0FBQ3ZDQSxtQkFBTyxZQUFZLEVBQUMsTUFBTSxFQUFFLE1BQU0sTUFBTSxNQUFLO0FBQUEsUUFDbkQsQ0FBSztBQUNELFdBQUcsS0FBSyxxQkFBcUIsU0FBVSxHQUFHO0FBQ3hDLGNBQUksQ0FBQ0EsU0FBTyxXQUFXO0FBQUVBLHFCQUFPLFlBQVksRUFBQyxNQUFNLEVBQUUsTUFBTSxNQUFNLE1BQUs7QUFBQSxVQUFFO0FBQUEsUUFDOUUsQ0FBSztBQUNELFdBQUcsS0FBSyxrQkFBa0IsU0FBVSxHQUFHO0FBQ3JDLGNBQUlBLFNBQU8sV0FBVztBQUNwQixnQkFBSSxFQUFFLFFBQVFBLFNBQU8sVUFBVSxNQUFNO0FBQUVBLHVCQUFPLGdCQUFlO0FBQUEsWUFBRztBQUNoRUEscUJBQU8sVUFBVSxPQUFPO0FBQUEsVUFDaEM7QUFBQSxRQUNBLENBQUs7QUFFRCxXQUFHLEtBQUssY0FBYyxXQUFZO0FBQUUsaUJBQU8sTUFBTSxvQkFBbUI7QUFBQSxTQUFLO0FBRXpFLFdBQUcsS0FBSyxTQUFTLFdBQVk7QUFDM0IsY0FBSSxDQUFDQSxTQUFPLFdBQVc7QUFBRUEscUJBQU8sZ0JBQWU7QUFBQSxVQUFHO0FBQUEsUUFDeEQsQ0FBSztBQUVELGlCQUFTLFVBQVUsR0FBRztBQUNwQixjQUFJLENBQUMsZUFBZSxDQUFDLEtBQUssZUFBZSxJQUFJLENBQUMsR0FBRztBQUFFO0FBQUEsVUFBTTtBQUN6RCxjQUFJLEdBQUcscUJBQXFCO0FBQzFCLDBCQUFjLEVBQUMsVUFBVSxPQUFPLE1BQU0sR0FBRyxjQUFhLEVBQUUsQ0FBQztBQUN6RCxnQkFBSSxFQUFFLFFBQVEsT0FBTztBQUFFLGlCQUFHLGlCQUFpQixJQUFJLE1BQU0sS0FBSztBQUFBLFlBQUU7QUFBQSxVQUNwRSxXQUFpQixDQUFDLEdBQUcsUUFBUSxpQkFBaUI7QUFDdEM7QUFBQSxVQUNSLE9BQWE7QUFDTCxnQkFBSSxTQUFTLGVBQWUsRUFBRTtBQUM5QiwwQkFBYyxFQUFDLFVBQVUsTUFBTSxNQUFNLE9BQU8sS0FBSSxDQUFDO0FBQ2pELGdCQUFJLEVBQUUsUUFBUSxPQUFPO0FBQ25CLGlCQUFHLFVBQVUsV0FBWTtBQUN2QixtQkFBRyxjQUFjLE9BQU8sUUFBUSxHQUFHLGNBQWM7QUFDakQsbUJBQUcsaUJBQWlCLElBQUksTUFBTSxLQUFLO0FBQUEsY0FDL0MsQ0FBVztBQUFBLFlBQ1g7QUFBQSxVQUNBO0FBQ00sY0FBSSxFQUFFLGVBQWU7QUFDbkIsY0FBRSxjQUFjLFVBQVM7QUFDekIsZ0JBQUksVUFBVSxXQUFXLEtBQUssS0FBSyxJQUFJO0FBRXZDLGNBQUUsY0FBYyxRQUFRLFFBQVEsT0FBTztBQUN2QyxnQkFBSSxFQUFFLGNBQWMsUUFBUSxNQUFNLEtBQUssU0FBUztBQUM5QyxnQkFBRSxlQUFjO0FBQ2hCO0FBQUEsWUFDVjtBQUFBLFVBQ0E7QUFFTSxjQUFJLFNBQVMsZUFBYyxHQUFJLEtBQUssT0FBTztBQUMzQyw4QkFBb0IsRUFBRTtBQUN0QixhQUFHLFFBQVEsVUFBVSxhQUFhLFFBQVEsR0FBRyxRQUFRLFVBQVUsVUFBVTtBQUN6RSxhQUFHLFFBQVEsV0FBVyxLQUFLLEtBQUssSUFBSTtBQUNwQyxjQUFJLFdBQVcsVUFBVSxTQUFTLEdBQUcsQ0FBQztBQUN0QyxzQkFBWSxFQUFFO0FBQ2QscUJBQVcsV0FBWTtBQUNyQixlQUFHLFFBQVEsVUFBVSxZQUFZLE1BQU07QUFDdkMscUJBQVMsTUFBSztBQUNkLGdCQUFJLFlBQVksS0FBSztBQUFFLG9CQUFNLHFCQUFvQjtBQUFBLFlBQUc7QUFBQSxVQUM1RCxHQUFTLEVBQUU7QUFBQSxRQUNYO0FBQ0ksV0FBRyxLQUFLLFFBQVEsU0FBUztBQUN6QixXQUFHLEtBQUssT0FBTyxTQUFTO0FBQUEsTUFDNUI7QUFFRSwyQkFBcUIsVUFBVSwyQkFBMkIsU0FBVSxPQUFPO0FBRXpFLFlBQUcsT0FBTztBQUNSLGVBQUssSUFBSSxhQUFhLGNBQWMsS0FBSztBQUFBLFFBQy9DLE9BQVc7QUFDTCxlQUFLLElBQUksZ0JBQWdCLFlBQVk7QUFBQSxRQUMzQztBQUFBLE1BQ0E7QUFFRSwyQkFBcUIsVUFBVSxtQkFBbUIsV0FBWTtBQUM1RCxZQUFJLFNBQVMsaUJBQWlCLEtBQUssSUFBSSxLQUFLO0FBQzVDLGVBQU8sUUFBUSxVQUFVLFNBQVMsS0FBSyxHQUFHLENBQUMsS0FBSyxLQUFLO0FBQ3JELGVBQU87QUFBQSxNQUNYO0FBRUUsMkJBQXFCLFVBQVUsZ0JBQWdCLFNBQVUsTUFBTSxXQUFXO0FBQ3hFLFlBQUksQ0FBQyxRQUFRLENBQUMsS0FBSyxHQUFHLFFBQVEsS0FBSyxRQUFRO0FBQUU7QUFBQSxRQUFNO0FBQ25ELFlBQUksS0FBSyxTQUFTLFdBQVc7QUFBRSxlQUFLLHFCQUFvQjtBQUFBLFFBQUc7QUFDM0QsYUFBSyx1QkFBdUIsSUFBSTtBQUFBLE1BQ3BDO0FBRUUsMkJBQXFCLFVBQVUsZUFBZSxXQUFZO0FBQ3hELGVBQU8sS0FBSyxHQUFHLFFBQVEsUUFBUSxjQUFjLGFBQVk7QUFBQSxNQUM3RDtBQUVFLDJCQUFxQixVQUFVLHVCQUF1QixXQUFZO0FBQ2hFLFlBQUksTUFBTSxLQUFLLGFBQVksR0FBSSxLQUFLLEtBQUssSUFBSSxPQUFPLEdBQUcsSUFBSSxJQUFJLFFBQU87QUFDdEUsWUFBSSxPQUFPLEtBQUssS0FBSSxHQUFJLEtBQUssS0FBSyxHQUFFO0FBRXBDLFlBQUksR0FBRyxRQUFRLFVBQVUsR0FBRyxRQUFRLFlBQVksS0FBSyxRQUFRLEdBQUcsUUFBUSxVQUFVLEdBQUcsT0FBTyxHQUFHLFFBQVEsVUFBVTtBQUMvRyxjQUFJLGdCQUFlO0FBQ25CO0FBQUEsUUFDTjtBQUVJLFlBQUksWUFBWSxTQUFTLElBQUksSUFBSSxZQUFZLElBQUksWUFBWTtBQUM3RCxZQUFJLFdBQVcsU0FBUyxJQUFJLElBQUksV0FBVyxJQUFJLFdBQVc7QUFDMUQsWUFBSSxhQUFhLENBQUMsVUFBVSxPQUFPLFlBQVksQ0FBQyxTQUFTLE9BQ3JELElBQUksT0FBTyxXQUFXLFFBQVEsR0FBRyxJQUFJLEtBQUssS0FDMUMsSUFBSSxPQUFPLFdBQVcsUUFBUSxHQUFHLEVBQUUsS0FBSyxHQUMxQztBQUFFO0FBQUEsUUFBTTtBQUVWLFlBQUksT0FBTyxHQUFHLFFBQVE7QUFDdEIsWUFBSSxRQUFTLEtBQUssUUFBUSxHQUFHLFFBQVEsWUFBWSxTQUFTLElBQUksSUFBSSxLQUM5RCxFQUFDLE1BQU0sS0FBSyxDQUFDLEVBQUUsUUFBUSxJQUFJLENBQUMsR0FBRyxRQUFRLEVBQUM7QUFDNUMsWUFBSSxNQUFNLEdBQUcsT0FBTyxHQUFHLFFBQVEsVUFBVSxTQUFTLElBQUksRUFBRTtBQUN4RCxZQUFJLENBQUMsS0FBSztBQUNSLGNBQUksVUFBVSxLQUFLLEtBQUssU0FBUyxDQUFDLEVBQUU7QUFDcEMsY0FBSWQsT0FBTSxRQUFRLE9BQU8sUUFBUSxLQUFLLFFBQVEsS0FBSyxTQUFTLENBQUMsSUFBSSxRQUFRO0FBQ3pFLGdCQUFNLEVBQUMsTUFBTUEsS0FBSUEsS0FBSSxTQUFTLENBQUMsR0FBRyxRQUFRQSxLQUFJQSxLQUFJLFNBQVMsQ0FBQyxJQUFJQSxLQUFJQSxLQUFJLFNBQVMsQ0FBQyxFQUFDO0FBQUEsUUFDekY7QUFFSSxZQUFJLENBQUMsU0FBUyxDQUFDLEtBQUs7QUFDbEIsY0FBSSxnQkFBZTtBQUNuQjtBQUFBLFFBQ047QUFFSSxZQUFJLE1BQU0sSUFBSSxjQUFjLElBQUksV0FBVyxDQUFDLEdBQUc7QUFDL0MsWUFBSTtBQUFFLGdCQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sUUFBUSxJQUFJLFFBQVEsSUFBSSxJQUFJO0FBQUEsUUFBRSxTQUM1RCxHQUFHO0FBQUEsUUFBQTtBQUNULFlBQUksS0FBSztBQUNQLGNBQUksQ0FBQyxTQUFTLEdBQUcsTUFBTSxTQUFTO0FBQzlCLGdCQUFJLFNBQVMsTUFBTSxNQUFNLE1BQU0sTUFBTTtBQUNyQyxnQkFBSSxDQUFDLElBQUksV0FBVztBQUNsQixrQkFBSSxnQkFBZTtBQUNuQixrQkFBSSxTQUFTLEdBQUc7QUFBQSxZQUMxQjtBQUFBLFVBQ0EsT0FBYTtBQUNMLGdCQUFJLGdCQUFlO0FBQ25CLGdCQUFJLFNBQVMsR0FBRztBQUFBLFVBQ3hCO0FBQ00sY0FBSSxPQUFPLElBQUksY0FBYyxNQUFNO0FBQUUsZ0JBQUksU0FBUyxHQUFHO0FBQUEsVUFBRSxXQUM5QyxPQUFPO0FBQUUsaUJBQUssaUJBQWdCO0FBQUEsVUFBRztBQUFBLFFBQ2hEO0FBQ0ksYUFBSyxrQkFBaUI7QUFBQSxNQUMxQjtBQUVFLDJCQUFxQixVQUFVLG1CQUFtQixXQUFZO0FBQzFELFlBQUljLFdBQVM7QUFFZixxQkFBYSxLQUFLLFdBQVc7QUFDN0IsYUFBSyxjQUFjLFdBQVcsV0FBWTtBQUN4Q0EsbUJBQU8sY0FBYztBQUNyQixjQUFJQSxTQUFPLGlCQUFnQixHQUN6QjtBQUFFQSxxQkFBTyxHQUFHLFVBQVUsV0FBWTtBQUFFLHFCQUFPQSxTQUFPLEdBQUcsTUFBTSxtQkFBbUI7QUFBQSxZQUFLLENBQUU7QUFBQSxVQUFFO0FBQUEsUUFDL0YsR0FBTyxFQUFFO0FBQUEsTUFDVDtBQUVFLDJCQUFxQixVQUFVLHlCQUF5QixTQUFVLE1BQU07QUFDdEUsNkJBQXFCLEtBQUssR0FBRyxRQUFRLFdBQVcsS0FBSyxPQUFPO0FBQzVELDZCQUFxQixLQUFLLEdBQUcsUUFBUSxjQUFjLEtBQUssU0FBUztBQUFBLE1BQ3JFO0FBRUUsMkJBQXFCLFVBQVUsb0JBQW9CLFdBQVk7QUFDN0QsWUFBSSxNQUFNLEtBQUssYUFBWTtBQUMzQixhQUFLLGlCQUFpQixJQUFJO0FBQVksYUFBSyxtQkFBbUIsSUFBSTtBQUNsRSxhQUFLLGdCQUFnQixJQUFJO0FBQVcsYUFBSyxrQkFBa0IsSUFBSTtBQUFBLE1BQ25FO0FBRUUsMkJBQXFCLFVBQVUsb0JBQW9CLFdBQVk7QUFDN0QsWUFBSSxNQUFNLEtBQUssYUFBWTtBQUMzQixZQUFJLENBQUMsSUFBSSxZQUFZO0FBQUUsaUJBQU87QUFBQSxRQUFLO0FBQ25DLFlBQUksT0FBTyxJQUFJLFdBQVcsQ0FBQyxFQUFFO0FBQzdCLGVBQU8sU0FBUyxLQUFLLEtBQUssSUFBSTtBQUFBLE1BQ2xDO0FBRUUsMkJBQXFCLFVBQVUsUUFBUSxXQUFZO0FBQ2pELFlBQUksS0FBSyxHQUFHLFFBQVEsWUFBWSxZQUFZO0FBQzFDLGNBQUksQ0FBQyxLQUFLLGtCQUFpQixLQUFNLFVBQVUsU0FBUyxLQUFLLEdBQUcsQ0FBQyxLQUFLLEtBQUssS0FDckU7QUFBRSxpQkFBSyxjQUFjLEtBQUssaUJBQWdCLEdBQUksSUFBSTtBQUFBLFVBQUU7QUFDdEQsZUFBSyxJQUFJLE1BQUs7QUFBQSxRQUNwQjtBQUFBLE1BQ0E7QUFDRSwyQkFBcUIsVUFBVSxPQUFPLFdBQVk7QUFBRSxhQUFLLElBQUksS0FBSTtBQUFBLE1BQUc7QUFDcEUsMkJBQXFCLFVBQVUsV0FBVyxXQUFZO0FBQUUsZUFBTyxLQUFLO0FBQUEsTUFBRztBQUV2RSwyQkFBcUIsVUFBVSxnQkFBZ0IsV0FBWTtBQUFFLGVBQU87QUFBQSxNQUFJO0FBRXhFLDJCQUFxQixVQUFVLGdCQUFnQixXQUFZO0FBQ3ZELFlBQUlBLFdBQVM7QUFFZixZQUFJLFFBQVE7QUFDWixZQUFJLEtBQUssa0JBQWlCLEdBQ3hCO0FBQUUscUJBQVcsV0FBWTtBQUFFLG1CQUFPQSxTQUFPLGNBQWE7QUFBQSxVQUFHLEdBQUksRUFBRTtBQUFBLFFBQUUsT0FFakU7QUFBRSxrQkFBUSxLQUFLLElBQUksV0FBWTtBQUFFLG1CQUFPLE1BQU0sR0FBRyxNQUFNLG1CQUFtQjtBQUFBLFVBQUssQ0FBRTtBQUFBLFFBQUU7QUFFckYsaUJBQVMsT0FBTztBQUNkLGNBQUksTUFBTSxHQUFHLE1BQU0sU0FBUztBQUMxQixrQkFBTSxjQUFhO0FBQ25CLGtCQUFNLFFBQVEsSUFBSSxNQUFNLEdBQUcsUUFBUSxjQUFjLElBQUk7QUFBQSxVQUM3RDtBQUFBLFFBQ0E7QUFDSSxhQUFLLFFBQVEsSUFBSSxLQUFLLEdBQUcsUUFBUSxjQUFjLElBQUk7QUFBQSxNQUN2RDtBQUVFLDJCQUFxQixVQUFVLG1CQUFtQixXQUFZO0FBQzVELFlBQUksTUFBTSxLQUFLLGFBQVk7QUFDM0IsZUFBTyxJQUFJLGNBQWMsS0FBSyxrQkFBa0IsSUFBSSxnQkFBZ0IsS0FBSyxvQkFDdkUsSUFBSSxhQUFhLEtBQUssaUJBQWlCLElBQUksZUFBZSxLQUFLO0FBQUEsTUFDckU7QUFFRSwyQkFBcUIsVUFBVSxnQkFBZ0IsV0FBWTtBQUN6RCxZQUFJLEtBQUssa0JBQWtCLFFBQVEsS0FBSyxlQUFlLENBQUMsS0FBSyxvQkFBb0I7QUFBRTtBQUFBLFFBQU07QUFDekYsWUFBSSxNQUFNLEtBQUssYUFBWSxHQUFJLEtBQUssS0FBSztBQU96QyxZQUFJLFdBQVcsVUFBVSxLQUFLLEdBQUcsUUFBUSxZQUFZLFVBQVUsV0FBVyxJQUFJLFVBQVUsR0FBRztBQUN6RixlQUFLLEdBQUcsaUJBQWlCLEVBQUMsTUFBTSxXQUFXLFNBQVMsR0FBRyxnQkFBZ0IsS0FBSyxJQUFHLENBQUM7QUFDaEYsZUFBSyxLQUFJO0FBQ1QsZUFBSyxNQUFLO0FBQ1Y7QUFBQSxRQUNOO0FBQ0ksWUFBSSxLQUFLLFdBQVc7QUFBRTtBQUFBLFFBQU07QUFDNUIsYUFBSyxrQkFBaUI7QUFDdEIsWUFBSSxTQUFTLFNBQVMsSUFBSSxJQUFJLFlBQVksSUFBSSxZQUFZO0FBQzFELFlBQUksT0FBTyxTQUFTLElBQUksSUFBSSxXQUFXLElBQUksV0FBVztBQUN0RCxZQUFJLFVBQVUsTUFBTTtBQUFFLGtCQUFRLElBQUksV0FBWTtBQUM1Qyx5QkFBYSxHQUFHLEtBQUssZ0JBQWdCLFFBQVEsSUFBSSxHQUFHLGNBQWM7QUFDbEUsZ0JBQUksT0FBTyxPQUFPLEtBQUssS0FBSztBQUFFLGlCQUFHLE1BQU0sbUJBQW1CO0FBQUEsWUFBSztBQUFBLFVBQ3JFLENBQUs7QUFBQSxRQUFFO0FBQUEsTUFDUDtBQUVFLDJCQUFxQixVQUFVLGNBQWMsV0FBWTtBQUN2RCxZQUFJLEtBQUssa0JBQWtCLE1BQU07QUFDL0IsdUJBQWEsS0FBSyxjQUFjO0FBQ2hDLGVBQUssaUJBQWlCO0FBQUEsUUFDNUI7QUFFSSxZQUFJLEtBQUssS0FBSyxJQUFJLFVBQVUsR0FBRyxTQUFTLE1BQU0sR0FBRyxJQUFJLElBQUksUUFBTztBQUNoRSxZQUFJLE9BQU8sSUFBSSxLQUFJLEdBQUksS0FBSyxJQUFJLEdBQUU7QUFDbEMsWUFBSSxLQUFLLE1BQU0sS0FBSyxLQUFLLE9BQU8sR0FBRyxVQUFTLEdBQzFDO0FBQUUsaUJBQU8sSUFBSSxLQUFLLE9BQU8sR0FBRyxRQUFRLEdBQUcsS0FBSyxLQUFLLE9BQU8sQ0FBQyxFQUFFLE1BQU07QUFBQSxRQUFFO0FBQ3JFLFlBQUksR0FBRyxNQUFNLFFBQVEsR0FBRyxLQUFLLEdBQUcsSUFBSSxFQUFFLEtBQUssVUFBVSxHQUFHLE9BQU8sR0FBRyxTQUFRLEdBQ3hFO0FBQUUsZUFBSyxJQUFJLEdBQUcsT0FBTyxHQUFHLENBQUM7QUFBQSxRQUFFO0FBQzdCLFlBQUksS0FBSyxPQUFPLFFBQVEsWUFBWSxHQUFHLE9BQU8sUUFBUSxTQUFTLEdBQUc7QUFBRSxpQkFBTztBQUFBLFFBQUs7QUFFaEYsWUFBSSxXQUFXLFVBQVU7QUFDekIsWUFBSSxLQUFLLFFBQVEsUUFBUSxhQUFhLFlBQVksY0FBYyxJQUFJLEtBQUssSUFBSSxNQUFNLEdBQUc7QUFDcEYscUJBQVcsT0FBTyxRQUFRLEtBQUssQ0FBQyxFQUFFLElBQUk7QUFDdEMscUJBQVcsUUFBUSxLQUFLLENBQUMsRUFBRTtBQUFBLFFBQ2pDLE9BQVc7QUFDTCxxQkFBVyxPQUFPLFFBQVEsS0FBSyxTQUFTLEVBQUUsSUFBSTtBQUM5QyxxQkFBVyxRQUFRLEtBQUssWUFBWSxDQUFDLEVBQUUsS0FBSztBQUFBLFFBQ2xEO0FBQ0ksWUFBSSxVQUFVLGNBQWMsSUFBSSxHQUFHLElBQUk7QUFDdkMsWUFBSSxRQUFRO0FBQ1osWUFBSSxXQUFXLFFBQVEsS0FBSyxTQUFTLEdBQUc7QUFDdEMsbUJBQVMsUUFBUSxTQUFTO0FBQzFCLG1CQUFTLFFBQVEsUUFBUTtBQUFBLFFBQy9CLE9BQVc7QUFDTCxtQkFBUyxPQUFPLFFBQVEsS0FBSyxVQUFVLENBQUMsRUFBRSxJQUFJLElBQUk7QUFDbEQsbUJBQVMsUUFBUSxLQUFLLFVBQVUsQ0FBQyxFQUFFLEtBQUs7QUFBQSxRQUM5QztBQUVJLFlBQUksQ0FBQyxVQUFVO0FBQUUsaUJBQU87QUFBQSxRQUFLO0FBQzdCLFlBQUksVUFBVSxHQUFHLElBQUksV0FBVyxlQUFlLElBQUksVUFBVSxRQUFRLFVBQVUsTUFBTSxDQUFDO0FBQ3RGLFlBQUksVUFBVSxXQUFXLEdBQUcsS0FBSyxJQUFJLFVBQVUsQ0FBQyxHQUFHLElBQUksUUFBUSxRQUFRLEdBQUcsS0FBSyxNQUFNLEVBQUUsS0FBSyxNQUFNLENBQUM7QUFDbkcsZUFBTyxRQUFRLFNBQVMsS0FBSyxRQUFRLFNBQVMsR0FBRztBQUMvQyxjQUFJLElBQUksT0FBTyxLQUFLLElBQUksT0FBTyxHQUFHO0FBQUUsb0JBQVEsSUFBRztBQUFJLG9CQUFRLElBQUc7QUFBSTtBQUFBLFVBQVMsV0FDbEUsUUFBUSxDQUFDLEtBQUssUUFBUSxDQUFDLEdBQUc7QUFBRSxvQkFBUSxNQUFLO0FBQUksb0JBQVEsTUFBSztBQUFJO0FBQUEsVUFBVyxPQUM3RTtBQUFFO0FBQUEsVUFBSztBQUFBLFFBQ2xCO0FBRUksWUFBSSxXQUFXLEdBQUcsU0FBUztBQUMzQixZQUFJLFNBQVMsUUFBUSxDQUFDLEdBQUcsU0FBUyxRQUFRLENBQUMsR0FBRyxjQUFjLEtBQUssSUFBSSxPQUFPLFFBQVEsT0FBTyxNQUFNO0FBQ2pHLGVBQU8sV0FBVyxlQUFlLE9BQU8sV0FBVyxRQUFRLEtBQUssT0FBTyxXQUFXLFFBQVEsR0FDeEY7QUFBRSxZQUFFO0FBQUEsUUFBUztBQUNmLFlBQUksU0FBUyxJQUFJLE9BQU8sR0FBRyxTQUFTLElBQUksT0FBTztBQUMvQyxZQUFJLFlBQVksS0FBSztBQUFBLFVBQUksT0FBTyxVQUFVLFFBQVEsVUFBVSxJQUFJLFdBQVc7QUFBQSxVQUNsRCxPQUFPLFVBQVUsUUFBUSxVQUFVLElBQUksV0FBVztBQUFBLFFBQUU7QUFDN0UsZUFBTyxTQUFTLGFBQ1QsT0FBTyxXQUFXLE9BQU8sU0FBUyxTQUFTLENBQUMsS0FBSyxPQUFPLFdBQVcsT0FBTyxTQUFTLFNBQVMsQ0FBQyxHQUNsRztBQUFFLFlBQUU7QUFBQSxRQUFPO0FBRWIsWUFBSSxRQUFRLFVBQVUsS0FBSyxRQUFRLFVBQVUsS0FBSyxZQUFZLEtBQUssTUFBTTtBQUN2RSxpQkFBTyxZQUFZLFdBQVcsS0FBSyxNQUM1QixPQUFPLFdBQVcsT0FBTyxTQUFTLFNBQVMsQ0FBQyxLQUFLLE9BQU8sV0FBVyxPQUFPLFNBQVMsU0FBUyxDQUFDLEdBQUc7QUFDckc7QUFDQTtBQUFBLFVBQ1I7QUFBQSxRQUNBO0FBRUksZ0JBQVEsUUFBUSxTQUFTLENBQUMsSUFBSSxPQUFPLE1BQU0sR0FBRyxPQUFPLFNBQVMsTUFBTSxFQUFFLFFBQVEsWUFBWSxFQUFFO0FBQzVGLGdCQUFRLENBQUMsSUFBSSxRQUFRLENBQUMsRUFBRSxNQUFNLFFBQVEsRUFBRSxRQUFRLFlBQVksRUFBRTtBQUU5RCxZQUFJLFNBQVMsSUFBSSxVQUFVLFFBQVE7QUFDbkMsWUFBSSxPQUFPLElBQUksUUFBUSxRQUFRLFNBQVMsSUFBSSxPQUFPLEVBQUUsU0FBUyxTQUFTLENBQUM7QUFDeEUsWUFBSSxRQUFRLFNBQVMsS0FBSyxRQUFRLENBQUMsS0FBSyxJQUFJLFFBQVEsSUFBSSxHQUFHO0FBQ3pELHVCQUFhLEdBQUcsS0FBSyxTQUFTLFFBQVEsTUFBTSxRQUFRO0FBQ3BELGlCQUFPO0FBQUEsUUFDYjtBQUFBLE1BQ0E7QUFFRSwyQkFBcUIsVUFBVSxlQUFlLFdBQVk7QUFDeEQsYUFBSyxvQkFBbUI7QUFBQSxNQUM1QjtBQUNFLDJCQUFxQixVQUFVLFFBQVEsV0FBWTtBQUNqRCxhQUFLLG9CQUFtQjtBQUFBLE1BQzVCO0FBQ0UsMkJBQXFCLFVBQVUsc0JBQXNCLFdBQVk7QUFDL0QsWUFBSSxDQUFDLEtBQUssV0FBVztBQUFFO0FBQUEsUUFBTTtBQUM3QixxQkFBYSxLQUFLLGNBQWM7QUFDaEMsYUFBSyxZQUFZO0FBQ2pCLGFBQUssY0FBYTtBQUNsQixhQUFLLElBQUksS0FBSTtBQUNiLGFBQUssSUFBSSxNQUFLO0FBQUEsTUFDbEI7QUFDRSwyQkFBcUIsVUFBVSxrQkFBa0IsV0FBWTtBQUN6RCxZQUFJQSxXQUFTO0FBRWYsWUFBSSxLQUFLLGtCQUFrQixNQUFNO0FBQUU7QUFBQSxRQUFNO0FBQ3pDLGFBQUssaUJBQWlCLFdBQVcsV0FBWTtBQUMzQ0EsbUJBQU8saUJBQWlCO0FBQ3hCLGNBQUlBLFNBQU8sV0FBVztBQUNwQixnQkFBSUEsU0FBTyxVQUFVLE1BQU07QUFBRUEsdUJBQU8sWUFBWTtBQUFBLFlBQUssT0FDaEQ7QUFBRTtBQUFBLFlBQU07QUFBQSxVQUNyQjtBQUNNQSxtQkFBTyxjQUFhO0FBQUEsUUFDMUIsR0FBTyxFQUFFO0FBQUEsTUFDVDtBQUVFLDJCQUFxQixVQUFVLGdCQUFnQixXQUFZO0FBQ3ZELFlBQUlBLFdBQVM7QUFFZixZQUFJLEtBQUssR0FBRyxXQUFVLEtBQU0sQ0FBQyxLQUFLLFlBQVcsR0FDM0M7QUFBRSxrQkFBUSxLQUFLLElBQUksV0FBWTtBQUFFLG1CQUFPLFVBQVVBLFNBQU8sRUFBRTtBQUFBLFVBQUUsQ0FBRTtBQUFBLFFBQUU7QUFBQSxNQUN2RTtBQUVFLDJCQUFxQixVQUFVLGdCQUFnQixTQUFVLE1BQU07QUFDN0QsYUFBSyxrQkFBa0I7QUFBQSxNQUMzQjtBQUVFLDJCQUFxQixVQUFVLGFBQWEsU0FBVSxHQUFHO0FBQ3ZELFlBQUksRUFBRSxZQUFZLEtBQUssS0FBSyxXQUFXO0FBQUU7QUFBQSxRQUFNO0FBQy9DLFVBQUUsZUFBYztBQUNoQixZQUFJLENBQUMsS0FBSyxHQUFHLFdBQVUsR0FDckI7QUFBRSxvQkFBVSxLQUFLLElBQUksY0FBYyxFQUFFLEtBQUssSUFBSSxPQUFPLGFBQWEsRUFBRSxZQUFZLE9BQU8sRUFBRSxVQUFVLEVBQUUsUUFBUSxHQUFHLENBQUM7QUFBQSxRQUFFO0FBQUEsTUFDekg7QUFFRSwyQkFBcUIsVUFBVSxrQkFBa0IsU0FBVSxLQUFLO0FBQzlELGFBQUssSUFBSSxrQkFBa0IsT0FBTyxPQUFPLFVBQVU7QUFBQSxNQUN2RDtBQUVFLDJCQUFxQixVQUFVLGdCQUFnQixXQUFZO0FBQUEsTUFBQTtBQUMzRCwyQkFBcUIsVUFBVSxnQkFBZ0IsV0FBWTtBQUFBLE1BQUE7QUFFM0QsMkJBQXFCLFVBQVUsd0JBQXdCO0FBRXZELGVBQVMsU0FBUyxJQUFJLEtBQUs7QUFDekIsWUFBSSxPQUFPLGdCQUFnQixJQUFJLElBQUksSUFBSTtBQUN2QyxZQUFJLENBQUMsUUFBUSxLQUFLLFFBQVE7QUFBRSxpQkFBTztBQUFBLFFBQUk7QUFDdkMsWUFBSSxPQUFPLFFBQVEsR0FBRyxLQUFLLElBQUksSUFBSTtBQUNuQyxZQUFJLE9BQU8sZ0JBQWdCLE1BQU0sTUFBTSxJQUFJLElBQUk7QUFFL0MsWUFBSSxRQUFRLFNBQVMsTUFBTSxHQUFHLElBQUksU0FBUyxHQUFHLE9BQU87QUFDckQsWUFBSSxPQUFPO0FBQ1QsY0FBSSxVQUFVLGNBQWMsT0FBTyxJQUFJLEVBQUU7QUFDekMsaUJBQU8sVUFBVSxJQUFJLFVBQVU7QUFBQSxRQUNyQztBQUNJLFlBQUksU0FBUyx1QkFBdUIsS0FBSyxLQUFLLElBQUksSUFBSSxJQUFJO0FBQzFELGVBQU8sU0FBUyxPQUFPLFlBQVksVUFBVSxPQUFPLE1BQU0sT0FBTztBQUNqRSxlQUFPO0FBQUEsTUFDWDtBQUVFLGVBQVMsV0FBVyxNQUFNO0FBQ3hCLGlCQUFTLE9BQU8sTUFBTSxNQUFNLE9BQU8sS0FBSyxZQUN0QztBQUFFLGNBQUksNEJBQTRCLEtBQUssS0FBSyxTQUFTLEdBQUc7QUFBRSxtQkFBTztBQUFBLFVBQUk7QUFBQSxRQUFFO0FBQ3pFLGVBQU87QUFBQSxNQUNYO0FBRUUsZUFBUyxPQUFPLEtBQUssS0FBSztBQUFFLFlBQUksS0FBSztBQUFFLGNBQUksTUFBTTtBQUFBLFFBQUs7QUFBRyxlQUFPO0FBQUEsTUFBRztBQUVuRSxlQUFTLGVBQWUsSUFBSSxNQUFNLElBQUksVUFBVSxRQUFRO0FBQ3RELFlBQUksT0FBTyxJQUFJLFVBQVUsT0FBTyxVQUFVLEdBQUcsSUFBSSxpQkFBaUIsaUJBQWlCO0FBQ25GLGlCQUFTLGdCQUFnQixJQUFJO0FBQUUsaUJBQU8sU0FBVSxRQUFRO0FBQUUsbUJBQU8sT0FBTyxNQUFNO0FBQUEsVUFBRztBQUFBLFFBQUU7QUFDbkYsaUJBQVMsUUFBUTtBQUNmLGNBQUksU0FBUztBQUNYLG9CQUFRO0FBQ1IsZ0JBQUksZ0JBQWdCO0FBQUUsc0JBQVE7QUFBQSxZQUFRO0FBQ3RDLHNCQUFVLGlCQUFpQjtBQUFBLFVBQ25DO0FBQUEsUUFDQTtBQUNJLGlCQUFTLFFBQVEsS0FBSztBQUNwQixjQUFJLEtBQUs7QUFDUCxrQkFBSztBQUNMLG9CQUFRO0FBQUEsVUFDaEI7QUFBQSxRQUNBO0FBQ0ksaUJBQVMsS0FBSyxNQUFNO0FBQ2xCLGNBQUksS0FBSyxZQUFZLEdBQUc7QUFDdEIsZ0JBQUksU0FBUyxLQUFLLGFBQWEsU0FBUztBQUN4QyxnQkFBSSxRQUFRO0FBQ1Ysc0JBQVEsTUFBTTtBQUNkO0FBQUEsWUFDVjtBQUNRLGdCQUFJLFdBQVcsS0FBSyxhQUFhLFdBQVcsR0FBR2I7QUFDL0MsZ0JBQUksVUFBVTtBQUNaLGtCQUFJLFFBQVEsR0FBRyxVQUFVLElBQUksVUFBVSxDQUFDLEdBQUcsSUFBSSxTQUFTLEdBQUcsQ0FBQyxHQUFHLGdCQUFnQixDQUFDLFFBQVEsQ0FBQztBQUN6RixrQkFBSSxNQUFNLFdBQVdBLFNBQVEsTUFBTSxDQUFDLEVBQUUsS0FBSyxDQUFDLElBQzFDO0FBQUUsd0JBQVEsV0FBVyxHQUFHLEtBQUtBLE9BQU0sTUFBTUEsT0FBTSxFQUFFLEVBQUUsS0FBSyxPQUFPLENBQUM7QUFBQSxjQUFFO0FBQ3BFO0FBQUEsWUFDVjtBQUNRLGdCQUFJLEtBQUssYUFBYSxpQkFBaUIsS0FBSyxTQUFTO0FBQUU7QUFBQSxZQUFNO0FBQzdELGdCQUFJLFVBQVUsNkJBQTZCLEtBQUssS0FBSyxRQUFRO0FBQzdELGdCQUFJLENBQUMsUUFBUSxLQUFLLEtBQUssUUFBUSxLQUFLLEtBQUssWUFBWSxVQUFVLEdBQUc7QUFBRTtBQUFBLFlBQU07QUFFMUUsZ0JBQUksU0FBUztBQUFFLG9CQUFLO0FBQUEsWUFBRztBQUN2QixxQkFBU1IsS0FBSSxHQUFHQSxLQUFJLEtBQUssV0FBVyxRQUFRQSxNQUMxQztBQUFFLG1CQUFLLEtBQUssV0FBV0EsRUFBQyxDQUFDO0FBQUEsWUFBRTtBQUU3QixnQkFBSSxhQUFhLEtBQUssS0FBSyxRQUFRLEdBQUc7QUFBRSwrQkFBaUI7QUFBQSxZQUFLO0FBQzlELGdCQUFJLFNBQVM7QUFBRSx3QkFBVTtBQUFBLFlBQUs7QUFBQSxVQUN0QyxXQUFpQixLQUFLLFlBQVksR0FBRztBQUM3QixvQkFBUSxLQUFLLFVBQVUsUUFBUSxXQUFXLEVBQUUsRUFBRSxRQUFRLFdBQVcsR0FBRyxDQUFDO0FBQUEsVUFDN0U7QUFBQSxRQUNBO0FBQ0ksbUJBQVM7QUFDUCxlQUFLLElBQUk7QUFDVCxjQUFJLFFBQVEsSUFBSTtBQUFFO0FBQUEsVUFBSztBQUN2QixpQkFBTyxLQUFLO0FBQ1osMkJBQWlCO0FBQUEsUUFDdkI7QUFDSSxlQUFPO0FBQUEsTUFDWDtBQUVFLGVBQVMsU0FBUyxJQUFJLE1BQU0sUUFBUTtBQUNsQyxZQUFJO0FBQ0osWUFBSSxRQUFRLEdBQUcsUUFBUSxTQUFTO0FBQzlCLHFCQUFXLEdBQUcsUUFBUSxRQUFRLFdBQVcsTUFBTTtBQUMvQyxjQUFJLENBQUMsVUFBVTtBQUFFLG1CQUFPLE9BQU8sR0FBRyxRQUFRLElBQUksR0FBRyxRQUFRLFNBQVMsQ0FBQyxDQUFDLEdBQUcsSUFBSTtBQUFBLFVBQUM7QUFDNUUsaUJBQU87QUFBTSxtQkFBUztBQUFBLFFBQzVCLE9BQVc7QUFDTCxlQUFLLFdBQVcsUUFBTyxXQUFXLFNBQVMsWUFBWTtBQUNyRCxnQkFBSSxDQUFDLFlBQVksWUFBWSxHQUFHLFFBQVEsU0FBUztBQUFFLHFCQUFPO0FBQUEsWUFBSTtBQUM5RCxnQkFBSSxTQUFTLGNBQWMsU0FBUyxjQUFjLEdBQUcsUUFBUSxTQUFTO0FBQUU7QUFBQSxZQUFLO0FBQUEsVUFDckY7QUFBQSxRQUNBO0FBQ0ksaUJBQVNBLEtBQUksR0FBR0EsS0FBSSxHQUFHLFFBQVEsS0FBSyxRQUFRQSxNQUFLO0FBQy9DLGNBQUksV0FBVyxHQUFHLFFBQVEsS0FBS0EsRUFBQztBQUNoQyxjQUFJLFNBQVMsUUFBUSxVQUNuQjtBQUFFLG1CQUFPLHFCQUFxQixVQUFVLE1BQU0sTUFBTTtBQUFBLFVBQUM7QUFBQSxRQUM3RDtBQUFBLE1BQ0E7QUFFRSxlQUFTLHFCQUFxQixVQUFVLE1BQU0sUUFBUTtBQUNwRCxZQUFJLFVBQVUsU0FBUyxLQUFLLFlBQVksTUFBTTtBQUM5QyxZQUFJLENBQUMsUUFBUSxDQUFDLFNBQVMsU0FBUyxJQUFJLEdBQUc7QUFBRSxpQkFBTyxPQUFPLElBQUksT0FBTyxTQUFTLElBQUksR0FBRyxDQUFDLEdBQUcsSUFBSTtBQUFBLFFBQUM7QUFDM0YsWUFBSSxRQUFRLFNBQVM7QUFDbkIsZ0JBQU07QUFDTixpQkFBTyxRQUFRLFdBQVcsTUFBTTtBQUNoQyxtQkFBUztBQUNULGNBQUksQ0FBQyxNQUFNO0FBQ1QsZ0JBQUksT0FBTyxTQUFTLE9BQU8sSUFBSSxTQUFTLElBQUksSUFBSSxTQUFTO0FBQ3pELG1CQUFPLE9BQU8sSUFBSSxPQUFPLElBQUksR0FBRyxLQUFLLEtBQUssTUFBTSxHQUFHLEdBQUc7QUFBQSxVQUM5RDtBQUFBLFFBQ0E7QUFFSSxZQUFJLFdBQVcsS0FBSyxZQUFZLElBQUksT0FBTyxNQUFNLFVBQVU7QUFDM0QsWUFBSSxDQUFDLFlBQVksS0FBSyxXQUFXLFVBQVUsS0FBSyxLQUFLLFdBQVcsWUFBWSxHQUFHO0FBQzdFLHFCQUFXLEtBQUs7QUFDaEIsY0FBSSxRQUFRO0FBQUUscUJBQVMsU0FBUyxVQUFVO0FBQUEsVUFBTztBQUFBLFFBQ3ZEO0FBQ0ksZUFBTyxRQUFRLGNBQWMsU0FBUztBQUFFLG9CQUFVLFFBQVE7QUFBQSxRQUFXO0FBQ3JFLFlBQUksVUFBVSxTQUFTLFNBQVMsT0FBTyxRQUFRO0FBRS9DLGlCQUFTLEtBQUs4QixXQUFVQyxVQUFTQyxTQUFRO0FBQ3ZDLG1CQUFTaEMsS0FBSSxJQUFJQSxNQUFLLE9BQU8sS0FBSyxTQUFTLElBQUlBLE1BQUs7QUFDbEQsZ0JBQUlPLE9BQU1QLEtBQUksSUFBSSxRQUFRLE1BQU0sS0FBS0EsRUFBQztBQUN0QyxxQkFBUyxJQUFJLEdBQUcsSUFBSU8sS0FBSSxRQUFRLEtBQUssR0FBRztBQUN0QyxrQkFBSSxVQUFVQSxLQUFJLElBQUksQ0FBQztBQUN2QixrQkFBSSxXQUFXdUIsYUFBWSxXQUFXQyxVQUFTO0FBQzdDLG9CQUFJVCxRQUFPLE9BQU90QixLQUFJLElBQUksU0FBUyxPQUFPLFNBQVMsS0FBS0EsRUFBQyxDQUFDO0FBQzFELG9CQUFJLEtBQUtPLEtBQUksQ0FBQyxJQUFJeUI7QUFDbEIsb0JBQUlBLFVBQVMsS0FBSyxXQUFXRixXQUFVO0FBQUUsdUJBQUt2QixLQUFJLEtBQUt5QixVQUFTLElBQUksRUFBRTtBQUFBLGdCQUFFO0FBQ3hFLHVCQUFPLElBQUlWLE9BQU0sRUFBRTtBQUFBLGNBQy9CO0FBQUEsWUFDQTtBQUFBLFVBQ0E7QUFBQSxRQUNBO0FBQ0ksWUFBSSxRQUFRLEtBQUssVUFBVSxTQUFTLE1BQU07QUFDMUMsWUFBSSxPQUFPO0FBQUUsaUJBQU8sT0FBTyxPQUFPLEdBQUc7QUFBQSxRQUFDO0FBR3RDLGlCQUFTLFFBQVEsUUFBUSxhQUFhLE9BQU8sV0FBVyxTQUFTLFVBQVUsU0FBUyxTQUFTLEdBQUcsT0FBTyxRQUFRLE1BQU0sYUFBYTtBQUNoSSxrQkFBUSxLQUFLLE9BQU8sTUFBTSxZQUFZLENBQUM7QUFDdkMsY0FBSSxPQUNGO0FBQUUsbUJBQU8sT0FBTyxJQUFJLE1BQU0sTUFBTSxNQUFNLEtBQUssSUFBSSxHQUFHLEdBQUc7QUFBQSxVQUFDLE9BRXREO0FBQUUsb0JBQVEsTUFBTSxZQUFZO0FBQUEsVUFBTztBQUFBLFFBQzNDO0FBQ0ksaUJBQVMsU0FBUyxRQUFRLGlCQUFpQixTQUFTLFFBQVEsUUFBUSxTQUFTLE9BQU8saUJBQWlCO0FBQ25HLGtCQUFRLEtBQUssUUFBUSxPQUFPLFlBQVksRUFBRTtBQUMxQyxjQUFJLE9BQ0Y7QUFBRSxtQkFBTyxPQUFPLElBQUksTUFBTSxNQUFNLE1BQU0sS0FBSyxNQUFNLEdBQUcsR0FBRztBQUFBLFVBQUMsT0FFeEQ7QUFBRSxzQkFBVSxPQUFPLFlBQVk7QUFBQSxVQUFPO0FBQUEsUUFDOUM7QUFBQSxNQUNBO0FBSUUsVUFBSSxnQkFBZ0IsU0FBUyxJQUFJO0FBQy9CLGFBQUssS0FBSztBQUVWLGFBQUssWUFBWTtBQUtqQixhQUFLLGNBQWM7QUFFbkIsYUFBSyxVQUFVLElBQUksUUFBTztBQUUxQixhQUFLLGVBQWU7QUFDcEIsYUFBSyxZQUFZO0FBQ2pCLGFBQUssWUFBWTtBQUFBLE1BQ3JCO0FBRUUsb0JBQWMsVUFBVSxPQUFPLFNBQVUsU0FBUztBQUM5QyxZQUFJRCxXQUFTO0FBRWYsWUFBSSxRQUFRLE1BQU0sS0FBSyxLQUFLO0FBQzVCLGFBQUssWUFBWSxPQUFPO0FBQ3hCLFlBQUksS0FBSyxLQUFLO0FBRWQsZ0JBQVEsUUFBUSxhQUFhLEtBQUssU0FBUyxRQUFRLFFBQVEsVUFBVTtBQUdyRSxZQUFJLEtBQUs7QUFBRSxhQUFHLE1BQU0sUUFBUTtBQUFBLFFBQU07QUFFbEMsV0FBRyxJQUFJLFNBQVMsV0FBWTtBQUMxQixjQUFJLE1BQU0sY0FBYyxLQUFLQSxTQUFPLGNBQWM7QUFBRUEscUJBQU8sZUFBZTtBQUFBLFVBQUs7QUFDL0UsZ0JBQU0sS0FBSTtBQUFBLFFBQ2hCLENBQUs7QUFFRCxXQUFHLElBQUksU0FBUyxTQUFVLEdBQUc7QUFDM0IsY0FBSSxlQUFlLElBQUksQ0FBQyxLQUFLLFlBQVksR0FBRyxFQUFFLEdBQUc7QUFBRTtBQUFBLFVBQU07QUFFekQsYUFBRyxNQUFNLGdCQUFnQixDQUFDLG9CQUFJO0FBQzlCLGdCQUFNLFNBQVE7QUFBQSxRQUNwQixDQUFLO0FBRUQsaUJBQVMsZUFBZSxHQUFHO0FBQ3pCLGNBQUksZUFBZSxJQUFJLENBQUMsR0FBRztBQUFFO0FBQUEsVUFBTTtBQUNuQyxjQUFJLEdBQUcscUJBQXFCO0FBQzFCLDBCQUFjLEVBQUMsVUFBVSxPQUFPLE1BQU0sR0FBRyxjQUFhLEVBQUUsQ0FBQztBQUFBLFVBQ2pFLFdBQWlCLENBQUMsR0FBRyxRQUFRLGlCQUFpQjtBQUN0QztBQUFBLFVBQ1IsT0FBYTtBQUNMLGdCQUFJLFNBQVMsZUFBZSxFQUFFO0FBQzlCLDBCQUFjLEVBQUMsVUFBVSxNQUFNLE1BQU0sT0FBTyxLQUFJLENBQUM7QUFDakQsZ0JBQUksRUFBRSxRQUFRLE9BQU87QUFDbkIsaUJBQUcsY0FBYyxPQUFPLFFBQVEsTUFBTSxjQUFjO0FBQUEsWUFDOUQsT0FBZTtBQUNMLG9CQUFNLFlBQVk7QUFDbEIsaUJBQUcsUUFBUSxPQUFPLEtBQUssS0FBSyxJQUFJO0FBQ2hDLDBCQUFZLEVBQUU7QUFBQSxZQUN4QjtBQUFBLFVBQ0E7QUFDTSxjQUFJLEVBQUUsUUFBUSxPQUFPO0FBQUUsZUFBRyxNQUFNLGNBQWMsQ0FBQyxvQkFBSTtBQUFBLFVBQUs7QUFBQSxRQUM5RDtBQUNJLFdBQUcsSUFBSSxPQUFPLGNBQWM7QUFDNUIsV0FBRyxJQUFJLFFBQVEsY0FBYztBQUU3QixXQUFHLFFBQVEsVUFBVSxTQUFTLFNBQVUsR0FBRztBQUN6QyxjQUFJLGNBQWMsU0FBUyxDQUFDLEtBQUssZUFBZSxJQUFJLENBQUMsR0FBRztBQUFFO0FBQUEsVUFBTTtBQUNoRSxjQUFJLENBQUMsR0FBRyxlQUFlO0FBQ3JCLGVBQUcsTUFBTSxnQkFBZ0IsQ0FBQyxvQkFBSTtBQUM5QixrQkFBTSxNQUFLO0FBQ1g7QUFBQSxVQUNSO0FBR00sY0FBSSxRQUFRLElBQUksTUFBTSxPQUFPO0FBQzdCLGdCQUFNLGdCQUFnQixFQUFFO0FBQ3hCLGFBQUcsY0FBYyxLQUFLO0FBQUEsUUFDNUIsQ0FBSztBQUdELFdBQUcsUUFBUSxXQUFXLGVBQWUsU0FBVSxHQUFHO0FBQ2hELGNBQUksQ0FBQyxjQUFjLFNBQVMsQ0FBQyxHQUFHO0FBQUUsNkJBQWlCLENBQUM7QUFBQSxVQUFFO0FBQUEsUUFDNUQsQ0FBSztBQUVELFdBQUcsSUFBSSxvQkFBb0IsV0FBWTtBQUNyQyxjQUFJLFFBQVEsR0FBRyxVQUFVLE1BQU07QUFDL0IsY0FBSSxNQUFNLFdBQVc7QUFBRSxrQkFBTSxVQUFVLE1BQU0sTUFBSztBQUFBLFVBQUc7QUFDckQsZ0JBQU0sWUFBWTtBQUFBLFlBQ2hCO0FBQUEsWUFDQSxPQUFPLEdBQUcsU0FBUyxPQUFPLEdBQUcsVUFBVSxJQUFJLEdBQUcsRUFBQyxXQUFXLHVCQUFzQixDQUFDO0FBQUE7UUFFekYsQ0FBSztBQUNELFdBQUcsSUFBSSxrQkFBa0IsV0FBWTtBQUNuQyxjQUFJLE1BQU0sV0FBVztBQUNuQixrQkFBTSxLQUFJO0FBQ1Ysa0JBQU0sVUFBVSxNQUFNLE1BQUs7QUFDM0Isa0JBQU0sWUFBWTtBQUFBLFVBQzFCO0FBQUEsUUFDQSxDQUFLO0FBQUEsTUFDTDtBQUVFLG9CQUFjLFVBQVUsY0FBYyxTQUFVLFVBQVU7QUFFeEQsYUFBSyxVQUFVLGVBQWM7QUFHN0IsYUFBSyxXQUFXLEtBQUssUUFBUTtBQUM3QixZQUFJLE9BQU8sS0FBSyxHQUFHO0FBQ25CLDRCQUFvQixLQUFLLFVBQVUsS0FBSyxZQUFZLEtBQUssYUFBYSxLQUFLLGNBQWM7QUFBQSxNQUM3RjtBQUVFLG9CQUFjLFVBQVUsMkJBQTJCLFNBQVUsT0FBTztBQUVsRSxZQUFHLE9BQU87QUFDUixlQUFLLFNBQVMsYUFBYSxjQUFjLEtBQUs7QUFBQSxRQUNwRCxPQUFXO0FBQ0wsZUFBSyxTQUFTLGdCQUFnQixZQUFZO0FBQUEsUUFDaEQ7QUFBQSxNQUNBO0FBRUUsb0JBQWMsVUFBVSxtQkFBbUIsV0FBWTtBQUVyRCxZQUFJLEtBQUssS0FBSyxJQUFJLFVBQVUsR0FBRyxTQUFTbkIsT0FBTSxHQUFHO0FBQ2pELFlBQUksU0FBUyxpQkFBaUIsRUFBRTtBQUdoQyxZQUFJLEdBQUcsUUFBUSxxQkFBcUI7QUFDbEMsY0FBSSxVQUFVLGFBQWEsSUFBSUEsS0FBSSxJQUFJLFFBQU8sRUFBRyxNQUFNLEtBQUs7QUFDNUQsY0FBSSxVQUFVLFFBQVEsUUFBUSxzQkFBcUIsR0FBSSxVQUFVLFFBQVEsUUFBUSxzQkFBcUI7QUFDdEcsaUJBQU8sUUFBUSxLQUFLLElBQUksR0FBRyxLQUFLO0FBQUEsWUFBSSxRQUFRLFFBQVEsZUFBZTtBQUFBLFlBQy9CLFFBQVEsTUFBTSxRQUFRLE1BQU0sUUFBUTtBQUFBLFVBQUcsQ0FBQztBQUM1RSxpQkFBTyxTQUFTLEtBQUssSUFBSSxHQUFHLEtBQUs7QUFBQSxZQUFJLFFBQVEsUUFBUSxjQUFjO0FBQUEsWUFDOUIsUUFBUSxPQUFPLFFBQVEsT0FBTyxRQUFRO0FBQUEsVUFBSSxDQUFDO0FBQUEsUUFDdEY7QUFFSSxlQUFPO0FBQUEsTUFDWDtBQUVFLG9CQUFjLFVBQVUsZ0JBQWdCLFNBQVUsT0FBTztBQUN2RCxZQUFJLEtBQUssS0FBSyxJQUFJLFVBQVUsR0FBRztBQUMvQiw2QkFBcUIsUUFBUSxXQUFXLE1BQU0sT0FBTztBQUNyRCw2QkFBcUIsUUFBUSxjQUFjLE1BQU0sU0FBUztBQUMxRCxZQUFJLE1BQU0sU0FBUyxNQUFNO0FBQ3ZCLGVBQUssUUFBUSxNQUFNLE1BQU0sTUFBTSxRQUFRO0FBQ3ZDLGVBQUssUUFBUSxNQUFNLE9BQU8sTUFBTSxTQUFTO0FBQUEsUUFDL0M7QUFBQSxNQUNBO0FBSUUsb0JBQWMsVUFBVSxRQUFRLFNBQVUsUUFBUTtBQUNoRCxZQUFJLEtBQUssc0JBQXNCLEtBQUssYUFBYSxRQUFRO0FBQUU7QUFBQSxRQUFNO0FBQ2pFLFlBQUksS0FBSyxLQUFLO0FBQ2QsYUFBSyxZQUFZO0FBQ2pCLFlBQUksR0FBRyxxQkFBcUI7QUFDMUIsZUFBSyxZQUFZO0FBQ2pCLGNBQUksVUFBVSxHQUFHLGFBQVk7QUFDN0IsZUFBSyxTQUFTLFFBQVE7QUFDdEIsY0FBSSxHQUFHLE1BQU0sU0FBUztBQUFFLHdCQUFZLEtBQUssUUFBUTtBQUFBLFVBQUU7QUFDbkQsY0FBSSxNQUFNLGNBQWMsR0FBRztBQUFFLGlCQUFLLGVBQWU7QUFBQSxVQUFRO0FBQUEsUUFDL0QsV0FBZSxDQUFDLFFBQVE7QUFDbEIsZUFBSyxZQUFZLEtBQUssU0FBUyxRQUFRO0FBQ3ZDLGNBQUksTUFBTSxjQUFjLEdBQUc7QUFBRSxpQkFBSyxlQUFlO0FBQUEsVUFBSztBQUFBLFFBQzVEO0FBQ0ksYUFBSyxZQUFZO0FBQUEsTUFDckI7QUFFRSxvQkFBYyxVQUFVLFdBQVcsV0FBWTtBQUFFLGVBQU8sS0FBSztBQUFBLE1BQVE7QUFFckUsb0JBQWMsVUFBVSxnQkFBZ0IsV0FBWTtBQUFFLGVBQU87QUFBQSxNQUFLO0FBRWxFLG9CQUFjLFVBQVUsUUFBUSxXQUFZO0FBQzFDLFlBQUksS0FBSyxHQUFHLFFBQVEsWUFBWSxlQUFlLENBQUMsVUFBVSxVQUFVLFNBQVMsS0FBSyxRQUFRLENBQUMsS0FBSyxLQUFLLFdBQVc7QUFDOUcsY0FBSTtBQUFFLGlCQUFLLFNBQVMsTUFBSztBQUFBLFVBQUcsU0FDckIsR0FBRztBQUFBLFVBQUE7QUFBQSxRQUNoQjtBQUFBLE1BQ0E7QUFFRSxvQkFBYyxVQUFVLE9BQU8sV0FBWTtBQUFFLGFBQUssU0FBUyxLQUFJO0FBQUEsTUFBRztBQUVsRSxvQkFBYyxVQUFVLGdCQUFnQixXQUFZO0FBQ2xELGFBQUssUUFBUSxNQUFNLE1BQU0sS0FBSyxRQUFRLE1BQU0sT0FBTztBQUFBLE1BQ3ZEO0FBRUUsb0JBQWMsVUFBVSxnQkFBZ0IsV0FBWTtBQUFFLGFBQUssU0FBUTtBQUFBLE1BQUc7QUFJdEUsb0JBQWMsVUFBVSxXQUFXLFdBQVk7QUFDM0MsWUFBSW1CLFdBQVM7QUFFZixZQUFJLEtBQUssYUFBYTtBQUFFO0FBQUEsUUFBTTtBQUM5QixhQUFLLFFBQVEsSUFBSSxLQUFLLEdBQUcsUUFBUSxjQUFjLFdBQVk7QUFDekRBLG1CQUFPLEtBQUk7QUFDWCxjQUFJQSxTQUFPLEdBQUcsTUFBTSxTQUFTO0FBQUVBLHFCQUFPLFNBQVE7QUFBQSxVQUFHO0FBQUEsUUFDdkQsQ0FBSztBQUFBLE1BQ0w7QUFLRSxvQkFBYyxVQUFVLFdBQVcsV0FBWTtBQUM3QyxZQUFJLFNBQVMsT0FBTyxRQUFRO0FBQzVCLGNBQU0sY0FBYztBQUNwQixpQkFBUyxJQUFJO0FBQ1gsY0FBSSxVQUFVLE1BQU0sS0FBSTtBQUN4QixjQUFJLENBQUMsV0FBVyxDQUFDLFFBQVE7QUFBQyxxQkFBUztBQUFNLGtCQUFNLFFBQVEsSUFBSSxJQUFJLENBQUM7QUFBQSxVQUFFLE9BQzdEO0FBQUMsa0JBQU0sY0FBYztBQUFPLGtCQUFNLFNBQVE7QUFBQSxVQUFHO0FBQUEsUUFDeEQ7QUFDSSxjQUFNLFFBQVEsSUFBSSxJQUFJLENBQUM7QUFBQSxNQUMzQjtBQVFFLG9CQUFjLFVBQVUsT0FBTyxXQUFZO0FBQ3ZDLFlBQUlBLFdBQVM7QUFFZixZQUFJLEtBQUssS0FBSyxJQUFJLFFBQVEsS0FBSyxVQUFVLFlBQVksS0FBSztBQUsxRCxZQUFJLEtBQUssc0JBQXNCLEtBQUssYUFBYSxDQUFDLEdBQUcsTUFBTSxXQUN0RCxhQUFhLEtBQUssS0FBSyxDQUFDLGFBQWEsQ0FBQyxLQUFLLGFBQzVDLEdBQUcsV0FBVSxLQUFNLEdBQUcsUUFBUSxnQkFBZ0IsR0FBRyxNQUFNLFFBQ3pEO0FBQUUsaUJBQU87QUFBQSxRQUFLO0FBRWhCLFlBQUksT0FBTyxNQUFNO0FBRWpCLFlBQUksUUFBUSxhQUFhLENBQUMsR0FBRyxrQkFBaUIsR0FBSTtBQUFFLGlCQUFPO0FBQUEsUUFBSztBQUloRSxZQUFJLE1BQU0sY0FBYyxLQUFLLEtBQUssaUJBQWlCLFFBQy9DLE9BQU8sa0JBQWtCLEtBQUssSUFBSSxHQUFHO0FBQ3ZDLGFBQUcsUUFBUSxNQUFNLE1BQUs7QUFDdEIsaUJBQU87QUFBQSxRQUNiO0FBRUksWUFBSSxHQUFHLElBQUksT0FBTyxHQUFHLFFBQVEsbUJBQW1CO0FBQzlDLGNBQUksUUFBUSxLQUFLLFdBQVcsQ0FBQztBQUM3QixjQUFJLFNBQVMsUUFBVSxDQUFDLFdBQVc7QUFBRSx3QkFBWTtBQUFBLFVBQVM7QUFDMUQsY0FBSSxTQUFTLE1BQVE7QUFBRSxpQkFBSyxNQUFLO0FBQUksbUJBQU8sS0FBSyxHQUFHLFlBQVksTUFBTTtBQUFBLFVBQUM7QUFBQSxRQUM3RTtBQUVJLFlBQUksT0FBTyxHQUFHLElBQUksS0FBSyxJQUFJLFVBQVUsUUFBUSxLQUFLLE1BQU07QUFDeEQsZUFBTyxPQUFPLEtBQUssVUFBVSxXQUFXLElBQUksS0FBSyxLQUFLLFdBQVcsSUFBSSxHQUFHO0FBQUUsWUFBRTtBQUFBLFFBQUs7QUFFakYsZ0JBQVEsSUFBSSxXQUFZO0FBQ3RCO0FBQUEsWUFBZTtBQUFBLFlBQUksS0FBSyxNQUFNLElBQUk7QUFBQSxZQUFHLFVBQVUsU0FBUztBQUFBLFlBQ3pDO0FBQUEsWUFBTUEsU0FBTyxZQUFZLGFBQWE7QUFBQSxVQUFJO0FBR3pELGNBQUksS0FBSyxTQUFTLE9BQVEsS0FBSyxRQUFRLElBQUksSUFBSSxJQUFJO0FBQUUsa0JBQU0sUUFBUUEsU0FBTyxZQUFZO0FBQUEsVUFBRyxPQUNwRjtBQUFFQSxxQkFBTyxZQUFZO0FBQUEsVUFBSztBQUUvQixjQUFJQSxTQUFPLFdBQVc7QUFDcEJBLHFCQUFPLFVBQVUsTUFBTSxNQUFLO0FBQzVCQSxxQkFBTyxVQUFVLFFBQVEsR0FBRztBQUFBLGNBQVNBLFNBQU8sVUFBVTtBQUFBLGNBQU8sR0FBRyxVQUFVLElBQUk7QUFBQSxjQUMzQyxFQUFDLFdBQVcsdUJBQXNCO0FBQUEsWUFBQztBQUFBLFVBQzlFO0FBQUEsUUFDQSxDQUFLO0FBQ0QsZUFBTztBQUFBLE1BQ1g7QUFFRSxvQkFBYyxVQUFVLGVBQWUsV0FBWTtBQUNqRCxZQUFJLEtBQUssZUFBZSxLQUFLLEtBQUksR0FBSTtBQUFFLGVBQUssY0FBYztBQUFBLFFBQU07QUFBQSxNQUNwRTtBQUVFLG9CQUFjLFVBQVUsYUFBYSxXQUFZO0FBQy9DLFlBQUksTUFBTSxjQUFjLEdBQUc7QUFBRSxlQUFLLGVBQWU7QUFBQSxRQUFLO0FBQ3RELGFBQUssU0FBUTtBQUFBLE1BQ2pCO0FBRUUsb0JBQWMsVUFBVSxnQkFBZ0IsU0FBVSxHQUFHO0FBQ25ELFlBQUksUUFBUSxNQUFNLEtBQUssTUFBTSxJQUFJLFVBQVUsR0FBRyxTQUFTLEtBQUssTUFBTTtBQUNsRSxZQUFJLE1BQU0sb0JBQW9CO0FBQUUsZ0JBQU0sbUJBQWtCO0FBQUEsUUFBRztBQUMzRCxZQUFJLE1BQU0sYUFBYSxJQUFJLENBQUMsR0FBRyxZQUFZLFFBQVEsU0FBUztBQUM1RCxZQUFJLENBQUMsT0FBTyxRQUFRO0FBQUU7QUFBQSxRQUFNO0FBSTVCLFlBQUksUUFBUSxHQUFHLFFBQVE7QUFDdkIsWUFBSSxTQUFTLEdBQUcsSUFBSSxJQUFJLFNBQVMsR0FBRyxLQUFLLElBQ3ZDO0FBQUUsb0JBQVUsSUFBSSxZQUFZLEVBQUUsR0FBRyxLQUFLLGdCQUFnQixHQUFHLEdBQUcsY0FBYztBQUFBLFFBQUU7QUFFOUUsWUFBSSxTQUFTLEdBQUcsTUFBTSxTQUFTLGdCQUFnQixNQUFNLFFBQVEsTUFBTTtBQUNuRSxZQUFJLGFBQWEsTUFBTSxRQUFRLGFBQWEsc0JBQXFCO0FBQ2pFLGNBQU0sUUFBUSxNQUFNLFVBQVU7QUFDOUIsV0FBRyxNQUFNLFVBQVUsaUVBQWlFLEVBQUUsVUFBVSxXQUFXLE1BQU0sS0FBSyxnQkFBZ0IsRUFBRSxVQUFVLFdBQVcsT0FBTyxLQUFLLDRDQUE0QyxLQUFLLDZCQUE2QixpQkFBaUI7QUFDeFEsWUFBSTtBQUNKLFlBQUksUUFBUTtBQUFFLHVCQUFhLEdBQUcsY0FBYyxZQUFZO0FBQUEsUUFBUTtBQUNoRSxnQkFBUSxNQUFNLE1BQUs7QUFDbkIsWUFBSSxRQUFRO0FBQUUsYUFBRyxjQUFjLFlBQVksU0FBUyxNQUFNLFVBQVU7QUFBQSxRQUFFO0FBQ3RFLGdCQUFRLE1BQU0sTUFBSztBQUVuQixZQUFJLENBQUMsR0FBRyxrQkFBaUIsR0FBSTtBQUFFLGFBQUcsUUFBUSxNQUFNLFlBQVk7QUFBQSxRQUFJO0FBQ2hFLGNBQU0scUJBQXFCO0FBQzNCLGdCQUFRLG9CQUFvQixHQUFHLElBQUk7QUFDbkMscUJBQWEsUUFBUSxrQkFBa0I7QUFLdkMsaUJBQVMsdUJBQXVCO0FBQzlCLGNBQUksR0FBRyxrQkFBa0IsTUFBTTtBQUM3QixnQkFBSSxXQUFXLEdBQUcsa0JBQWlCO0FBQ25DLGdCQUFJLFNBQVMsT0FBWSxXQUFXLEdBQUcsUUFBUTtBQUMvQyxlQUFHLFFBQVE7QUFDWCxlQUFHLFFBQVE7QUFDWCxrQkFBTSxZQUFZLFdBQVcsS0FBSztBQUNsQyxlQUFHLGlCQUFpQjtBQUFHLGVBQUcsZUFBZSxPQUFPO0FBR2hELG9CQUFRLG9CQUFvQixHQUFHLElBQUk7QUFBQSxVQUMzQztBQUFBLFFBQ0E7QUFDSSxpQkFBUyxTQUFTO0FBQ2hCLGNBQUksTUFBTSxzQkFBc0IsUUFBUTtBQUFFO0FBQUEsVUFBTTtBQUNoRCxnQkFBTSxxQkFBcUI7QUFDM0IsZ0JBQU0sUUFBUSxNQUFNLFVBQVU7QUFDOUIsYUFBRyxNQUFNLFVBQVU7QUFDbkIsY0FBSSxNQUFNLGFBQWEsR0FBRztBQUFFLG9CQUFRLFdBQVcsYUFBYSxRQUFRLFNBQVMsWUFBWSxTQUFTO0FBQUEsVUFBRTtBQUdwRyxjQUFJLEdBQUcsa0JBQWtCLE1BQU07QUFDN0IsZ0JBQUksQ0FBQyxNQUFPLE1BQU0sYUFBYSxHQUFJO0FBQUUsbUNBQW9CO0FBQUEsWUFBRztBQUM1RCxnQkFBSXJCLEtBQUksR0FBRyxPQUFPLFdBQVk7QUFDNUIsa0JBQUksUUFBUSxxQkFBcUIsR0FBRyxJQUFJLE9BQU8sR0FBRyxrQkFBa0IsS0FDaEUsR0FBRyxlQUFlLEtBQUssTUFBTSxhQUFhLEtBQVU7QUFDdEQsMEJBQVUsSUFBSSxTQUFTLEVBQUUsRUFBRTtBQUFBLGNBQ3ZDLFdBQXFCQSxPQUFNLElBQUk7QUFDbkIsd0JBQVEscUJBQXFCLFdBQVcsTUFBTSxHQUFHO0FBQUEsY0FDN0QsT0FBaUI7QUFDTCx3QkFBUSxvQkFBb0I7QUFDNUIsd0JBQVEsTUFBTSxNQUFLO0FBQUEsY0FDL0I7QUFBQSxZQUNBO0FBQ1Esb0JBQVEscUJBQXFCLFdBQVcsTUFBTSxHQUFHO0FBQUEsVUFDekQ7QUFBQSxRQUNBO0FBRUksWUFBSSxNQUFNLGNBQWMsR0FBRztBQUFFLCtCQUFvQjtBQUFBLFFBQUc7QUFDcEQsWUFBSSxtQkFBbUI7QUFDckIsaUJBQU8sQ0FBQztBQUNSLGNBQUksVUFBVSxXQUFZO0FBQ3hCLGdCQUFJLFFBQVEsV0FBVyxPQUFPO0FBQzlCLHVCQUFXLFFBQVEsRUFBRTtBQUFBLFVBQzdCO0FBQ00sYUFBRyxRQUFRLFdBQVcsT0FBTztBQUFBLFFBQ25DLE9BQVc7QUFDTCxxQkFBVyxRQUFRLEVBQUU7QUFBQSxRQUMzQjtBQUFBLE1BQ0E7QUFFRSxvQkFBYyxVQUFVLGtCQUFrQixTQUFVLEtBQUs7QUFDdkQsWUFBSSxDQUFDLEtBQUs7QUFBRSxlQUFLLE1BQUs7QUFBQSxRQUFHO0FBQ3pCLGFBQUssU0FBUyxXQUFXLE9BQU87QUFDaEMsYUFBSyxTQUFTLFdBQVcsQ0FBQyxDQUFDO0FBQUEsTUFDL0I7QUFFRSxvQkFBYyxVQUFVLGdCQUFnQixXQUFZO0FBQUEsTUFBQTtBQUVwRCxvQkFBYyxVQUFVLHdCQUF3QjtBQUVoRCxlQUFTLGFBQWEsVUFBVSxTQUFTO0FBQ3ZDLGtCQUFVLFVBQVUsUUFBUSxPQUFPLElBQUksQ0FBQTtBQUN2QyxnQkFBUSxRQUFRLFNBQVM7QUFDekIsWUFBSSxDQUFDLFFBQVEsWUFBWSxTQUFTLFVBQ2hDO0FBQUUsa0JBQVEsV0FBVyxTQUFTO0FBQUEsUUFBUztBQUN6QyxZQUFJLENBQUMsUUFBUSxlQUFlLFNBQVMsYUFDbkM7QUFBRSxrQkFBUSxjQUFjLFNBQVM7QUFBQSxRQUFZO0FBRy9DLFlBQUksUUFBUSxhQUFhLE1BQU07QUFDN0IsY0FBSSxXQUFXLFVBQVUsU0FBUyxRQUFRLENBQUM7QUFDM0Msa0JBQVEsWUFBWSxZQUFZLFlBQzlCLFNBQVMsYUFBYSxXQUFXLEtBQUssUUFBUSxZQUFZLFNBQVM7QUFBQSxRQUMzRTtBQUVJLGlCQUFTLE9BQU87QUFBQyxtQkFBUyxRQUFRLEdBQUcsU0FBUTtBQUFBLFFBQUc7QUFFaEQsWUFBSTtBQUNKLFlBQUksU0FBUyxNQUFNO0FBQ2pCLGFBQUcsU0FBUyxNQUFNLFVBQVUsSUFBSTtBQUVoQyxjQUFJLENBQUMsUUFBUSx3QkFBd0I7QUFDbkMsZ0JBQUksT0FBTyxTQUFTO0FBQ3BCLHlCQUFhLEtBQUs7QUFDbEIsZ0JBQUk7QUFDRixrQkFBSSxnQkFBZ0IsS0FBSyxTQUFTLFdBQVk7QUFDNUMscUJBQUk7QUFDSixxQkFBSyxTQUFTO0FBQ2QscUJBQUssT0FBTTtBQUNYLHFCQUFLLFNBQVM7QUFBQSxjQUMxQjtBQUFBLFlBQ0EsU0FBZ0IsR0FBRztBQUFBLFlBQUE7QUFBQSxVQUNuQjtBQUFBLFFBQ0E7QUFFSSxnQkFBUSxhQUFhLFNBQVVpQyxLQUFJO0FBQ2pDLFVBQUFBLElBQUcsT0FBTztBQUNWLFVBQUFBLElBQUcsY0FBYyxXQUFZO0FBQUUsbUJBQU87QUFBQSxVQUFTO0FBQy9DLFVBQUFBLElBQUcsYUFBYSxXQUFZO0FBQzFCLFlBQUFBLElBQUcsYUFBYTtBQUNoQixpQkFBSTtBQUNKLHFCQUFTLFdBQVcsWUFBWUEsSUFBRyxrQkFBaUIsQ0FBRTtBQUN0RCxxQkFBUyxNQUFNLFVBQVU7QUFDekIsZ0JBQUksU0FBUyxNQUFNO0FBQ2pCLGtCQUFJLFNBQVMsTUFBTSxVQUFVLElBQUk7QUFDakMsa0JBQUksQ0FBQyxRQUFRLDBCQUEwQixPQUFPLFNBQVMsS0FBSyxVQUFVLFlBQ3BFO0FBQUUseUJBQVMsS0FBSyxTQUFTO0FBQUEsY0FBVztBQUFBLFlBQ2hEO0FBQUEsVUFDQTtBQUFBLFFBQ0E7QUFFSSxpQkFBUyxNQUFNLFVBQVU7QUFDekIsWUFBSSxLQUFLO0FBQUEsVUFBVyxTQUFVLE1BQU07QUFBRSxtQkFBTyxTQUFTLFdBQVcsYUFBYSxNQUFNLFNBQVMsV0FBVztBQUFBLFVBQUU7QUFBQSxVQUN4RztBQUFBLFFBQU87QUFDVCxlQUFPO0FBQUEsTUFDWDtBQUVFLGVBQVMsZUFBZUwsYUFBWTtBQUNsQyxRQUFBQSxZQUFXLE1BQU07QUFDakIsUUFBQUEsWUFBVyxLQUFLO0FBQ2hCLFFBQUFBLFlBQVcsbUJBQW1CO0FBQzlCLFFBQUFBLFlBQVcsTUFBTTtBQUNqQixRQUFBQSxZQUFXLGFBQWE7QUFDeEIsUUFBQUEsWUFBVyxjQUFjO0FBQ3pCLFFBQUFBLFlBQVcsYUFBYTtBQUN4QixRQUFBQSxZQUFXLGFBQWE7QUFDeEIsUUFBQUEsWUFBVyxPQUFPO0FBQ2xCLFFBQUFBLFlBQVcsU0FBUztBQUNwQixRQUFBQSxZQUFXLE9BQU87QUFDbEIsUUFBQUEsWUFBVyxZQUFZO0FBQ3ZCLFFBQUFBLFlBQVcsaUJBQWlCO0FBQzVCLFFBQUFBLFlBQVcsTUFBTTtBQUNqQixRQUFBQSxZQUFXLFNBQVM7QUFDcEIsUUFBQUEsWUFBVyxRQUFRO0FBQ25CLFFBQUFBLFlBQVcsWUFBWTtBQUN2QixRQUFBQSxZQUFXLGNBQWM7QUFDekIsUUFBQUEsWUFBVyxVQUFVO0FBQ3JCLFFBQUFBLFlBQVcsaUJBQWlCO0FBQzVCLFFBQUFBLFlBQVcsYUFBYTtBQUN4QixRQUFBQSxZQUFXLFlBQVk7QUFDdkIsUUFBQUEsWUFBVyxhQUFhO0FBQ3hCLFFBQUFBLFlBQVcsWUFBWTtBQUN2QixRQUFBQSxZQUFXLFdBQVc7QUFDdEIsUUFBQUEsWUFBVyxTQUFTO0FBQ3BCLFFBQUFBLFlBQVcsVUFBVTtBQUNyQixRQUFBQSxZQUFXLGdCQUFnQjtBQUMzQixRQUFBQSxZQUFXLFlBQVk7QUFDdkIsUUFBQUEsWUFBVyxrQkFBa0I7QUFDN0IsUUFBQUEsWUFBVyxlQUFlO0FBQzFCLFFBQUFBLFlBQVcsbUJBQW1CO0FBQzlCLFFBQUFBLFlBQVcsYUFBYTtBQUN4QixRQUFBQSxZQUFXLGFBQWE7QUFDeEIsUUFBQUEsWUFBVyxtQkFBbUI7QUFDOUIsUUFBQUEsWUFBVyxvQkFBb0I7QUFDL0IsUUFBQUEsWUFBVyxTQUFTO0FBQ3BCLFFBQUFBLFlBQVcsV0FBVztBQUN0QixRQUFBQSxZQUFXLFdBQVc7QUFDdEIsUUFBQUEsWUFBVyxVQUFVO0FBQ3JCLFFBQUFBLFlBQVcsV0FBVztBQUFBLE1BQzFCO0FBSUUsb0JBQWMsVUFBVTtBQUV4Qix1QkFBaUIsVUFBVTtBQUczQixVQUFJLGVBQWUsZ0RBQWdELE1BQU0sR0FBRztBQUM1RSxlQUFTLFFBQVEsSUFBSSxXQUFXO0FBQUUsWUFBSSxJQUFJLFVBQVUsZUFBZSxJQUFJLEtBQUssUUFBUSxjQUFjLElBQUksSUFBSSxHQUN4RztBQUFFLHFCQUFXLFVBQVUsSUFBSSxJQUFLLDBCQUFTLFFBQVE7QUFDL0MsbUJBQU8sV0FBVztBQUFDLHFCQUFPLE9BQU8sTUFBTSxLQUFLLEtBQUssU0FBUztBQUFBLFlBQUM7QUFBQSxVQUNqRSxHQUFPLElBQUksVUFBVSxJQUFJLENBQUM7QUFBQSxRQUFFO0FBQUEsTUFBRTtBQUU1QixpQkFBVyxHQUFHO0FBQ2QsaUJBQVcsY0FBYyxFQUFDLFlBQVksZUFBZSxtQkFBbUIscUJBQW9CO0FBSzVGLGlCQUFXLGFBQWEsU0FBUyxNQUFtQjtBQUNsRCxZQUFJLENBQUMsV0FBVyxTQUFTLFFBQVEsUUFBUSxRQUFRO0FBQUUscUJBQVcsU0FBUyxPQUFPO0FBQUEsUUFBSztBQUNuRixtQkFBVyxNQUFNLE1BQU0sU0FBUztBQUFBLE1BQ3BDO0FBRUUsaUJBQVcsYUFBYTtBQUd4QixpQkFBVyxXQUFXLFFBQVEsV0FBWTtBQUFFLGVBQVEsRUFBQyxPQUFPLFNBQVUsUUFBUTtBQUFFLGlCQUFPLE9BQU8sVUFBUztBQUFBLFFBQUcsRUFBRTtBQUFBLE1BQUcsQ0FBRTtBQUNqSCxpQkFBVyxXQUFXLGNBQWMsTUFBTTtBQUkxQyxpQkFBVyxrQkFBa0IsU0FBVSxNQUFNLE1BQU07QUFDakQsbUJBQVcsVUFBVSxJQUFJLElBQUk7QUFBQSxNQUNqQztBQUNFLGlCQUFXLHFCQUFxQixTQUFVLE1BQU0sTUFBTTtBQUNwRCxZQUFJLFVBQVUsSUFBSSxJQUFJO0FBQUEsTUFDMUI7QUFFRSxpQkFBVyxlQUFlO0FBRTFCLHFCQUFlLFVBQVU7QUFFekIsaUJBQVcsVUFBVTtBQUVyQixhQUFPO0FBQUEsSUFFVDs7OzsiLCJ4X2dvb2dsZV9pZ25vcmVMaXN0IjpbMF19
